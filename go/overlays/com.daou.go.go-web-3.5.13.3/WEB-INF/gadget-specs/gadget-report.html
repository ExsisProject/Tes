<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <title>작성할 보고서</title>
    <meta name = "gadget:name-ko" content="작성할 보고" />
    <meta name = "gadget:name-en" content="Reports to be submitted" />
    <meta name = "gadget:name-ja" content="作成するレポート" />
    <meta name = "gadget:name-zhcn" content="創建的報告書" />
    <meta name = "gadget:name-zhtw" content="创建的报告书" />
    <meta name = "gadget:name-vi" content="Báo cáo sẽ viết" />
    <meta name = "gadget:description" content="작성할 보고서를 표시하는 가젯입니다." />
    <meta name = "gadget:version" content="1.5.0" />
    <meta name = "gadget:app-dependency" content="REPORT" />
    <meta name = "gadget:thumbnail" content="gadget_report.png" />
    
    <meta name = "locale" content="ko" />
    <meta name = "contextRoot" content="/" />
    <link rel="stylesheet" href="css/go-gadget-standalone.css" media="screen, print" />

    <!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script type="text/javascript" src="js/go-gadget-standalone.js"></script>

    <!-- ajax mock: 개발시 크로스 도메인 문제가 발생할 경우 ajax mock request를 이용하여 테스트 할 수 있습니다-->
    <script type="text/javascript">
    $.ajaxMock.register(GO.config("contextRoot")+ 'api/report/undone', {
        responseText: {
            "data" : [ 
                       {
                "id" : 1,
                "createdAt" : "2013-12-20T14:00:08",
                "updatedAt" : "2013-12-20T14:00:08",
                "series" : 1,
                "closedAt" : "2013-12-27T14:00:07",
                "currentDate" : "2013-12-20T15:18:58",
                "totalSeries" : 1,
                "logCount" : 0,
                "commentCount" : 0,
                "prevSeriesId" : 0,
                "nextSeriesId" : 0,
                "department" : {
                  "id" : 6,
                  "name" : "캘린더팀1",
                  "code" : "",
                  "email" : "dept4@daou.co.kr",
                  "emailId" : "dept4",
                  "memberCount" : 11,
                  "childrenCount" : 0,
                  "parentId" : 2,
                  "parentCode" : "101",
                  "sortOrder" : 1,
                  "depth" : 0,
                  "csvData" : [ "", "101", "1", "캘린더팀", "dept4", null ]
                },
                "dones" : [],
                "undones" : [ {
                  "id" : 1,
                  "name" : "김태환1",
                  "email" : "test27@daou.co.kr",
                  "position" : "사원",
                  "thumbnail" : "/go/resources/images/photo_profile_small.jpg",
                  "reportId" : 5,
                  "commentCount" : 0,
                  "actions" : {
                    "updatable" : false,
                    "removable" : true,
                    "writable" : false,
                    "managable" : true,
                    "readable" : true
                  }
                }, {
                  "id" : 26,
                  "name" : "어진선1",
                  "email" : "test25@daou.co.kr",
                  "position" : "과장",
                  "thumbnail" : "/go/resources/images/photo_profile_small.jpg",
                  "reportId" : 7,
                  "commentCount" : 0,
                  "actions" : {
                    "updatable" : false,
                    "removable" : true,
                    "writable" : false,
                    "managable" : true,
                    "readable" : true
                  }
                }],
                "exclusion" : [ ],
                "folder" : {
                  "id" : 1,
                  "createdAt" : "2013-12-20T14:00:07",
                  "updatedAt" : "2013-12-20T14:00:08",
                  "recurrence" : "FREQ=WEEKLY;INTERVAL=1;BYDAY=FR",
                  "name" : "ㅁㄴㅇㄻㄴ",
                  "description" : "ㅇㄻㄴㅇㄻㄴㅇㄹ",
                  "formFlag" : false,
                  "totalCount" : 11,
                  "totalSeries" : 1,
                  "type" : "PERIODIC",
                  "publicOption" : "OPEN",
                  "status" : "ACTIVE",
                  "department" : {
                    "id" : 6,
                    "name" : "캘린더팀2",
                    "code" : "",
                    "email" : "dept4@daou.co.kr",
                    "emailId" : "dept4",
                    "memberCount" : 11,
                    "childrenCount" : 0,
                    "parentId" : 2,
                    "parentCode" : "101",
                    "sortOrder" : 1,
                    "depth" : 0,
                    "csvData" : [ "", "101", "1", "캘린더팀", "dept4", null ]
                  },
                  "reporter" : {
                    "id" : 3,
                    "nodes" : [ {
                      "id" : 2,
                      "nodeId" : 6,
                      "nodeType" : "department",
                      "nodeValue" : "캘린더팀",
                      "members" : [ ]
                    } ]
                  },
                  "referrer" : {
                    "id" : 2,
                    "nodes" : [ ]
                  },
                  "admin" : {
                    "id" : 1,
                    "nodes" : [ {
                      "id" : 1,
                      "nodeId" : 2,
                      "nodeType" : "user",
                      "nodeValue" : "진범동1 부회장",
                      "members" : [ ]
                    } ]
                  },
                  "actions" : {
                    "updatable" : false,
                    "removable" : false,
                    "writable" : true,
                    "managable" : true,
                    "readable" : false
                  },
                  "favorite" : false,
                  "attachSize" : 0,
                  "newReport" : false
                },
                "actions" : {
                  "updatable" : false,
                  "removable" : false,
                  "writable" : false,
                  "managable" : true,
                  "readable" : false
                }
              } 
                ,
                {
                    "id" : 2,
                    "createdAt" : "2013-12-20T14:00:08",
                    "updatedAt" : "2013-12-20T14:00:08",
                    "series" : 1,
                    "closedAt" : "2013-12-20T14:00:07",
                    "currentDate" : "2013-12-20T15:18:58",
                    "totalSeries" : 1,
                    "logCount" : 0,
                    "commentCount" : 0,
                    "prevSeriesId" : 0,
                    "nextSeriesId" : 0,
                    "department" : {
                      "id" : 6,
                      "name" : "캘린더팀3",
                      "code" : "",
                      "email" : "dept4@daou.co.kr",
                      "emailId" : "dept4",
                      "memberCount" : 11,
                      "childrenCount" : 0,
                      "parentId" : 2,
                      "parentCode" : "101",
                      "sortOrder" : 1,
                      "depth" : 0,
                      "csvData" : [ "", "101", "1", "캘린더팀", "dept4", null ]
                    },
                    "dones" : [ 
                        {
                            "id" : 28,
                            "name" : "김태환1",
                            "email" : "test27@daou.co.kr",
                            "position" : "사원",
                            "thumbnail" : "/go/resources/images/photo_profile_small.jpg",
                            "reportId" : 5,
                            "commentCount" : 0,
                            "actions" : {
                              "updatable" : false,
                              "removable" : true,
                              "writable" : false,
                              "managable" : true,
                              "readable" : true
                            }
                          }],
                    "undones" : [ {
                      "id" : 1,
                      "name" : "김태환1",
                      "email" : "test27@daou.co.kr",
                      "position" : "사원",
                      "thumbnail" : "/go/resources/images/photo_profile_small.jpg",
                      "reportId" : 5,
                      "commentCount" : 0,
                      "actions" : {
                        "updatable" : false,
                        "removable" : true,
                        "writable" : false,
                        "managable" : true,
                        "readable" : true
                      }
                    }, {
                      "id" : 26,
                      "name" : "어진선1",
                      "email" : "test25@daou.co.kr",
                      "position" : "과장",
                      "thumbnail" : "/go/resources/images/photo_profile_small.jpg",
                      "reportId" : 7,
                      "commentCount" : 0,
                      "actions" : {
                        "updatable" : false,
                        "removable" : true,
                        "writable" : false,
                        "managable" : true,
                        "readable" : true
                      }
                    }],
                    "exclusion" : [ ],
                    "folder" : {
                      "id" : 1,
                      "createdAt" : "2013-12-20T14:00:07",
                      "updatedAt" : "2013-12-20T14:00:08",
                      "recurrence" : "FREQ=WEEKLY;INTERVAL=1;BYDAY=FR",
                      "name" : "ㅁㄴㅇㄻㄴ",
                      "description" : "ㅇㄻㄴㅇㄻㄴㅇㄹ",
                      "formFlag" : false,
                      "totalCount" : 11,
                      "totalSeries" : 1,
                      "type" : "PERIODIC",
                      "publicOption" : "OPEN",
                      "status" : "ACTIVE",
                      "department" : {
                        "id" : 6,
                        "name" : "캘린더팀",
                        "code" : "",
                        "email" : "dept4@daou.co.kr",
                        "emailId" : "dept4",
                        "memberCount" : 11,
                        "childrenCount" : 0,
                        "parentId" : 2,
                        "parentCode" : "101",
                        "sortOrder" : 1,
                        "depth" : 0,
                        "csvData" : [ "", "101", "1", "캘린더팀", "dept4", null ]
                      },
                      "reporter" : {
                        "id" : 3,
                        "nodes" : [ {
                          "id" : 2,
                          "nodeId" : 6,
                          "nodeType" : "department",
                          "nodeValue" : "캘린더팀",
                          "members" : [ ]
                        } ]
                      },
                      "referrer" : {
                        "id" : 2,
                        "nodes" : [ ]
                      },
                      "admin" : {
                        "id" : 1,
                        "nodes" : [ {
                          "id" : 1,
                          "nodeId" : 2,
                          "nodeType" : "user",
                          "nodeValue" : "진범동1 부회장",
                          "members" : [ ]
                        } ]
                      },
                      "actions" : {
                        "updatable" : false,
                        "removable" : false,
                        "writable" : true,
                        "managable" : true,
                        "readable" : false
                      },
                      "favorite" : false,
                      "attachSize" : 0,
                      "newReport" : false
                    },
                    "actions" : {
                      "updatable" : false,
                      "removable" : false,
                      "writable" : false,
                      "managable" : true,
                      "readable" : false
                    }
                  },
                  {
                      "id" : 3,
                      "createdAt" : "2013-12-20T14:00:08",
                      "updatedAt" : "2013-12-20T14:00:08",
                      "series" : 1,
                      "closedAt" : "2013-12-20T14:00:07",
                      "currentDate" : "2013-12-20T15:18:58",
                      "totalSeries" : 1,
                      "logCount" : 0,
                      "commentCount" : 0,
                      "prevSeriesId" : 0,
                      "nextSeriesId" : 0,
                      "department" : {
                        "id" : 6,
                        "name" : "캘린더팀4",
                        "code" : "",
                        "email" : "dept4@daou.co.kr",
                        "emailId" : "dept4",
                        "memberCount" : 11,
                        "childrenCount" : 0,
                        "parentId" : 2,
                        "parentCode" : "101",
                        "sortOrder" : 1,
                        "depth" : 0,
                        "csvData" : [ "", "101", "1", "캘린더팀", "dept4", null ]
                      },
                      "dones" : [ 
                          {
                              "id" : 28,
                              "name" : "김태환1",
                              "email" : "test27@daou.co.kr",
                              "position" : "사원",
                              "thumbnail" : "/go/resources/images/photo_profile_small.jpg",
                              "reportId" : 5,
                              "commentCount" : 0,
                              "actions" : {
                                "updatable" : false,
                                "removable" : true,
                                "writable" : false,
                                "managable" : true,
                                "readable" : true
                              }
                            }],
                      "undones" : [ {
                        "id" : 1,
                        "name" : "김태환1",
                        "email" : "test27@daou.co.kr",
                        "position" : "사원",
                        "thumbnail" : "/go/resources/images/photo_profile_small.jpg",
                        "reportId" : 5,
                        "commentCount" : 0,
                        "actions" : {
                          "updatable" : false,
                          "removable" : true,
                          "writable" : false,
                          "managable" : true,
                          "readable" : true
                        }
                      }, {
                        "id" : 26,
                        "name" : "어진선1",
                        "email" : "test25@daou.co.kr",
                        "position" : "과장",
                        "thumbnail" : "/go/resources/images/photo_profile_small.jpg",
                        "reportId" : 7,
                        "commentCount" : 0,
                        "actions" : {
                          "updatable" : false,
                          "removable" : true,
                          "writable" : false,
                          "managable" : true,
                          "readable" : true
                        }
                      }],
                      "exclusion" : [ ],
                      "folder" : {
                        "id" : 1,
                        "createdAt" : "2013-12-20T14:00:07",
                        "updatedAt" : "2013-12-20T14:00:08",
                        "recurrence" : "FREQ=WEEKLY;INTERVAL=1;BYDAY=FR",
                        "name" : "ㅁㄴㅇㄻㄴ",
                        "description" : "ㅇㄻㄴㅇㄻㄴㅇㄹ",
                        "formFlag" : false,
                        "totalCount" : 11,
                        "totalSeries" : 1,
                        "type" : "PERIODIC",
                        "publicOption" : "OPEN",
                        "status" : "ACTIVE",
                        "department" : {
                          "id" : 6,
                          "name" : "캘린더팀",
                          "code" : "",
                          "email" : "dept4@daou.co.kr",
                          "emailId" : "dept4",
                          "memberCount" : 11,
                          "childrenCount" : 0,
                          "parentId" : 2,
                          "parentCode" : "101",
                          "sortOrder" : 1,
                          "depth" : 0,
                          "csvData" : [ "", "101", "1", "캘린더팀", "dept4", null ]
                        },
                        "reporter" : {
                          "id" : 3,
                          "nodes" : [ {
                            "id" : 2,
                            "nodeId" : 6,
                            "nodeType" : "department",
                            "nodeValue" : "캘린더팀",
                            "members" : [ ]
                          } ]
                        },
                        "referrer" : {
                          "id" : 2,
                          "nodes" : [ ]
                        },
                        "admin" : {
                          "id" : 1,
                          "nodes" : [ {
                            "id" : 1,
                            "nodeId" : 2,
                            "nodeType" : "user",
                            "nodeValue" : "진범동1 부회장",
                            "members" : [ ]
                          } ]
                        },
                        "actions" : {
                          "updatable" : false,
                          "removable" : false,
                          "writable" : true,
                          "managable" : true,
                          "readable" : false
                        },
                        "favorite" : false,
                        "attachSize" : 0,
                        "newReport" : false
                      },
                      "actions" : {
                        "updatable" : false,
                        "removable" : false,
                        "writable" : false,
                        "managable" : true,
                        "readable" : false
                      }
                    },
                    {
                        "id" : 4,
                        "createdAt" : "2013-12-20T14:00:08",
                        "updatedAt" : "2013-12-20T14:00:08",
                        "series" : 1,
                        "closedAt" : "2013-12-27T14:00:07",
                        "currentDate" : "2013-12-20T15:18:58",
                        "totalSeries" : 1,
                        "logCount" : 0,
                        "commentCount" : 0,
                        "prevSeriesId" : 0,
                        "nextSeriesId" : 0,
                        "department" : {
                          "id" : 6,
                          "name" : "캘린더팀",
                          "code" : "",
                          "email" : "dept4@daou.co.kr",
                          "emailId" : "dept4",
                          "memberCount" : 11,
                          "childrenCount" : 0,
                          "parentId" : 2,
                          "parentCode" : "101",
                          "sortOrder" : 1,
                          "depth" : 0,
                          "csvData" : [ "", "101", "1", "캘린더팀", "dept4", null ]
                        },
                        "dones" : [ 
                            {
                                "id" : 28,
                                "name" : "김태환1",
                                "email" : "test27@daou.co.kr",
                                "position" : "사원",
                                "thumbnail" : "/go/resources/images/photo_profile_small.jpg",
                                "reportId" : 5,
                                "commentCount" : 0,
                                "actions" : {
                                  "updatable" : false,
                                  "removable" : true,
                                  "writable" : false,
                                  "managable" : true,
                                  "readable" : true
                                }
                              }],
                        "undones" : [ {
                          "id" : 1,
                          "name" : "김태환1",
                          "email" : "test27@daou.co.kr",
                          "position" : "사원",
                          "thumbnail" : "/go/resources/images/photo_profile_small.jpg",
                          "reportId" : 5,
                          "commentCount" : 0,
                          "actions" : {
                            "updatable" : false,
                            "removable" : true,
                            "writable" : false,
                            "managable" : true,
                            "readable" : true
                          }
                        }, {
                          "id" : 26,
                          "name" : "어진선1",
                          "email" : "test25@daou.co.kr",
                          "position" : "과장",
                          "thumbnail" : "/go/resources/images/photo_profile_small.jpg",
                          "reportId" : 7,
                          "commentCount" : 0,
                          "actions" : {
                            "updatable" : false,
                            "removable" : true,
                            "writable" : false,
                            "managable" : true,
                            "readable" : true
                          }
                        }],
                        "exclusion" : [ ],
                        "folder" : {
                          "id" : 1,
                          "createdAt" : "2013-12-20T14:00:07",
                          "updatedAt" : "2013-12-20T14:00:08",
                          "recurrence" : "FREQ=WEEKLY;INTERVAL=1;BYDAY=FR",
                          "name" : "ㅁㄴㅇㄻㄴ",
                          "description" : "ㅇㄻㄴㅇㄻㄴㅇㄹ",
                          "formFlag" : false,
                          "totalCount" : 11,
                          "totalSeries" : 1,
                          "type" : "PERIODIC",
                          "publicOption" : "OPEN",
                          "status" : "ACTIVE",
                          "department" : {
                            "id" : 6,
                            "name" : "캘린더팀",
                            "code" : "",
                            "email" : "dept4@daou.co.kr",
                            "emailId" : "dept4",
                            "memberCount" : 11,
                            "childrenCount" : 0,
                            "parentId" : 2,
                            "parentCode" : "101",
                            "sortOrder" : 1,
                            "depth" : 0,
                            "csvData" : [ "", "101", "1", "캘린더팀", "dept4", null ]
                          },
                          "reporter" : {
                            "id" : 3,
                            "nodes" : [ {
                              "id" : 2,
                              "nodeId" : 6,
                              "nodeType" : "department",
                              "nodeValue" : "캘린더팀",
                              "members" : [ ]
                            } ]
                          },
                          "referrer" : {
                            "id" : 2,
                            "nodes" : [ ]
                          },
                          "admin" : {
                            "id" : 1,
                            "nodes" : [ {
                              "id" : 1,
                              "nodeId" : 2,
                              "nodeType" : "user",
                              "nodeValue" : "진범동1 부회장",
                              "members" : [ ]
                            } ]
                          },
                          "actions" : {
                            "updatable" : false,
                            "removable" : false,
                            "writable" : true,
                            "managable" : true,
                            "readable" : false
                          },
                          "favorite" : false,
                          "attachSize" : 0,
                          "newReport" : false
                        },
                        "actions" : {
                          "updatable" : false,
                          "removable" : false,
                          "writable" : false,
                          "managable" : true,
                          "readable" : false
                        }
                      }
            ],
              "message" : "OK",
              "code" : "200",
              "__go_checksum__" : true
        },
        statusCode: 200,
        status:'OK',
        type: 'GET'
    });
    </script>

    <script type="text/javascript" id="go-gadget-script">
        gadget.load(GO.config("contextRoot") + 'api/report/undone', { year: 2013, month:5 }, {
            langs: {
                "title" : "작성할 보고",
                "pre": "이전",
                "next": "다음",
                "today_closing_day" : "오늘 마감", 
                "series_no" : "제 {{arg1}}회차",
                "reporter" : "보고자",
                "not_reporter" : "미보고자", 
                "report_count" : "보고자 {{arg1}}명",
                "not_report_count" : "미보고자 {{arg1}}명",
                "write" : "보고 작성",
                "department" : "부서",
                "report_status" : "보고현황",
                "empty_report" : "작성할 보고가 없습니다.",
                "report" : "보고",
                
                "en": {
                    "title" : "Reports to be submitted",
                    "pre": "Previous",
                    "next": "Next",
                    "today_closing_day" : "Due Today", 
                    "series_no" : "{{arg1}} Series",
                    "reporter" : "Reporter",
                    "not_reporter" : "Not written", 
                    "report_count" : "Submitted by {{arg1}}",
                    "not_report_count" : "Not written by {{arg1}}",
                    "write" : "Write",
                    "department" : "Department",
                    "report_status" : "Status",
                    "empty_report" : "You have no report to write.",
                    "report" : "Report"
                },
                
                "ja": {
                    "title" : "未作成レポート",
                    "pre": "前へ",
                    "next": "次へ",
                    "today_closing_day" : "今日締切", 
                    "series_no" : "第{{arg1}}回",
                    "reporter" : "報告者",
                    "not_reporter" : "未報告", 
                    "report_count" : "報告 {{arg1}}人",
                    "not_report_count" : "未報告 {{arg1}}人",
                    "write" : "報告",
                    "department" : "部署",
                    "report_status" : "報告現況",
                    "empty_report" : "未作成レポートがありません。",
                    "report" : "報告"
                },
                
                "zh_CN": {
                    "title" : "創建的報告書",
                    "pre": "前一頁",
                    "next": "下一頁",
                    "today_closing_day" : "今天结束", 
                    "series_no" : "第{{arg1}}回",
                    "reporter" : "報告者",
                    "not_reporter" : "未報告", 
                    "report_count" : "報告者 {{arg1}}名",
                    "not_report_count" : "未報告者 {{arg1}}名",
                    "write" : "報告",
                    "department" : "部門",
                    "report_status" : "報告狀況",
                    "empty_report" : "沒有可以創建的報告書。",
                    "report" : "報告"
                },
                
                "zh_TW": {
                    "title" : "创建的报告书",
                    "pre": "前一页",
                    "next": "下一页",
                    "today_closing_day" : "今天結束", 
                    "series_no" : "第{{arg1}}回",
                    "reporter" : "报告者",
                    "not_reporter" : "未报告者", 
                    "report_count" : "报告者 {{arg1}}名",
                    "not_report_count" : "未报告者 {{arg1}}名",
                    "write" : "报告",
                    "department" : "部门",
                    "report_status" : "报告状况",
                    "empty_report" : "没有可以创建的报告书。",
                    "report" : "报告"
                },
                "vi": {
                	"title" : "Báo cáo sẽ soạn thảo",
                    "pre": "Trang trước",
                    "next": "Tiếp theo",
                    "today_closing_day" : "Đóng hôm nay",
                    "series_no" : "Lần thứ {{arg1}}",
                    "reporter" : "Người báo cáo",
                    "not_reporter" : "Người chưa báo cáo",
                    "report_count" : "Người báo cáo {{arg1}}người",
                    "not_report_count" : "Người chưa báo cáo {{arg1}}người",
                    "write" : "Soạn thảo báo cáo",
                    "department" : "Phòng ban",
                    "report_status" : "Tình hình báo cáo",
                    "empty_report" : "Không có báo cáo để soạn thảo.",
                    "report" : "Báo cáo"
                }
            }, 
            
            refreshable: true,
            
            highlightable : true,
            
            styles: {
                "li.null_data" : "border-top:0px"
            }, 

            renderConfig: function(el) {
                
            }, 

            onSuccess: function(el, data) {
                this.data = data;
                this.render(el, data);
            }, 
            
            onMoved : function(el, data) {
                this.render(el, this.data);
            }, 

            render: function(el, data) {
                 var reportView = new ReportView({el : $(el), data : data.data, i18n : this.i18n, highlight : this.options.highlight});
                 $(el).html(reportView.render());
                 if(data.data.length != 0){
                     reportView.makeContent();
                 }
            },
            
            setTitle: function() {
                return this.getTitle();
            }, 
            
            getTitle: function() {
                return this.i18n.parse("title");
            }, 
        });
        
        var ReportView = Backbone.View.extend({
            className : "slide_contents_warp",
            
            events : {
                "click span[data-type='prev']" : "prev",
                "click span[data-type='next']" : "next",
            },
            
            initialize : function(){
                this.$el.off();
                this.collection = new (Backbone.Collection.extend({}));
                this.collection.set(this.options.data);
                this.i18n = this.options.i18n;
                this.currentPage = 0;
                this.offset = null;
                this.isLastPage = null;
                this.highlight = this.options.highlight;
                this.emptyEl = [
                    "<ul class='type_simple_list'>",
                        "<li class='null_data'>",
                            "<p class='desc'>" + this.i18n.parse("empty_report") + "</p>",
                        "</li>",
                    "</ul>"].join("");
            },
            
            render : function(){
                var html = [];
                
                html.push("<div class='gadget_design_wrap'>");
                html.push('    <div class="go_gadget_header">')
                html.push('        <div class="gadget_h1">');
                html.push("            <span class='type'>");
                html.push("                <span class='ic_dashboard2 ic_type_report' title='" + this.i18n.parse("report") +"'/>");
                html.push('            </span>');
                html.push("            <span class='title'>" + this.i18n.parse("title") + "</span>");
                html.push('        </div>');
                html.push('    </div>');
                if(this.collection.length == 0){
                    html.push(this.emptyEl);
                }else{
                    html.push("    <div class='slide_contents_warp'>");
                    html.push("        <div class='card_item_wrapper' id='report_cards'>");
                    html.push("        </div>");
                    html.push("        <div class='btn_control' id='page_controll''>");
                    html.push("        </div>");
                    html.push("    </div>");
                    html.push("</div>");
                }
                return html.join("");
            },
            
            makeContent : function(){
                var cardsWidth = this.$el.find("#report_cards").width(),
                	defaultCardWidth = 228;
                
                if(cardsWidth < defaultCardWidth){
                    cardsWidth = defaultCardWidth;
                }
                
                this.offset = parseInt(cardsWidth / defaultCardWidth);
                this.isLastPage = ((this.currentPage +1) * this.offset) >= this.collection.length ? true : false;
                
                this.$el.find("#report_cards").html(this.makeCards());
                this.$el.find("#page_controll").html(this.makePage());
            },
            
            makePage : function(){
                var html = [];
                
                html.push("            <span class='btn_wrap' data-type='prev' style='display:none'>");
                html.push("                <span class='ic_dashboard2 ic_prev' title='" + this.i18n.parse("pre") + "'></span>");
                html.push("            </span>");
                
                if(this.isLastPage){
                    
                html.push("            <span class='btn_wrap' data-type='next' style='display:none'>");
                html.push("                <span class='ic_dashboard2 ic_next' title='" + this.i18n.parse("next") + "'></span>");
                html.push("            </span>");
                
                }else{
                    
                html.push("            <span class='btn_wrap' data-type='next'>");
                html.push("                <span class='ic_dashboard2 ic_next' title='" + this.i18n.parse("next") + "'></span>");
                html.push("            </span>");
                
                }
                return html.join("");
            },
            
            makeCards : function(){
                var items = [],
                    self = this;
                
                if(this.collection.length == 0){
                    return emptyEl;
                }
            
                this.collection.each(function(model, index){
                    var html = [],
                        closedFromISO = arrayFromISO(model.get("closedAt")),
                        undoneNames = getNamesByStatus(model, "undones"),
                        doneNames = getNamesByStatus(model, "dones"),
                        myReport = _.find(model.get("undones"), function(data){
                            return data.id == GO.session("id");
                        }),
                        series_url = GO.config("contextRoot") + "app/report/series/" + model.get("id"),
                        write_url = series_url + "/report/" + myReport.reportId,
                        cardPage = parseInt( index / self.offset ),
                        isCurrentPage = (cardPage == self.currentPage);

                    if(isCurrentPage){
                    html.push("         <section class='card_item report_home_card' data-page='" + cardPage + "'>");
                    }else{
                    html.push("         <section class='card_item report_home_card' data-page='" + cardPage + "' style='display:none'>");
                    }
                    
                    html.push("             <div class='h_border'></div>");
                    html.push("             <div class='card_wrapper'>");
                    if(GO.util.isSameDate(model.get("closedAt"), model.get("currentDate"))){
                        html.push("                 <span class='btn_custom'>" + self.i18n.parse("today_closing_day") + "</span>");
                    }
                    html.push("                 <div class='card_subject'>");
                    html.push("                     <a href='" + series_url + "'>");
                    html.push("                         <time class='year'>"+closedFromISO[0]+"</time>");
                    html.push("                         <time class='date'> "+ GO.util.customDate(model.get("closedAt"), "MM/DD(ddd)") +" </time>");
                    html.push("                         <p class='folder_type' title='"+model.get("folder").description+"'>"+GO.util.escapeToLtGt(model.get("folder").name)+"<span class='times'>(" + self.i18n.parse("series_no", {arg1 : model.get("series")}) + ")</span></p>");
                    html.push("                     </a>");
                    html.push("                 </div>");
                    html.push("                 <div class='card_content'>");
                    html.push("                     <table class='form_s'>");
                    html.push("                         <tbody>");
                    html.push("                             <tr>");
                    html.push("                                 <th> " + self.i18n.parse("department") + " </th>");
                    html.push("                                 <td title='"+model.get("department").name+"'>"+model.get("department").name+"</td>");
                    html.push("                             </tr>");
                    html.push("                             <tr>");
                    html.push("                                 <th> " + self.i18n.parse("report_status") + " </th>");
                    html.push("                                 <td><span class='reporter' title='" + self.i18n.parse("reporter") + ": "+ doneNames +" / " + self.i18n.parse("not_reporter") + ": " + undoneNames + "'>" + self.i18n.parse("report_count", {arg1 : model.get("dones").length +""})  + "<span class='not'>" + self.i18n.parse("not_report_count", {arg1 : model.get("undones").length+""}) + "</span></span></td>");
                    html.push("                             </tr>");
                    html.push("                         </tbody>");
                    html.push("                     </table>");
                    html.push("                 </div>");
                    html.push("                 <div class='card_action'>");
                    html.push("                     <a class='btn_lead' href='"+ write_url +"'><span class='ic ic_report'></span><span class='txt'>" + self.i18n.parse("write") + "</span></a>");
                    html.push("                 </div>");
                    html.push("             </div>");
                    html.push("         </section>");
                    
                    items.push(html.join(""));
                });
                
                return items.join("");
            },
            
            prev : function(){
                this.currentPage -= 1;
                this.pageNavigator();
            },
            
            next : function(){
                this.currentPage += 1;
                this.pageNavigator();
                
            },
            
            pageNavigator : function(){
                this.$el.find("#report_cards section").hide();
                this.$el.find("#report_cards section[data-page='"+ this.currentPage +"']").show();
                
                this.isLastPage = ((this.currentPage +1) * this.offset) >= this.collection.length ? true : false;
                
                if(this.isLastPage){
                    this.$el.find("#page_controll span[data-type='next']").hide();
                }else{
                    this.$el.find("#page_controll span[data-type='next']").show();
                }
                
                if(this.currentPage == 0){
                    this.$el.find("#page_controll span[data-type='prev']").hide();
                }else{
                    this.$el.find("#page_controll span[data-type='prev']").show();
                }

            }
        });
        
        function getNamesByStatus(model, status){
            var names = [];
            
            $.each(model.get(status), function(){
                names.push(this.name + " " + this.position);
            })
            
            return names.join(", ");
        }
        
        function arrayFromISO(s){
            return s.split(/\D/);
        }
    </script>
</head>

<body id="main" class="go_skin_home_default" data-role="main">
    <div class="go-dashboard go-dashboard-editing go_dashboard_3_2">
        <div class="go-gadget-column gadget-col-1" data-columnid="1">
            <!-- empty -->
        </div>
        
        <div class="gripper"></div>

        <div id="gadget-containter" class="go-gadget-column gadget-col-2" data-columnid="2">
            <!-- empty -->
        </div>

        <div class="gripper"></div>

        <div class="go-gadget-column gadget-col-3" data-columnid="3">
            <!-- empty -->
        </div>
    </div>
</body>
</html>