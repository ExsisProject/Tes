define(["backbone","app","hgn!hrcard/templates/detail/activity_log","hgn!hrcard/templates/detail/activity_log_item","i18n!hrcard/nls/hrcard","i18n!nls/commons"],function(e,t,n,r,i,s){var o={label_actionLogs:s["\ubcc0\uacbd\uc774\ub825"],label_more:s["\ub354\ubcf4\uae30"]},u=e.View.extend({events:{"click #moreLog":"moreLog"},initialize:function(n){this.options=n||{},this.userid=this.options.userid,this.logs=new e.Collection,this.logs.url=t.contextRoot+"api/ehr/hrcard/info/logs/"+this.userid+"/actionlogs",this.logs.fetch({async:!1})},render:function(){var e=this;this.$el.html(n({lang:o})),this.$el.find("header.single_title span.num").text(this.logs.page.total);var t=r({log:this.logs.toJSON(),date:function(){return moment(this.createdAt).format("YYYY-MM-DD [(]dd[)] HH:mm")}});return this.$el.find("ul.type_simple_list").append(t),this.checkMoreBtn(),this},moreRender:function(){var e=this,t=r({log:this.logs.toJSON(),date:moment(this.createdAt).format("YYYY-MM-DD [(]dd[)] HH:mm")});this.$el.find("ul.type_simple_list").append(t),this.checkMoreBtn()},moreLog:function(e){var n=this,r=this.logs.page.page+1;this.logs.url=t.contextRoot+"api/ehr/hrcard/info/logs/"+this.userid+"/actionlogs?"+$.param({page:r}),this.logs.fetch({success:function(e){n.moreRender()}})},checkMoreBtn:function(){this.logs.page.lastPage?this.$el.find("#moreLog").hide():this.$el.find("#moreLog").show()}});return u});