define("timeline/views/mobile/company_stat/stat_filter",function(require){var e=require("app"),t=require("backbone"),n=require("hgn!timeline/templates/mobile/company_stat/stat_filter"),r=require("i18n!timeline/nls/timeline"),i=require("i18n!nls/commons"),s=t.View.extend({bindEvent:function(){var e=this;$("#filter_type").change(function(t){e.filterTypeChange(t)}),$("#search").click(function(t){e.search(t)}),$("#text_field").keyup(function(t){e.searchEnter(t)})},unbindEvent:function(){$("#filter_type").unbind("change"),$("#search").unbind("click"),$("#text_field").unbind("keyup")},initialize:function(e){this.options=e.options,this.range=e.range,this.filterType=this.options?this.options.filterType:"userName"},render:function(){var e=this;this.unbindEvent(),$("#filter_parent").html(n({TimelineLang:r,CommonLang:i,filterType:this.filterType,isCompany:this.range=="COMPANY",isDept:this.range=="DEPARTMENT"},this)),this.options&&($("#filter_type").val(this.filterType),$("#text_field").val(this.options.textField),this.options=null),$("#filter_type").val(this.filterType),this.bindEvent()},filterTypeChange:function(e){var t=$(e.currentTarget).val();this.filterType=t,this.filterType=="none"&&this.search(),this.render()},getSearchQuery:function(){return this.filterType+"="+$("#text_field").val()},search:function(){var e={filterType:this.filterType,textField:$("#text_field").val(),query:this.getSearchQuery()};this.trigger("statFiltering",e)},searchEnter:function(e){return e.keyCode==13&&this.search(),!1}});return s});