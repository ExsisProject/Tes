define("vacation/views/config/basic_config",function(require){var e=require("backbone"),t=require("app"),n=require("hgn!vacation/templates/config/basic_config"),r=require("i18n!vacation/nls/vacation"),i=require("i18n!nls/commons");require("jquery.inputmask");var s=e.Model.extend({model:e.Model,url:t.contextRoot+"api/ehr/vacation/manage/config"}),o={"\uae30\ubcf8 \uc124\uc815":r["\uae30\ubcf8 \uc124\uc815"],"\ub0b4\ub144\ud734\uac00 \uc0ac\uc6a9":r["\ub0b4\ub144\ud734\uac00 \uc0ac\uc6a9"],"\ubd80\uc11c\uc7a5 \uc5f0\ucc28\ud604\ud669 \uacf5\uac1c":r["\ubd80\uc11c\uc7a5 \uc5f0\ucc28\ud604\ud669 \uacf5\uac1c"],"\ubd80\uc11c\uc7a5 \uc5f0\ucc28\ud604\ud669 \uacf5\uac1c \uc124\uba85":r["\ubd80\uc11c\uc7a5 \uc5f0\ucc28\ud604\ud669 \uacf5\uac1c \uc124\uba85"],"\ud5c8\uc6a9":i["\ud5c8\uc6a9"],"\ud5c8\uc6a9\ud558\uc9c0 \uc54a\uc74c":i["\ud5c8\uc6a9\ud558\uc9c0 \uc54a\uc74c"],"\uc800\uc7a5":i["\uc800\uc7a5"],"\ucde8\uc18c":i["\ucde8\uc18c"],"ID(\uacc4\uc815)":r["ID(\uacc4\uc815)"],"\uadfc\uc18d\uc5f0\uc218":r["\uadfc\uc18d\uc5f0\uc218"],"\ubc1c\uc0dd \uc5f0\ucc28":r["\ubc1c\uc0dd \uc5f0\ucc28"],"\uc774\ub984":i["\uc774\ub984"],saveFail:i["\uc800\uc7a5\uc5d0 \uc2e4\ud328 \ud558\uc600\uc2b5\ub2c8\ub2e4."],"\uac12\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694":i["\uac12\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694"],"\ud734\uac00\uc77c\uc218\ub294 0.5 \ub2e8\uc704\ub85c \uc785\ub825\ud574 \uc8fc\uc138\uc694":r["\ud734\uac00\uc77c\uc218\ub294 0.5 \ub2e8\uc704\ub85c \uc785\ub825\ud574 \uc8fc\uc138\uc694"],"\ud589\ucd94\uac00":r["\ud589\ucd94\uac00"],"\ud589\uc0ad\uc81c":r["\ud589\uc0ad\uc81c"],"\uadfc\uc18d\uc5f0\uc218\ubcc4 \uc5f0\ucc28 \uc124\uc815":r["\uadfc\uc18d\uc5f0\uc218\ubcc4 \uc5f0\ucc28 \uc124\uc815"],"\ub144\ucc28":r["\ub144\ucc28"]},u=e.View.extend({events:{"click #btn_ok":"save","click #btn_cancel":"cancel","click #add_col":"addColumn","click #remove_col":"removeColumn","focusout input.points":"checkDecimal","click #useNextVacation button, #deptManageOpen button":"toggleButton"},initialize:function(){this.model=new s},render:function(){return this.model.fetch({async:!1}),this.$el.html(n({lang:o,model:this.model.toJSON()})),this.$el.find("input.points").inputmask("numeric",{groupSeparator:",",digits:1,allowMinus:!1,integerDigits:2}),this},save:function(){this.model.set({companyConfig:{useNextVacation:this.$el.find("#useNextVacation button.on").val(),deptManageOpen:this.$el.find("#deptManageOpen button.on").val()},yearPoints:_.chain(this.$el.find("#working_year_list input")).map(function(e){var t=$(e);return{workingYear:t.data("year"),points:t.val()}}).value()});try{this.validate()}catch(e){$.goError(e.message);return}var t=this;this.model.save({},{success:function(){$.goMessage(i["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]),t.render()},error:function(e,t){t&&t.responseJSON&&t.responseJSON.message?$.goError(t.responseJSON.message):$.goError(i["500 \uc624\ub958\ud398\uc774\uc9c0 \ub0b4\uc6a9"])}})},toggleButton:function(e){var t=$(e.currentTarget);t.closest("span").find("button").removeClass("on"),t.addClass("on")},cancel:function(){$.goAlert(i["\ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]),this.render()},addColumn:function(){var e=this.$el.find("#working_year_list div.tb_content").length+1,t=['<div class="tb_content">','    <span class="txt">'+e+" "+o["\ub144\ucc28"]+"</span>",'    <span class="wrap_txt">','        <input class="txt wfix_small points" data-year="'+e+'" name="" value="">',"    </span>","</div>"];this.$el.find("#working_year_list").append(t.join("")),$("input.points").inputmask("numeric",{groupSeparator:",",digits:1,allowMinus:!1,integerDigits:2})},removeColumn:function(){this.$el.find("#working_year_list").find("div.tb_content:last").remove()},validate:function(){this.model.get("yearPoints").forEach(function(e){if(!e.points)throw new Error(o["\uac12\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694"])})},checkDecimal:function(e){var t=$(e.target);t.val()%.5!=0&&($.goError(o["\ud734\uac00\uc77c\uc218\ub294 0.5 \ub2e8\uc704\ub85c \uc785\ub825\ud574 \uc8fc\uc138\uc694"]),t.val(""),t.focus())}});return u});