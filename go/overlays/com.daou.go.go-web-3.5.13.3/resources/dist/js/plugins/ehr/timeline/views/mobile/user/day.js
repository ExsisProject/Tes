define("timeline/views/mobile/user/day",function(require){var e=require("backbone"),t=require("app"),n=require("timeline/models/daily_stat"),r=require("timeline/views/mobile/user/timeline"),i=require("hgn!timeline/templates/mobile/user/day"),s=require("i18n!timeline/nls/timeline"),o=e.View.extend({className:"daily",events:{click:"showTimeline"},initialize:function(){this.model=new n(this.options.data),this.targetUserId=this.options.targetUserId,this.timeLineView=null,t.EventEmitter.on("timeline","reset:timeline",_.bind(function(){this.removeTimeline()},this))},render:function(){var e=this;this.$el.html(i({data:this.model.toJSON(),clockOut:function(){return e.model.getClockOutTime()},totalWorkingTime:function(){return e.model.hasTotalWorkingTime()?e.model.getTotalWorkingTime():""},workingTimeDetail:function(){return e.model.hasTotalWorkingTime()?e.model.getWorkingTimeDetail():""},isEditedWorkInTime:function(){return e.model.isEditedWorkInTime()},isEditedWorkOutTime:function(){return e.model.isEditedWorkOutTime()},isEmptyCheckTime:function(){return this.data.clockInTime||this.data.clockOutTime?!1:!0},approvals:function(){return e.model.getApprovals()},dayOfWeek:function(){return s[e.model.get("detailDay").dayOfWeek]}})),this.addDayOfWeekCss(),this.addTodayCssIfToday()},addTodayCssIfToday:function(){if(!this.model.isToday())return;this.$el.find(".date_l").addClass("today"),$(this.$el).parents("li#week").addClass("active"),$(this.$el).parents("li#week").attr("data-active",!0)},addDayOfWeekCss:function(){var e=this.model.getDayOfWeek(),t="";e=="SUNDAY"?t="sun":e=="SATURDAY"?t="sat":this.model.get("holiDay")&&(t="holiday"),this.$el.addClass(t)},showTimeline:function(e){e.stopPropagation();if(this.timeLineView){this.removeTimeline();return}t.EventEmitter.trigger("timeline","reset:timeline",this),this.$el.addClass("active"),this.$el.find(".date_l").removeClass("today"),this.timeLineView=new r({targetUserId:this.targetUserId,data:this.model.toJSON()}),this.$el.after(this.timeLineView.$el),this.timeLineView.render()},removeTimeline:function(){if(_.isEmpty(this.timeLineView))return;this.timeLineView.remove(),this.timeLineView=null,this.$el.removeClass("active"),this.addTodayCssIfToday()}});return o});