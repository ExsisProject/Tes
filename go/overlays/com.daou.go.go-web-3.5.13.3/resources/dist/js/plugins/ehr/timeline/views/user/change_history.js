define("timeline/views/user/change_history",function(require){var e=require("backbone"),t=require("hgn!timeline/templates/user/change_history"),n=require("timeline/collections/change_historys"),r=require("i18n!timeline/nls/timeline"),i=require("i18n!nls/commons"),s=require("views/profile_card"),o=require("app"),u=e.View.extend({events:{"click #reload":"reload","click .photo":"showProfile"},initialize:function(e){this.models=new Array,this.options=e,this.logs=new n(e)},changeBaseInfo:function(e,t){this.models=new Array,this.logs=new n({baseDate:e,userId:t}),this.logDataSet()},reload:function(){this.logs.nextPage(),this.logDataSet()},refresh:function(){this.models=new Array,this.logs.reset(),this.logDataSet()},logDataSet:function(){this.logs.fetch({async:!1}),this.lastPage=this.logs.page.lastPage,this.total=this.logs.page.total;for(var e=0,t;t=this.logs.models[e];e++)t.attributes.date=o.util.customDate(t.attributes.createdAt,"MM-DD HH:mm"),this.models[this.models.length]=t.attributes;this.render()},showProfile:function(e){e.preventDefault(),e.stopPropagation();var t=e.currentTarget,n=$(t).attr("data-id");if(!n)return;s.render(n,t)},render:function(){this.$el.html(t({noHistoryMsg:i["\ubcc0\uacbd\uc774\ub825\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."],TimelineLang:r,total:this.total,hasNextPage:!this.lastPage,logs:this.models}))}});return u});