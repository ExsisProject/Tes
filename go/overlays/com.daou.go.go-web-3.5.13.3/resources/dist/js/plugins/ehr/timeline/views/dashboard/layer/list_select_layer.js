define("timeline/views/dashboard/layer/list_select_layer",function(require){var e=require("backbone"),t=require("hgn!timeline/templates/dashboard/layer/list_select_layer"),n=require("i18n!timeline/nls/timeline"),r=require("i18n!nls/commons"),i=require("underscore"),s=require("app");require("jquery.go-popup");var o=e.View.extend({tagName:"tbody",events:{"click #sync_btn":"sync"},initialize:function(e){this.confirmCb=e.confirmCb,this.parent=e.parent},render:function(){return this.popup=$.goPopup({pclass:"layer_normal attend_statistic_filter",width:"600px",modal:!1,closeIconVisible:!0,header:"\ubaa9\ub85d\uad00\ub9ac",draggable:!0,contents:"",buttons:[{btype:"confirm",btext:"\ud655\uc778",callback:$.proxy(function(){this.saveItems()},this)},{btype:"close",btext:"\ucde8\uc18c"}]}),this.popup.reoffset(),this.popup.find(".content").empty().append('<table class="form_type go_form_basic"></table>'),this.popup.find("table").append(this.$el),this.renderContent(),this.moveCenter(),this.retouchCheck(),this},moveCenter:function(){var e=$(window).height(),t=$("#gpopupLayer").height(),n=(e-t)/2;$("#gpopupLayer").css("top",n+"px")},retouchCheck:function(){var e=this.getLists();this.$el.find("input[type=checkbox]").attr("checked",!1),i.forEach(this.$el.find("input[type=checkbox]"),function(t){var n=$(t).attr("id");i.contains(e,n)&&$(t).attr("checked",!0)})},renderContent:function(){this.$el.html(t({TimelineLang:n,CommonLang:r}))},saveItems:function(){var e=[];return i.forEach(this.$el.find("input[type=checkbox]"),function(t){!$(t).attr("checked")||(e[e.length]=$(t).attr("id"))}),this._saveCookie(e),this.confirmCb(this.parent),e},getLists:function(){var e=this._getCookie();return e?JSON.parse(e):this.getDefaultCkList()},_getCookie:function(){var e=s.session().companyId;return $.cookie("company_timeline_stat_"+e)},_saveCookie:function(e){var t=JSON.stringify(e),n={path:"/"},r=s.session().companyId;$.cookie("company_timeline_stat_"+r,t,n)},getDefaultCkList:function(){return["tardy","absence","missingClockIn","missingClockOut","vacation","unAuthDevice"]}});return o});