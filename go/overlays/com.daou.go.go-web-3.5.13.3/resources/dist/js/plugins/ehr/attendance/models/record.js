define(["backbone","attendance/collections/statuses","attendance/models/status","i18n!attendance/nls/attendance"],function(e,t,n,r){function o(e){var t="00";return t.substring(0,t.length-e.length)+e}function u(e,t){var n=e||0;return n?moment(n).zone(n).format(t):n}var i=null,s=e.Model.extend({defaults:{},initialize:function(){console.info()},hasUserClockInTime:function(){return u.call(this,this.get("clockInTime"),"HH:mm:ss")},hasUserClockOutTime:function(){return u.call(this,this.get("clockOutTime"),"HH:mm:ss")},isDayOff:function(){return this.isSunday()||this.isSatday()||this.isHoliday()},isHoliday:function(){return this.get("holiday")},getWorkingTime:function(){return this.get("workingTime")},getOfficailClockInTime:function(){return this.get("group").clockInTime},getOfficailClockOutTime:function(){return this.get("group").clockOutTime},useFlexibleTime:function(){return this.get("group").useFlexibleTime},isLate:function(){return this.get("late")},isToday:function(){return moment().isSame(this.get("logDate"),"day")},isAfter:function(){return moment().add(-1,"days").isBefore(this.get("logDate"),"day")},isBefore:function(){return moment().isAfter(this.get("logDate"),"day")},hasDateStatus:function(){var e=!1;return _.each(this.get("statuses"),function(t){t.companyStatus.type=="date"&&(e=!0)},this),e},isClockInTimeEdited:function(){return this.get("editedClockInTime")},isClockOutTimeEdited:function(){return this.get("editedClockOutTime")},hasId:function(){return this.get("id")},getStatuses:function(){return this.get("statuses")},getUseAllNight:function(){return this.get("useAllNight")},getStatusCnt:function(){var e=this.getStatuses();return _.isUndefined(e)?0:e.length},getGroup:function(){return this.get("group")},getStatusById:function(e){return _.find(this.get("statuses"),function(t){if(t.id==e)return t})},getLogDate:function(){return this.get("logDate")},getLogDateMMddDD:function(){return moment(this.get("logDate")).format("MM-DD (dd)")},getUserClockInIP:function(){return this.get("clockInIp")},getUserClockOutIP:function(){return this.get("clockOutIp")},getUserClockInGPS:function(){return this.get("clockInLatitude")+","+this.get("clockInLongitude")},getUserClockOutGPS:function(){return this.get("clockOutLatitude")+","+this.get("clockOutLongitude")},getUserClockInTime:function(){var e=this.get("clockInTime")||0;return e?moment(e).zone(e).format("HH:mm:ss"):""},getUserClockOutTime:function(){var e=this.get("clockOutTime")||0;return e?moment(e).zone(e).format("HH:mm:ss"):""},getUserWorkingTime:function(){var e=this.get("workingTime");if(!e||0)return"";var t=moment.duration(e,"seconds"),n=t.hours()+t.days()*24+"",r=t.minutes()+"",i=t.seconds()+"";return o(n)+":"+o(r)+":"+o(i)},getUserWorkingTimeHHMM:function(){var e=this.get("workingTime");if(!e||0)return"";var t=moment.duration(e,"seconds"),n=t.hours()+t.days()*24+"",r=t.minutes()+"";return o(n)+":"+o(r)},isSunday:function(){return moment(this.get("logDate")).day()===0},isSatday:function(){return moment(this.get("logDate")).day()===6},isUseAllNight:function(){return this.get("useAllNight")},setClockInTime:function(e,t,n){var r=GO.util.toISO8601(moment(this.getLogDate()).set("hour",e).set("minute",t).set("seconds",n));this.set("clockInTime",r),this.syncTimeZone("clockInTime","clockOutTime")},setClockOutTime:function(e,t,n,r){var i=moment(this.getLogDate()).set("hour",e).set("minute",t).set("seconds",n);r&&i.add(1,"day");var s=GO.util.toISO8601(i);this.set("clockOutTime",s),this.set("useAllNight",r),this.syncTimeZone("clockOutTime","clockInTime")},syncTimeZone:function(e,t){var n=this.get(e),r=this.get(t);if(r==null)return;var i=moment(r),s=-moment(n)._tzm,o=-i._tzm,u=o-s;i.add(u,"minutes"),this.set(t,GO.util.toISO8601(i))},convertStatausTime:function(e){if(e.companyStatus.type=="date")return;return e.companyStatus.type=="allNight"?e.companyStatus.name:moment(e.startDate).zone(e.startDate).format("HH:mm")+"~"+moment(e.endDate).zone(e.startDate).format("HH:mm")},getUserClockInTimeHHMM:function(){return _.isUndefined(this.get("id"))?"":this.get("clockInTime")==null?this.isAfter()?"":"-":u.call(this,this.get("clockInTime"),"HH:mm")},getUserClockOutTimeHHMM:function(){return _.isUndefined(this.get("id"))?"":this.get("clockOutTime")==null?this.isAfter()?"":"-":u.call(this,this.get("clockOutTime"),"HH:mm")},isWorkingDay:function(){return this.get("workingDay")}});return s});