define("timeline/views/user/time_cell_item",function(require){var e=require("backbone"),t=require("hgn!timeline/templates/user/time_cell_item"),n=require("timeline/views/user/history_popup"),r=require("timeline/models/timeline_group"),i=require("timeline/models/auth"),s=require("timeline/models/history"),o=require("i18n!timeline/nls/timeline"),u=require("app"),a=e.View.extend({className:"min",events:{click:"showCreatePopup","click .time_schedule":"showEditPopup"},initialize:function(e,t,n,s){this.options=e,this.hour=t,this.min=n,this.history=s,this.authModel=new i(u.util.store.get("timeline.auth")),this.createable=this.authModel.isCreatable(),this.createable||this.$el.css("cursor","auto"),this.targetUserId=this.options.targetUserId,this.dayInfo=this.options.dayInfo,this.splitMin=this.options.splitMin,this.group=this.options.group,this.timelineGroup=new r(this.group),this.restTime=this.timelineGroup.isRestTime(this.hour,this.min),this.dutyStartTime=this.timelineGroup.isDutyStartTime(this.hour,this.min),this.dutyEndTime=this.timelineGroup.isDutyEndTime(this.hour,this.min),this.includeHistory=this.history&&this.history.isAfter(this.hour,this.min,0)&&this.history.isBefore(this.hour,this.min+9,59),this.includeHistory&&(this.statusName=this.history.getStatusName(),this.statusTime=this.history.checkTimeHour()+":"+this.history.checkTimeMinute())},render:function(){this.$el.html(t({includeHistory:this.includeHistory,statusName:this.statusName,statusTime:this.statusTime})),this.restTime&&this.$el.addClass("break"),this.dutyStartTime?(this.$el.addClass("coretime_s"),this.$el.attr("title",o["\uc758\ubb34 \uadfc\ub85c \uc2dc\uc791 \uc2dc\uac04"])):this.dutyEndTime&&(this.$el.addClass("coretime_s"),this.$el.attr("title",o["\uc758\ubb34 \uadfc\ub85c \uc885\ub8cc \uc2dc\uac04"]))},showCreatePopup:function(e){e.stopPropagation();if(!this.createable)return;var t=u.util.toMoment(this.dayInfo.day).add("hours",this.hour).add("minutes",this.min).format(),r=new n({targetUserId:this.targetUserId,dayInfo:this.dayInfo,data:{checkTime:t}});r.render()},showEditPopup:function(e){e.stopPropagation();if(!this.authModel.isEditable())return;var t=new n({targetUserId:this.targetUserId,dayInfo:this.dayInfo,data:this.history.attributes});t.render()}});return a});