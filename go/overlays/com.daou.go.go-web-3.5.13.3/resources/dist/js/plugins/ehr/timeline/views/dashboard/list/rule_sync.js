define("timeline/views/dashboard/list/rule_sync",function(require){var e=require("backbone"),t=require("hgn!timeline/templates/dashboard/list/rule_sync"),n=require("i18n!timeline/nls/timeline"),r=require("i18n!nls/commons"),i=require("underscore"),s=require("timeline/models/dashboard/dashboard_summary"),o=e.View.extend({tagName:"tbody",events:{"click #sync_btn":"sync"},initialize:function(e,t,n,r){this.baseDate=e,this.viewList=t,this.colCnt=5+(i.contains(this.viewList,"absence")?1:0)+(i.contains(this.viewList,"vacation")?1:0)+(i.contains(this.viewList,"unAuthDevice")?1:0)+(i.contains(this.viewList,"extensionWorkingTime")?1:0)+(i.contains(this.viewList,"nightWorkingTime")?1:0)+(i.contains(this.viewList,"holyDayWorkingTime")?1:0)+(i.contains(this.viewList,"etcStatus")?1:0),this.syncCb=n,this.parent=r},render:function(){return this.$el.html(t({TimelineLang:n,CommonLang:r,colCnt:this.colCnt})),this},sync:function(){var e=this;this.makeProcessLoader(),$.ajax({type:"POST",url:GO.contextRoot+"api/ehr/timeline/company/sync",data:JSON.stringify({day:moment(this.baseDate).format("YYYY-MM-DD")}),dataType:"json",contentType:"application/json",success:function(t){e.removeProcessLoader(),e.syncCb(e.parent)},error:function(t){e.removeProcessLoader()}})},makeProcessLoader:function(){this.removeProcessLoader(),$("body").append('<div id="popOverlay" class="overlay" data-layer><div class="processing"></div></div>')},removeProcessLoader:function(){$("#popOverlay").remove()}});return o});