define("ehr/common/views/mobile/side",function(require){var e=require("backbone"),t=require("when"),n=require("ehr/common/models/side"),r=require("hgn!ehr/common/templates/mobile/side"),i=require("i18n!timeline/nls/timeline"),s=e.View.extend({events:{"click span[name=timelineState]":"moveTo"},initialize:function(){this.side=new n},render:function(){var e=this,t=$.Deferred();return $.when(e.dataFetch()).done(function(){e.$el.html(r({TimelineLang:i,timeline:e.side.getTimeline(),hasDepts:e.side.hasDepts(),useDeptSituationAndStats:e.side.useTimelineDeptSituationAndStats(),hasDepts:e.side.hasDepts(),isEhrManager:e.side.isEhrManager(),data:e.side.toJSON()})),e.setSideApp(),t.resolveWith(e,[e])}),t},dataFetch:function(){this.side.fetch({async:!1})},setSideApp:function(){$("body").data("sideApp","ehr")},moveTo:function(e){var t=$(e.currentTarget).attr("data-type");if(t=="user")GO.router.navigate("ehr",{trigger:!0});else if(t=="company")GO.router.navigate("ehr/timeline/companystats",{trigger:!0});else if(t=="dept"){var n=$(e.currentTarget).closest("li#dept_stat").attr("data-deptid");GO.router.navigate("ehr/timeline/deptstats/"+n,{trigger:!0})}}},{__instance__:null,create:function(e){return this.__instance__=new this.prototype.constructor({packageName:e}),this.__instance__}});return s});