define("timeline/views/mobile/user/month",function(require){var e=require("backbone"),t=require("app"),n=require("timeline/models/user_month"),r=require("timeline/models/auth"),i=require("timeline/views/mobile/user/week"),s=require("i18n!timeline/nls/timeline"),o=e.View.extend({initialize:function(e){this.options=e,this.model=new n,this.authModel=new r,t.util.store.set("timeline.auth",null)},render:function(e){this.$el.empty(),t.EventEmitter.trigger("common","layout:setOverlay","");var n=this.model.fetch({data:{baseDate:e,userId:this.options.userId},error:function(e,n){t.util.error(n.responseJSON.code,{msgCode:"400-common"});return}}),r=this.authModel.fetch({data:{baseDate:e,userId:this.options.userId}});$.when(n,r).done(_.bind(function(){t.util.store.set("timeline.auth",this.authModel.toJSON());var e=this.model.user.id,n=this.model.weeks.length;_.each(this.model.weeks,function(t,r){var s=r+1,o=n===s,u=new i({targetUserId:e,model:t,index:s,lastWeek:o});this.$el.append(u.$el),u.render()},this),t.EventEmitter.trigger("common","layout:clearOverlay",!0)},this)).fail(_.bind(function(){t.EventEmitter.trigger("common","layout:clearOverlay",!0)},this))}});return o});