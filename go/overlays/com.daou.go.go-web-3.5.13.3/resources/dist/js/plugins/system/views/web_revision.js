(function(){define(["jquery","backbone","app","system/models/web_revision","hgn!system/templates/web_revision","i18n!nls/commons","i18n!admin/nls/admin","jquery.go-validation","jquery.go-popup","jquery.go-sdk"],function(e,t,n,r,i,s,o){var u={label_webrevision_title:o["webRevision \uad00\ub9ac"],label_webrevision:o["Web Revision"],label_confirm:s["\ud655\uc778"],label_sucess:s["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."],label_fail:s["\uc2e4\ud328"],label_failDesc:s["\uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."],label_edit:s["\uc218\uc815"],label_ok:s["\uc800\uc7a5"],label_cancel:s["\ucde8\uc18c"],label_validate:o["0\uc790\uc774\uc0c1 0\uc774\ud558 \uc785\ub825\ud574\uc57c\ud569\ub2c8\ub2e4."],label_close:s["\ub2eb\uae30"]},a=n.BaseView.extend({events:{"click span#btn_ok":"webRevisionSave","click span#btn_cancel":"webRevisionCancel","click span.btn_box[data-btntype='changeform']":"changeModifyForm","click span#data":"changeModifyForm","submit form":"formSubmit"},initialize:function(){this.model=r.read()},formSubmit:function(e){e.preventDefault();return},changeModifyForm:function(t){var n=e(t.currentTarget).parent();if(n&&n.attr("data-formname")){e(t.currentTarget).hide(),n.html(['<input type="input" name="',n.attr("data-formname"),'" class="input w_mini" value="',n.attr("data-value"),'" />'].join("")).find("input").focusin();var r=n.parent().find("#webRevisionValidate");n.find("input").keyup(function(t){e.goValidation.validateNumericAlpha(e(t.currentTarget).val())?r.empty():r.html(o["\uc785\ub825\ud560 \uc218 \uc5c6\ub294 \ubb38\uc790"])})}},render:function(){var t=this;this.$el.empty();var n=this.model.toJSON(),r=i({lang:u,dataset:n});return this.$el.html(r),e(".breadcrumb .path").html(o["webRevision \uad00\ub9ac"]),this.$el},webRevisionSave:function(){var t=this,n=e('input[name="webRevision"]').val(),r=!0;if(n==undefined)return;if(n.length==0)return r=!1,e("#webTitle").focus(),this.$el.find("#webRevisionValidate").html(s["\ubaa8\ub4e0 \ud56d\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694."]),!1;if(!e.goValidation.validateNumericAlpha(n))return r=!1,e("#webTitle").focus(),this.$el.find("#webRevisionValidate").html(o["\uc785\ub825\ud560 \uc218 \uc5c6\ub294 \ubb38\uc790"]),!1;t.model.set("str",n);if(!r)return!1;t.model.save({},{success:function(n,r){r.code=="200"&&(e.goMessage(u.label_sucess),t.render())},error:function(t,n){e.goAlert(u.label_fail,u.label_failDesc)}})},webRevisionCancel:function(){var t=this;e.goCaution(u.label_cancel,s["\ubcc0\uacbd\ud55c \ub0b4\uc6a9\uc744 \ucde8\uc18c\ud569\ub2c8\ub2e4."],function(){t.render(),e.goMessage(s["\ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."])},u.label_confirm)}},{__instance__:null});return a})}).call(this);