(function(){define(["jquery","backbone","app","system/models/log_config","hgn!system/templates/log_config","i18n!nls/commons","i18n!admin/nls/admin","jquery.go-validation","jquery.go-popup","jquery.go-sdk"],function(e,t,n,r,i,s,o){var u={label_logConfig_title:o["\ub85c\uadf8 \ub808\ubca8 \uc124\uc815"],label_logConfig_host:o["\ud638\uc2a4\ud2b8 \uc120\ud0dd"],label_logConfig_service:o["\uc11c\ube44\uc2a4 \uc120\ud0dd"],label_logConfig_log:o["\ub85c\uadf8 \ub808\ubca8 \uc124\uc815"],label_confirm:s["\ud655\uc778"],label_sucess:s["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."],label_fail:s["\uc2e4\ud328"],label_failDesc:s["\uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."],label_edit:s["\uc218\uc815"],label_ok:s["\uc800\uc7a5"],label_cancel:s["\ucde8\uc18c"],label_validate:o["0\uc790\uc774\uc0c1 0\uc774\ud558 \uc785\ub825\ud574\uc57c\ud569\ub2c8\ub2e4."],label_close:s["\ub2eb\uae30"]},a=n.BaseView.extend({events:{"click span#btn_ok":"logConfigSave","submit form":"formSubmit","change select#hostName":"changeHostName","change select#serviceType":"changeServiceType"},initialize:function(){this.model=r.create()},formSubmit:function(e){e.preventDefault();return},render:function(){var t=this;this.$el.empty();var n=i({lang:u});return this.getHostName(),this.$el.html(n),e(".breadcrumb .path").html(o["\ub85c\uadf8 \ub808\ubca8 \uc124\uc815"]),this.$el},logConfigSave:function(){var t=this,n=e("form[name=formLogConfig]");e.each(n.serializeArray(),function(e,n){t.model.set(n.name,n.value,{silent:!0})}),this.model.save({},{success:function(n,r){r.code=="200"?(e.goMessage(u.label_sucess),t.render()):(e.goMessage(u.label_failDesc),t.render())},error:function(t,n){e.goAlert(u.label_fail,u.label_failDesc)}})},getHostName:function(){url=GO.contextRoot+"ad/api/system/host",e.go(url,"",{qryType:"GET",responseFn:function(t){if(t.code==200)for(var n=0;n<t.data.length;n++)e("#hostName").append('<OPTION value="'+t.data[n].hostName+'">'+t.data[n].hostName+"</OPTION>")},error:function(t){e.goAlert(u.label_fail,u.label_failDesc)}})},getLogLevel:function(){var t=GO.contextRoot+"ad/api/log/service",n={hostName:e("#hostName").val(),serviceType:e("#serviceType").val(),logLevel:""};e.go(t,JSON.stringify(n),{qryType:"POST",contentType:"application/json",responseFn:function(t){t.code==200&&e("#logLevel option:contains("+t.data+")").prop({selected:!0})},error:function(t){e.goAlert(u.label_fail,u.label_failDesc)}})},changeHostName:function(){e("#serviceType").removeAttr("disabled")},changeServiceType:function(){this.getLogLevel(),e("#logLevel").removeAttr("disabled")}},{__instance__:null});return a})}).call(this);