define("system/views/password_rules",["jquery","backbone","app","hgn!system/templates/password_rules","system/models/password_rules","i18n!nls/commons","i18n!admin/nls/admin","jquery.go-validation","jquery.go-popup"],function(e,t,n,r,i,s,o){var u={label_title:o["\ube44\ubc00\ubc88\ud638 \uc815\ucc45 \uc124\uc815"],label_pwd_manage:o["\ube44\ubc00\ubc88\ud638 \uad00\ub9ac"],label_select:o["\uc0ac\uc6a9\uc5ec\ubd80"],label_use:o["\uc0ac\uc6a9\ud568"],label_notuse:s["\uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc74c"],label_min_length:o["\ube44\ubc00\ubc88\ud638 \ucd5c\uc18c \uae38\uc774"],label_max_length:o["\ube44\ubc00\ubc88\ud638 \ucd5c\ub300 \uae38\uc774"],label_mandatory:o["\ud544\uc218\ud3ec\ud568 \ubb38\uc790"],label_num:o["\uc22b\uc790"],label_blank:o["\uacf5\ubc31"],label_Alphabet:o["\ubb38\uc790"],label_symbol:o["\ud2b9\uc218\ubb38\uc790"],label_taboo:o["\uc0ac\uc6a9\uae08\uc9c0 \ubb38\uc790"],label_name:s["\uc774\ub984"],label_id:o["\uc544\uc774\ub514"],label_same:o["\ub3d9\uc77c\ubb38\uc790"],label_over:o["\uac1c \uc774\uc0c1"],label_serial:o["\uc5f0\uc18d\ubb38\uc790"],label_input:o["\uc9c1\uc811\uc785\ub825"],label_desc:o["\u203b \uae08\uc9c0\ubb38\uc790\ub294 \ud55c\uc904\uc5d0 \ud55c \uac1c\uc529 \uc785\ub825"],label_reuse:o["\uc774\uc804 \ube44\ubc00\ubc88\ud638 \uc7ac\uc0ac\uc6a9"],label_limit_password_reuse_count_desc:o["\uc774\uc804 \ube44\ubc00\ubc88\ud638 \uc7ac\uc0ac\uc6a9 \uc124\uba85"],label_enable:s["\ud5c8\uc6a9"],label_disable:s["\ud5c8\uc6a9\ud558\uc9c0 \uc54a\uc74c"],label_last:o["\ucd5c\uadfc"],label_time:o["\ud68c"],label_within:o["\uc774\ub0b4"],label_alert:o["\uc785\ub825\uac12\uc740 0~0\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4."],label_system_config:o["\uc2dc\uc2a4\ud15c \uc124\uc815"],label_site_config:o["\uc0ac\uc774\ud2b8 \ubcc4 \uc124\uc815"],lable_rule_default_config:o["\ube44\ubc00\ubc88\ud638 \uc815\ucc45 \uae30\ubcf8\uac12 \uc124\uc815"],lable_rule_default_config_desc:o["\ube44\ubc00\ubc88\ud638 \uc815\ucc45 \uae30\ubcf8\uac12 \uc124\uc815 \uc124\uba85"],label_ok:s["\uc800\uc7a5"],label_cancel:s["\ucde8\uc18c"]},a=n.BaseView.extend({events:{"click span#btn_ok":"_confirmSave","click span#btn_cancel":"_passwordConfigCancel","click form[name='formPasswordRule'] input:checkbox":"_toggleCheckbox","click form[name='formPasswordRule'] input:radio":"_toggleRadio","click span#data":"_changeModifyForm","click span.btn_box[data-btntype='changeform']":"_changeModifyForm","focusout input[type='input']":"_onChangeInput","focusout textarea":"_onChangeInput","keyup #passwordWrap input[type='input']":"_keyupValidator","keyup #passwordWrap textarea":"_keyupValidator","change input[name=passwordReuse]":"_toggleReuse"},initialize:function(t){this.model=new i,this.model.fetch().done(e.proxy(function(){this.render()},this))},render:function(){e(".breadcrumb .path").html(o["\uae30\ud0c0 \uc124\uc815"]+" > "+o["\ube44\ubc00\ubc88\ud638 \uc815\ucc45 \uc124\uc815"]);var t=this.model.toJSON();return this.$el.html(r({lang:u,model:t,LimitPasswordReuseCount:[{value:"1"},{value:"2"},{value:"3"},{value:"4"},{value:"5"},{value:"6"},{value:"7"},{value:"8"},{value:"9"},{value:"10"}]})),this.model.get("tabooCharSame")||e("span#sameCharLength").hide(),this.model.get("tabooCharSerial")||e("span#serialCharLength").hide(),this.model.get("tabooCharInput")||e("span#inputChar").hide(),this.model.get("passwordReuse")||this.$("#limitPasswordReuseCount").val(this.model.get("limitPasswordReuseCount")),this.model.get("usePasswordConfig")?this._usePasswordConfigTrue():this._usePasswordConfigFalse(),this},_toggleCheckbox:function(t){t.stopPropagation(),e(t.currentTarget).is(":checked")?(e(t.currentTarget).val(!0),e(t.currentTarget).attr("checked",!0),e(t.currentTarget).is(':checkbox[name="tabooCharSame"]')?e("span#sameCharLength").show():e(t.currentTarget).is(':checkbox[name="tabooCharSerial"]')?e("span#serialCharLength").show():e(t.currentTarget).is(':checkbox[name="tabooCharInput"]')&&e("span#inputChar").show()):(e(t.currentTarget).val(!1),e(t.currentTarget).attr("checked",!1),e(t.currentTarget).is(':checkbox[name="tabooCharSame"]')?e("span#sameCharLength").hide():e(t.currentTarget).is(':checkbox[name="tabooCharSerial"]')?e("span#serialCharLength").hide():e(t.currentTarget).is(':checkbox[name="tabooCharInput"]')&&e("span#inputChar").hide())},_toggleRadio:function(t){t.stopPropagation(),e(t.currentTarget).attr("value")=="true"&&e(t.currentTarget).attr("name")=="usePasswordConfig"?this._usePasswordConfigTrue():e(t.currentTarget).attr("value")=="false"&&e(t.currentTarget).attr("name")=="usePasswordConfig"&&(this._usePasswordConfigFalse(),this._makeOriginalInputData(),e.goAlert(o["\ube44\ubc00\ubc88\ud638 \uad00\ub9ac\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0, \ubcf4\uc548\uc5d0 \ucde8\uc57d\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."],"","",s["\ud655\uc778"]))},_changeModifyForm:function(t){t.stopPropagation();var n=e(t.currentTarget).parent();n&&n.attr("data-formname")=="inputChar"?n.html(['<textarea class="input w_small" id="',n.attr("data-formname"),'" name="',n.attr("data-formname"),'">',n.attr("data-value"),"</textarea>"].join("")).find("input").focusin():n&&n.attr("data-formname")=="resetPassword"?(e(t.currentTarget).hide(),n.html(['<input type="input" name="',n.attr("data-formname"),'"id="',n.attr("data-formname"),'" class="input w200" maxlength="16" value="',n.attr("data-value"),'" />'].join("")).find("input").focusin()):(e(t.currentTarget).hide(),n.html(['<input type="input" name="',n.attr("data-formname"),'"id="',n.attr("data-formname"),'" class="input t_num" value="',n.attr("data-value"),'" />'].join("")).find("input").focusin())},_onChangeInput:function(e){e.stopPropagation(),this._inputValidator(e.currentTarget.id,e.currentTarget.value)},_inputValidator:function(t,r){var i=e("#"+t).parent(),s=e("input#tabooCharSame").is(":checked"),a=e("input#tabooCharSerial").is(":checked"),f=e("input#tabooCharInput").is(":checked"),l=i.parent().parent().find("#"+t+"Alert");l.html("");if(t=="minPasswordLength"){var c=e("div.maxPasswordLength").children().attr("data-value");if(r<8||r>15)return l.html(n.i18n(u.label_alert,{arg1:"8",arg2:"15"})),e("#"+t).focus(),e("#"+t).val(""),!1;if(parseInt(r)>=parseInt(c))return l.html(o["\ucd5c\ub300\uac12\ubcf4\ub2e4 \ud070\uacbd\uc6b0 \uacbd\uace0"]),e("#"+t).focus(),e("#"+t).val(""),!1;i.attr("data-value",r)}if(t=="maxPasswordLength"){var h=e("div.minPasswordLength").children().attr("data-value");if(r<9||r>16)return l.html(n.i18n(u.label_alert,{arg1:"9",arg2:"16"})),e("#"+t).focus(),e("#"+t).val(""),!1;if(parseInt(r)<=parseInt(h))return l.html(o["\ucd5c\uc18c\uac12\ubcf4\ub2e4 \uc791\uc740\uacbd\uc6b0 \uacbd\uace0"]),e("#"+t).focus(),e("#"+t).val(""),!1;i.attr("data-value",r)}if(s&&t=="sameCharLength"||a&&t=="serialCharLength")if(r<3||r>6)return l.html(n.i18n(u.label_alert,{arg1:"3",arg2:"6"})),e("input#"+t).focus(),e("input#"+t).val(""),!1;return f&&t=="inputChar"&&!e.goValidation.isCheckLength(0,100,r)?(l.html(n.i18n(o["0\uc790\uc774\uc0c1 0\uc774\ud558 \uc785\ub825\ud574\uc57c\ud569\ub2c8\ub2e4."],{arg1:"1",arg2:"100"})),e("textarea#"+t).focus(),e("textarea#"+t).val(""),!1):!0},_keyupValidator:function(t){t.stopPropagation();var n=t.currentTarget.id,r=e(t.currentTarget).parent(),i=r.parent().parent().find(".go_alert");i.html("");if(n!="inputChar"&&!(t.keyCode>=96&&t.keyCode<=105||t.keyCode>=48&&t.keyCode<=57||t.keyCode==46||t.keyCode==13||t.keyCode==8))return i.html(o["\uc22b\uc790\ub9cc \uc785\ub825\ud558\uc138\uc694."]),t.currentTarget.value="",!1},_toggleReuse:function(t){t.stopPropagation();var n=!GO.util.toBoolean(e(t.currentTarget).val());this.$("#limitPasswordReuseCount").toggle(n)},_confirmSave:function(t){t.stopPropagation();if(e("#usePasswordConfig_false").is(":checked")){this._passwordConfigSave();return}var n=this,r=e("#mandatoryCharNumber").is(":checked")?!0:!1,i=e("#mandatoryCharBlank").is(":checked")?!0:!1,u=e("#mandatoryCharAlphabet").is(":checked")?!0:!1,a=e("#mandatoryCharSymbol").is(":checked")?!0:!1,f=e("#tabooCharName").is(":checked")?!0:!1,l=e("#tabooCharId").is(":checked")?!0:!1,c=e("#tabooCharSame").is(":checked")?!0:!1,h=e("#tabooCharSerial").is(":checked")?!0:!1,p=e("#tabooCharInput").is(":checked")?!0:!1;r||i||u||a||c||h||p||f||l?this._passwordConfigSave():e.goConfirm(o["\ud544\uc218\ud3ec\ud568 \ubb38\uc790 \ub610\ub294 \uc0ac\uc6a9\uae08\uc9c0 \ubb38\uc790\ub97c \uc124\uc815\ud558\uc9c0 \uc54a\uc73c\uba74 \ubcf4\uc548\uc5d0 \ucde8\uc57d\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]+"<br>"+o["\uc800\uc7a5\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"],"",function(){n._passwordConfigSave()},s["\ud655\uc778"],function(){})},_passwordConfigSave:function(){var t=this,n=!0;form=this.$el.find("form[name=formPasswordRule]");if(e("input#minPasswordLength").length>0&&!this._inputValidator("minPasswordLength",e("#minPasswordLength").val()))return!1;if(e("input#minPasswordLength").length>0&&!this._inputValidator("maxPasswordLength",e("#maxPasswordLength").val()))return!1;if(!this._inputValidator("sameCharLength",e("input#sameCharLength").val()))return!1;if(!this._inputValidator("serialCharLength",e("input#serialCharLength").val()))return!1;if(!this._inputValidator("inputChar",e("textarea#inputChar").val()))return!1;e.each(form.serializeArray(),function(e,n){t.model.set(n.name,n.value,{silent:!0})}),e.each(form.find('input[type="checkbox"]'),function(r,i){if(e(i).attr("checked")){if(i.name=="tabooCharInput"&&e("textarea").length>0){var s=e.trim(e("textarea").val());if(s==undefined||s=="")return n=!1,e.goMessage(o["\uc81c\ud55c \uac12\uc744 \uc785\ub825\ud558\uc138\uc694."]),e("textarea").focus(),!1}}else t.model.set(i.name,i.value,{silent:!0})});if(!n)return!1;GO.util.preloader(this.model.save({},{type:"PUT",success:function(n,r){r.code=="200"&&(e.goMessage(s["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]),t.render())},error:function(t,n){try{var r=JSON.parse(n.responseText);e.goAlert(s["\uc2e4\ud328"],r.message)}catch(i){e.goAlert(s["\uc2e4\ud328"],"code: "+n.status+",statusText: "+n.statusText)}}}))},_passwordConfigCancel:function(t){t.stopPropagation();var n=this;e.goCaution(s["\ucde8\uc18c"],s["\ubcc0\uacbd\ud55c \ub0b4\uc6a9\uc744 \ucde8\uc18c\ud569\ub2c8\ub2e4."],function(){n.render(),e.goMessage(s["\ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."])},s["\ud655\uc778"])},_usePasswordConfigTrue:function(){e(".minPasswordLength").attr("style",""),e(".maxPasswordLength").attr("style",""),e("#tabooCharInput").is(":checked")&&e("span#inputChar").attr("style",""),e("#tabooCharSame").is(":checked")&&e("span#sameCharLength").attr("style",""),e("#tabooCharSerial").is(":checked")&&e("span#serialCharLength").attr("style",""),e("textarea").attr("style",""),e("#tabooCharInput").attr("disabled",!1),e("#tabooCharSerial").attr("disabled",!1),e("#tabooCharSame").attr("disabled",!1),e("#tabooCharName").attr("disabled",!1),e("#tabooCharId").attr("disabled",!1),e("#mandatoryCharNumber").attr("disabled",!1),e("#mandatoryCharBlank").attr("disabled",!1),e("#mandatoryCharAlphabet").attr("disabled",!1),e("#mandatoryCharSymbol").attr("disabled",!1),e('input[name="passwordReuse"]').attr("disabled",!1),e.each(e("#first_tr").siblings(),function(t,n){e(n).attr("style","")})},_usePasswordConfigFalse:function(){e(".minPasswordLength").attr("style","display:none"),e(".maxPasswordLength").attr("style","display:none"),e("span#inputChar").attr("style","display:none"),e("span#sameCharLength").attr("style","display:none"),e("span#serialCharLength").attr("style","display:none"),e("textarea").attr("style","display:none"),e("#tabooCharInput").attr("disabled",!0),e("#tabooCharSerial").attr("disabled",!0),e("#tabooCharSame").attr("disabled",!0),e("#tabooCharName").attr("disabled",!0),e("#tabooCharId").attr("disabled",!0),e("#mandatoryCharNumber").attr("disabled",!0),e("#mandatoryCharBlank").attr("disabled",!0),e("#mandatoryCharAlphabet").attr("disabled",!0),e("#mandatoryCharSymbol").attr("disabled",!0),e('input[name="passwordReuse"]').attr("disabled",!0),e.each(e("#first_tr").siblings(),function(t,n){n.id!="useSystemPasswordRules"&&e(n).attr("style","display:none")})},_makeOriginalInputData:function(){e('input[id="minPasswordLength"]').val(this.model.get("minPasswordLength")),e('[data-formname = "minPasswordLength"]').attr("data-value",this.model.get("minPasswordLength")),e('input[id="maxPasswordLength"]').val(this.model.get("maxPasswordLength")),e('[data-formname = "maxPasswordLength"]').attr("data-value",this.model.get("maxPasswordLength")),e('textarea[id="inputChar"]').val(this.model.get("inputChar")),e('[data-formname = "inputChar"]').attr("data-value",this.model.get("inputChar")),e('input[id="sameCharLength"]').val(this.model.get("sameCharLength")),e('[data-formname = "sameCharLength"]').attr("data-value",this.model.get("sameCharLength")),e('input[id="serialCharLength"]').val(this.model.get("serialCharLength")),e('[data-formname = "serialCharLength"]').attr("data-value",this.model.get("serialCharLength"))},refresh:function(){this.model.fetch().done(e.proxy(function(){this.render()},this))}});return a});