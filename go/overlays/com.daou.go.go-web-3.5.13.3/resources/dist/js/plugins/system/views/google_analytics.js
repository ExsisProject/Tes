(function(){define(["jquery","backbone","app","hgn!system/templates/google_analytics","i18n!nls/commons","i18n!admin/nls/admin","jquery.go-grid","jquery.go-sdk","GO.util"],function(e,t,n,r,i,s){var o={label_google_analytics:s["Google Analytics \uad00\ub9ac"],label_title:s["Google Analytics \uc124\uc815"],label_googleanalytics_company:s["\ud68c\uc0ac\uba85"],label_googleanalytics_configvalue:s["Google Key \uac12"],label_ok:i["\uc800\uc7a5"],label_cancel:i["\ucde8\uc18c"]},u=t.View.extend({events:{"click span#btn_ok":"googleAnalyticsSave","click span#btn_cancel":"googleAnalyticsCancel","click span.btn_box[data-btntype='changeform']":"googleAnalyticsChange","click span.edit_data":"googleAnalyticsChange"},initialize:function(){this.model=null},googleAnalyticsChange:function(t){var n=e(t.currentTarget).parent();n&&n.attr("data-formname")&&(e(t.currentTarget).hide(),n.html(['<input type="input" name="',n.attr("data-formname"),'" class="input w_mini" value="',n.attr("data-value"),'" />'].join("")).find("input").focusin())},render:function(){var t=this,n=e.Deferred();return e.when(this.getGoogleAnalytics()).then(function(){e(".breadcrumb .path").html(s["Google Analytics \uad00\ub9ac"]);var i=t.model;t.$el.html(r({lang:o,googleAnalyticsData:i})),n.resolveWith(t,[t])}),n},getGoogleAnalytics:function(){var t=this,n=e.Deferred(),r=GO.contextRoot+"ad/api/system/googleconfig";return e.go(r,"",{qryType:"GET",responseFn:function(e){e.code==200&&(t.model=e.data,n.resolve())},error:function(e){}}),n},googleAnalyticsSave:function(){var t=this,n=e.Deferred(),r=[],s=GO.contextRoot+"ad/api/system/googleconfig";return e.each(e('[data-formname="googleAnalytics"]'),function(t,n){var i=e(n).find("input").val();i==undefined&&(i=e(n).attr("data-value"));var s={companyId:parseInt(e(n).attr("data-id")),companyName:e(n).attr("data-name"),configValue:i};r.push(s)}),e.go(s,JSON.stringify(r),{qryType:"POST",contentType:"application/json",responseFn:function(n){n.code==200&&(e.goMessage(i["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]),t.render())},error:function(e){}}),n},googleAnalyticsCancel:function(){var t=this;e.goCaution(o.label_cancel,i["\ubcc0\uacbd\ud55c \ub0b4\uc6a9\uc744 \ucde8\uc18c\ud569\ub2c8\ub2e4"],function(){t.render(),e.goMessage(i["\ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."])})}},{__instance__:null});return u})}).call(this);