define(["jquery","backbone","app","admin/models/install_info","hgn!system/templates/site_create","hgn!system/templates/site_modify","system/collections/companies","system/models/companyBaseModel","system/models/siteConfigModel","system/models/directedApproverModel","system/models/indexfssModel","system/models/licenseModel","system/models/tmwCollaborationModel","system/models/installInfoModel","system/models/site_control_option","i18n!nls/commons","i18n!admin/nls/admin","jquery.go-orgslide","jquery.go-sdk","jquery.go-validation","swfupload","swfupload.plugin"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){function w(){var t=e("#baseCompanyConfig_restrictCompanyPeriodStart"),n=e("#baseCompanyConfig_restrictCompanyPeriodEnd");t.val(GO.util.customDate(r,"YYYY-MM-DD")),n.val(GO.util.customDate(r,"YYYY-MM-DD")),e.datepicker.setDefaults(e.datepicker.regional[GO.config("locale")]);var r=new Date;t.datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearSuffix:"",minDate:GO.util.customDate(r,"YYYY-MM-DD"),onSelect:function(e){n.datepicker("option","minDate",e)}}),n.datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearSuffix:"",minDate:GO.util.customDate(r,"YYYY-MM-DD")})}var g={label_domain_info:m["\uc0ac\uc774\ud2b8 \uae30\ubcf8\uc815\ubcf4"],label_domain:m["\ub3c4\uba54\uc778 \uba85"],label_company_name:m["\uc0ac\uc774\ud2b8\uba85"],label_domain_indexfs:m["\ub3c4\uba54\uc778 Indexfs"],label_select_host:m["\uba54\uc77c Host\ub97c \uc120\ud0dd\ud558\uc138\uc694."],label_add:v["\ucd94\uac00"],label_delete:v["\uc0ad\uc81c"],label_password_method:m["\ube44\ubc00\ubc88\ud638 \uc554\ud638\ud654"],label_clear_text:m["[Clear Text]"],label_unix_crypt:m["[Unix Crypt]"],label_md5:m["[MD5]"],label_sha:m["[SHA]"],label_sha256:m["[SHA256]"],label_sha512:m["[SHA512]"],label_towfish:m["[TWOFISH]"],label_ssha:m["[SSHA]"],label_bcrypt:m["[BCRYPT]"],label_max_user_count:m["\ucd5c\ub300 \uc0ac\uc6a9\uc790 \uc218"],label_admin_info:m["\uad00\ub9ac\uc790 \ucd94\uac00\uc815\ubcf4"],label_admin_name:m["\uc774\ub984 (\ud55c\uae00)"],label_admin_id:m["\uc544\uc774\ub514"],label_admin_id_exist:m["\uc544\uc774\ub514\uac00 \uc911\ubcf5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."],label_admin_id_null:m["\uc544\uc774\ub514\ub97c \uc785\ub825\ud558\uc138\uc694."],label_admin_name_null:m["\uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694."],label_admin_id_invalid:m["\uc0ac\uc6a9\ud560 \uc218 \uc5c6\ub294 \uc544\uc774\ub514\uc785\ub2c8\ub2e4."],label_service:m["\uc81c\uacf5 \uc11c\ube44\uc2a4"],label_mail_service:m["\uba54\uc77c \uc11c\ube44\uc2a4"],label_pop:m.POP,label_imap:m.IMAP,label_webmail:m.WEBMAIL,label_smtp_auth:m["SMTP AUTH"],label_home:m["\ud648"],label_use:v["\uc0ac\uc6a9"],label_not_use:m["\uc0ac\uc6a9 \uc548\ud568"],label_contact:m["\uc8fc\uc18c\ub85d"],label_file:v["\uc790\ub8cc\uc2e4"],label_calendar:v["\uce98\ub9b0\ub354"],label_board:v["\uac8c\uc2dc\ud310"],label_community:v["\ucee4\ubba4\ub2c8\ud2f0"],label_reserve:m["\uc608\uc57d"],label_chat:m["\ub300\ud654"],label_pcapp:m["PC \uba54\uc2e0\uc800"],label_Mobile:m["\ubaa8\ube4c\ub9ac\ud2f0"],label_mobile_app:m["\ubaa8\ubc14\uc77c \uc571"],label_otp:m["OTP \uc5f0\ub3d9"],label_report:m["\ubcf4\uace0"],label_task:m["\uc5c5\ubb34"],label_works:"Works",label_todo:m["ToDO+"],label_survey:m["\uc124\ubb38"],label_approval:v["\uc804\uc790\uacb0\uc7ac"],label_docfolder:v["\uc804\uc0ac \ubb38\uc11c\ud568"],label_org:m["\uc870\uc9c1\ub3c4"],label_in_charge:m["\ub2f4\ub2f9\uc790"],label_phone_num:m["\uc804\ud654"],label_modify:v["\uc218\uc815"],label_cancel:v["\ucde8\uc18c"],label_save:v["\uc800\uc7a5"],label_breadcrumb_mod:m["\uc0ac\uc774\ud2b8 \uad00\ub9ac > \uc0ac\uc774\ud2b8 \uc218\uc815"],label_breadcrumb_add:m["\uc0ac\uc774\ud2b8 \uad00\ub9ac > \uc0ac\uc774\ud2b8 \ucd94\uac00"],label_return_list:m["\ubaa9\ub85d\uc73c\ub85c \ub3cc\uc544\uac00\uae30"],label_domain_more_info:m["\uc0ac\uc774\ud2b8 \ucd94\uac00\uc815\ubcf4"],label_total_account_quota:m["\ucd1d \ud560\ub2f9 \uacc4\uc815 \uc6a9\ub7c9"],label_total_company_quota:m["\uacf5\uc6a9 \uc6a9\ub7c9"],label_send_warning:m["\uacf5\uc6a9 \uc6a9\ub7c9 \ucd08\uacfc \uacbd\uace0 \ubc1c\uc1a1"],label_warning_rate:m["\uacf5\uc6a9 \uc6a9\ub7c9 \ucd08\uacfc \uacbd\uace0 \ube44\uc728"],label_restriction:m["\uacf5\uc6a9 \uc6a9\ub7c9 \ucd08\uacfc\uc2dc \uc81c\uc7ac"],label_limitless:m["\ubb34\uc81c\ud55c"],label_direct_input:m["\uc9c1\uc811 \uc785\ub825"],label_help_account_quota:m["\ucd1d \ud560\ub2f9 \uacc4\uc815 \uc6a9\ub7c9 \ub3c4\uc6c0\ub9d0"],label_help_company_quota:m["\uacf5\uc6a9 \uc6a9\ub7c9 \ub3c4\uc6c0\ub9d0"],label_help_restrict_quota:m["\uacf5\uc6a9 \uc6a9\ub7c9 \ucd08\uacfc\uc2dc \uc81c\uc7ac \ub3c4\uc6c0\ub9d0"],label_use_abbroad_ip_check:m["\ud574\uc678 \ub85c\uadf8\uc778 \ucc28\ub2e8"],label_allow_encrypted_file:m["\uc554\ud638\ud654\ub41c \ud30c\uc77c \uc5c5\ub85c\ub4dc \ud5c8\uc6a9"],label_allow_sync_history:m["\ub3d9\uae30\ud654 \uc774\ub825\uad00\ub9ac"],label_allow_encrypted_file_description:m["\u203b \ubcf4\uc548\uc124\uc815 >\uacf5\ud1b5 >\uc548\ud2f0 \ubc14\uc774\ub7ec\uc2a4\uc758 \uc124\uc815\uc5d0\uc11c [\uc0ac\uc774\ud2b8 \ubcc4 \uc124\uc815] \uc2dc\uc5d0\ub9cc  \ub3d9\uc791\ud569\ub2c8\ub2e4."],label_directed_approver:m["\uc2b9\uc778\uc790 \uc9c1\uc811 \uc9c0\uc815"],label_user_indexfs_datafs:m["\uc0ac\uc774\ud2b8 Indexfs / Datafs"],label_prev:v["\uc774\uc804"],label_save_next:m["\uc800\uc7a5 \ud6c4 \uc644\ub8cc"],label_domain_name_help:m["\uc0ac\uc774\ud2b8\uc5d0\uc11c \ub3c4\uba54\uc778 \uba85 \uc124\uba85"],label_site_name_help:m["\uc0ac\uc774\ud2b8\uba85 \uc124\uba85"],label_algorithm_name_help:m["\uc554\ud638\ud654 \uc124\uba85"],label_max_user_help:m["\ucd5c\ub300 \uc0ac\uc6a9\uc790 \uc218 \uc124\uba85"],label_site_url:m["\uc811\uc18d URL"],label_siteUrl_desc:m["\uc811\uc18d URL \ub3c4\uc6c0\ub9d0"],label_ehr_config:m["\uadfc\ud0dc\uad00\ub9ac"],label_welfare_config:m["\ubcf5\uc9c0\ud3ec\uc778\ud2b8"],label_sms_config:m["\ubb38\uc790\ubc1c\uc1a1"],label_security:m["\ubcf4\uc548\uc13c\ud130"],label_smartFilter:m["\uc2a4\ub9c8\ud2b8 \ubd84\ub958"],label_docs:m["\ubb38\uc11c\uad00\ub9ac"],label_store:v["Link+"],label_period:m["\uc0ac\uc6a9 \uae30\uac04"],label_period_ment:m["\uc0ac\uc6a9\uae30\uac04 \uc911\uc5d0\ub9cc \uc811\uadfc \uac00\ub2a5\ud569\ub2c8\ub2e4."],label_task_guide:m["\uc5c5\ubb34\uc11c\ube44\uc2a4\uc548\ub0b4\ubb38\uad6c"],label_channel:m["\uc678\ubd80 \uc2dc\uc2a4\ud15c"],"\uae30\ubcf8":m["\uae30\ubcf8"],"\uc2e0\uaddc":m["\uc2e0\uaddc"],label_alliance_system:"\uc2dc\uc2a4\ud15c \uc5f0\ub3d9",label_alliance_system_guide:"\u203b \uc81c\ud734 \uc2dc\uc2a4\ud15c\uacfc \uc5f0\ub3d9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","\uba54\uc2e0\uc800\ud0c0\uc785\uc124\uc815":m["\uba54\uc2e0\uc800 \ud0c0\uc785 \uc124\uc815"],label_password:m["\ube44\ubc00\ubc88\ud638"],label_password_confirm:m["\ube44\ubc00\ubc88\ud638 \ud655\uc778"],label_password_creation_rule:m["\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd \uae30\ubcf8\uaddc\uce59"],label_otp_in_admin:m["\uad00\ub9ac\uc790 \ud398\uc774\uc9c0\uc5d0\uc11c \uad6c\uae00 OTP \uc0ac\uc6a9"]},y=null,b=n.BaseView.extend({initialize:function(e){this.options=e||{},this.siteId=this.options.siteId,this.modUserCount=0,this.meetingRoomCount=0,this.licenseModel=c.read(),this.installInfoModel=p.read(),this.tmwCollaborationModel=h.read(),this.siteControlOptionModel=d.read(),this.isSiteControlOn=this.siteControlOptionModel.isSiteControlOn(),this.isSaaS=GO.session().brandName=="DO_SAAS",this.unbindEvent(),this.bindEvent()},unbindEvent:function(){this.$el.off("click","#btn_site_ok"),this.$el.off("click","#btn_site_modify"),this.$el.off("click","#btn_site_cancel"),this.$el.off("click","#btn_site_prev"),this.$el.off("click","span#btn_return_list"),this.$el.off("click","span#btn_add_indexFs"),this.$el.off("click","span#btn_delete_indexFs"),this.$el.off("click","span#btn_add_dataFs"),this.$el.off("click","span#btn_delete_dataFs"),this.$el.off("click","select#hostName"),this.$el.off("click","span.editable"),this.$el.off("click","form[name='formSiteConfig'] input:radio"),this.$el.off("keyup","input#totalAccountQuota"),this.$el.off("keyup","input#companyQuota")},bindEvent:function(){this.$el.on("click","#btn_site_ok",e.proxy(this.siteSave,this)),this.$el.on("click","#btn_site_modify",e.proxy(this.siteModify,this)),this.$el.on("click","#btn_site_cancel",e.proxy(this.siteCancel,this)),this.$el.on("click","#btn_site_prev",e.proxy(this.siteMovePrev,this)),this.$el.on("click","span#btn_return_list",e.proxy(this.siteReturnList,this)),this.$el.on("click","span#btn_add_indexFs",e.proxy(this.addIndexFs,this)),this.$el.on("click","span#btn_delete_indexFs",e.proxy(this.deleteIndexFs,this)),this.$el.on("click","span#btn_add_dataFs",e.proxy(this.addDataFs,this)),this.$el.on("click","span#btn_delete_dataFs",e.proxy(this.deleteDataFs,this)),this.$el.on("change","select#hostName",e.proxy(this.changeSelectBox,this)),this.$el.on("click","span.editable",e.proxy(this.changeInput,this)),this.$el.on("click","form[name='formSiteConfig'] input:radio",e.proxy(this.toggle,this)),this.$el.on("keyup","input#totalAccountQuota",e.proxy(this._validateNumber,this)),this.$el.on("keyup","input#companyQuota",e.proxy(this._validateNumber,this))},render:function(){var t,n=this.installInfoModel.toJSON();e("#site").addClass("on"),this.$el.empty(),this.siteId?(e(".breadcrumb .path").html(m["\uc0ac\uc774\ud2b8 \uad00\ub9ac > \uc0ac\uc774\ud2b8 \uc218\uc815"]),this.siteConfigModel=a.get(this.siteId),this.siteData=this.siteConfigModel.toJSON(),t=s({siteInfo:this.siteData,lang:g,isSaaS:this.isSaaS,isSiteControlOn:this.isSiteControlOn,isInstalled:n.installed}),this.$el.html(t),this.chackLicense(),this.checkTmwConfig(),w.call(this),this.setSiteModifyData(this.siteData)):(e(".breadcrumb .path").html(m["\uc0ac\uc774\ud2b8 \uad00\ub9ac > \uc0ac\uc774\ud2b8 \ucd94\uac00"]),t=i({lang:g,isSaaS:this.isSaaS,isInstalled:n.installed}),this.$el.html(t),this.chackLicense(),this.checkTmwConfig(),w.call(this)),this.getHostName(),this.getDomains(this.siteId),this.directedApproverModel=f.get(),this.directedApproverData=this.directedApproverModel.toJSON(),n.installed||(e("#indexfsTr").hide(),e("#datafsTr").hide()),"on"!=this.directedApproverData.directedApprover&&e("#directedApprover").hide()},setSiteModifyData:function(t){this.$el.find("#indexFss").val(t.indexFss),this.$el.find("#passwordMethod").val(t.algorithmName),this.modUserCount=t.userCount,this.meetingRoomCount=t.config.meetingRoomCount,this.$el.find('input[name="serviceModel_pop"]').attr("checked",t.serviceModel.pop),this.$el.find('input[name="serviceModel_imap"]').attr("checked",t.serviceModel.imap),this.$el.find('input[name="serviceModel_webMail"]').attr("checked",t.serviceModel.webMail),this.$el.find('input[name="serviceModel_smtpauth"]').attr("checked",t.serviceModel.smtpauth),this.$el.find('input[name="config_homeService"][value="'+t.config.homeService+'"]').attr("checked",!0),this.$el.find('input[name="config_contactService"][value="'+t.config.contactService+'"]').attr("checked",!0),this.$el.find('input[name="config_webfolderService"][value="'+t.config.webfolderService+'"]').attr("checked",!0),this.$el.find('input[name="config_calendarService"][value="'+t.config.calendarService+'"]').attr("checked",!0),this.$el.find('input[name="config_boardService"][value="'+t.config.boardService+'"]').attr("checked",!0),this.$el.find('input[name="config_communityService"][value="'+t.config.communityService+'"]').attr("checked",!0),this.$el.find('input[name="config_assetService"][value="'+t.config.assetService+'"]').attr("checked",!0),this.$el.find('input[name="config_reportService"][value="'+t.config.reportService+'"]').attr("checked",!0),this.$el.find('input[name="config_taskService"][value="'+t.config.taskService+'"]').attr("checked",!0),this.$el.find('input[name="config_worksService"][value="'+t.config.worksService+'"]').attr("checked",!0),this.$el.find('input[name="config_todoService"][value="'+t.config.todoService+'"]').attr("checked",!0),this.$el.find('input[name="config_surveyService"][value="'+t.config.surveyService+'"]').attr("checked",!0),this.$el.find('input[name="config_approvalService"][value="'+t.config.approvalService+'"]').attr("checked",!0),this.$el.find('input[name="config_docfolderService"][value="'+t.config.docfolderService+'"]').attr("checked",!0),this.$el.find('input[name="config_chatService"][value="'+t.config.chatService+'"]').attr("checked",!0),this.$el.find('input[name="config_pcappService"][value="'+t.config.pcappService+'"]').attr("checked",!0),this.$el.find('input[name="config_mobileService"][value="'+t.config.mobileService+'"]').attr("checked",!0),this.$el.find('input[name="config_mobileAppService"][value="'+t.config.mobileAppService+'"]').attr("checked",!0),this.$el.find('input[name="config_orgService"][value="'+t.config.orgService+'"]').attr("checked",!0),this.$el.find('input[name="config_otpService"][value="'+t.config.otpService+'"]').attr("checked",!0),this.$el.find('input[name="config_useAbbroadIpCheck"][value="'+t.config.useAbbroadIpCheck+'"]').attr("checked",!0),this.$el.find('input[name="config_allowEncryptedFileUploadCheck"][value="'+t.config.allowEncryptedFileUploadCheck+'"]').attr("checked",!0),this.$el.find('input[name="config_allowSyncHistory"][value="'+t.config.allowSyncHistory+'"]').attr("checked",!0),this.$el.find('input[name="config_directedApprover"][value="'+t.config.directedApprover+'"]').attr("checked",!0),this.$el.find('input[name="config_ehrService"][value="'+t.config.ehrService+'"]').attr("checked",!0),this.$el.find('input[name="config_smsService"][value="'+t.config.smsService+'"]').attr("checked",!0),this.$el.find('input[name="config_docsService"][value="'+t.config.docsService+'"]').attr("checked",!0),this.$el.find('input[name="config_smartFilter"][value="'+t.config.smartFilter+'"]').attr("checked",!0),this.$el.find('input[name="config_securityCenter"][value="'+t.config.securityCenter+'"]').attr("checked",!0),this.$el.find('input[name="config_channelService"][value="'+t.config.channelService+'"]').attr("checked",!0),this.$el.find('input[name="config_messengerType"][value="'+t.config.messengerType+'"]').prop("checked",!0),this.$el.find('input[name="config_zoomChat"][value="'+t.config.zoomChat+'"]').prop("checked",!0),this.$el.find('input[name="config_allianceSystemService"][value="'+t.config.allianceSystemService+'"]').attr("checked",!0),this.$el.find('input[name="config_storeService"][value="'+t.config.storeService+'"]').attr("checked",!0),e('[name="config_ehrService"]:radio:checked').val()=="off"?e("#welfareConfig").hide():this.$el.find('input[name="config_welfareConfig"][value="'+t.config.welfareConfig+'"]').prop("checked",!0),t.baseCompanyConfig.totalAccountQuota>1?(this.$el.find('input[name="baseCompanyConfig_totalAccountQuota"][value="self"]').attr("checked",!0),this.$el.find("#totalAccountQuota").attr("value",t.baseCompanyConfig.totalAccountQuota/1024/1024/1024),this._hideIfSiteControlOn(this.$el.find(".totalAccountQuotaLimitless")),this._removeMarginIfSiteControlOn(this.$el.find(".totalAccountQuotaDirectInput"))):(this.$el.find('input[name="baseCompanyConfig_totalAccountQuota"][value="'+t.baseCompanyConfig.totalAccountQuota+'"]').attr("checked",!0),e("#totalAccountQuota").attr("disabled",!0),this._hideIfSiteControlOn(this.$el.find(".totalAccountQuotaDirectInput"))),t.baseCompanyConfig.companyQuota>1?(this.$el.find('input[name="baseCompanyConfig_companyQuota"][value="self"]').attr("checked",!0),this.$el.find("#companyQuota").attr("value",t.baseCompanyConfig.companyQuota/1024/1024/1024),this._hideIfSiteControlOn(this.$el.find(".companyQuotaLimitless")),this._removeMarginIfSiteControlOn(this.$el.find(".companyQuotaDirectInput"))):(this.$el.find('input[name="baseCompanyConfig_companyQuota"][value="'+t.baseCompanyConfig.companyQuota+'"]').attr("checked",!0),e("#sendWarningMode").hide(),e("#warningRate").hide(),e("#restrict").hide(),e("#companyQuota").attr("disabled",!0),e("#companyQuota_on").parents("tr").addClass("last"),this._hideIfSiteControlOn(this.$el.find(".companyQuotaDirectInput"))),this.$el.find('input[name="baseCompanyConfig_sendWarningExceedCompanyQuota"][value="'+t.baseCompanyConfig.sendWarningExceedCompanyQuota+'"]').attr("checked",!0),t.baseCompanyConfig.sendWarningExceedCompanyQuota||e("#companyQuotaWarningRate").attr("disabled",!0),this.$el.find('input[name="baseCompanyConfig_companyQuotaWarningRate"]').attr("value",t.baseCompanyConfig.companyQuotaWarningRate==0?90:t.baseCompanyConfig.companyQuotaWarningRate),this.$el.find('input[name="baseCompanyConfig_restrictCompanyQuota"][value="'+t.baseCompanyConfig.restrictCompanyQuota+'"]').attr("checked",!0),this.$el.find('input[name="baseCompanyConfig_restrictCompanyPeriod"][value="'+t.baseCompanyConfig.restrictCompanyPeriod+'"]').attr("checked",!0),t.baseCompanyConfig.restrictCompanyPeriod==1?(this._hideIfSiteControlOn(this.$el.find(".restrictCompanyPeriod_on")),this._removeMarginIfSiteControlOn(this.$el.find(".restrictCompanyPeriod_false")),e("#baseCompanyConfig_restrictCompanyPeriodStart").attr("disabled",this.isSiteControlOn),e("#baseCompanyConfig_restrictCompanyPeriodEnd").attr("disabled",this.isSiteControlOn),e("#baseCompanyConfig_restrictCompanyPeriodStart").val(t.baseCompanyConfig.restrictCompanyPeriodStart),e("#baseCompanyConfig_restrictCompanyPeriodEnd").val(t.baseCompanyConfig.restrictCompanyPeriodEnd)):(this._hideIfSiteControlOn(this.$el.find(".restrictCompanyPeriod_false")),e("#baseCompanyConfig_restrictCompanyPeriodStart").attr("disabled",!0),e("#baseCompanyConfig_restrictCompanyPeriodEnd").attr("disabled",!0));var n=t.indexFss==null?0:t.indexFss;for(var r=0;r<n.length;r++)e("#indexFss").append('<OPTION value="'+n[r]+'">'+n[r]+"</OPTION>");var i=t.dataFss==null?0:t.dataFss;for(var r=0;r<i.length;r++)e("#dataFss").append('<OPTION value="'+i[r]+'">'+i[r]+"</OPTION>")},_hideIfSiteControlOn:function(e){this.isSiteControlOn?e.css("display","none"):e.css("display","inline-block")},_removeMarginIfSiteControlOn:function(e){this.isSiteControlOn&&e.css("margin-left","0px")},changeInput:function(t){var n=e(t.target),r;n.hasClass("ic_edit")?(r=n.parent().parent(),r.hide(),r.next().show()):(n.hide(),n.next().show())},toggle:function(t){var n=e(t.currentTarget);n.attr("name").indexOf("config_")!==-1?this.checkServicesState(n):this.changeBaseCompanyConfig(n)},checkServicesState:function(t){var n="",r="",i="";t.attr("name")=="config_chatService"&&e('[name="config_chatService"]:radio:checked').val()=="off"?(n=m["\ub300\ud654\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc73c\uba74 PC \uba54\uc2e0\uc800\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],r=function(){e("#pcappService_off").attr("checked",!0)},i=function(){e("#chatService_on").attr("checked",!0)}):t.attr("name")=="config_pcappService"&&e('[name="config_chatService"]:radio:checked').val()=="off"?(n=m["\ub300\ud654\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc73c\uba74 PC \uba54\uc2e0\uc800\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],r=function(){e("#chatService_on").attr("checked",!0),e("#pcappService_on").attr("checked",!0)},i=function(){e("#pcappService_off").attr("checked",!0)}):t.attr("name")=="config_orgService"&&e('[name="config_orgService"]:radio:checked').val()=="off"?(n=m["\uc870\uc9c1\ub3c4\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc73c\uba74 \uc5c5\ubb34, \ubcf4\uace0, \uacb0\uc7ac\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],r=function(){e("#reportService_off").attr("checked",!0),e("#taskService_off").attr("checked",!0),e("#worksService_off").attr("checked",!0),e("#approvalService_off").attr("checked",!0)},i=function(){e("#orgService_on").attr("checked",!0)}):t.attr("name")=="config_reportService"&&e('[name="config_orgService"]:radio:checked').val()=="off"?(n=m["\uc870\uc9c1\ub3c4\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc73c\uba74 \uc5c5\ubb34, \ubcf4\uace0, \uacb0\uc7ac\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],r=function(){e("#orgService_on").attr("checked",!0)},i=function(){e("#reportService_off").attr("checked",!0)}):t.attr("name")=="config_taskService"&&e('[name="config_orgService"]:radio:checked').val()=="off"?(n=m["\uc870\uc9c1\ub3c4\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc73c\uba74 \uc5c5\ubb34, \ubcf4\uace0, \uacb0\uc7ac\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],r=function(){e("#orgService_on").attr("checked",!0)},i=function(){e("#taskService_off").attr("checked",!0)}):t.attr("name")=="config_worksService"&&e('[name="config_orgService"]:radio:checked').val()=="off"?(n=m["\uc870\uc9c1\ub3c4\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc73c\uba74 \uc5c5\ubb34, \ubcf4\uace0, \uacb0\uc7ac\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],r=function(){e("#orgService_on").attr("checked",!0)},i=function(){e("#worksService_off").attr("checked",!0)}):t.attr("name")=="config_approvalService"&&e('[name="config_orgService"]:radio:checked').val()=="off"?(n=m["\uc870\uc9c1\ub3c4\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc73c\uba74 \uc5c5\ubb34, \ubcf4\uace0, \uacb0\uc7ac\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],r=function(){e("#orgService_on").attr("checked",!0)},i=function(){e("#approvalService_off").attr("checked",!0)}):t.attr("name")=="config_mobileService"&&e('[name="config_mobileService"]:radio:checked').val()=="off"?(n=m["\ubaa8\ube4c\ub9ac\ud2f0\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc73c\uba74 \ubaa8\ubc14\uc77c \uc571\uacfc OTP \uc5f0\ub3d9\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],r=function(){e("#mobileAppService_off").attr("checked",!0),e("#otpService_off").attr("checked",!0)},i=function(){e("#mobileService_on").attr("checked",!0)}):t.attr("name")=="config_mobileAppService"&&e('[name="config_mobileService"]:radio:checked').val()=="off"?(n=m["\ubaa8\ube4c\ub9ac\ud2f0\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc73c\uba74 \ubaa8\ubc14\uc77c \uc571\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],r=function(){e("#mobileService_on").attr("checked",!0)},i=function(){e("#mobileAppService_off").attr("checked",!0)}):t.attr("name")=="config_otpService"&&e('[name="config_mobileService"]:radio:checked').val()=="off"?(n=m["\ubaa8\ube4c\ub9ac\ud2f0\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc73c\uba74 OTP \uc5f0\ub3d9\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],r=function(){e("#mobileService_on").attr("checked",!0)},i=function(){e("#otpService_off").attr("checked",!0)}):t.attr("name")=="config_ehrService"&&(e('[name="config_ehrService"]:radio:checked').val()=="on"?e("#welfareConfig").show():(n=m["e-HR\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc73c\uba74 \uadfc\ud0dc\uad00\ub9ac,\uc778\uc0ac\uce74\ub4dc\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],r=function(){e("#ehrService_off").attr("checked",!0),e("#welfareConfig").hide()},i=function(){e("#ehrService_on").attr("checked",!0)})),n!=""&&this.makeConfirmMsg(n,r,i)},makeConfirmMsg:function(t,n,r){e.goConfirm(t,"",n,r,v["\ud655\uc778"])},changeBaseCompanyConfig:function(t){t.attr("name")=="baseCompanyConfig_companyQuota"&&t.val()=="0"?(e("#sendWarningMode").hide(),e("#warningRate").hide(),e("#restrict").hide(),e("#companyQuota").attr("disabled",!0),e("#companyQuota_on").parents("tr").addClass("last")):t.attr("name")=="baseCompanyConfig_companyQuota"&&t.val()!="0"?(e("#sendWarningMode").show(),e("#warningRate").show(),e("#restrict").show(),e("#companyQuota").attr("disabled",!1),e("#companyQuota").val()==""&&e("#companyQuota").attr("value","10"),e("#companyQuota_on").parents("tr").removeClass("last")):t.attr("name")=="baseCompanyConfig_restrictCompanyPeriod"&&t.val()=="true"?(e("#baseCompanyConfig_restrictCompanyPeriodStart").attr("disabled",!1),e("#baseCompanyConfig_restrictCompanyPeriodEnd").attr("disabled",!1)):t.attr("name")=="baseCompanyConfig_restrictCompanyPeriod"&&t.val()=="false"?(e("#baseCompanyConfig_restrictCompanyPeriodStart").attr("disabled",!0),e("#baseCompanyConfig_restrictCompanyPeriodEnd").attr("disabled",!0)):t.attr("name")=="baseCompanyConfig_totalAccountQuota"&&t.val()=="0"?e("#totalAccountQuota").attr("disabled",!0):t.attr("name")=="baseCompanyConfig_totalAccountQuota"&&t.val()!="0"?(e("#totalAccountQuota").attr("disabled",!1),e("#totalAccountQuota").val()==""&&e("#totalAccountQuota").attr("value","2")):t.attr("name")=="baseCompanyConfig_sendWarningExceedCompanyQuota"&&t.val()=="true"?e("#companyQuotaWarningRate").attr("disabled",!1):t.attr("name")=="baseCompanyConfig_sendWarningExceedCompanyQuota"&&t.val()=="false"&&e("#companyQuotaWarningRate").attr("disabled",!0)},getHostName:function(){var t=this.installInfoModel.toJSON();url=GO.contextRoot+"ad/api/system/host";var n=this;e.go(url,"",{qryType:"GET",responseFn:function(r){if(r.code==200)for(var i=0;i<r.data.length;i++)t.installed?e("#hostName").append('<OPTION value="'+r.data[i].hostName+'">'+r.data[i].hostName+"</OPTION>"):(e("#hostName").append('<OPTION value="'+r.data[i].hostName+'" selected>'+r.data[i].hostName+"</OPTION>"),n.changeSelectBox())},error:function(e){}})},chackLicense:function(){var t=this;t.licenseModel.get("socialServicePack")||(e("#boardService").hide(),e("#communityService").hide(),e("#assetService").hide(),e("#surveyService").hide()),t.licenseModel.get("mobileServicePack")||(e("#chatService").hide(),e("#pcappService").hide(),e("#mobileService").hide(),e("#mobileAppService").hide()),t.licenseModel.get("collaborationServicePack")||(e("#worksService").hide(),e("#taskService").hide(),e("#reportService").hide(),e("#todoService").hide()),t.licenseModel.get("approvalServicePack")||(e("#approvalService").hide(),e("#docfolderService").hide()),t.licenseModel.get("ehrServicePack")||e("#ehrService").hide(),t.licenseModel.get("smsServicePack")||e("#smsService").hide(),t.licenseModel.get("useTaskService")||e("#taskService").hide(),t.licenseModel.get("storeServicePack")||e("#storeService").hide(),t.licenseModel.get("allianceSystemServicePack")||e("#allianceSystemService").hide()},checkTmwConfig:function(){var t=this;t.tmwCollaborationModel.get("useSmartFilter")||e("#smartFilter").hide(),t.tmwCollaborationModel.get("useSecurityCenter")||e("#securityCenter").hide()},addIndexFs:function(){var t=this,n=e("#hostName").attr("value"),r=n+":"+e("#indexFs").attr("value"),i=!0;e("#indexFss > option").attr("selected",!1);if(n==""){t.showValidateMsg("indexFss",m["\uba54\uc77c Host\ub97c \uc120\ud0dd\ud558\uc138\uc694."]);return}e("#indexFss option").each(function(){if(e(this).val()==r)return t.showValidateMsg("indexFss",m["\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ub3c4\uba54\uc778 Indexfs \uc785\ub2c8\ub2e4."]),e(this).attr("selected",!0),i=!1,!1}),i==1&&e("#indexFss").append('<OPTION value="'+r+'">'+r+"</OPTION>")},deleteIndexFs:function(){var e=document.formSiteConfig.indexFss;for(var t=0;t<e.options.length;)e.options[t].selected?e.removeChild(e.options[t]):t++},addDataFs:function(){var t=this,n=e("#hostName").attr("value"),r=n+":"+e("#dataFs").attr("value"),i=!0;e("#dataFss > option").attr("selected",!1);if(n==""){t.showValidateMsg("dataFss",m["\uba54\uc77c Host\ub97c \uc120\ud0dd\ud558\uc138\uc694."]);return}e("#dataFss option").each(function(){if(e(this).val()==r)return t.showValidateMsg("dataFss",m["\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ub3c4\uba54\uc778 datafs \uc785\ub2c8\ub2e4."]),e(this).attr("selected",!0),i=!1,!1}),i==1&&e("#dataFss").append('<OPTION value="'+r+'">'+r+"</OPTION>")},deleteDataFs:function(){var e=document.formSiteConfig.dataFss;for(var t=0;t<e.options.length;)e.options[t].selected?e.removeChild(e.options[t]):t++},changeSelectBox:function(){e("#hostName").attr("value")!=""?(this.getIndexfss("indexFs"),this.getIndexfss("dataFs"),e("#indexFs").show(),e("#dataFs").show()):(e("#indexFs").hide(),e("#dataFs").hide())},getIndexfss:function(t){var n="",r=this.installInfoModel.toJSON(),i=this;t=="indexFs"?n=GO.contextRoot+"ad/api/system/indexfss":n=GO.contextRoot+"ad/api/system/datafss",e.go(n,{hostname:e("#hostName").attr("value")},{qryType:"GET",responseFn:function(n){if(n.code==200){e("#"+t).find("option").remove();for(var s=0;s<n.data.length;s++)t=="indexFs"?(e("#indexFs").append('<OPTION value="'+n.data[s].indexFs+'">'+n.data[s].indexFs+"</OPTION>"),r.installed||i.addIndexFs()):(e("#dataFs").append('<OPTION value="'+n.data[s]+'">'+n.data[s]+"</OPTION>"),r.installed||i.addDataFs())}}})},checkValidation:function(t,r){var i=this,s=!0,o=i.isExceedLicenseUser()+i.modUserCount,u=i.siteData==undefined?1:i.siteData.usedCount-i.siteData.stopUserCount,a=e('input[name="baseCompanyConfig_sendWarningExceedCompanyQuota"]:radio:checked').val(),f=i.siteData==undefined?0:i.siteData.totalAccountQuota,l=i.siteData==undefined?0:i.siteData.companyQuota,c,h;return e.each(t.serializeArray(),function(t,p){if(p.name=="name"&&!e.goValidation.isCheckLength(1,128,p.value))return i.showValidateMsg(p.name,m["\ud68c\uc0ac \uba85\uc744 \uc785\ub825\ud558\uc138\uc694."]),s=!1,!1;if(p.name=="siteUrl"&&!e.goValidation.isCheckLength(1,128,e.trim(p.value)))return i.showValidateMsg(p.name,m["\uc0ac\uc774\ud2b8 \uc6f9 \uc8fc\uc18c\ub97c \uc785\ub825\ud558\uc138\uc694."]),s=!1,!1;if(p.name=="siteUrl"&&!e.goValidation.charValidation("\\",p.value))return i.showValidateMsg(p.name,m["\uc785\ub825\ud560 \uc218 \uc5c6\ub294 \ubb38\uc790"]),s=!1,!1;if(p.name=="siteUrl"&&p.value.match(/http:\/\//))return i.showValidateMsg(p.name,m["http://\ub294 \uc785\ub825\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."]),s=!1,!1;if(e("#indexFss").val()==null)return i.showValidateMsg("indexFss",m["\uba54\uc77c Indexfs\ub294 \ud558\ub098 \uc774\uc0c1 \ucd94\uac00\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4."]),s=!1,!1;if(e("#dataFss").val()==null)return i.showValidateMsg("dataFss",m["\uba54\uc77c Indexfs\ub294 \ud558\ub098 \uc774\uc0c1 \ucd94\uac00\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4."]),s=!1,!1;if(p.name=="userCount"&&p.value<=0)return i.showValidateMsg(p.name,m["\ucd5c\ub300 \uc0ac\uc6a9\uc790 \uc218\ub97c \uc785\ub825\ud558\uc138\uc694."]),s=!1,!1;if(p.name=="userCount"&&!e.goValidation.isNumber(p.value))return i.showValidateMsg(p.name,m["\ucd5c\ub300 \uc0ac\uc6a9\uc790 \uc218\ub294 \uc22b\uc790\ub9cc \uc785\ub825\ud558\uc138\uc694."]),s=!1,!1;if(p.name=="userCount"&&(o-p.value<0||p.value<u))return i.showValidateMsg(p.name,n.i18n(m["\ucd5c\ub300 \uc0ac\uc6a9\uc790 \uc218\uc758 \uc124\uc815 \uac00\ub2a5 \ubc94\uc704\ub294 0 ~ 00\uae4c\uc9c0\uc785\ub2c8\ub2e4."],{arg0:u,arg1:o})),s=!1,!1;if(r=="new"){if(p.name=="info_contactPerson"&&!e.goValidation.isCheckLength(1,128,p.value))return i.showValidateMsg(p.name,m["\uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694."]),s=!1,!1;if(p.name=="info_adminId"&&!e.goValidation.isCheckLength(1,128,p.value))return i.showValidateMsg(p.name,m["\uc544\uc774\ub514\ub97c \uc785\ub825\ud558\uc138\uc694."]),s=!1,!1;if(p.name=="info_adminId"&&e.goValidation.isInvalidEmailId(p.value))return i.showValidateMsg(p.name,m["\uc0ac\uc6a9\ud560 \uc218 \uc5c6\ub294 \uc544\uc774\ub514\uc785\ub2c8\ub2e4."]),s=!1,!1;if(p.name=="info_adminPassword"||p.name=="info_adminPasswordConfirm"){p.name=="info_adminPassword"&&(c=p.value),p.name=="info_adminPasswordConfirm"&&(h=p.value);if(!e.goValidation.isCheckLength(8,16,p.value)||!p.value.match(/[A-Za-z]/)||!p.value.match(/[0-9]/)||!p.value.match(/[-~!@#$%^&*(_)<>;+={}\[\]\|:"',.?/`]/))return i.showValidateMsg(p.name,m["\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd \uae30\ubcf8\uaddc\uce59"]),s=!1,!1}}var d=p.name.split("_");p.name=d[1];if(p.name=="totalAccountQuota"&&p.value!="0"){if(e("#totalAccountQuota").val()<2||e("#totalAccountQuota").val()>102400)return i.showValidateMsg(p.name,n.i18n(m["{{quota}}\uc758 \uc124\uc815 \uac00\ub2a5 \ubc94\uc704\ub294 {{arg1}} ~ {{arg2}}\uae4c\uc9c0\uc785\ub2c8\ub2e4."],{quota:m["\ucd1d \ud560\ub2f9 \uacc4\uc815 \uc6a9\ub7c9"],arg1:2,arg2:102400})),s=!1,!1;if(!e.goValidation.isNumber(e("#totalAccountQuota").val()))return i.showValidateMsg(p.name,n.i18n(m["{{quota}}\uc5d0 \uc22b\uc790\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."],{quota:m["\ucd1d \ud560\ub2f9 \uacc4\uc815 \uc6a9\ub7c9"]})),s=!1,!1;if(f!=0&&e("#totalAccountQuota").val()*1024*1024*1024<f)return i.showValidateMsg(p.name,n.i18n(m["\ud604\uc7ac \uc0ac\uc6a9\ub7c9\uc740 {{arg1}}\uc785\ub2c8\ub2e4. {{arg1}}\uc774\uc0c1\uc73c\ub85c \uc124\uc815\ud574\uc8fc\uc138\uc694."],{arg1:n.util.getHumanizedFileSize(f)})),s=!1,!1}if(p.name=="companyQuota"&&p.value!="0"){if(e("#companyQuota").val()<1||e("#companyQuota").val()>102400)return i.showValidateMsg(p.name,n.i18n(m["{{quota}}\uc758 \uc124\uc815 \uac00\ub2a5 \ubc94\uc704\ub294 {{arg1}} ~ {{arg2}}\uae4c\uc9c0\uc785\ub2c8\ub2e4."],{quota:m["\uacf5\uc6a9 \uc6a9\ub7c9"],arg1:1,arg2:102400})),s=!1,!1;if(!e.goValidation.isNumber(e("#companyQuota").val()))return i.showValidateMsg(p.name,n.i18n(m["{{quota}}\uc5d0 \uc22b\uc790\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."],{quota:m["\uacf5\uc6a9 \uc6a9\ub7c9"]})),s=!1,!1;if(l!=0&&e("#companyQuota").val()*1024*1024*1024<l)return i.showValidateMsg(p.name,n.i18n(m["\ud604\uc7ac \uc0ac\uc6a9\ub7c9\uc740 {{arg1}}\uc785\ub2c8\ub2e4. {{arg1}}\uc774\uc0c1\uc73c\ub85c \uc124\uc815\ud574\uc8fc\uc138\uc694."],{arg1:n.util.getHumanizedFileSize(l)})),s=!1,!1}p.name=="companyQuotaWarningRate"&&a=="false"&&(p.value="");if(a=="true"&&p.name=="companyQuotaWarningRate"&&p.value=="")return i.showValidateMsg(p.name,n.i18n(m["{{quota}}\uc758 \uc124\uc815 \uac00\ub2a5 \ubc94\uc704\ub294 {{arg1}} ~ {{arg2}}\uae4c\uc9c0\uc785\ub2c8\ub2e4."],{quota:m["\uacf5\uc6a9 \uc6a9\ub7c9 \ucd08\uacfc \uacbd\uace0 \ube44\uc728"],arg1:1,arg2:99})),s=!1,!1;if(a=="true"&&p.name=="companyQuotaWarningRate"&&(p.value<1||p.value>99))return i.showValidateMsg(p.name,n.i18n(m["{{quota}}\uc758 \uc124\uc815 \uac00\ub2a5 \ubc94\uc704\ub294 {{arg1}} ~ {{arg2}}\uae4c\uc9c0\uc785\ub2c8\ub2e4."],{quota:m["\uacf5\uc6a9 \uc6a9\ub7c9 \ucd08\uacfc \uacbd\uace0 \ube44\uc728"],arg1:1,arg2:99})),s=!1,!1;if(a=="true"&&p.name=="companyQuotaWarningRate"&&!e.goValidation.isNumber(p.value))return i.showValidateMsg(p.name,n.i18n(m["{{quota}}\uc5d0 \uc22b\uc790\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."],{quota:m["\uacf5\uc6a9 \uc6a9\ub7c9 \ucd08\uacfc \uacbd\uace0 \ube44\uc728"]})),s=!1,!1}),r=="new"&&c&&h&&c!=h?(i.showValidateMsg("info_adminPassword",m["\ube44\ubc00\ubc88\ud638 \ubd88\uc77c\uce58"]),s=!1,!1):s?!0:(e("#WEBMAIL").attr("disabled",!0),!1)},makeModel:function(t,n){var i=r.read().toJSON().language,s={},o={},u={},a={},f=[];return dataFssList=[],e.each(t.serializeArray(),function(t,r){var i=r.name.split("_");r.name=="indexFss"&&(f=e("#indexFss").val()),r.name=="dataFss"&&(dataFssList=e("#dataFss").val()),i[0]=="config"?(r.name=i[1],u[r.name]=r.value):i[0]=="serviceModel"?(r.name=i[1],r.value=="on"?r.value=!0:r.value=!1,a[r.name]=r.value):i[0]=="info"?(r.name=i[1],s[r.name]=r.value):i[0]=="baseCompanyConfig"?(r.name=i[1],r.name=="totalAccountQuota"&&r.value=="self"&&(r.value=e("#totalAccountQuota").val()*1024*1024*1024),r.name=="companyQuota"&&r.value=="self"&&(r.value=e("#companyQuota").val()*1024*1024*1024),r.name=="restrictCompanyPeriod"&&r.value=="true"&&(o.restrictCompanyPeriodStart=e("#baseCompanyConfig_restrictCompanyPeriodStart").val(),o.restrictCompanyPeriodEnd=e("#baseCompanyConfig_restrictCompanyPeriodEnd").val()),o[r.name]=r.value):n.set(r.name,e.trim(r.value),{silent:!0})}),a.webMail=!0,u.meetingRoomCount=this.meetingRoomCount,n.set("baseCompanyConfig",o,{silent:!0}),n.set("config",u,{silent:!0}),n.set("serviceModel",a,{silent:!0}),n.set("info",s,{silent:!0}),n.set("indexFss",f,{silent:!0}),n.set("dataFss",dataFssList,{silent:!0}),n.set("managerName",s.contactPerson,{silent:!0}),n.set("managerId",s.adminId,{silent:!0}),n.set("managerPassword",s.adminPassword,{silent:!0}),n.set("managerPasswordConfirm",s.adminPasswordConfirm,{silent:!0}),n.set("locale",i,{silent:!0}),n},siteSave:function(t){t.stopPropagation();var r=this.installInfoModel.toJSON();e(".go_alert").empty(),this.model=u.create();var i=this,s=!0,o=this.$el.find("form[name=formSiteConfig]");e("#indexFss > option").attr("selected","selected"),e("#dataFss > option").attr("selected","selected"),s=i.checkValidation(o,"new");if(!s)return!1;this.model=this.makeModel(o,this.model),this.model.set("mailDomainSeq",e("#mailDomains option:selected").val(),{silent:!0}),this.model.set("domainName",e("#mailDomains option:selected").text(),{silent:!0}),this.$el.off("click","span#btn_ok"),GO.EventEmitter.trigger("common","layout:setOverlay",""),this.model.save({},{type:"POST",timeout:12e4,success:function(t,s){s.code=="200"&&(e.goMessage(v["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]),r.installed?n.router.navigate("system/site",{trigger:!0}):(i.changeInstallState(),n.router.navigate("complete",{trigger:!0})),GO.EventEmitter.trigger("common","layout:clearOverlay",!0))},error:function(t,n){var r=JSON.parse(n.responseText);r.name=="duplicated.login.id"&&i.showValidateMsg("info_adminId",m["\uc544\uc774\ub514\uac00 \uc911\ubcf5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]),e.goMessage(r.message),e("#WEBMAIL").attr("disabled",!0),i.$el.on("click","span#btn_ok",e.proxy(i.siteSave,i)),GO.EventEmitter.trigger("common","layout:clearOverlay",!0)}})},siteModify:function(t){t.stopPropagation(),e(".go_alert").empty(),this.model=u.create();var r=this,i=!0,s=this.$el.find("form[name=formSiteConfig]"),o=GO.contextRoot+"ad/api/system/company/"+this.siteId;e("#indexFss > option").attr("selected","selected"),e("#dataFss > option").attr("selected","selected"),i=r.checkValidation(s,"mod");if(!i)return!1;var a=this.makeModel(s,this.model);GO.EventEmitter.trigger("common","layout:setOverlay",""),e.go(o,JSON.stringify(a),{qryType:"PUT",timeout:12e4,contentType:"application/json",responseFn:function(t){t.code==200&&(e.goMessage(v["\uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]),n.router.navigate("system/site",{trigger:!0}),GO.EventEmitter.trigger("common","layout:clearOverlay",!0))},error:function(t){var n=JSON.parse(t.responseText);e.goMessage(n.message),e("#WEBMAIL").attr("disabled",!0),GO.EventEmitter.trigger("common","layout:clearOverlay",!0)}})},siteCancel:function(e){e.stopPropagation(),this.render()},siteReturnList:function(){n.router.navigate("system/site",{trigger:!0})},isExceedLicenseUser:function(){var t=0,n=GO.contextRoot+"ad/api/system/company/userstat";return e.go(n,"",{qryType:"GET",async:!1,responseFn:function(e){e.code==200&&(t=e.data.licenseUserCount-e.data.companiesUserCount)},error:function(t){var n=JSON.parse(t.responseText);e.goMessage(n.message)}}),t},showValidateMsg:function(t,n){e("#"+t).focus(),e("#"+t+"Validate").html(n)},getDomains:function(t){var n=GO.contextRoot+"ad/api/system/domainlist";e.go(n,"",{qryType:"GET",responseFn:function(t){if(t.code==200){e("#mailDomains").find("option").remove();for(var n=0;n<t.data.length;n++)e("#mailDomains").append('<OPTION value="'+t.data[n].mailDomainSeq+'">'+t.data[n].mailDomain+"</OPTION>")}}})},siteMovePrev:function(e){e.stopPropagation();var t=this.installInfoModel.toJSON();n.router.navigate("domain/modify/"+t.installedDomainSeq,{trigger:!0})},changeInstallState:function(){var t=GO.contextRoot+"ad/api/system/change/state/done";e.go(t,"",{qryType:"GET",responseFn:function(e){}})},_validateNumber:function(t){e(".go_alert").html("");var r=e(t.currentTarget);e.goValidation.isNumber(r.val())||this.showValidateMsg(r.attr("id"),n.i18n(m["{{quota}}\uc5d0 \uc22b\uc790\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."],{quota:m["\ucd1d \ud560\ub2f9 \uacc4\uc815 \uc6a9\ub7c9"]}))}},{create:function(e){return y=new b({el:e.el?e.el:"#layoutContent",siteId:e?e.siteId:""}),y.siteId=e?e.siteId:"",y.render()}});return{render:function(e){var t=b.create(e);return t}}});