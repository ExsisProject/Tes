define("system/views/schedule_list",function(require){var e=require("jquery"),t=require("backbone"),n=require("app"),r=require("hgn!system/templates/schedule_list"),i=require("hgn!system/templates/list_empty"),s=require("i18n!nls/commons"),o=require("i18n!admin/nls/admin");require("jquery.go-grid");var u={label_breadcrumb:o["\uc2a4\ucf00\uc904 \uad00\ub9ac"],label_execution:o["\uc2e4\ud589"],label_job_name:o["job name"],label_job_group:o["job group"],label_prev_fire_time:o["prev Fire Time"],label_next_fire_time:o["next Fire Time"],label_host_name:o["host name"],label_local_schedule:o["local schedule"],label_description:o.Description},a=t.View.extend({events:{"click span.btn_execution":"executeJob"},initialize:function(){this.dataTable=null},render:function(){e(".breadcrumb .path").html(o["\uc2a4\ucf00\uc904 \uad00\ub9ac"]),this.$el.empty(),this.$el.html(r({lang:u})),this.renderScheduleList({targetEl:"#globalScheduleList",type:"global"}),this.renderScheduleList({targetEl:"#adminScheduleList",type:"admin"}),this.renderScheduleList({targetEl:"#adminSerialScheduleList",type:"admin/serial"}),this.getHostNames()},renderScheduleList:function(t){var n=this;this.dataTable=e.goGrid({el:t.targetEl,method:"GET",url:GO.contextRoot+"ad/api/scheduler/"+t.type+"/jobs",emptyMessage:i({label_desc:o["\ud45c\uc2dc\ud560 \ub370\uc774\ud130 \uc5c6\uc74c"]}),pageUse:!1,sDomUse:!1,checkbox:!1,displayLength:999,sDomType:"admin",columns:[{mData:"name",bSortable:!1,sClass:"name",fnRender:function(e){return e.aData.name}},{mData:null,bSortable:!1,fnRender:function(e){return o[e.aData.name]}},{mData:"group",bSortable:!1,sClass:"group",fnRender:function(e){return e.aData.group}},{mData:null,bSortable:!1,fnRender:function(e){return e.aData.prevFireTime==undefined?"":GO.util.basicDate2(e.aData.prevFireTime)}},{mData:"nextFireTime",bSortable:!1,fnRender:function(e){return GO.util.basicDate2(e.aData.nextFireTime)}},{mData:null,sWidth:"140px",bSortable:!1,fnRender:function(e){var t="<td class='align_c set last'><span class='btn_s btn_execution'>"+o["\uc2e4\ud589"]+"</span>"+"</td>";return t}}],fnDrawCallback:function(e){}})},getHostNames:function(){url=GO.contextRoot+"ad/api/system/host",e.go(url,"",{qryType:"GET",responseFn:function(t){if(t.code==200)for(var n=0;n<t.data.length;n++)e("select#hostName").append('<OPTION value="'+t.data[n].hostName+'">'+t.data[n].hostName+"</OPTION>")},error:function(e){}})},executeJob:function(t){var r=e(t.currentTarget).parents("form").find("#hostName option:selected").val(),i=e(t.currentTarget).parents("tr").find("td.name").text(),s=e(t.currentTarget).parents("tr").find("td.group").text(),u=e(t.currentTarget).parents("form").attr("class"),a={hostName:r,jobName:i,jobGroup:s};url=GO.contextRoot+"ad/api/scheduler/"+u+"/invoke",e.go(url,JSON.stringify(a),{qryType:"POST",contentType:"application/json",responseFn:function(t){e.goMessage(n.i18n(o["{{arg1}} \uc2e4\ud589 \uc131\uacf5"],{arg1:i})),this.render()},error:function(t){e.goMessage(n.i18n(o["{{arg1}} \uc2e4\ud589 \uc2e4\ud328"],{arg1:i}))}})}},{__instance__:null});return a});