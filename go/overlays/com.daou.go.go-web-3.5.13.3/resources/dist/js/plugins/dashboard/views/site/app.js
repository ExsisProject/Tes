/*! 
 * go-gadget - v1.5.0 
 * 그룹 오피스 가젯 프레임워크
 * 
 * Date: 2014-04-18 

 */

(function(){(function(){define("dashboard/models/gadget",["backbone","app"],function(e,t){function i(e,t){return this.isNew()?!1:this.get("boxNumber")!==+e?!0:this.get("boxOrder")!==+t?!0:!1}function s(){var e={updatable:!1,removable:!1};return o.call(this)?(e.updatable=!0,e.removable=!0):(e.updatable=this.getGadgetOption("editable")||!1,e.removable=this.getGadgetOption("removable")||!1),e}function o(){return this.isUserType()?!0:t.session("dashboardAdmin")?!0:!1}function u(e,t){return typeof t=="undefined"?e:e[t]}var n={company:"COMPANY",user:"USER"},r;return r=e.Model.extend({urlRoot:"/api/gadget",savePosition:function(e,n){var r=$.Deferred();if(i.call(this,e,n)){var s=t.config("contextRoot")+[_.result(this,"urlRoot"),this.id,"move"].join("/");this.save({boxNumber:+e,boxOrder:+n},{url:s.replace("//","/"),success:function(e){r.resolve(e)},error:function(){r.reject()}})}else r.resolve(this);return r},setPosition:function(e,t){return this.set({boxNumber:+e,boxOrder:+t})},getSpec:function(e){return u(this.get("spec"),e)},getBoxNumber:function(){return this.get("boxNumber")+1},getActions:function(){return _.defaults(this.get("actions")||{},s.call(this))},getGadgetOption:function(t){var n=e.$.parseJSON(this.get("options"))||{};return u(n,t)},isUserType:function(){return this.get("type")===n.user},isCompanyType:function(){return this.get("type")===n.company},updatable:function(){return this.getActions().updatable},removable:function(){return this.getActions().removable}},{TYPE_COMPANY:n.company,TYPE_USER:n.user}),r})})(),function(){define("dashboard/models/gadgets",["backbone","dashboard/models/gadget"],function(e,t){var n;return n=e.Collection.extend({model:t,dashboardId:null,url:function(){return["/api/dashboard",this.getDashboardId(),"gadget"].join("/")},setDashboardId:function(e){this.dashboardId=e},getDashboardId:function(){return this.dashboardId},rawSort:function(){return this.models.sort(function(e,t){return e.get("boxNumber")!==t.get("boxNumber")?e.get("boxNumber")-t.get("boxNumber"):e.get("boxOrder")!==t.get("boxOrder")?e.get("boxOrder")-t.get("boxOrder"):-1}),this}}),{create:function(e,t){var t=new n(t||[]);return t.setDashboardId(e),t}}})}(),function(){define("dashboard/models/dashboard",["backbone","when","app","dashboard/models/gadgets"],function(e,t,n,r){function a(e,t){return _.findWhere(o,{boxCount:e,layout:t})}function f(){return!this.fetchingFlag&&this.activated()&&!this.getGadgets().length}function l(){return[_.result(this,"url"),"move"].join("/")}function c(e){return $.extend(!0,e||{},{url:l.call(this)})}var i="go_dashboard",s={company:"COMPANY",user:"USER"},o=[],u;return o.push({id:1,boxCount:3,layout:1,desc:"3-1"}),o.push({id:2,boxCount:3,layout:2,desc:"3-2"}),o.push({id:3,boxCount:3,layout:3,desc:"3-3"}),o.push({id:4,boxCount:5,layout:1,desc:"5-1"}),u=e.Model.extend({fetchingFlag:!1,defaults:{title:"My Portal",type:s.user,boxCount:3,layout:1,gadgetAddable:!0,seq:0,activated:!1},initialize:function(){this.fetchingFlag=!1},urlRoot:function(){return"/api/dashboard"},fetchGadgets:function(e){var n=this,i=t.defer();if(e||!1||f.call(this)){var s=r.create(this.get("id"));this.fetchingFlag=!0,s.fetch({success:function(e){n.set("gadgets",e.toJSON()),n.fetchingFlag=!1,i.resolve(e)},error:function(e,t,n){i.reject(t)}})}return i.promise},removeGadgetsInBoxes:function(e){var t=(n.config("contextRoot")+[_.result(this,"urlRoot"),this.get("id"),"gadget/box"].join("/")).replace("//","/");return $.ajax({url:t,type:"DELETE",contentType:"application/json",data:JSON.stringify({boxNumbers:e||[]})})},changeLayout:function(e,t){var n=$.Deferred();return this.save({boxCount:e,layout:t},{success:n.resolve,error:n.reject}),n},updateLayout:function(e,t){var n=$.Deferred();return this.removeGadgetsInBoxes(this.diffBoxNumbers(e)).then(_.bind(function(){this.changeLayout(e,t).then(n.resolve,n.reject)},this),n.reject),n},getGadgets:function(){return this.get("gadgets")||[]},buildGadgets:function(){return r.create(this.get("id"),this.get("gadgets")||[])},activateFrom:function(e){this.get("id")===e?this.activate():this.deactivate()},activate:function(){this.set("activated",!0)},deactivate:function(){this.set("activated",!1)},move:function(e,t){this.save("seq",e,c.call(this,t))},getTitle:function(){return this.get("title")},getSeq:function(){return this.get("seq")||0},getLayout:function(){return this.get("layout")},getBoxCount:function(){return this.get("boxCount")},activated:function(){return this.get("activated")||!1},isCompanyType:function(){return this.get("type")===s.company},isUserType:function(){return this.get("type")===s.user},canAddGadget:function(){return this.get("gadgetAddable")||!1},getSelectorName:function(){return[i,this.get("boxCount"),this.getLayout()].join("_")},diffBoxNumbers:function(e){return _.difference(_.range(this.getBoxCount()),_.range(e))},hasEditableGadget:function(){var e=_.find(this.get("gadgets"),function(e){return e.actions.updatable||e.actions.removable});return _.isObject(e)},isEditable:function(){return this.hasEditableGadget()||this.canAddGadget()}}),u.TYPE_COMPANY=s.company,u.TYPE_USER=s.user,u.LAYOUT_SPECS=o,u})}(),function(){define("dashboard/models/dashboards",["backbone","dashboard/models/dashboard"],function(e,t){var n;return n=e.Collection.extend({model:t,comparator:"seq",url:function(){return"/api/dashboard"},activate:function(e){this.each(function(t){t.activateFrom(e)})},getActiveDashboard:function(){return this.filter(function(e){return e.activated()})[0]},resetActivated:function(){this.at(0).activate()}}),n})}(),function(){define("dashboard/models/gadget_specs",["backbone"],function(e){var t=e.Model.extend({}),n=e.Collection.extend({model:t,url:"/api/dashboard/gadgetspec"});return n})}(),define("hgn!dashboard/templates/site/gadget",["hogan"],function(e){var t=new e.Template({code:function(e,t,n){var r=this;return r.b(n=n||""),r.b('<div class="go-gadget-header go_gadget_header">'),r.b("\n"+n),r.b('	<div class="gadget_h1">'),r.b("\n"+n),r.b('		<span class="title">'),r.b(r.v(r.f("title",e,t,0))),r.b("</span>"),r.b("\n"+n),r.b('		<span class="btn-mgmt btn_side_wrap">'),r.b("\n"+n),r.s(r.f("showConfigButton?",e,t,1),e,t,0,177,294,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b('			<span class="btn-edit btn_wrap"><span class="ic_dashboard2 ic_d_mgmt" title="'),r.b(r.v(r.d("label.modify",e,t,0))),r.b('"></span></span>'),r.b("\n"+n)}),e.pop()),r.s(r.f("showRemoveButton?",e,t,1),e,t,0,342,463,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b('			<span class="btn-remove btn_wrap"><span class="ic_dashboard2 ic_d_delete" title="'),r.b(r.v(r.d("label.remove",e,t,0))),r.b('"></span></span>'),r.b("\n"+n)}),e.pop()),r.b("		</span>"),r.b("\n"+n),r.b("	</div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"+n),r.b('<div class="go-gadget-config gadget_edit" style="display:none">'),r.b("\n"+n),r.b('	<p class="desc">'),r.b("\n"+n),r.b('		<span class="txt_caution error-msg-wrapper"></span>'),r.b("\n"+n),r.b("	</p>"),r.b("\n"+n),r.b('	<form name="gadget_options" class="gadget-options-form"></form>'),r.b("\n"+n),r.b('	<footer class="btn_layer_wrap">'),r.b("\n"+n),r.b('		<a class="btn_major_s btn-option-save"><span class="txt">'),r.b(r.v(r.d("label.save",e,t,0))),r.b("</span></a>"),r.b("\n"+n),r.b('		<a class="btn_minor_s btn-option-cancel"><span class="txt">'),r.b(r.v(r.d("label.cancel",e,t,0))),r.b("</span></a>"),r.b("\n"+n),r.b("	</footer>"),r.b("\n"+n),r.b("</div>"),r.b("\n"+n),r.b('<div class="go-gadget-content">'),r.b("\n"+n),r.b('	<div class="img_loader_large" title="'),r.b(r.v(r.f("waiting_msg",e,t,0))),r.b('"></div>'),r.b("\n"+n),r.b("</div>"),r.fl()},partials:{},subs:{}},"",e);return function(){return t.render.apply(t,arguments)}}),define("json!lang/ko/dashboard.json",function(){return{"\ud3b8\uc9d1\ud654\uba74 \ub2eb\uae30":"\ud3b8\uc9d1\ud654\uba74 \ub2eb\uae30","\uc2e0\uccad\ud558\uae30":"\uc2e0\uccad\ud558\uae30","\ud574\uc9c0\ud558\uae30":"\ud574\uc9c0\ud558\uae30","\uac00\uc82f\ucd94\uac00":"\uac00\uc82f\ucd94\uac00","\uac00\uc82f \uc0ad\uc81c \ud0c0\uc774\ud2c0":"'{{gadget_name}}'\uc744(\ub97c) \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","\uac00\uc82f \uc0ad\uc81c \uba54\uc2dc\uc9c0":"'\uc0ad\uc81c'\ub97c \ud074\ub9ad\ud558\uba74 \uc0ac\uc6a9\uc790 \ud654\uba74\uc5d0\uc11c \uac00\uc82f\uc774 \uc0ad\uc81c\ub429\ub2c8\ub2e4.<br />\uc815\ub9d0 \uc0ad\uc81c \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","\uac00\uc82f \ub85c\ub4dc \uc624\ub958 \uba54\uc2dc\uc9c0":"\uc694\uccad\ud558\uc2e0 \ub0b4\uc6a9\uc744 \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.<br />\uc624\ub958\uac00 \uc9c0\uc18d\ub420 \uacbd\uc6b0, \uc6b4\uc601\uc790\uc5d0\uac8c \ubb38\uc758\ud574 \uc8fc\uc2ed\uc2dc\uc624.","\uac00\uc82f \uc124\uc815\uc800\uc7a5 \uc624\ub958 \uba54\uc2dc\uc9c0":"\uac00\uc82f \uc124\uc815 \uc800\uc7a5\uc2dc \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uc600\uc2b5\ub2c8\ub2e4.","\uac00\uc82f \uc0ad\uc81c \uc624\ub958 \uba54\uc2dc\uc9c0":"\uac00\uc82f \uc0ad\uc81c\uc2dc \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uc600\uc2b5\ub2c8\ub2e4.","\uac00\uc82f \uc774\ub3d9 \uc624\ub958 \uba54\uc2dc\uc9c0":"\uac00\uc82f \uc774\ub3d9\uc2dc \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uc600\uc2b5\ub2c8\ub2e4.","\uac00\uc82f \uc5c6\uc74c \uba54\uc2dc\uc9c0":"\ub300\uc2dc\ubcf4\ub4dc\uc5d0 \uac00\uc82f\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. <br>\uc6b4\uc601\uc790\uc5d0\uac8c \ubb38\uc758\ud574 \uc8fc\uc138\uc694.","\uc0c8\ub85c\uace0\uce68 \uc548\ud568":"\uc548\ud568","\ubd84\ub2e8\uc704 \uc2dc\uac04 \ud45c\uc2dc":"{{time}}\ubd84","\uc2dc\ub2e8\uc704 \uc2dc\uac04 \ud45c\uc2dc":"{{time}}\uc2dc\uac04","\ub808\uc774\uc544\uc6c3 \uc124\uc815":"\ub808\uc774\uc544\uc6c3 \uc124\uc815","2\ub2e8 \ub808\uc774\uc544\uc6c3":"2\ub2e8 + \uc0ac\uc774\ub4dc","3\ub2e8 \ub808\uc774\uc544\uc6c3":"3\ub2e8","\ub300\uc2dc\ubcf4\ub4dc \uad00\ub9ac":"\ub300\uc2dc\ubcf4\ub4dc \uad00\ub9ac","\ub300\uc2dc\ubcf4\ub4dc \ucd94\uac00":"\ub300\uc2dc\ubcf4\ub4dc \ucd94\uac00","\ub300\uc2dc\ubcf4\ub4dc \ucd5c\ub300\uac2f\uc218 \ucd08\uacfc\uba54\uc2dc\uc9c0":"\ub300\uc2dc\ubcf4\ub4dc\ub294 5\uac1c\uae4c\uc9c0 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","\ub300\uc2dc\ubcf4\ub4dc \uc804\ud658 \uc548\ub0b4":"\ub300\uc2dc\ubcf4\ub4dc \uc804\ud658 \uc548\ub0b4","\ub300\uc2dc\ubcf4\ub4dc \uc804\ud658 \ud655\uc778 \uba54\uc2dc\uc9c0":"\ud3b8\uc9d1\ud654\uba74\uc5d0\uc11c \ub300\uc2dc\ubcf4\ub4dc\ub97c \uc804\ud658\ud558\uba74 \uc800\uc7a5\ub418\uc9c0 \uc54a\uc740 \uc124\uc815\ub0b4\uc6a9\uc774 \uc0ac\ub77c\uc9d1\ub2c8\ub2e4. \ub300\uc2dc\ubcf4\ub4dc\ub97c \uc804\ud658\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","\ub300\uc2dc\ubcf4\ub4dc \uc0ad\uc81c \uc548\ub0b4":"\ub300\uc2dc\ubcf4\ub4dc \uc0ad\uc81c \uc548\ub0b4","\ub300\uc2dc\ubcf4\ub4dc \uc0ad\uc81c \ud655\uc778 \uba54\uc2dc\uc9c0":"\ub300\uc2dc\ubcf4\ub4dc\uc5d0 \uc9c0\uc815\ub41c \uac00\uc82f\uc815\ubcf4\uac00 \ubaa8\ub450 \uc0ad\uc81c\ub429\ub2c8\ub2e4. \ub300\uc2dc\ubcf4\ub4dc\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","\ub808\uc774\uc544\uc6c3":"\ub808\uc774\uc544\uc6c3","\uc77c\ubc18\uc124\uc815":"\uc77c\ubc18\uc124\uc815","\ud3b8\uc9d1\ub2eb\uae30":"\ud3b8\uc9d1\ub2eb\uae30","\uac00\uc82f \ucd94\uac00 \ud5c8\uc6a9":"\uac00\uc82f \ucd94\uac00 \ud5c8\uc6a9","\uac00\uc82f \ucd94\uac00 \ud5c8\uc6a9 \uc124\uba85":"\uc804\uc0ac \ub300\uc2dc\ubcf4\ub4dc \uc6b4\uc601\uc790\uac00 \uc544\ub2c8\uc5b4\ub3c4, <br>\ub204\uad6c\ub098 \uc804\uc0ac \ub300\uc2dc\ubcf4\ub4dc\uc5d0 \uac00\uc82f\uc744 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","\uac1c\uc778 \ub300\uc2dc\ubcf4\ub4dc \uac00\uc82f \uc5c6\uc74c \uba54\uc2dc\uc9c0":"\ub300\uc2dc\ubcf4\ub4dc\uc5d0 \uac00\uc82f\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. <br>\uac00\uc82f\uc744 \ucd94\uac00\ud574 \uc8fc\uc138\uc694.","\ub808\uc774\uc544\uc6c3 \ubcc0\uacbd \uc548\ub0b4":"\ub808\uc774\uc544\uc6c3 \ubcc0\uacbd \uc548\ub0b4","\ub808\uc774\uc544\uc6c3 \ubcc0\uacbd \ud655\uc778 \uba54\uc2dc\uc9c0":"\ub808\uc774\uc544\uc6c3\uc774 \ubcc0\uacbd\ub418\uba74 \uc124\uc815\ub41c \uc77c\ubd80 \uac00\uc82f\uc774 \uc0ac\ub77c\uc9c8 \uc218 \uc788\uc2b5\ub2c8\ub2e4.<br />\ubcc0\uacbd\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","\ub300\uc2dc\ubcf4\ub4dc\uc5d0 \ucd94\uac00":"\ub300\uc2dc\ubcf4\ub4dc\uc5d0 \ucd94\uac00","\uac1c\uc778\ud654":"\uac1c\uc778\ud654","\ud3b8\uc9d1 \uac00\ub2a5":"\ud3b8\uc9d1 \uac00\ub2a5","\uc0ad\uc81c \uac00\ub2a5":"\uc0ad\uc81c \uac00\ub2a5","\uac00\uc82f \ud14c\ub450\ub9ac":"\uac00\uc82f \ud14c\ub450\ub9ac","\uac00\uc82f \ud14c\ub450\ub9ac \uac15\uc870":"\uac15\uc870","\ub300\uc2dc\ubcf4\ub4dc \ubbf8\uc800\uc7a5 \uac00\uc82f \uc548\ub0b4":"\uc800\uc7a5\ub418\uc9c0 \uc54a\uc740 \uac00\uc82f\uc774 \uc788\uc2b5\ub2c8\ub2e4.","\ub300\uc2dc\ubcf4\ub4dc \ubbf8\uc800\uc7a5 \uac00\uc82f \ud655\uc778 \uba54\uc2dc\uc9c0":"\uc0c8\ub85c \ucd94\uac00\ub41c \uac00\uc82f\uc758 \uacbd\uc6b0 \uc800\uc7a5\uc744 \ud558\uc9c0 \uc54a\uc73c\uba74 \uc720\uc2e4\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub300\uc2dc\ubcf4\ub4dc \ud3b8\uc9d1\uc744 \uc885\ub8cc\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","\uac00\uc82f \uc774\ub3d9 \uc911 \uba54\uc2dc\uc9c0":"<strong>\uac00\uc82f\uc774 \uc774\ub3d9 \uc911\uc785\ub2c8\ub2e4.</strong><br />\uac00\uc82f \uc774\ub3d9 \uc911\uc5d0\ub294 \ube0c\ub77c\uc6b0\uc800\uc5d0 \ub530\ub77c \uc2a4\ud06c\ub864 \uc9c0\uc6d0\uc774 \uc548\ub418\uac70\ub098 \ubd80\uc790\uc5f0\uc2a4\ub7ec\uc6b8 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","\uac15\uc870":"\uac15\uc870","\uac00\uc82f \ud3b8\uc9d1":"\uac00\uc82f \ud3b8\uc9d1","\uac00\uc82f \ucd94\uac00 \uba54\uc2dc\uc9c0":"[{{gadget_name}}] \uac00\uc82f\uc774 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","\uc804\uc0ac\ub300\uc2dc\ubcf4\ub4dc \uc124\uc815 \uc811\uadfc\uc624\ub958 \uba54\uc2dc\uc9c0":"\uc811\uadfc\ud560 \uc218 \uc5c6\ub294 \uba54\ub274 \uc785\ub2c8\ub2e4.","\uba85\uc138\uc11c \ud30c\uc77c \ub3d9\uae30\ud654":"\uba85\uc138\uc11c \ud30c\uc77c \ub3d9\uae30\ud654","\ub3d9\uae30\ud654 \uc2dc\uc791":"\ub3d9\uae30\ud654 \uc2dc\uc791","\ub3d9\uae30\ud654\uc5d0 \uc131\uacf5\ud588\uc2b5\ub2c8\ub2e4.":"\ub3d9\uae30\ud654\uc5d0 \uc131\uacf5\ud588\uc2b5\ub2c8\ub2e4.","\ub3d9\uae30\ud654\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.":"\ub3d9\uae30\ud654\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.","\ud1b5\ud569\uac80\uc0c9":"\ud1b5\ud569\uac80\uc0c9","\uae30\uac04\uc804\uccb4":"\uae30\uac04\uc804\uccb4","\ucd5c\uadfc 1\uc8fc\uc77c":"\ucd5c\uadfc 1\uc8fc\uc77c","\ucd5c\uadfc 2\uc8fc\uc77c":"\ucd5c\uadfc 2\uc8fc\uc77c","\ucd5c\uadfc 1\uac1c\uc6d4":"\ucd5c\uadfc 1\uac1c\uc6d4","\uc9c1\uc811\uc120\ud0dd":"\uc9c1\uc811\uc120\ud0dd","\ucca8\ubd80\ud30c\uc77c\ub0b4\uc6a9 \uac80\uc0c9":"\ucca8\ubd80\ud30c\uc77c\ub0b4\uc6a9 \uac80\uc0c9","'\uac80\uc0c9\uc5b4' \uc5d0 \ub300\ud55c \uac80\uc0c9\uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.":"'{{arg1}}' \uc5d0 \ub300\ud55c \uac80\uc0c9\uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.","- \ub354 \ub9ce\uc740 \uac80\uc0c9\uacb0\uacfc\ub97c \uc6d0\ud558\uc2e0\ub2e4\uba74?":"- \ub354 \ub9ce\uc740 \uac80\uc0c9\uacb0\uacfc\ub97c \uc6d0\ud558\uc2e0\ub2e4\uba74?","- \ub2e8\uc5b4\uc758 \ucca0\uc790\uac00 \uc815\ud655\ud55c\uc9c0 \ud655\uc778\ud574 \ubcf4\uc138\uc694.":"- \ub2e8\uc5b4\uc758 \ucca0\uc790\uac00 \uc815\ud655\ud55c\uc9c0 \ud655\uc778\ud574 \ubcf4\uc138\uc694.","- \uac80\uc0c9\uc5b4\uc758 \ub2e8\uc5b4 \uc218\ub97c \uc904\uc774\uac70\ub098, \ub2e4\ub978 \ub2e8\uc5b4\ub85c \uac80\uc0c9\ud574 \ubcf4\uc138\uc694.":"- \uac80\uc0c9\uc5b4\uc758 \ub2e8\uc5b4 \uc218\ub97c \uc904\uc774\uac70\ub098, \ub2e4\ub978 \ub2e8\uc5b4\ub85c \uac80\uc0c9\ud574 \ubcf4\uc138\uc694.","- \ub450\ub2e8\uc5b4 \uc774\uc0c1\uc778 \uacbd\uc6b0, \ub744\uc5b4\uc4f0\uae30\ub97c \ud655\uc778\ud574 \ubcf4\uc138\uc694":"- \ub450 \ub2e8\uc5b4 \uc774\uc0c1\uc778 \uacbd\uc6b0, \ub744\uc5b4\uc4f0\uae30\ub97c \ud655\uc778\ud574 \ubcf4\uc138\uc694","\ud1b5\ud569\uac80\uc0c9 \uacb0\uacfc\ubcf4\uae30":"\ud1b5\ud569\uac80\uc0c9 \uacb0\uacfc\ubcf4\uae30","msg-can't-put-script-tags":"\ud3b8\uc9d1\uae30\uc5d0 \uc2a4\ud06c\ub9bd\ud2b8 \ud0dc\uadf8\ub97c \ub123\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."}}),define("dashboard/nls/dashboard",["require","json!lang/ko/dashboard.json","json!lang/ko/custom.json"],function(require){var e=require("json!lang/ko/dashboard.json"),t=require("json!lang/ko/custom.json");return{root:_.extend(e,t.dashboard||{}),en:!0,ja:!0,zh_CN:!0,zh_TW:!0,vi:!0}}),function(e,t,n,r){t.GO||(t.GO={});var i=t.GO,s={};s.namespace=function(e,n){var r=e.split("."),n=typeof n=="undefined"?!0:!1,i=t;for(var s=0,o=r.length;s<o;s++){if(typeof i[r[s]]=="undefined"){if(!n)throw new Error("\ud574\ub2f9 \ubaa8\ub4c8\uc774 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");i[r[s]]={}}i=i[r[s]]}return i},s.isString=function(e){return typeof e=="string"||e instanceof String},s.require=function(e){s.namespace(e,!1)},s.extend=function(t,n){var r=function(){},i=function(e){this._init.apply(this,arguments)};return t.prototype._init||(t.prototype._init=function(){}),r.prototype=e.extend(!0,{},t.prototype,n),i.prototype=new r,i.fn=i.prototype,i.fn.parent=i,i._super=i.__proto__,i},s.parseUrl=function(e){var r=t.location,i=n.createElement("a"),s={};return i.setAttribute("href",e),s={protocol:/^(http|https)/.test(i.protocol)?i.protocol:r.protocol,host:i.host?i.host:r.host,hostname:i.hostname?i.hostname:r.hostname,port:i.port?i.port:r.port,pathname:i.pathname[0]==="/"?i.pathname:"/"+i.pathname,search:i.search?i.search:"",href:i.href,hash:i.hash?i.hash:r.hash},s},s.fixUrl=function(e,t){var n=s.parseUrl(e),r=t||"/",i=n.pathname,o=i[0]==="/"?i.slice(1):i;return r&&i.indexOf(r)!==0&&(i=r+o),[i,n.search,n.hash].join("")},s.serializeForm=function(t,n){n=n||!1;var r=e(t).serializeArray(),i={};return e.each(r,function(e,t){var r=n?encodeURIComponent(t.value):t.value;t.name in i?(i[t.name]instanceof Array||(i[t.name]=[i[t.name]]),i[t.name].push(r)):i[t.name]=r}),i},s.namespace("GO.gadget"),i.gadget.dom={select:function(t){var n=e("<select />").attr("name",t.name),r=t.value.split("|"),i=t.labels?t.labels.split("|"):r,s=t.defaultValue,o=[];for(var u=0,a=r.length;u<a;u++){var f=r[u],l=e('<option value="'+r[u]+'">'+i[u]+"</option>");t.defaultValue===f&&l.prop("selected",!0),o.push(l)}return n.append(o)},checkbox:function(t){var n=e('<input type="checkbox"/>'),r="gadget-opt-cb-"+t.name+"-"+t.value;return n.prop("id",r).prop("name",t.name).prop("checked",t.checked||!1).val(t.value),n},text:function(t){return e("<input />").attr("type","text").attr("name",t.name).val(t.value||"")},textarea:function(t){return e("<textarea>").attr("name",t.name).val(t.value||"")},parse:function(e){return this[e.type].call(this,e)}},s.namespace("GO.gadget"),i.gadget.i18n=function(){function t(e,t){this.locale=t,this.langs=n(e,t)}function n(t,n){var r={};return e.each(t,function(e,t){s.isString(t)&&(r[e]=t)}),n&&e.extend(r,t[n]||{}),r}return t.prototype={parse:function(e,n){n=n||{};var r=this.langs[e];return!r||(r=t.parse(r,n)),r}},t.parse=function(e,t){var n;return n=e.replace(/\{\{([\s\S]+?\}?)\}\}/g,function(e,n){return t[n]||""}),n},t}(),s.namespace("GO.gadget"),i.gadget.ContentProvider=function(){function r(t){if(!t||typeof t.then!="function")return!1;var n=String(e.Deferred().then),r=String(t.then);return n===r}function o(){this.extProps.options.hasOwnProperty("editable")||delete this.options.editable,this.extProps.options.hasOwnProperty("removable")||delete this.options.removable,this.extProps.options.hasOwnProperty("highlight")||delete this.options.highlight}function u(e,t){return console.warn("[:::Gadget errors:::] : Caused by..."),console.log(t.stack?t.stack:t.message),this.extProps.onError(e,t)}function a(e){return e.is(":checkbox")||e.is(":radio")}function f(e,t){e.styleSheet?e.styleSheet.cssText+=t:e.appendChild(n.createTextNode(t))}function l(){var t=[this.langs.refresh.none,i.gadget.i18n.parse(this.langs.refresh.unit_minute,{time:1}),i.gadget.i18n.parse(this.langs.refresh.unit_minute,{time:5}),i.gadget.i18n.parse(this.langs.refresh.unit_minute,{time:10}),i.gadget.i18n.parse(this.langs.refresh.unit_minute,{time:15}),i.gadget.i18n.parse(this.langs.refresh.unit_minute,{time:30}),i.gadget.i18n.parse(this.langs.refresh.unit_hour,{time:1}),i.gadget.i18n.parse(this.langs.refresh.unit_hour,{time:2})],n;return n=e(d(this.langs.refresh.label)).find("li:first").append(i.gadget.dom.select({name:"refresh",value:"-1|1|5|10|15|30|60|120",labels:t.join("|"),defaultValue:"-1"})).end(),n}function c(){var t=e(d(this.langs.personalize.label)),n=i.gadget.dom.checkbox({name:"editable",value:"Y",checked:this.options.editable||!1}),r=i.gadget.dom.checkbox({name:"removable",value:"Y",checked:this.options.removable||!1});return t.find("li:first").append(p(n,this.langs.personalize.editable)).append(p(r,this.langs.personalize.removable)),t}function h(){var t=e(d(this.langs.highlight.label)),n=i.gadget.dom.checkbox({name:"highlight",value:"Y",checked:this.options.highlight||!1});return t.find("li:first").append(p(n,this.langs.highlight.highlight)),t}function p(t,n){var r=e('<span class="wrap_option wrap_label"></span>');return r.append(t,'<label for="'+t.attr("id")+'">'+n+"</label>"),r}function d(e){var t=[];return t.push('<ul class="static_style">'),t.push("<li>"),t.push('<p class="title">'+e+"</p>"),t.push("</li>"),t.push("</ul>"),t.join("\n")}function v(e){var t=[];return t.push('<ul class="type_simple_list">'),t.push('<li class="null_data">'),t.push('<span class="ic_data_type ic_error_page"></span>'),t.push('<p class="desc">'+e+"</p>"),t.push("</li>"),t.push("</ul>"),t.join("\n")}function m(){var e=[];return e.push('<div class="gadget_design_wrap">'),e.push('<div class="go_gadget_header">'),e.push('<div class="gadget_h1">'),e.push('<span class="title">'+this.getTitle()+"</span>"),e.push("</div>"),e.push("</div>"),e.push('<ul class="type_simple_list">'),e.push('<li class="null_data">'),e.push('<span class="ic_data_type ic_error_page"></span>'),e.push('<p class="desc">'+this.langs.msg.load_error+"</p>"),e.push("</li>"),e.push("</ul>"),e.push("</div>"),e.join("\n")}s.require("GO.gadget.i18n"),s.require("GO.gadget.dom");var t=function(t,n,r){var s=this,r=r||{};if(!n)throw new Error("gadget spec data error");this.el=t,this.$el=e(this.el),this.locale=r.locale||"ko",this.contextRoot=r.contextRoot||"/",this.methodType=r.methodType||"create",this.spec={id:n.id,name:n.name||"Title",version:n.version||"1.0",description:n.description||"",author:n.author||""},this.pageTemplate={empty:v,loadError:function(){return m.call(s)}},this.canPersonalize=r.canPersonalize||!1,this.langs=e.extend(!0,{refresh:{label:"\uc0c8\ub85c\uace0\uce68",none:"\uc548\ud568",unit_minute:"{{time}}\ubd84",unit_hour:"{{time}}\uc2dc\uac04"},personalize:{label:"\uac1c\uc778\ud654",editable:"\ud3b8\uc9d1 \uac00\ub2a5",removable:"\uc0ad\uc81c \uac00\ub2a5"},highlight:{label:"\uac00\uc82f \ud14c\ub450\ub9ac",highlight:"\uac15\uc870"},msg:{load_error:"\uc694\uccad\ud558\uc2e0 \ub0b4\uc6a9\uc744 \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.<br />\uc624\ub958\uac00 \uc9c0\uc18d\ub420 \uacbd\uc6b0, \uc6b4\uc601\uc790\uc5d0\uac8c \ubb38\uc758\ud574 \uc8fc\uc2ed\uc2dc\uc624."}},r.langs||{}),this.options={},this.extProps={url:"",refreshable:!1,highlightable:!1,events:{},styles:{},langs:{},options:{},defaultOptions:{refresh:-1},setTitle:function(){return s.spec.name},validate:function(e){return!1},renderConfig:function(e){},onSuccess:function(e,t){},onMoved:function(e,t){},onError:function(e,t){s.getContentContainer().empty().append(m.call(s))}},this.dom=i.gadget.dom,this.editorRunner={},this.reqParams={}};return t.prototype={load:function(t){var n=this,r=Array.prototype.slice.call(arguments),o=r.length,u={};if(s.isString(t)){var u=o>1?r[o-1]:{};o>2&&e.isPlainObject(r[1])&&e.extend(!0,this.reqParams,r[1]),e.extend(u,{url:t})}else e.isPlainObject(t)&&(u=t);e.extend(!0,this.extProps,u),this.methodType==="create"&&e.extend(!0,this.options,this.extProps.defaultOptions),this.extProps.spec=this.spec,this.extProps.contextRoot=this.contextRoot,this.extProps.locale=this.locale,this.extProps.i18n=new i.gadget.i18n(this.extProps.langs,this.locale),this.extProps.dom=i.gadget.dom,this.extProps.template=function(e,t,n){var r=Hogan.compile(e);return r.render(t||{},n||{})},this.extProps.pageTemplate=this.pageTemplate,this.extProps.requestContent=this.requestContent,e.extend(!0,this.extProps.options,this.options),this.init()},init:function(){this.delegateEvents(),this.loadStyle(),this.render(),this.setRefresh()},setRefresh:function(){if(this.extProps.refreshable){var t=this.getOptionForm(),n=+this.options.refresh;this.intervalId&&clearInterval(this.intervalId),n>0&&(this.intervalId=setInterval(e.proxy(function(){this.$el.trigger("gadget:request-content")},this),n*60*1e3))}},loadEditor:function(){this.$el.find("[data-role=editable]").each(e.proxy(function(t,n){e(n).data("initstatus")||(this.editorRunner.load(n),e(n).data("initstatus",!0))},this))},getOptionForm:function(){return this.$el.find(".gadget-options-form")},getContentContainer:function(){return this.$el.find(".go-gadget-content")},setLangs:function(t){e.extend(!0,this.langs,t)},setOption:function(t){if(e.isPlainObject(t))e.extend(!0,this.options,t);else{var n=Array.prototype.slice.call(arguments,1);this.options[t]=n[0]}e.extend(!0,this.extProps.options,this.options)},setGadgetOptions:function(t){this.extProps.options=t||{},o.call(this),e.extend(!0,this.options,this.extProps.options)},setEditorRunner:function(t){e.extend(!0,this.editorRunner,t)},getEditorRunner:function(){return this.editorRunner},getEditorData:function(){var t={};return this.$el.find("[data-role=editable][id!='']").each(e.proxy(function(n,r){var i=e(r).attr("name"),s=this.getEditorRunner().getData(r);e.isPlainObject(s)?e.extend(t,s):t[i]=s},this)),t},getOption:function(e){return typeof e=="undefined"?this.options:this.options[e]||""},loadStyle:function(){var t=this,r="go-gadget-style-"+this.spec.id;this.$el.addClass("go-gadget-"+this.spec.id);if(e.isEmptyObject(this.extProps.styles)||e("#"+r).length>0)return;var i=".go-gadget-"+this.spec.id+" .go-gadget-content",s=n.getElementsByTagName("head")[0],o=n.createElement("style");o.type="text/css",o.setAttribute("id",r),s.appendChild(o),e.each(this.extProps.styles,function(e,t){f(o,i+" "+e+" {"+t+"}")})},render:function(){this.setTitle()},setTitle:function(){},getTitle:function(){return this.extProps.setTitle()},isRefreshable:function(){return!!this.extProps.refreshable},isHighlightable:function(){return!!this.extProps.highlightable},renderConfig:function(){var e=this.getOptionForm();e.html("");try{this.extProps.renderConfig(e.get(0))}catch(t){u.call(this,e.get(0),t)}this.isRefreshable()&&(e.prepend(l.call(this)),e.find("select[name=refresh]").val(this.options.refresh||"-1")),this.canPersonalize&&e.append(c.call(this)),this.isHighlightable()&&e.append(h.call(this))},reloadConfig:function(){this.renderConfig(),this.setRefresh()},renderContent:function(e,t){try{this.extProps.onSuccess(e,t)}catch(n){u.call(this,e,n)}},renderError:function(e,t){self.extProps.onError(e,t)},afterMoved:function(e,t){return this.extProps.onMoved(this.getContentContainer().get(0),e,t)},serializeForm:function(){var t=s.serializeForm(this.$el.find(".gadget-options-form"));return e.extend(!0,t,this.getEditorData()),t},validateForm:function(e){return this.extProps.validate(this.$el.find(".gadget-options-form").get(0),e)},requestContent:function(){function u(n){e.ajax(n,o).done(function(e,n,r){t.resolveWith(this,[i,e])}).fail(function(e,n,r){t.rejectWith(this,[i,n])})}var t=e.Deferred(),n=this.extProps,i=this.getContentContainer().get(0),s,o={type:"GET",statusCode:{401:function(){}},beforeSend:function(e){e.setRequestHeader("TimeZoneOffset",-(new Date).getTimezoneOffset()),t.notifyWith(this,[i])}};if(typeof n.url=="function"){s=n.url.call(n);if(r.call(this,s))return s.done(e.proxy(function(e){u.call(this,e)},this)),t}else s=n.url;return s?u.call(this,s):(t.notifyWith(this,[i]),t.resolveWith(this,[i,{}])),t},delegateEvents:function(){var t=this.extProps,n=this.getContentContainer();e.each(this.extProps.events,function(r,i){var o=[],u=i;s.isString(u)&&(u=t[u]);if(r.search(/\s+/)>0){var a=r.search(/\s+/),f=r.slice(0,a),l=r.slice(a+1);o.push(f,l)}else o.push(r);o.push(e.proxy(u||function(){},t)),e.fn.on.apply(n,o)})}},t}()}(jQuery,window,document),define("go-gadget",function(){}),function(undefined){define("dashboard/views/site/gadget",["backbone","app","dashboard/models/gadget","hgn!dashboard/templates/site/gadget","i18n!nls/commons","i18n!dashboard/nls/dashboard","jquery.go-popup","go-gadget"],function(Backbone,GO,GadgetModel,GadgetTemplate,CommonLang,DashboardLang){function updateGadgetContent(){this.$el.data("view",this).find(".go-gadget-content").empty().show().end().find(".error-msg-wrapper").empty(),this.requestContent(),updateNewGadgetMark.call(this)}function getGadgetHeaderTitleOnEdit(){return this.model.getSpec("name")}function updateNewGadgetMark(){this.model.isNew()?this.$el.addClass(GADGET_NEW_MARK):this.$el.removeClass(GADGET_NEW_MARK)}function updateEditGadgetClass(e){e?this.$el.addClass(GADGET_EDIT_WRAP):this.$el.removeClass(GADGET_EDIT_WRAP)}function updateHighlightClass(){var e=JSON.parse(this.model.get("options"));e.highlight=="Y"?this.$el.addClass(GADGET_HIGHLIGHT):this.$el.removeClass(GADGET_HIGHLIGHT)}function showGadgetErrorContent(e){$(e).empty().append(makeGadgetContentLoadError.call(this))}function makeGadgetContentLoadError(){var e=this.contentProvider.pageTemplate;return e.loadError()}function makeGadgetContentLoadingImg(){return'<div class="img_loader_large" title="'+CommonLang["\uc7a0\uc2dc\ub9cc \uae30\ub2e4\ub824\uc8fc\uc138\uc694"]+'"></div>'}var GadgetView,GADGET_NEW_MARK="gadget-not-saved",GADGET_EDIT_WRAP="wrap_gadget_edit",GADGET_HIGHLIGHT="gadget_design_border";return GadgetView=Backbone.View.extend({className:"go-gadget",editMode:!1,langs:{},events:{"click .btn-refresh":"refreshContent","click .btn-edit":"setEditMode","click .btn-remove":"removeGadget","click .btn-option-save":"saveGadget","click .btn-option-cancel":"setNormalMode"},initialize:function(e){this.options=e,this.model||(this.model=new GadgetModel),this.editMode=!1,this.spec=this.model.get("spec"),this.locale=this.options.locale||"ko",this.contextRoot=this.options.contextRoot||"/",this.canPersonalize=e.canPersonalize||!1,this.contentProvider=new GO.gadget.ContentProvider(this.el,this.spec,{methodType:this.model.isNew()?"create":"update",locale:this.locale,contextRoot:this.contextRoot,canPersonalize:this.canPersonalize,langs:{refresh:{label:CommonLang["\uc0c8\ub85c\uace0\uce68"],none:DashboardLang["\uc0c8\ub85c\uace0\uce68 \uc548\ud568"],unit_minute:DashboardLang["\ubd84\ub2e8\uc704 \uc2dc\uac04 \ud45c\uc2dc"],unit_hour:DashboardLang["\uc2dc\ub2e8\uc704 \uc2dc\uac04 \ud45c\uc2dc"]},personalize:{label:DashboardLang["\uac1c\uc778\ud654"],editable:DashboardLang["\ud3b8\uc9d1 \uac00\ub2a5"],removable:DashboardLang["\uc0ad\uc81c \uac00\ub2a5"]},highlight:{label:DashboardLang["\uac00\uc82f \ud14c\ub450\ub9ac"],highlight:DashboardLang["\uac15\uc870"]},msg:{load_error:DashboardLang["\uac00\uc82f \ub85c\ub4dc \uc624\ub958 \uba54\uc2dc\uc9c0"]}}}),updateNewGadgetMark.call(this),this.$el.off().on("gadget:disable-editing",$.proxy(function(e){this.setNormalMode(),e.stopPropagation()},this)).on("gadget:request-content",$.proxy(this.requestContent,this)).data("view",this)},load:function(){this.render();if(this.spec.script&&typeof this.spec.script=="string")try{var e=new Function("gadget",this.spec.script),t={layout:this.model.get("dashboard").boxCount+"_"+this.model.get("dashboard").layout,column:parseInt(this.model.get("boxNumber"))+1};this.contentProvider.setOption($.extend({},$.parseJSON(this.model.get("options")),t)),e({load:$.proxy(function(){this.contentProvider.load.apply(this.contentProvider,arguments)},this)})}catch(n){this.raiseError()}this.model.isNew()&&(this.$el.find(".btn-mgmt").show(),this.setEditMode(),this.$el.find(".go-gadget-content").hide())},render:function(){this.$el.append(GadgetTemplate({title:getGadgetHeaderTitleOnEdit.call(this),"showConfigButton?":this.model.updatable(),"showRemoveButton?":this.model.removable(),label:{setup:CommonLang["\uc124\uc815"],refresh:CommonLang["\uc0c8\ub85c\uace0\uce68"],modify:CommonLang["\ud3b8\uc9d1"],remove:CommonLang["\uc0ad\uc81c"],save:CommonLang["\uc800\uc7a5"],cancel:CommonLang["\ucde8\uc18c"]}}))},getGadgetId:function(){return this.model.id},getSpecName:function(){return this.spec.name},move:function(e,t){var n=this,r=this.getSpecName().indexOf("HTML",0)!=-1?!0:!1;return r&&this.editMode==1&&this.setNormalMode(),deferred=$.Deferred(),this.model.savePosition(e,t).then(function(t){var r=t.get("dashboard");n.contentProvider.afterMoved(e+1,r.boxCount+"_"+r.layout),deferred.resolve(t)},function(){deferred.reject()}),deferred},setPosition:function(e,t){return this.model.setPosition(e,t)},getBoxNumber:function(){return this.model.getBoxNumber()},renderContent:function(e,t){this.contentProvider.renderContent(e,t),this.editMode||updateEditGadgetClass.call(this,!1),updateHighlightClass.call(this),$(e).find("a").attr("data-bypass",!0)},requestContent:function(e){var t=this;this.contentProvider.requestContent().progress(function(e){$(e).find(".img_loader_large").length||t.setGadgetContent(makeGadgetContentLoadingImg())}).done(function(e,n){t.renderContent(e,n)}).fail(function(e){t.raiseError()}).always(function(e){$(e).find(".img_loader_large").remove()})},setGadgetContent:function(e){return this.$el.find(".go-gadget-content").empty().append(e),this},setEditorRunner:function(e){return this.contentProvider.setEditorRunner(e),this},setEditMode:function(e){!e||e.preventDefault(),this.editMode||(this.showConfigPane(),this.editMode=!0,updateEditGadgetClass.call(this,!0))},setNormalMode:function(e){this.hideConfigPane(),this.contentProvider.reloadConfig(),this.editMode=!1,updateEditGadgetClass.call(this,!1)},refreshContent:function(e){this.editMode||this.requestContent()},createGadget:function(){var e=this,t=$.Deferred(),n=this.model;return n.save({options:JSON.stringify(this.contentProvider.getOption())},{success:function(n){updateGadgetContent.call(e),t.resolve(e,n)},error:function(){$.goError(DashboardLang["\uac00\uc82f \uc124\uc815\uc800\uc7a5 \uc624\ub958 \uba54\uc2dc\uc9c0"]),t.reject()}}),t},saveGadget:function(){var self=this,defer=$.Deferred(),gadget=this.model,isNew=gadget.isNew(),actions=gadget.getActions(),contentProvider=this.contentProvider,formData=contentProvider.serializeForm(),validateResult=contentProvider.validateForm(formData);return validateResult===!1?(gadget.isCompanyType()&&GO.session("dashboardAdmin")&&(actions.updatable=formData.editable==="Y",actions.removable=formData.removable==="Y",gadget.set("actions",actions)),gadget.save({options:JSON.stringify(formData)},{success:function(model){with(contentProvider)setGadgetOptions($.parseJSON(model.get("options"))),setTitle();updateGadgetContent.call(self),self.setNormalMode(),defer.resolve(self,model)},error:function(){$.goError(DashboardLang["\uac00\uc82f \uc124\uc815\uc800\uc7a5 \uc624\ub958 \uba54\uc2dc\uc9c0"]),defer.reject()}})):(this.$el.find(".error-msg-wrapper").empty().append(validateResult),defer.reject()),defer},removeGadget:function(e){var t=this;e.preventDefault();if(!this.model.removable())return;this.model.isNew()?this.remove():$.goCaution("'"+this.model.getSpec("name")+"'",DashboardLang["\uac00\uc82f \uc0ad\uc81c \uba54\uc2dc\uc9c0"],function(){t.model.destroy({success:function(){t.remove()},error:function(){$.goError(DashboardLang["\uac00\uc82f \uc0ad\uc81c \uc624\ub958 \uba54\uc2dc\uc9c0"])}})})},showConfigPane:function(){var e=this.$el.find(".go-gadget-config");e.data("initalized")||(this.contentProvider.renderConfig(),e.data("initalized",!0)),this.contentProvider.loadEditor(),e.show()},hideConfigPane:function(){this.model.isNew()?this.$el.remove():this.$el.find(".go-gadget-config").hide()},raiseError:function(){showGadgetErrorContent.call(this,this.$el.find(".go-gadget-content").get(0))},getContentProvider:function(){return this.contentProvider}},{NEW_MARK:GADGET_NEW_MARK,create:function(e){var t=new this.prototype.constructor({model:new GadgetModel(e.data||{}),locale:e.locale||"ko",contextRoot:e.contextRoot||"/",canPersonalize:e.canPersonalize||!1});return!e.appendTo||$(e.appendTo).append(t.el),!e.editorRunner||t.setEditorRunner(e.editorRunner),t}}),GadgetView})}(),function(){define("dashboard/views/site/dashboard",["backbone","when","app","dashboard/models/dashboard","dashboard/models/gadget","dashboard/views/site/gadget","i18n!dashboard/nls/dashboard","go-webeditor/jquery.go-webeditor"],function(e,t,n,r,i,s,o){function T(e){e=e||[];for(var t=0,n=e.length;t<n;t++)if(N.call(this,e[t]))return!0;return!1}function N(e){return this.$el.find(d+e).has(a).length>0}function C(e){var t=$('<div class="go-gadget-draghelper go_gadget_move_warp"></div>'),n=e.data("view"),r=n.getSpecName(),i=[];return i.push('<div class="go-gadget">'),i.push('<div class="go-gadget-header go_gadget_header">'),i.push('<div class="gadget_h1">'),i.push('<span class="title">'+r+"</span>"),i.push("</div>"),i.push("</div>"),i.push("</div>"),t.width(g.width).height(g.height).append(i.join("\n")),t}function k(e){_.map(e||[],function(e){var t=e+1;this.$el.find(d+t).find(a).each(function(t,n){var r=$(n).data("view");r.setPosition(e,t)})},this)}function L(){return X.call(this)?i.TYPE_COMPANY:i.TYPE_USER}function A(e){return this.$el.find(d+(e+1))}function O(){return d+v}function M(){var e=$('<div class="'+h+'"></div>').css({border:"1px dashed #AAA","min-height":"100px"});this.$el.find(l).append(e)}function D(e){!e||(this.layoutTemplate=e),this.$el.empty().append(this.layoutTemplate)}function P(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function H(e){var t=$.Deferred();return require(["hgn!dashboard/templates/site/layouts/layout-"+e.getBoxCount()+"-"+e.getLayout()],function(e){t.resolve(e)}),t}function B(e){e.length>0?(e.rawSort().each(function(e){z.call(this,e.toJSON(),e.getBoxNumber()).load()},this),R.call(this)):j.call(this)}function j(){var e=o["\uac1c\uc778 \ub300\uc2dc\ubcf4\ub4dc \uac00\uc82f \uc5c6\uc74c \uba54\uc2dc\uc9c0"],t=[];F.call(this)?t.push(q()):e=o["\uac00\uc82f \uc5c6\uc74c \uba54\uc2dc\uc9c0"],t.unshift(e),this.$el.empty().append(I.apply(this,t))}function F(){return this.model.isUserType()?!0:n.session("dashboardAdmin")?!0:this.model.canAddGadget()?!0:!1}function I(e,t){var n=[];return n.push('<div class="null_data full_page">'),n.push('<span class="ic_data_type"></span>'),n.push('<p class="desc">'+e+"</p>"),!t||n.push(t),n.push("</div>"),n.join("\n")}function q(){var e=[];return e.push('<a href="#" class="btn-empty-add-gadget btn_w" data-bypass>'),e.push('<span class="ic_dashboard2 ic_mgmt_t" title="'+o["\uac00\uc82f\ucd94\uac00"]+'"></span>'),e.push('<span class="txt">'+o["\uac00\uc82f\ucd94\uac00"]+"</span>"),e.push("</a>"),e.join("\n")}function R(){this.model.activated()&&this.$el.find(a).trigger("gadget:request-content")}function U(e){return typeof e=="undefined"?v:e}function z(e,t){var r={data:e,locale:n.config("locale"),contextRoot:n.config("contextRoot"),canPersonalize:W.call(this),editorRunner:{load:function(e){var t=$(e).attr("name"),r=$(e).val(),i=n.config("locale"),s=t+"-"+(new Date).valueOf();$(e).attr("id",s),$("#"+s).goWebEditor({contextRoot:n.config("contextRoot"),lang:i,editorValue:r,theme:"simple"})},getData:function(e){var t=$(e).attr("id"),r=n.Editor.getInstance(t),i={},s="";return s=r.getContent(),s==="<br>"&&(s=""),r.options.name=="ActiveDesigner"&&(i.isMime=!0),i[$(e).attr("name")]=s,i}}};return typeof t!="undefined"&&(r.appendTo="#"+c+e.dashboardId+" "+d+U(t)),s.create(r)}function W(){return this.model.isUserType()?!1:n.session("dashboardAdmin")?!0:!1}function X(){return this.model.isCompanyType()&&n.session("dashboardAdmin")}function V(e){return"go-dashboard-"+e.get("id")}function J(e){return $("#"+c+e)}function K(e){return e.get("id")}var u="dashboard",a=".go-gadget",f=".go-gadget-header",l=".go-gadget-column",c="go-dashboard-",h="dashboard-box-guide",p="go-dashboard-editing",d=".gadget-col-",v=1,m=0,g={width:350,height:150},y={left:225,top:20},b=10,w=10,E={enable:"dashboard:enable-editing",disable:"dashboard:disable-editing"},S=[],x;return S.push({id:1,boxCount:3,layout:1,desc:"3-1"}),S.push({id:2,boxCount:3,layout:2,desc:"3-2"}),S.push({id:3,boxCount:3,layout:3,desc:"3-3"}),S.push({id:4,boxCount:5,layout:1,desc:"5-1"}),x=e.View.extend({className:"go-dashboard",editingMode:!1,layoutTemplate:"",initialize:function(e){this.id||this.$el.prop("id",V(this.model)),this.$el.addClass(this.model.getSelectorName()),this.$el.data(u,this),this.layoutTemplate=""},render:function(e){var n=this,r=t.defer(),i=H(this.model),s;return i.then(function(e){return D.call(n,e())}).then(function(){return n.model.fetchGadgets(e)}).then(function(e){return e.then(function(e){B.call(n,e),r.resolve()},r.reject)},function(e){console.log(e.stack),r.reject()}),r.promise},decideActivate:function(){this.model.activated()?this.$el.addClass("activated").show():this.$el.removeClass("activated").hide()},enableEditingMode:function(){this.editingMode||(this.$el.find(l).length||D.call(this),this.$el.addClass(p),M.call(this),this.enableSortable(),this.editingMode=!0)},enableSortable:function(){var e=this;$(l).sortable({items:a,cancel:".ui-not-sortable",connectWith:l,handle:f,distance:10,delay:250,placeholder:"go-gadget-placeholder",cursorAt:y,scrollSensitivity:b,scrollSpeed:w,helper:function(e,t){return C(t)},over:function(e,t){$(this).find("."+h).appendTo(this)},stop:function(t,n){var r=n.item,i=r.parent(),s=r.data("view"),u=s.getGadgetId(),f=s.getBoxNumber()-1,l=+i.data("columnid")-1,c=0;i.find(a).each(function(e,t){if($(t).data("view").getGadgetId()===u){c=e;return}}),s.move(l,c).done(function(t){k.call(e,_.uniq([f,l]))}).fail(function(){$.goError(o["\uac00\uc82f \uc774\ub3d9 \uc624\ub958 \uba54\uc2dc\uc9c0"]),r.sortable("cancel")})}}),$(a).addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(f).addClass("ui-widget-header ui-corner-all").end(),P($(l))},disableSortable:function(){this.$el.find(a).trigger("gadget:disable-editing").removeClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all").find(f).removeClass("ui-widget-header ui-corner-all").end(),this.$el.find(l).sortable("destroy")},disableEditingMode:function(){if(this.editingMode){var e=this;this.$el.find("."+h).remove(),this.model.fetchGadgets(!0).then(function(t){t.length>0?e.disableSortable():j.call(e),e.$el.removeClass(p),e.editingMode=!1,!n.router.getSearch("editmode")||n.router.navigate("home",{trigger:!1,replace:!0})})}},show:function(){this.$el.show()},hide:function(){this.$el.hide()},isEditingMode:function(){return this.editingMode},addGadget:function(e){var t,n=this.$el.find(O()),r=+n.data("columnid")-1,i={spec:e,type:L.call(this),dashboard:{id:this.model.id},boxNumber:r,boxOrder:m};t=z.call(this,i),n.prepend(t.el),t.load(),t.createGadget().then(_.bind(function(){k.call(this,[r])},this))},hasNoneSavedGadgets:function(){return this.$el.find("."+s.NEW_MARK).length>0},hasGadget:function(){return this.$el.find(a).length>0},changeLayout:function(e,t){var n=$.Deferred(),r=this.model.diffBoxNumbers(e);return T.call(this,r)?$.goConfirm(o["\ub808\uc774\uc544\uc6c3 \ubcc0\uacbd \uc548\ub0b4"],o["\ub808\uc774\uc544\uc6c3 \ubcc0\uacbd \ud655\uc778 \uba54\uc2dc\uc9c0"],_.bind(function(){this.model.updateLayout(e,t).then(n.resolve,n.reject)},this)):this.model.changeLayout(e,t).then(n.resolve,n.reject),n}},{LAYOUT_SPECS:r.LAYOUT_SPECS,exists:function(e){return J(e).length>0},getInstanceById:function(e){return this.exists(e)?J(e).data(u):undefined},loadTo:function(e,t){var n,r=$.Deferred();return this.exists(K(t))?(n=this.getInstanceById(K(t)),r.resolve(n)):(n=new x({model:t,id:c+t.get("id")}),$(e).append(n.el),n.render().then(function(){r.resolve(n)},r.reject)),n.isEditingMode()&&n.enableEditingMode(),r},forceLoadTo:function(e,t){var n,r=$.Deferred();return $(e).find("#"+c+t.get("id")).remove(),n=new x({model:t,id:c+t.get("id")}),$(e).append(n.el),n.render(!0).then(function(){r.resolve(n)},r.reject),r}}),x})}(),define("hgn!dashboard/templates/search/detail_search_popup",["hogan"],function(e){var t=new e.Template({code:function(e,t,n){var r=this;return r.b(n=n||""),r.b("<fieldset>\r"),r.b("\n"+n),r.b('	<table class="form_type">\r'),r.b("\n"+n),r.b("		<colgroup>\r"),r.b("\n"+n),r.b('			<col width="70px">\r'),r.b("\n"+n),r.b('			<col width="*">\r'),r.b("\n"+n),r.b("		</colgroup>\r"),r.b("\n"+n),r.b("		<tbody>\r"),r.b("\n"+n),r.b("		<tr>\r"),r.b("\n"+n),r.b("			<th>\r"),r.b("\n"+n),r.b('				<span class="title">'),r.b(r.v(r.d("lang.keyword",e,t,0))),r.b("</span>\r"),r.b("\n"+n),r.b("			</th>\r"),r.b("\n"+n),r.b("			<td>\r"),r.b("\n"+n),r.b('				<input id="keyword" name="keyword" class="txt_mini w_max" type="text">\r'),r.b("\n"+n),r.b("				\r"),r.b("\n"+n),r.b('				<span class="vertical_option" style="display:none;">\r'),r.b("\n"+n),r.b('					<span class="wrap_option"><input id="searchAttachContents" name="searchAttachContents" type="checkbox"><label for="searchAttachContents">'),r.b(r.v(r.d("lang.content_search",e,t,0))),r.b("</label></span>\r"),r.b("\n"+n),r.b("				</span>\r"),r.b("\n"+n),r.b("			</td>\r"),r.b("\n"+n),r.b("		</tr>\r"),r.b("\n"+n),r.b("		<tr>\r"),r.b("\n"+n),r.b('			<th><span class="title">'),r.b(r.v(r.d("lang.period",e,t,0))),r.b("</span></th>\r"),r.b("\n"+n),r.b('			<td class="last">\r'),r.b("\n"+n),r.b('				<ul class="select_option">\r'),r.b("\n"+n),r.b("					<li>\r"),r.b("\n"+n),r.b('						<span class="option_wrap">\r'),r.b("\n"+n),r.b('							<input id="radioAll" name="term" type="radio" checked="" value="all">\r'),r.b("\n"+n),r.b('							<label for="radioAll">'),r.b(r.v(r.d("lang.all",e,t,0))),r.b("</label>\r"),r.b("\n"+n),r.b("						</span>\r"),r.b("\n"+n),r.b("					</li>\r"),r.b("\n"+n),r.b("					<li>\r"),r.b("\n"+n),r.b('						<span class="option_wrap">\r'),r.b("\n"+n),r.b('							<input id="radio1Week" name="term" type="radio" value="-1">\r'),r.b("\n"+n),r.b('							<label for="radio1Week">'),r.b(r.v(r.d("lang.aweek",e,t,0))),r.b("</label>\r"),r.b("\n"+n),r.b("						</span>\r"),r.b("\n"+n),r.b("					</li>\r"),r.b("\n"+n),r.b("					<li>\r"),r.b("\n"+n),r.b('						<span class="option_wrap">\r'),r.b("\n"+n),r.b('							<input type="radio" id="radio2Week" name="term" value="-2">\r'),r.b("\n"+n),r.b('							<label for="radio2Week">'),r.b(r.v(r.d("lang.twoweeks",e,t,0))),r.b("</label>\r"),r.b("\n"+n),r.b("						</span>\r"),r.b("\n"+n),r.b("					</li>\r"),r.b("\n"+n),r.b("					<li>\r"),r.b("\n"+n),r.b('						<span class="option_wrap">\r'),r.b("\n"+n),r.b('							<input type="radio" id="radio1Month" name="term" value="month">\r'),r.b("\n"+n),r.b('							<label for="radio1Month">'),r.b(r.v(r.d("lang.amonth",e,t,0))),r.b("</label>\r"),r.b("\n"+n),r.b("						</span>\r"),r.b("\n"+n),r.b("					</li>\r"),r.b("\n"+n),r.b("					\r"),r.b("\n"+n),r.b("					<li>\r"),r.b("\n"+n),r.b('						<span class="option_wrap">\r'),r.b("\n"+n),r.b('							<input type="radio" id="radioDirectly" name="term" value="directly">\r'),r.b("\n"+n),r.b('							<label for="radioDirectly">'),r.b(r.v(r.d("lang.directly",e,t,0))),r.b("</label>\r"),r.b("\n"+n),r.b("						</span>\r"),r.b("\n"+n),r.b('						<span class="noti_date_wrap option_wrap">\r'),r.b("\n"+n),r.b('							<input name="fromDate" data-type="datepicker" id="fromDate" class="input wfix_medium" type="text" disabled="disabled">\r'),r.b("\n"+n),r.b('							<span class="ic ic_calendar"></span>\r'),r.b("\n"+n),r.b("						</span>\r"),r.b("\n"+n),r.b("						~\r"),r.b("\n"+n),r.b('						<span class="noti_date_wrap option_wrap">\r'),r.b("\n"+n),r.b('							<input name="toDate" data-type="datepicker" id="toDate" class="input wfix_medium" type="text" disabled="disabled">\r'),r.b("\n"+n),r.b('							<span class="ic ic_calendar"></span>\r'),r.b("\n"+n),r.b("						</span>\r"),r.b("\n"+n),r.b("					</li>\r"),r.b("\n"+n),r.b("				</ul>\r"),r.b("\n"+n),r.b("			</td>	\r"),r.b("\n"+n),r.b("		</tr>							\r"),r.b("\n"+n),r.b("		</tbody>\r"),r.b("\n"+n),r.b("	</table>						\r"),r.b("\n"+n),r.b("</fieldset>\r"),r.b("\n"),r.fl()},partials:{},subs:{}},"",e);return function(){return t.render.apply(t,arguments)}}),define("dashboard/views/search/detail_search_popup",["backbone","app","i18n!nls/commons","i18n!dashboard/nls/dashboard","hgn!dashboard/templates/search/detail_search_popup","jquery.go-validation","jquery.go-sdk"],function(e,t,n,r,i){var s={keyword:n["\uac80\uc0c9\uc5b4"],period:n["\uae30\uac04"],all:n["\uc804\uccb4"],aweek:r["\ucd5c\uadfc 1\uc8fc\uc77c"],twoweeks:r["\ucd5c\uadfc 2\uc8fc\uc77c"],amonth:r["\ucd5c\uadfc 1\uac1c\uc6d4"],directly:r["\uc9c1\uc811\uc120\ud0dd"],content_search:n["\ucca8\ubd80\ud30c\uc77c\ub0b4\uc6a9 \uac80\uc0c9"]};return e.View.extend({tagName:"form",events:{"change input[type=radio]":"changeTerm"},render:function(){this.$el.html(i({lang:s,isMailAttachSearch:this.getMailAttachSearch()})),$.datepicker.setDefaults($.datepicker.regional[GO.config("locale")]),this.renderDatePicker(),this.getMailAttachSearch()},renderDatePicker:function(){this.$("#fromDate").datepicker({yearSuffix:"",dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0}),this.$("#toDate").datepicker({yearSuffix:"",dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0})},renderFolders:function(e){this.$("#folders").empty(),this.$("#folders").append("<option value='all'>"+n["\uc804\uccb4"]+"</option>"),_.each(e,function(e){var t="<option value='"+e.id+"'>"+e.name+"</option>";this.$("#folders").append(t)},this)},renderStatus:function(e){this.$("#status").empty(),this.$("#status").append("<option value=''>"+n["\uc804\uccb4"]+"</option>"),_.each(e,function(e){var t="<option value='"+e+"'>"+e+"</option>";this.$("#status").append(t)},this)},changeTerm:function(e){var t=$(e.currentTarget).attr("id")=="radioDirectly";this.$("input[data-type=datepicker]").prop("disabled",!t),this.renderDatePicker(),t&&this.$("input[data-type=datepicker]").val(GO.util.shortDate(new Date))},getSearchParam:function(){var e=this.$("#keyword").val();e=$.trim(e);if(e==""){$.goError(n["\uac80\uc0c9\uc5b4\ub97c \uc785\ub825\ud558\uc138\uc694."]),e.focus();return}if(!$.goValidation.isCheckLength(2,64,e)){$.goMessage(t.i18n(n["0\uc790\uc774\uc0c1 0\uc774\ud558 \uc785\ub825\ud574\uc57c\ud569\ub2c8\ub2e4."],{arg1:"2",arg2:"64"})),e.focus();return}if($.goValidation.isInValidEmailChar(e)){$.goMessage(n["\uba54\uc77c \uc0ac\uc6a9 \ubd88\uac00 \ubb38\uc790"]),e.focus();return}var r=this.getSearchTerm();return{stype:"detail",keyword:e,searchAttachContents:this.$("#searchAttachContents").is(":checked"),fromDate:r.fromDate,toDate:r.toDate,searchTerm:r.searchTerm,page:0,offset:5,sdate:this.convertTime(r.fromDate)+"-00-00-00",edate:this.convertTime(r.toDate)+"-23-59-59",adv:"on"}},getSearchTerm:function(){var e=this.$el.find("input[type=radio]:checked").val(),t=GO.util.shortDate(new Date),n=GO.util.toISO8601("1970/01/01"),r=GO.util.toISO8601(new Date),i="all";return e=="-1"?(n=GO.util.calDate(t,"weeks",e),i="1w"):e=="-2"?(n=GO.util.calDate(t,"weeks",e),i="2w"):e=="month"?(n=GO.util.calDate(t,"months",-1),i="1m"):e=="directly"&&(i="",n=GO.util.toISO8601($("#fromDate").val()),r=GO.util.searchEndDate($("#toDate").val())),{fromDate:n,toDate:r,searchTerm:i}},validate:function(){var e=0,t=["keyword"];return _.each(t,function(t){var r=this.$("#"+t);r.val().length>64&&($.goError(GO.i18n(n["\ucd5c\ub300 {{arg1}}\uc790 \uae4c\uc9c0 \uc785\ub825\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."],{arg1:64}),r,!1,!0),e+=1)},this),e==0},convertTime:function(e){var t=e.split("T");return t[0]},getMailAttachSearch:function(){$.go(GO.contextRoot+"api/system/mailattachsearch","",{qryType:"GET",sync:!1,responseFn:function(e){e.code==200&&e.data&&$("#searchAttachContents").parents("span.vertical_option").show()},error:function(e){}})}})}),define("hgn!dashboard/templates/search/search",["hogan"],function(e){var t=new e.Template({code:function(e,t,n){var r=this;return r.b(n=n||""),r.b('<section class="combine_search">\r'),r.b("\n"+n),r.b('	<div class="c_search_wrap"><!--focus\ub418\uba74 "search_focus" multi class\ub85c \ucd94\uac00\ud574\uc8fc\uc138\uc694.-->\r'),r.b("\n"+n),r.b('		<input class="c_search" type="text"  id="search-keyword" type="text" name="search_keyword" value="" placeholder="'),r.b(r.v(r.d("lang.unified_search",e,t,0))),r.b('" maxlength="200">\r'),r.b("\n"+n),r.b('		<a class="c_btn_detail" id="btn_DetailSearch" title="'),r.b(r.v(r.d("lang.advanced_search",e,t,0))),r.b('" ><span class="txt">'),r.b(r.v(r.d("lang.detail",e,t,0))),r.b('</span><span class="ic ic_cs_detail_arrow  "></span></a>\r'),r.b("\n"+n),r.b('		<input class="btn_c_search" type="button" id="btn-search" value="'),r.b(r.v(r.d("lang.search",e,t,0))),r.b('" title="'),r.b(r.v(r.d("lang.search",e,t,0))),r.b('">\r'),r.b("\n"+n),r.b("	</div>\r"),r.b("\n"+n),r.b("</section>"),r.fl()},partials:{},subs:{}},"",e);return function(){return t.render.apply(t,arguments)}}),define("dashboard/views/search/search",["backbone","hogan","app","dashboard/views/search/detail_search_popup","hgn!dashboard/templates/search/search","i18n!nls/commons","jquery.go-validation"],function(e,t,n,r,i,s){var o={advanced_search:s["\uc0c1\uc138\uac80\uc0c9"],unified_search:s["\ud1b5\ud569\uac80\uc0c9"],search:s["\uac80\uc0c9"],detail:s["\uc0c1\uc138"]};return e.View.extend({events:{"click #btn-search":"searchAll","click #btn_DetailSearch":"detailPopup","keydown #search-keyword":"searchKeyEvent"},initialize:function(){this.$el.off()},render:function(){return this.$el.html(i({lang:o})),this},searchAll:function(){var e=this.$("#search-keyword"),t=e.val();t=$.trim(t);if(t==""){$.goError(s["\uac80\uc0c9\uc5b4\ub97c \uc785\ub825\ud558\uc138\uc694."]),e.focus();return}if(!$.goValidation.isCheckLength(2,64,t)){$.goMessage(n.i18n(s["0\uc790\uc774\uc0c1 0\uc774\ud558 \uc785\ub825\ud574\uc57c\ud569\ub2c8\ub2e4."],{arg1:"2",arg2:"64"}));return}if($.goValidation.isInValidEmailChar(t)){$.goMessage(s["\uba54\uc77c \uc0ac\uc6a9 \ubd88\uac00 \ubb38\uc790"]);return}var r={stype:"simple",keyword:t,offset:5,page:0,fromDate:GO.util.toISO8601("1970/01/01"),toDate:GO.util.toISO8601(new Date),searchTerm:"all"};this.search(r)},search:function(e){n.router.navigate("unified/search?"+this.serializeObj(e),!0)},serializeObj:function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},detailPopup:function(e){var t=this,n=new r,i=$(e.currentTarget).offset();this.searchPopup=$.goSearch({modal:!0,header:s["\uc0c1\uc138\uac80\uc0c9"],offset:{top:parseInt(i.top+30,10),right:7},callback:function(){n.validate()&&t.search(n.getSearchParam())}}),this.searchPopup.find(".content").html(n.el),n.render()},searchKeyEvent:function(e){var t=this;this.clearTimeOut=setTimeout(function(){e.keyCode==13&&t.searchAll()},200)}})}),define("hgn!dashboard/templates/site/app",["hogan"],function(e){var t=new e.Template({code:function(e,t,n){var r=this;return r.b(n=n||""),r.b('<div class="go_dashboard_header">'),r.b("\n"+n),r.b('	<ul class="dashboad-tabs dashboard_tab">'),r.b("\n"+n),r.s(r.f("dashboards",e,t,1),e,t,0,92,390,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b('	<li class="dashboard-tab'),r.s(r.f("activated",e,t,1),e,t,0,132,140,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(" on mgmt")}),e.pop()),r.b('" data-id="'),r.b(r.v(r.f("id",e,t,0))),r.b('">'),r.b("\n"+n),r.b('		<a href="#" data-bypass>'),r.b(r.v(r.f("title",e,t,0))),r.b("</a>"),r.b("\n"+n),r.s(r.f("activated",e,t,1),e,t,0,230,367,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b('		<span id="btn-dashboard-manage" class="ic_dashboard2 ic_mgmt_t" title="'),r.b(r.v(r.d("label.manage",e,t,0))),r.b('">'),r.b("\n"+n),r.b('			<a href="#" data-bypass></a>'),r.b("\n"+n),r.b("		</span>"),r.b("\n"+n)}),e.pop()),r.b("	</li>"),r.b("\n"+n)}),e.pop()),r.b('	<li class="create">'),r.b("\n"+n),r.b('		<span id="btn-dashboard-add" class="ic_dashboard2 ic_create_t" title="'),r.b(r.v(r.d("label.add",e,t,0))),r.b('"></span>'),r.b("\n"+n),r.b("	</li>"),r.b("\n"+n),r.b("	</ul>"),r.b("\n"+n),r.b('	<section class="search">'),r.b("\n"+n),r.b("	</section>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.b("\n"+n),r.b('<div id="dashboard-config-toolbar" class="go_dashboard_ctrl" style="display:none">'),r.b("\n"+n),r.b('	<div class="critical">'),r.b("\n"+n),r.b('		<span id="titleViewArea" class="txt_form">'),r.b("\n"+n),r.b('			<span id="dashboard-title"></span>'),r.b("\n"+n),r.b('			<span class="btn_ic_list_reorder" id="dashboard-title-form">'),r.b("\n"+n),r.b('				<span class="ic_side ic_list_reorder" title="'),r.b(r.v(r.d("label.config",e,t,0))),r.b('"></span>'),r.b("\n"+n),r.b("			</span>"),r.b("\n"+n),r.b("		</span>"),r.b("\n"+n),r.b('		<span id="titleEditArea" class="txt_edit" style="display:none">'),r.b("\n"+n),r.b('			<input class="input edit wfix_large" type="text" name="title">'),r.b("\n"+n),r.b('			<span class="btn_wrap ui_edit_ing">'),r.b("\n"+n),r.b('				<span id="dashboard-title-edit" class="ic_side ic_done" title="'),r.b(r.v(r.d("label.edit_complete",e,t,0))),r.b('"></span>'),r.b("\n"+n),r.b('				<span id="dashboard-title-undo" class="ic_side ic_cancel" title="'),r.b(r.v(r.d("label.cancel",e,t,0))),r.b('"></span>'),r.b("\n"+n),r.b("			</span>"),r.b("\n"+n),r.b("		</span>"),r.b("\n"+n),r.b('		<span id="gadget-addable-option-row" class="btn_ic_side_setting">'),r.b("\n"+n),r.b('			<span class="groupManage ic_side ic_side_setting" title="'),r.b(r.v(r.d("label.add_gaget_accept",e,t,0))),r.b('"></span>'),r.b("\n"+n),r.b("		</span>"),r.b("\n"+n),r.b("		"),r.b("\n"+n),r.b("	</div>"),r.b("\n"+n),r.b('	<ul class="option_layout" id="btn-change-layout">'),r.b("\n"+n),r.s(r.f("layout_specs",e,t,1),e,t,0,1574,1769,"{{ }}")&&(r.rs(e,t,function(e,t,r){r.b('		<li class="layout-option layout-'),r.b(r.v(r.f("boxCount",e,t,0))),r.b("-"),r.b(r.v(r.f("layout",e,t,0))),r.b('" data-boxcount="'),r.b(r.v(r.f("boxCount",e,t,0))),r.b('" data-layout='),r.b(r.v(r.f("layout",e,t,0))),r.b(">"),r.b("\n"+n),r.b('			<span class="ic_dashboard2 ic_layout'),r.b(r.v(r.f("boxCount",e,t,0))),r.b("_"),r.b(r.v(r.f("layout",e,t,0))),r.b('"></span>'),r.b("\n"+n),r.b("		</li>"),r.b("\n"+n)}),e.pop()),r.b("	</ul>"),r.b("\n"+n),r.b('	<div class="optional">'),r.b("\n"+n),r.b('		<a class="btn_minor_s" id="remove-option-btn"><span class="txt">'),r.b(r.v(r.d("label.remove",e,t,0))),r.b("</span></a>"),r.b("\n"+n),r.b('		<a class="btn_major_s" id="btn-close"><span class="txt">'),r.b(r.v(r.d("label.complete",e,t,0))),r.b("</span></a>"),r.b("\n"+n),r.b('		<span class="btn_ctrl btn-add-gadget">'),r.b("\n"+n),r.b('			<span class="ic_dashboard2 ic_ctrl_open" title="'),r.b(r.v(r.d("label.open",e,t,0))),r.b('"></span>'),r.b("\n"+n),r.b("		</span>"),r.b("\n"+n),r.b("	</div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.b("\n"+n),r.b('<div id="dashboard-option-gadget" class="dashboard-option-pane go_dashboard_option dashboard_option_gadget" data-type="gadget" style="display:none">'),r.b("\n"+n),r.b('	<div class="gadget_list_wrap">'),r.b("\n"+n),r.b('		<ul class="gadget_list"></ul>'),r.b("\n"+n),r.b("	</div>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.b("\n"+n),r.b('<div class="layer_alarm2" id="layer_alarm_top" style="display:none">'),r.b("\n"+n),r.b('    <span class="dday" id="layer_alarm_dady">'),r.b(r.v(r.f("dday",e,t,0))),r.b("</span>"),r.b("\n"+n),r.b('    <span class="txt">'),r.b(r.v(r.f("ddaymsg",e,t,0))),r.b("</span>"),r.b("\n"+n),r.b('    <a class="btn_layer_x" title="'),r.b(r.v(r.f("close",e,t,0))),r.b('"><span class="ic"></span><span class="txt">'),r.b(r.v(r.f("close",e,t,0))),r.b("</span></a>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.b("\n"),r.fl()},partials:{},subs:{}},"",e);return function(){return t.render.apply(t,arguments)}}),function(){define("helpers/form",["jquery","underscore","jquery.go-popup"],function(e,t){function n(e,n,r,i){var s=[],o=[e,n,r].join("-"),u=[],a;return t.each(i.attrs||{},function(e,t){u.push(t+'="'+e+'"')}),a=u.length>0?" "+u.join(" "):"",s.push('<span class="wrap_option">'),s.push(['<input id="',o,'" type="',e,'" name="',n,'" value="',r,'"',i.checked?' checked="checked"':"",a,">"].join("")),s.push('<label for="'+o+'">'+t.escape(i.label)+"</label>"),s.push("</span>"),s.join("\n")}function r(t,n){e.goError(n,t),t.addClass("enter error").focus()}return{radio:function(e,r,i){return t.defaults(i||{},{checked:!1,label:r}),n("radio",e,r,i)},radiogroup:function(e,r,i,s){var o=[];return t.each(r,function(t){o.push(n("radio",e,t.value,{label:t.label||t.value,checked:t.value===(i||"")}))}),o.join(s||"\n")},checkbox:function(e,r,i){return t.defaults(i||{},{checked:!1,label:r}),n("checkbox",e,r,i)},select:function(e,n,r){var i=[];return i.push('<span class="wrap_select">'),i.push('<select name="'+e+'">'),t.each(n,function(e){i.push(['<option value="',e.value,'"',e.value===r?' selected="selected"':"",">",e.label||e.value,"</option>"].join(""))}),i.push("</select>"),i.push("</span>"),i.join("\n")},printError:function(t,n){e.goError(n,t),t.is("input[type=text], textarea")&&t.addClass("enter error").focus()}}})}(),function(){define("dashboard/views/site/app",["backbone","app","dashboard/models/dashboards","dashboard/models/gadget_specs","dashboard/views/site/dashboard","dashboard/views/search/search","hgn!dashboard/templates/site/app","helpers/form","i18n!dashboard/nls/dashboard","i18n!nls/commons","jquery.go-popup","go-charts","swipe"],function(e,t,n,r,i,s,o,u,a,f){function N(e){var t=e.data("state");t==="closed"?I.call(this):q.call(this)}function C(){var e=t.util.store.get(x),n;if(!e){L.call(this);return}n=this.collection.get(e),n?this.collection.activate(e):(this.collection.resetActivated(),L.call(this)),this.$el.empty();return}function k(e){var t;if(typeof e=="undefined"){L.call(this);return}t=this.collection.get(e),t?this.collection.activate(e):(this.collection.resetActivated(),L.call(this))}function L(){t.util.store.set(x,ht.call(this).id)}function A(e){var t=this.$el.find(m),n={closed:"ic_ctrl_close",opened:"ic_ctrl_open"}[e],r={closed:"ic_ctrl_open",opened:"ic_ctrl_close"}[e],i={closed:f["\uc5f4\uae30"],opened:f["\ub2eb\uae30"]}[e];t.find("."+n).removeClass(n).addClass(r),t.prop("title",i),t.data("state",e)}function O(){return this.collection.length<w}function M(){O.call(this)?$("#btn-dashboard-add").closest("li").show():$("#btn-dashboard-add").closest("li").hide()}function D(){var e=ht.call(this),t=$(p);t.find("#dashboard-title").text(e.getTitle()),t.find("input[name=title]").val(e.getTitle()),$("#gadgetAddable_"+(e.canAddGadget()?"Y":"N")).prop("checked",!0),H.call(this,e),P.call(this)}function P(e){vt.call(this,e)||$(p).find("input").prop("disabled",!0)}function H(e){e.isCompanyType()?($("#gadget-addable-option-row").show(),$("#remove-option-row").hide()):($("#gadget-addable-option-row").hide(),$("#remove-option-row").show())}function B(){var e=ht.call(this),t=$(p),n={};return n.title=t.find("input[name=title]").val(),e.isCompanyType()&&(n.gadgetAddable=t.find("input[name=gadgetAddable]:checked").val()==="Y"),n}function j(){var e=$(h),t=e.find(".layout-option.on");return{boxCount:t.data("boxcount"),layout:t.data("layout")}}function F(){var e=ht.call(this),t=$(d);return t.find(".layout-option").removeClass("on"),t.find(".layout-"+e.getBoxCount()+"-"+e.getLayout()).addClass("on"),!0}function I(){A.call(this,"opened"),$(h).find(".btn-add-gadget").trigger("click")}function q(){A.call(this,"closed"),G.call(this),this.$el.find(".toolbar-btn").removeClass("on"),this.$el.find(".dashboard-option-pane").hide()}function R(e,t){U.call(this,function(){A.call(this,"opened"),$("#dashboard-option-"+t).show(),$(e.currentTarget).addClass("on")})}function U(e){dt.call(this)?e.call(this):$.goMessage(a["\uc804\uc0ac\ub300\uc2dc\ubcf4\ub4dc \uc124\uc815 \uc811\uadfc\uc624\ub958 \uba54\uc2dc\uc9c0"],"caution")}function z(){var e=this,t=$(v);(new r).fetch({success:function(n){n.each(function(e){t.find(".gadget_list").append(W(e))},e),t.data("gadget-specs",n),this.$("#dashboard-config-toolbar").show(),t.show(),A.call(e,"opened")}})}function W(e){function s(e){var n=t.config("contextRoot")+"resources/images/gadget/";return o(n)+(e.get("thumbnail")||b)}function o(e){var n=e,r=t.config("locale");return r==="ja"?n+="ja/":r==="zh_CN"||r==="zh_TW"?n+="cn/":r==="en"?n+="en/":r==="vi"&&(n+="vi/"),n}var n=$('<li class="gadget-spec"></li>'),r=s(e),i=[];return i.push('<div class="wrap">'),i.push('<a href="#" data-bypass>'),i.push('<div class="on">'+a["\ub300\uc2dc\ubcf4\ub4dc\uc5d0 \ucd94\uac00"]+"</div>"),i.push('<img src="'+r+'" alt="'+a["\ub300\uc2dc\ubcf4\ub4dc\uc5d0 \ucd94\uac00"]+'">'),i.push('<p class="txt">'+e.get("name")+"</p>"),i.push("</a>"),i.push("</div>"),n.append(i.join("\n")),n.data("spec",e.toJSON()),n}function X(){return i.LAYOUT_SPECS}function V(e,t){K.call(this,e,function(e){var n=['<li class="',c,'" data-id="',e,'"><a href="#" data-bypass>',t,"</a></li>"].join("");this.$el.find(".dashboad-tabs li.dashboard-tab").last().after(n)})}function J(){var e=ht.call(this),t=this;this.$el.find("#btn-dashboard-manage").remove(),this.$el.find("."+c).removeClass("on mgmt").each(function(n,r){var i=$(r).data("id");e.id===parseInt(i)&&($(r).addClass("on"),at.call(t)&&$(r).addClass("mgmt").append(t.configBtn))})}function K(e,t){this.editingMode?$.goConfirm(a["\ub300\uc2dc\ubcf4\ub4dc \uc804\ud658 \uc548\ub0b4"],a["\ub300\uc2dc\ubcf4\ub4dc \uc804\ud658 \ud655\uc778 \uba54\uc2dc\uc9c0"],_.bind(function(){Q.call(this,e,t)},this)):Q.call(this,e,t)}function Q(e,t){lt.call(this),this.$el.find(l).hide(),this.collection.activate(e);var n=this;gt.call(this).done(function(e){J.call(n),e.show()}),$(window).trigger("activator"),t&&_.isFunction(t)&&t.call(this,e),G.call(this),L.call(this)}function G(){$(p).find("input.error").removeClass("error").andSelf().find(".go_error").remove()}function Y(){return this.editingMode=!0,Z.call(this),gt.call(this).done(function(e){e.enableEditingMode()})}function Z(){var e=ht.call(this),t=e.hasEditableGadget(),n=e.canAddGadget();if(!t&&!n)return;var r=$(h),i=r.find("ul");r.show().find("li").show(),i.removeClass("ctrl_2mode ctrl_1mode"),this.$("div.ctrl_side").show();var s=vt.call(this,e);et(s,e),tt(s,e),nt(s,e),rt(s,e),it(s,n),!s&&!n&&!t&&ut.call(this);var o=r.find("li:visible").length;i.addClass("ctrl_"+o+"mode")}function et(e,t){var n=$(h);e?(n.find("#dashboard-title").text(t.getTitle()),n.find("input[name=title]").val(t.getTitle()),n.find("#dashboard-title-form").show()):(n.find("#dashboard-title").text(t.getTitle()),n.find("input[name=title]").val(t.getTitle()),n.find("#dashboard-title-form").hide())}function tt(e,t){var n=$(h);e?t.isCompanyType()?n.find("#gadget-addable-option-row").show():n.find("#gadget-addable-option-row").hide():n.find("#gadget-addable-option-row").hide()}function nt(e,t){var n=$(h);e?t.isCompanyType()?n.find("#remove-option-btn").hide():n.find("#remove-option-btn").show():n.find("#remove-option-btn").hide()}function rt(e,t){var n=$(h);if(!e){n.find("#btn-change-layout").hide();return}n.find(".layout-option").removeClass("on"),n.find(".layout-"+t.getBoxCount()+"-"+t.getLayout()).addClass("on")}function it(e,t){e||t||this.$("span.btn-add-gadget").hide()}function st(){this.$("li.btn-common-config").hide(),this.$("li.btn-change-layout").hide()}function ot(){this.$("li.btn-add-gadget").hide(),this.$("div.ctrl_side").hide()}function ut(){this.$("li.btn-close").hide()}function at(){var e=ht.call(this);return e.isEditable()}function ft(){at.call(this)||(this.$("li.dashboard-tab.on").removeClass("mgmt"),this.$("#btn-dashboard-manage").remove())}function lt(){if(!this.editingMode)return!1;ct.call(this).then(_.bind(function(){this.editingMode=!1,q.call(this),$(h).hide(),gt.call(this).done(function(e){e.disableEditingMode()})},this))}function ct(){var e=$.Deferred();return pt.call(this).hasNoneSavedGadgets()?$.goConfirm(a["\ub300\uc2dc\ubcf4\ub4dc \ubbf8\uc800\uc7a5 \uac00\uc82f \uc548\ub0b4"],a["\ub300\uc2dc\ubcf4\ub4dc \ubbf8\uc800\uc7a5 \uac00\uc82f \ud655\uc778 \uba54\uc2dc\uc9c0"],_.bind(function(){e.resolve()},this)):e.resolve(),e}function ht(){return this.collection.getActiveDashboard()}function pt(){return i.getInstanceById(ht.call(this).id)}function dt(){var e=ht.call(this);return vt.call(this,e)?!0:e.canAddGadget()?!0:!1}function vt(e){var n=e||ht.call(this);return n.isUserType()?!0:t.session("dashboardAdmin")?!0:!1}function mt(e,t){return e.preventDefault(),_.isFunction(t)&&t.call(this,e),!1}function gt(){return i.loadTo(this.$el,ht.call(this))}function yt(e){return i.forceLoadTo(this.$el,e)}var l=".go-dashboard",c="dashboard-tab",h="#dashboard-config-toolbar",p="#dashboard-option-common",d="#dashboard-option-layout",v="#dashboard-option-gadget",m=".btn-add-gadget",g=3,y=2,b="gadget_bbs.png",w=5,E=1,S=32,x=t.session("id")+"-selected-dashboard",T;return T=e.View.extend({className:"go-dashboard-app",editingMode:!1,events:{"click .dashboard-tab > a":"_changeDashboard","click #btn-dashboard-add":"_addDashboard","click #btn-dashboard-manage":"_setEditMode","click #dashboard-config-toolbar .btn-common-config":"_openCommonConfigPane","click #dashboard-config-toolbar .btn-change-layout":"_openLayoutPane","click #dashboard-config-toolbar .btn-add-gadget":"_toggleAddGadgetPane","click #dashboard-config-toolbar #btn-close":"_setRunMode","click #dashboard-config-toolbar .btn-toggle-config":"_toggleConfigPane","click .gadget-spec a":"_addGadget","click #dashboard-title":"_toggleTitleEditForm","click #dashboard-title-form":"_toggleTitleEditForm","click #dashboard-title-undo":"_toggleTitleEditForm","click #dashboard-title-edit":"_saveDashBoardTitle","click #remove-option-btn":"_removeDashboard","click #gadget-addable-option-row":"_openGadgetAddablePopup","click #btn-change-layout .layout-option":"_changeLayoutOption","click #layer_alarm_top .btn_layer_x":"_closeAlarmLayer","click .btn-empty-add-gadget":"_emptyAddGadgetPane"},initialize:function(e){this.collection||(this.collection=new n),this.editingMode=!1,this.listenTo(this.collection,"reset",this.render),this.reset();var t='<span id="btn-dashboard-manage" class="ic_dashboard2 ic_mgmt_t" title="'+a["\ub300\uc2dc\ubcf4\ub4dc \uad00\ub9ac"]+'">'+'<a href="#" data-bypass></a>'+"</span>";this.configBtn=Hogan.compile(t).render()},render:function(){C.call(this),this.$el.append(o({dashboards:this.collection.toJSON(),layout_specs:X(),label:{add:a["\ub300\uc2dc\ubcf4\ub4dc \ucd94\uac00"],manage:a["\ub300\uc2dc\ubcf4\ub4dc \uad00\ub9ac"],normal_config:a["\uc77c\ubc18\uc124\uc815"],layout:a["\ub808\uc774\uc544\uc6c3"],add_gadget:a["\uac00\uc82f\ucd94\uac00"],close_config:a["\ud3b8\uc9d1\ub2eb\uae30"],add_gaget_accept:a["\uac00\uc82f \ucd94\uac00 \ud5c8\uc6a9"],open:f["\uc5f4\uae30"],name:f["\uc774\ub984"],permit_add_gadget:a["\uac00\uc82f \ucd94\uac00 \ud5c8\uc6a9"],permission:f["\ud5c8\uc6a9"],deny_permission:f["\ud5c8\uc6a9\ud558\uc9c0 \uc54a\uc74c"],remove:f["\uc0ad\uc81c"],save:f["\uc800\uc7a5"],cancel:f["\ucde8\uc18c"],close:f["\ub2eb\uae30"],edit:f["\uc218\uc815"],complete:f["\uc644\ub8cc"],edit_complete:f["\uc218\uc815\uc644\ub8cc"],config:f["\ud3b8\uc9d1"]},msg:{about_gadget_permission:a["\uac00\uc82f \ucd94\uac00 \ud5c8\uc6a9 \uc124\uba85"]},dday:function(){var e="";return t.session().restrictCompanyPeriodEnd!=null&&(e="D-"+t.util.getDdayDiff(t.session().restrictCompanyPeriodEnd)),e},ddaymsg:function(){var e="";return t.session().restrictCompanyPeriodEnd!=null&&(e=t.i18n(f["\uc11c\ube44\uc2a4 \uc885\ub8cc {{arg1}}\uc77c \uc804\uc785\ub2c8\ub2e4."],{arg1:t.util.getDdayDiff(t.session().restrictCompanyPeriodEnd)})),e}}));var e=this;gt.call(this).done(function(){ft.call(e)}),M.call(this);var n=new s;this.$el.find("section.search").html(n.render().el),this.$el.find(".go_dashboard_option").css({"overflow-y":"auto"}),this.checkCompanyPeriod()},checkCompanyPeriod:function(){console.log("app/home rendersession.restrictCompanyPeriodEnd="+t.session().restrictCompanyPeriodEnd);if(t.session().restrictCompanyPeriodEnd!=null){var e=t.util.getDdayDiff(t.session().restrictCompanyPeriodEnd);e<=7&&$("#layer_alarm_top").show()}},_closeAlarmLayer:function(){$("#layer_alarm_top").hide()},reset:function(){this.collection.fetch({reset:!0})},_toggleConfigPane:function(e){N.call(this,$(e.currentTarget))},_changeDashboard:function(e){var t=$(e.currentTarget).parent().data("id");return mt.call(this,e,function(e){K.call(this,t)})},_addDashboard:function(e){return mt.call(this,e,function(e){O.call(this)?this.collection.create({activated:!0,boxCount:g,layout:y},{wait:!0,success:_.bind(function(e){V.call(this,e.get("id"),e.getTitle()),M.call(this)},this)}):$.goSlideMessage(a["\ub300\uc2dc\ubcf4\ub4dc \ucd5c\ub300\uac2f\uc218 \ucd08\uacfc\uba54\uc2dc\uc9c0"],"caution")})},_removeDashboard:function(e){return mt.call(this,e,function(e){$.goCaution(a["\ub300\uc2dc\ubcf4\ub4dc \uc0ad\uc81c \uc548\ub0b4"],a["\ub300\uc2dc\ubcf4\ub4dc \uc0ad\uc81c \ud655\uc778 \uba54\uc2dc\uc9c0"],_.bind(function(){ht.call(this).destroy({success:_.bind(function(){location.reload()},this)})},this))})},_openCommonConfigPane:function(e){q.call(this),R.call(this,e,"common"),D.call(this)},_toggleTitleEditForm:function(){var e=ht.call(this),t=$(h),n=vt.call(this,e);if(!n)return!1;t.find("#dashboard-title").text(e.getTitle()),t.find("input[name=title]").val(e.getTitle()),this.$("#titleViewArea").toggle(),this.$("#titleEditArea").toggle()},_saveDashBoardTitle:function(e){function o(){var e=$(h).find("input[name=title]"),n=e.val();return n.length<E||n.length>S?(u.printError(e,t.i18n(f["0\uc790\uc774\uc0c1 0\uc774\ud558 \uc785\ub825\ud574\uc57c\ud569\ub2c8\ub2e4."],{arg1:E,arg2:S})),!1):!0}var n=this,r=$(h),i=ht.call(this);if(o()){var s={title:r.find("input[name=title]").val()};i.save(s,{success:function(e){e.activate(),n._toggleTitleEditForm(),n.$el.find("."+c+"[data-id="+e.get("id")+"] a").text(e.get("title"))}})}},_saveGadgetAddable:function(){var e=this,t=$(h),n=ht.call(this),r={gadgetAddable:t.find("input[name=gadgetAddable]:checked").val()==="Y"};n.save(r,{success:function(e){e.activate(),$.goSlideMessage(f["\ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."])}})},_openGadgetAddablePopup:function(e){var t=this;gadgetAddable=$.goPopup({pclass:"layer_normal gadgetAddable_popup",header:a["\uac00\uc82f \ucd94\uac00 \ud5c8\uc6a9"],modal:!0,width:300,contents:t._gadgetAddablePopUpTpl(),buttons:[{btext:f["\ucde8\uc18c"],btype:"cancel"},{btext:f["\uc800\uc7a5"],btype:"confirm",callback:function(e){t._saveGadgetAddable()}}],openCallback:function(){var e=ht.call(t);$("#gadgetAddable_"+(e.canAddGadget()?"Y":"N")).prop("checked",!0)},appendTarget:"#dashboard-config-toolbar",offset:{position:"relative"}}),gadgetAddable.reoffset()},_gadgetAddablePopUpTpl:function(){var e=[];return e.push('<p class="desc">'+a["\uac00\uc82f \ucd94\uac00 \ud5c8\uc6a9 \uc124\uba85"]+"</p>"),e.push('<span class="wrap_option">'),e.push('		<input id="gadgetAddable_Y" type="radio" name="gadgetAddable" value="Y"><label for="gadgetAddable_Y">'+f["\ud5c8\uc6a9"]+"</label>"),e.push("</span>"),e.push('<span class="horspace2"></span>'),e.push('<span class="wrap_option">'),e.push('		<input id="gadgetAddable_N" type="radio" name="gadgetAddable" value="N"><label for="gadgetAddable_N">'+f["\ud5c8\uc6a9\ud558\uc9c0 \uc54a\uc74c"]+"</label>"),e.push("</span>"),e.join("\n")},_openLayoutPane:function(e){q.call(this),R.call(this,e,"layout"),F.call(this)},_changeLayoutOption:function(e){if(!vt.call(this))return;$(h).find(".layout-option").removeClass("on"),$(e.currentTarget).addClass("on"),this._saveLayoutConfig()},_saveLayoutConfig:function(){var e=this,t=pt.call(this),n=j(),r=ht.call(this);t.changeLayout(n.boxCount,n.layout).done(function(){r.activate(),yt.call(e,r).done(function(e){e.enableEditingMode()})})},_cancelLayoutConfig:function(e){F.call(this),q.call(this)},_toggleAddGadgetPane:function(e){return mt.call(this,e,function(e){e.preventDefault(),U.call(this,function(){this._toggleAddGadget()})})},_emptyAddGadgetPane:function(e){Y.call(this),this._toggleAddGadget()},_toggleAddGadget:function(){var e=$(v);G.call(this),e.is(":visible")?(A.call(this,"closed"),e.hide()):e.data("gadget-specs")?(this.$("#dashboard-config-toolbar").show(),e.show(),A.call(this,"opened")):z.call(this)},_addGadget:function(e){var n=$(e.currentTarget).closest("li.gadget-spec"),r=n.data("spec"),i=pt.call(this);e.preventDefault(),dt.call(this)&&(i.addGadget(r),$.goSlideMessage(t.i18n(a["\uac00\uc82f \ucd94\uac00 \uba54\uc2dc\uc9c0"],{gadget_name:r.name})))},_setRunMode:function(e){this.$el.find(".toolbar-btn").removeClass("on"),lt.call(this)},_setEditMode:function(e){return mt.call(this,e,function(e){Y.call(this),dt.call(this)&&this.$(".btn-add-gadget").trigger("click")})}}),T})}()})();