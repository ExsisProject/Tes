define(["backbone","hogan","app","dashboard/views/search/detail_search_popup","hgn!dashboard/templates/search/search","i18n!nls/commons","jquery.go-validation"],function(e,t,n,r,i,s){var o={advanced_search:s["\uc0c1\uc138\uac80\uc0c9"],unified_search:s["\ud1b5\ud569\uac80\uc0c9"],search:s["\uac80\uc0c9"],detail:s["\uc0c1\uc138"]};return e.View.extend({events:{"click #btn-search":"searchAll","click #btn_DetailSearch":"detailPopup","keydown #search-keyword":"searchKeyEvent"},initialize:function(){this.$el.off()},render:function(){return this.$el.html(i({lang:o})),this},searchAll:function(){var e=this.$("#search-keyword"),t=e.val();t=$.trim(t);if(t==""){$.goError(s["\uac80\uc0c9\uc5b4\ub97c \uc785\ub825\ud558\uc138\uc694."]),e.focus();return}if(!$.goValidation.isCheckLength(2,64,t)){$.goMessage(n.i18n(s["0\uc790\uc774\uc0c1 0\uc774\ud558 \uc785\ub825\ud574\uc57c\ud569\ub2c8\ub2e4."],{arg1:"2",arg2:"64"}));return}if($.goValidation.isInValidEmailChar(t)){$.goMessage(s["\uba54\uc77c \uc0ac\uc6a9 \ubd88\uac00 \ubb38\uc790"]);return}var r={stype:"simple",keyword:t,offset:5,page:0,fromDate:GO.util.toISO8601("1970/01/01"),toDate:GO.util.toISO8601(new Date),searchTerm:"all"};this.search(r)},search:function(e){n.router.navigate("unified/search?"+this.serializeObj(e),!0)},serializeObj:function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},detailPopup:function(e){var t=this,n=new r,i=$(e.currentTarget).offset();this.searchPopup=$.goSearch({modal:!0,header:s["\uc0c1\uc138\uac80\uc0c9"],offset:{top:parseInt(i.top+30,10),right:7},callback:function(){n.validate()&&t.search(n.getSearchParam())}}),this.searchPopup.find(".content").html(n.el),n.render()},searchKeyEvent:function(e){var t=this;this.clearTimeOut=setTimeout(function(){e.keyCode==13&&t.searchAll()},200)}})});