define(["jquery","backbone","app","hgn!dashboard/templates/search/side","i18n!nls/commons","i18n!admin/nls/admin","i18n!dashboard/nls/dashboard"],function(e,t,n,r,i,s,o){var u={home:s["\ud648"],search:o["\ud1b5\ud569\uac80\uc0c9"],all_period:o["\uae30\uac04\uc804\uccb4"],all:i["\uc804\uccb4"],aweek:o["\ucd5c\uadfc 1\uc8fc\uc77c"],twoweeks:o["\ucd5c\uadfc 2\uc8fc\uc77c"],amonth:o["\ucd5c\uadfc 1\uac1c\uc6d4"],gnbTitle:i["\uac80\uc0c9"]};return t.View.extend({el:"#side",initialize:function(){this.$el.off(),this.param=GO.router.getSearch()},events:{"click ul.search_period_select li":"getSearchTerm","click li.app a":"moveAppSearch"},render:function(){this.$el.html(r({lang:u})),this.setAppSide(),this.param.appName==undefined?e("#unifiedSearch").parent("li").addClass("on"):e("#"+this.param.appName).parent("li").addClass("on"),this.compareSearchTerm()},getSearchTerm:function(t){var n=e(t.currentTarget).attr("id"),r=GO.util.shortDate(new Date),i=GO.util.toISO8601("1970/01/01"),s=GO.util.toISO8601(new Date);n=="aweek"?(i=GO.util.calDate(r,"weeks",-1),this.param.searchTerm="1w"):n=="twoweeks"?(i=GO.util.calDate(r,"weeks",-2),this.param.searchTerm="2w"):n=="amonth"?(i=GO.util.calDate(r,"months",-1),this.param.searchTerm="1m"):this.param.searchTerm="all",this.param.fromDate=i,this.param.toDate=s,this.param.stype="detail",this.param.appName==undefined?this.search():this.appSearch()},search:function(){delete this.param.appName,this.param.offset=5,n.router.navigate("unified/search?"+this.serializeObj(this.param),!0)},appSearch:function(){this.param.offset=10,n.router.navigate("unified/app/search?"+this.serializeObj(this.param),!0)},serializeObj:function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},moveAppSearch:function(t){if(e(t.currentTarget).attr("id")=="unifiedSearch"){this.param.offset=5,this.param.page=0,delete this.param.appName,n.router.navigate("unified/search?"+this.serializeObj(this.param),!0);return}this.param.appName=e(t.currentTarget).attr("id"),this.param.offset=10,this.param.page=0,n.router.navigate("unified/app/search?"+this.serializeObj(this.param),!0)},setAppSide:function(){var e=[{appName:"mail",appClass:"ic_type_mail"},{appName:"webfolder",appClass:"ic_type_file"},{appName:"contact",appClass:"ic_type_contact"},{appName:"calendar",appClass:"ic_type_cal"},{appName:"board",appClass:"ic_type_bbs"},{appName:"community",appClass:"ic_type_comm"},{appName:"approval",appClass:"ic_type_approval"},{appName:"report",appClass:"ic_type_report"},{appName:"task",appClass:"ic_type_task"},{appName:"todo",appClass:"ic_type_todo"},{appName:"works",appClass:"ic_type_works"},{appName:"docs",appClass:"ic_type_docs"}];_.each(GO.config("menuList"),function(t){var n=_.findWhere(e,{appName:t.appName});n&&this.$("nav.side_menu ul").append("<li class='app'><a id='"+t.appName+"'>"+"<span class='ic_gnb "+n.appClass+"'></span>"+t.name+"<span id='"+t.appName+"TotalCnt'></span>"+"</a>"+"</li>")},this)},compareSearchTerm:function(){var t=this.param.searchTerm;e(".search_period_select").removeClass("on"),t=="1w"?e("#aweek").addClass("on"):t=="2w"?e("#twoweeks").addClass("on"):t=="1m"?e("#amonth").addClass("on"):t=="all"&&e("#all").addClass("on")}})});