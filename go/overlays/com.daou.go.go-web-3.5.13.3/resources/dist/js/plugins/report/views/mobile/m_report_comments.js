(function(){define(["jquery","backbone","app","hogan","i18n!report/nls/report","i18n!nls/commons","views/mobile/header_toolbar","hgn!report/templates/mobile/m_report_comments","report/models/report","report/models/report_folder","m_comment","attach_file","GO.util","GO.m.util"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h={list:s["\ubaa9\ub85d"],commentCount:i["\uc774 \ubcf4\uace0\uc758 \ub313\uae00"],modify:s["\uc218\uc815"],remove:s["\uc0ad\uc81c"],removeDesc:i["\ud574\ub2f9 \ubcf4\uace0\uc11c\ub97c \uc0ad\uc81c \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"]},p=t.View.extend({el:"#content",events:{"vclick div.tool_bar a.list":"list","vclick div.tool_bar a.comment":"comment","vclick div.tool_bar a.modify":"modify","vclick div.tool_bar a.remove":"remove"},initialize:function(e){var t=this.options.reportId,r=this;this.$el.off(),this.model=a.get(t),this.folder=(new f).set(this.model.get("folder")),n.EventEmitter.off("change:comment"),n.EventEmitter.on("common","change:comment",_.bind(function(e){this.$el.find("header span.count").text("( "+e+" )")},this))},render:function(){return o.render({title:this.makeViewTitle(),isClose:!0}),this.$el.addClass("report"),this.makeContent(),this.$el},makeViewTitle:function(){var e="";return this.folder.isPeriodic()?e=this.model.getSeriesStr():e=this.folder.get("name"),e},reload:function(){this.model.fetch({async:!1}),this.folder=(new f).set(this.model.get("folder")),this.makeContent()},makeContent:function(){var t=this;this.$el.html(u({data:e.extend({},this.model.toJSON(),{createdAtBasicDate:n.util.basicDate(this.model.get("createdAt")),isPeriodic:t.folder.isPeriodic()}),lang:h}));var r=l.create({el:"#comment_list",type:"report",typeId:this.model.get("id")});this.commentCount=r.collection.length},list:function(){var e="";this.folder.isPeriodic()?e="/report/series/"+this.model.series("id"):e="/report/folder/"+this.folder.get("id")+"/reports",n.router.navigate(e,{trigger:!0})},remove:function(){confirm(h.removeDesc)&&(this.folder.isPeriodic()||this.model.destroy({success:function(){var e="report/folder/"+self.options.folderId+"/reports";n.router.navigate(e,{trigger:!0})}}))},makeTitle:function(){var e="";return this.folder.isPeriodic()?e=this.folder.get("name")+" > "+this.model.getSeriesStr():e=this.folder.get("name")+" > "+this.model.get("name"),e}},{__instance__:null,create:function(e){return this.__instance__=new this.prototype.constructor({packageName:e}),this.__instance__}});return p})}).call(this);