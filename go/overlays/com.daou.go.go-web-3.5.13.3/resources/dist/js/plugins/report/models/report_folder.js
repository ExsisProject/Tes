define(["backbone","i18n!report/nls/report","i18n!admin/nls/admin"],function(e,t,n){function i(e,t){var n=[];return data="",$.each(e.get(t).nodes,function(){n.push({id:this.nodeId,title:this.nodeValue,options:{removable:!0}})}),n}var r=e.Model.extend({urlRoot:GO.contextRoot+"api/report/folder",isOpen:function(){return this.get("publicOption")==="OPEN"},isReporterOpen:function(){return this.get("publicOption")==="CLOSED"},isPrivate:function(){return this.get("publicOption")==="PRIVATE"},isMemberWrite:function(){var e=!1;return $.each(this.get("reporter").nodes,function(t,n){if(n.nodeType=="department")return e=!0,!1}),e},isDescendantWrite:function(){var e=!1;return $.each(this.get("reporter").nodes,function(t,n){if(n.nodeType=="subdepartment")return e=!0,!1}),e},isSpecifiedWrite:function(){return!this.isMemberWrite()&&!this.isDescendantWrite()},isPeriodic:function(){return this.get("type")==="PERIODIC"},isOccasional:function(){return this.get("type")==="OCCASIONAL"},reportersNameTag:function(){return i(this,"reporter")},referrersNameTag:function(){return i(this,"referrer")},adminsNameTag:function(){return i(this,"admin")},isActive:function(){return this.get("status")=="ACTIVE"},isInactive:function(){return this.get("status")=="INACTIVE"},reporterNames:function(){if(this.get("reporter").nodes.length!=0){var e=[];return $.each(this.get("reporter").nodes,function(n,r){var i=r.nodeValue;r.nodeType=="subdepartment"&&(i+=" ("+t["\ud558\uc704 \ubd80\uc11c\uc6d0 \ud3ec\ud568"]+" ) "),e.push(i)}),e.join(", ")}return t["\uc5c6\uc74c"]},referrerNames:function(){if(this.get("referrer").nodes.length!=0){var e=[];return $.each(this.get("referrer").nodes,function(t,r){r.nodeType=="subdepartment"?e.push(r.nodeValue+" ("+n["\ud558\uc704 \ubd80\uc11c \ud3ec\ud568"]+")"):e.push(r.nodeValue)}),e.join(", ")}return t["\uc5c6\uc74c"]},adminNames:function(){if(this.get("admin").length!=0){var e=[];return $.each(this.get("admin").nodes,function(t,n){e.push(n.nodeValue)}),e.join(", ")}return t["\uc5c6\uc74c"]},recurrenceJSON:function(){}},{get:function(e){var t=new r;return t.set({id:e},{silent:!0}),t.fetch({async:!1}),t},init:function(){var e=new r,t=GO.session();return e.set({id:null,name:"",description:"",publicOption:"OPEN",reporter:{nodes:[{nodeId:"",nodeType:"department"}]},form:{content:""},referrer:{nodes:[]},admin:{nodes:[{nodeId:t.id,nodeType:"user",nodeValue:t.name+" "+t.position}]},recurrence:{FREQ:"DAILY",INTERVAL:1,BYDAY:"",BYMONTHDAY:"",BYSETPOS:""},type:"PERIODIC",formFlag:!1}),e}});return r});