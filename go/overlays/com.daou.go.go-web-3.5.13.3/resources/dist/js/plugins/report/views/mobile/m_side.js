(function(){define(["jquery","backbone","app","hgn!report/templates/mobile/m_side","i18n!nls/commons","i18n!report/nls/report","report/collections/left_menu","components/favorite/collections/favorite"],function(e,t,n,r,i,s,o,u){var a={deptReport:s["\ubd80\uc11c\ubcc4 \ubcf4\uace0\uc11c"],favorite:i["\uc990\uaca8\ucc3e\uae30"],confirm:i["\ud655\uc778"],cancel:i["\ucde8\uc18c"]},f=t.View.extend({id:"reportSideMenu",events:{"vclick a[data-navigate]":"goFolder"},initialize:function(e){this.options=e||{},this.leftMenuCollection=null,this.favoriteCollection=null},render:function(){this.packageName=this.options.packageName,this.setSideApp();var t=this,n=e.Deferred();return e.when(this.getLeftMenuCollection(),this.getFavoriteCollection()).then(function(){t.$el.html(r({data:t.leftMenuCollection.toJSON(),isPrivate:function(){return this.publicOption!="OPEN"},hasFavorite:t.favoriteCollection.length==0?!1:!0,hasData:t.leftMenuCollection.length==0?!1:!0,favorite:t.favoriteCollection.toJSON(),lang:a})),n.resolveWith(t,[t])}),n},getLeftMenuCollection:function(){var t=this,n=e.Deferred(),r=o.create();return r.fetch({async:!0,success:function(e){t.leftMenuCollection=e,n.resolve()}}),n},getFavoriteCollection:function(){var t=e.Deferred(),r=this,i=u.create({url:n.config("contextRoot")+"api/report/folder/favorite"});return i.fetch({data:{offset:1e3},async:!1,reset:!0,success:function(e){r.favoriteCollection=e,t.resolve()}}),t},goFolder:function(t){var r=e(t.currentTarget),i=r.attr("data-navigate"),s="report/folder/"+i+"/reports";n.router.navigate(s,{trigger:!0})},setSideApp:function(){e("body").data("sideApp",this.packageName)}},{__instance__:null,create:function(e){return this.__instance__=new this.prototype.constructor({packageName:e}),this.__instance__}});return f})}).call(this);