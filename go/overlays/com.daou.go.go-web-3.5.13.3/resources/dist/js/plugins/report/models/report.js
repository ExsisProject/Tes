define(["backbone","i18n!report/nls/report","GO.util"],function(e,t){var n=e.Model.extend({urlRoot:GO.contextRoot+"api/report",save:function(t,r){if(n.__lockFlag__)return;return ajaxBeforeSend=r.hasOwnProperty("beforeSend")?r.beforeSend:function(){},ajaxComplete=r.hasOwnProperty("complete")?r.complete:function(){},r.beforeSend=function(){ajaxBeforeSend.apply(undefined,arguments),n.__lockFlag__=!0},r.complete=function(){ajaxComplete.apply(undefined,arguments),n.__lockFlag__=!1},e.Model.prototype.save.call(this,t,r)},submittedAtBasicDate:function(){return GO.util.basicDate(this.get("submittedAt"))},createdAtBasicDate:function(){return GO.util.basicDate(this.get("createdAt"))},attachesCount:function(){return this.get("attaches").length},setAttacheUrl:function(){var e=this.get("id");$.each(this.get("attaches"),function(){this.url=GO.contextRoot+"api/report/"+e+"/download/"+this.id})},setAttacheSizeByKb:function(){$.each(this.get("attaches"),function(){this.sizeByKb=GO.util.getHumanizedFileSize(this.size)})},attachesSize:function(){var e=this.get("attaches"),t=0;return e.length==0?t:($.each(e,function(e,n){t+=parseFloat(n.size)}),t)},getSeriesStr:function(){var e=GO.util.parseOrdinaryNumber(this.get("series").series,GO.config("locale"));return GO.i18n(t["\uc81c {{arg1}}\ud68c\ucc28"],{arg1:e})}},{init:function(){return new n},get:function(e,t){var r=new n;return r.set({id:e},{silent:!0}),r.fetch({async:!1,error:function(e,t){if(GO.util.isMobile())GO.util.linkToErrorPage(t);else{var n=JSON.parse(t.responseText);GO.util.error(n.code,n.code==="500"?{}:{msgCode:"400-report"})}}}),r.setAttacheUrl(),r},__lockFlag__:!1});return n});