(function(){define(function(require){var e=require("jquery"),t=require("backbone"),n=require("app"),r=require("text!report/templates/mobile/m_search_result.html"),i=require("text!report/templates/mobile/m_search_result_unit.html"),s=require("views/mobile/m_search_common_result"),o=require("i18n!report/nls/report"),u=require("i18n!nls/commons");require("GO.util");var a=null,f={"\uac80\uc0c9\uacb0\uacfc\uc5c6\uc74c":u["\uac80\uc0c9\uacb0\uacfc\uc5c6\uc74c"],"\uac80\uc0c9\uacb0\uacfc":u["\uac80\uc0c9\uacb0\uacfc"]},l=function(){return this.seriesNo?n.i18n(o["\uc81c {{arg1}}\ud68c\ucc28"],{arg1:this.seriesNo}):""},c=function(){return n.util.snsDate(this.submittedAt)},h=n.BaseCollection.extend({url:function(){return"/api/search/report"}}),p=t.View.extend({el:"#searchResultWrap",events:{"vclick li[data-reportid]":"_getContent"},initialize:function(e){var t=this;this.options=e,this.lastPage=!1,this.$el.off(),this.collection=new h,s.set({collection:this.collection,searchOptions:this.options,renderListFunc:function(e){t._renderContents(e)},renderListMoreFunc:function(e){t._moreList(e)}})},render:function(){return s.fetch(),this.el},_renderContents:function(){var t=this.collection;this.$el.html(Hogan.compile(r).render({lang:f,dataset:t.toJSON(),resultCount:t.page.total,parseSeriesNo:l,dateParse:c},{partial:i})),e("#detailSearchToggle").removeClass("on"),this._showResultWrap()},_moreList:function(e){var t=e.toJSON();this.$el.find("ul:first").append(Hogan.compile(i).render({lang:f,dataset:t,parseSeriesNo:l,dateParse:c}))},_showResultWrap:function(){e("#simpleSearchWrap").hide(),e("#detailSearchWrap").hide(),e("#searchResultWrap").show()},_getContent:function(t){t.preventDefault();var r=e(t.currentTarget),i=r.attr("data-reportid"),s=r.attr("data-seriesid"),o=r.attr("data-folderid"),u=r.attr("data-reporttype"),a="report/folder/"+o+"/report/"+i;u=="PERIODIC"&&(a="report/series/"+s+"/report/"+i),n.router.navigate(a,{trigger:!0})}});return{render:function(e){return a=new p(e),a.render()}}})}).call(this);