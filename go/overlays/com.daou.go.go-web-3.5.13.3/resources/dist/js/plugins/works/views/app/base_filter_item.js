define("works/views/app/base_filter_item",function(require){var e=require("i18n!nls/commons"),t=require("i18n!works/nls/works"),n=require("works/components/filter/collections/filter_conditions"),r=require("works/components/filter/views/filter"),i=require("hgn!works/templates/app/_filter_manager"),s=require("hgn!works/templates/app/base_filter_item");return Backbone.View.extend({tagName:"tr",events:{"click [data-edit-condition]":"_onClickEditCondition","click [data-delete]":"_onClickDelete","blur input[data-attr]":"_onBlur","keyup input[data-attr]":"_onKeyup"},initialize:function(e){e=e||{},this.fields=e.fields,this.conditions=new n(this.model.get("conditions")),this.conditions.mergeFromFields(this.fields.toJSON()),this.appletId=e.appletId,this.filters=e.filters,this.filterView=new r({template:i,conditions:this.conditions,appletId:this.appletId,fields:this.fields,filters:this.filters,store:!1}),this.filterView.render()},render:function(){return this.$el.html(s({model:this.model.toJSON(),conditions:this.conditions.getLabelTexts()||t["\uc870\uac74 \uc5c6\uc74c"]})),this},_onClickDelete:function(){this.$el.trigger("removeFilterItem"),this.model.destroy(),this.remove()},_onClickEditCondition:function(){this._renderFilterPopup()},_onBlur:function(e){var t=$(e.currentTarget),n=t.attr("data-attr");this.model.set(n,$.trim(t.val()))},_onKeyup:function(e){var n=$(e.currentTarget),r=n.val(),i=/[^\u3131-\u314e\uac00-\ud7a3a-zA-Z0-9]/gi;i.test(r)&&($.goMessage(GO.i18n(t["{{arg0}}\ub9cc \uc785\ub825\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."],{arg0:t["\ud55c\uae00, \uc601\ubb38, \uc22b\uc790"]})),n.val(r.replace(i,"")))},_renderFilterPopup:function(){var n=$.goPopup({pclass:"layer_normal layer_filterAdd",header:t["\ud544\ud130 \uc870\uac74"],modal:!1,buttons:[{btype:"normal",btext:e["\ud655\uc778"],autoclose:!1,callback:$.proxy(function(e){this.conditions=this.filterView.conditions,this.model.set("conditions",this.filterView.conditions.toJSON()),this.model.set("query",this.filterView.conditions.getSearchQueryString()),this._renderConditionLabel(),e.close()},this)}]});n.find(".content").addClass("go_renew").html(this.filterView.el),this.filterView.render(),n.reoffset()},_renderConditionLabel:function(){this.$("[data-condition-label]").text(this.conditions.getLabelTexts())}})});