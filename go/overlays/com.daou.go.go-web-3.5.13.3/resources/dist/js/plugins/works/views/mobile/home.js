define("works/views/mobile/home",function(require){var e=require("works/home/views/base_home"),t=require("hgn!works/templates/mobile/home"),n=require("views/mobile/header_toolbar");return e.extend({events:_.extend(e.prototype.events,{"vclick [data-el-prev]":"_onClickPrev","vclick #btn-search":"_searchAppName","keyup #appName":"_onKeyupSearch","click #appNameDelete":"_deleteSearchText"}),render:function(){return this.$el.html(t({lang:this.lang})),this.$("#content").removeClass("list_type").addClass("content_page bg_card_type go_works_home card_type"),this.$toggleLayoutEl=this.$("#content"),this._toggleLayout(this.viewType),e.prototype.render.apply(this,arguments),this},_onSyncApplets:function(){e.prototype._onSyncApplets.apply(this,arguments),this._renderTitle();var t=this.applets.getType()==="all"||this.applets.getType()==="search";t||(this.$("#appName").val(""),this.$("section.search_wrap").hide())},_renderTitle:function(){var e=this.applets.getType(),t=e==="folder";if(t){var r=this.applets.getFolderId(),i=this.folders.findWhere({id:parseInt(r)});this.$("[data-el-folder-name]").text(),n.render({title:i.get("name"),isPrev:!0}),this.$("[app-name-search-option]").hide()}else n.render({title:"Works",isList:!0,isHome:!0,isSearch:!0});this.$("#titleToolbar").toggle(!t)},_onClickPrev:function(){this.applets.setType("all"),this.applets.fetch(),window.history.back()},_toggleLayout:function(){var t=e.prototype._toggleLayout.apply(this,arguments),n={card:"list",list:"card"};this.$("[data-toggle-layout] > i").removeClass("ic_list").removeClass("ic_card").addClass("ic_"+n[t])},_onKeyupSearch:function(e){e.preventDefault();if(e.keyCode!=13&&!_.isEmpty($("#appName").val()))return;this._searchAppName()},_searchAppName:function(){var e=$("#appName").val().trim();_.isEmpty(e)?this.applets.setType("all"):this.applets.setType("search"),this.applets.setKeyword(e),this.applets.fetch({reset:!0})},_deleteSearchText:function(e){e.preventDefault(),$("#appName").val(""),this._searchAppName()}})});