define("works/views/app/base_filter_group_item",function(require){var e=require("i18n!nls/commons"),t=require("i18n!works/nls/works"),n=require("views/circle"),r=require("hgn!works/templates/app/base_filter_group_item");return Backbone.View.extend({tagName:"tr",events:{"click [data-delete]":"_onClickDelete","click [data-edit-circle]":"_onClickCirclePopup","blur input[data-attr]":"_onBlur"},initialize:function(){this.isDefault=_.isUndefined(this.model.get("circle"))},render:function(){return this.$el.html(r({circle:this.model.get("circle"),isDefault:this.isDefault,model:this.model.toJSON()})),this._renderCircleLabel(),GO.util.bindVirtualKeyEvent(this.$('[data-attr="rule"]')),this},_onClickDelete:function(){this.model.destroy(),this.remove()},_onClickCirclePopup:function(){this._renderCirclePopup()},_onBlur:function(e){var t=$(e.currentTarget),n=t.attr("data-attr");this.model.set(n,$.trim(t.val()))},_renderCirclePopup:function(){var r=new n({isAdmin:!1,nodeTypes:["user","department","position","grade","duty","usergroup"],circleJSON:this.model.get("circle")}),i=$.goPopup({pclass:"layer_normal layer_filterAdd",header:t["\ud544\ud130 \uc870\uac74 \ub300\uc0c1 \uc124\uc815"],contents:"<span data-circle></span>",modal:!1,buttons:[{btype:"normal",btext:e["\ud655\uc778"],callback:$.proxy(function(){this.model.set("circle",r.getData()),this._renderCircleLabel()},this)}]});r.setElement(i.find("[data-circle]")),r.render()},_renderCircleLabel:function(){this.$("[data-circle-column]").text(this._parseCircleLabel())},_parseCircleLabel:function(){var t=this.model.get("circle");return this.isDefault?e["\uc804\uccb4 \uc0ac\uc6a9\uc790"]:!this.isDefault&&_.isEmpty(t.nodes)?e["\ub300\uc0c1 \uc5c6\uc74c"]:_.map(t.nodes,function(t){return t.nodeValue+(t.nodeType==="subdepartment"?" ("+e["\ud558\uc704\ubd80\uc11c\ud3ec\ud568"]+")":"")},this).join(", ")}})});