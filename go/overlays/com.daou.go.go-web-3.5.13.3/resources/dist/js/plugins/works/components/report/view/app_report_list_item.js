define("works/components/report/view/app_report_list_item",function(require){var e=require("components/backdrop/backdrop"),t=require("i18n!works/nls/works"),n=require("i18n!nls/commons"),r={"\uc0ad\uc81c":n["\uc0ad\uc81c"],"\ubcf5\uc0ac":n["\ubcf5\uc0ac"],"\ub9ac\ud3ec\ud2b8 \ub9cc\ub4e4\uae30":t["\ub9ac\ud3ec\ud2b8 \ub9cc\ub4e4\uae30"],"\ub9ac\ud3ec\ud2b8":t["\ub9ac\ud3ec\ud2b8"],"\uacf5\uc720\ub428":t["\uacf5\uc720\ub428"]},i=require("hgn!works/components/report/template/report_list_item"),s=Hogan.compile(['<div class="array_option array_works" style="left:auto;">','<ul class="array_type">','<li el-copy><span class="ic_board ic_w_edit"></span><span class="txt">{{{\ub9ac\ud3ec\ud2b8}}} {{{\ubcf5\uc0ac}}}</span></li>','<li el-delete><span class="ic_board ic_w_del"></span><span class="txt">{{{\uc0ad\uc81c}}}</span></li>',"</ul>","</div>"].join(""));return e.extend({initialize:function(e){this.appletId=e.appletId,this.isAdmin=e.isAdmin,this.item=e.item,this.content=e.content},render:function(){var e=this;this.item.lang=r,this.content.append(i(this.item)),this.$el=$(this.content).children(":last"),this.$("[el-favorite]").on("click",function(t){e._toggleFavorite(t)}),this.$("[el-detail]").on("click",function(t){e._onClickDetail(t)});if(!this.isAdmin){this.$("[el-report-setting]").hide();return}this.$("[el-report-setting]").on("click",function(t){e._onClickSetting(t)})},_onClickSetting:function(e){this.settingLayer||this._initBackdrop(e)},_onClickCopy:function(e){var r=GO.contextRoot+"api/works/applet/"+this.appletId+"/report/"+this.item.id+"/copy",i=$.ajax({contentType:"application/json",dataType:"json",type:"POST",url:r});i.done(function(e){$.goSlideMessage(t["\ubcf5\uc0ac\uc5d0 \uc131\uacf5\ud588\uc2b5\ub2c8\ub2e4"]),$("a[el-create]").trigger("refresh")}),i.fail(function(e,t,r){var i=JSON.parse(e.responseText);!_.isUndefined(i)&&i.message?$.goAlert(i.message):$.goAlert(n["500 \uc624\ub958\ud398\uc774\uc9c0 \ud0c0\uc774\ud2c0"])})},_onClickDelete:function(e){var r=GO.contextRoot+"api/works/applet/"+this.appletId+"/report/"+this.item.id,i=$.ajax({contentType:"application/json",dataType:"json",type:"DELETE",url:r});i.done(function(e){$.goSlideMessage(t["\uc0ad\uc81c\uc5d0 \uc131\uacf5\ud588\uc2b5\ub2c8\ub2e4"]),$("a[el-create]").trigger("refresh")}),i.fail(function(e,t,r){var i=JSON.parse(e.responseText);!_.isUndefined(i)&&i.message?$.goAlert(i.message):$.goAlert(n["500 \uc624\ub958\ud398\uc774\uc9c0 \ud0c0\uc774\ud2c0"])})},_toggleFavorite:function(e){var r="POST",i=this;i.item.favorite&&(r="DELETE");var s=GO.contextRoot+"api/works/applet/"+this.appletId+"/report/"+this.item.id+"/favorites",o=this,u=$.ajax({contentType:"application/json",dataType:"json",type:r,url:s});u.done(function(e){r=="DELETE"?($.goSlideMessage(t["\uc990\uaca8\ucc3e\uae30\uac00 \ud574\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4"]),$("a[el-create]").trigger("refresh")):($.goSlideMessage(t["\uc990\uaca8\ucc3e\uae30\uac00 \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4"]),$("a[el-create]").trigger("refresh"))}),u.fail(function(e,t,r){var i=JSON.parse(e.responseText);!_.isUndefined(i)&&i.message?$.goAlert(i.message):$.goAlert(n["500 \uc624\ub958\ud398\uc774\uc9c0 \ud0c0\uc774\ud2c0"])})},_onClickDetail:function(e){GO.router.navigate("works/applet/"+this.appletId+"/report/"+this.item.id,!0)},_initBackdrop:function(e){this.settingLayer=$(s.render(r)),this.$(e.target).append(this.settingLayer),this.backdropToggleEl=this.settingLayer,this.bindBackdrop(),this.linkBackdrop(this.$("[el-report-setting]"));var t=this;$("li[el-copy]").on("click",function(e){t._onClickCopy(e)});if(!this.item.writer){$("li[el-delete]").hide();return}$("li[el-delete]").on("click",function(e){$.goConfirm(n["\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"],"",function(){t._onClickDelete(e)})})},changeFavorite:function(){this.render()}})});