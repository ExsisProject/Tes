define("works/components/masking_manager/masking_manager",function(require){var e=require("i18n!nls/commons"),t=require("i18n!works/nls/works"),n={"\ud398\uc774\uc9c0 \uc81c\ubaa9":t["\ub9c8\uc2a4\ud0b9 \uc124\uc815"],"\ud398\uc774\uc9c0 \uc124\uba85":t["\ub9c8\uc2a4\ud0b9 \uc124\uc815 \uc124\uba85"],"\uc571 \ub0b4 \uc0ac\uc6a9\ud558\ub294 \ud56d\ubaa9":t["\uc571 \ub0b4 \uc0ac\uc6a9\ud558\ub294 \ud56d\ubaa9"],"\ub9c8\uc2a4\ud0b9 \ud560 \ud56d\ubaa9":t["\ub9c8\uc2a4\ud0b9 \ud560 \ud56d\ubaa9"],"\ud56d\ubaa9 \uc870\ud68c \ud5c8\uc6a9 \ub300\uc0c1":t["\ud56d\ubaa9 \uc870\ud68c \ud5c8\uc6a9 \ub300\uc0c1"]},r=require("works/components/masking_manager/models/masking"),i=require("works/collections/fields"),s=require("views/circle"),o=require("works/views/app/base_setting"),u=require("hgn!works/components/masking_manager/templates/masking_manager"),a=Hogan.compile('<span class="option_wrap"><input type="checkbox" id="{{field.cid}}" {{#field.isChecked}}checked{{/field.isChecked}}><label for="{{field.cid}}">{{field.label}}</label></span>');return o.extend({className:"go_content go_renew go_works_home app_temp",events:_.extend(o.prototype.events,{}),circleView:null,initialize:function(e){this.lang=n,o.prototype.initialize.call(this,e),this.fields=new i([],{appletId:this.appletId}),this.fields.fetch(),this.masking=new r({appletId:this.appletId},{useFilter:!1}),this.masking.fetch()},render:function(){return o.prototype.render.call(this),this.$("[el-content]").html(u({lang:n,fields:this.fields.toJSON()})),$.when(this.masking.deferred,this.fields.deferred).then(_.bind(function(){this.fields=this.fields.getMaskableFields(),this._renderFields(),this._renderCircle()},this)),this},_renderFields:function(){this.fields.each(function(e){_.contains(this.masking.get("fieldCids"),e.get("cid"))&&e.set("isChecked",!0),console.log(e.toJSON()),this.$("[data-el-maskable-fields]").append(a.render({field:e.toJSON()}))},this)},_renderCircle:function(){this.circleView=new s({isAdmin:!1,circleJSON:this.masking.get("accessCircle"),nodeTypes:["user"]}),this.$("#accessUser").html(this.circleView.render().el)},_getCheckedFieldCids:function(){return _.map(this.$("[data-el-maskable-fields]").find('input[type="checkbox"]:checked'),function(e){return $(e).attr("id")})},_onClickSave:function(){this.masking.save({fieldCids:this._getCheckedFieldCids(),accessCircle:this.circleView.getData()},{success:function(){$.goMessage(e["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."])}})}})});