define("works/views/mobile/side",function(require){var e=require("backbone"),t=require("app"),n=require("works/views/mobile/side_item"),r=require("works/views/mobile/side_view_item"),i=require("works/collections/applet_simples"),s=require("hgn!works/templates/mobile/side"),o=require("i18n!nls/commons"),u=require("i18n!works/nls/works"),a={favorite:o["\uc990\uaca8\ucc3e\uae30"],"Works \ubdf0":u["Works \ubdf0"],"\uc990\uaca8\ucc3e\ub294 \uc571":u["\uc990\uaca8\ucc3e\ub294 \uc571"],"\uc804\uccb4 \uc571":u["\uc804\uccb4 \uc571"],"\uac80\uc0c9\ud0a4\uc6cc\ub4dc\ub97c\uc785\ub825\ud558\uc138\uc694":o["\uac80\uc0c9 \ud0a4\uc6cc\ub4dc\ub97c \uc785\ub825\ud558\uc138\uc694."]},f=[{"\ub9ac\ud3ec\ud2b8":u["\uc774 \uc571\uc758 \ub9ac\ud3ec\ud2b8"],keyword:"reports"}],l=e.View.extend({events:{"click span[name=sideItem]":"moveToApp","click a[name=sideViewItem]":"moveToView","click #appNameDelete":"_deleteSearchText","keyup #appName":"_onKeyupSearch","click #appNameSearchBtn":"_searchAppName"},initialize:function(){this.allApps=new i([],{type:"search"}),this.favoriteApps=new i([],{url:GO.config("contextRoot")+"api/works/applets/favorites"})},render:function(){this.packageName=this.options.packageName;var e=this,t=this.allApps.fetch(),n=this.favoriteApps.fetch(),r=$.Deferred();return $.when(t,n).done(function(){e.$el.html(s({lang:a})),e.renderViewItemsView(f,e.$el.find("#worksViewList")),e.renderItemsView(e.allApps,e.$el.find("#allAppsList"),{className:"ic_work"}),e.renderItemsView(e.favoriteApps,e.$el.find("#favoriteAppsList"),{className:"ic_favori"}),r.resolveWith(e,[e])}),r},renderViewItemsView:function(e,t,n){t.empty();for(var i=0;i<e.length;i++){var s=new r({model:e[i],className:""});t.append(s.render().el)}},renderItemsView:function(e,t,r){t.empty(),_.each(e.models,function(e){var i=new n({model:e,className:r.className});t.append(i.render().el)},this)},moveToApp:function(e){var n=$(e.currentTarget).attr("data-id");t.router.navigate("works/applet/"+n+"/home",!0)},moveToView:function(e){if(this.appletId){var n=$(e.currentTarget).attr("keyword");t.router.navigate("works/applet/"+this.appletId+"/"+n,!0)}},_onKeyupSearch:function(e){e.preventDefault();if(e.keyCode!=13&&!_.isEmpty($("#appName").val()))return;this._searchAppName()},_searchAppName:function(){var e=$("#appName").val().trim();this.allApps.setKeyword(e),this.$("#allAppsList").empty(),this.$("#worksViewList").empty(),$.when(this.allApps.fetch({reset:!0})).done($.proxy(function(){_.isEmpty(e)?(this.$("h3> .btn_wrap").show(),this.renderViewItemsView(f,this.$el.find("#worksViewList")),this.renderItemsView(this.allApps,this.$el.find("#allAppsList"),{className:"ic_work"}),this.renderItemsView(this.favoriteApps,this.$el.find("#favoriteAppsList"),{className:"ic_favori"})):(this.$("h3> .btn_wrap").hide(),this.$("#favoriteAppsList").empty(),this.renderItemsView(this.allApps,this.$el.find("#allAppsList"),{className:"ic_work"}))},this))},_deleteSearchText:function(e){e.preventDefault(),$("#appName").val(""),this._searchAppName()}},{__instance__:null,create:function(e){return this.__instance__=new this.prototype.constructor({packageName:e}),this.__instance__}});return l});