define("works/views/mobile/report/app_report_list_item",function(require){var e=require("components/backdrop/backdrop"),t=require("i18n!nls/commons"),n=require("i18n!works/nls/works"),r={"\uc0ad\uc81c":t["\uc0ad\uc81c"],"\uacf5\uc720\ub428":n["\uacf5\uc720\ub428"]},i=require("hgn!works/components/report/mobile/report_list_item"),s=Hogan.compile(['<div class="array_option array_works" style="left:auto">','<ul class="array_type">','<li el-delete><span class="txt">{{\uc0ad\uc81c}}</span></li>',"</ul>","</div>"].join(""));return e.extend({initialize:function(e){this.appletId=e.appletId,this.isAdmin=e.isAdmin,this.item=e.item,this.content=e.content},render:function(){var e=this;this.item.lang=r,this.content.append(i(this.item)),this.$el=$(this.content).children(":last"),this.$("[el-favorite]").on("click",function(t){e._toggleFavorite(t)}),this.$("[el-detail]").on("click",function(t){e._onClickDetail(t)});if(!this.isAdmin||!this.item.writer){this.$("[el-report-setting]").hide();return}this.$("[el-report-setting]").on("click",function(t){e._onClickSetting(t)})},_onClickSetting:function(e){this.settingLayer||this._initBackdrop(e)},_onClickDelete:function(e){var r=GO.contextRoot+"api/works/applet/"+this.appletId+"/report/"+this.item.id,i=$.ajax({contentType:"application/json",dataType:"json",type:"DELETE",url:r});i.done(function(e){$.goSlideMessage(n["\uc0ad\uc81c\uc5d0 \uc131\uacf5\ud588\uc2b5\ub2c8\ub2e4"]),$("a[el-favorite]").trigger("refresh")}),i.fail(function(e,n,r){var i=JSON.parse(e.responseText);!_.isUndefined(i)&&i.message?$.goAlert(i.message):$.goAlert(t["500 \uc624\ub958\ud398\uc774\uc9c0 \ud0c0\uc774\ud2c0"])})},_toggleFavorite:function(e){var r="POST",i=this;i.item.favorite&&(r="DELETE");var s=GO.contextRoot+"api/works/applet/"+this.appletId+"/report/"+this.item.id+"/favorites",o=this,u=$.ajax({contentType:"application/json",dataType:"json",type:r,url:s});u.done(function(e){r=="DELETE"?$.goSlideMessage(n["\uc990\uaca8\ucc3e\uae30\uac00 \ud574\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4"]):$.goSlideMessage(n["\uc990\uaca8\ucc3e\uae30\uc73c\ub85c \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4"]),$("a[el-favorite]").trigger("refresh")}),u.fail(function(e,n,r){var i=JSON.parse(e.responseText);!_.isUndefined(i)&&i.message?$.goAlert(i.message):$.goAlert(t["500 \uc624\ub958\ud398\uc774\uc9c0 \ud0c0\uc774\ud2c0"])})},_onClickDetail:function(e){GO.router.navigate("works/applet/"+this.appletId+"/report/"+this.item.id,!0)},_initBackdrop:function(e){this.settingLayer=$(s.render(r)),this.$(e.target).append(this.settingLayer),this.backdropToggleEl=this.settingLayer,this.bindBackdrop(),this.linkBackdrop(this.$("[el-report-setting]"));var n=this;$("li[el-copy]").on("click",function(e){n._onClickCopy(e)});if(!this.item.writer){$("li[el-delete]").hide();return}$("li[el-delete]").on("click",function(e){confirm(t["\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"])&&n._onClickDelete(e)})},changeFavorite:function(){this.render()}})});