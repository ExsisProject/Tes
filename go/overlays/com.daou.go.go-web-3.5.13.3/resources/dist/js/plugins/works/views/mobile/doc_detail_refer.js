define("works/views/mobile/doc_detail_refer",function(require){var e=require("when"),t=require("i18n!works/nls/works"),n=require("works/collections/fields"),r=require("works/models/applet_doc_refer"),i=require("works/models/applet_form"),s=require("works/models/applet_baseconfig"),o=require("views/mobile/header_toolbar"),u=require("works/views/mobile/doc_detail"),a=require("hgn!works/templates/mobile/doc_detail_refer");return u.extend({appletId:null,baseConfigModel:null,canvasView:null,el:"#content",initialize:function(e){this.appletId=e.referAppletId,this.subFormId=e.subFormId,this.reqAppletId=e.reqAppletId,this.docId=e.referDocId,this.fields=new n([],{appletId:this.appletId,subFormId:this.subFormId,includeProperty:!0}),this.baseConfigModel=new s({id:this.appletId}),this.appletFormModel=new i({appletId:this.appletId,subFormId:this.subFormId}),this.model=new r({id:this.docId},{appletId:this.appletId,reqAppletId:this.reqAppletId}),this.Template=a},render:function(){var e=this;this._initRender(),$.when(this.baseConfigModel.fetch(),this.appletFormModel.fetch({statusCode:{403:function(){GO.util.linkToErrorWithCustomError({code:403,message:t["\ud3fc \uc811\uadfc\uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."]+" "+t["\ud3fc \uc811\uadfc\uad8c\ud55c \uc5c6\uc74c \uc124\uba85"]})}}}),this.fields.fetch()).then(function(){o.render({title:e.baseConfigModel.get("name"),isPrev:!0}),e._renderContent(),e.model.fetch()})}})});