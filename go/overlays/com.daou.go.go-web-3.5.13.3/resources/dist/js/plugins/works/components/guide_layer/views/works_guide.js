define("works/components/guide_layer/views/works_guide",function(require){var e=require("hgn!works/components/guide_layer/templates/works_guide"),t="WORKS_INTRO_GUIDE_";return Backbone.View.extend({id:"worksIntroGuideMain",initialize:function(){this.storageKey=t+GO.session().id},init:function(e){this.startPage=0,this.currentPage=0,this.endPage=4,this.isFirst=e.isFirst,this.createdAt=e.createdAt,this.sizeCheck()},render:function(){return this.popup=$.goPopup({closeIconVisible:!1,modal:!0,draggable:!1,contents:this.$el}),this.renderContent(),this.resize(),this},registerEvent:function(){var e=this;$(".works_guide_close").on("click",function(){e.close()}),$(".works_guide_previous").on("click",function(t){e.movePage(t)}),$(".works_guide_next").on("click",function(t){e.movePage(t)}),$(".slide_status").on("click",function(t){var n=t.target.accessKey;if(!n)return;e.currentPage=Number(n),e.renderContent()})},sizeCheck:function(){var e=this;this.intervalId=setInterval(function(){var t=$(window).height();e.windowHeight!==t&&e.resize(),e.windowHeight=t},100)},resize:function(){var e=$(window).height(),t=$("#gpopupLayer").height(),n=(e-t)/2;$("#gpopupLayer").css("top",n+"px")},renderContent:function(){var t=this.currentPage==0,n=this.currentPage==1,r=this.currentPage==2,i=this.currentPage==3,s=this.currentPage==4,o=this.isFirstGuide()&&this.isFirst;this.$el.html(e({isFirst:o,page0:t,page1:n,page2:r,page3:i,page4:s})),$(".go_popup").addClass("layer_org"),this.registerEvent()},movePage:function(e){if(!e||!e.target)return;var t=e.target.accessKey;if(!t)return;var n=t=="next"?1:-1,r=this.currentPage+n;if(r<this.startPage||r>this.endPage)return;this.currentPage=r,this.renderContent()},isFirstGuide:function(){var e=GO.util.getLocalStorage(this.storageKey);return!e||!e.data},close:function(){if(!this.popup)return;var e=this.$el.find('input:checkbox[id="guideVisible"]').is(":checked");if(e&&e==1){var t={data:e,expires:null};GO.util.setLocalStorage(this.storageKey,t)}this.popup.close()}})});