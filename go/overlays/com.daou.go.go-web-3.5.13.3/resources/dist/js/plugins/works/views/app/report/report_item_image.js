define("works/views/app/report/report_item_image",function(require){var e=require("works/views/app/report/report_item"),t=require("works/views/app/report/report_image_view"),n=require("works/components/report/view/image_setting");return e.extend({initialize:function(t){e.prototype.initialize.call(this,t),this.imageView={},this.settingView={},this.settings={},this.appletId=t.appletId,this.reportId=t.reportId,this.attachId=t.attachId,this.contentWrap=$(t.contentWrap),this._initBase(t),this.render()},_initBase:function(e){this.type="image",e.attachId?this.attachId=e.attachId:e.filePath&&(this.filePath=e.filePath,this.fileName=e.fileName,this.attach=e.attach),e.settings&&(this.settings=e.settings)},render:function(){this._initImageView()},_initImageView:function(){var e={rid:this.rid,appletId:this.appletId,reportId:this.reportId,attachId:this.attachId,settings:this.settings,attach:this.attach};this.imageView=new t(e),this.contentWrap.empty(),this.contentWrap.append(this.imageView.$el),this.imageView.render()},reload_setting:function(){var e=this.settingView.getAttach();return this.settings.viewType=this.settingView.getViewType(),this.settings.existBorder=this.settingView.getExistBorder(),this.imageView.updateSettings(this.settings),e&&(this.imageView.saveImageAttach(e),this.imageView._initImageView(),this.imageView._renderImage()),!0},getSettingTmpl:function(){return this.settingView=new n({settings:this.settings,rid:this.rid}),this.settingView.render().el},getFilterTmpl:function(){return{}},getAttachId:function(){if(this.imageView.attachId)return this.imageView.attachId},getRid:function(){if(this.rid)return this.rid},toJSON:function(){var e=this.imageView.getImageData(),t=e?null:this.getAttachId(),n={type:this.type,settings:this.imageView.getSettings(),filePath:this.imageView.getFilePath(),fileName:this.imageView.getFileName(),attachId:t,attach:e};return n},toObject:function(e){var t=e.data?e.data:e;this._initBase(t)}})});