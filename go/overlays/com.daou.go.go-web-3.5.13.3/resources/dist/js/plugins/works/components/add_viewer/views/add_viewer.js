define("works/components/add_viewer/views/add_viewer",function(require){var e=require("backbone"),t=require("hgn!works/components/add_viewer/templates/add_viewer"),n=require("works/components/add_viewer/collections/added_collection"),r=Hogan.compile('<li data-id="{{id}}"><span class="name">{{name}} {{position}}</span><span class="btn_wrap" data-btntype="attendeeDelete"><span class="ic ic_del"></span></span></li>'),i=e.View.extend({events:{"vclick span .ic_del":"deleteEl"},initialize:function(e){this.checkedScroll=null,this.checkedCollection=new n,this.checkedCollection.bind("add",this._onAdd),this.checkedCollection.bind("remove",this._onRemove),e.hasOwnProperty("removeCallBack")&&(this.removeCallBack=e.removeCallBack)},render:function(){return this.$el.html(t),this},_onAdd:function(e,t,n){if(this.checkedScroll==null){$("#checkedScroll").css({position:"relative","max-height":"98px"}).find("ul").css("padding","5 0");var i=!GO.util.isMobileApp()&&(GO.util.checkOS()=="iphone"||GO.util.checkOS()=="ipad");this.checkedScroll=new IScroll("#checkedScroll",{bounce:!1,disablePointer:!0,disableMouse:!1,disableTouch:i,preventDefault:i}),i||(this.checkedScroll.on("zoomStart",function(e){$("#checkedScroll").css("overflow-x","").css("overflow-y","")}),this.checkedScroll.on("zoomEnd",function(e){$("#checkedScroll").css("overflow-x","scroll").css("overflow-y","hidden")}))}else this.checkedScroll.refresh();$("#checkedEls").append(r.render(e.attributes))},_onRemove:function(e,t,n){console.log("_onRemove"),$("#checkedEls").find('li[data-id="'+e.get("id")+'"]').remove()},add:function(e){console.log("add"),this.checkedCollection.add(e)},remove:function(e){console.log("remove"),this.checkedCollection.remove(e)},setCollection:function(e){this.checkedCollection.set(e)},removeAllCollection:function(){this.checkedCollection.set()},getCollection:function(){return this.checkedCollection},deleteEl:function(e){var t=$(e.currentTarget).parents("li"),n=t.data("id");this.checkedCollection.remove(this.checkedCollection.getById(n)),this.removeCallBack(n)}});return i});