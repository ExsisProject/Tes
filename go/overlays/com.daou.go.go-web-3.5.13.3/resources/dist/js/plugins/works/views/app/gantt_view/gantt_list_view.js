define("works/views/app/gantt_view/gantt_list_view",function(require){var e=require("app"),t=require("backbone"),n=require("works/views/app/gantt_view/gantt_tree_config"),r=require("hgn!works/templates/app/gantt_view/gantt_list_view"),i=require("works/constants/works"),s=require("i18n!nls/commons"),o=require("i18n!board/nls/board"),u=require("i18n!works/nls/works"),a={"\uc81c\ubaa9":s["\uc81c\ubaa9"],"\uc2dc\uc791\ub0a0\uc9dc":u["\uc2dc\uc791 \ub0a0\uc9dc"],"\uc885\ub8cc\ub0a0\uc9dc":u["\uc885\ub8cc \ub0a0\uc9dc"],"\ub2f4\ub2f9\uc790":u["\ub2f4\ub2f9\uc790"],"\uc9c4\ud589\ub960":u["\uc9c4\ud589\ub960"],"\uc9c4\ud589\ub960\uc124\uba85":u["\uac04\ud2b8\ubdf0 \uc9c4\ud589\ub960 \uc124\uba85"],"\ucd5c\ub300\ub178\ucd9c\uac1c\uc218\ud234\ud301":e.i18n(u["\uac04\ud2b8 \ubdf0\uc5d0\uc11c \ubcfc \uc218 \uc788\ub294 \ub370\uc774\ud130\uc758 \uac1c\uc218\ub294 \ucd5c\ub300 {{arg0}}\uac1c \uc785\ub2c8\ub2e4."],{arg0:i.GANTT_VIEW_DOC_NODE_MAX_COUNT}),"\ub370\uc774\ud130\ubd88\ub7ec\uc624\uae30\ud234\ud301":e.i18n(u["{{arg0}}\uac1c\uac00 \ub118\uc744 \uacbd\uc6b0, \ubaa9\ub85d\uc5d0\uc11c \uc77c\ubd80 \ub370\uc774\ud130\ub97c \uc81c\uc678 \ud6c4 [\ub370\uc774\ud130 \ubd88\ub7ec\uc624\uae30]\ub97c \ud1b5\ud574 \ucd94\uac00\ud574 \uc8fc\uc138\uc694."],{arg0:i.GANTT_VIEW_DOC_NODE_MAX_COUNT}),"\uc804\uccb4\uc9c4\ud589\ub960\ud234\ud301":u["\uc804\uccb4 \uc9c4\ud589\ub960\uc740 \ud544\ud130\ub97c \uc0ac\uc6a9\ud558\uac70\ub098 \uc0ac\uc6a9\uc790 \uad8c\ud55c \uc124\uc815\uc5d0 \uc758\ud574 \ub2e4\ub974\uac8c \ubcf4\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4."]};return t.View.extend({el:"#gantt_list",initialize:function(e){this.options=e||{},this.appletId=e.appletId,this.isAdmin=this.options.isAdmin,this.fields=this.options.fields,this.ganttViewModel=this.options.ganttViewModel,this.queryString=this.options.queryString},render:function(){this.$el.empty().html(r({lang:a,hasRequiredFields:this.ganttViewModel.hasRequiredFields(),name:this.ganttViewModel.get("name"),isAdmin:this.isAdmin})),this._renderGanttTreeConfigView()},_renderGanttTreeConfigView:function(){this.ganttTreeConfigView=new n({appletId:this.appletId,fields:this.fields,isAdmin:this.isAdmin,ganttViewModel:this.ganttViewModel.toJSON(),queryString:this.queryString}),this.ganttTreeConfigView.setElement(this.$el.find("#gantt_list_config"));if(!this.ganttViewModel.hasRequiredFields()){this.ganttTreeConfigView.renderEmptyMessageIfNoData();return}this.ganttTreeConfigView.render()},onClickAddGroup:function(){var e=this.ganttTreeConfigView.createNodeElement({nodeType:"GROUP",groupName:o["\uc0c8\ub85c\uc6b4 \uadf8\ub8f9\uba85\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694"]},{isEditingMode:!0});this.$el.find(".empty-message").remove(),this.ganttTreeConfigView.$el.append(e),e.find("input")[0].focus({preventScroll:!1}),this.ganttTreeConfigView.bindNodeEnterEvent(e)},onClickToggleNodes:function(e){e.preventDefault();if(this.ganttTreeConfigView===null)return;var t=$(e.currentTarget),n=t.attr("data-state");n==="opened"?(this.ganttTreeConfigView.foldAllNodes(),t.attr("data-state","closed"),t.find(".txt").text(o["\ubaa8\ub450 \uc5f4\uae30"])):(this.ganttTreeConfigView.unfoldAllNodes(),t.attr("data-state","opened"),t.find(".txt").text(o["\ubaa8\ub450 \ub2eb\uae30"]))},onClickSortableToggle:function(e){e.preventDefault(),this._isSortableMode()?this._destroyNodeSortable():this._enableNodeSortable()},_enableNodeSortable:function(){if(!this.ganttTreeConfigView)return;$(".btnGroupAdd").hide(),$(".btnBringDocNodes").hide(),this.$el.find(".btnEditNode").hide(),this.$el.find(".btnRemoveNode").hide(),this.ganttTreeConfigView.enableSortable(),this.$el.find("#gantt_list_config .tb-header").addClass("tb_stair_edit"),this._changeSortButtonText(s["\uc21c\uc11c\ubc14\uafb8\uae30 \uc644\ub8cc"]),this._toggleSortButtonClass(),this._addEditClassForBlur()},_destroyNodeSortable:function(){if(!this.ganttTreeConfigView)return;$(".btnGroupAdd").show(),$(".btnBringDocNodes").show(),this.$el.find(".btnEditNode").show(),this.$el.find(".btnRemoveNode").show(),this.ganttTreeConfigView.destroySortable(),this.$el.find("#gantt_list_config .tb-header").removeClass("tb_stair_edit"),this._changeSortButtonText(s["\uc21c\uc11c\ubc14\uafb8\uae30"]),this._toggleSortButtonClass(),this._removeEditClassForBlur()},_isSortableMode:function(){return this.$("#gantt_list_config").hasClass("tb_stair_edit")},_changeSortButtonText:function(e){$(".btnSortable span.txt").html(e)},_toggleSortButtonClass:function(){$(".btnSortable").toggleClass("active")},_addEditClassForBlur:function(){this.$el.addClass("edit"),$("#gantt_graph .ganttview").addClass("edit")},_removeEditClassForBlur:function(){this.$el.removeClass("edit"),$("#gantt_graph .ganttview").removeClass("edit")}})});