define("works/views/app/create_app_intro",function(require){function v(e,t,n,r,i,s){var o=[];return t!=""&&r.length>0&&(o.push('<div class="wrap_card_tit"><h5>'+t+'</h5><p class="desc">'+n+"</p></div>"),e.find(".wrap_works").append(o.join("\n"))),e.find(".wrap_works").append(m.call(this,r,i,s)),e}function m(t,n,r){var i=e("<ul></ul>"),s=[];t.each(function(e){e.set("isTemplate",n);var t=new h({model:e});s.push(t.el)},this),i.append.apply(i,s);if(r){var o=new p;i.append(o.el)}return i}var e=require("jquery"),t=require("backbone"),n=require("when"),r=require("works/views/app/works_template_guide"),i=require("works/views/app/home/works_home_layout"),s=require("works/collections/applet_simples"),o=require("hgn!works/templates/app/home/create_app_card"),u=require("hgn!works/templates/app/home/create_app_card_sample"),a=require("i18n!works/nls/works"),f=require("i18n!nls/commons"),l={"\uc720\uc800 \ub4f1\ub85d \uc544\uc774\ucf58":a["\uc720\uc800 \ub4f1\ub85d \uc544\uc774\ucf58"],"\uc571 \ucd94\uac00\ud558\uae30":a["\uc571 \ucd94\uac00\ud558\uae30"],"\uc0c8\ub85c \ub4f1\ub85d\ub41c \uc571":a["\uc0c8\ub85c \ub4f1\ub85d\ub41c \uc571"],"\uc571\ub9cc\ub4e4\uae30\uc0d8\ud50c\uc548\ub0b4":a["\uc571\ub9cc\ub4e4\uae30\uc0d8\ud50c\uc548\ub0b4"],"\uc571\ub9cc\ub4e4\uae30\uc0d8\ud50c\uc548\ub0b4\uc0c1\uc138":a["\uc571\ub9cc\ub4e4\uae30\uc0d8\ud50c\uc548\ub0b4\uc0c1\uc138"]},c=!1,h=t.View.extend({tagName:"li",template:o,favoriteList:null,observer:null,events:{"click .wrap_works_info":"moveCreateBaseInfo"},initialize:function(e){this.observer=_.extend({},t.Events),this.folderId=GO.router.getSearch().folderId||"",this.model=e.model,this.render(),this.listenTo(this.observer,"createAppletFromGuide",this._createAppletFromGuide)},render:function(){var e=GO.util.isValidValue(this.model.get("guideContents"))&&this.model.get("guideContents").length>0,t=GO.util.isValidValue(this.model.get("guideImageUrls"))&&this.model.get("guideImageUrls").length>0;this.$el.empty().append(this.template({lang:l,id:this.model.get("id"),name:this.model.get("name"),desc:this.model.get("desc"),thumbSmall:this.model.get("thumbSmall"),"isFirstTmlApp?":this.model.get("isFirstTmlApp")||!1,isTemplate:this.model.get("isTemplate")||!1,asDefault:this.model.get("asDefault")||!1,isRecent:this.model.isRecent(this.model.get("createdAt")),enabledGuidePopup:e&&t}))},moveCreateBaseInfo:function(t){t.preventDefault();var n=this,i=e(t.currentTarget),s=i.attr("data-type"),o=i.attr("default-template"),u=o?u=n.model.get("templateId"):n.model.get("id");if(i.attr("guide-popup")){var l={refId:u,refType:s,asDefault:o,model:n.model,observer:n.observer};console.log("\uac00\uc774\ub4dc \ud31d\uc5c5 \uc5f0\ucd9c: ",l),this.templateGuide=new r(l),this.templateGuide.render()}else e.goConfirm(a["\uc571 \ub9cc\ub4e4\uae30"],GO.i18n(a["{{arg1}}\ub85c \uc571\uc744 \ub9cc\ub4dc\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"],{arg1:n.model.get("name")}),function(){n._createApplet(u,s,o)},function(){return!1},f["\ud655\uc778"])},_createAppletFromGuide:function(e){this._createApplet(e.refId,e.refType,e.asDefault)},_createApplet:function(n,r,i){this.appletCreateModel=new t.Model({id:n,refType:r?r:"applets",asDefault:i});if(c){e.goSlideMessage(a["\uc800\uc7a5\uc911 \uba54\uc138\uc9c0"]);return}this.appletCreateModel.url=GO.config("contextRoot")+"api/works/applets",this.appletCreateModel.save({},{type:"POST",beforeSend:function(){c=!0},success:e.proxy(function(t){this.folderId&&e.ajax({type:"PUT",contentType:"application/json",url:GO.contextRoot+"api/works/folders/move",data:JSON.stringify({oldFolderId:null,appletId:t.id,newFolderId:this.folderId})}),GO.router.navigate("works/applet/"+t.get("id")+"/home",{pushState:!0,trigger:!0})},this),error:function(t,n){var r=n.responseJSON;r.name=="subform-validate"?e.goSlideMessage(r.message):GO.router.navigate("works",{pushState:!0,trigger:!0})},statusCode:{400:function(){GO.util.error("400",{msgCode:"400-works"})},403:function(){GO.util.error("403",{msgCode:"400-works"})},404:function(){GO.util.error("404",{msgCode:"400-works"})},500:function(){GO.util.error("500")}},complete:function(){c=!1}})}}),p=t.View.extend({tagName:"li",template:u,favoriteList:null,events:{"click #worksSampleLink":"moveWorksSamplePage"},initialize:function(e){this.render()},render:function(){this.$el.empty().append(this.template({lang:l}))},moveWorksSamplePage:function(e){e.preventDefault(),window.open("https://bit.ly/3jZ1NlQ")}}),d=t.View.extend({className:"go_content go_renew go_works_home app_temp",initialize:function(){this.layoutView=i.create(),this.AppletTemplatesList=new s([],{url:GO.config("contextRoot")+"api/works/templates"}),this.AppletManageList=new s([],{url:GO.config("contextRoot")+"api/works/applets/manage"})},render:function(){var r=this;return n(this.layoutView.render()).then(function(){var t=n.defer();return n(r.AppletTemplatesList.fetch()).then(function(){r.AppletTemplatesList.each(function(e){e.set("isManageType",!1)}),r.AppletTemplatesList.length>0&&r.AppletTemplatesList.at(0).set("isFirstTmlApp",!0),t.resolve()}),t.promise}).then(function(){var t=n.defer();return n(r.AppletManageList.fetch()).then(function(){r.AppletManageList.each(function(e){e.set("isManageType",!0)}),t.resolve()}),t.promise}).then(function(){r.layoutView.setContent(r);var i=['<header class="content_top">',"<h1>"+a["\ud15c\ud50c\ub9bf \ubaa9\ub85d"]+"</h1>","</header>"].join(""),s=Hogan.compile(i);r.$el.append(s.render());var o=e('<div class="content_page app_create_wrap" style="height:auto;"><div class="wrap_works"></div></div>');r.DefaultAppletTemplateList=new t.Collection(r.AppletTemplatesList.filter(function(e){return e.get("asDefault")==1})),r.NonDefaultAppletTemplateList=new t.Collection(r.AppletTemplatesList.filter(function(e){return e.get("asDefault")==0})),o.append(v.call(r,o,a["\uc0d8\ud50c \uc571\uc73c\ub85c \ub9cc\ub4e4\uae30"],a["\uc0d8\ud50c \uc571\uc73c\ub85c \ub9cc\ub4e4\uae30 \uc124\uba85"],r.DefaultAppletTemplateList,!0,!0)),o.append(v.call(r,o,a["\uacf5\uc720\ub41c \ud15c\ud50c\ub9bf\uc73c\ub85c \ub9cc\ub4e4\uae30"],a["\uc571 \uac00\uc838\uc624\uae30 \uae30\ub2a5\uc744 \ud1b5\ud574 \uc0ac\ub0b4\uc5d0 \uacf5\uc720\ub41c \ud15c\ud50c\ub9bf\uc73c\ub85c \uc571\uc744 \ub9cc\ub4e4\uc5b4\ubcf4\uc138\uc694."],r.NonDefaultAppletTemplateList,!0,!1)),o.append(v.call(r,o,a["\uc0ac\uc6a9\uc911\uc778 \uc571\uc73c\ub85c \ub9cc\ub4e4\uae30"],a["\uc0ac\uc6a9\uc911\uc778 \uc571\uc744 \ubcf5\uc0ac\ud558\uc5ec \ub9cc\ub4e4\uae30 \uc124\uba85"],r.AppletManageList,!1,!1)),r.$el.append(o)}).otherwise(function(t){console.log(t.stack)})}});return d});