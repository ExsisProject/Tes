define("works/views/app/public_fields_setting_layer",function(require){var e=require("components/backdrop/backdrop"),t=require("hgn!works/templates/app/public_fields_setting_layer"),n=require("i18n!nls/commons"),r=require("i18n!works/nls/works"),i={consumersDesc:r["consumers\uc124\uba85"],producersDesc:r["producers\uc124\uba85"],"\ub2eb\uae30":n["\ub2eb\uae30"],"\uacf5\uac1c":n["\uacf5\uac1c"],"\ube44\uacf5\uac1c":n["\ube44\uacf5\uac1c"]};return e.extend({tagName:"span",className:"layer_tail layer_attrSet",attributes:{style:"display: none;"},events:{"click span[data-field-cid]":"_onClickItem","click [el-close]":"_onClickClose"},initialize:function(t){e.prototype.initialize.call(this,t),this.type=t.type,this.fields=t.fields,this.suppressedFields=t.suppressedFields,this._parseFields()},render:function(){return this.$el.html(t({lang:i,desc:i[this.type+"Desc"],fields:this.fields.toJSON()})),this},getSuppressedFields:function(){return _.map(this.$(".ic_ctrl_off"),function(e){return $(e).attr("data-field-cid")})},_parseFields:function(){this.fields.each(function(e){_.contains(this.suppressedFields,e.get("cid"))&&e.set("suppressed",!0)},this)},_onClickItem:function(e){var t=$(e.currentTarget);t.toggleClass("ic_ctrl_on").toggleClass("ic_ctrl_off");var n=t.hasClass("ic_ctrl_on"),r=t.attr("data-field-cid"),i=this.fields.findWhere({cid:r});i.set("public",n)},_onClickClose:function(e){e.stopPropagation(),this.toggle(!1)}})});