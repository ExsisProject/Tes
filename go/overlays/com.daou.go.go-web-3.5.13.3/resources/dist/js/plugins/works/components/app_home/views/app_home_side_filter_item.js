define("works/components/app_home/views/app_home_side_filter_item",function(require){var e=require("i18n!nls/commons"),t=require("i18n!works/nls/works"),n=require("components/backdrop/backdrop"),r=require("hgn!works/components/app_home/templates/app_home_side_filter_setting"),i=require("hgn!works/components/app_home/templates/app_home_side_filter_item"),s={"\ud544\ud130 \uc774\ub984 \ubcc0\uacbd":t["\ud544\ud130 \uc774\ub984 \ubcc0\uacbd"],"\ubcc0\uacbd\ud560 \ud544\ud130 \uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694.":t["\ud544\ud130\uba85\ubcc0\uacbd\uc124\uba85"],"\uc774\ub984 \ubcc0\uacbd":t["\uc774\ub984 \ubcc0\uacbd"],"\uc0ad\uc81c":e["\uc0ad\uc81c"]},o=n.extend({tagName:"li",className:"folder",initialize:function(e){this.appletId=e.appletId,this.auth=e.auth},events:{"click span[el-setting]":"_onClickSetting","click li[el-rename]":"_onClickRename","click li[el-delete]":"_onClickDelete","click [el-filter]":"_onClickFilter"},render:function(){return this.$el.html(i({model:this.model.toJSON(),auth:this.auth})),this.$el.attr("data-id",this.model.id),this},_onClickFilter:function(e){var t=$(e.currentTarget),n=t.attr("data-id"),r=t.attr("data-type");GO.util.store.set(GO.session("id")+"-"+this.appletId+"-works-last-filter-id",n);var i=GO.util.store.get("applet-viewtype");i=="calendar"||i=="gantt"?GO.router.navigate("works/applet/"+this.appletId+"/"+i,!0):(GO.router.navigate("works/applet/"+this.appletId+"/home",{replace:!0}),this.collection.trigger("changeFilter.filters",n,r))},_onClickSetting:function(e){this.settingLayer||this._initBackdrop(e)},_onClickRename:function(t){t.stopPropagation(),this.settingLayer.toggle(!1);var n=['<div class="content">','<p class="desc">',s["\ubcc0\uacbd\ud560 \ud544\ud130 \uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694."],"</p>",'<div class="form_type">','<input el-new-name class="txt_mini w_max" type="text" value="'+this.model.get("name")+'">',"</div>","</div>"].join("");this.popup=$.goPopup({modal:!0,pclass:"layer_normal layer_public_list",header:s["\ud544\ud130 \uc774\ub984 \ubcc0\uacbd"],width:500,contents:n,buttons:[{btext:e["\ud655\uc778"],btype:"confirm",callback:$.proxy(function(){var e=this.popup.find("input[el-new-name]").val();this._saveAsFilter(e),this.settingLayer.toggle(!1)},this)},{btext:e["\ucde8\uc18c"],btype:"normal",callback:$.proxy(function(){this.settingLayer.toggle(!1)},this)}]})},_saveAsFilter:function(t){this.model.fetch().done($.proxy(function(){this.model.save({name:t},{success:$.proxy(function(t){$.goMessage(e["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]),this.collection.trigger("change:name",t)},this)})},this))},_onClickDelete:function(t){t.stopPropagation(),this.settingLayer.toggle(!1),$.goConfirm(e["\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"],"",$.proxy(this._deleteFilter,this))},_deleteFilter:function(){this.model.destroy({success:$.proxy(function(t){var n=GO.util.store.get(GO.session("id")+"-"+this.appletId+"-works-last-filter-id");parseInt(n)===t.id&&(GO.util.store.set(GO.session("id")+"-"+this.appletId+"-works-last-filter-id",null),GO.router.navigate("works/applet/"+this.appletId+"/home",{replace:!0}),this.collection.trigger("changeFilter.filters","all")),$.goMessage(e["\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."])},this)})},_initBackdrop:function(e){this.settingLayer=$(r({lang:s})),this.$el.append(this.settingLayer),this.backdropToggleEl=this.settingLayer,this.bindBackdrop(),this.linkBackdrop(this.$("[el-setting]"))}});return o});