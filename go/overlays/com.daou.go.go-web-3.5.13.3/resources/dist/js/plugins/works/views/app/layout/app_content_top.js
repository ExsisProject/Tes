define("works/views/app/layout/app_content_top",function(require){var e=require("i18n!nls/commons"),t=require("i18n!works/nls/works"),n={appIcon:t["\uc571 \uc544\uc774\ucf58"],operator:t["\uc6b4\uc601\uc790"],showAppDesc:t["\uc571 \uc124\uba85 \ubcf4\uae30"],gotoSettingsHome:t["\uad00\ub9ac \ud648\uc73c\ub85c \uac00\uae30"],"\uad00\ub9ac":t["\uad00\ub9ac"],"\ud1b5\ud569\uac80\uc0c9":e["\ud1b5\ud569\uac80\uc0c9"],"\uc0c1\uc138\uac80\uc0c9":e["\uc0c1\uc138\uac80\uc0c9"],"\uc0c1\uc138":e["\uc0c1\uc138"],"\ub370\uc774\ud130\uc5f0\ub3d9\uac00\uc774\ub4dc":t["\ub370\uc774\ud130\uc5f0\ub3d9\uac00\uc774\ub4dc"],"\uc571\uac04 \ub370\uc774\ud130 \uc5f0\ub3d9":t["\uc571\uac04 \ub370\uc774\ud130 \uc5f0\ub3d9"],"\uc571\uac04\uc5f0\ub3d9\uc124\uba85":t["\uc571\uac04\uc5f0\ub3d9\uc124\uba85"],Works:e.Works},r=require("works/views/app/layout/content_top"),i=require("components/backdrop/backdrop"),s=require("hgn!works/templates/app/app_content_top");return r.extend({tagName:"header",className:"content_top works_tit",baseConfigModel:null,pageName:null,useActionButton:!0,events:_.extend(r.prototype.events,{"click [el-setting-home]":"_goToSettingsHome","click [el-app-home]":"_goToAppHome","click #interAppGuideBtn":"_interAppGuideBtn","click [data-btn-integration]":"_goAppIntegration"}),initialize:function(e){e=e||{},this.appletId=e.appletId,this.subFormId=e.subFormId,this.accessibleForms=e.accessibleForms,this.isFormManager=e.isFormManager||!1,this.useSearch=e.useSearch,this.pageName=e.pageName||"",this.isFullSizeLayout=e.isFullSizeLayout||!1,this.description=e.description,this.isSetting=e.isSetting||!1,this.useActionButton=e.useActionButton||!0,this.baseConfigModel=e.baseConfigModel,this.isOrgDocPopup=e.isOrgDocPopup||!1},render:function(){return this.baseConfigModel.deferred.done($.proxy(function(){var e=GO.router.getSearch("keyword"),t=this;this.$el.html(s({useSearch:this.useSearch,config:this.baseConfigModel.toJSON(),desc:GO.util.textToHtml(this.baseConfigModel.get("desc")),externalDesc:this.description,pageTitle:this._makePageTitle(),operatorList:this._makeOperatorList(),useActionButton:this.useActionButton,isAdmin:this.baseConfigModel.isAdmin(GO.session("id")),lang:n,isFullSizeLayout:this.isFullSizeLayout,keyword:e||"",maxlength:64,"has_keyword?":!!e,isOrgDocPopup:this.isOrgDocPopup,isSetting:this.isSetting,isFormManager:this.isFormManager,forms:this.accessibleForms,isSelect:function(){return this.mainForm?GO.util.isInvalidValue(t.subFormId):t.subFormId==this.id},showSettingButton:!this.isSetting&&this.baseConfigModel.isAdmin(GO.session("id"))&&!this.isOrgDocPopup,useIntegration:this.baseConfigModel.get("useIntegration")})),this.backdrop()},this)),this},setPageName:function(e){this.pageName=e},backdrop:function(){var e=new i;e.backdropToggleEl=this.$("[el-backdrop]"),e.linkBackdrop(this.$("[el-backdrop-link]"));var t=!this.isSetting&&this.baseConfigModel.get("showDescription");e.toggle(t)},_interAppGuideBtn:function(){var e=window.location.protocol+"//"+window.location.host+GO.contextRoot+"app/works/interapp/help",t="width=1280, height=700, left=0, top=0, scrollbars=1";window.open(e,"",t)},_makeOperatorList:function(){var e=[];return _.each(this.baseConfigModel.get("admins"),function(t){e.push(t.name+(t.position?" "+t.position:""))}),e.join(", ")},_makePageTitle:function(){return this.isSetting||this.isFullSizeLayout?"<span><a el-app-home>"+this.baseConfigModel.get("name")+"</a> &gt; "+"<a el-setting-home>"+t["\uad00\ub9ac"]+"</a> &gt; </span>"+this.pageName:'<span class="txt"><a el-app-home>'+_.escape(this.baseConfigModel.get("name"))+(this.pageName?" > "+this.pageName:"")+"</a></span>"},_goToSettingsHome:function(e){e.preventDefault(),GO.router.navigate("works/applet/"+this.baseConfigModel.get("id")+"/settings/home",{trigger:!0}),this.remove()},_goToAppHome:function(e){e.preventDefault(),GO.router.navigate("works/applet/"+this.baseConfigModel.get("id")+"/home",{trigger:!0}),this.remove()},_goAppIntegration:function(e){e.preventDefault(),GO.router.navigate("works/applet/"+this.baseConfigModel.get("id")+"/settings/integration",{pushState:!0,trigger:!0})}})});