define("works/components/formbuilder/form_components/columns/columns",function(require){var e=require("works/component_type"),t=require("works/components/formbuilder/core/form_component"),n=require("works/components/formbuilder/core/component_registry"),r=require("works/components/formbuilder/core/component_manager"),i=require("works/components/formbuilder/core/views/containable_form"),s=require("works/components/formbuilder/core/views/base_form"),o=require("works/components/formbuilder/core/views/base_detail"),u=require("works/components/formbuilder/core/views/base_option"),a=require("hgn!works/components/formbuilder/form_components/columns/form"),f=require("hgn!works/components/formbuilder/form_components/columns/column"),l=require("hgn!works/components/formbuilder/form_components/columns/option"),c=require("i18n!works/nls/works"),h=require("i18n!nls/commons"),p={"\uceec\ub7fc \ub2e8\uacc4 \uc124\uc815":c["\uceec\ub7fc \ub2e8\uacc4 \uc124\uc815"],"2\ub2e8\uacc4":c["2\ub2e8"],"3\ub2e8\uacc4":c["3\ub2e8"]},d=t.define(e.Column,{name:c["\uceec\ub7fc"],group:"ui",handlerable:!1,acceptComponent:"!"+e.Columns,OptionView:u,FormView:i.extend({className:"column_side",template:null,initialize:function(){i.prototype.initialize.apply(this,arguments),this.isRendered=!1},render:function(e){this.isRendered||(this.isRendered=!0,this.$el.html(f({cid:this.clientId,indicator:c["\uceec\ub7fc"]+e})))},getContainerEl:function(){return this.$(".component-container")}}),DetailView:o.extend({className:"column_side",template:null,initialize:function(){o.prototype.initialize.apply(this,arguments),this.isRendered=!1},render:function(){this.isRendered||(this.isRendered=!0,this.$el.html(f({cid:this.clientId})))},appendChildView:function(e){this.$(".component-container").append(e.el)}})}),v=t.define(e.Columns,{name:c["\uceec\ub7fc (\ub2e4\ub2e8)"],group:"design",acceptComponent:e.Column,properties:{count:{defaultValue:2}},initialize:function(t){if(!t||!t.cid){var n=this.getComponentModel(),i=n.get("count");if(!this.hasChildren())for(var s=0;s<i;s++){var o=r.createComponent(e.Column,this.getCid());this.addComponent(o.toJSON())}}},OptionView:u.extend({renderBody:function(){this.$el.html(l({lang:p,model:this.model.toJSON()}))},_updateSelect:function(e){var t=$(e.currentTarget),n=t.val(),r=t.attr("name"),i=this.model.toJSON().count,s=$("[data-cid="+this.clientId+"]").find("[data-type=column]").last().find(".form-component").length>0;if(n<i&&s){var o=this;$.goConfirm(c["3\ub2e8\ucef4\ud3ec\ub10c\ud2b8\uc0ad\uc81c\uacbd\uace0"],c["3\ub2e8\ucef4\ud3ec\ub10c\ud2b8\uc0ad\uc81c\uc124\uba85"],_.bind(function(){o.model.set(r,n)}),_.bind(function(){e.preventDefault(),$(e.currentTarget).val(i)}),h["\uc0ad\uc81c"])}else this.model.set(r,n)}}),FormView:s.extend({initialize:function(){s.prototype.initialize.apply(this,arguments),this.$el.addClass("column"),this.isRendered=!1,this.model.on("change:count",$.proxy(function(){var t=Number(this.$(".column_inner > .column_side").length),n=Number(this.model.toJSON().count);if(n>t){var i=r.getComponent(this.clientId),s=r.createComponent(e.Column,this.getCid()),o=s.toJSON();i.addComponent(o),i.getFormView().renderNode(),this.components.push(o)}else if(n<t){var u=r.getComponent(this.components.last().cid);r.getComponent(this.clientId).removeComponent(u),this.removeChildView(u),this.components.pop()}},this))},render:function(){this.isRendered||(this.isRendered=!0,this.$body.addClass("column_box"),this.$body.html(a({editable:this.editable,componentTitle:c["\uceec\ub7fc \uc601\uc5ed"]})))},appendChildView:function(e){this.$(".column-container").append(e.el)},removeChildView:function(e){e.remove()}}),DetailView:o.extend({initialize:function(){o.prototype.initialize.apply(this,arguments),this.$el.addClass("column"),this.isRendered=!1},render:function(){this.isRendered||(this.isRendered=!0,this.$body.addClass("column_box"),this.$body.html(a({editable:this.editable})))},appendChildView:function(e){this.$(".column-container").append(e.el)}})});n.addComponent(d),n.addComponent(v)});