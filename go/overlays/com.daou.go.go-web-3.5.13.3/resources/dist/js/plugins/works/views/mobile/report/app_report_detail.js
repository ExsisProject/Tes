define("works/views/mobile/report/app_report_detail",function(require){var e=require("works/models/applet_baseconfig"),t=require("works/views/app/report/works_report_gridstack_manager"),n=require("hgn!works/components/report/mobile/editor_header"),r=require("views/mobile/header_toolbar"),i=require("components/backdrop/backdrop"),s=require("works/models/report"),o=require("works/collections/fields");return Backbone.View.extend({events:{"click span[el-output]":"_onClickOutput"},initialize:function(t){this.appletId=t.appletId,this.reportId=t.reportId,this.isCrete=!1,this.fields=new o([],{appletId:this.appletId,includeProperty:!0}),this.report=new s({appletId:this.appletId,reportId:this.reportId}),this.baseConfigModel=new e({id:this.appletId})},render:function(){return $.when(this.report.fetch(),this.fields.fetch(),this.baseConfigModel.fetch()).then($.proxy(function(){this.unBindEvent(),this.$el.append(n({title:this.report.get("title"),writer:this.report.get("writerName"),createdAt:this.report.get("createdAt")})),this.gridManger=new t({appletId:this.appletId,reportId:this.reportId,fields:this.fields,report:this.report}),this.gridManger.render(),$("ul.report_btn_list").hide(),$("span[el-output]").hide(),$("a[el-save]").hide(),$("a[el-setting]").hide(),$("a[el-pdf-export]").show(),$("a[el-email-export]").show();var e={isPrev:!0};this.gridManger.disable(),r.render(e),this.resizeContent(),this.bindEvent()},this)),this},_onClickOutput:function(e){this.backdropView=new i,this.backdropView.backdropToggleEl=$("#output_selector");if(this.backdropView.backdropToggleEl.is(":visible")){this.backdropView.backdropToggleEl.hide();return}this.backdropView.linkBackdrop($(e.currentTarget))},_setTitle:function(e){$("span.tit").empty(),$("span.tit").append(e)},resizeContent:function(){var e=this;setTimeout(function(){e.iscroll=GO.util.initDetailiScroll("reportDetailWrapper","iScrollContentWrap","reportContentWrapper"),e.originalScale=e.iscroll.options.zoomMin},500)},copyUrl:function(e){GO.util.copyUrl(e)},bindEvent:function(){this.$el.on("vclick","#copyUrl",$.proxy(this.copyUrl,this))},unBindEvent:function(){this.$el.off("vclick","#copyUrl")}})});