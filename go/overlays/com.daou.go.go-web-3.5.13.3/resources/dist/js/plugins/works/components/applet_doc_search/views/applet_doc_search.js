define("works/components/applet_doc_search/views/applet_doc_search",function(require){var e=require("i18n!nls/commons"),t=require("i18n!works/nls/works"),n={},r=require("works/components/doc_list/views/refer_doc_list"),i=5;return Backbone.View.extend({events:{},initialize:function(e){this.fieldsOfIntegrationApp=e.fieldsOfIntegrationApp,this.integration=e.integration,this.selfIntegration=e.selfIntegration,this.docs=e.docs,this.useToolbar=e.useToolbar,this.pageSize=e.pageSize?e.pageSize:i},render:function(){var e=this.fieldsOfIntegrationApp?_.isObject(this.fieldsOfIntegrationApp.findWhere({cid:this.model.get("integrationFieldCid")})):!1,n=this.model.get("selectedDisplayFields")||[],r=!!n.length,i=this.selfIntegration?this.selfIntegration:this.integration.getListAuthByCid(this.model.get("integrationAppletId"));return!e||!r||!i||!this.model.get("integrationAppletId")?this.model.get("integrationAppletId")?e?r?this.$el.html(this._descTmpl(t["\uc5f0\ub3d9 \uad8c\ud55c \uc124\uba85"])):this.$el.html(this._descTmpl(t["\uac80\uc0c9 \ub178\ucd9c \ud56d\ubaa9 \uc5c6\uc74c \uc124\uba85"])):this.$el.html(this._descTmpl(t["\uc0ad\uc81c\ub41c \uc5f0\ub3d9 \uc124\uba85"])):this.$el.html(this._descTmpl(t["\uc5f0\ub3d9 \uc571 \uc5c6\uc74c \uc124\uba85"])):(this._renderDocList(),this.$el.html(this.docListView.el)),this},search:function(e){this.docListView&&this.docListView.search(e)},_renderDocList:function(){this.docListView=new r({collection:this.docs,fields:this.fieldsOfIntegrationApp,columnFields:this._getColumnFields(),className:"dataTables_wrapper",integrationFieldCid:this.model.get("integrationFieldCid"),appletId:this.model.get("integrationAppletId"),checkbox:!1,readOnly:!0,usePageSize:!1,useBottomButton:!1,useTableScroll:!0,useProfile:!1,useToolbar:this.useToolbar,trClass:"pointer",buttons:[{render:$.proxy(function(){return this._searchInputTmpl()},this)}],columns:[]}),this.docListView.dataFetch().done($.proxy(function(){this.docListView.render(),this.docs.setQueryString(""),this.docs.setPageSize(this.pageSize,!1),this.docs.navigationSize=this.pageSize,this.docs.fetch({success:_.bind(function(){this.trigger("rendered:appletDocSearch")},this),error:$.proxy(function(e,t){this._renderErrorDesc(t),this.trigger("rendered:appletDocSearch")},this)})},this)),this.docListView.on("ajaxFail",$.proxy(function(e){this._renderErrorDesc(e)},this))},_descTmpl:function(e){return Hogan.compile(['<p class="desc" id="desc">',e,"</p>"].join("")).render()},_getColumnFields:function(){var e=this.fieldsOfIntegrationApp.getFields(this.model.get("selectedDisplayFields"));return e.filter(function(e){return this.fieldsOfIntegrationApp.findWhere({cid:e.get("cid")})},this)},_renderErrorDesc:function(e){var n="";e.status==="403"?n=t["\uc5f0\ub3d9 \uad8c\ud55c \uc124\uba85"]:e.status==="404"&&e.statusText=="not.found"&&(n=t["\uc0ad\uc81c\ub41c \uc5f0\ub3d9 \uc124\uba85"]),this.$el.html(this._descTmpl(n))},_searchInputTmpl:function(){return Hogan.compile(['<input type="txt_mini" id="searchKeyword" class="txt_mini" />','<span class="btn_minor_s" id="searchBtn">','<span class="txt">',e["\uac80\uc0c9"],"</span>","</span>"].join("")).render({lang:n})}})});