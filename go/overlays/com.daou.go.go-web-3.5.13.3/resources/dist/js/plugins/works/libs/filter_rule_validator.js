define("works/libs/filter_rule_validator",function(require){var e=require("i18n!works/nls/works"),t={"\ubb38\ubc95\uc5d0 \ub9de\uc9c0 \uc54a\ub294 \uc785\ub825\uc774 \uc788\uc2b5\ub2c8\ub2e4.":e["\ubb38\ubc95\uc5d0 \ub9de\uc9c0 \uc54a\ub294 \uc785\ub825\uc774 \uc788\uc2b5\ub2c8\ub2e4."],"AND \ub610\ub294 OR \ub17c\ub9ac\uc5f0\uc0b0\uc790\ub97c \uc608\uc0c1\ud588\uc9c0\ub9cc \ub2e4\ub978 \ubb38\uc790\uac00 \uc785\ub825\ub418\uc5c8\uc2b5\ub2c8\ub2e4.":e["AND \ub610\ub294 OR \ub17c\ub9ac\uc5f0\uc0b0\uc790\ub97c \uc608\uc0c1\ud588\uc9c0\ub9cc \ub2e4\ub978 \ubb38\uc790\uac00 \uc785\ub825\ub418\uc5c8\uc2b5\ub2c8\ub2e4."],"\ud544\ud130\uba85\uc774 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.":e["\ud544\ud130\uba85\uc774 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4."],"\ud544\ud130\uba85\uc774 \uc720\ud6a8\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.":e["\ud544\ud130\uba85\uc774 \uc720\ud6a8\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."],"\ubb38\uc790\ub97c \uc608\uc0c1\ud588\uc9c0\ub9cc":e["\ubb38\uc790\ub97c \uc608\uc0c1\ud588\uc9c0\ub9cc"],"\ubb38\uc790\uac00 \uc785\ub825\ub418\uc5c8\uc2b5\ub2c8\ub2e4.":e["\ubb38\uc790\uac00 \uc785\ub825\ub418\uc5c8\uc2b5\ub2c8\ub2e4."],"\uacf5\ubc31\ubb38\uc790\ub97c \uc608\uc0c1\ud588\uc9c0\ub9cc \ub2e4\ub978 \ubb38\uc790\uac00 \uc785\ub825\ub418\uc5c8\uc2b5\ub2c8\ub2e4.":e["\uacf5\ubc31\ubb38\uc790\ub97c \uc608\uc0c1\ud588\uc9c0\ub9cc \ub2e4\ub978 \ubb38\uc790\uac00 \uc785\ub825\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]},n=function(e,t){function n(e){if(e===undefined)throw"Input param required.";this.input=e,this.cursor=0}if(e===undefined)throw"filters param required.";if(t===undefined)throw"rule param required.";this.filters=e,this.scanner=new n(t.trim()),n.prototype.hasNext=function(){return this.input.length>this.cursor},n.prototype.next=function(e){e||(e=1);var t=this.input.substring(this.cursor,this.cursor+e);return this.cursor+=e,t},n.prototype.nextUntil=function(e){var t="";while(this.hasNext()){var n=this.next();if(n==e){this.backward();break}t+=n}return t},n.prototype.lookahead=function(e){return e||(e=1),this.input.substring(this.cursor,this.cursor+e)},n.prototype.lookaheadIgnoreSpace=function(){var e=0,t=0;while(this.hasNext()){e=this.input.charAt(this.cursor+t++);if(!/\s/.test(e))break}return e},n.prototype.backward=function(e){e||(e=1),this.cursor-=e},n.prototype.forward=function(){this.cursor++},n.prototype.getCursor=function(){return this.cursor}};return n.prototype.createResult=function(e,t,n,r){if(e===undefined)throw"validate parameter cannot be empty.";return{validate:e,beginCursor:t,endCursor:n,debugMessage:r}},n.prototype.evaluate=function(){if(!this.scanner.hasNext())return this.createResult(!0);try{this.scanQuery()}catch(t){return t}return this.scanner.hasNext()?this.createResult(!1,this.scanner.getCursor(),this.scanner.input.length,e["\ubb38\ubc95\uc5d0 \ub9de\uc9c0 \uc54a\ub294 \uc785\ub825\uc774 \uc788\uc2b5\ub2c8\ub2e4."]):this.createResult(!0)},n.prototype.scanQuery=function(){this.scanStatement();while(this.scanner.hasNext()&&this.scanner.lookaheadIgnoreSpace()!=")")this.scanSpace(),this.scanOperator(),this.scanSpace(),this.scanStatement()},n.prototype.scanOperator=function(){var t=0;"OR"==this.scanner.lookahead(2).toUpperCase()?t=2:"AND"==this.scanner.lookahead(3).toUpperCase()&&(t=3);if(t>0){this.scanner.next(t);return}var n=this.scanner.getCursor();this.scanner.nextUntil(" ");var r=this.scanner.getCursor();throw this.createResult(!1,n,r,e["AND \ub610\ub294 OR \ub17c\ub9ac\uc5f0\uc0b0\uc790\ub97c \uc608\uc0c1\ud588\uc9c0\ub9cc \ub2e4\ub978 \ubb38\uc790\uac00 \uc785\ub825\ub418\uc5c8\uc2b5\ub2c8\ub2e4."])},n.prototype.scanStatement=function(){var e=this.scanner.lookahead();if(e=="("){this.scanChar("("),this.skipSpace(),this.scanQuery(),this.skipSpace(),this.scanChar(")");return}this.scanFilter()},n.prototype.scanFilter=function(){var t="",n=this.scanner.getCursor();while(this.scanner.hasNext()){var r=this.scanner.next();if(/\s|\(|\)/.test(r)){this.scanner.backward();break}t+=r}var i=this.scanner.getCursor();if(t=="")throw this.createResult(!1,n,i,e["\ud544\ud130\uba85\uc774 \ub204\ub77d\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]);if(this.filters.indexOf(t)<0)throw this.createResult(!1,n,i,e["\ud544\ud130\uba85\uc774 \uc720\ud6a8\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."])},n.prototype.scanChar=function(t){var n=this.scanner.lookahead();if(t==n){this.scanner.forward();return}throw this.createResult(!1,this.scanner.getCursor(),this.scanner.getCursor()+1,"'"+t+"' "+e["\ubb38\uc790\ub97c \uc608\uc0c1\ud588\uc9c0\ub9cc"]+" '"+n+"' "+e["\ubb38\uc790\uac00 \uc785\ub825\ub418\uc5c8\uc2b5\ub2c8\ub2e4."])},n.prototype.scanSpace=function(){if(!this.skipSpace())throw this.createResult(!1,this.scanner.getCursor(),this.scanner.getCursor()+1,e["\uacf5\ubc31\ubb38\uc790\ub97c \uc608\uc0c1\ud588\uc9c0\ub9cc \ub2e4\ub978 \ubb38\uc790\uac00 \uc785\ub825\ub418\uc5c8\uc2b5\ub2c8\ub2e4."])},n.prototype.skipSpace=function(){var e=!1;while(this.scanner.hasNext()&&/\s/.test(this.scanner.lookahead()))this.scanner.next(),e=!0;return e},n.prototype.cursor=function(){return this.scanner.getCursor()},n});