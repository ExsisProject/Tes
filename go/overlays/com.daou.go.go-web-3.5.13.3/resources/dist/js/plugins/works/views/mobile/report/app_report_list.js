define("works/views/mobile/report/app_report_list",function(require){var e=require("hgn!works/components/report/mobile/report_list"),t=require("views/mobile/header_toolbar"),n=require("works/models/applet_baseconfig"),r=require("works/components/report/models/report_list"),i=require("works/views/mobile/report/app_report_list_item"),s=require("i18n!works/nls/works"),o={"\ub9ac\ud3ec\ud2b8 \ubaa9\ub85d":s["\ub9ac\ud3ec\ud2b8 \ubaa9\ub85d"],"\uc990\uaca8\ucc3e\ub294 \ub9ac\ud3ec\ud2b8":s["\uc990\uaca8\ucc3e\ub294 \ub9ac\ud3ec\ud2b8"]},u=Hogan.compile(['<div id="report_empty_wrap" class="content_page" style="height:847px;">\n<div class="report_nulldata" style="margin-top: 200px;text-align: center;">\n<span class="img_nulldata"></span>\n<p class="desc">'+s["\ub9ac\ud3ec\ud2b8 \uacf5\ubc31 \ubb38\uad6c"]+"</p>\n"+"</div>\n"+"</div>\n"].join(""));return Backbone.View.extend({events:{"refresh a[el-favorite]":"_reportLoad"},initialize:function(e){this.appletId=e.appletId,this.reports=new r({appletId:this.appletId}),this.baseConfigModel=new n({id:this.appletId})},render:function(){return this.$el.html(e({lang:o})),this.$el.append(u.render()),$.when(this.baseConfigModel.fetch()).then($.proxy(function(){this.isAdmin=this.baseConfigModel.isAdmin(GO.session("id")),this.isAdmin||$("a[el-create]").hide();var e={title:this.baseConfigModel.get("name"),isList:!0,isSideMenu:!0,isHome:!0,isSearch:!0};t.render(e),this._reportLoad()},this)),this},_reportLoad:function(){this.reports.clear(),$.when(this.reports.fetch()).then($.proxy(function(){if(this.reports.isEmpty()){this.$("#reports_wrap").hide(),this.$("#report_empty_wrap").show();return}this.$("#reports_wrap").show(),this.$("#report_empty_wrap").hide(),this.$(".all_wrap").empty(),this.$(".favorite_wrap").empty(),_.forEach(this.reports.getAll(),function(e){var t=new i({appletId:this.appletId,isAdmin:this.isAdmin,item:e,content:this.$(".all_wrap")});t.render()},this);var e=this.reports.getFavorites();if(e.length==0){this.$(".favorite_wrap").closest(".wrap_report").hide();return}this.$(".favorite_wrap").closest(".wrap_report").show(),_.forEach(e,function(e){var t=new i({appletId:this.appletId,isAdmin:this.isAdmin,item:e,content:this.$(".favorite_wrap")});t.render()},this)},this))}})});