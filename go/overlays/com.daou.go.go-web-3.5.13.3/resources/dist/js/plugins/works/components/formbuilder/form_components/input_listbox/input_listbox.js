define("works/components/formbuilder/form_components/input_listbox/input_listbox",function(require){var e=require("app"),t=require("works/component_type"),n=require("works/components/formbuilder/core/form_component"),r=require("works/components/formbuilder/core/component_registry"),i=require("works/components/formbuilder/core/views/base_form"),s=require("works/components/formbuilder/core/views/base_detail"),o=require("works/components/formbuilder/core/views/base_option"),u=require("works/components/formbuilder/core/views/option_list_setting"),a=require("works/components/formbuilder/form_components/input_listbox/input_listbox_validator"),f=require("hgn!works/components/formbuilder/form_components/input_listbox/form"),l=require("hgn!works/components/formbuilder/form_components/input_listbox/detail"),c=require("hgn!works/components/formbuilder/form_components/input_listbox/option"),h=require("i18n!works/nls/works"),p=require("i18n!nls/commons"),d=require("works/libs/util"),v={"\uc774\ub984":p["\uc774\ub984"],"\uc124\uba85":h["\uc124\uba85"],"\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694":h["\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."],"\uc124\uba85\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694":h["\uc124\uba85\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."],"\ud234\ud301\uc73c\ub85c \ud45c\ud604":h["\ud234\ud301\uc73c\ub85c \ud45c\ud604"],"\ud544\uc218 \uc785\ub825 \ucef4\ud3ec\ub10c\ud2b8":h["\ud544\uc218 \uc785\ub825 \ucef4\ud3ec\ub10c\ud2b8"],"\uae30\ubcf8\uac12":h["\uae30\ubcf8\uac12"],"\uc138\ubd80\ud56d\ubaa9":h["\uc138\ubd80\ud56d\ubaa9"],"\ucd94\uac00":p["\ucd94\uac00"],"\uc0ad\uc81c":p["\uc0ad\uc81c"],"\uc120\ud0dd \ucd5c\uc18c \uac1c\uc218":h["\uc120\ud0dd \ucd5c\uc18c \uac1c\uc218"],"\uc120\ud0dd \ucd5c\ub300 \uac1c\uc218":h["\uc120\ud0dd \ucd5c\ub300 \uac1c\uc218"],"\uc774\ub984\uc228\uae30\uae30":h["\uc774\ub984\uc228\uae30\uae30"]},m={minCheckedCount:0,maxCheckedCount:3},g=o.extend({customEvents:{"keypress input[name=minCheckedCount], input[name=maxCheckedCount]":"onlyNumber","keyup input[name=minCheckedCount], input[name=maxCheckedCount]":"replaceNumber","click span#add_option":"_addOptionItem","blur input[name=minCheckedCount], input[name=maxCheckedCount]":"_checkOptionValidate"},renderBody:function(){this.$el.html(c({lang:v,model:this.model.toJSON()})),this._attachOptionListItemView()},remove:function(){o.prototype.remove.apply(this,arguments),this.optionListSettingView&&this.optionListSettingView.remove()},_attachOptionListItemView:function(){this.optionListSettingView=new u({model:this.model,checkType:u.TYPE_CHECKBOX}),this.$(".option-item-list").append(this.optionListSettingView.el),this.optionListSettingView.render()},_addOptionItem:function(){this.optionListSettingView&&this.optionListSettingView.addOptionItem()},_checkOptionValidate:function(e){var t=$(e.currentTarget),n=t.attr("name"),r=t.val();r==""&&_.has(m,n)&&(t.val(m[n]),this.model.set(n,m[n]));var i=$("input[name=minCheckedCount]");i.val()>$("input[name=maxCheckedCount]").val()&&(i.val(m.minCheckedCount),this.model.set("minCheckedCount",m.minCheckedCount))},onlyNumber:function(e){var t=e.keyCode?e.keyCode:e.which;if(!d.isNumber(t))return e.preventDefault(),!1},replaceNumber:function(e){var t=e.keyCode?e.keyCode:e.which;if(!d.isNumber(t)){var n=$(e.currentTarget).val().replace(/[^0-9]/gi,"");return $(e.currentTarget).val(n),e.preventDefault(),!1}}}),y=i.extend({events:{"change input":"_onChange"},initialize:function(){i.prototype.initialize.apply(this,arguments),this.validator=new a},render:function(){var t=this,n=this.appletDocModel.get(this.clientId);n||(n=[]);var r=new Backbone.Model($.extend(!0,{},this.model.toJSON()));(this.appletDocModel.id||!this.appletDocModel.id&&n.length)&&_.each(r.get("items"),function(e){e.selected=_.contains(n,parseInt(e.value))}),n.length<1&&!this.isEditable()&&!this.appletDocModel.id&&this.isShow()&&_.each(r.get("items"),function(e){e.selected&&n.push(e.value)}),this.$body.html(f({model:this.model.toJSON(),label:e.util.escapeHtml(this.model.get("label")),clientId:this.clientId,isDisabled:this.isEditable()})),n.length>0&&!this.isEditable()&&_.each(n,function(e){t.$('input[value="'+e+'"]').prop("checked",!0)}),this.isShow()&&this._onChange()},_onChange:function(){this._changeValue.call(this,this._getValue()),this.appletDocModel.set(this.getDataFromView())},_getValue:function(){var e=this.$("input[type=checkbox]:checked"),t=[];return $.each(e,function(e,n){t.push(parseInt(n.value))}),t},getDataFromView:function(){var e={};return e[this.clientId]=this._getValue(),e},validate:function(){var e=this.$(".txt_list_box"),t=this.$("input[type=checkbox]:checked"),n=this.validator.validate({count:t.length},this.model.toJSON());return n.isValid||this.printErrorTo(e,n.message),n.isValid}}),b=s.extend({render:function(){if(!this._getVisible())return;var t=this.model.get("items"),n=this.appletDocModel.get(this.clientId),r="";n&&$.each(t,function(e,t){$.each(n,function(e,n){t.value==n&&(r==""?r=t.displayText:r+=", "+t.displayText)})}),this.$body.html(l({model:this.model.toJSON(),label:e.util.escapeHtml(this.model.get("label")),userData:r}))},getTitle:function(){var e=this.model.toJSON(),t=this.appletDocModel.get(this.clientId);return _.each(e.items,function(e){e.selected=_.indexOf(t,parseInt(e.value))!=-1}),_.pluck(_.where(e.items,{selected:!0}),"displayText").join(", ")}}),w=n.define(t.ListBox,{name:h["\ub9ac\uc2a4\ud2b8\ubc15\uc2a4"],valueType:"SELECTS",group:"basic",properties:{label:{defaultValue:h["\ub9ac\uc2a4\ud2b8\ubc15\uc2a4"]},hideLabel:{defaultValue:!1},guide:{defaultValue:""},guideAsTooltip:{defaultValue:!0},required:{defaultValue:!1},items:{defaultValue:[{value:"0",displayText:h["\uc635\uc1581"],selected:!0},{value:"1",displayText:h["\uc635\uc1582"],selected:!1},{value:"2",displayText:h["\uc635\uc1583"],selected:!1}]},minCheckedCount:{defaultValue:m.minCheckedCount},maxCheckedCount:{defaultValue:m.maxCheckedCount}},OptionView:g,FormView:y,DetailView:b});r.addComponent(w)});