define("works/components/list_manager/views/list_manager_column_item",function(require){var e=require("i18n!nls/commons"),t=require("i18n!works/nls/works"),n={"\uceec\ub7fc\uba85 \ubcc0\uacbd":t["\uceec\ub7fc\uba85 \ubcc0\uacbd"],"\uc0ad\uc81c":e["\uc0ad\uc81c"],"\uc218\uc815":e["\uc218\uc815"],"\uc81c\ubaa9\uc73c\ub85c \uc9c0\uc815":t["\uc81c\ubaa9\uc73c\ub85c \uc9c0\uc815"],"\ub0b4\ub9bc\ucc28\uc21c\uc73c\ub85c \uc815\ub82c":t["\ub0b4\ub9bc\ucc28\uc21c\uc73c\ub85c \uc815\ub82c"],"\uc624\ub984\ucc28\uc21c\uc73c\ub85c \uc815\ub82c":t["\uc624\ub984\ucc28\uc21c\uc73c\ub85c \uc815\ub82c"]},r=require("components/backdrop/backdrop"),i=require("hgn!works/components/list_manager/templates/list_manager_column_item");return r.extend({tagName:"td",initialize:function(e){this.isPrivate=e.isPrivate,this.$el.attr("el-cid",this.model.get("fieldCid")),this.model.on("unusedItem",this._onChangeUsed,this),this.model.on("change:columnName",this._onChangeName,this),this.columns=e.columns},events:{"click [el-delete]":"_onClickDelete","click [el-edit]":"_onClickEdit","click [el-title]":"_onClickSetTitle","click [el-sort]":"_onClickSort","click [el-toggle-management-layer]":"_onClickToggleManagementLayer"},render:function(){return this.$el.html(i({lang:n,model:this.model.toJSON(),columnName:this.model.get("columnName")||this.model.get("fieldLabel"),isDesc:this.model.isDesc(),titleAvailable:!_.contains(["status","docNo"],this.model.get("fieldCid"))&&!this.isPrivate})),this},_onChangeUsed:function(){this.model.off("unusedItem"),this.remove(),this.columns.remove([this.model])},_onClickDelete:function(){this.model.set("isUsed",!1),this.model.collection.trigger("unuseColumn",this.model),this.remove()},_onClickEdit:function(t){var r=this.model.get("columnName")||this.model.get("fieldLabel"),i=['<div class="content">','<p class="desc">',n["\uceec\ub7fc\uba85 \ubcc0\uacbd"],"</p>",'<div class="form_type">','<input el-new-name class="txt_mini w_max" type="text" value="'+r+'">',"</div>","</div>"].join("");this.popup=$.goPopup({modal:!0,pclass:"layer_normal layer_public_list",header:n["\uceec\ub7fc\uba85 \ubcc0\uacbd"],width:500,contents:i,buttons:[{btext:e["\ud655\uc778"],btype:"confirm",callback:$.proxy(function(){var e=this.popup.find("input[el-new-name]").val();this.model.set("columnName",e)},this)},{btext:e["\ucde8\uc18c"],btype:"normal",callback:function(){}}]}),this.backdropLayer.toggle(!1),t.stopPropagation()},_onClickSetTitle:function(){this.$el.trigger("setTitleColumn",this.model.get("fieldCid"))},_onClickSort:function(e){var t=$(e.currentTarget).attr("el-sort").toUpperCase();this.$el.trigger("setSortColumn",[this.model.get("fieldCid"),t])},_onClickToggleManagementLayer:function(e){this.backdropLayer||this._initBackdrop(e)},_onChangeName:function(){var e=this.model.get("columnName")||this.model.get("fieldLabel");this.$("[el-name]").html(e)},_initBackdrop:function(){this.backdropLayer=this.$("[el-column-management-layer]"),this.backdropToggleEl=this.backdropLayer,this.bindBackdrop(),this.linkBackdrop(this.$("[el-toggle-management-layer]"))}})});