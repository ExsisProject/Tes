define("works/views/app/integration_manager",function(require){var e=require("i18n!nls/commons"),t=require("i18n!works/nls/works"),n={"\uc800\uc7a5":e["\uc800\uc7a5"],"\ucde8\uc18c":e["\ucde8\uc18c"],"\uad00\ub9ac":t["\uad00\ub9ac"],"\uad00\ub9ac \ud648\uc73c\ub85c \uc774\ub3d9":t["\uad00\ub9ac \ud648\uc73c\ub85c \uc774\ub3d9"],"\ud574\ub2f9 \uc571\uc73c\ub85c \uc774\ub3d9":t["\ud574\ub2f9 \uc571\uc73c\ub85c \uc774\ub3d9"],"\ud398\uc774\uc9c0 \uc81c\ubaa9":t["\uc571\uac04 \ub370\uc774\ud130 \uc5f0\ub3d9"],"\ud398\uc774\uc9c0 \uc124\uba85":t["\uc571\uac04 \ub370\uc774\ud130 \uc5f0\ub3d9 \uc124\uba85"],"\ud5c8\uc6a9":e["\ud5c8\uc6a9"],"\ube44\ud5c8\uc6a9":e["\ube44\ud5c8\uc6a9"],"\uc774 \uc571\uc744 \ucc38\uc870\ud558\uace0 \uc788\ub294 \uc571 \ubaa9\ub85d":t["\uc774 \uc571\uc744 \ucc38\uc870\ud558\uace0 \uc788\ub294 \uc571 \ubaa9\ub85d"],"\uc5f0\uacb0\ub41c \uc571":t["\uc5f0\uacb0\ub41c \uc571"],"\uc5f0\uacb0 \ucef4\ud3ec\ub10c\ud2b8":t["\uc5f0\uacb0 \ucef4\ud3ec\ub10c\ud2b8"],"\uc2e0\uccad\uc790":t["\uc2e0\uccad\uc790"],"\ubaa9\ub85d \uc870\ud68c \ud5c8\uc6a9":t["\ubaa9\ub85d \uc870\ud68c \ud5c8\uc6a9"],"\uc0c1\uc138 \ubcf4\uae30 \ud5c8\uc6a9":t["\uc0c1\uc138 \ubcf4\uae30 \ud5c8\uc6a9"],"\ub2e4\ub978 \uc571\uc758 \ub370\uc774\ud130\ub97c \ucc38\uc870\ud558\uace0 \uc788\ub294 \ucef4\ud3ec\ub10c\ud2b8":t["\ub2e4\ub978 \uc571\uc758 \ub370\uc774\ud130\ub97c \ucc38\uc870\ud558\uace0 \uc788\ub294 \ucef4\ud3ec\ub10c\ud2b8"],"\ud56d\ubaa9\uba85":t["\ucef4\ud3ec\ub10c\ud2b8\uba85"],"\uc5f0\ub3d9\uc571":t["\uc5f0\ub3d9\uc571"],"\uc5f0\uacb0 \uad8c\ud55c":t["\uc5f0\uacb0 \uad8c\ud55c"],"\ubcf4\uae30 \uad8c\ud55c":t["\ubcf4\uae30 \uad8c\ud55c"],"\ucc38\uc870\ubaa9\ub85d \uc124\uba85":t["\ucc38\uc870\ubaa9\ub85d \uc124\uba85"],"\ucc38\uc870\ucef4\ud3ec\ub10c\ud2b8 \uc124\uba85":t["\ucc38\uc870\ucef4\ud3ec\ub10c\ud2b8 \uc124\uba85"],"\ubaa9\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4":t["\ubaa9\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."]},r=require("works/views/app/base_setting"),i=require("works/views/app/public_fields_setting_button"),s=require("works/collections/fields"),o=require("works/components/integration_manager/models/integration"),u=require("hgn!works/components/integration_manager/templates/producers"),a=require("hgn!works/components/integration_manager/templates/consumers"),f=require("hgn!works/components/integration_manager/templates/integration_manager");return r.extend({className:"go_content go_renew go_works_home app_temp",suppressedConsumers:null,suppressedProducers:null,events:_.extend(r.prototype.events,{"click a[data-id]":"_onClickIntegrationApp"}),initialize:function(e){this.lang=n,r.prototype.initialize.call(this,e),this.fields=new s([],{appletId:this.appletId}),this.fields.fetch(),this.model=new o({appletId:this.appletId}),this.model.fetch()},render:function(){return r.prototype.render.call(this),this.$("[el-content]").prepend(f({lang:n})),this._renderProducers(),this._renderConsumers(),$.when(this.fields.deferred,this.model.deferred).done($.proxy(function(){this._renderListAndButton()},this)),this},_renderListAndButton:function(){this.model.mergeFromFieldsAndParse(this.fields),this._renderProducers(),this._renderConsumers(),this._renderSuppressedFieldsButton()},_renderSuppressedFieldsButton:function(){_.each(this.$("[el-tool-area]"),function(e){var t=$(e),n=t.attr("data-type"),r=this.fields.getColumnFields();this["suppressed"+GO.util.initCap(n)]=new i({type:n,fields:r.reset(r.toJSON()),suppressedFields:this.model.get("suppressedFieldsTo"+GO.util.initCap(n))}),$(e).append(this["suppressed"+GO.util.initCap(n)].render().el)},this)},_renderProducers:function(){this.$("#producers").html(u({lang:n,model:this.model.toJSON()}))},_renderConsumers:function(){this.$("#consumers").html(a({lang:n,model:this.model.toJSON()}))},_setConsumerPrivileges:function(){var e=_.map(this.$("#consumers").find("tr"),function(e){return _.map($(e).find("input:checked"),function(e){return $(e).val()})});_.each(this.model.get("consumers"),function(t,n){t.privileges=e[n]})},_setPublicFields:function(){this.model.set("suppressedFieldsToConsumers",this.suppressedConsumers.getSuppressedFields()),this.model.set("suppressedFieldsToProducers",this.suppressedProducers.getSuppressedFields())},_onClickSave:function(){this._setPublicFields(),this._setConsumerPrivileges(),this.model.save({},{type:"PUT",success:function(){$.goMessage(e["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."])},error:function(e,t){console.log(e),console.log(t)}})},_onClickCancel:function(){this._renderListAndButton()},_onClickIntegrationApp:function(e){var t=$(e.currentTarget).attr("data-id");GO.router.navigate("works/applet/"+t+"/home",!0)}})});