define("works/components/formbuilder/core/views/option_list_setting",function(require){var e=require("backbone"),t=require("hogan"),n=require("text!works/components/formbuilder/core/templates/option_list_setting.html"),r=t.compile("{{#model.items}}{{> optionItemList}}{{/model.items}}"),i=require("i18n!works/nls/works"),s=require("i18n!nls/commons"),o=require("works/constants/works"),u={remove:s["\uc0ad\uc81c"]},a=function(){var e=t.compile(n);return e.render.apply(e,arguments)},f="input[name=defaultValue]",l="input[name=displayText]",c="checkbox",h="radio",p=o.WORKS_COMPONENTS.WORKS_REQUIRED_VAL;require("jquery.ui");var d=e.View.extend({tagName:"ul",className:"tool_attr_list",checkType:h,events:{"keyup input[name=displayText]":"_resetModel","click .ic_remove":"_deleteOptionItem","click input[name=defaultValue]":"_resetModel"},initialize:function(e){this.checkType=(e||{}).checkType||h},render:function(){this.$el.html(r.render({checkType:this.checkType,model:this.model.toJSON(),lang:u,isDisabled:function(){return this.value==p?!0:!1}},{optionItemList:n})),this._initOptionListItem()},addOptionItem:function(){var e,t,n=this.$('input[name="defaultValue"]');n.length?(e=_.max(n,function(e){return $(e).val()}),t=parseInt($(e).val())+1):t=0,this.$el.append(a({displayText:i["\uc635\uc158"],checkType:this.checkType,value:t,lang:u})),this._resetModel()},checkRequireOptionItem:function(e){e&&$("input[name=defaultValue][value="+p+"]").length<1&&this.$el.prepend(a({displayText:i["\uc120\ud0dd\uc548\ud568"],checkType:this.checkType,value:p,lang:u,isDisabled:!0})),this._forcedOptionCheck(),this._resetModel()},_initOptionListItem:function(){var e=this,t="li";this.$el.sortable({items:t,handle:".drag-handler",stop:function(t,n){e._resetModel()}})},_resetModel:function(){var e=[];this.$("li").each(function(){var t=$(this).find(f).first(),n=$(this).find(l).first();e.push({value:t.val(),displayText:n.val(),selected:t.is(":checked")})}),this.model.set("items",e),this.model.trigger("change")},_deleteOptionItem:function(e){var t=$(e.currentTarget).closest("li");if($("#required").is(":checked")){if(t.find("input[name=defaultValue]").val()==p){$.goSlideMessage(i["\ud544\uc218 \uc785\ub825 \ud56d\ubaa9 \uc0ad\uc81c \uc624\ub958"]);return}if($("input[name=defaultValue][value!="+p+"]").length<2){$.goSlideMessage(i["\ub9c8\uc9c0\ub9c9 \uc635\uc158 \uc0ad\uc81c \uc624\ub958"]);return}}if(!$("#required").is(":checked")){if($("input[name=defaultValue][value="+p+"]").length>0&&$("input[name=defaultValue][value!="+p+"]").length<2&&t.find("input[name=defaultValue]").val()!=p){$.goSlideMessage(i["\ub9c8\uc9c0\ub9c9 \uc635\uc158 \uc0ad\uc81c \uc624\ub958"]);return}if($("input[name=defaultValue][value="+p+"]").length<1&&$("input[name=defaultValue][value!="+p+"]").length<2){$.goSlideMessage(i["\ub9c8\uc9c0\ub9c9 \uc635\uc158 \uc0ad\uc81c \uc624\ub958"]);return}}t.remove(),this._forcedOptionCheck(),this._resetModel()},_forcedOptionCheck:function(){var e=$("input[name=defaultValue]").is(":checked");e||this.$el.find("li:first input[name=defaultValue]").attr("checked","checked").trigger("click")}});return d.TYPE_CHECKBOX=c,d.TYPE_RADIO=h,d});