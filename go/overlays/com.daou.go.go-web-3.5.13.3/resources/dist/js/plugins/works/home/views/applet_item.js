define("works/home/views/applet_item",function(require){var e=require("i18n!works/nls/works"),t=require("i18n!nls/commons"),n={"\uc124\uc815":t["\uc124\uc815"],"\uc990\uaca8\ucc3e\uae30":t["\uc990\uaca8\ucc3e\uae30"],"\uc0c8\ub85c \ub4f1\ub85d\ub41c \uc571":e["\uc0c8\ub85c \ub4f1\ub85d\ub41c \uc571"],"\uc720\uc800 \ub4f1\ub85d \uc544\uc774\ucf58":e["\uc720\uc800 \ub4f1\ub85d \uc544\uc774\ucf58"],"\uc571\uac04 \ub370\uc774\ud130 \uc5f0\ub3d9":e["\uc571\uac04 \ub370\uc774\ud130 \uc5f0\ub3d9"],"\uc571\uac04\uc5f0\ub3d9\uc124\uba85":e["\uc571\uac04\uc5f0\ub3d9\uc124\uba85"],waitingMsg:e["\uc800\uc7a5\uc911 \uba54\uc138\uc9c0"]},r=require("works/libs/util"),i=require("hgn!works/home/templates/applet_item");return Backbone.View.extend({className:"app_item",template:i,favoriteList:null,_savingFlag:!1,events:{"click [data-btn-favorite]":"_toggleFavorite","click .wrap_works_info":"_navigate","click [data-btn-setting]":"goSettingHome"},initialize:function(){this.$el.data("view",this),this.render(),this.listenTo(this.model,"change:favoriteFlag",this.changeFavorite)},render:function(){return this.isVisibleSettingButton=this.model.isAdmin()&&!GO.util.isMobile(),this.$el.empty().append(this.template({lang:n,"favorite?":this.model.isFavorite(),id:this.model.get("id"),name:_.escape(this.model.get("name")),"isRecent?":this.model.isRecent(this.model.get("createdAt")),thumbSmall:this.model.get("thumbSmall"),isVisibleSettingButton:this.isVisibleSettingButton})),this},changeFavorite:function(){this.render()},getAppletId:function(){return this.model.id},_toggleFavorite:function(t){var r=this,i=this.model.isFavorite()?"removeFavorite":"addFavorite";if(this._savingFlag){GO.util.isMobile()?alert(n.waitingMsg):$.goSlideMessage(n.waitingMsg);return}t.preventDefault(),this._savingFlag=!0,this.model[i].call(this.model).done($.proxy(function(){this.model.isFavorite()?$.goMessage(e["\uc990\uaca8\ucc3e\uae30 \uc571\uc73c\ub85c \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]):$.goMessage(e["\uc990\uaca8\ucc3e\uae30 \uc571\uc774 \ud574\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]),this._savingFlag=!1},this)).fail(function(e){console.log(e.stack),r._savingFlag=!1})},_navigate:function(e){e.preventDefault();if($(e.target).is(".btn_star")||$(e.target).parents(".btn_star").length>0)return!1;if($(e.target).is(".btn_set")||$(e.target).parents(".btn_set").length>0)return!1;GO.router.navigate("works/applet/"+this.model.get("id")+"/home",{pushState:!0,trigger:!0})},goSettingHome:function(e){e.preventDefault(),r.goSettingHome(this.model.get("id"))}})});