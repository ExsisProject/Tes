define("works/views/app/doc_content",function(require){function s(e){e.find(".icon-arrow").hasClass("on")?(e.find(".icon-arrow").removeClass("on"),e.find(".txt").text(n["\uc811\uae30"])):(e.find(".icon-arrow").addClass("on"),e.find(".txt").text(n["\ud3bc\uce58\uae30"]))}var e=require("works/components/formbuilder/formbuilder"),t=require("hgn!works/templates/app/doc_content"),n=require("i18n!works/nls/works"),r=require("i18n!nls/commons"),i={"\uc811\uae30":n["\uc811\uae30"],"\uc7a0\uc2dc\ub9cc \uae30\ub2e4\ub824\uc8fc\uc138\uc694":r["\uc7a0\uc2dc\ub9cc \uae30\ub2e4\ub824\uc8fc\uc138\uc694"],needToSetProcess:n["\ud504\ub85c\uc138\uc2a4 \uc0ac\uc6a9\ud558\uae30 \ubc84\ud2bc \ubb38\uad6c"],noSubject:r["\uc81c\ubaa9\uc5c6\uc74c"]};return Backbone.View.extend({attributes:{"el-doc-content":""},className:"build_content_inner",canvasView:null,events:{"click .btn-content-fold":"_toggleContent"},initialize:function(e){this.isPrint=e.isPrint,this.docId=e.docId,this.baseConfigModel=e.baseConfigModel,this.appletFormModel=e.appletFormModel,this.needToSetProcess=this.baseConfigModel.get("useProcess")&&!this.model.get("status"),this.integrationModel=e.integrationModel,this.formName=e.formName,this.mainForm=e.mainForm},render:function(){this.$el.html(t({lang:i,isPrint:this.isPrint,needToSetProcess:this.needToSetProcess,formName:this.formName,mainForm:this.mainForm}));var n=e.createUserComponent(this.appletFormModel.toJSON(),this.model,{type:"detail"},this.integrationModel);return this.canvasView=n.getDetailView(),this.canvasView.setElement(this.$("#fb-canvas-detail").empty()),this.canvasView.renderNode(),n.trigger("detail"),this.listenTo(this.model,"sync",this._onSyncAppletDoc),this},printSubjectAndWorkflowText:function(){this._printSubject(),this._printWorkflowText(),this._printDocNoText()},_printSubject:function(){var e=this._getSubject();this.$("#subject").text(e||i.noSubject)},_printWorkflowText:function(){var e="",t=this.baseConfigModel.get("useProcess"),n=this.model.get("status"),r=n||0;t&&n?(e=n.name,r=n.color):t&&!n?e="-":this.$("#stateArea").closest("span").hide(),this.$("#stateArea").removeClass(function(e,t){return(t.match(/bgcolor\S+/g)||[]).join(" ")}),this.$("#stateArea").addClass("bgcolor"+r),this.$("#stateArea").text(GO.util.unescapeHtml(e))},_printDocNoText:function(){var e=this.baseConfigModel.get("useDocNo"),t=this.model.get("docNo");e&&t?this.$("#docNo").text(n["\ubb38\uc11c\ubc88\ud638"]+": "+GO.util.unescapeHtml(t)):this.$("#docNo").hide()},_getSubject:function(){return e.getDocumentTitle(this.model)},_toggleContent:function(e){var t=$(e.currentTarget);e.preventDefault(),this.canvasView&&(this.canvasView.$el.slideToggle(150),s(t))},_onSyncAppletDoc:function(){this.canvasView.renderNode(),this.printSubjectAndWorkflowText()}})});