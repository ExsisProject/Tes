define("works/views/app/setting_home",function(require){function h(){var e=t.defer();return this.model.fetch({success:e.resolve,error:e.reject}),e.promise}function p(){var e=t.defer();return this.openApiModel.fetch({success:e.resolve,error:e.reject}),e.promise}var e=require("backbone"),t=require("when"),n=require("works/libs/util"),r=require("works/views/app/home/works_home_layout"),i=require("works/views/app/layout/manage_content_top"),s=require("works/models/applet_baseconfig"),o=require("works/models/applet_openapi"),u=require("hgn!works/templates/app/setting_home"),a=require("i18n!works/nls/works"),f=require("works/constants/works");require("jquery.go-popup");var l={"\uae30\ubcf8 \uc815\ubcf4":a["\uae30\ubcf8 \uc815\ubcf4"],"\uae30\ubcf8\uc124\uc815 \uc124\uba85":a["\uae30\ubcf8\uc124\uc815 \uc124\uba85"],"\uc785\ub825 \ud654\uba74":a["\uc785\ub825 \ud654\uba74"],"\uc785\ub825\ud654\uba74 \uc124\uba85":a["\uc785\ub825\ud654\uba74 \uc124\uba85"],"\ubaa9\ub85d \ud654\uba74":a["\ubaa9\ub85d \ud654\uba74"],"\ubaa9\ub85d\ud654\uba74 \uc124\uba85":a["\ubaa9\ub85d\ud654\uba74 \uc124\uba85"],"\ud504\ub85c\uc138\uc2a4":a["\ud504\ub85c\uc138\uc2a4"],"\ud504\ub85c\uc138\uc2a4 \uc124\uba85":a["\ud504\ub85c\uc138\uc2a4 \uc124\uba85"],"\uc811\uadfc \uc81c\uc5b4":a["\uc811\uadfc \uc81c\uc5b4"],"\uc811\uadfc \uc81c\uc5b4 \uc124\uba85":a["\uc811\uadfc \uc81c\uc5b4 \uc124\uba85"],"\ud574\ub2f9 \uc571\uc73c\ub85c \uc774\ub3d9":a["\ud574\ub2f9 \uc571\uc73c\ub85c \uc774\ub3d9"],"\uc571 \uc0ad\uc81c":a["\uc571 \uc0ad\uc81c"],"\uac00\uc774\ub4dc\ud234\ud301":a["\uc571 \uc6b4\uc601\uad00\ub9ac 1\ubd84\uc774\uba74 \ucda9\ubd84\ud569\ub2c8\ub2e4."],"\uac00\uc774\ub4dc":a["\uac00\uc774\ub4dc"],"\ub370\uc774\ud130 \uc77c\uad04 \ub4f1\ub85d":a["\ub370\uc774\ud130 \uc77c\uad04 \ub4f1\ub85d"],"\ub370\uc774\ud130 \uc77c\uad04 \ub4f1\ub85d \uc124\uba85":a["\ub370\uc774\ud130 \uc77c\uad04 \ub4f1\ub85d \uc124\uba85"],"\uae30\ubcf8 \uc815\ubcf4 \uac00\uc774\ub4dc \uc124\uba85":a["\uae30\ubcf8 \uc815\ubcf4 \uac00\uc774\ub4dc \uc124\uba85"],"\uc785\ub825 \ud654\uba74 \uac00\uc774\ub4dc \uc124\uba85":a["\uc785\ub825 \ud654\uba74 \uac00\uc774\ub4dc \uc124\uba85"],"\ubaa9\ub85d \ud654\uba74 \uac00\uc774\ub4dc \uc124\uba85":a["\ubaa9\ub85d \ud654\uba74 \uac00\uc774\ub4dc \uc124\uba852"],"\ud504\ub85c\uc138\uc2a4 \uac00\uc774\ub4dc \uc124\uba85":a["\ud504\ub85c\uc138\uc2a4 \uac00\uc774\ub4dc \uc124\uba85"],"\uc811\uadfc \uc81c\uc5b4 \uac00\uc774\ub4dc \uc124\uba85":a["\uc811\uadfc \uc81c\uc5b4 \uac00\uc774\ub4dc \uc124\uba85"],"\uc571 \uad00\ub9ac \uac00\uc774\ub4dc \uc548\ub0b41":a["\uc571 \uad00\ub9ac \uac00\uc774\ub4dc \uc548\ub0b41"],"\uc571 \uad00\ub9ac \uac00\uc774\ub4dc \uc548\ub0b42":a["\uc571 \uad00\ub9ac \uac00\uc774\ub4dc \uc548\ub0b42"],"\ub3c4\uc6c0\ub9d0 \uc13c\ud130 \ubc14\ub85c\uac00\uae30":a["\ub3c4\uc6c0\ub9d0 \uc13c\ud130 \ubc14\ub85c\uac00\uae30"],"\uc571\uac04 \ub370\uc774\ud130 \uc5f0\ub3d9":a["\uc571\uac04 \ub370\uc774\ud130 \uc5f0\ub3d9"],"\uc571\uac04 \ub370\uc774\ud130 \uc5f0\ub3d9 \uc124\uba85":a["\uc571\uac04 \ub370\uc774\ud130 \uc5f0\ub3d9 \uc124\uba85"],"\ub370\uc774\ud130 \ubaa9\ub85d \ub2e4\uc6b4\ub85c\ub4dc":a["\ub370\uc774\ud130 \ubaa9\ub85d \ub2e4\uc6b4\ub85c\ub4dc"],"\ub370\uc774\ud130 \ubaa9\ub85d \ub2e4\uc6b4\ub85c\ub4dc \uc124\uba85":a["\ub370\uc774\ud130 \ubaa9\ub85d \ub2e4\uc6b4\ub85c\ub4dc \uc124\uba85"],"\ub370\uc774\ud130 \ubaa9\ub85d \uc870\ud68c \uad8c\ud55c":a["\ub370\uc774\ud130 \ubaa9\ub85d \uc870\ud68c \uad8c\ud55c"],"\uac00\uc774\ub4dc\uc124\uba85":a["\uac00\uc774\ub4dc\uc124\uba85"],"\uc678\ubd80 \ub370\uc774\ud130 \uac00\uc838\uc624\uae30":a["\uc678\ubd80 \ub370\uc774\ud130 \uac00\uc838\uc624\uae30"],"\uc678\ubd80 \ub370\uc774\ud130 \uac00\uc838\uc624\uae30 \uc124\uba85":a["\uc678\ubd80 \ub370\uc774\ud130 \uac00\uc838\uc624\uae30 \uc124\uba85"],"API \uc5f0\ub3d9 ON":a["API \uc5f0\ub3d9 ON"],"API \uc5f0\ub3d9 OFF":a["API \uc5f0\ub3d9 OFF"]},c=e.View.extend({className:"go_content go_renew go_works_home app_temp",events:{"click a[name='appHome']":"moveAppHome","click img[name='goAppIcon']":"moveAppHome","click #settingsBaseinfo":"moveSettingsBaseinfo","click #settingsUserform":"moveSettingsUserform","click #settingsListview":"moveSettingsListview","click #settingsWorkflow":"moveSettingsWorkflow","click #settingsShare":"moveSettingsShare","click #appleteDelete":"appleteDelete","click #import":"_onClickImport","click #integration":"_onClickIntegration","click #download":"_onClickDownload","click #settingsOpenApi":"_onClickOpenApi"},initialize:function(e){e=e||{},this.layoutView=r.create(),e.hasOwnProperty("appletId")&&(this.model=new s({id:e.appletId}),this.openApiModel=new o({appletId:e.appletId}))},render:function(){var e=this;return t(this.layoutView.render()).then(_.bind(h,this)).then(_.bind(p,this)).then(function(){n.checkAppManager(e.model.get("admins")),e.layoutView.setContent(e),e.$el.append(Hogan.compile(u({"isLocaleKo?":GO.locale=="ko",id:e.model.get("id"),name:e.model.get("name"),thumbSmall:e.model.get("thumbSmall"),useOpenApi:e.checkUseOpenApi(),lang:l})).render());var r=new i({baseConfigModel:e.model,pageName:"",useActionButton:!1});r.setElement(this.$("#worksContentTop")),r.render(),n.getShowGuideLayer()==null&&(setTimeout(function(){e.popupGuideLayer()},500),n.saveShowGuideLayer(!0))}).otherwise(function(t){console.log(t.stack)})},checkUseOpenApi:function(){var e=this.openApiModel.toJSON();return e.useApi},popupGuideLayer:function(){},moveAppHome:function(e){e.preventDefault(),GO.router.navigate("/works/applet/"+this.model.get("id")+"/home",{pushState:!0,trigger:!0})},moveSettingsBaseinfo:function(e){e.preventDefault(),GO.router.navigate("/works/applet/"+this.model.get("id")+"/settings/baseinfo",{pushState:!0,trigger:!0})},moveSettingsUserform:function(e){e.preventDefault(),GO.router.navigate("/works/applet/"+this.model.get("id")+"/settings/userform",{pushState:!0,trigger:!0})},moveSettingsListview:function(e){e.preventDefault(),GO.router.navigate("/works/applet/"+this.model.get("id")+"/settings/listview",{pushState:!0,trigger:!0})},moveSettingsWorkflow:function(e){e.preventDefault(),GO.router.navigate("/works/applet/"+this.model.get("id")+"/settings/workflow",{pushState:!0,trigger:!0})},moveSettingsShare:function(e){e.preventDefault(),GO.router.navigate("/works/applet/"+this.model.get("id")+"/settings/share",{pushState:!0,trigger:!0})},appleteDelete:function(e){e.preventDefault();var t=this,n=this.model.get("id"),r=this.model.get("name");$.ajax({type:"GET",dataType:"json",url:GO.contextRoot+"api/works/applets/"+n+"/consumers",success:function(e){var i=function(i){var s=i.find("#checkUserAgree");!_.isUndefined(r)&&r.trim()==s.val().trim()?(t.model.setUrl("/api/works/applets/"+n),t.model.fetch({async:!1,type:"DELETE",success:function(){GO.router.navigate("/works",{pushState:!0,trigger:!0})},error:function(t,n,r){$.goError(e.message)}})):(i.find(".error_msg").remove(),s.after("<span class='error_msg'>"+a["\uc571 \uc774\ub984\uc774 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."]+"</span>"))},s=["<div>",a["\uc571 \uc0ad\uc81c \uc124\uba85"],"</div>","<div><strong>",a["\uc571 \uc0ad\uc81c \ud655\uc778"],"</strong></div>","<div><input id='checkUserAgree' class='txt_mini w_max' type='text'></div>"].join("");$.goImportantCaution({title:a["\uc571\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"],contents:s,confirmCallback:i})},error:function(e){$.goError(e.message)}})},_onClickImport:function(){GO.router.navigate("/works/applet/"+this.model.get("id")+"/settings/csv",{pushState:!0,trigger:!0})},_onClickIntegration:function(){GO.router.navigate("/works/applet/"+this.model.get("id")+"/settings/integration",{pushState:!0,trigger:!0})},_onClickDownload:function(){GO.router.navigate("/works/applet/"+this.model.get("id")+"/settings/download",{pushState:!0,trigger:!0})},_onClickOpenApi:function(){GO.router.navigate("/works/applet/"+this.model.get("id")+"/settings/openapi",{pushState:!0,trigger:!0})},_onClickBadgeClose:function(){$("#guideBadge").remove(),$("#guideBanner").show(),$.cookie(f.WORKS_GUIDE.WORKS_SETTING_BADGE+GO.session().id,"done",{expires:f.WORKS_GUIDE.EXPIREDATE,path:"/"})},openHelpDocPopup:function(){$.post("/api/help/meta",{}).done(function(e){if(e.data.available){var t=e.data.mainContents.url;window.open(t,"help","width=1280,height=760,status=yes,scrollbars=no,resizable=no")}})}});return c});