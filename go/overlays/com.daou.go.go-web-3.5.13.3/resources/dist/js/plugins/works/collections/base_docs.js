define("works/collections/base_docs",function(require){var e=require("works/constants/value_type"),t=Backbone.Model.extend({isCreator:function(e){var t=this.get("values")||{},n=t.creator||{};return n.id===e}});return Backbone.Collection.extend({model:t,type:"base",initialize:function(e,t){this.appletId=t.appletId,this.subFormId=t.subFormId,this.personalViewId=t.personalViewId,this.referAppletId=t.referAppletId,this.fieldCid=t.fieldCid,this.fieldValueType=t.fieldValueType||"",this.includeActivityCount=t.includeActivityCount,t.type&&(this.type=t.type)},url:function(){var e=this.getUrl();return e+="?q="+encodeURIComponent(this.queryString||"")+"&"+this.makeParam(),this.includeActivityCount&&(e+="&ac=true"),GO.util.isValidValue(this.subFormId)&&(e+="&subFormId="+this.subFormId),e},getUrl:function(){var e=GO.contextRoot+"api/works/applets/"+this.appletId;return{base:e+"/docs",score:e+"/docs/score",producerDocs:this.referAppletId?e+"/producer/"+this.referAppletId+"/docs":"",consumerDocs:this.referAppletId?e+"/consumer/"+this.referAppletId+"/docs":""}[this.type]},csvUrl:function(){var e=this.url().replace("/docs?q=","/docs/csv?q=");return GO.util.isValidValue(this.personalViewId)&&this.personalViewId>0&&(e+="&personalViewId="+this.personalViewId),e},setSimilarKeyword:function(e){if(!e)return;this.queryString=this.fieldCid+':similar("'+this._escapeSpecialCharacter(e)+'")'},setDuplicateKeyword:function(e){if(!e)return;this.queryString=this.fieldCid+':eq("'+this._escapeSpecialCharacter(e)+'")'},similarSearch:function(e){if(!e)return;return this.setSimilarKeyword(e),this.fetch()},duplicateSearch:function(e,t){if(!e)return;this.setDuplicateKeyword(e),this.property="create_date",this.direction="desc",this.pageSize=2;var n=$.Deferred();return this.fetch({success:function(e){e.reset(e.reject(function(e){return parseInt(e.id)===parseInt(t)})),n.resolve(e)}}),n},setQueryString:function(t){this.fieldValueType===e.NUMBER?this.queryString="("+this.fieldCid+":[* TO *] OR (*:* NOT "+this.fieldCid+":[* TO *]))":this.queryString=this.fieldCid+':"'+t+'"'},_escapeSpecialCharacter:function(e){return e.replace(/[\\+!():^\[\]\{}~*?|&;\/-\\"]/g,"\\$&")},_setPersonalViewId:function(e){this.personalViewId=e}})});