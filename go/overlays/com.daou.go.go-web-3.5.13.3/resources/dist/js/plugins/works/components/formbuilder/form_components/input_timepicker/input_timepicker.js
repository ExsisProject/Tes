define("works/components/formbuilder/form_components/input_timepicker/input_timepicker",function(require){var e=require("works/component_type"),t=require("works/components/formbuilder/core/form_component"),n=require("works/components/formbuilder/core/component_registry"),r=require("works/components/formbuilder/core/views/base_form"),i=require("works/components/formbuilder/core/views/base_detail"),s=require("works/components/formbuilder/core/views/base_option"),o=require("works/components/formbuilder/form_components/input_timepicker/input_timepicker_validator"),u=require("hgn!works/components/formbuilder/form_components/input_timepicker/form"),a=require("hgn!works/components/formbuilder/form_components/input_timepicker/detail"),f=require("hgn!works/components/formbuilder/form_components/input_timepicker/option"),l=require("works/components/formbuilder/core/views/time_select"),c=require("works/libs/util"),h=require("i18n!works/nls/works"),p=require("i18n!nls/commons"),d={"\uc774\ub984":p["\uc774\ub984"],"\uc124\uba85":h["\uc124\uba85"],"\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694":h["\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."],"\uc124\uba85\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694":h["\uc124\uba85\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."],"\ud234\ud301\uc73c\ub85c \ud45c\ud604":h["\ud234\ud301\uc73c\ub85c \ud45c\ud604"],"\ud544\uc218 \uc785\ub825 \ucef4\ud3ec\ub10c\ud2b8":h["\ud544\uc218 \uc785\ub825 \ucef4\ud3ec\ub10c\ud2b8"],"\uae30\ubcf8\uac12":h["\uae30\ubcf8\uac12"],"\uc0dd\uc131\uc2dc\uac04\uc73c\ub85c \uae30\ubcf8\uac12 \uc9c0\uc815":h["\uc0dd\uc131\uc2dc\uac04\uc73c\ub85c \uae30\ubcf8\uac12 \uc9c0\uc815"],"\uc774\ub984\uc228\uae30\uae30":h["\uc774\ub984\uc228\uae30\uae30"]},v=s.extend({customEvents:{"click input[name=defaultAsNow]":"_updateUseBackdrop","click ul[el-time-list] li":"_onSelect","keydown input[data-time]":"_onKeydown","change input[data-time]":"_onChange"},renderBody:function(){this.$el.html(f({lang:d,model:this.model.toJSON()})),this.timeSelectView=new l({useBackdrop:!0}),this.$(".wrap_select").html(this.timeSelectView.render().el),this.timeSelectView.linkBackdrop(this.$("input[data-time='start']")),this._changeSettingByDefaultAsNow(this.model.get("defaultAsNow"))},_onSelect:function(e){e.stopPropagation();var t=$(e.currentTarget),n=t.find("span.txt").text();this.$("input[data-time='start']").val(n),this.timeSelectView.toggle(!1),this._selectOption()},_onKeydown:function(e){if(e.keyCode&&e.keyCode!=13)return;e.preventDefault();var t=$(e.currentTarget),n=t.val();this.timeSelectView.toggle(!1),this.$("input[data-time='start']").val(c.parseTime(n)),this._selectOption()},_onChange:function(e){var t=$(e.currentTarget),n=t.val();this.$("input[data-time='start']").val(c.parseTime(n)),this._selectOption()},_updateUseBackdrop:function(e){var t=$(e.currentTarget),n=t.is(":checked");this._changeSettingByDefaultAsNow(n)},_selectOption:function(){var e=this.timeSelectView.$("input[data-time='start']").val();this.model.set("defaultTime",e)},_changeSettingByDefaultAsNow:function(e){e?(this.model.set({defaultAsNow:!0,defaultTime:""}),this.timeSelectView.$("input").val("").prop("disabled",!0),this.timeSelectView.unBindBackdrop()):(this.timeSelectView.bindBackdrop(),this.timeSelectView.$("input").val(this.model.get("defaultTime")).prop("disabled",!1),this.model.set({defaultAsNow:!1,defaultTime:this.model.get("defaultTime")}))}}),m=r.extend({initialize:function(){r.prototype.initialize.apply(this,arguments),this.validator=new o},render:function(){var e=this.appletDocModel.get(this.getCid());if(!e&&(this.model.get("defaultAsNow")||this.model.get("defaultDate")||this.model.get("defaultTime"))){var t={},n=this._getDefaultValue();t[this.getCid()]=n,this.appletDocModel.set(t)}GO.util.isMobile()?this.initRenderMobile():this.initRender()},events:{"click ul[el-time-list] li":"_onSelect","keydown input[data-time]":"_onKeydown","change input[data-time]":"_onChange"},initRender:function(){this.$body.html(u({model:this.model.toJSON(),label:GO.util.escapeHtml(this.model.get("label"))})),this.timeSelectView=new l({useBackdrop:!this.isEditable()}),this.$body.find("span.wrap_select").html(this.timeSelectView.render().el),this.timeSelectView.linkBackdrop(this.$("input[data-time='start']")),this.$("input[data-time='start']").val(this._getTime())},_getTime:function(){var e=this.appletDocModel.get(this.clientId);return e||(this.appletDocModel.id?e="":(e=this.model.get("defaultTime")||"",this.model.get("defaultAsNow")&&(e=moment().format("HH:mm")))),e},initRenderMobile:function(){this.$body.html(u({model:this.model.toJSON(),"isMobile?":!0,label:GO.util.escapeHtml(this.model.get("label")),inputValue:this._getInputValue()}))},_makeTimeOption:function(){var e=[],t=30,n=moment().startOf("days"),r=1440/t;for(var i=0;i<r;i++){var s="";e.push("<li><span class='txt'>"+n.format("HH:mm")+s+"</span></li>"),n.add("minutes",t)}return e},_onSelect:function(e){e.stopPropagation();var t=$(e.currentTarget),n=t.find("span.txt").text();this.$body.find("input[data-time='start']").val(n),this.appletDocModel.set(this.getDataFromView()),this.timeSelectView.toggle(!1)},_onKeydown:function(e){if(e.keyCode&&e.keyCode!=13)return;e.preventDefault();var t=$(e.currentTarget),n=t.val();this.timeSelectView.toggle(!1),this.$body.find("input[data-time='start']").val(c.parseTime(n)),this.appletDocModel.set(this.getDataFromView())},_onChange:function(e){var t=$(e.currentTarget),n=t.val();this.$body.find("input[data-time='start']").val(c.parseTime(n)),this.appletDocModel.set(this.getDataFromView())},getFormData:function(){return this.isMultiple()&&this.appletDocModel.set(this.clientId,this._getMultipleData()),this.appletDocModel.toJSON()},getDataFromView:function(){var e=[],t={};return this.isMultiple()?(e.push(this.getSubmitValue()),_.each(this.getMultipleViews(),function(t){e.push(t.getSubmitValue())})):e=this.getSubmitValue(),t[this.getCid()]=e,t},getSubmitValue:function(){return this.isEditable()?this.$('input[data-time="start"]').val():_.isEmpty(this.$('input[data-time="start"]').val())?null:this.$('input[data-time="start"]').val()},remove:function(){r.prototype.remove.apply(this,arguments)},validate:function(){var e=this.$body.find("input[data-time='start']"),t=this.validator.validate({value:e.val()},this.model.toJSON());return t.isValid||this.printErrorTo(e,t.message),t.isValid},_getDefaultValue:function(){var e=this.model.get("defaultTime")||null;return this.appletDocModel.id?e="":this.model.get("defaultAsNow")&&(e=GO.util.now().format("HH:mm")),e},_getInputValue:function(){var e="",t=this.appletDocModel.get(this.clientId);return!t&&this.model.get("defaultAsNow")?e=GO.util.now().format("HH:mm"):!t&&this.model.get("defaultDate")?e=this.model.get("defaultDate"):t?e=t:e="",e}}),g=i.extend({render:function(){var e=this.appletDocModel.get(this.clientId)||"";this.$body.html(a({model:this.model.toJSON(),label:GO.util.escapeHtml(this.model.get("label")),userData:e}))},getTitle:function(){return this.appletDocModel.get(this.clientId)}}),y=t.define(e.Time,{name:h["\uc2dc\uac04"],valueType:"TIME",group:"basic",properties:{label:{defaultValue:h["\uc2dc\uac04"]},hideLabel:{defaultValue:!1},guide:{defaultValue:""},guideAsTooltip:{defaultValue:!0},required:{defaultValue:!1},defaultAsNow:{defaultValue:!1},defaultTime:{defaultValue:""}},OptionView:v,FormView:m,DetailView:g});n.addComponent(y)});