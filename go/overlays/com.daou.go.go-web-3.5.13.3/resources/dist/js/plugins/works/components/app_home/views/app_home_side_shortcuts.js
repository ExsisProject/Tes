define("works/components/app_home/views/app_home_side_shortcuts",function(require){var e=require("i18n!works/nls/works"),t={"\uc571 \ubaa9\ub85d":e["\uc571 \ubaa9\ub85d"],"\uc0c8 \uc571 \ub9cc\ub4e4\uae30":e["\uc0c8 \uc571 \ub9cc\ub4e4\uae30"],"Works \ud648":e["Works \ud648"],"\uc990\uaca8\ucc3e\ub294 \uc571":e["\uc990\uaca8\ucc3e\ub294 \uc571"],"\uc804\uccb4 \uc571":e["\uc804\uccb4 \uc571"],"\uc571\uba85 \uac80\uc0c9":e["\uc571\uba85 \uac80\uc0c9"]},n=Hogan.compile(['<li data-id="{{model.id}}" el-applet>',"<a>",'{{#model.isFavorite}}<span class="ic_board ic_star"></span>&nbsp;{{/model.isFavorite}}','<span class="txt">{{model.name}}</span>',"</a>","</li>"].join("")),r=require("works/collections/applet_simples"),i=require("components/backdrop/backdrop"),s=require("hgn!works/components/app_home/templates/app_home_side_shortcuts"),o=i.extend({tagName:"section",className:"side_nav",initialize:function(e){this.applets=e.applets,this.favorites=new r([],{url:GO.config("contextRoot")+"api/works/applets/favorites"}),$.when(this.applets.fetch(),this.favorites.fetch()).done($.proxy(function(){this.originalFavorites=this.favorites.clone(),this._onSyncApplets()},this))},events:{"click [el-shortcuts]":"_onClickShortcuts","click [el-works-home]":"_onClickWorksHome","click [el-applet]":"_onClickApplet","click #btn-search":"_searchAppName","keyup #appName":"_onKeyupSearch","focus #appName":"_focusInSearchWrap","focusout #appName":"_focusOutSearchWrap"},render:function(){return this.$el.html(s({lang:t})),this},_onClickShortcuts:function(e){this.shortcutsLayer||this._initBackdrop(e)},_onClickWorksHome:function(){GO.router.navigate("works",!0),this.remove()},_initBackdrop:function(e){this.shortcutsLayer=this.$("[el-backdrop]"),this.backdropToggleEl=this.shortcutsLayer,this.bindBackdrop(),this.linkBackdrop(this.$("[el-shortcuts]"))},_onSyncApplets:function(){this.favorites.mergeAppletToFavorite(this.applets),this._renderApplets()},_renderApplets:function(){this.favorites.each(function(e){this.$("ul[el-applets]").append(n.render({model:e.toJSON()}))})},_onClickApplet:function(e){e.stopPropagation();var t=$(e.currentTarget).attr("data-id");GO.router.navigate("works/applet/"+t+"/home",!0),this.remove()},_onKeyupSearch:function(e){if(e.keyCode!=13&&!_.isEmpty($("#appName").val()))return;this._searchAppName(e)},_searchAppName:function(e){var t=$("#appName").val().trim();_.isEmpty(t)?this.applets.setType("base"):this.applets.setType("search"),this.applets.setKeyword(t),$.when(this.applets.fetch({reset:!0})).done($.proxy(function(){this.$("ul[el-applets]").empty(),_.isEmpty(t)?(this.favorites=this.originalFavorites.clone(),this._onSyncApplets()):this.applets.each(function(e){this.$("ul[el-applets]").append(n.render({model:e.toJSON()}))})},this))},_focusInSearchWrap:function(e){this.$("#appNameSearchWrap").addClass("search_focus")},_focusOutSearchWrap:function(e){this.$("#appNameSearchWrap").removeClass("search_focus")}});return o});