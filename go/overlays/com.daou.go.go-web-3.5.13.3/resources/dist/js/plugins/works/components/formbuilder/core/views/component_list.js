define("works/components/formbuilder/core/views/component_list",function(require){function f(e){var t=$(e).data("component-type");return i.getComponentClass(t)}var e=require("backbone"),t=require("works/components/formbuilder/core/views/toolbox_pane"),n=require("works/component_type"),r=require("works/components/formbuilder/core/component_registry"),i=require("works/components/formbuilder/core/component_manager"),s=require("hgn!works/components/formbuilder/core/templates/toolbox_list_item"),o=require("works/components/formbuilder/constants"),u=require("i18n!works/nls/works");require("jquery.ui"),require("jquery.go-popup");var a=t.extend({className:"builder_side_box",title:u["\ucef4\ud3ec\ub10c\ud2b8"],useResizer:!1,titleWrapClassname:"title_tool_edit",contentWrapClassname:"tool_edit",initialize:function(e){e=e||{},t.prototype.initialize.apply(this,arguments),this._renderListContainer("basic"),this._renderListContainerTitle("basic")},render:function(){_.each(n,function(e){var t=r.findByType(e);if(!t||t.handlerable===!1)return;var n=t.group;this.$(".component-group-"+n).length<1&&(this._renderListContainer(n),this._renderListContainerTitle(n)),this.$(".component-group-"+n).append(s({className:o.CN_COMPONENT+" "+o.CN_COMPONENT_TYPE,componentType:t.type,label:t.cname}))},this),this._initDraggable(),this.toggleArrow(!1)},toggleArrow:function(e){t.prototype.toggleArrow.apply(this,arguments)},toggleContent:function(e){t.prototype.toggleContent.apply(this,arguments),e||!1?this.$("."+this.titleWrapClassname).removeClass("off"):this.$("."+this.titleWrapClassname).addClass("off"),e&&this.observer.trigger(o.EVENT_FOLD_COMPONENT_PANNEL)},getMarginHeight:function(){var e=30;return this.$(".toolbox-title").outerHeight()+e},_renderListContainerTitle:function(e){var t="";e=="basic"?t=u["\ub370\uc774\ud130 \ucef4\ud3ec\ub10c\ud2b8"]:e=="design"?t=u["\ub514\uc790\uc778 \ucef4\ud3ec\ub10c\ud2b8"]:e=="extra"&&(t=u["\uace0\uae09 \ucef4\ud3ec\ub10c\ud2b8"]),this.$(".component-group-"+e).append('<li class="tit"><div class="attr_title"><label>'+t+"</label></div></li>")},_renderListContainer:function(e){var t="component-list",n=$('<ul class="'+t+'"></ul>'),r=null;return n.addClass("component-group-"+e),this.$("."+t).length>0&&(r='<i class="tool_edit_line"></i>'),this.$(".toolbox-content").append(r,n),n},_initDraggable:function(){function r(e){return e.cid&&i.isCreated(e.cid)}var e=this,t=this.$(".component-list ."+o.CN_COMPONENT_TYPE),n="."+o.CN_CONTAINABLE;t.draggable({appendTo:"body",connectToSortable:n,helper:function(e,t){var n=f(e.currentTarget),s=i.createDragHelper(n.cname);return r(n)?(s.addClass("err_type"),s.find(".icon-helper").addClass("ic_err")):s.find(".icon-helper").addClass("ic_"+n.type),s},start:function(n){var i=f(n.currentTarget);e.observer.trigger(o.EVENT_START_DRAGGING,i.type),$(this).closest("li").addClass("on"),r(i)&&($.goSlideMessage(GO.i18n(u["\ud3fc \ucef4\ud3ec\ub10c\ud2b8 \uc911\ubcf5 \uc5d0\ub7ec\uba54\uc2dc\uc9c0"],{arg1:i.cname}),"caution"),t.draggable("option","connectToSortable",!1))},stop:function(r){e.observer.trigger(o.EVENT_STOP_DRAGGING),$(this).closest("li").removeClass("on"),$(this).removeClass(o.CN_DUPLICATED),t.draggable("option","connectToSortable")||t.draggable("option","connectToSortable",n)}})}});return a});