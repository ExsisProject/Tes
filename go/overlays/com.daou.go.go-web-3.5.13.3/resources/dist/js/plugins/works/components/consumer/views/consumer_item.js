define("works/components/consumer/views/consumer_item",function(require){var e=require("i18n!works/nls/works"),t={"\uac74\uc758 \uc5f0\ub3d9\ub41c \ub370\uc774\ud130\uac00 \uc788\uc2b5\ub2c8\ub2e4":e["\uac74\uc758 \uc5f0\ub3d9\ub41c \ub370\uc774\ud130\uac00 \uc788\uc2b5\ub2c8\ub2e4"],"\ud604\uc7ac \uc5f0\ub3d9\ub41c \ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4":e["\ud604\uc7ac \uc5f0\ub3d9\ub41c \ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4"]},n=require("works/components/doc_list/views/doc_list"),r=require("works/collections/docs"),i=require("works/collections/fields"),s=require("hgn!works/components/consumer/templates/consumer_item"),o=Backbone.View.extend({initialize:function(e){this.docId=e.docId,this.docText=e.docText,this.fields=new i([],{appletId:this.model.get("applet").id,includeProperty:!0,type:"producers"}),this.fields.fetch(),this.docs=new r([],{appletId:e.appletId,referAppletId:this.model.get("applet").id,restoreParam:!1,type:"consumerDocs"})},events:{"click a[data-name=consumerApp]":"_onClickComsumerAppLink"},render:function(){return this.$el.html(s({lang:t,hasData:this.model.get("count")>0,model:this.model.toJSON()})),this.model.get("accessable")&&(this.listView=new n({checkbox:!1,appletId:this.model.get("applet").id,usePageSize:!1,readOnly:!0,collection:this.docs,columns:[],fields:this.fields,useToolbar:!1,trClass:"pointer"}),this.listView.$el.on("renderingComplete",$.proxy(function(){this.listView.$("div.dataTables_paginate").css({"padding-top":"10px"})},this)),this.listView.$el.on("onClickListItem",$.proxy(function(e,t){window.open(GO.contextRoot+"app/works/applet/"+t.appletId+"/doc/"+t.id,"help","width=1280,height=700,status=yes,scrollbars=yes,resizable=yes")},this)),this.listView.dataFetch().done($.proxy(function(){this.listView.render(),this.docs.queryString=this._getQueryString(),this.docs.fetch()},this)),this.$("#gridArea").html(this.listView.el)),this.$("span[data-name=consumerApp]").css("cursor","pointer"),this},_onClickComsumerAppLink:function(e){e.stopPropagation();var t=this.options.appletId,n=this.model.get("applet").id,r={fieldCid:this.model.get("fieldCids"),values:{isRelative:!0,values:[{id:this.docId,text:this.docText}]}};GO.util.store.set(t+"-"+this.docId+"-linkfilterData-"+n,r,{type:"session"}),window.open(GO.contextRoot+"app/works/applet/"+n+"/home/link/"+t+"/"+this.docId)},_getQueryString:function(){return _.map(this.model.get("fieldCids"),function(e){return e+".id:("+this.docId+")"},this).join(" OR ")}});return o});