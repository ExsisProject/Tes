define("works/home/views/applet_import_popup",function(require){var e=require("file_upload"),t=require("hgn!works/home/templates/applet_import_popup"),n=require("i18n!works/nls/works"),r=require("i18n!nls/commons"),i={"\uc0dd\uc131\uc77c":n["\uc0dd\uc131\uc77c"],"\uc571\uba85":n["\uc571\uba85"],"\uc678":n["\uc678"],"\ucd1d":n["\ucd1d"],"\ud30c\uc77c \uc120\ud0dd":n["\ud30c\uc77c \uc120\ud0dd"],"\ud30c\uc77c\uba85":n["\ud30c\uc77c\uba85"],"\ud06c\uae30":r["\ud06c\uae30"],"\uc0c1\ud0dc":r["\uc0c1\ud0dc"],"\uc0ad\uc81c":r["\uc0ad\uc81c"],"\ub300\uae30\uc911":n["\ub300\uae30\uc911"],"\uc804\uc0ac\uacf5\uc720 \uc911":n["\uc804\uc0ac\uacf5\uc720 \uc911"],"\uc644\ub8cc":r["\uc644\ub8cc"],"\uc2e4\ud328":r["\uc2e4\ud328"],"dwt \ud30c\uc77c\ub9cc \ub4f1\ub85d \uac00\ub2a5\ud569\ub2c8\ub2e4.":n["dwt \ud30c\uc77c\ub9cc \ub4f1\ub85d \uac00\ub2a5\ud569\ub2c8\ub2e4."]};return Backbone.View.extend({gridView:null,events:{"click [el-delete]":"_onClickDeleteFileItem","click #checkAll":"_checkAll"},initialize:function(e){e=e||{},this.models=e.models},render:function(){return this.$el.html(t({lang:i})),this},initFileUpload:function(){var t={el:this.$("#file-control"),context_root:GO.contextRoot,button_text:i["\ud30c\uc77c \uc120\ud0dd"],button_height:24,button_width:60,url:"api/file?GOSSOcookie="+$.cookie("GOSSOcookie")};(new e(t)).queue(function(e,t){}).start($.proxy(function(e,t){var n=new RegExp("(.dwt)","gi"),r=t.type.toLowerCase();if(!n.test(r))return this.$("#importDesc").show(),this.$("#importDesc").text(i["dwt \ud30c\uc77c\ub9cc \ub4f1\ub85d \uac00\ub2a5\ud569\ub2c8\ub2e4."]),!1;this.$("#importDesc").hide()},this)).progress(function(e,t){}).success($.proxy(function(e,t){var n=t.data;if(GO.util.fileUploadErrorCheck(t))return $.goAlert(GO.util.serverMessage(t)),!1;if(GO.util.isFileSizeZero(t))return $.goAlert(GO.util.serverMessage(t)),!1;var r=$(['<tr data-path="'+n.filePath+'">'+'<td class="align_l"><span class="ic_file ic_unknown"></span>'+n.fileName+"</td>"+'<td class="size"><span class="size">'+GO.util.getHumanizedFileSize(n.fileSize)+"MB</span></td>"+'<td class="state"><span el-state>'+i["\ub300\uae30\uc911"]+"</span></td>"+'<td class="del"><span class="btn_bdr" el-delete><span title="'+i["\uc0ad\uc81c"]+'" class="ic_classic ic_basket"></span></span></td>'+"</tr>"].join(""));this.$("[data-body]").append(r),this._import(n,e.timeStamp)},this)).complete(function(e,t){console.info(t)}).error(function(e,t){console.info(t)})},_import:function(e,t){$.ajax({url:GO.contextRoot+"api/works/templates/import",contentType:"application/json",type:"POST",data:JSON.stringify(e),success:$.proxy(function(t){var n=this.$el.find('tr[data-path="'+e.filePath+'"]');n.find("[el-state]").text(i["\uc644\ub8cc"]),n.attr("data-template-id",t.data.id)},this),error:$.proxy(function(t){this.$el.find('tr[data-path="'+e.filePath+'"]').find("[el-state]").text(i["\uc2e4\ud328"])},this)})},_onClickDeleteFileItem:function(e){var t=$(e.currentTarget),n=t.closest("tr").attr("data-template-id");this.deleteFileItem(n)},deleteFileItem:function(e){$.ajax({type:"DELETE",contentType:"application/json",url:GO.contextRoot+"api/works/templates/"+e,success:$.proxy(function(t){this.$el.find('tr[data-template-id="'+e+'"]').remove()},this),error:$.proxy(function(t){this.$el.find('tr[data-template-id="'+e+'"]').find("[el-state]").text(i["\uc804\uc0ac\uacf5\uc720 \uc911"])},this)})}})});