define("admin/views/openapi/openapi_client_form",function(require){var e=require("jquery"),t=require("backbone"),n=require("app"),r=require("i18n!admin/nls/admin"),i=require("i18n!nls/commons"),s=require("admin/constants/openapi_scope"),o=require("hgn!admin/templates/openapi/openapi_client_form");require("jquery.go-validation");var u={"\ud074\ub77c\uc774\uc5b8\ud2b8\uc774\ub984":r["\ud074\ub77c\uc774\uc5b8\ud2b8 \uc774\ub984"],ko:r.KO,en:r.EN,jp:r.JP,"zh-cn":r["ZH-CN"],"zh-tw":r["ZH-TW"],vi:r.VI,"\uc11c\ube44\uc2a4URL":r["\uc11c\ube44\uc2a4 URL"],"\uc81c\uacf5\uc11c\ube44\uc2a4":r["\uc81c\uacf5 \uc11c\ube44\uc2a4"],"\uc124\uba85":r["\uc124\uba85"],"\uc800\uc7a5":i["\uc800\uc7a5"],"\ucde8\uc18c":i["\ucde8\uc18c"]},a=t.Model.extend({urlRoot:function(){return n.contextRoot+"ad/api/oauthclient"}}),f=t.View.extend({el:"#layoutContent",events:{"click #save":"save","click #cancel":"cancel"},initialize:function(e){this.$el.off();var t=this.options.oauthClientId;this.isCreate=_.isUndefined(t),this.model=new a,this.isCreate||this.model.set({id:t})},render:function(){var t=this,n=_.filter(s,function(e){return!_.contains(["COMPANY","SYSTEM"],e.key)},this);this.isCreate?this.$el.html(o({lang:u,scope:n,isCreate:!0})):this.model.fetch().done(e.proxy(function(){var e=this.model.toJSON();this.$el.html(o({lang:u,scope:n,data:e,isCreate:!1})),t.checkScope(e.scope)},this))},checkScope:function(e){if(!_.isUndefined(e)){var t=e.split(","),n=this.$el.find("#scope");for(var r=0;r<t.length;r++)n.find("input[type=checkbox][value="+t[r].toUpperCase()+"]").prop("checked","true")}},getParams:function(){return{koName:this.$el.find("#koName").val(),enName:this.$el.find("#enName").val(),jpName:this.$el.find("#jpName").val(),zhcnName:this.$el.find("#zhcnName").val(),zhtwName:this.$el.find("#zhtwName").val(),viName:this.$el.find("#viName").val(),baseUrl:this.$el.find("#baseUrl").val(),redirectUrl:this.$el.find("#redirectUrl").val(),description:this.$el.find("#description").val(),scopeList:this.getScopeList()}},save:function(){if(!this.validate())return;this.model.save(this.getParams(),{success:function(t,r){r.code=="200"&&(e.goMessage(i["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]),n.router.navigate("company/openapi",{trigger:!0}))},error:function(t,n){n.message?e.goAlert(n.message):e.goMessage(i["\uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."])}})},getScopeList:function(){var e=[],t=this.$el.find("input[type=checkbox]:checked");for(var n=0;n<t.length;n++)e.push(t[n].value.toUpperCase());return e},checkRequiredInput:function(){return this.$el.find("#koName").val().trim()==""||this.$el.find("#baseUrl").val().trim()==""||this.$el.find("#redirectUrl").val().trim()==""?(e.goAlert(i["\ud544\uc218\ud56d\ubaa9\uc744 \uc785\ub825\ud558\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."]),!1):!0},checkInputLength:function(){var t=this.$el.find("input[type=text]");for(var r=0;r<t.length;r++)if(e.goValidation.isInvalidLength(0,255,e(t[r]).val()))return e.goAlert(n.i18n(i["\ucd5c\ub300 {{arg1}}\uc790 \uae4c\uc9c0 \uc785\ub825\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."],{arg1:255})),!1;return!0},checkUrlFormat:function(){return!e.goValidation.validateURL(this.$el.find("#baseUrl").val())||!e.goValidation.validateURL(this.$el.find("#redirectUrl").val())?(e.goAlert(i["\uc785\ub825\ud558\uc2e0 \uc8fc\uc18c\uac00 \uc62c\ubc14\ub978\uc9c0 \ub2e4\uc2dc \ud55c \ubc88 \ud655\uc778\ud558\uc5ec \uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4"]),!1):!0},validate:function(){return this.checkRequiredInput()?this.checkInputLength()?this.checkUrlFormat()?!0:!1:!1:!1},cancel:function(){n.router.navigate("company/openapi",{trigger:!0})}});return f});