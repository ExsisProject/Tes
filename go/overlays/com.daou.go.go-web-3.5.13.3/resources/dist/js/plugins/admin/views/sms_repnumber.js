define(["jquery","backbone","app","sms/collections/sms_repnumbers","hgn!admin/templates/sms_repnumber","i18n!nls/commons","i18n!sms/nls/sms","i18n!admin/nls/admin","grid","jquery.go-popup","jquery.go-sdk","GO.util"],function(e,t,n,r,i,s,o,u,a){var f={},l=t.View.extend({accessUserView:null,exceptionUserView:null,el:"#layoutContent",initialize:function(){this.smsRepNumbers=new r([],{type:"company"})},events:{},render:function(){this.$el.html(i({})),this._renderDataTables()},_renderDataTables:function(){var t=this;this.gridView=new a({el:"#smsListWapper",collection:this.smsRepNumbers,tableClass:"chart size",checkbox:!0,usePeriod:!1,useToolbar:!0,isAdmin:!0,useBottomButton:!1,buttons:[{render:function(){return'<span class="btn_tool " data-button>'+u["\uc2e0\uaddc \ucd94\uac00"]+"</span>"},onClick:function(){n.router.navigate("sms/repnumber/create",!0)}},{render:function(){return'<span class="btn_tool txt_caution" data-button>'+s["\uc0ad\uc81c"]+"</span>"},onClick:function(){var n=_.map(e("input[type=checkbox][data-id]:checked"),function(t){return e(t).attr("data-id")});if(n.length==0)return e.goMessage(s["\uc120\ud0dd\ub41c \ud56d\ubaa9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."]),!1;var r="";_.each(e("input[type=checkbox][data-id]:checked"),function(t){r=r+"id="+e(t).attr("data-id")+"&"}),e.goPopup({title:s["\uc0ad\uc81c"],message:u["\uc0ad\uc81c\uacbd\uace0"],buttons:[{btype:"confirm",btext:s["\ud655\uc778"],callback:function(){e.ajax({type:"DELETE",dataType:"json",url:GO.contextRoot+"ad/api/sms/repnumber?"+r,success:function(n){e.goMessage(s["\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]),t.gridView.collection.fetch()},error:function(t){e.goError(t.responseJSON.message)}})}},{btext:s["\ucde8\uc18c"],callback:function(){}}]})}}],columns:[{name:"name",className:"name_L",label:o["\ub300\ud45c\ubc88\ud638 \uc774\ub984"],sortable:!0,render:function(e){return e.get("name")}},{name:"repNumber",className:"number",label:o["\ubc1c\uc2e0\ubc88\ud638"],sortable:!0,render:function(e){return e.get("repNumber")}},{name:"status",className:"state sorting_disabled",label:u["\uc0ac\uc6a9\uc5ec\ubd80"],sortable:!1,render:function(e){var t=e.get("status");return t=="NORMAL"?u["\uc815\uc0c1"]:u["\uc228\uae40"]}},{name:"settting",className:"sorting_disabled",label:u["\uc124\uc815"],sortable:!1,render:function(e){return'<span class="btn_s" data-id="'+e.get("id")+'">'+u["\uc124\uc815"]+"</span>"}}],drawCallback:function(n){e(".toolbar_top").removeClass("tool_bar"),t.$el.find(this.el+" tr>td span.btn_s").css("cursor","pointer").click(function(t){var n="sms/repnumber/"+e(t.currentTarget).attr("data-id");GO.router.navigate(n,{trigger:!0})})},searchOptions:[{value:"name",label:o["\ub300\ud45c\ubc88\ud638 \uc774\ub984"]},{value:"repNumber",label:o["\ubc1c\uc2e0\ubc88\ud638"]}]}),this.gridView.render(),this.smsRepNumbers.fetch()}});return l});