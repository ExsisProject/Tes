(function(){define(["jquery","backbone","app","views/layouts/admin_default","i18n!nls/commons","i18n!admin/nls/admin","i18n!approval/nls/approval","admin/views/account/account_form","admin/views/account/account_detail_appr_absence","hgn!admin/templates/account_detail","hgn!admin/templates/account_detail_appr_absence_list","admin/models/base_model","admin/models/mail_domain_group","hgn!admin/templates/_add_sender_email"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=Backbone.Model.extend({urlRoot:GO.contextRoot+"ad/api/user/apprinfo"}),v=Backbone.Collection.extend({url:function(){return n.contextRoot+"ad/api/user/available/emails/"+this.userId},setUserId:function(e){this.userId=e}}),m=u.prototype,g=[],y=u.extend({passwordValidation:!1,status:{online:"0",wait:"1",stop:"2","delete":"3"},type:function(){return _.extend({},m.type,{title:s["\uacc4\uc815 \ubaa9\ub85d"]+" > "+s["\uacc4\uc815 \uc0c1\uc138"],return_list:s["\ubaa9\ub85d\uc73c\ub85c \ub3cc\uc544\uac00\uae30"],confirm:i["\ud655\uc778"],last_login:s["\ucd5c\uc885 \ub85c\uadf8\uc778"],modify:i["\uc218\uc815"],status_close:s["\uc911\uc9c0\ud558\uae30"],status_nomal:s["\uc815\uc0c1\uc73c\ub85c \ubcf5\uad6c\ud558\uae30"],alertStatusClose:s["\uacc4\uc815\uc744 \uc911\uc9c0\ud558\uba74..."],mail_store_path:s["\uba54\uc77c \uc800\uc7a5\uc18c \uacbd\ub85c"],sender_mail_address:s["\ubcf4\ub0b4\ub294 \uba54\uc77c \uc8fc\uc18c \ud45c\uc2dc"],grade:s["\uc9c1\uae09"],webmail:s.WEBMAIL,imap:s.IMAP,pop:s.POP,approval_date:o["\uacb0\uc7ac\uc77c"],dont_change_status:s["\uc0c1\ud0dc \ubcc0\uacbd\uc774 \ubd88\uac00\ub2a5\ud569\ub2c8\ub2e4. \ub77c\uc774\uc120\uc2a4 \uacc4\uc815\uc218\ub97c \ud655\uc778\ud558\uc138\uc694."],multi_lang:s["\ub2e4\uad6d\uc5b4"],open:i["\uc5f4\uae30"],fixed_ip:s["\uadfc\ud0dc\uad00\ub9ac \uc811\uc18d\uc778\uc99d IP"],"\ubd80\uc7ac\uc704\uc784\uc124\uc815":s["\ubd80\uc7ac\uc704\uc784\uc124\uc815"],"\ubd80\uc7ac\ucd94\uac00":s["\ubd80\uc7ac\ucd94\uac00"],"\ubd80\uc7ac\uae30\uac04":s["\ubd80\uc7ac\uae30\uac04"],"\ub300\uacb0\uc790":o["\ub300\uacb0\uc790"],"\ubd80\uc7ac\uc0ac\uc720":s["\ubd80\uc7ac\uc0ac\uc720"],"\uc0ac\uc6a9\uc5ec\ubd80":s["\uc0ac\uc6a9\uc5ec\ubd80"],"\uc0ad\uc81c":i["\uc0ad\uc81c"],"\uba64\ubc84\uc0ac\uc9c4 \uc77c\uad04\ub4f1\ub85d":s["\uba64\ubc84\uc0ac\uc9c4 \uc77c\uad04\ub4f1\ub85d"],forwarding_tooltip:s["\uc804\ub2ec \ud234\ud301"]})}(),ids:[],initialize:function(e){console.info("AccountDetail call !!!!"),m.initialize.call(this,e),r.render(),_.extend(this.options,e||{}),this.accountId=this.options.userId,this.mailInfo=new c({id:this.accountId,urlRoot:GO.contextRoot+"ad/api/user/mailinfo"}),this.mailInfo.fetch({async:!1}),this.updateMode(this.mailInfo),this.mailDomainGroup=h.read(this.mailInfo.get("mailGroup"));var t=new Backbone.Model;t.url=GO.contextRoot+"ad/api/systeminfo",t.fetch({async:!1}),this.systemInfo=t.toJSON(),this.systemMailSetting=new Backbone.Model,this.systemMailSetting.url=GO.contextRoot+"ad/api/mailsetting",this.systemMailSetting.fetch({async:!1}),this.companyMailService=new Backbone.Model,this.companyMailService.url=GO.contextRoot+"ad/api/company/mailservice",this.companyMailService.fetch({async:!1});var n=new Backbone.Model;n.url=GO.contextRoot+"ad/api/siteconfig",n.fetch({async:!1}),this.mailDomainConfigModel=n.toJSON()},addSenderEmail:function(t){var n=e(t.target).parents("td"),r=n.find("#availableEmails"),o=n.find("input:text.name"),u=n.find("#mailSenderListTbody"),a=n.find("#availableEmails option:selected");if(!e.goValidation.isValidChar(e.trim(o.val()))){e.goMessage(i["\uc0ac\uc6a9\ud560 \uc218 \uc5c6\ub294 \ubb38\uc790\uc785\ub2c8\ub2e4."]),e(o).focus();return}if(e.trim(o.val())==""){e.goMessage(s["\uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694."]),e(o).focus();return}if(e.trim(r.val())==""){e.goMessage(s["\ucd94\uac00\ud560 \uc774\uba54\uc77c\uc744 \uc785\ub825\ud558\uc138\uc694."]),e(r).focus();return}if(e.goValidation.isInvalidEmail(r.val())){e.goMessage(s["\uc0ac\uc6a9\ud560 \uc218 \uc5c6\ub294 \uc774\uba54\uc77c\uc785\ub2c8\ub2e4."]),e(r).focus();return}var f=[];u.find("span.senderItem").each(function(){var t=GO.util.get_email(e(this).data("email"));f.push(t)});if(f.indexOf(r.val())>=0){e.goMessage(s["\uc774\ubbf8 \uc0ac\uc6a9\uc911\uc778 \uc774\uba54\uc77c\uc785\ub2c8\ub2e4."]);return}var l={emailInfo:'"'+o.val()+'"'+" <"+r.val()+">",alias:a.attr("userType")=="AliasUser",type:this.type};e(u.append(p(l)))},removeSenderEmail:function(t){var n=e(t.currentTarget),r=n.closest("tr");r.find("input:radio").prop("checked")&&this.$el.find("#mailSenderListTbody").find("input:radio:first").prop("checked",!0),n.closest("tr").remove()},toggleSenderEmail:function(t){var n=e(t.currentTarget),r=!1,i=n.val();i==""?r=n.closest("span").find("#groupMailSenderMode").data("use")=="on"?!0:!1:i=="on"?r=!0:r=!1;var s=this.$el.find("#mailSenderList");r?s.show():s.hide()},toggleMultiLang:function(){var e=this.$el.find("span#btnMultiLang i");e.hasClass("ic_accordion_s")?(e.removeClass("ic_accordion_s").addClass("ic_accordion_c").attr("title",i["\ub2eb\uae30"]),this.$el.find('tr[id$="NameInput"]').show()):(e.removeClass("ic_accordion_c").addClass("ic_accordion_s").attr("title",this.type.open),this.$el.find('tr[id$="NameInput"]').hide())},goToBatchRegisterLink:function(){e.goPopup({width:500,title:"",pclass:"layer_confim",contents:"<p class='q'>"+GO.i18n(s["\uba54\ub274\ub85c \uc774\ub3d9\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c"],{menuName:s["\uc77c\uad04 \ub4f1\ub85d"]})+"</p>",buttons:[{btext:i["\ud655\uc778"],btype:"confirm",autoclose:!0,callback:function(){GO.router.navigate("account/batch/regist/member_picture",!0)}},{btext:i["\ucde8\uc18c"]}]})},__getUserMainInfo:function(){var t=GO.config("mailRoot")+"api/readUserApi.jsp?";e.go(t,"",{qryType:"GET",async:!1,contentType:"application/json",responseFn:e.proxy(function(e){location.href=GO.contextRoot+"admin/accounts"},this),error:function(t){e.goAlert(self.type.error)}})},statusOnline:function(){this.__changeStatus(this.status.online)},__changeStatus:function(t){var n=GO.contextRoot+"ad/api/user/status",r={ids:[this.accountId],id:t},i=this;e.go(n,JSON.stringify(r),{qryType:"PUT",async:!1,contentType:"application/json",responseFn:e.proxy(function(e){location.href=GO.contextRoot+"admin/accounts"},this),error:function(t){e.goAlert(i.type.error)}})},toggle:function(t){var n=e(t.target),r,i=e.trim(e(t.currentTarget).text()),s=e(t.currentTarget).parents("td");s.find("span.textarea")&&s.find("span.textarea").show().find("textarea").text(i).focus(),n.hasClass("password")?(e("#password").show(),e("#password_confirm").show(),n.parents("tr").hide(),this.passwordValidation=!0):n.hasClass("appr_password")?(n.parents("td").find("span.user_data").toggle(),this.apprPasswordValidation=!0):n.hasClass("ic_edit")?(r=n.parent().parent(),r.hide(),r.next().show()):(n.hide(),n.next().show())},save:function(t){var n=this;try{this.isFormInvalid({password:this.passwordValidation,apprPassword:this.apprPasswordValidation});var r=this.accountBuilder();if(!r)return;this.mailInfo.attributes=e.extend({},this.mailInfo.attributes,r),this.mailInfo.set({delGroups:{ids:this.deleteGroupIds}})}catch(i){return console.log("accountBuilder Error :: "+i)}GO.EventEmitter.trigger("common","layout:setOverlay",""),this.mailInfo.save(null,{success:function(){e.goMessage(n.type.saveSuccess),t()},error:function(e,t){m.errorMessage(t),GO.EventEmitter.trigger("common","layout:clearOverlay",!0)}}).done(function(){GO.EventEmitter.trigger("common","layout:clearOverlay",!0)})},saveAction:function(){this.save(e.proxy(this.reload,this,this.accountId))},cancel:function(){this.goList()},returnList:function(){this.goList()},reload:function(e){var t="account/"+e;GO.router.navigate(t,{trigger:!0})},render:function(){var t=this.mailDomainConfigModel.profileVisibleInfos,r=this.mailInfo.toJSON(),i=this.positions.toJSON(),s=this.grades.toJSON(),o=r.deptMembers,u=this.mailDomainGroups.toJSON(),a=this.mailInfo.toJSON(),l=this.userVirtualDomains.toJSON(),c=this.__setSystemMailSetting(),h=[{value:"ko",text:this.type.ko},{value:"en",text:this.type.en},{value:"ja",text:this.type.jp},{value:"zh_CN",text:this.type.zh_cn},{value:"zh_TW",text:this.type.zh_tw},{value:"vi",text:this.type.vi}],p="",m=r.email.split("@"),g=this.systemInfo.language,y=this;r.lastLoginedAt!=undefined&&(r.lastLoginedAt=GO.util.basicDate(r.lastLoginedAt)),r.lastImapLoginedAt!=undefined&&(r.lastImapLoginedAt=GO.util.basicDate(r.lastImapLoginedAt)),r.lastPopLoginedAt!=undefined&&(r.lastPopLoginedAt=GO.util.basicDate(r.lastPopLoginedAt)),r.status=="online"?r["isOnline?"]=!0:r.status=="stop"?r["isStop?"]=!0:r.status=="dormant"?r["isDormant?"]=!0:r["isOnline?"]=!0,this.__setPosition(r.positionId,i),this.__setGrade(r.gradeId,s),this.__setDuty(o),this.__setLocale(h),this.__setTimeZone(),this.__setMailGroup(u),this.__setMailInfo(a),r.birthday!=undefined&&r.birthday.length>0&&(r.birthdayText=n.util.shortDate(r.birthday)),r.anniversary!=undefined&&r.anniversary.length>0&&(r.anniversaryText=n.util.shortDate(r.anniversary));if(r.memo){var b=r.memo;typeof b=="string"&&!b?r.memo=null:(b=b.replace(/(\n)/gi,"<br>"),b=b.replace(/ /gi,"&nbsp;"),r.memo=b)}if(r.selfInfo){var b=r.selfInfo;typeof b=="string"&&!b?r.selfInfo=null:(b=b.replace(/(\n)/gi,"<br>"),b=b.replace(/ /gi,"&nbsp;"),r.selfInfo=b)}var w=new v;w.setUserId(this.accountId),w.fetch({async:!1});var p=f({type:this.type,locales:h,timeZone:this.timeZone,members:r.deptMembers,groups:r.groupMembers,mailGroup:u,userInfo:r,positions:i,grades:s,email:m[0],companyInfo:this.companyInfo,mailInfo:a,addAlternateEmail:this._addAlternateEmail,instalLocale:g,isJpInstall:g=="ja",systemMailSetting:c,isOrgServiceOn:GO.util.isUseOrgService(!0),hasApproval:this.hasApproval,userVirtualDomains:l,isKoLocale:g=="ko",isEnLocale:g=="en",isJpLocale:g=="ja",isZhcnLocale:g=="zhcn",isZhtwLocale:g=="zhtw",isViLocale:g=="vi",additions:r.additions,availableMail:w.toJSON(),profileExposures:r.profileExposureInfoModel,profileVisibleInfos:t});this.$el.html(p),this.enableDeptMembersDraggable(),this.datePickerInit(),this.initProfileUpload();if(this.hasApproval){this.initApprovalUpload();var E=new d;E.set("id",this.accountId,{silent:!0}),E.fetch({async:!0,success:function(e){y.setApprovalConfig(e.toJSON()),y._renderApprAbsenceList(e.attributes.approvalDeputies)}})}return this.inheritMailGroupConfig(this.mailDomainGroup.toJSON()),this.inheritDomainMailServiceConfig(this.companyMailService.toJSON()),this.setMailServiceCheckbox(this.mailInfo.attributes,function(e,t){e.prop("disabled")||e.prop("checked",t)}),this.mailDomainConfigModel.otpService=="on"&&e("tr#otp").show(),this.mailDomainConfigModel.useAbbroadIpCheck=="on"&&e("tr#useAbbroadIpCheck").show(),this.changeRepresentationEmail(),this.$el.find("#repUserEmail").val(a.repUserEmail),this.setRepEmailMsg(a.repUserEmail),a.maxSendMailCountUse!="on"&&e("#maxSendMailCount").hide(),this.__deleteSendAllowGroupList(this.mailDomainGroup.toJSON().sendAllowList),this.customFieldRender(this.mailInfo),this.setBirthday(r.birthdayText),this},_renderApprAbsenceList:function(t){t.length==0?e("#apprAbsenceList").html('<tr><td valign="top" colspan="5" class="dataTables_empty align_c"><p class="data_null"> <span class="ic_data_type ic_no_data"></span><span class="txt">'+s["\ub4f1\ub85d\ub41c \uc124\uc815\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"]+"</span></p></tr></td>"):(e("#apprAbsenceList").find(".data_null").remove(),_.each(t,function(t){e("#apprAbsenceList").append(l({model:t,startAt:t.startAt.slice(0,10),endAt:t.endAt.slice(0,10),useFlag:t.useFlag?o["\uc0ac\uc6a9"]:o["\ubbf8\uc0ac\uc6a9"]}))}))},_getApprAbsenceList:function(){var t=this;if(this.hasApproval){var n=new d;n.set("id",t.accountId,{silent:!0}),n.fetch({async:!0,success:function(n){e("#apprAbsenceList").html(""),t._renderApprAbsenceList(n.attributes.approvalDeputies)},error:function(e,t){m.errorMessage(t)}})}},formSubmit:function(e){e.preventDefault();return},delegateEvents:function(t){return this.undelegateEvents(),u.prototype.delegateEvents.call(this,t),this.$el.on("click.account","#saveAction",e.proxy(this.saveAction,this)),this.$el.on("click.account","#cancel",e.proxy(this.cancel,this)),this.$el.on("click.account","span.editable",e.proxy(this.toggle,this)),this.$el.on("click.account","span.settingAbsence",e.proxy(this.settingAbsence,this)),this.$el.on("click.account","span.absence_delete",e.proxy(this.absenceDelete,this)),this.$el.on("click.account","#statusOnline",e.proxy(this.statusOnline,this)),this.$el.on("click.account","#statusClose",e.proxy(this.statusClose,this)),this.$el.on("click.account","#returnList",e.proxy(this.returnList,this)),this.$el.on("click.account","#addMailSenderEmail",e.proxy(this.addSenderEmail,this)),this.$el.on("click.account","span.sender_remove",e.proxy(this.removeSenderEmail,this)),this.$el.on("click.account","span#btnMultiLang",e.proxy(this.toggleMultiLang,this)),this.$el.on("click.account","span#goToBatchRegisterLink",e.proxy(this.goToBatchRegisterLink,this)),this.$el.on("change.account","#mailSenderMode input:radio[name='mailSenderUse']",e.proxy(this.toggleSenderEmail,this)),this.$el.on("submit","form",e.proxy(this.formSubmit,this)),this},undelegateEvents:function(){return u.prototype.undelegateEvents.call(this),this.$el.off("submit","form"),this.$el.off(".account"),this},updateMode:function(e){var t=e.toJSON();this.isDuplicateEmail=!1,this.isinvalidEmailFormat=!1,t.loginId!=""&&(this.isDuplicateLoginId=!1),t.employeeNumber!=""&&(this.isDuplicateEmployeeNo=!1)},statusClose:function(){e.goConfirm("",this.type.alertStatusClose,e.proxy(function(){this.__changeStatus(this.status.stop)},this))},__getUserMainInfo:function(){var t=GO.config("mailRoot")+"api/readUserApi.jsp?";e.go(t,"",{qryType:"GET",async:!1,contentType:"application/json",responseFn:e.proxy(function(e){location.href=GO.contextRoot+"admin/accounts"},this),error:function(t){e.goAlert(self.type.error)}})},statusOnline:function(){this.__changeStatus(this.status.online)},__changeStatus:function(t){var n=GO.contextRoot+"ad/api/user/status",r={ids:[this.accountId],id:t},i=this;e.go(n,JSON.stringify(r),{qryType:"PUT",async:!1,contentType:"application/json",responseFn:e.proxy(function(e){location.href=GO.contextRoot+"admin/accounts"},this),error:function(t){e.goAlert(i.type.error)}})},toggle:function(t){var n=e(t.target),r,i=e.trim(e(t.currentTarget).text()),s=e(t.currentTarget).parents("td");s.find("span.textarea")&&s.find("span.textarea").show().find("textarea").text(i).focus(),n.hasClass("password")?(e("#password").show(),e("#password_confirm").show(),n.parents("tr").hide(),this.passwordValidation=!0):n.hasClass("appr_password")?(n.parents("td").find("span.user_data").toggle(),this.apprPasswordValidation=!0):n.hasClass("ic_edit")?(r=n.parent().parent(),r.hide(),r.next().show()):(n.hide(),n.next().show())},settingAbsence:function(t){var n=e(t.target);n.hasClass("openSetting")?(n.parent().html('<span id="absenceSettingBtn" class="btn_s settingAbsence">'+s["\ubd80\uc7ac\ucd94\uac00"]+"</span>"),this.$el.find("p.go_alert").remove()):(new a({accountId:this.accountId})).render(),n.toggleClass("openSetting")},absenceDelete:function(t){var n=e(t.target);g.push({id:e(n).attr("data-id")}),this.mailInfo.attributes=e.extend(this.mailInfo.attributes,{approvalDelDeputies:g}),e(n).closest("tr").remove()},__deleteSendAllowGroupList:function(t){var n=this;e.each(t,e.proxy(function(t,r){n.isSavedGroupAllowList(r)&&e('#sendAllowModeEmails li input[value="'+r+'"]').parent("li").find("span.ic_delete").hide()},this))},__setSystemMailSetting:function(){var e=this.systemMailSetting.toJSON(),t=e.limitSendmailSize;return t=="on"?!0:!1},datePickerInit:function(){var t=e("#mailExpireDate"),n=e("#birthdayDate"),r=e("#anniversaryDate");e.datepicker.setDefaults(e.datepicker.regional[GO.config("locale")]),t.datepicker({defaultDate:"+1w",dateFormat:"yymmdd",changeMonth:!0,changeYear:!0,yearSuffix:""}),n.datepicker({defaultDate:"+1w",dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearSuffix:""}),r.datepicker({defaultDate:"+1w",dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearSuffix:""})},__setMailGroup:function(e){for(var t=0;t<e.length;t++)if(this.mailInfo.get("mailGroup")==e[t].mailGroup){e[t]["isMailGroup?"]=!0;return}},__setPosition:function(e,t){for(var n=0;n<t.length;n++)if(e==t[n].id){t[n]["isUserPosition?"]=!0;return}},__setLocale:function(e){for(var t=0;t<e.length;t++)if(this.mailInfo.get("locale")==e[t].value){e[t]["isLocale?"]=!0;break}},__setGrade:function(e,t){for(var n=0;n<t.length;n++)if(e==t[n].id){t[n]["isUserGrade?"]=!0;break}},__setDuty:function(e){for(var t=0;t<e.length;t++)e[t].dutyId!=undefined&&e[t].dutyId!=0&&(e[t]["isExistDuty?"]=!0)},__setTimeZone:function(){for(var e=0;e<this.timeZone.length;e++)this.mailInfo.get("timeZone")==this.timeZone[e].location&&(this.timeZone[e]["isTimeZone?"]=!0)},__setMailInfo:function(e){e["quotaWarningModeHide?"]=!1,e.quotaWarningMode=="on"?e["quotaWarningModeOn?"]=!0:e.quotaWarningMode=="off"?(e["quotaWarningModeHide?"]=!0,e["quotaWarningModeOff?"]=!0):(e["quotaWarningModeHide?"]=!0,e["quotaWarningModeGroup?"]=!0),e["violationHide?"]=!1,e.quotaViolationAction=="return"?e["ViolationReturn?"]=!0:e.quotaViolationAction=="store"?e["ViolationStore?"]=!0:(e["violationHide?"]=!0,e["ViolationGroup?"]=!0),e.alternateAddress=[];if(e.alternateAddr!=undefined)for(var t=0;t<e.alternateAddr.length;t++){var n={alternateEmailId:e.alternateAddr[t],domainName:this.companyInfo.domainName};e.alternateAddress.push(n)}e.alternateUserDomains=[];if(e.alternateUserDomain!=undefined)for(var t=0;t<e.alternateUserDomain.length;t++){var r={alternateUserDomain:e.alternateUserDomain[t]};e.alternateUserDomains.push(r)}e.forwardingAddress=[];if(e.forwardingAddr!=undefined)for(var t=0;t<e.forwardingAddr.length;t++){var i={forwardingEmailId:e.forwardingAddr[t].split("@")[0],domainName:e.forwardingAddr[t].split("@")[1]==null||e.forwardingAddr[t].split("@")[1]==undefined?this.companyInfo.domainName:e.forwardingAddr[t].split("@")[1],forwardingEmail:e.forwardingAddr[t]};e.forwardingAddress.push(i)}e.forwardingUse=="off"?e.forwardingUse_Off=!0:e.forwardingUse=="on"?e.forwardingUse_On=!0:(e.forwardingUse_Custom=!0,e["forwarding?"]=!0),e.forwardingMode=="forwarding"?e["forwarding?"]=!0:e.forwardingMode=="forwardingonly"?e["forwardingOnly?"]=!0:e["forwardingNone?"]=!0,e.sendAllowAddress=[];if(e.sendAllowAddr!=undefined)for(var t=0;t<e.sendAllowAddr.length;t++){var s={sendAllowEmail:e.sendAllowAddr[t]};e.sendAllowAddress.push(s)}e.sendAllowMode==undefined||e.sendAllowMode=="off"?e.sendAllowMode_Off=!0:e.sendAllowMode=="on"?e.sendAllowMode_On=!0:e.sendAllowMode_Custom=!0,e.hiddenForwardingAddress=[];if(e.hiddenForwardingAddr!=undefined)for(var t=0;t<e.hiddenForwardingAddr.length;t++){var o={hiddenForwardingEmail:e.hiddenForwardingAddr[t]};e.hiddenForwardingAddress.push(o)}if(e.hiddenForwardingMode==undefined||e.hiddenForwardingMode=="none"||e.hiddenForwardingMode=="off")e["hiddenForwardingNone?"]=!0;e.maxSendMailCountUse==undefined||e.maxSendMailCountUse=="off"?e.maxSendMailCountUseOff=!0:e.maxSendMailCountUse=="on"?e.maxSendMailCountUseOn=!0:e.maxSendMailCountUse=="group"&&(e.maxSendMailCountUseGroup=!0);if(e.mailSenderUse=="off")e["mailSenderOff?"]=!0,e["mailSenderUse?"]=!1;else if(e.mailSenderUse=="on")e["mailSenderOn?"]=!0,e["mailSenderUse?"]=!0;else if(e.mailSenderUse==undefined||e.mailSenderUse=="")e["mailSenderGroup?"]=!0,this.mailDomainGroup.get("mailSenderUse")=="on"?e["mailSenderUse?"]=!0:e["mailSenderUse?"]=!1;e.mailSenderAddress=[];var u=!1;if(e.mailSenders!=undefined)for(var t=0;t<e.mailSenders.length;t++){e.mailSenderAddress.push({emailInfo:e.mailSenders[t].email,personal:e.mailSenders[t].personal,email:e.mailSenders[t].email,isLoginEmail:!1,isSelected:e.mailSenders[t].defaultMail});if(!u)continue}e.mailSenderAddress.splice(0,0,{emailInfo:'"'+e.name+'" <'+e.email+">",personal:"",email:'"'+e.name+'" <'+e.email+">",isLoginEmail:!0,isSelected:u?!1:!0});for(var t=0;t<e.configs.length;t++)e.configs[t].name=="otpService"&&e.configs[t].value=="true"?e["isOtpService?"]=!0:e.configs[t].name=="otpService"&&e.configs[t].value=="false"?e["isOtpService?"]=!1:e.configs[t].name=="useAbbroadIpCheck"&&e.configs[t].value=="true"?e["isUseAbbroadIpCheck?"]=!0:e.configs[t].name=="useAbbroadIpCheck"&&e.configs[t].value=="false"&&(e["isUseAbbroadIpCheck?"]=!1);this.__setSelectBox("inboxExpireDays",e),this.__setSelectBox("trashExpireDays",e),this.__setSelectBox("spamExpireDays",e)},__setSelectBox:function(t,n){var r=["none","0","30","60","90","120","custom"],i=[];n[t+"Options"]={},n[t+"CustomHide?"]=!0;for(var o=0;o<r.length;o++){var u={};r[o]=="none"?(u.text=s["\uadf8\ub8f9 \uc124\uc815\uc5d0 \ub530\ub984"],u.value="none"):r[o]==0?(u.text=s["\ubb34\uc81c\ud55c"],u.value=0):r[o]=="custom"?(u.text=s["\uc9c1\uc811\uc785\ub825"],u.value="custom"):(u.text=r[o]+s["\uc77c\ub2e8\uc704"],u.value=r[o]),o==0&&n[t]==""&&(u["selected?"]=!0),r[o]==n[t]&&(u["selected?"]=!0),o==r.length-1&&e.inArray(n[t],["none","","0","30","60","90","120"])<0&&(u["selected?"]=!0,n[t+"CustomHide?"]=!1),i.push(u)}n[t+"Options"]=i,n[t]=="none"&&(n[t]="")},setRepEmailMsg:function(t){var n=t.split("@"),r=e("#alternateEmails li");e.each(r,function(t){if(e(this).find('[name="alternateEmailId"]').val()==n[0]){e(this).append(s["\ub300\ud45c \uc774\uba54\uc77c \uc8fc\uc18c\ub85c \uc0ac\uc6a9\uc911\uc785\ub2c8\ub2e4."]);return}});var i=e("#userVirtualDomains li");e.each(i,function(t){if(e(this).find('[name="userVirtualDomain"]').val()==n[1]){e(this).append(s["\ub300\ud45c \uc774\uba54\uc77c \uc8fc\uc18c\ub85c \uc0ac\uc6a9\uc911\uc785\ub2c8\ub2e4."]);return}})},customFieldRender:function(t){var n=this;e.go(GO.contextRoot+"ad/api/customprofile/use/config",{},{qryType:"GET",async:!1,responseFn:function(n){if(n.data.length==0){e("#customInfo").hide();return}var r="",s=[];e.each(n.data,function(e,n){var o=t.get(n.profileName)==undefined?"":t.get(n.profileName);n.dataType=="String"?(r+='<tr><th><span class="title">'+n.name+"</span></th>"+"<td>",t.get(n.profileName)==undefined||t.get(n.profileName)==""?r+='<input class="w200 input" type="text" name="'+n.profileName+'" id="'+n.profileName+'" value="'+o+'"/></td>':r+='<span class="user_data editable">'+t.get(n.profileName)+'<span class="btn_box"><span class="ic ic_edit" title="'+i["\uc218\uc815"]+'"></span></span></span>'+'<input class="w200 input" type="text" name="'+n.profileName+'" id="'+n.profileName+'" value="'+o+'" style="display:none;"/></td>',r+="</tr>"):(r+='<tr><th><span class="title">'+n.name+"</span></th>"+'<td><input class="w200 input" type="text" name="'+n.profileName+'" id="'+n.profileName+'" value="'+o+'"/></td>'+"</tr>",s.push(n.profileName))}),e("#customInfo table.detail").append(r),e.each(s,function(t,n){e("#"+n).datepicker({defaultDate:"+1w",dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearSuffix:""})})},error:function(t){var n=JSON.parse(t.responseText);e.goMessage(n.message)}})},removeSaveCancelBtn:function(){this.$el.find("div.page_action").remove()}});return y})}).call(this);