(function(){define(["jquery","app","i18n!nls/commons","i18n!admin/nls/admin","admin/models/board_base_config","hgn!admin/templates/board_base_config","jquery.go-popup","jquery.go-sdk"],function(e,t,n,r,i,s){var o={label_ok:n["\uc800\uc7a5"],label_cancel:n["\ucde8\uc18c"],label_title:r["\uac8c\uc2dc\ud310 \uae30\ubcf8\uc124\uc815"],label_side:r["Side \uc6b0\uc120 \uc124\uc815"],label_dept:r["\ubd80\uc11c \uac8c\uc2dc\ud310"],label_company:r["\uc804\uc0ac \uac8c\uc2dc\ud310"],label_base:r["\uae30\ubcf8 \uc124\uc815"],label_attach_limit:r["\ucca8\ubd80\ud30c\uc77c \uc6a9\ub7c9\uc81c\ud55c"],label_attach_limit_desc:r["\ud30c\uc77c1\uac1c"],label_non_limit:r["\uc81c\ud55c\uc5c6\uc74c"],label_limit_size:r["\uc6a9\ub7c9\uc81c\ud55c"],label_limit_number:r["\uac1c\uc218\uc81c\ud55c"],label_mb:r.MB,label_attach_num_limit:r["\ucca8\ubd80\ud30c\uc77c \uac1c\uc218\uc81c\ud55c"],label_attach_num_limit_desc:r["\uac8c\uc2dc\ubb3c\ub2f9"],label_count:r["\uac1c"],label_under:r["\uc774\ud558"],label_exclude:r["\uc5c5\ub85c\ub4dc \ubd88\uac00 \ud30c\uc77c"],label_desc:r["\uc5c5\ub85c\ub4dc \uc81c\ud55c"]},u=t.BaseView.extend({el:"#layoutContent",unbindEvent:function(){this.$el.off("click","form[name='formBoardConfig'] input:radio"),this.$el.off("click","span#btn_ok"),this.$el.off("click","span#btn_cancel"),this.$el.off("focusout","span#maxAttachSize input"),this.$el.off("focusout","span#maxAttachNumber input"),this.$el.off("keyup","input[name='excludeExtension']"),this.$el.off("click","span.btn_box[data-btntype='changeform']"),this.$el.off("click","span#data"),this.$el.off("keyup","span#maxAttachSize input"),this.$el.off("keyup","span#maxAttachNumber input"),this.$el.off("click","span#data"),this.$el.off("submit","form")},bindEvent:function(){this.$el.on("click","form[name='formBoardConfig'] input:radio",e.proxy(this.toggleRadio,this)),this.$el.on("click","span#btn_ok",e.proxy(this.boardConfigSave,this)),this.$el.on("click","span#btn_cancel",e.proxy(this.boardConfigCancel,this)),this.$el.on("focusout","span#maxAttachSize input",e.proxy(this.inputValidator,this)),this.$el.on("focusout","span#maxAttachNumber input",e.proxy(this.inputValidator,this)),this.$el.on("keyup","input[name='excludeExtension']",e.proxy(this.keyUPValidator,this)),this.$el.on("click","span.btn_box[data-btntype='changeform']",e.proxy(this.changeModifyForm,this)),this.$el.on("click","span#data",e.proxy(this.changeModifyForm,this)),this.$el.on("keyup","span#maxAttachSize input",e.proxy(this.keyUPValidator,this)),this.$el.on("keyup","span#maxAttachNumber input",e.proxy(this.keyUPValidator,this)),this.$el.on("click","span#data",e.proxy(this.changeModifyForm,this)),this.$el.on("submit","form",e.proxy(this.formSubmit,this))},formSubmit:function(e){e.preventDefault();return},keyUPValidator:function(t){var n=t.currentTarget.value,i=t.currentTarget.id,s=e(t.currentTarget).parent(),o=s.parent().parent().find(".go_alert");o.html("");if(i=="excludeExtension"){if(!n.match(new RegExp("^[a-zA-Z0-9,]*$")))return o.html(r["\uc601\uc5b4, \uc27c\ud45c, \uc22b\uc790\ub9cc \uc785\ub825\uac00\ub2a5"]),t.currentTarget.focus(),t.currentTarget.value="",!1}else{if(n==0||n=="")return o.html(r["\uc81c\ud55c \uac12\uc744 \uc785\ub825\ud558\uc138\uc694."]),t.currentTarget.focus(),t.currentTarget.value="",!1;if(!(t.keyCode>=96&&t.keyCode<=105||t.keyCode>=48&&t.keyCode<=57||t.keyCode==46||t.keyCode==13||t.keyCode==8))return o.html(r["\uc22b\uc790\ub9cc \uc785\ub825\ud558\uc138\uc694."]),t.currentTarget.value="",!1}},changeModifyForm:function(t){var n=e(t.currentTarget).parent();n&&n.attr("data-formname")=="excludeExtension"?n.html(['<input type="input" name="',n.attr("data-formname"),'"id="',n.attr("data-formname"),'" class="input w_large" value="',n.attr("data-value"),'" />'].join("")).find("input").focusin():(e(t.currentTarget).hide(),n.html(['<input type="input" name="',n.attr("data-formname"),'"id="',n.attr("data-formname"),'" class="input t_num" value="',n.attr("data-value"),'" />'].join("")).find("input").focusin())},inputValidator:function(t){var n=t.currentTarget.value,i=t.currentTarget.id,s=e(t.currentTarget).parent(),o=s.parent().parent().find(".go_alert"),u=e("input#size_false").is(":checked"),a=e("input#number_false").is(":checked");o.html("");if(u==0&&i=="maxAttachSize"&&n>999)return o.html(r["1~999"]),t.currentTarget.focus(),!1;if(a==0&&i=="maxAttachNumber"&&n>99)return o.html(r["1~99"]),t.currentTarget.focus(),!1},initialize:function(){this.model=i.read({admin:!0}),this.unbindEvent(),this.bindEvent()},render:function(){this.$el.empty();var t=this,n=this.model.toJSON(),r=s({lang:o,model:n,hasExcludeExtension:function(){return n.excludeExtension==null||n.excludeExtension==""?!0:!1},isOrgServiceOn:GO.util.isUseOrgService(!0)});this.$el.html(r),t.model.get("attachSizeLimit")||e("#maxAttachSize").hide(),t.model.get("attachNumberLimit")||e("#maxAttachNumber").hide()},toggleRadio:function(t){e(t.currentTarget).attr("value")=="true"?e(t.currentTarget).is(':radio[name="attachSizeLimit"]')?(e("#maxAttachSize").show(),e('input[name="maxAttachSize"]').focus()):e(t.currentTarget).is(':radio[name="attachNumberLimit"]')&&(e("#maxAttachNumber").show(),e('input[name="maxAttachNumber"]').focus()):e(t.currentTarget).attr("value")=="false"&&(e(t.currentTarget).is(':radio[name="attachSizeLimit"]')?(e("#maxAttachSize").hide(),e("#maxAttachSizeAlert").html("")):e(t.currentTarget).is(':radio[name="attachNumberLimit"]')&&(e("#maxAttachNumber").hide(),e("#maxAttachNumberAlert").html("")))},boardConfigSave:function(){var t=this,i=!0;form=this.$el.find("form[name=formBoardConfig]"),e.each(form.serializeArray(),function(n,s){var o=s.value,u=s.name,a=e("#"+s.name+"Alert");a.html("");if(u=="excludeExtension"){if(!o.match(new RegExp("^[a-zA-Z0-9,]*$")))return a.html(r["\uc601\uc5b4, \uc27c\ud45c, \uc22b\uc790\ub9cc \uc785\ub825\uac00\ub2a5"]),e('input[name="'+u+'"]').focus(),i=!1,!1;s.value=s.value.toLowerCase()}else{var f=e("input#size_false").is(":checked"),l=e("input#number_false").is(":checked");if(!(o!=0&&o!=""||f!=0&&l!=0))return a.html(r["\uc81c\ud55c \uac12\uc744 \uc785\ub825\ud558\uc138\uc694."]),e('input[name="'+u+'"]').focus(),i=!1,!1;if(f==0&&u=="maxAttachSize"&&o>999)return a.html(r["1~999"]),e('input[name="'+u+'"]').focus(),i=!1,!1;if(l==0&&u=="maxAttachNumber"&&o>99)return a.html(r["1~99"]),e('input[name="'+u+'"]').focus(),i=!1,!1}if(!i)return!1;t.model.set(s.name,s.value,{silent:!0})});if(!i)return!1;t.model.save({},{success:function(r,i){i.code=="200"&&(e.goMessage(n["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]),t.render())},error:function(t,r){var i=JSON.parse(r.responseText);i.message!=null?e.goMessage(i.message):e.goMessage(n["\uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."])}})},boardConfigCancel:function(){var t=this;e.goCaution(n["\ucde8\uc18c"],n["\ubcc0\uacbd\ud55c \ub0b4\uc6a9\uc744 \ucde8\uc18c\ud569\ub2c8\ub2e4."],function(){t.render(),e.goMessage(n["\ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."])},n["\ud655\uc778"])}},{__instance__:null});return u})}).call(this);