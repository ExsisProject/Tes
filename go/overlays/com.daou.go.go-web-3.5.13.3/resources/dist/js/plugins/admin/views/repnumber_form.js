(function(){define(["backbone","app","i18n!nls/commons","i18n!admin/nls/admin","i18n!sms/nls/sms","hgn!admin/templates/repnumber_form","sms/models/sms_repnumber","GO.util","jquery.go-validation","jquery.go-preloader","jquery.go-sdk"],function(e,t,n,r,i,s,o){function f(){this.model.set({name:this.$el.find("#name").val(),repNumber:this.$el.find("#repNumber").val(),status:$(":radio[name='status']:checked").val()})}function l(){return $.goValidation.isCheckLength(1,64,this.model.get("name"))?(this.$el.find("#name_validation").hide(),$.goValidation.isCheckLength(1,64,this.model.get("repNumber"))?(this.$el.find("#repNumber_validation").hide(),$.trim(this.model.get("repNumber"))&&!$.goValidation.isInvalidTel(this.model.get("repNumber"))?(this.$el.find("#repNumber_validation").show(),this.$el.find("#repNumber_validation").text(r["\uc804\ud654\ubc88\ud638\ud5c8\uc6a9\ubb38\uc790"]),this.$el.find("#repNumber").focus(),!1):!0):(this.$el.find("#repNumber_validation").show(),this.$el.find("#repNumber_validation").text(t.i18n(r["0\uc790\uc774\uc0c1 0\uc774\ud558 \uc785\ub825\ud574\uc57c\ud569\ub2c8\ub2e4."],{arg1:1,arg2:64})),this.$el.find("#repNumber").focus(),!1)):(this.$el.find("#name_validation").show(),this.$el.find("#name").focus(),!1)}function c(){this.$el.html(s({lang:u,data:$.extend({},this.model.toJSON(),{isNormal:this.model.get("status")=="NORMAL"})}))}var u={save:n["\uc800\uc7a5"],cancel:n["\ucde8\uc18c"],save_success:n["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."],remove:n["\uc0ad\uc81c"],state:r["\uc0ac\uc6a9\uc5ec\ubd80"],normal:r["\uc815\uc0c1"],hidden:r["\uc228\uae40"],menu_title:r["\ub300\ud45c\ubc88\ud638 \uc124\uc815"],rep_info:i["\ub300\ud45c\ubc88\ud638 \ub4f1\ub85d\uc815\ubcf4"],repnumber_name:i["\ub300\ud45c\ubc88\ud638 \uc774\ub984"],repnumber:i["\ubc1c\uc2e0\ubc88\ud638"],limit_char:t.i18n(r["0\uc790\uc774\uc0c1 0\uc774\ud558 \uc785\ub825\ud574\uc57c\ud569\ub2c8\ub2e4."],{arg1:1,arg2:64})},a=e.View.extend({el:"#layoutContent",events:{"click input[id*='_all']":"selectAll","click #save":"save","click #cancel":"cancel"},initialize:function(){this.$el.off(),this.isCreate=this.options.repNumberId==undefined||this.options.repNumberId=="create"?!0:!1,this.model=new o({type:"company"}),this.isCreate?this.model.setInitData():(this.model.set({id:this.options.repNumberId}),this.model.fetch({async:!1}))},render:function(){c.call(this)},save:function(){var e=$.goPreloader();e.render(),f.call(this);if(!l.call(this))return e.release(),!1;this.model.save(null,{success:function(){e.release();var n="sms/repnumber";$.goMessage(u.save_success),t.router.navigate(n,{trigger:!0})},error:function(t,r){e.release(),r.message?$.goAlert(r.message):$.goMessage(n["\uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."])}})},selectAll:function(e){var t=$(e.currentTarget),n=t.is(":checked");$("input[name='"+t.attr("name")+"']").attr("checked",n)},cancel:function(){var e="sms/repnumber";t.router.navigate(e,{trigger:!0})}},{render:function(e){var t=new a(e);return t.render(),t}});return a})})();