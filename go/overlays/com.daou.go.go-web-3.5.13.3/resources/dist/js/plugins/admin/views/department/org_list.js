define("admin/views/department/org_list",function(require){var e=require("backbone"),t=require("app"),n=require("hgn!admin/templates/org_list"),r=require("components/backdrop/backdrop"),i=require("admin/views/account/account_detail"),s=require("i18n!admin/nls/admin"),o=require("i18n!nls/commons"),u=t.contextRoot+"ad/api/",a=require("hgn!admin/templates/org_member"),f=require("hgn!admin/templates/_modify_class_popup"),l=require("admin/collections/position_list"),c=require("admin/collections/grade_list"),h=require("admin/collections/duty_list"),p=require("admin/collections/usergroup_list"),d=require("admin/collections/mailgroup_list"),v=require("components/active-scroll/active-scroll"),m={"\uc9c1\uc704 \ubcc0\uacbd":s["\uc9c1\uc704 \ubcc0\uacbd"],"\uc9c1\uae09 \ubcc0\uacbd":s["\uc9c1\uae09 \ubcc0\uacbd"],"\uc9c1\ucc45 \ubcc0\uacbd":s["\uc9c1\ucc45 \ubcc0\uacbd"],"\uc0ac\uc6a9\uc790\uadf8\ub8f9 \ubcc0\uacbd":s["\uc0ac\uc6a9\uc790\uadf8\ub8f9 \ubcc0\uacbd"],"\uba54\uc77c\uadf8\ub8f9 \ubcc0\uacbd":s["\uba54\uc77c\uadf8\ub8f9 \ubcc0\uacbd"],"\uacc4\uc815\uc0c1\ud0dc \ubcc0\uacbd":s["\uacc4\uc815\uc0c1\ud0dc \ubcc0\uacbd"],"\ubd80\uc11c\uc7a5 \uc704\uc784":s["\ubd80\uc11c\uc7a5 \uc704\uc784"],"\ubd80\ubd80\uc11c\uc7a5 \uc704\uc784":s["\ubd80\ubd80\uc11c\uc7a5 \uc704\uc784"],"\ubd80\uc11c\uc6d0 \uc704\uc784":s["\ubd80\uc11c\uc6d0 \uc704\uc784"],"\ubd80\uc11c \uc774\ub3d9":s["\ubd80\uc11c \uc774\ub3d9"],"\uc2e0\uaddc \ubd80\uc11c\uc6d0 \uc0dd\uc131":s["\uc2e0\uaddc \ubd80\uc11c\uc6d0 \uc0dd\uc131"],"\uc18c\uc18d\ub41c \ubd80\uc11c\uc6d0\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.":s["\uc18c\uc18d\ub41c \ubd80\uc11c\uc6d0\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."],dept_member_empty:s["\ub4f1\ub85d\ub41c \ubd80\uc11c\uc6d0\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."],"\ubd80\uc11c \ud574\uc81c":s["\ubd80\uc11c \ud574\uc81c"],"\uba64\ubc84 \uc0ad\uc81c":s["\uba64\ubc84 \uc0ad\uc81c"],reorder_save:s["\uc21c\uc11c\ubc14\uafb8\uae30 \uc644\ub8cc"],"\uc790\ub3d9\uc815\ub82c":s["\uc790\ub3d9\uc815\ub82c"],"\uc790\ub3d9\uc815\ub82c \ud234\ud301":s["\uc790\ub3d9\uc815\ub82c \ud234\ud301"],"\uc21c\uc11c\ubc14\uafb8\uae30":o["\uc21c\uc11c\ubc14\uafb8\uae30"],"\uae30\ubcf8\uc815\ubcf4":s["\uae30\ubcf8\uc815\ubcf4"],"\uba54\uc77c\uadf8\ub8f9":s["\uba54\uc77c\uadf8\ub8f9"],"\uc804\uc790\uacb0\uc7ac":s["\uc804\uc790\uacb0\uc7ac"],"\ubd80\uac00 \uae30\ub2a5":s["\ubd80\uac00 \uae30\ub2a5"],"\ubd80\uac00\uc815\ubcf4":s["\ubd80\uac00\uc815\ubcf4"],"\uc800\uc7a5":o["\uc800\uc7a5"],"\ucde8\uc18c":o["\ucde8\uc18c"]},g=e.View.extend({events:{"click li.member":"clickMember","click #positionCtr":"toggleSubPosition","click #managerCtr":"toggleSubManager","click #deptCtr":"toggleSubDept","click #deleteDeptMembers":"deleteDeptMembers","click #deleteMembers":"deleteMembers","click .moveDeptMembers":"moveDeptMembers","click .changePosition":"modifyPosition","click .setManager":"setManager","click #allCheck":"toggleAllCheck","click input[type=checkbox]":"clickCheckbox","click span#btnReorderDeptMembers":"reorderDeptMembers","click input#autoOrder":"changeAutoOrder","click #deptMemberContent #save":"save","click #deptMemberContent #cancel":"cancel","click #createMember":"createMember"},initialize:function(){this.positions=l.getCollection(),this.grades=c.getCollection(),this.userGroups=p.getCollection(),this.mailGroups=d.getCollection(),this.duties=h.getCollection()},render:function(){this.$el.html(n({lang:m})),this.initScrollBar()},initScrollBar:function(){new SimpleBar($("#deptMemberDiv")[0])},clickMember:function(e){var t=$(e.currentTarget),n=t.data("userid");this.onPreparedMemberListRendering(),this.onCompletedMembersRendering(),this.renderMember(n)},clickCheckbox:function(e){e.stopPropagation()},renderMember:function(e){this.activeScroll&&this.activeScroll.unbind();var t=this;e&&(this.accountDetailView=new i({userId:e})),this.userId=e,this.membersRendered.promise().done(function(){t.$el.find("li.member").removeClass("active");var n=t.$el.find("li.member[data-userid="+e+"]");if(!e||n.length==0){n=t.$el.find("li.member").first();if(n.length>0){n.trigger("click");return}}n.length>0&&(n.addClass("active"),t.$el.find("#accountDetail").html(t.accountDetailView.$el),t.accountDetailView.render(),t.accountDetailView.removeSaveCancelBtn(),t.$el.find("#deptMemberInfo div.tab_menu_wrap").show(),t.$el.find(".page_action").show()),t.setScrollEvent(t.$el.find("#accountDetail"))})},setScrollEvent:function(e){var t={baseInfo:"mainInfo",mail_config:"mailInfo",apprContainer:"apprInfo",divEmailEtcConfig:"etcFeatureInfo",divMoreInfo:"moreInfo"};this.activeScroll=new v({scrollEl:e,activeClass:"active",menuArray:t,first:"baseInfo",last:"divMoreInfo"}),this.activeScroll.bind()},changeAutoOrder:function(e){var t=$(e.currentTarget).prop("checked");this.$el.find("#btnReorderDeptMembers").toggle();var n=$(this.listEl.find("li")).map(function(e,t){return $(t).data("id")}).get();t?this.deptSortOrderChange():this.saveOrders(n)},save:function(){var e=$("#dept_members").find("input[name='deptId']");this.accountDetailView.save($.proxy(function(){this.$el.trigger("orgChanged"),this._refreshAll(this.userId),this.refreshAddedDeptNode(e,this.deptId)},this))},cancel:function(){this.renderMember(this.userId)},createMember:function(){$("#createNewMember").trigger("click")},refreshAddedDeptNode:function(e,t){var n=this;if(t!==-1&&e.size()===0){var r=this.getNodeFromDepId(-1);r.length>0&&$("#orgMemTree").jstree("refresh",r);return}_.each(e,function(e){if($(e).val()!==this.deptId){var t=n.getNodeFromDepId($(e).val());t.length>0&&$("#orgMemTree").jstree("refresh",t)}})},_refreshAll:function(e){this.deptId&&(this.onPreparedMemberListRendering(),this.loadDeptMembers(this.deptId),this.getNodeFromDepId(this.deptId).length>0&&$("#orgMemTree").jstree("refresh",this.getNodeFromDepId(this.deptId)),t.EventEmitter.trigger("admin","refreshHeader",this.deptId)),e&&this.renderMember(e)},renderDeptMemberList:function(e){this.deptId=e,this.deptId&&(this.onPreparedMemberListRendering(),this.loadDeptMembers(this.deptId)),this.renderMember(this.userId)},offReorderMode:function(){this.$el.find("#deptMemberContent").hasClass("ui-sortable")&&this.$el.find("#deptMemberContent").sortable("destroy"),this.$el.find("#btnReorderDeptMembers").removeClass("on btn_list_change"),this.$el.find("#btnReorderDeptMembers span.txt").text(s["\uc21c\uc11c\ubc14\uafb8\uae30"]),this.$el.find("#memberControlBtn").show(),this.$el.find(".orderArea").show(),this.$el.find("#deptMemberInfo").show(),this.$el.find("input[type=checkbox]").attr({disabled:!1})},reorderDeptMembers:function(e){e.stopPropagation();var t=this,n=$(e.currentTarget).hasClass("on"),r=this.$el.find("#memberControlBtn");if(n){var i=$(this.listEl.find("li")).map(function(e,t){return $(t).data("id")}).get();this.saveOrders(i),this.offReorderMode()}else{if(!this.listEl||!this.listEl.find("ul li"))return $.goMessage(m.dept_member_empty),!1;this.listEl.find("li.active").removeClass("active"),r.hide(),t.$el.find("#deptMemberInfo").hide(),$(e.currentTarget).addClass("on btn_list_change"),$(e.currentTarget).find("span.txt").text(m.reorder_save),this.$el.find(".orderArea").hide(),this.$el.find("#deptMemberContent").sortable({opacity:"1",delay:100,cursor:"move",items:"li",containment:"#deptMemberContent",hoverClass:"ui-state-hover",placeholder:"ui-sortable-placeholder",start:function(e,t){t.helper.addClass("ui-sortable-drag")},stop:function(e,t){t.item.removeClass("ui-sortable-drag")}})}this.$el.find("input[type=checkbox]").attr({checked:!1,disabled:!n})},changeOrder:function(e){this.$el.find("#autoOrder").attr("checked",e),this.$el.find("#btnReorderDeptMembers").toggle(!e)},saveOrders:function(e){var t=this;$.go(u+"/department/"+this.deptId+"/member/sortorder",JSON.stringify({ids:e}),{async:!1,qryType:"PUT",contentType:"application/json",responseFn:function(e){$.goMessage(o["\ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]),t.deptId&&$("#orgMemTree").jstree("refresh",t.getNodeFromDepId(t.deptId))},error:function(){t.loadDeptMembers(t.deptId)}})},deptSortOrderChange:function(){var e=this,t=this.deptId,n=this.$el.find("#autoOrder").prop("checked"),r=[u+"department",t,n];$.go(r.join("/"),{},{qryType:"PUT",contentType:"application/json",responseFn:function(t){t.code==200&&(e.loadDeptMembers(t.data.id),$("#orgMemTree").jstree("refresh",e.getNodeFromDepId(t.data.id)))},error:function(e){var t=JSON.parse(e.responseText);if(t&&t.message){$.goMessage(t.message);return}$.goMessage(o["\uc800\uc7a5\uc5d0 \uc2e4\ud328 \ud558\uc600\uc2b5\ub2c8\ub2e4."])}})},onPreparedMemberListRendering:function(){this.membersRendered=$.Deferred()},onCompletedMembersRendering:function(){this.membersRendered.resolve()},loadDeptMembers:function(e){var t=this;t.deptId=e,t.listEl=$(this.el).find("#deptMembers"),this.$el.find("#accountDetail").empty(),this.$el.find(".tab_menu_wrap").hide(),this.$el.find(".page_action").hide();var n=u+"department/"+(e===-1?"unspecified":e)+"/members";$.go(n,"",{qryType:"GET",responseFn:function(e){t.listEl.empty(),t.offReorderMode(),e.data.length>0?(t.$el.find(".notNullData").show(),t.$el.find(".nullData").hide(),t.$el.find("#deptMemberContent").removeClass("null_data"),_.each(e.data,function(e){t.listEl.append(Hogan.compile(a(e)).render())})):(t.$el.find(".notNullData").hide(),t.$el.find(".nullData").show(),t.$el.find("#deptMemberContent").addClass("null_data"),t.deptId==-1?(t.$el.find("#noMembers").text(s["\ubd80\uc11c \ubbf8\uc9c0\uc815 \uba64\ubc84\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."]),t.$el.find("#createMember span.txt").text(s["\uc2e0\uaddc \uba64\ubc84 \uc0dd\uc131"])):(t.$el.find("#noMembers").text(s["\uc18c\uc18d\ub41c \ubd80\uc11c\uc6d0\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."]),t.$el.find("#createMember span.txt").text(s["\uc2e0\uaddc \ubd80\uc11c\uc6d0 \uc0dd\uc131"]))),t.onCompletedMembersRendering()}})},toggleSubPosition:function(){this.subPositionBackdropView||(this.subPositionBackdropView=this._bindBackdrop(this.$el.find("#subPositionMenu"),this.$el.find("#positionCtr")))},toggleSubManager:function(){this.subManagerBackdropView||(this.subManagerBackdropView=this._bindBackdrop(this.$el.find("#subManagerMenu"),this.$el.find("#managerCtr")))},toggleSubDept:function(){this.subDeptBackdropView||(this.subDeptBackdropView=this._bindBackdrop(this.$el.find("#subDeptMenu"),this.$el.find("#deptCtr")))},toggleAllCheck:function(e){$(e.currentTarget).is(":checked")?this.$el.find("li input:checkbox").attr("checked",!0):this.$el.find("li input:checkbox").attr("checked",!1)},deleteDeptMembers:function(){var e=this,t=this.getCheckedDeptMemberIds();this.checkValidation(t)&&($.goPopup({pclass:"layer_confim",width:500,contents:s["\ubd80\uc11c \ud574\uc81c \uc124\uba85"],buttons:[{btext:o["\ud655\uc778"],btype:"confirm",autoclose:!0,callback:function(){$.go(u+"deptmember",JSON.stringify({ids:t}),{qryType:"DELETE",contentType:"application/json",responseFn:function(){e.deptId&&($("#orgMemTree").jstree("refresh",e.getNodeFromDepId(e.deptId)),$(".tab_menu li [data-type='member_list']").trigger("click"),$("#orgMemTree").jstree("refresh",e.getNodeFromDepId(-1)))}}),e.$el.find("#allCheck").prop("checked",!1)}},{btext:o["\ucde8\uc18c"],btype:"normal"}]}),this.subDeptBackdropView&&(this.subDeptBackdropView.toggle(!1),this.subDeptBackdropView.unBindBackdrop(),this.subDeptBackdropView=null))},moveDeptMembers:function(e){var n=this;this.checkedIds=this.getCheckedDeptMemberIds(),this.checkValidation(this.checkedIds)&&$.goOrgSlide({header:n.deptId&&n.deptId==-1?s["\ubd80\uc11c \uc9c0\uc815"]:s["\ubd80\uc11c \uc774\ub3d9"],isAdmin:!0,type:"department",externalLang:o,contextRoot:t.contextRoot,desc:s["\ucd94\uac00\ud558\ub824\ub294 \ubd80\uc11c\ub97c \uc120\ud0dd\ud558\uc2e0 \ud6c4 \ud655\uc778 \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc138\uc694."],target:e,zIndex:200,buttons:[{btext:o["\ud655\uc778"],bclass:"btn_major_s",autoClose:!0,callback:$.proxy(this._moveDeptMembers,n)}]})},checkValidation:function(e){if(e.length>0)return!0;var t=s["\uba64\ubc84 \uc120\ud0dd \uc54c\ub9bc"];return this.listEl.find("li").length===0&&(t=s["\ub4f1\ub85d\ub41c \ubd80\uc11c\uc6d0\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."]),$.goMessage(t),!1},_moveDeptMembers:function(e){var n=this,r=u+"deptmembers/"+e.id+"/move",i={ids:this.checkedIds},o="PUT";this.checkValidation(this.checkedIds)&&(n.deptId===-1&&(r=u+"department/"+e.id+"/members",i={ids:this.getCheckedUserIds()},o="POST"),$.go(r,JSON.stringify(i),{qryType:o,contentType:"application/json",responseFn:function(r){r.code==="200"&&(t.EventEmitter.on("admin","refreshFinish",function(){this._refreshAll(this.userId),t.EventEmitter.off("admin","refreshFinish")},n),n.getNodeFromDepId(e.id).length>0?$("#orgMemTree").jstree("refresh",n.getNodeFromDepId(e.id)):t.EventEmitter.trigger("admin","refreshFinish"),n.$el.find("#allCheck").prop("checked",!1),$.goMessage(s["\ud574\ub2f9 \uba64\ubc84\uc758 \ubd80\uc11c\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]))},error:function(e){$.goAlert(s["\uc774\ub3d9\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4."])}}))},modifyPosition:function(e){var t=this,n=this.getCheckedUserIds(),r=$(e.currentTarget).data("type"),i={select_user:s["\uc120\ud0dd\ub41c \uc0ac\uc6a9\uc790"],about_target_person:s["\uba85\uc5d0 \ub300\ud574\uc11c"],modify_position:s["\uc9c1\uc704 \ubcc0\uacbd"],modify_grade:s["\uc9c1\uae09 \ubcc0\uacbd"],modify_duty:s["\uc9c1\ucc45 \ubcc0\uacbd"],modify_mail_group:s["\uba54\uc77c\uadf8\ub8f9 \ubcc0\uacbd"],modify_status:s["\uacc4\uc815\uc0c1\ud0dc"]+" "+o["\ubcc0\uacbd"],modify_user_group:s["\uc0ac\uc6a9\uc790\uadf8\ub8f9 \ubcc0\uacbd"],change:o["\ubcc0\uacbd"],dont_change_status:s["\uc0c1\ud0dc \ubcc0\uacbd\uc774 \ubd88\uac00\ub2a5\ud569\ub2c8\ub2e4. \ub77c\uc774\uc120\uc2a4 \uacc4\uc815\uc218\ub97c \ud655\uc778\ud558\uc138\uc694."],add_user_group:s["\uc120\ud0dd\ud55c \ud074\ub798\uc2a4\ub97c \ucd94\uac00\ud568"],change_user_group:s["\uc120\ud0dd\ud55c \ud074\ub798\uc2a4\ub85c \ubc14\uafb8\uae30"]};this.checkValidation(n)&&(this.popupEl=$.goPopup({header:s["\uba64\ubc84 \uc815\ubcf4 \uc218\uc815"],width:400,title:"",modal:!0,contents:f({selectCount:n.length,type:i,positions:this.positions.toJSON(),isOrg:!0}),buttons:[{btext:o["\uc800\uc7a5"],btype:"confirm",autoclose:!1,callback:function(){t.changePositionAction()}},{btext:o["\ucde8\uc18c"],btype:"cancel"}]}),this.subPositionBackdropView&&(this.subPositionBackdropView.toggle(!1),this.subPositionBackdropView.unBindBackdrop(),this.subPositionBackdropView=null),this.popupEl.reoffset(),this.changePositionSelect(r),this.popupEl.find("select.class_type").attr("disabled","true"))},changePositionSelect:function(e){var t=[],n="",r=$(this.popupEl).find("select.class_type_values");this.popupEl.find("select").val(e),this.popupEl.find("#userGroupOption").hide();if(e==="position"){var i=this.positions.toJSON();for(var o=0;o<i.length;o++)t.push({id:i[o].id,name:i[o].name})}else if(e==="grade"){var u=this.grades.toJSON();for(var o=0;o<u.length;o++)t.push({id:u[o].id,name:u[o].name})}else if(e==="duty"){var a=this.duties.toJSON();for(var o=0;o<a.length;o++)t.push({id:a[o].id,name:a[o].name})}else if(e==="mail_group"){var f=this.mailGroups.toJSON();for(var o=0;o<f.length;o++)t.push({id:f[o].mailGroup,name:f[o].mailGroup})}else if(e==="status")t=[{id:"0",name:s["\uc815\uc0c1"]},{id:"1",name:s["\uba54\uc77c \ud734\uba74"]},{id:"2",name:s["\uc911\uc9c0"]}];else if(e==="user_group"){var l=this.userGroups.toJSON();for(var o=0;o<l.length;o++)t.push({id:l[o].id,name:l[o].name});this.popupEl.find("#userGroupOption").show()}t.forEach(function(e){n+="<option value='"+e.id+"'>"+e.name+"</option>"}),r.html(n)},changePositionAction:function(){var e=this,t="",n=this.popupEl.find(".class_type").val(),r=this.getCheckedDeptMemberIds(),i={ids:this.getCheckedUserIds()};if(this.checkValidation(i.ids)){if(n==="position")t=u+"user/position",i.id=this.popupEl.find(".class_type_values").val();else if(n==="grade")t=u+"user/grade",i.id=this.popupEl.find(".class_type_values").val();else if(n==="duty")t=u+"deptmembers/duty/"+this.popupEl.find(".class_type_values").val(),i.ids=r;else if(n==="status")t=u+"user/status",i.id=this.popupEl.find(".class_type_values").val(),$("#account_error_message").hide();else if(n==="mail_group")t=u+"user/mailgroup",i.stringId=this.popupEl.find(".class_type_values").val();else if(n==="user_group"){var s=$('input:radio[name="userGroup"]:checked').val();s==="change"?t=u+"user/usergroup/change":t=u+"user/usergroup/add",i.id=this.popupEl.find(".class_type_values").val()}this.popupEl.close(),$.go(t,JSON.stringify(i),{qryType:"PUT",contentType:"application/json",responseFn:function(t){$.goMessage(o["\ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]),e._refreshAll(e.userId),e.$el.find("#allCheck").prop("checked",!1)},error:function(e){var t=JSON.parse(e.responseText);if(t&&t.message){$.goMessage(t.message);return}$.goMessage(o["\uc800\uc7a5\uc5d0 \uc2e4\ud328 \ud558\uc600\uc2b5\ub2c8\ub2e4."])}})}},deleteMembers:function(e){var t=this;this.checkedIds=this.getCheckedUserIds(),this.checkValidation(this.checkedIds)&&($.goPopup({width:500,modal:!0,title:s["\uc120\ud0dd \uba64\ubc84\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c"],contents:'<span class="txt_caution">'+s["\uba64\ubc84 \uc0ad\uc81c \uc2dc \uc790\ub8cc \ubcf5\uad6c \ubd88\uac00 \uacbd\uace0"]+"</span>"+"<br>"+s["\uba64\ubc84 \ubd80\uc11c \ud574\uc81c \uac00\uc774\ub4dc"],buttons:[{btext:o["\uc0ad\uc81c"],btype:"caution",autoclose:!0,callback:function(){var e=u+"user";$.go(e,JSON.stringify({ids:t.checkedIds}),{qryType:"DELETE",contentType:"application/json",responseFn:function(e){$.goMessage(s["\uba64\ubc84\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]),$("#orgMemTree").jstree("refresh",t.getNodeFromDepId(t.deptId)),$(".tab_menu li [data-type='member_list']").trigger("click"),t.$el.find("#allCheck").prop("checked",!1)},error:function(e){var t=JSON.parse(e.responseText);if(t.name==="admin.delete.error"){$.goAlert(s["\uad00\ub9ac\uc790 \uc0ad\uc81c \uc624\ub958"]);return}$.goAlert(s["\uba64\ubc84 \uc0ad\uc81c \uc624\ub958"])}})}},{btext:o["\ucde8\uc18c"]}]}),this.subDeptBackdropView&&(this.subDeptBackdropView.toggle(!1),this.subDeptBackdropView.unBindBackdrop(),this.subDeptBackdropView=null))},setManager:function(e){var t=this,n=$(e.currentTarget).data("type");this.checkedIds=this.getCheckedDeptMemberIds();if(n=="MASTER"&&this.checkedIds.length>1)return $.goMessage(s["\ubd80\uc11c\uc7a5 \uc704\uc784\uc740 1\uba85\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4."]);if(this.checkValidation(this.checkedIds)){var r=u+"deptmembers/type/"+n;$.go(r,JSON.stringify({ids:this.checkedIds}),{qryType:"PUT",contentType:"application/json",responseFn:function(e){e.code==="200"&&(t._refreshAll(t.userId),t.$el.find("#allCheck").prop("checked",!1),$.goMessage(o["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]))},error:function(e){var t=JSON.parse(e.responseText);if(t&&t.message){$.goMessage(t.message);return}$.goMessage(o["\uc800\uc7a5\uc5d0 \uc2e4\ud328 \ud558\uc600\uc2b5\ub2c8\ub2e4."])}}),this.subManagerBackdropView&&(this.subManagerBackdropView.toggle(!1),this.subManagerBackdropView.unBindBackdrop(),this.subManagerBackdropView=null)}return!1},getCheckedDeptMemberIds:function(){return this.listEl.find("input[type=checkbox]:checked").map(function(e,t){return Number($(t).closest("li").attr("data-id"))}).get()},getCheckedUserIds:function(){return this.listEl.find("input[type=checkbox]:checked").map(function(e,t){return Number($(t).closest("li").attr("data-userid"))}).get()},getNodeFromMemId:function(e){return $("#orgMemTree li[nodeid="+e+"][rel!='org'][rel!='unspecified']")},getNodeFromDepId:function(e){return $("#orgMemTree li[nodeid="+e+"][rel!='MODERATOR'][rel!='MEMBER'][rel!='MASTER']")},_bindBackdrop:function(e,t){var n=new r;return n.backdropToggleEl=e,n.linkBackdrop(t),n}});return g});