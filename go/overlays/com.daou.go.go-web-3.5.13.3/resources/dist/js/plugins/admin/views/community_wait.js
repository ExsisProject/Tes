(function(){define(["jquery","backbone","app","hgn!admin/templates/community_wait","admin/collections/community_wait","i18n!nls/commons","i18n!admin/nls/admin","jquery.go-popup","jquery.go-sdk"],function(e,t,n,r,i,s,o){var u={label_ok:o["\uac1c\uc124\uc2e0\uccad \uc218\ub77d"],label_no:o["\uac1c\uc124\uc2e0\uccad \ubc18\ub824"],label_name:o["\ucee4\ubba4\ub2c8\ud2f0 \uc81c\ubaa9"],label_owner:o["\uc2e0\uccad\uc790"],label_date:o["\uc2e0\uccad\uc77c"],label_desc:o["\ucee4\ubba4\ub2c8\ud2f0 \uc18c\uac1c"],label_non_list:o["\ucee4\ubba4\ub2c8\ud2f0 \uc2e0\uccad \ubaa9\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."]},a=n.BaseView.extend({el:"#layoutContent",unbindEvent:function(){this.$el.off("click","span#btn_online"),this.$el.off("click","span#btn_delete"),this.$el.off("click","form[name='formCommunityList'] input:checkbox")},bindEvent:function(){this.$el.on("click","span#btn_online",e.proxy(this.changeOnlineStatus,this)),this.$el.on("click","span#btn_delete",e.proxy(this.deleteWaitCommunity,this)),this.$el.on("click","form[name='formCommunityList'] input:checkbox",e.proxy(this.toggleCheckbox,this))},initialize:function(){this.collection=i.getCollection(),this.unbindEvent(),this.bindEvent()},toggleCheckbox:function(t){e(t.currentTarget).attr("id")=="community_all"&&e(t.currentTarget).is(":checked")?this.$el.find("input:checkbox").attr("checked",!0):e(t.currentTarget).attr("id")=="community_all"&&!e(t.currentTarget).is(":checked")?this.$el.find("input:checkbox").attr("checked",!1):e(t.currentTarget).is(":checked")?e(t.currentTarget).attr("checked",!0):(this.$el.find("#community_all").attr("checked",!1),e(t.currentTarget).attr("checked",!1))},render:function(){var e=this.collection.toJSON()||[];this.$el.empty();var t=function(){return GO.util.basicDate(this.createdAt)},n=r({dataset:e,dateformat:t,isDataset:e.length?!0:!1,lang:u,masterInfo:function(){var e=[this.masterUser,this.masterPosition];return e.join(" ")}});return this.$el.html(n),this.$el},changeOnlineStatus:function(){var t=this,n=new Array,r=this.$el.find("form[name=formCommunityList]"),u=r.find('input[type="checkbox"]:checked'),a=u.parents("tr");if(u.size()==0||u.size()==1&&r.find("#community_all").is(":checked")==1){e.goAlert(o["\uc218\ub77d\ud560 \ucee4\ubba4\ub2c8\ud2f0\ub97c \uc120\ud0dd\ud558\uc138\uc694."]);return}a.attr("data-id",function(e,t){t!=null&&n.push(t)}),e.goConfirm(s["\ud655\uc778"],o["\uc120\ud0dd\ud558\uc2e0 \ucee4\ubba4\ub2c8\ud2f0\uc758 \uac1c\uc124\uc744 \ud5c8\uac00\ud569\ub2c8\ub2e4."],function(){e.go(GO.contextRoot+"ad/api/community/status/online",JSON.stringify({communityIds:n}),{qryType:"PUT",contentType:"application/json",responseFn:function(n){n.code==200?(t.collection=i.getCollection(),t.render()):e.goAlert(s["\uc2e4\ud328"],s["\uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4."])}})})},deleteWaitCommunity:function(){var t=this,n=new Array,r=this.$el.find("form[name=formCommunityList]"),u=r.find('input[type="checkbox"]:checked'),a=u.parents("tr");if(u.size()==0||u.size()==1&&r.find("#community_all").is(":checked")==1){e.goAlert(o["\ubc18\ub824\ud560 \ucee4\ubba4\ub2c8\ud2f0\ub97c \uc120\ud0dd\ud558\uc138\uc694."]);return}a.attr("data-id",function(e,t){t!=null&&n.push(t)}),e.goCaution(s["\ud655\uc778"],o["\uc120\ud0dd\ud558\uc2e0 \ucee4\ubba4\ub2c8\ud2f0\uc758 \uac1c\uc124\uc744 \ubc18\ub824\ud569\ub2c8\ub2e4."],function(){e.go(GO.contextRoot+"ad/api/community/deny",JSON.stringify({communityIds:n}),{qryType:"DELETE",contentType:"application/json",responseFn:function(n){n.code==200?(t.collection=i.getCollection(),t.render()):e.goAlert(s["\uc2e4\ud328"],s["\uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4."])}})},o["\ubc18\ub824"])}},{__instance__:null});return a})}).call(this);