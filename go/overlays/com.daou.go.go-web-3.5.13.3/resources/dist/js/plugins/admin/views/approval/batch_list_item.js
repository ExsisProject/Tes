define(["jquery","underscore","backbone","app","admin/models/appr_form","hgn!admin/templates/approval/batch_list_item","i18n!nls/commons","i18n!approval/nls/approval","i18n!admin/nls/admin"],function(e,t,n,r,i,s,o,u,a){var f={head_title:a["\uacb0\uc7ac \uc591\uc2dd"],caption:a["\uacc4\uc815 \ucd94\uac00 \ub4f1\ub85d"],title:o["\uc81c\ubaa9"],form_name:u["\uc591\uc2dd\uc81c\ubaa9"],alias:a["\uc591\uc2dd\uc57d\uc5b4"],code:a["\ucf54\ub4dc"],creator:o["\uc791\uc131\uc790"],description:u["\uc591\uc2dd \ub3c4\uc6c0\ub9d0"],use_help:u["\uacb0\uc7ac\ubb38\uc11c\uc5d0\uc11c \ub3c4\uc6c0\ub9d0 \ubc84\ud2bc \uc81c\uacf5"],unuse_help:u["\uc81c\uacf5\ud558\uc9c0 \uc54a\uc74c"],appr_line:u["\uacb0\uc7ac\ub77c\uc778"],select_count:a["\uac2f\uc218 \uc120\ud0dd"],approver_name:a["\uacb0\uc7ac\uc790 \uc774\ub984"],agreer_name:a["\ud569\uc758\uc790 \uc774\ub984"],guide_approver_deletable:a["\uc0ac\uc6a9\uc790\uac00 \uc9c0\uc815 \uacb0\uc7ac\uc790\ub97c \uc0ad\uc81c\ud560 \uc218 \uc788\uc74c"],reception:a["\ubb38\uc11c \uc218\uc2e0"],use:o["\uc0ac\uc6a9"],possible:o["\uac00\ub2a5"],impossible:o["\ubd88\uac00\ub2a5"],year:u["\ub144"],forever:u["\uc601\uad6c"],dept:u["\ubd80\uc11c"],user:a["\uc0ac\uc6a9\uc790"],select_dept:a["\ubd80\uc11c \uac80\uc0c9"],select_user:a["\uc0ac\uc6a9\uc790 \uac80\uc0c9"],edit_template:a["\uc591\uc2dd \ud3b8\uc9d1"],template_editor:o["\uc591\uc2dd \ud3b8\uc9d1\uae30"],template_preview:o["\ubbf8\ub9ac\ubcf4\uae30"],load_template_title:o["\uc591\uc2dd \ubd88\ub7ec\uc624\uae30"],load_another_template:o["\ub2e4\ub978 \uc591\uc2dd \ubd88\ub7ec\uc624\uae30"],system_integration:a["\uc2dc\uc2a4\ud15c \uc5f0\ub3d9"],select_integration:a["\uc5f0\ub3d9 \ud504\ub85c\uadf8\ub7a8 \uc120\ud0dd"],folder:a["\uc804\uc0ac \ubb38\uc11c\ud568\n\ubcf4\uad00 \ud3f4\ub354"],unsigned:a["\ubbf8\uc9c0\uc815"],folder_addable:a["\uc0ac\uc6a9\uc790\uac00 \uc800\uc7a5 \ud3f4\ub354\ub97c \ucd94\uac00\ud560 \uc218 \uc788\uc74c"],arbt_decision_active:a["\uc804\uacb0 \uc635\uc158"],use_right:a["\uc791\uc131 \uad8c\ud55c"],all_user:a["\uc804\uccb4 \uc0ac\uc6a9\uc790"],all_scope:o["\uc804\uccb4"],specific_user:a["\uc77c\ubd80 \uc0ac\uc6a9\uc790"],preserve_in_year:u["\ubcf4\uc874\uc5f0\ud55c"],preserve_changeable:a["\uc0ac\uc6a9\uc790 \ubcc0\uacbd \uac00\ub2a5"],securityLevel_changeable:a["\uc0ac\uc6a9\uc790 \ubcc0\uacbd \uac00\ub2a5"],activity_editable:a["\uacb0\uc7ac\uc120 \uc218\uc815"],document_editable:a["\ubb38\uc11c \uc218\uc815"],approver_allow:a["\uacb0\uc7ac\uc790\uac00 \uc218\uc815\ud560 \uc218 \uc788\uc74c"],approver_disallow:a["\uacb0\uc7ac\uc790\ub294 \uc218\uc815\ud560 \uc218 \uc5c6\uc74c"],official_document_send:u["\uacf5\ubb38 \ubc1c\uc1a1 \uae30\ub2a5"],invalid_template_html_activity_groups:u["\uacb0\uc7ac\ub77c\uc778 \uc815\ubcf4\uac00 \uc591\uc2dd\uc5d0 \ubc18\uc601\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \uc591\uc2dd\uc744 \uc218\uc815\ud574\uc8fc\uc138\uc694."],invalid_template_html_receivers:u["\uc591\uc2dd\uc5d0 \uc218\uc2e0\uc790 \uc815\ubcf4\uac00 \uc81c\ub300\ub85c \ubc18\uc601\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \uc591\uc2dd\uc744 \uc218\uc815\ud574\uc8fc\uc138\uc694."],is_over_max_approval_count:u["\uc9c0\uc815 \uacb0\uc7ac\uc790\uac00 \ucd5c\ub300 \uacb0\uc7ac\uc790 \uc778\uc6d0\uc218\ub97c \ucd08\uacfc\ud558\uc600\uc2b5\ub2c8\ub2e4."],is_nothing_checked_approval_type:u["\uacb0\uc7ac \ud0c0\uc785\uc744 \ud55c\uac1c \uc774\uc0c1 \uc120\ud0dd\ud574\uc8fc\uc138\uc694"],is_appointmentof_notselectedtype:u["\uc120\ud0dd\ud558\uc9c0 \uc54a\uc740 \ud0c0\uc785\uc758 \uc9c0\uc815 \uacb0\uc7ac\uc790\uac00 \uc788\uc2b5\ub2c8\ub2e4"],security_level:a["\ubcf4\uc548\ub4f1\uae09"],state:a["\uc0ac\uc6a9\uc5ec\ubd80"],hidden:a["\uc228\uae40"],normal:a["\uc815\uc0c1"],allow:o["\ud5c8\uc6a9"],disallow:o["\ube44\ud5c8\uc6a9"],empty_msg:a["\ub4f1\ub85d\ub41c \uc591\uc2dd\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."],receiverEditable:a["\uc0ac\uc6a9\uc790\uac00 \uc218\uc2e0\ucc98 \uc218\uc815 \uac00\ub2a5"],referrerEditable:a["\uae30\uc548\uc790\uac00 \ucc38\uc870\uc790 \uc218\uc815 \uac00\ub2a5"],adminUser:a["\uc6b4\uc601\uc790"],reader:a["\ubb38\uc11c \uc5f4\ub78c\uc790"],reference:a["\ubb38\uc11c \ucc38\uc870\uc790"],creation_success_msg:a["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc591\uc2dd \ubaa9\ub85d\uc73c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4."],creation_fail_msg:a["\uc800\uc7a5\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],duplicated_name:a["\uc81c\ubaa9\uc774 \uc911\ubcf5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."],duplicated_code:a["\ucf54\ub4dc\uac00 \uc911\ubcf5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."],cancel_and_go_to_list_msg:a["\ucde8\uc18c\ud558\uc168\uc2b5\ub2c8\ub2e4. \uc774\uc804 \ud654\uba74\uc73c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4."],name_required:a["\uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694."],alias_required:a["\uc591\uc2dd\uc57d\uc5b4\ub97c \uc785\ub825\ud558\uc138\uc694."],name_invalid_length:a["\uc81c\ubaa9\uc740 20\uc790\uae4c\uc9c0 \uc785\ub825\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."],alias_invalid_length:a["\uc591\uc2dd\uc57d\uc5b4\ub294 20\uc790\uae4c\uc9c0 \uc785\ub825\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."],description_invalid_length:a["\uc591\uc2dd\uc124\uba85\uc740 500\uc790\uae4c\uc9c0 \uc785\ub825\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."],state_required:a["\uc0c1\ud0dc\ub97c \uc9c0\uc815\ud558\uc138\uc694."],folder_required:a["\uc804\uc0ac \ubb38\uc11c\ud568 \ud3f4\ub354\uac00 \uc9c0\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."],integration_invalid:a["\uc5f0\ub3d9 \uc635\uc158\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694."],documentOpenable:a["\uacf5\uac1c\uc5ec\ubd80"],documentOpen:a["\uacf5\uac1c"],documentClose:a["\ube44\uacf5\uac1c"],documentOpenEditable:a["\uc0ac\uc6a9\uc790\uac00 \uacf5\uac1c\uc5ec\ubd80 \uc218\uc815 \uac00\ub2a5"],select:o["\uc120\ud0dd"],add:o["\ucd94\uac00"],"delete":o["\uc0ad\uc81c"],save:o["\uc800\uc7a5"],cancel:o["\ucde8\uc18c"],displayDrafter_desc:a["\uae30\uc548\uc790 \ud45c\uc2dc \uc124\uba85"],includeAgreement_desc:a["\uacb0\uc7ac\ubc29 \ud45c\uc2dc \uc124\uba85"],"\uc6b4\uc601\uc790 \ucd94\uac00":a["\uc6b4\uc601\uc790 \ucd94\uac00"],"\uc218\uc815\uad8c\ud55c":a["\uc218\uc815\uad8c\ud55c"],"\uc0ad\uc81c\uad8c\ud55c":a["\uc0ad\uc81c\uad8c\ud55c"],"\uba54\uc77c \ubc1c\uc1a1 \uae30\ub2a5":a["\uba54\uc77c \ubc1c\uc1a1 \uae30\ub2a5"],"\uba54\uc77c \ubc1c\uc1a1 \uae30\ub2a5 \uc124\uba85":a["\uba54\uc77c \ubc1c\uc1a1 \uae30\ub2a5 \uc124\uba85"],"1\uc778\uacb0\uc7ac \uc635\uc158":a["1\uc778\uacb0\uc7ac \uc635\uc158"],"1\uc778\uacb0\uc7ac \uc635\uc158 \uc124\uba85":a["1\uc778\uacb0\uc7ac \uc635\uc158 \uc124\uba85"],"\uac8c\uc2dc\ud310 \ub4f1\ub85d \uae30\ub2a5":a["\uac8c\uc2dc\ud310 \ub4f1\ub85d \uae30\ub2a5"],"\uc0ac\uc6a9":o["\uc0ac\uc6a9"],"\uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc74c":o["\uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc74c"],noUse:u["\ubbf8\uc0ac\uc6a9"]},l=n.View.extend({tagName:"tr",events:{"change [data-name]":"changeData","click td.tit a":"goShowForm"},securityLevels:null,initialize:function(e){this.options=e||{},this.securityLevels=e.securityLevels},render:function(){return this.$el.html(s(this._makeTemplateData())),this.renderSecurityData(),this},goShowForm:function(t){var n=e(t.currentTarget).attr("form-id");r.router.navigate("approval/apprform/"+n,{trigger:!0})},changeData:function(t){var n=e(t.currentTarget),r=n.attr("type");n.is("select")&&(r="select");var i="";switch(r){case"checkbox":i=n.attr("data-name"),i=="state"?this.model.set(i,n.is(":checked")?"NORMAL":"HIDDEN"):i=="formUserScope"?this.model.set(i,n.is(":checked")?"ALL":"SPECIFIC"):i=="documentEditable"?(this.model.set(i,n.is(":checked")),n.is(":checked")?this.model.set("useDocEditableTypeAll","true"):this.model.set("useDocEditableTypeAll","false"),this.model.set("useDocEditableApproval","false"),this.model.set("useDocEditableAgreement","false"),this.model.set("useDocEditableInspection","false"),this.model.set("useDocEditableCheck","false")):i=="activityEditable"?(this.model.set(i,n.is(":checked")),n.is(":checked")?this.model.set("useActivityEditableTypeAll","true"):this.model.set("useActivityEditableTypeAll","false"),this.model.set("useActivityEditableApproval","false"),this.model.set("useActivityEditableAgreement","false"),this.model.set("useActivityEditableInspection","false"),this.model.set("useActivityEditableCheck","false")):this.model.set(i,n.is(":checked"));break;case"radio":i=n.attr("data-name"),this.model.set(i,n.val());break;case"select":i=n.attr("data-name");if(i=="securityLevel"){var s=n.val(),o=this.securityLevels.get(s);this.model.set(i,o.toJSON())}else this.model.set(i,n.val())}},renderSecurityData:function(){this._markSelectedSecurityLevel(this.securityLevels,this.model.get("securityLevel")),this.$('[data-name="securityLevel"]').html(this._renderSecurityTmpl({securityLevels:this.securityLevels.toJSON()}))},_makeTemplateData:function(){var e=t.map(i.PRESERVE_YEARS,function(e){return{value:e,label:e==0?f.forever:r.i18n(o["{{arg1}}\ub144"],{arg1:e}),isSelected:this.model.get("preserveDurationInYear")*1==e*1?!0:!1}},this),n=this.model.get("state")=="NORMAL"?!0:!1,s=this.model.get("formUserScope")=="ALL"?!0:!1,u={preserveYears:e,lang:f,wrappedFormUserScope:s,wrappedState:n,cid:this.cid};return t.extend(u,this.model.toJSON())},_markSelectedSecurityLevel:function(e,t){if(t&&t.id)e.each(function(e){e.get("id")==t["id"]&&e.set("isSelected",!0)});else{var n=e.at(0);n&&n.set("isSelected",!0)}},_renderSecurityTmpl:function(e){var n=[],r={noUse:u["\ubbf8\uc0ac\uc6a9"]};t.extend(e,{lang:r}),n.push("{{#securityLevels}}"),n.push('    <option value="{{id}}" {{#isSelected}}selected{{/isSelected}}>{{name}}{{^useFlag}}({{lang.noUse}}){{/useFlag}}</option>'),n.push("{{/securityLevels}}");var i=Hogan.compile(n.join("\n"));return i.render(e)}});return l});