define("admin/views/ehr/timeline/workplace/work_place",function(require){var e=require("backbone");require("jquery.go-orgslide"),require("jquery.go-grid"),require("jquery.go-sdk"),require("go-map");var t=require("hgn!admin/templates/ehr/timeline/workplace/work_place"),n=require("i18n!admin/nls/admin"),r=require("i18n!nls/commons"),i=require("admin/models/ehr/timeline/work_place"),s=require("admin/views/ehr/timeline/ip/access_allow_info"),o=require("admin/views/ehr/timeline/gps/edit"),u=require("admin/views/ehr/timeline/beacon/access_allow_info"),a=e.View.extend({id:"workPlace",className:"wrap_container_right",events:{"click #btn_save":"save","click #btn_cancel":"cancel","keyup input":"update"},initialize:function(e){this.removed=!1,this.updated=!1,e.workPlace?this.workPlace=e.workPlace:this.workPlace=new i},render:function(){this.$el.html(t({adminLang:n,commonLang:r,model:this.workPlace})),this.createAccessIpsInfoView(),this.createAccessGpsEditView(),this.createAccessBeaconsInfoView()},createAccessIpsInfoView:function(){this.accessIpsInfoView=new s({el:"#accessIpsInfoView",workPlace:this.workPlace}),this.accessIpsInfoView.render()},createAccessGpsEditView:function(){var e=this;e.accessGpsEditView=new o({el:"#accessGpsEditView",workPlace:this.workPlace}),GO.util.kakaoMap.scriptLoad(function(){kakao.maps.load(function(){e.accessGpsEditView.render()})},function(){e.accessGpsEditView.notSupportViewRender()})},createAccessBeaconsInfoView:function(){this.accessBeaconsInfoView=new u({el:"#accessBeaconsInfoView",workPlace:this.workPlace}),this.accessBeaconsInfoView.render()},update:function(e){this.updated=!0},isUpdated:function(){return this.updated||this.accessGpsEditView.updated||this.accessIpsInfoView.updated||this.accessBeaconsInfoView.updated},saved:function(){this.updated=!1,this.accessGpsEditView.saved(),this.accessIpsInfoView.saved(),this.accessBeaconsInfoView.saved()},cancel:function(){$.goMessage(r["\ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]),this.updated=!1,this.render()},save:function(){var e=this,t=$("#workPlaceName").val();if(!this.validate())return;return this.workPlace.set("name",t),this.setWorkPlace(),this.workPlace.save({},{success:function(t){$.goMessage(r["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]),e.$el.trigger("addComplete",e.workPlace),e.$el.trigger("activeWorkPlace",e.workPlace),e.saved()},error:function(e,t){t&&t.responseJSON&&t.responseJSON.message?$.goMessage(t.responseJSON.message):$.goMessage(r["\uc800\uc7a5\uc5d0 \uc2e4\ud328 \ud558\uc600\uc2b5\ub2c8\ub2e4."])}})},validate:function(){return $("#workPlaceName").val()?!this.accessIpsInfoView.isCheckedUseIp()&&!this.accessGpsEditView.isCheckedUseGps()&&!this.accessBeaconsInfoView.isCheckedUseBeacon()?($.goMessage(n["\uadfc\ud0dc\uc218\ub2e8 \uc815\ubcf4 \uc120\ud0dd \uc54c\ub9bc"]),!1):this.accessGpsEditView.validate()?!0:!1:($.goMessage(n["\uadfc\ubb34\uc9c0 \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694"]),!1)},setWorkPlace:function(){var e=this.accessGpsEditView.getGpsModel(),t=new Array;e&&(t=new Array(e)),this.workPlace.set("useIp",this.accessIpsInfoView.isCheckedUseIp()),this.workPlace.set("useGps",this.accessGpsEditView.isCheckedUseGps()),this.workPlace.set("useBeacon",this.accessBeaconsInfoView.isCheckedUseBeacon()),this.workPlace.set("ipModels",this.accessIpsInfoView.ipModels),this.workPlace.set("gpsModels",t),this.workPlace.set("beaconModels",this.accessBeaconsInfoView.beaconModels)},remove:function(){e.View.prototype.remove.apply(this,arguments),this.accessIpsInfoView.remove(),this.accessGpsEditView.remove(),this.accessBeaconsInfoView.remove()},isRemoved:function(){return this.removed}});return a});