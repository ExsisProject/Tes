define(["underscore","app","libs/go-recurrence-parser","i18n!nls/commons","i18n!calendar/nls/calendar"],function(e,t,n,r,i){var s=t.util.extendClass(n,{humanize:function(){if(this._hasByMonthDay()){var e="";return e+=this._humanizeBymonthString()+" / ",e+=this._humanizeBymonthdayString(),e}if(this._hasByDay()){var e="";return e+=this._humanizeBymonthString()+" / ",e+=this._humanizeBydayString(),e}return""},_humanizeBymonthString:function(){if(!this.get("BYMONTH"))return;var n=[],r=this.get("BYMONTH").split(",");return r.length==12?i["\ub9e4\uc6d4"]:(e.each(r,function(e){n.push(t.i18n(i["{{month}}\uc6d4"],"month",e))}),n.join(","))},_humanizeBydayString:function(){if(!this.get("BYDAY"))return;var t=this.get("BYDAY").split(","),n="",r="",s=[],o=[],u=this._getWeekStr(),a=this._getDayStr();e.each(t,function(e){var t=/([-1-9]*)(SU|MO|TU|WE|TH|FR|SA)?$/.exec(e),n=t[1],r=t[2];s.push(u[n]),o.push(a[r])});var f=e.filter(s,this._onlyUnique),n=f.join(","),r=e.filter(o,this._onlyUnique).join(",");return f.length==6&&(n=i["\ub9e4\uc8fc"]),n+" / "+r},_onlyUnique:function(e,t,n){return n.indexOf(e)===t},_humanizeBymonthdayString:function(){if(!this.get("BYMONTHDAY"))return;var e=this.get("BYMONTHDAY").split(","),n=e.length,r=e.shift(),s=e.pop();return r<0?r=i["\ub9c8\uc9c0\ub9c9 \uc77c"]:r=t.i18n(i["{{monthday}}\uc77c"],"monthday",r),s<0?s=i["\ub9c8\uc9c0\ub9c9 \uc77c"]:s=t.i18n(i["{{monthday}}\uc77c"],"monthday",s),n==1||r==s?r:r+" ~ "+s},_hasByMonthDay:function(){return this.get("BYMONTHDAY")},_hasByDay:function(){return this.get("BYDAY")}});return s});