define(["app","i18n!nls/commons","i18n!admin/nls/admin","hgn!board/templates/board_create_manager","hgn!admin/templates/mobile_access_create","jquery.go-orgslide","jquery.go-sdk","jquery.go-validation"],function(e,t,n,r,i){var s={label_create_tilte:n["\ubaa8\ubc14\uc77c \uae30\uae30 \uc815\ubcf4"],label_deviceid:n.DeviceId,label_account:n["\uacc4\uc815"],label_account_select:n["\uacc4\uc815 \uc120\ud0dd"],label_ok:t["\uc800\uc7a5"],label_cancel:t["\ucde8\uc18c"]},o=Backbone.View.extend({initialize:function(){},events:{"click span#btn_ok":"_devicdIdVersionSave","click span#btn_cancel":"_deviceIdVersionCancel","click #selectAccount":"_addAccount","click span.ic_del":"_deleteAccount","keyup input#deviceId":"_validationDeviceId"},render:function(){this.$el.html(i({lang:s}))},_deleteAccount:function(e){e.stopPropagation(),$(e.currentTarget).parents("li").remove()},_validationDeviceId:function(e){e.stopPropagation();if(e.keyCode>=0&&e.keyCode<=7||e.keyCode>=9&&e.keyCode<=15||e.keyCode>=18&&e.keyCode<=26||e.keyCode>=28&&e.keyCode<=31||e.keyCode==127||e.keyCode==220)return $.goMessage(n["\uc785\ub825\ud560 \uc218 \uc5c6\ub294 \ubb38\uc790"]),e.currentTarget.value="",!1},_devicdIdVersionSave:function(r){r.stopPropagation();var i=$("#deviceId").val();if($.trim(i)==""){$.goMessage(n["DeviceId\ub294 \ud544\uc218"]),$("#deviceId").focus();return}if(!$.goValidation.isCheckLength(1,40,i)){$.goMessage(e.i18n(n["0\uc790\uc774\uc0c1 0\uc774\ud558 \uc785\ub825\ud574\uc57c\ud569\ub2c8\ub2e4."],{arg1:"1",arg2:"40"})),$("#deviceId").focus();return}if($("#accountList").find("li").length<2){$.goMessage(n["\uacc4\uc815 \ub4f1\ub85d \ud544\uc218"]);return}var s=$("#accountList").find("li[data-id]").attr("data-id"),o=GO.contextRoot+"ad/api//mobile/access",u={userId:s,deviceId:i};$.go(o,JSON.stringify(u),{qryType:"POST",contentType:"application/json",responseFn:function(t){t.code==200&&e.router.navigate("mobile",!0)},error:function(e){var n=JSON.parse(e.responseText),r=n.message,i=n.name;i=="over.deviceid.count"?$.goAlert(r):i=="invalid.deviceid.format"?($.goAlert(r),$("#deviceId").focus()):$.goMessage(t["\uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."])}})},_deviceIdVersionCancel:function(t){t.stopPropagation(),e.router.navigate("mobile",!0)},_addAccount:function(e){e.stopPropagation();var t=this,r=$.goOrgSlide({header:n["\uc870\uc9c1\ub3c4"],desc:"",callback:t._setAccount,target:e,isAdmin:!0,contextRoot:GO.contextRoot})},_setAccount:function(e){var t=$("#accountList");t.children().length>=2?$.goAlert(n["\uacc4\uc815\ub4f1\ub85d\uc218\uc81c\ud55c"]):e&&!t.find('li[data-id="'+e.id+'"]').length&&t.find("li.creat").before(r($.extend(e,{lang:s})))}},{attachTo:function(e){var t=new o;return e.empty().append(t.el),t.render(),t}});return o});