define("admin/views/appr_form_template_list",function(require){var e=require("i18n!nls/commons"),t=require("i18n!approval/nls/approval"),n=require("i18n!admin/nls/admin"),r=GO.contextRoot+"ad/api/",i={head_title:t["\uacb0\uc7ac \uc591\uc2dd \ucd94\uac00"],caption:e["\ub4f1\ub85d\uc815\ubcf4"],title:e["\uc81c\ubaa9"],form_name:e["\uc81c\ubaa9"],edit_template:t["\uc591\uc2dd \ud3b8\uc9d1"],template_editor:t["\uc591\uc2dd \ud3b8\uc9d1\uae30"],template_preview:e["\ubbf8\ub9ac\ubcf4\uae30"],load_another_template:t["\ub2e4\ub978 \uc591\uc2dd \ubd88\ub7ec\uc624\uae30"],load_template_title:t["\ub2e4\ub978 \uc591\uc2dd \uc870\ud68c"],state:n["\uc0ac\uc6a9\uc5ec\ubd80"],hidden:n["\uc228\uae40"],normal:n["\uc815\uc0c1"],empty_msg:t["\ub4f1\ub85d\ub41c \uc591\uc2dd\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."],creation_success_msg:t["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc591\uc2dd \ubaa9\ub85d\uc73c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4."],creation_fail_msg:e["\uc800\uc7a5\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],cancel_and_go_to_list_msg:t["\ucde8\uc18c\ud558\uc168\uc2b5\ub2c8\ub2e4. \uc774\uc804 \ud654\uba74\uc73c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4."],msg_cannot_preview_html:t["\ud604\uc7ac \uc77c\uc2dc\uc801\uc778 \ubb38\uc81c\ub85c \uc591\uc2dd\uc744 \ubbf8\ub9ac\ubcf4\uae30 \ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."],select:e["\uc120\ud0dd"],add:e["\ucd94\uac00"],"delete":e["\uc0ad\uc81c"],save:e["\uc800\uc7a5"],cancel:e["\ucde8\uc18c"]};return Backbone.View.extend({popupEl:null,dataTable:null,selectCallback:null,popUpTableId:"template_table",isListViewOpen:!1,initialize:function(e){e=_.extend({},e),this.selectCallback=e.selectCallback,this.EditorModule=e.EditorModule},render:function(){this._renderPopup(),this._renderPopupContent(),this._bindEventsToContent()},close:function(){this.isListViewOpen=!1,this.dataTable&&this.dataTable.tables.remove(),this.popupEl&&this.popupEl.close(),this.remove()},_renderPopup:function(){var e=[],t=this;e.push('<table class="chart" id="'+this.popUpTableId+'">'),e.push("    <thead>"),e.push("        <tr>"),e.push('            <th class="sorting"><span class="title_sort">'+i.form_name+'<ins class="ic"></ins></span></th>'),e.push('            <th class="sorting_disabled"><span class="title_sort">'+i.select+'<ins class="ic"></ins></span></th>'),e.push("        </tr>"),e.push("    </thead>"),e.push("</table>"),this.popupEl=$.goPopup({allowPrevPopup:!0,header:i.load_template_title,modal:!0,width:800,pclass:"layer_normal layer_recep_list",contents:e.join("\n"),closeCallback:function(){t._closeTemplate()}})},_renderPopupContent:function(){var e=this._renderEmptyTmpl();this.dataTable=$.goGrid({el:"#"+this.popUpTableId,url:r+"approval/apprform",method:"GET",displayLength:10,emptyMessage:e,defaultSorting:[[1,"asc"]],columns:[{mData:"name",bSortable:!0},{mData:null,bSortable:!1,fnRender:function(e){var t=[];return t.push("<div>"),t.push('<div id="'+e.aData.id+'_template_storage" style="display:none">'+e.aData.templateHtml+"</div>"),t.push('<span><a class="btn_fn7 template_preview" data-id="'+e.aData.id+'">'+i.template_preview+"</a></span>"),t.push('<span><a class="btn_fn11 template_select" data-id="'+e.aData.id+'">'+i.select+"</a></span>"),t.push("</div>"),t.join("\n")}}],fnDrawCallback:$.proxy(function(){this.$el.find(".toolbar_top .custom_header").append(this.$el.find("#csvDownLoad").show()),$(".tool_bar .dataTables_length").hide(),this.popupEl.reoffset()},this)})},_bindEventsToContent:function(){var e=$("#"+this.popUpTableId);e.off("click","a.template_preview"),e.off("click","a.template_select"),e.on("click","a.template_preview",$.proxy(this._previewTemplate,this)),e.on("click","a.template_select",$.proxy(this._selectTemplate,this))},_previewTemplate:function(e){var t=$(e.currentTarget).data("id"),n="template_preview_from_list",r=this._getHtmlTemplate(t);if(r){var s=$.goPopup({allowPrevPopup:!0,header:i.template_preview,modal:!0,top:"20%",width:810,pclass:"layer_normal layer_doc_edit_preview",contents:'<form><div class="doc_wrap" style="width:780px" class="ie9-scroll-fix" id="'+n+'"></div></form>'});$("#"+n).setTemplate({data:r}),parseInt(s.css("height"))<100&&s.css("height",100),s.find("div.content").css({"max-height":"500px",overflow:"auto"}),s.reoffset()}else $.goSlideMessage(i.empty_msg,"caution")},_selectTemplate:function(e){var t=$(e.currentTarget).data("id"),n=this._getHtmlTemplate(t);n?(this.selectCallback(n),this.isListViewOpen=!1,this.popupEl.close("",e)):$.goSlideMessage(i.empty_msg,"caution")},_closeTemplate:function(){this.isListViewOpen=!1,this.dataTable&&this.dataTable.tables.remove(),this.remove()},_getHtmlTemplate:function(e){var t=$("#"+e+"_template_storage").contents();return t.clone().show().html()},_renderEmptyTmpl:function(e){e=e||{};var t=[];t.push("<tbody>"),t.push("    <tr>"),t.push('        <td colspan="2">'),t.push('            <p class="data_null">'),t.push('                <span class="ic_data_type ic_no_data"></span>'),t.push('                <span class="txt">{{lang.empty_msg}}</span>'),t.push("            </p>"),t.push("        </td>"),t.push("    </tr>"),t.push("</tbody>");var n=Hogan.compile(t.join("\n"));return n.render(_.extend(e,{lang:i}))}})});