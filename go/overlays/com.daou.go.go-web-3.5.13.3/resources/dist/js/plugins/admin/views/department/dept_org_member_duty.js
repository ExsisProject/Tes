(function(){define(["jquery","backbone","app","admin/collections/duty_list","i18n!admin/nls/admin","i18n!nls/commons","jquery.go-sdk"],function(e,t,n,r,i,s){var o={save:s["\uc800\uc7a5"],cancel:s["\ucde8\uc18c"],none:i["\ubbf8\uc9c0\uc815"]},u=t.View.extend({baseTpl:['<span class="table_editable" style="margin-top:-4px;margin-bottom:-5px;text-overflow: ellipsis;min-width: 10px;">','<select style="width:100px"><options></options></select>&nbsp;','<span class="btn_wrap"><span class="ic ic_edit_done" title="',o.save,'"></span><span class="ic ic_edit_cancel" title="',o.cancel,'" style="margin-left:2px"></span></span>'],events:{"click .ic_edit_done":"saveDuty","click .ic_edit_cancel":"cancelDuty"},initialize:function(e){this.options=e||{},this.dutyCollection=r.getCollection(),this.dutyData=this.dutyCollection.toJSON(),this.$el.html(this.baseTpl.join(""))},render:function(){var t=this.$el.find("select");return t.append('<option value="">'+o.none+"</option>"),e.each(this.dutyData,function(e,n){t.append('<option style="text-overflow: ellipsis;" value="'+n.id+'">'+n.name+"</option>")}),this.options.dutyCode!=0&&t.val(this.options.dutyCode),this},getBaseTag:function(e){var t=null;e.dutyId&&(t=this.dutyCollection.get(e.dutyId));var n=['<span class="btn_wrap btn_member_job table_editable" id="memDuty',this.options.memberId,'" data-id="',this.options.memberId,'" data-code="'];return n.push(e.dutyId,'"><span class="txt">',t?t.attributes.name:o.none),n.push('</span><span class="ic ic_select"></span></span>'),n.join("")},cancelDuty:function(){this.$el.html(this.getBaseTag({dutyId:this.options.dutyCode}))},saveDuty:function(){var t=this,n=[GO.contextRoot+"ad/api/deptmember",this.options.memberId,"duty"],r=this.$el.find("select").val();e.go(n.join("/"),JSON.stringify({dutyId:r}),{qryType:"PUT",contentType:"application/json",responseFn:function(e){e.code==200&&t.$el.html(t.getBaseTag(e.data))}})}});return u})}).call(this);