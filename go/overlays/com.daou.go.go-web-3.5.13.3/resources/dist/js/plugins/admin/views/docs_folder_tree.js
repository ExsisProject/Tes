define("admin/views/docs_folder_tree",function(require){var e=require("app"),t=require("approval/views/apprform/admin_company_folder_tree"),n=require("i18n!docs/nls/docs"),r=require("i18n!nls/commons"),i=require("i18n!admin/nls/admin"),s={folder_name:r["\ud3f4\ub354\uba85"],already_used_name:i["\uc774\ubbf8 \uc0ac\uc6a9\uc911\uc778 \uc774\ub984\uc785\ub2c8\ub2e4."],cannot_delete:i["\uc0ad\uc81c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."]},o=t.extend({_getCommonUrl:function(){return this.isAdmin?GO.contextRoot+"ad/api/docs/companyfolder":GO.contextRoot+"ad/api/docs/companyfolder"},_onJstreeRemove:function(e,t){var n=$(t.rslt.obj[0]);$.go(this._getCommonUrl()+"/"+n.data().id,{},{qryType:"DELETE",contentType:"application/json",responseFn:$.proxy(function(e){var t=n.parents("li:eq(0)");this._getTreeElement().jstree("select_node",t)},this),error:$.proxy(function(e){$.goError(s.cannot_delete),t.rlbk&&$.jstree.rollback(t.rlbk)},this)})},_onJstreeCreate:function(t,r){function h(e){var t=[];return _.isUndefined(e)?t:(_.each(e.nodes,function(e){var n=_.pick(e,function(e,t){return t!="id"});t.push(n)}),t)}var i=r.rslt,o=h(this.getSelectedNodeData().admin),u=h(this.getSelectedNodeData().accessTarget),a=h(this.getSelectedNodeData().exceptionTarget),f={name:$.trim(i.name),docYear:5,state:"NORMAL",parentId:this.getSelectedNodeData().id,desc:$.trim(i.name),admin:{nodes:o},accessTarget:{nodes:u},exceptionTarget:{nodes:a},seq:i.position},l=this,c=r.inst._get_node(r.rslt.o);if(!_.isEmpty(f.name)&&!$.goValidation.isCheckLength(2,100,f.name))return this._getTreeElement().jstree("refresh",c),$.goError(e.i18n(n["0\uc740 0\uc790\uc774\uc0c1 0\uc790\uc774\ud558 \uc785\ub825\ud574\uc57c \ud569\ub2c8\ub2e4."],{arg0:n["\ubb38\uc11c\ud568 \uc774\ub984"],arg1:"2",arg2:"100"})),!1;if(f.name==s["folder_name"]||f.name=="")return this._getTreeElement().jstree("refresh",c),!1;$.go(this._getCommonUrl(),JSON.stringify(f),{contentType:"application/json",responseFn:function(e){l._getTreeElement().jstree("refresh",c)},error:function(e){r.rlbk&&$.jstree.rollback(rlbk)}})}});return o});