define(["backbone","app","admin/libs/recurrence_parser","GO.util"],function(e,t,n){var r="YYYY-MM-DD",i=e.Model.extend({urlRoot:t.contextRoot+"ad/api/notice",initialize:function(){this.recrurrenceHelper=new n},setInitData:function(){var e=t.util.now().format("YYYY-MM-DD"),n=t.util.now().add("days",7).startOf("days").format("YYYY-MM-DD");this.set({title:"",width:400,height:600,showWeb:!0,showMobile:!0,startTime:e,endTime:n,option:"none",targetAll:!0,wrappedState:!1})},hasRecurrence:function(){return this.get("recurrence")!=undefined&&this.get("recurrence")!=""},hasByMonthDay:function(){return this.hasRecurrence()?this.recrurrenceHelper.parse(this.get("recurrence"))._hasByMonthDay():!1},hasByDay:function(){return this.hasRecurrence()?this.recrurrenceHelper.parse(this.get("recurrence"))._hasByDay():!1},isNormalState:function(){return this.get("state")=="normal"?!0:!1},getConvertStartTime:function(){var e=moment(this.get("startTime"),r);return e.format(r)},getConvertEndTime:function(){var e=moment(this.get("endTime"),r);return e.format(r)},isShowAll:function(){return this.get("showWeb")==1&&this.get("showMobile")==1},isShowWeb:function(){return this.get("showWeb")==1&&this.get("showMobile")==0},isShowMobile:function(){return this.get("showWeb")==0&&this.get("showMobile")==1},isSize400_600:function(){return this.get("width")==400&&this.get("height")==600},isSize520_600:function(){return this.get("width")==520&&this.get("height")==600},isSize800_600:function(){return this.get("width")==800&&this.get("height")==600},isAlwaysMode:function(){return this.get("option")=="always"},isDayMode:function(){return this.get("option")=="day"},isWeekMode:function(){return this.get("option")=="week"},isNoneMode:function(){return this.get("option")=="none"},getFiles:function(){return _.filter(this.getIconAttaches(),function(e){return!t.util.isImage(e.extention)})},getImages:function(){return _.filter(this.getIconAttaches(),function(e){return t.util.isImage(e.extention)})},getIconAttaches:function(){return _.each(this.get("attaches"),function(e){e.icon=t.util.getFileIconStyle(e)})}});return i});