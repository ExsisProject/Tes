define("admin/views/ehr/timeline/group/work_place",function(require){var e=require("backbone"),t=require("hgn!admin/templates/ehr/timeline/group/work_place"),n=require("hgn!admin/templates/ehr/timeline/group/select_work_places"),r=require("admin/collections/ehr/timeline/work_place_list"),i=require("i18n!admin/nls/admin"),s=require("i18n!nls/commons");return e.View.extend({events:{"click #selectWorkPlacesBtn":"selectWorkPlaces","click .workPlaceCancelBtn":"cancelWorkPlace"},initialize:function(e){this.group=e.group,this.selectedWorkPlaces=this.group.get("workPlaces")||[],this.workPlaces=new r,this.workPlaces.fetch()},render:function(){this.$el.html(t({AdminLang:i,CommonLang:s,selectedWorkPlaces:this.selectedWorkPlaces}))},getSelectedWorkPlaces:function(){return this.selectedWorkPlaces},cancelWorkPlace:function(e){var t=$(e.currentTarget).data("id");this.selectedWorkPlaces.splice(_.findIndex(this.selectedWorkPlaces,function(e){return e.id==Number(t)}),1),this.render()},selectWorkPlaces:function(e){var t=this.workPlaces.toJSON(),r=this,o=n({AdminLang:i,CommonLang:s,places:t});this.selectPlacesPopup=$.goPopup({pclass:"layer_normal layer_attend_place",header:i["\uadfc\ubb34\uc9c0 \ucd94\uac00"],modal:!0,contents:o,buttons:[{btext:s["\uc800\uc7a5"],btype:"confirm",autoclose:!1,callback:function(e){var t=$("#workPlaceSelectBox").val();t.forEach(function(e){r.selectedWorkPlaces.filter(function(t){return t.id===Number(e)})[0]||r.selectedWorkPlaces.push(r.workPlaces.getById(e).toJSON())}),r.render(),e.close()}},{btext:s["\ucde8\uc18c"],btype:"cancel"}]},this),this.selectWithOutCtrlKey()},selectWithOutCtrlKey:function(){$("#workPlaceSelectBox option").mousedown(function(e){return e.preventDefault(),$(this).toggleClass("selected"),$(this).prop("selected",!$(this).prop("selected")),!1})}})});