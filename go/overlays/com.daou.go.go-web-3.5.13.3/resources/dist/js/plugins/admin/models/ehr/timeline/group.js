define("admin/models/ehr/timeline/group",function(require){var e=require("backbone"),t=require("app"),n=require("i18n!admin/nls/admin"),r=require("i18n!timeline/nls/timeline"),i=e.Model.extend({urlRoot:t.contextRoot+"ad/api/timeline/group",defaults:{workingType:"FIXED_WORKING_TIME",fixedOption:{workDay:'{"Mon":true,"Tue":true,"Wed":true,"Thu":true,"Fri":true,"Sat":false,"Sun":false}',workTimeRange:{workStartTime:"09:00:00",workEndTime:"18:00:00",dutyStartTime:"10:00:00",dutyEndTime:"15:00:00",nightStartTime:"22:00:00",nightEndTime:"06:00:00"},autoClockOut:{type:"DISABLE",fixedTime:"18:00:00",relativeHour:"08"},autoSetWorkTime:{}},restperiods:[{name:n["\uc810\uc2ec\uc2dc\uac04"],startTime:"12:00:00",endTime:"13:00:00"}],deviceSetting:{alowDevice:["PC_WEB"],useMobileGps:!1},circleSetting:{accessSetting:"black",accessTarget:{},exceptionTarget:{}},usagePeriod:{usePeriodSetting:!1},consensusHoursPerDay:"00"},isAutoClockOutDisable:function(){return"DISABLE"==this.getAutoClockOutType()},isAutoClockOutFixedTime:function(){return"FIXED_TIME"==this.getAutoClockOutType()},isAutoClockOutRelativeTime:function(){return"RELATIVE_TIME"==this.getAutoClockOutType()},getFixedOption:function(){return this.get("fixedOption")},getWorkDay:function(){return JSON.parse(this.getFixedOption().workDay)},isIgnoreBeforeStart:function(){return this.getFixedOption().autoSetWorkTime.ignoreBeforeStart},isIgnoreAfterStart:function(){return this.getFixedOption().autoSetWorkTime.ignoreAfterStart},isIgnoreAfterEnd:function(){return this.getFixedOption().autoSetWorkTime.ignoreAfterEnd},getAutoClockOutType:function(){return this.getFixedOption().autoClockOut.type},getTime:function(e){if(!e)return{hour:null,minute:null,second:null};var t=e.split(":");return{hour:t[0],minute:t[1],second:t[2]}},getWorkStartTime:function(){return this.getFixedOption().workTimeRange.workStartTime},isWorkStartHour:function(e){return this.getTime(this.getWorkStartTime()).hour==e},isWorkStartMinute:function(e){return this.getTime(this.getWorkStartTime()).minute==e},isWorkStartSecond:function(e){return this.getTime(this.getWorkStartTime()).second==e},getWorkEndTime:function(){return this.getFixedOption().workTimeRange.workEndTime},isWorkEndHour:function(e){return this.getTime(this.getWorkEndTime()).hour==e},isWorkEndMinute:function(e){return this.getTime(this.getWorkEndTime()).minute==e},isWorkEndSecond:function(e){return this.getTime(this.getWorkEndTime()).second==e},getDutyStartTime:function(){return this.getFixedOption().workTimeRange.dutyStartTime},isDutyStartHour:function(e){return this.getTime(this.getDutyStartTime()).hour==e},isDutyStartMinute:function(e){return this.getTime(this.getDutyStartTime()).minute==e},isDutyStartSecond:function(e){return this.getTime(this.getDutyStartTime()).second==e},getDutyEndTime:function(){return this.getFixedOption().workTimeRange.dutyEndTime},isDutyEndHour:function(e){return this.getTime(this.getDutyEndTime()).hour==e},isDutyEndMinute:function(e){return this.getTime(this.getDutyEndTime()).minute==e},isDutyEndSecond:function(e){return this.getTime(this.getDutyEndTime()).second==e},enableDutyTime:function(){return this.getFixedOption().workTimeRange.enableDutyTime},getAutoClockOutFixedTime:function(){return this.getFixedOption().autoClockOut.fixedTime},isConsensusHoursPerDay:function(e){return this.get("consensusHoursPerDay")==e},isAutoClockOutFixedTimeHour:function(e){return this.getTime(this.getAutoClockOutFixedTime()).hour==e},isAutoClockOutFixedTimeMinute:function(e){return this.getTime(this.getAutoClockOutFixedTime()).minute==e},isAutoClockOutFixedTimeSecond:function(e){return this.getTime(this.getAutoClockOutFixedTime()).second==e},isAutoClockOutRelativeTimeHour:function(e){return this.getFixedOption()["autoClockOut"]["relativeHour"]==e},getNightStartTime:function(){return this.getFixedOption().workTimeRange.nightStartTime},isNightStartHour:function(e){return this.getTime(this.getNightStartTime()).hour==e},isNightStartMinute:function(e){return this.getTime(this.getNightStartTime()).minute==e},isNightStartSecond:function(e){return this.getTime(this.getNightStartTime()).second==e},getNightEndTime:function(){return this.getFixedOption().workTimeRange.nightEndTime},isNightEndHour:function(e){return this.getTime(this.getNightEndTime()).hour==e},isNightEndMinute:function(e){return this.getTime(this.getNightEndTime()).minute==e},isNightEndSecond:function(e){return this.getTime(this.getNightEndTime()).second==e},isMobileAllow:function(){return _.contains(this.get("deviceSetting").allowDevice,"MOBILE")},isFixedWorkingTimeType:function(){return"FIXED_WORKING_TIME"==this.getWorkingType()},isFlexibleWorkingTimeType:function(){return"FLEXIBLE_WORKING_TIME"==this.getWorkingType()},isSelectiveWorkingTimeType:function(){return"SELECTIVE_WORKING_TIME"==this.getWorkingType()},getWorkingType:function(){return this.get("workingType")},getWorkingTimeRange:function(){return this.isFlexibleWorkingTimeType()?"\uc790\uc720\ucd9c\ud1f4\uadfc":this.get("fixedOption").workTimeRange.workStartTime+" ~ "+this.get("fixedOption").workTimeRange.workEndTime},isExpired:function(){if(!this.usePeriodSetting())return!1;var e=t.util.customDate(new Date,"YYYY-MM-DD");return e>this.get("usagePeriod").endDate},usePeriodSetting:function(){return this.get("usagePeriod").usePeriodSetting},useMobileGps:function(){return this.get("deviceSetting").useMobileGps},usePeriodSetting:function(){return this.get("usagePeriod").usePeriodSetting},getPeriodStartDate:function(){return t.util.customDate(this.get("usagePeriod").startDate,"YYYY-MM-DD")},getPeriodEndDate:function(){return t.util.customDate(this.get("usagePeriod").endDate,"YYYY-MM-DD")},isDefaultGroup:function(){return this.get("defaultGroup")},isAccessBlack:function(){return this.get("circleSetting")["accessSetting"]=="black"},isAccessWhite:function(){return this.get("circleSetting")["accessSetting"]=="white"},useWarningCheck:function(){return this.get("warningCheck")},usePrivateIpAutoSave:function(){return this.get("deviceSetting").privateIpAutoSave},save:function(n,r){if(!this.validation(n))return;return t.EventEmitter.trigger("common","layout:setOverlay",""),e.Model.prototype.save.call(this,n,r)},validation:function(e){if(!e.name)return $.goMessage(r["\uadf8\ub8f9\uba85\uc740 \ud544\uc218\uc785\ub2c8\ub2e4."]),!1;for(var t in e.restperiods){var n=e.restperiods[t];if(!n.name)return $.goMessage(r["\ud734\uac8c\uc2dc\uac04\uba85\uc740 \ud544\uc218\uc785\ub2c8\ub2e4."]),!1;if(n.startTime>n.endTime)return $.goMessage(r["\ud734\uac8c \uc885\ub8cc\uc2dc\uac04\uc774 \uc2dc\uc791\uc2dc\uac04\ubcf4\ub2e4 \ube60\ub97c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ud734\uac8c\uc2dc\uac04\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694."]),!1}return!0}});return i});