define("admin/views/auth/admin_auth_list",function(require){var e=require("hgn!admin/templates/auth/admin_auth_list"),t=require("hgn!admin/templates/auth/admin_auth_group_edit_popup"),n=require("admin/collections/auth/admin_auth_groups"),r=require("i18n!admin/nls/admin"),i=require("i18n!nls/commons");return Backbone.View.extend({el:"#adminAuthList",events:{"click .auth_group":"onGroupClicked","click #group_add_btn":"onAddBtnClicked","click #group_mod_btn":"onModBtnClicked","click #group_del_btn":"onDelBtnClicked"},initialize:function(e){this.authGroupCollection=new n,this.authGroupCollection.fetch({async:!1}),this.authGroupCollection.each(function(t){e.activeAuthGroup?t.active=e.activeAuthGroup.id==t.id:t.active=t.isDefaultGroup()})},render:function(){var t=this;this.$el.html(e({groups:this.authGroupCollection.models,adminLang:r,commonLang:i}))},onGroupClicked:function(e){$.goOrgSlide.close(),this.activeGroup($(e.currentTarget)),this.$el.trigger("renderAuthGroup",this.getCheckedGroupModel())},activeGroup:function(e){this.$el.find("#group_list .auth_group.active").removeClass("active"),e.addClass("active")},onAddBtnClicked:function(){var e=this,n=this.getCheckedGroupModel(),s=function(){var t=$("#authNameInput").val();GO.util.preloader(this.authGroupCollection.addGroup(t).done(function(){e.render(),e.activeGroup($('.auth_group[data-id="'+n.id+'"]'))}))};$.goPopup({title:r["\uc120\ud0dd\ud55c \uad8c\ud55c \ucd94\uac00"],modal:!0,contents:t({adminLang:r}),buttons:[{btype:"confirm",btext:i["\uc800\uc7a5"],callback:$.proxy(s,this)},{btype:"close",btext:i["\ucde8\uc18c"]}]})},onModBtnClicked:function(e){var n=this,s=this.getCheckedGroupModel(),o=function(){var e=$("#authNameInput").val();GO.util.preloader(this.authGroupCollection.modifyGroup(s.id,e).done(function(){n.render(),n.activeGroup($('.auth_group[data-id="'+s.id+'"]')),n.$el.trigger("renderAuthGroup",s)}))};$.goPopup({title:r["\uc120\ud0dd\ud55c \uad8c\ud55c \uc218\uc815"],modal:!0,contents:t({adminLang:r,name:s.get("name")}),buttons:[{btype:"confirm",btext:i["\uc800\uc7a5"],callback:$.proxy(o,this)},{btype:"close",btext:i["\ucde8\uc18c"]}]})},onDelBtnClicked:function(){var e=function(){var e=this,t=this.getCheckedGroupModel();GO.util.preloader(t.destroy().done(function(){e.render(),e.$el.trigger("renderAuthGroup")}))};$.goPopup({title:r["\uc120\ud0dd\ud55c \uad8c\ud55c \uc0ad\uc81c \uc54c\ub9bc"],modal:!0,buttons:[{btype:"confirm",btext:i["\uc0ad\uc81c"],callback:$.proxy(e,this)},{btype:"close",btext:i["\ucde8\uc18c"]}]})},getCheckedGroupModel:function(){var e=this.$el.find("#group_list .auth_group.active"),t=e.hasClass("default_group"),n=e.data("id");return t?this.authGroupCollection.getDefaultAuthGroup():this.authGroupCollection.getById(n)}})});