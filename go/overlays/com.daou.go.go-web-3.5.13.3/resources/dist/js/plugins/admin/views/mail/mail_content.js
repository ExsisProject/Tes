(function(){define(["jquery","backbone","app","hgn!admin/templates/mail/mail_content","i18n!admin/nls/admin"],function(e,t,n,r,i){var s={"\uc804\uccb4\uba54\uc77c":"/site/reportTrendView.action?statCategory=summary&mailType=all&iframe=true","\uc218\uc2e0\uba54\uc77c":"/site/reportTrendView.action?statCategory=summary&mailType=inbound&isSelectedDomain=none&iframe=true","\uc1a1\uc2e0\uba54\uc77c":"/site/reportTrendView.action?statCategory=summary&mailType=outbound&isSelectedDomain=none&iframe=true","\uc815\uc0c1\uba54\uc77c":"/site/reportTrendView.action?statCategory=normal&iframe=true","\uc2a4\ud338\uba54\uc77c":"/site/reportTrendView.action?statCategory=spamCont&iframe=true","\ubc14\uc774\ub7ec\uc2a4\uba54\uc77c":"/site/reportTrendView.action?statCategory=virus&iframe=true",POP:"/site/reportTrendView.action?statCategory=pop&iframe=true",IMAP:"/site/reportTrendView.action?statCategory=imap&iframe=true"},o=n.BaseView.extend({events:{"change #iFrameOptions":"onIFrameOptionsChanged"},initialize:function(){this.src=this.options.iframe_src},render:function(){var t=this;this.$el.empty();var n=r({iframe_src:t.src,isMailStatView:t.isMailStatView(),iFrameOptions:_.map(s,function(e,t){return{key:t,value:e,lang:i[t]}})});this.$el.html(n),this.selectOption();var o=e("#site-viewer");o.load(function(t,n){var r=o.contents(),i=null;if(this.src.indexOf("reportTrendView")>0){i="#tPage";var s=r.find(i).outerHeight(!0);o.height(s+50)}else if(this.src.indexOf("domainCommon.action?initMethod=group")>0){var u=o.contents().find("#groups").children().length,a=1200,f=24;u>f&&(a+=(u-f)*50,a+=100),o.height(a+"px")}else{o.height()<1200&&o.height("1200px"),i="#domainManagementContent";var l=r.find(i);l.on("change",function(){l.height()>1200&&o.height(l.height()+"px")})}o.get(0).contentWindow.GO=GO;var c=r.find("head");c.find("link").remove();var h='<link rel="stylesheet" href="'+GO.contextRoot+'resources/css/fonts/notosans.css" media="all">\n'+'<link type="text/css" rel="stylesheet" href="'+GO.contextRoot+"resources/css/go_admin_body.css?rev="+GO.revision+'" media="screen" />\n'+'<link type="text/css" rel="stylesheet" href="'+GO.contextRoot+"resources/css/go_prototype.css?rev="+GO.revision+'" media="screen" />\n'+'<link type="text/css" rel="stylesheet" href="'+GO.contextRoot+"resources/css/doc_editor.css?rev="+GO.revision+'" media="screen" />\n'+'<link type="text/css" rel="stylesheet" href="'+GO.contextRoot+"resources/css/ta_style.css?rev="+GO.revision+'" media="screen" />\n'+'<link type="text/css" rel="stylesheet" href="'+GO.contextRoot+"resources/css/adm_style.css?rev="+GO.revision+'" media="screen" />\n'+'<link type="text/css" rel="stylesheet" href="'+GO.contextRoot+"resources/css/go_admin_customize.css?rev="+GO.revision+'" media="screen, print" />\n'+'<link type="text/css" rel="stylesheet" href="'+GO.contextRoot+"resources/css/prefix.css?rev="+GO.revision+'" media="screen" />';c.prepend(h),r.find("body").css("background","");var p=!0;_.forEach(r.find(".content_body"),function(t){if(p){p=!1;return}e(t).find("table").addClass("tb"),_.forEach(e(t).find("tr"),function(t){var n=e(t).find("td");if(!n||!e(n).css("padding-right"))return;e(t).find("th").addClass("th_left"),e(t).find("th").css("text-align",""),e(t).find("th").css("padding-right",""),e(t).find("td").css("text-align",""),e(t).find("td").css("padding-right","")})})})},isMailStatView:function(){return _.contains(s,this.src)},selectOption:function(){var e=this.$el.find('#iFrameOptions option[value="'+this.src+'"]');e.attr("selected",!0)},onIFrameOptionsChanged:function(t){var n=e(t.currentTarget),r=n.find("option:selected"),i=r.val();this.src=i,this.render()}});return o})}).call(this);