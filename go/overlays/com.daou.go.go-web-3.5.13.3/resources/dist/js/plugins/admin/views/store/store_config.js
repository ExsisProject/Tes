(function(){define(["jquery","backbone","app","admin/collections/app_admin_list","admin/views/app_admin_list","store/models/config","store/collections/configs","hgn!admin/templates/store/store_config","hgn!admin/templates/app_admin_config","i18n!nls/commons","i18n!admin/nls/admin","jquery.go-orgslide","jquery.go-popup","jquery.go-sdk"],function(e,t,n,r,i,s,o,u,a,f,l){var c,h={label_ok:f["\uc800\uc7a5"],label_cancel:f["\ucde8\uc18c"]},p="termsAdvertisement";return c=n.BaseView.extend({el:"#layoutContent",initialize:function(){this.model=new t.Model,this.model.url="/ad/api/storeconfig",this.model.fetch({async:!1}),this.adminListView=new i({title:l["Link+ \uc6b4\uc601"],collection:new r(this.model.get("administrators"))}),this.storeConfigs=new o(!0),this.storeConfigs.fetch({async:!1});var e=this.storeConfigs.getConfigByName(p);this.termsAdvertisement=e&&e.configValue=="true",this.unbindEvent(),this.bindEvent()},unbindEvent:function(){this.$el.off("click","#administratorCreate"),this.$el.off("click","span#btn_ok"),this.$el.off("click","span#btn_cancel"),this.$el.off("click","#saveAgree"),this.$el.off("click","#cancelAgree")},bindEvent:function(){this.$el.on("click","#administratorCreate",e.proxy(this.createAdministrator,this)),this.$el.on("click","span#btn_ok",e.proxy(this.storeConfigSave,this)),this.$el.on("click","span#btn_cancel",e.proxy(this.storeConfigCancel,this)),this.$el.on("click","#saveAgree",e.proxy(this.saveAgreement,this)),this.$el.on("click","#cancelAgree",e.proxy(this.cancelAgree,this))},render:function(){return this.$el.empty().html(u({lang:h,termsAdvertisement:this.termsAdvertisement})),this.$el.find("div.content_page").prepend(this.adminListView.render()),this.$el.find("#admin_title").html(l["\uc6b4\uc601"]),this.$el.find("#add_text").html(f["\ucd94\uac00"]),this.$el},createAdministrator:function(t){var n=this,r=function(e){n.adminListView.addAdmin({userId:e.id,name:e.name,position:e.position})};e.goOrgSlide({header:h.label_admin_add,callback:r,contextRoot:GO.contextRoot,target:t,isAdmin:!0})},storeConfigSave:function(){var t={administrators:this.adminListView.collection.toJSON()};this.model.save(t,{success:function(t,n){n.code=="200"&&e.goMessage(f["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."])},error:function(t,n){n.message?e.goAlert(n.message):e.goMessage(f["\uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."])}})},storeConfigCancel:function(){var t=this;e.goCaution(f["\ucde8\uc18c"],f["\ubcc0\uacbd\ud55c \ub0b4\uc6a9\uc744 \ucde8\uc18c\ud569\ub2c8\ub2e4."],function(){t.initialize(),t.render(),e.goMessage(f["\ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."])},f["\ud655\uc778"])},saveAgreement:function(t){var n=this,r=new s(!0);r.set({configName:p,configValue:e("#agree_radio").is(":checked")}),r.save(null,{success:function(){e.goMessage(f["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."])},error:function(t,n){n.message?e.goAlert(n.message):e.goMessage(f["\uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."])}})},cancelAgree:function(){this.render()}},{__instance__:null}),c})}).call(this);