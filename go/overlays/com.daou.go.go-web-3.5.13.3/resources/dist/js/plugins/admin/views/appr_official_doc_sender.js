(function(){define(["jquery","backbone","app","i18n!nls/commons","i18n!admin/nls/admin","i18n!approval/nls/approval","hgn!admin/templates/appr_official_doc_sender"],function(e,t,n,r,i,s,o){var u={head_title:"\ubc1c\uc2e0 \uba85\uc758",title:r["\uc81c\ubaa9"],sign_img:"\uc9c1\uc778 \uc774\ubbf8\uc9c0",creation_success_msg:i["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc591\uc2dd \ubaa9\ub85d\uc73c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4."],cancel_and_go_to_list_msg:i["\ucde8\uc18c\ud558\uc168\uc2b5\ub2c8\ub2e4. \uc774\uc804 \ud654\uba74\uc73c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4."],creation_fail_msg:i["\uc800\uc7a5\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],upload_sign_img:"\uc9c1\uc778 \uc62c\ub9ac\uae30",state:i["\uc0ac\uc6a9\uc5ec\ubd80"],hidden:i["\uc228\uae40"],normal:i["\uc815\uc0c1"],use:s["\uc0ac\uc6a9"],unuse:s["\ubbf8\uc0ac\uc6a9"],name_invalid_length:i["\uc81c\ubaa9\uc740 100\uc790\uae4c\uc9c0 \uc785\ub825\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."],name_required:i["\uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694."],duplicated_name:i["\uc81c\ubaa9\uc774 \uc911\ubcf5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."],modify:r["\uc218\uc815"],select:r["\uc120\ud0dd"],add:r["\ucd94\uac00"],"delete":r["\uc0ad\uc81c"],save:r["\uc800\uc7a5"],cancel:r["\ucde8\uc18c"]},a=t.View.extend({el:"#layoutContent",model:null,initialize:function(e){this.model=e.model,this.initBindingEvents()},initBindingEvents:function(){this.$el.off("click","#save_btn"),this.$el.off("click","#cancel_btn"),this.$el.on("click","#save_btn",e.proxy(this._onSaveClicked,this)),this.$el.on("click","#cancel_btn",e.proxy(this._onCancelClicked,this))},render:function(){this.$el.html(o(this._makeTmplData(this.model)))},_makeTmplData:function(e){var t=function(){return function(e){return e.replace('value="'+this.state+'"','value="'+this.state+'" checked')}},n={lang:u,wrappedState:t};return _.extend(n,e.toJSON())},_onSaveClicked:function(){var t=this;this.model.set("name",this.$el.find("input[name=name]").val().trim()),this.model.set("state",this.$el.find("input[name=state]:checked").val());if(!this.model.isValid())return _.contains(["name_invalid_length","name_required"],this.model.validationError)?(e.goMessage(u[this.model.validationError]),this.$el.find(":input[name=name]").select()):e.goMessage(u[this.model.validationError]),!1;if(this.requestProcessing)return;this.requestProcessing=!0,this.model.save({},{success:e.proxy(function(t,n,r){e.goAlert(u.creation_success_msg,"",this._goToFormListView)},this),error:function(t,n,r){var i=u.creation_fail_msg;return _.contains(n.responseJSON.name,"bad.request")&&(i=u.duplicated_name),e.goMessage(i),!1},complete:function(){t.requestProcessing=!1}})},_onCancelClicked:function(){return e.goAlert(u.cancel_and_go_to_list_msg,"",e.proxy(this._goToFormListView,this)),!1},_goToFormListView:function(){return GO.router.navigate("approval/manage/official",{trigger:!0}),!1}});return a})}).call(this);