define("admin/views/layout/page_view",function(require){var e=require("underscore"),t=require("jquery"),n=require("backbone"),r=require("app");return n.View.extend({className:"tool_bar",events:{"click .paginate_button":"movePage","change .data_offset_sel":"changedOffset"},initialize:function(t){t||(t={});var n=t.page?t.page:{};this.view=t.self,this.offsets=e.isArray(n.offset)?n.offset:[20,40,60,80,100],this.viewPageCnt=e.isNumber(n.viewPageCnt)?n.viewPageCnt:5,this.pageChangeCb=e.isFunction(t.pageCb)?t.pageCb:null,this.offsetChangeCb=e.isFunction(t.offsetCb)?t.offsetCb:null,this.updatePage(n)},updatePage:function(t){t||(t={});var n=t.page?t.page:t;this.page=e.isNumber(n.page)?n.page:0,this.offset=e.isNumber(n.offset)?n.offset:20,this.total=e.isNumber(n.total)?n.total:1,this.totalPage=e.isNumber(n.totalPage)?n.totalPage:this.total/this.offset+(this.total%this.offset===0?0:1),this.lastPageNum=this.totalPage-1,this.firstPage=this.page<1,this.lastPage=this.page>=this.lastPageNum,this.viewPage=[];var r=this.page-Math.floor(this.viewPageCnt/2);r<0&&(r=0);var i=r+this.viewPageCnt;i>this.totalPage&&(i=this.totalPage);for(var s=r;s<i;s++)this.viewPage[this.viewPage.length]=s;this.render()},tpl:function(){var t=this,n='<div class="tool_bar"><div class="critical custom_bottom"></div><div class="dataTables_length"><label><select size="1" class="data_offset_sel" name="deptList_length" aria-controls="deptList">';return e.forEach(this.offsets,function(e){n+='<option value="(val)" (sel)>(val)</option>'.replace("(val)",e).replace("(val)",e).replace("(sel)",t.offset===e?'"selected"':"")}),n+='</select></label></div><div class="dataTables_paginate paging_full_numbers" id="deptList_paginate">'+'<a tabindex="0" class="first paginate_button (disable)" title="\ub9e8\uc55e" id="deptList_first" data-bypass="true"></a>'.replace("(disable)",this.firstPage?"paginate_button_disabled":"")+'<a tabindex="(targetPage)" class="previous paginate_button (disable)" title="\uc774\uc804" id="deptList_previous" data-bypass="true"></a>'.replace("(disable)",this.firstPage?"paginate_button_disabled":"").replace("(targetPage)",this.page-1+"")+"<span>",e.forEach(this.viewPage,function(e){n+='<a tabindex="(targetPage)" class="paginate_(active)" data-bypass="true">(viewPage)</a>'.replace("(targetPage)",e).replace("(active)",t.page===e?"active":"button").replace("(viewPage)",e+1)}),n+="</span>"+'<a tabindex="(targetPage)" class="next paginate_button (disable)" title="\ub2e4\uc74c" id="deptList_next" data-bypass="true"></a>'.replace("(disable)",this.lastPage?"paginate_button_disabled":"").replace("(targetPage)",this.page+1+"")+'<a tabindex="(targetPage)" class="last paginate_button (disable)" title="\ub9e8\ub4a4" id="deptList_last" data-bypass="true"></a>'.replace("(disable)",this.lastPage?"paginate_button_disabled":"").replace("(targetPage)",this.lastPageNum+"")+"</div>"+"</div>",n},changedOffset:function(e){var n=t(e.currentTarget),r=n.val();this.offsetChangeCb&&this.offsetChangeCb(this.view,r)},movePage:function(e){var n=t(e.currentTarget),r=n.attr("tabindex");if(r<0||r>this.lastPageNum)return;if(r===this.page)return;this.pageChangeCb&&this.pageChangeCb(this.view,r)},render:function(){return this.$el.html(this.tpl()),this.$el.find(".data_offset_sel").val(this.offset),this}})});