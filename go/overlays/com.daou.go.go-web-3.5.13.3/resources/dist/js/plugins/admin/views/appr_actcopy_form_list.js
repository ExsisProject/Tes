(function(){define(["jquery","backbone","app","i18n!nls/commons","i18n!admin/nls/admin","i18n!approval/nls/approval","hgn!admin/templates/actcopy_form_list","jquery.go-sdk","jquery.jstree","jquery.go-popup","jquery.go-grid","jquery.go-orgslide","jquery.go-validation"],function(e,t,n,r,i,s,o){var u,a=GO.contextRoot+"ad/api/",f={"delete":i["\uc591\uc2dd \uc0ad\uc81c"],new_form:i["\uc591\uc2dd \ucd94\uac00"],form_name:r["\uc81c\ubaa9"],creator_name:i["\ub4f1\ub85d\uc790"],state:i["\uc0ac\uc6a9\uc5ec\ubd80"],normal:i["\uc815\uc0c1"],hidden:i["\uc228\uae40"],empty_msg:i["\ub4f1\ub85d\ub41c \uc591\uc2dd\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."]};return u=t.View.extend({el:"#layoutContent",initialize:function(){this._initEventBinding()},render:function(){this.$el.empty().html(o({lang:f})),this._renderFormListView()},_renderFormListView:function(){var t=a+"approval/actcopyform",n=this._renderEmptyTmpl({lang:f});this.dataTable=e.goGrid({el:"#actcopy_form_table",url:t,method:"GET",emptyMessage:n,defaultSorting:[],checkbox:!0,checkboxData:"id",sDomUse:!1,pageUse:!1,columns:[{mData:"name",bSortable:!0,sClass:"title",fnRender:function(e){return'<a class="form_name_actCopylink" data-id="'+e.aData.id+'">'+e.aData.name+"</a>"}},{mData:"creator.name",bSortable:!0,fnRender:function(e){return e.aData.creator.name+" "+e.aData.creator.position}},{mData:"state",sWidth:"101px",bSortable:!0,fnRender:function(e){return e.aData.state=="HIDDEN"?f.hidden:f.normal}}],fnDrawCallback:e.proxy(function(t,n,r){this.$el.find(".toolbar_top .custom_header").append(this.$el.find("#csvDownLoad").show()),e(".tool_bar .dataTables_length").hide(),e(".tool_bar").eq(0).hide()},this)})},_renderEmptyTmpl:function(e){var t=[];t.push("<tbody>"),t.push("    <tr>"),t.push('        <td colspan="4">'),t.push('            <p class="data_null">'),t.push('                <span class="ic_data_type ic_no_data"></span>'),t.push('                <span class="txt">{{lang.empty_msg}}</span>'),t.push("            </p>"),t.push("        </td>"),t.push("    </tr>"),t.push("</tbody>");var n=Hogan.compile(t.join("\n"));return n.render(e)},_initEventBinding:function(){this.$el.off(),this.$el.on("click",".form_name_actCopylink",e.proxy(this._goToShowForm,this)),this.$el.on("click","#check_all",e.proxy(this._toggleAllCheckboxes,this)),this.$el.on("click","#new_form",e.proxy(this._goToNewForm,this)),this.$el.on("click","#delete_form",e.proxy(this._deleteSelected,this))},_goToNewForm:function(e){GO.router.navigate("approval/actcopyform/new",{trigger:!0})},_goToShowForm:function(t){var n=e(t.currentTarget).data("id");return GO.router.navigate("approval/actcopyform/"+n+"/show",{trigger:!0}),!1},_toggleAllCheckboxes:function(t){var n=e(t.currentTarget),r=this.$el.find("input:checkbox");n.is(":checked")?r.attr("checked","checked"):r.removeAttr("checked")},_deleteSelected:function(){var t=[];this.$el.find("input:checked").each(function(n){e(this).attr("name")=="id"&&t.push(e(this).val())});if(t.length==0)return e.goMessage(s["\uc591\uc2dd\uc744 \uc120\ud0dd\ud574 \uc8fc\uc138\uc694."]),!1;var n=this;e.goConfirm(i["\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"],"",function(){e.go(a+"approval/actcopyform",JSON.stringify({ids:t}),{qryType:"DELETE",async:!1,contentType:"application/json",responseFn:function(t){n.render(),e.goMessage(r["\uc0ad\uc81c\ud558\uc600\uc2b5\ub2c8\ub2e4."])},error:function(t){n.render(),e.goMessage(r["\uc0ad\uc81c\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4."])}})})}}),u()})}).call(this);