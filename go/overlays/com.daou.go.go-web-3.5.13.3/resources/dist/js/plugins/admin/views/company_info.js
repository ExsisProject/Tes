(function(){define(["jquery","backbone","app","hgn!admin/templates/company_info","i18n!admin/nls/admin","admin/views/layout/admin_guide_button","admin/models/layout/mail_admin_base"],function(e,t,n,r,i,s,o){var u={label_company_info:i["\uc0ac\uc774\ud2b8 \uc815\ubcf4"],label_base_info:i["\uae30\ubcf8 \uc815\ubcf4"],label_company_name:i["\uc0ac\uc774\ud2b8\uba85"],label_officer:i["\ub2f4\ub2f9\uc790"],label_domain_info:i["\ub3c4\uba54\uc778 \uc815\ubcf4"],label_domain_name:i["\ub3c4\uba54\uc778 \uba85"],label_startday:i["\ub3c4\uc785\uc77c\uc790"],label_user_count:i["\ucd1d \uacc4\uc815\uc218"],label_count:i["\uac1c"],label_online:i["\ud65c\ub3d9 \uacc4\uc815"],label_storage:i["\uc0ac\uc6a9 \uc6a9\ub7c9"],label_package:i["\uc0ac\uc6a9 \ud328\ud0a4\uc9c0"],label_mail_stat:i["\uba54\uc77c \ud1b5\uacc4"],label_mail_24_hour:i["\ucd5c\uadfc 24\uc2dc\uac04"],label_mail_30_day:i["\ucd5c\uadfc 30\uc77c\uac04"],label_stat_message:i["\uba54\uc77c\ud1b5\uc218"],label_stat_hour:i["\uc2dc\uac04"],label_stat_normal:i["\uc815\uc0c1\uba54\uc77c"],label_stat_spam:i["\uc2a4\ud338\uba54\uc77c"],label_stat_phishing:i["\ud53c\uc2f1\uba54\uc77c"],label_stat_virus:i["\ubc14\uc774\ub7ec\uc2a4\uba54\uc77c"],label_total_account_quota:i["\ucd1d \ud560\ub2f9 \uacc4\uc815 \uc6a9\ub7c9"],label_total_company_quota:i["\uacf5\uc6a9 \uc6a9\ub7c9"],label_limitless:i["\ubb34\uc81c\ud55c"],label_period:i["\uc0ac\uc6a9 \uae30\uac04"],label_site_url:i["\uc0ac\uc774\ud2b8 URL"],label_site_id:i["\uc0ac\uc774\ud2b8 \uc544\uc774\ub514"],label_caremanager:i["\uace0\uac1d\ucf00\uc5b4\uad00\ub9ac\uc790"],label_approval_title1:i["\uc804\uc790\uacb0\uc7ac\uc81c\ubaa91"],label_approval_title2:i["\uc804\uc790\uacb0\uc7ac\uc81c\ubaa92"],label_approval_contents:i["\uc804\uc790\uacb0\uc7ac\ub0b4\uc6a9"],label_approval_hashtags:i["\uc804\uc790\uacb0\uc7ac\ud574\uc26c\ud0dc\uadf8"],label_works_title:i["Works\uc81c\ubaa9"],label_works_contents:i["Works\ub0b4\uc6a9"],label_works_hashtags:i["Works\ud574\uc26c\ud0dc\uadf8"],label_manager_title:i["\uad00\ub9ac\uae30\ub2a5\uc81c\ubaa9"],label_manager_contents:i["\uad00\ub9ac\uae30\ub2a5\ub0b4\uc6a9"],label_manager_hashtags:i["\uad00\ub9ac\uae30\ub2a5\ud574\uc26c\ud0dc\uadf8"],label_linkplus:i["\ub9c1\ud06c\ud50c\ub7ec\uc2a4\ud61c\ud0dd\ud655\uc778\ud558\uae30"]},a=n.BaseView.extend({el:"#layoutContent",initialize:function(){this.adminBase=new o;var e=new t.Model;e.url="/ad/api/company",e.fetch({async:!1}),this.model=e.toJSON(),document.title="SiteAdmin "+this.model.name;var n=new t.Model;n.url="/ad/api/quotaconfig",n.fetch({async:!1}),this.baseCompanyConfigModel=n.toJSON()},render:function(){var e=function(){return GO.util.basicDate(this.model.createdAt)};this.baseCompanyConfigModel.totalAccountQuota=="0"?this.baseCompanyConfigModel.totalAccountQuota=i["\ubb34\uc81c\ud55c"]:this.baseCompanyConfigModel.totalAccountQuota=this.makeQuotaTmpl(this.baseCompanyConfigModel.totalAccountQuota,this.model.totalAccountQuota),this.baseCompanyConfigModel.companyQuota=="0"?this.baseCompanyConfigModel.companyQuota=i["\ubb34\uc81c\ud55c"]:this.baseCompanyConfigModel.companyQuota=this.makeQuotaTmpl(this.baseCompanyConfigModel.companyQuota,this.model.companyQuota),this.$el.empty();var t=r({lang:u,model:this.model,dateformat:e,baseCompanyConfig:this.baseCompanyConfigModel,usedAccount:function(){return this.model.usedCount-this.model.stopUserCount},companyPeriod:function(){if(this.baseCompanyConfig.restrictCompanyPeriod==1){var e=n.util.getDdayDiff(this.baseCompanyConfig.restrictCompanyPeriodEnd),t="";return e<=7&&e>=0?t=" <span style='color: red;'>( "+i["\uc11c\ube44\uc2a4 \ub9cc\ub8cc\uc77c"]+" D-"+e+")</span>":e<0&&(t=" <span style='color: red;'>( "+i["\uc11c\ube44\uc2a4 \ub9cc\ub8cc"]+" )</span>"),this.baseCompanyConfig.restrictCompanyPeriodStart+" ~ "+this.baseCompanyConfig.restrictCompanyPeriodEnd+t}return i["\ubb34\uc81c\ud55c"]}});return this.$el.html(t),this.renderMailStatic(),this.renderGuide(),this.$el},renderGuide:function(){this.adminGuideButton=new s,this.adminGuideButton.render(),e("#admin_guide_button").empty(),e("#admin_guide_button").append(this.adminGuideButton.$el)},makeQuotaTmpl:function(e,t){var r=(parseInt(t)/parseInt(e)*100).toFixed(0),i=n.util.getHumanizedFileSize(t),s=n.util.getHumanizedFileSize(e);return i+" / "+s+" ("+r+"%)"},renderMailStatic:function(){var t=this.adminBase.getGraphType();e.getJSON("/summaryMonitor.action",{act:"json",graphType:t},function(t){e("#mail24Hour").attr("src",t.data[0].imgPath),e("#mail30Day").attr("src",t.data[1].imgPath)})}},{__instance__:null});return a})}).call(this);