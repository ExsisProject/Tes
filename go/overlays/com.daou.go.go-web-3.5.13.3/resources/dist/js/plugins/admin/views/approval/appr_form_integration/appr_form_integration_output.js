define(["i18n!nls/commons","i18n!admin/nls/admin","i18n!approval/nls/approval","admin/views/approval/appr_form_integration/appr_form_integration_output_datatype","admin/views/approval/appr_form_integration/appr_form_integration_output_appointeditem","hgn!admin/templates/approval/appr_form_integration/appr_form_integration_output"],function(e,t,n,r,i,s){var o={Output:"Output","Output \ub370\uc774\ud130 \uc0ac\uc6a9\uc5ec\ubd80":n["Output \ub370\uc774\ud130 \uc0ac\uc6a9\uc5ec\ubd80"],"\uc0ac\uc6a9":e["\uc0ac\uc6a9"],"\ubbf8\uc0ac\uc6a9":n["\ubbf8\uc0ac\uc6a9"],"\ub370\uc774\ud130 \uc18c\uc2a4":e["\ub370\uc774\ud130 \uc18c\uc2a4"],"\ub370\uc774\ud130 \uc720\ud615":e["\ub370\uc774\ud130 \uc720\ud615"],"\ub370\uc774\ud130":e["\ub370\uc774\ud130"],"\uc804\uccb4":e["\uc804\uccb4"],"\uc9c0\uc815\ud56d\ubaa9":e["\uc9c0\uc815\ud56d\ubaa9"],"\uadf8\ub8f9\uc6e8\uc5b4 \ub370\uc774\ud130 \ub0b4\ubcf4\ub0b4\uae30":n["\uadf8\ub8f9\uc6e8\uc5b4 \ub370\uc774\ud130 \ub0b4\ubcf4\ub0b4\uae30"],"\uc5f0\uacb0 \uc815\ubcf4":n["\uc5f0\uacb0 \uc815\ubcf4"],"\uc5f0\uacb0 \ubc29\uc2dd":n["\uc5f0\uacb0 \ubc29\uc2dd"]},u=Backbone.View.extend({el:"#integration_output",initialize:function(e){this.options=e||{},this.model=this.options.model,this.observer=e.observer,this.dataSource=this.options.dataSource},events:{"click #outputUseBtn":"_outputUse","click #outputNotUseBtn":"_outputNotUse","click [name=returnAllVariables]":"_clickAppointedItem"},render:function(){var e=this.model.get("outputDataSourceName"),t=_.map(this.dataSource,function(t){return{isSelected:e==t,name:t}});this.$el.html(s({lang:o,data:this.model.toJSON(),dataSource:t,returnAllVariables:this.model.get("returnAllVariables")})),this.outputDataTypeView=new r({model:this.model,observer:this.observer}),this.outputDataTypeView.render(),this._renderOutputAppointedItemView()},_renderOutputAppointedItemView:function(){this.outputAppointedItemView=new i({model:this.model,observer:this.observer}),this.outputAppointedItemView.render()},_outputUse:function(e){this.$("table.sub_form > tbody tr:eq(0)").show(),this.$("table.sub_form > tbody tr:eq(1)").show(),this.$("#selectOutputDataType").val()=="STRING"&&this.$("table.sub_form > tbody #outputDataSection").show(),this.$("#outputUseBtn").addClass("on"),this.$("#outputNotUseBtn").removeClass("on")},_outputNotUse:function(e){this.$("table.sub_form > tbody tr:eq(0)").hide(),this.$("table.sub_form > tbody tr:eq(1)").hide(),this.$("table.sub_form > tbody #outputDataSection").hide(),this.$("#outputUseBtn").removeClass("on"),this.$("#outputNotUseBtn").addClass("on")},_clickAppointedItem:function(e){var t=$(e.currentTarget);t.val()==="true"?$("#outputDataAppointedItem").hide():$("#outputDataAppointedItem").show()},getData:function(){var e=this.$("#outputUseBtn").hasClass("on"),t=this.$('select[name="dataSource"]').val(),n=this.$('input[name="returnAllVariables"]:checked').val(),r=n==="true"?!0:!1,i=this.outputAppointedItemView.getData(),s=this.outputDataTypeView.getData();return this.model.set({useOutput:e,outputDataSourceName:t,returnAllVariables:r}),this.model.set(s),this.model.set(i),this.model},validate:function(){return this.$("#outputUseBtn").hasClass("on")?this.outputDataTypeView.validate():!0}});return u});