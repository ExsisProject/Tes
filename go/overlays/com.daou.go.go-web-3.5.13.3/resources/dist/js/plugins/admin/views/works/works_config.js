define(["jquery","backbone","app","views/circle","hgn!admin/templates/works/works_config","i18n!nls/commons","i18n!admin/nls/admin","jquery.go-sdk","jquery.jstree","jquery.go-popup","jquery.go-orgslide","jquery.go-validation"],function(e,t,n,r,i,s,o){var u={label_ok:s["\uc800\uc7a5"],label_cancel:s["\ucde8\uc18c"],"\uc571 \uc0dd\uc131 \uad8c\ud55c":o["\uc571 \uc0dd\uc131 \uad8c\ud55c"]},a=t.View.extend({initialize:function(){this.model=new t.Model,this.model.url="/ad/api/worksconfig",this.model.fetch({async:!1})},events:{"click span#btn_ok":"_worksConfigSave","click span#btn_cancel":"_worksConfigCancel"},render:function(){return this.$el.empty().html(i({lang:u})),this._renderAdminView(),this.$el},_renderAdminView:function(){var e=["user","position","grade","usergroup"];GO.util.isUseOrgService(!0)&&(e=["user","department","position","grade","duty","usergroup"]),this.adminView=new r({selector:"#admin",isAdmin:!0,isWriter:!0,circleJSON:this.model.get("admin"),nodeTypes:e}),this.adminView.render(),this.adminView.show()},_worksConfigSave:function(t){t.stopPropagation();var n=this,r=n.adminView.getData();n.model.set("admin",r),n.model.save({},{success:function(t,r){r.code=="200"&&(e.goMessage(s["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]),n.render())},error:function(t,n){var r=JSON.parse(n.responseText);r.message!=null?e.goMessage(r.message):e.goMessage(s["\uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."])}})},_worksConfigCancel:function(t){t.stopPropagation();var n=this;e.goCaution(s["\ucde8\uc18c"],s["\ubcc0\uacbd\ud55c \ub0b4\uc6a9\uc744 \ucde8\uc18c\ud569\ub2c8\ub2e4."],function(){n.initialize(),n.render(),e.goMessage(s["\ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."])},s["\ud655\uc778"])}},{attachTo:function(e){var t=new a;return e.empty().append(t.el),t.render(),t}});return a});