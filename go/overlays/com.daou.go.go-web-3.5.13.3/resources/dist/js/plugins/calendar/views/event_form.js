define("calendar/views/event_form",function(require){function o(){var e=r.util.toMoment(new Date).format("YYYY-MM-DD");return{start_date:e,start_time:"00:00",end_date:e,end_time:"00:00",recurrence_code:"","regist?":!0,"editable?":!0,"removable?":!1,"private?":!1,"recurrence?":!1,"show_visibility?":!0,"show_attendees?":!0,"show_location?":!0,"show_description?":!0,"show_reminder?":!0,"allday_event?":!1,"calendar_manager?":!1,"use_asset?":r.isAvailableApp("asset"),label:{title:calLang["\uc77c\uc815\uba85"],privacy:commonLang["\ube44\uacf5\uac1c"],datetime:calLang["\uc77c\uc2dc"],allday:calLang["\uc885\uc77c"],recurrence:calLang["\ubc18\ubcf5"],remove:commonLang["\uc0ad\uc81c"],public_event:calLang["\uc804\uc0ac\uc77c\uc815"],attendees:calLang["\ucc38\uc11d\uc790"],select_attendees:calLang["\ucc38\uc11d\uc790 \uc120\ud0dd"],location:calLang["\uc7a5\uc18c"],desc:commonLang["\ub0b4\uc6a9"],reminder:calLang["\uc54c\ub78c"],modify:commonLang["\uc218\uc815"],add_reminder:calLang["\uc54c\ub78c \ucd94\uac00"],confirm:commonLang["\ud655\uc778"],cancel:commonLang["\ucde8\uc18c"],remove:commonLang["\uc0ad\uc81c"],goto_list:calLang["\uce98\ub9b0\ub354\ub85c \ub3cc\uc544\uac00\uae30"],leave_attendee:calLang["\ucc38\uc11d\uc790\uc5d0\uc11c \ube60\uc9c0\uae30"],remove_event:calLang["\uc77c\uc815 \uc0ad\uc81c\ud558\uae30"],reserving_asset:calLang["\uc608\uc57d\ud558\uae30"],comment:commonLang["\ub313\uae00"],history:commonLang["\ubcc0\uacbd\uc774\ub825"]},msg:{private_event_info:calLang["\ube44\uacf5\uac1c \uc77c\uc815\uc740 \ucc38\uc11d\uc790\ub9cc \ud655\uc778 \uac00\ub2a5\ud569\ub2c8\ub2e4."],public_event_info:calLang["\uc804\uc0ac\uc77c\uc815\uc740 \uc0ac\uc6a9\uc790 \uc804\uccb4\uc5d0\uac8c \ubcf4\uc5ec\uc9d1\ub2c8\ub2e4."]}}}var e=require("jquery"),t=require("underscore"),n=require("backbone"),r=require("app"),i=require("hgn!calendar/templates/form.html"),s=n.View.extend({className:"content_page schedule_form go_renew",type:"regist",variables:{},events:{"click #all_day":"toggleAllday","click #check-recurrence":"showHideRecurrenceSetupLayer","click recurrence-wrap .recur_delete":"removeRecurrence","click #recurrence-wrap .recur_edit":"editRecurrence","click #check-company-event":"checkCompanyEvent","click #attendee-list > li.creat":"showOrgSlider","keyup textarea":"textAreaExpand","change .date-changable":"changeEventTime"},initialize:function(t){this.options=t||{},this.type=this.options.type||"regist",this.variables=o(),e.extend(!0,this.variables,this.options.variables||{}),this.initRender()},initRender:function(){this.$el.empty().append(i(this.variables))},render:function(){},toggleAllday:function(t){var n=e(t.target);$selectDate=this.el.find("select.select_date"),n.is(":checked")?$selectDate.hide():(this.datepickerHelper.updateSelectedTime(new Date),$selectDate.show())},showHideRecurrenceSetupLayer:function(t){function r(){if(this.getRecurrenceCheckbox().is(":checked")){var t=e("#startDate").val(),n=new RecurrenceLayerHelper(t,this._getRecurrenceField().val()),r=this.getRecurrenceCheckbox().offset();r.top=parseInt(r.top)+30,n.setConfirmCallback(function(e,t){this.getRecurrenceWrap().text(""),this.getRecurrenceTextWrap().text("")},this),n.setCancelCallback(this._cancelUpdateRecurrence,this),n.setCloseCallback(this._cancelUpdateRecurrence,this),n.render(r)}else this._removeRecurrence()}if(e(".reserved-asset-item").length>0){var n=this;this.removeReservedAssetItems({confirm:function(){e(".asset-reservation").each(function(t,n){var r=e(n).data("asset-view");r.loadItems(!0)}),n.showHideAssetViews(),r.call(n)},cancel:function(){e(t.currentTarget).prop("checked",!1)}})}else r.call(this),this.showHideAssetViews()},removeReservedAssetItems:function(t){var n=this;typeof t.confirm!="function"&&(t.confirm=function(){}),typeof t.cancel!="function"&&(t.cancel=function(){}),e.goPopup({title:calLang["\uc608\uc57d \ucde8\uc18c"],message:calLang["\uc77c\uc815 \ubcc0\uacbd\uc2dc \uc790\uc0b0 \uc608\uc57d \ucde8\uc18c \uba54\uc2dc\uc9c0"],modal:!0,buttons:[{btext:commonLang["\ud655\uc778"],btype:"confirm",callback:function(){require(["calendar/views/asset"],function(e){e.cancelReservationAll().done(function(){t.confirm.call(n)})})}},{btext:commonLang["\ucde8\uc18c"],btype:"cancel",callback:e.proxy(t.cancel,this)}]})},showHideAssetViews:function(){function t(e){var e=this.datepickerHelper.getCurrentTimeInfo();return r.util.isSameDate(e.startTime,e.endTime)?this.el.find("#all_day").is(":checked")?!1:this.el.find("#check-recurrence").is(":checked")?!1:!0:!1}if(!r.isAvailableApp("asset"))return;t.call(this)?e("#asset-list-row").show():e("#asset-list-row").hide()},getRecurrenceCheckbox:function(){return e("#check-recurrence")},getRecurrenceWrap:function(){return e("#recurrence-wrap input[name=recurrence]")},getRecurrenceTextWrap:function(){return e("#recurrence-text")}});return s});