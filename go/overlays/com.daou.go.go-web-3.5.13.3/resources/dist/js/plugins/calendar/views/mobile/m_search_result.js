(function(){define(["jquery","backbone","app","i18n!nls/commons","i18n!calendar/nls/calendar","views/mobile/header_toolbar","hgn!calendar/templates/mobile/m_search_result","hgn!calendar/templates/mobile/m_search_result_unit","calendar/collections/mobile/search_result","jquery.go-validation","GO.util"],function(e,t,n,r,i,s,o,u,a){var f={no_result:r["\uac80\uc0c9\uacb0\uacfc\uc5c6\uc74c"],pull_down:r["\uc5c5\ub370\uc774\ud2b8\ud558\uc2dc\ub824\uba74 \uc544\ub798\ub85c \ub2f9\uae30\uc138\uc694."],pull_up:r["\ub354 \ubcf4\ub824\uba74 \uc704\ub85c \ub2f9\uae30\uc138\uc694"],keyword:r["\uac80\uc0c9\uc5b4"]},l=t.View.extend({unbindEvent:function(){this.$el.off("vclick",'a[data-btntype="resultEventWrap"]'),this.$el.off("vclick","a[data-btn='paging']")},bindEvent:function(){this.$el.on("vclick",'a[data-btntype="resultEventWrap"]',e.proxy(this.moveEvent,this)),this.$el.on("vclick","a[data-btn='paging']",e.proxy(this.goPaging,this))},initialize:function(){this.headerToolbarView=s,this.offset=10},moveEvent:function(t){t.preventDefault();var r=e(t.currentTarget),s=r.attr("data-calendarid"),o=r.attr("data-eventid");n.router.navigate("calendar/"+s+"/event/"+o+"/"+decodeURIComponent(i["\ub0b4 \uc77c\uc815"]),{trigger:!0,pushState:!0})},goPaging:function(t){GO.EventEmitter.trigger("common","layout:scrollToTop",this),t.stopPropagation();var n=e(t.currentTarget).attr("data-direction"),r=this.collection.page.page||0;return n=="prev"&&r>0?r--:n=="next"&&r++,e(t.currentTarget).parents(".paging").remove(),this.renderList(r),!1},makeTemplete:function(e){var t=e.collection,n=function(){if(this.timeType=="allday")return GO.util.isSameDate(this.startTime,this.endTime)?GO.util.basicDate2(this.startTime):GO.util.basicDate2(this.startTime)+" ~ "+GO.util.basicDate2(this.endTime);var e,t;return GO.util.isSameDate(this.startTime,this.endTime)?(e=GO.util.basicDate(this.startTime),t=GO.util.hourMinute(this.endTime)):(e=GO.util.basicDate(this.startTime),t=GO.util.basicDate(this.endTime)),e+" ~ "+t},r;return r=u({dataSet:t.toJSON(),lang:f,parseTimeType:n}),r},renderList:function(e){GO.util.appLoading(!0);var t=this,n=GO.util.getSearchParam(window.MsearchParam),r={page:e||0,offset:this.offset,stype:n.stype,keyword:n.keyword};this.collection=a.getCollection(r),this.collection.on("reset",function(e,r){var i=t.makeTemplete({collection:t.collection}),s=o({keyword:n.keyword,searchlistUnit:i,lang:f});t.$el.html(s);var u=GO.util.mPaging(e);t.$el.find("dl").after(u),GO.util.appLoading(!1)})},render:function(){this.unbindEvent(),this.bindEvent(),this.renderList(GO.router.getSearch("page")||0),this.headerToolbarView.render({isClose:!0,title:r["\uac80\uc0c9\uacb0\uacfc"],isWriteBtn:!0,writeBtnCallback:function(){n.router.navigate("calendar/write/"+GO.util.shortDate(new Date),{trigger:!0,pushState:!0})}})}},{__instance__:null,create:function(){return this.__instance__=new this.prototype.constructor({el:e("#content")}),this.__instance__},render:function(){var e=this.create(),t=arguments.length>0?Array.prototype.slice.call(arguments):[];return this.prototype.render.apply(e,t)}});return l})}).call(this);