(function(){define(["jquery","app","hgn!calendar/templates/_regist_reminder","i18n!nls/commons","i18n!calendar/nls/calendar","jquery.go-popup"],function(e,t,n,r,i){var s=5,o=30,u=1e4,a={minute:"minute",hour:"hour",day:"day",week:"week"},f={noti:"notification",email:"email"},l=Array.prototype.slice,c=function(){var c=function(t,n,r){this.reminders=n||[],this.editable=typeof r=="undefined"?!0:r,this.el=t,this.$el=e(this.el),this.count=0,this.delegateEvents(),this._initReminder(this.reminders)};return c.prototype={delegateEvents:function(){this.$el.on("click.form-reminder","li > .btn_wrap",e.proxy(this.removeReminder,this)),this.$el.on("keyup.form-reminder","input[name^=reminder_value_]",e.proxy(this._validateTime,this))},addReminder:function(o,u,l){var c="";if(this.count>=s){e.goAlert(t.i18n(i["\uc54c\ub78c \uc124\uc815\uc740 {{max}}\uac1c\uae4c\uc9c0 \uac00\ub2a5\ud569\ub2c8\ub2e4"],"max",s));return}return c=n({reminder_index:this.count,reminder_value:o||"30","editable?":this.editable,"type_minute?":u===a.minute,"type_hour?":u===a.hour,"type_day?":u===a.day,"type_week?":u===a.week,"method_noti?":l===f.noti,"method_email?":l===f.email,label:{remove:r["\uc0ad\uc81c"],add_reminder:i["\uc54c\ub78c \ucd94\uac00"],type_minute:i["\ubd84\uc804"],type_hour:i["\uc2dc\uac04\uc804"],type_day:i["\uc77c\uc804"],type_week:i["\uc8fc\uc804"],method_noti:i["\ud478\uc2dc \uc54c\ub78c"],method_email:i["\uba54\uc77c \uc54c\ub78c"]}}),this.$el.append(c),this.calculateCount(),this.$el.find(":last-child")},calculateCount:function(){this.count=this.$el.find("li").length},getIndex:function(e){return parseInt(this._getReminderLIElement(e).attr("data-index"))},removeReminder:function(t){var n=this._getReminderLIElement(t.target);e(n).remove(),this.calculateCount(),this.$el.trigger("removed:reminder",[n,this.getIndex(t.target)])},getReminderCount:function(){return this.count},on:function(){var t=l.call(arguments);return e.fn.on.apply(this.el,t)},off:function(){var t=l.call(arguments);return e.fn.off.apply(this.el,t)},_initReminder:function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t].time||"",i=e[t].type||"",s=e[t].method||"";this.addReminder(r,i,s)}},_getReminderLIElement:function(t){return e(t).parents("li")},_validateTime:function(t){var n=e(t.currentTarget),r=n.val(),i=parseInt(r);return!/^[\-\+]?[\d\,]*\.?[\d]*$/.test(r)||i<0?(n.val(o),!1):i>u?(n.val(u),!1):!0}},c.DEFAULT_VALUE=o,c.MAX_VALUE=u,c.REMINDER_MAX_LENGTH=s,c.REMINDER_TYPE=a,c.REMINDER_METHOD=f,c}();return c})}).call(this);