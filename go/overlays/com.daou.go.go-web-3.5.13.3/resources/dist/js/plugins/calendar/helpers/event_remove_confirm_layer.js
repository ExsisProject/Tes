(function(){define(["jquery","underscore","calendar/libs/util","hgn!calendar/templates/_event_remove","i18n!nls/commons","i18n!calendar/nls/calendar","jquery.go-popup","jquery.go-preloader"],function(e,t,n,r,i,s){var o=function(){var o=function(e,n,i){if(!t.contains(["leave","remove","update"],n))throw new Error("\uc798\ubabb\ub41c \uc778\uc790\uc785\ub2c8\ub2e4.");this.model=e,this.isRecurrence=typeof i=="undefined"?!!this.model.get("recurrence")||!1:i,this.type=n,this.callbacks={},this.removeDescMsg=s["\uc77c\uc815\uc744 \uc0ad\uc81c\ud558\uc2dc\uba74 \ubaa8\ub4e0 \ucc38\uc11d\uc790\uc758 \uc77c\uc815\uc5d0\uc11c \uc0ac\ub77c\uc9d1\ub2c8\ub2e4. \ucc38\uc11d\uc790\uc5d0\uc11c \ube60\uc9c0\uace0 \uc2f6\ub2e4\uba74, \ucc38\uc11d\uc790 \uc815\ubcf4\ub97c \uc218\uc815\ud558\uc138\uc694"],this.model.isCompanyEvent()?this.removeDescMsg=s["\uc804\uc0ac\uc77c\uc815 \uc0ad\uc81c \uba54\uc2dc\uc9c0"]:this.model.isAlone()&&(this.removeDescMsg=s["\ub098\ud63c\uc790 \uc77c\uc815 \uc0ad\uc81c \uba54\uc2dc\uc9c0"]),this.template=r({"recurrence?":this.isRecurrence,"remove?":this.isRemoveType(),"leave?":this.isLeaveType(),"update?":this.isUpdateType(),label:{remove_only:this.isRemove?s["\uc774 \uc77c\uc815\ub9cc \uc0ad\uc81c"]:s["\uc774 \uc77c\uc815\ub9cc \uc218\uc815"],remove_after:this.isRemove?s["\uc774 \uc77c\uc815\ubd80\ud130 \uc774\ud6c4 \uc77c\uc815 \ubaa8\ub450 \uc0ad\uc81c"]:s["\uc774 \uc77c\uc815\ubd80\ud130 \uc774\ud6c4 \uc77c\uc815 \ubaa8\ub450 \uc218\uc815"],remove_all:this.isRemove?s["\uc804\uccb4 \ubc18\ubcf5 \uc77c\uc815 \uc0ad\uc81c"]:s["\uc804\uccb4 \ubc18\ubcf5 \uc77c\uc815 \uc218\uc815"]},msg:{remove_desc:this.removeDescMsg,leave_desc:s["\ucc38\uc11d\uc790\uc5d0\uc11c \ube60\uc9c0\uba74 \ub0b4 \uc77c\uc815\uc5d0\uc11c \ub178\ucd9c\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ud558\uc9c0\ub9cc, \ub2e4\ub978 \ucc38\uc11d\uc790\uc758 \uc77c\uc815\uc5d0\uc11c\ub294 \ud574\ub2f9 \uc77c\uc815\uc774 \uacc4\uc18d \ubcf4\uc5ec\uc9d1\ub2c8\ub2e4.\uc704 \uc77c\uc815\uc758 \ucc38\uc11d\uc790\uc5d0\uc11c \ube60\uc9c0\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"],recurrence_notice:s["\ud604\uc7ac '\ubc18\ubcf5\uc77c\uc815'\uc73c\ub85c \ub4f1\ub85d\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4."]}})};return o.prototype={render:function(){var t={leave:"layer_entry",remove:"layer_schedule_del",update:"layer_schedule_repeat"}[this.type],n={leave:s["\ucc38\uc11d\uc790\uc5d0\uc11c \ube60\uc9c0\uae30"],remove:s["\uc77c\uc815 \uc0ad\uc81c"],update:s["\ubc18\ubcf5 \uc77c\uc815 \uc218\uc815"]}[this.type];this.popupEl=e.goPopup({pclass:"layer_normal "+t,width:-1,header:n,contents:this.template,closeCallback:e.proxy(this._close,this),buttons:[{btype:"confirm",btext:i["\ud655\uc778"],callback:e.proxy(this._confirm,this),autoclose:!1},{btype:"cancel",btext:i["\ucde8\uc18c"],callback:e.proxy(this._cancel,this)}]})},setRecurrence:function(e){return this.isRecurrence=e,this},setCallbacks:function(t){e.extend(!0,this.callbacks,t||{})},isRemoveType:function(){return this.type==="remove"},isLeaveType:function(){return this.type==="leave"},isUpdateType:function(){return this.type==="update"},_confirm:function(){var t=e.goPreloader();t.render();var r=this,i=e.extend(!0,{success:function(e,i){t.release(),r.popupEl.close(),n.goToCalendar()},error:function(){t.release()}},this.callbacks);if(this.isRecurrence){var o=e(this.popupEl).find("input[name=remove_option]:checked"),u=o.val();if(o.length<=0)return e.goError(s["\uc218\uc815(\uc0ad\uc81c) \uc635\uc158\uc744 \uc120\ud0dd\ud574 \uc8fc\uc2ed\uc2dc\uc624"]),this;this.model.setRecurChangeType(u)}return this.isRemoveType()?this.model.destroy(i):this.model.save({},i),this},_cancel:function(){this.callbacks.hasOwnProperty("complete")&&this.callbacks.complete.call(this)}},o}();return o})}).call(this);