(function(){define(["jquery","backbone","app","community/collections/community_rank","hgn!community/templates/community_rank","hgn!community/templates/community_rank_item","hgn!community/templates/community_detail","community/models/community_popup_info","i18n!nls/commons","i18n!community/nls/community","i18n!board/nls/board","jquery.go-grid"],function(e,t,n,r,i,s,o,u,a,f,l){var c={all_post:f["\uc804\uccb4 \uae00"],community_member:f["\ud68c\uc6d0"],master:f["\ub9c8\uc2a4\ud130"],moderator:f["\ubd80\ub9c8\uc2a4\ud130"],description:f["\uc18c\uac1c"],create_at:f["\uac1c\uc124\uc77c"],all_communities_info:f["\uc804\uccb4 \ucee4\ubba4\ub2c8\ud2f0 \uc815\ubcf4"],most_members:f["\uac00\uc7a5 \ud68c\uc6d0\uc774 \ub9ce\uc740 \ucee4\ubba4\ub2c8\ud2f0"],most_posts:f["\uac00\uc7a5 \uae00\uc774 \ub9ce\uc740 \ucee4\ubba4\ub2c8\ud2f0"],most_created_at:f["\uac00\uc7a5 \ucd5c\uadfc\uc5d0 \uac1c\uc124\ub41c \ucee4\ubba4\ub2c8\ud2f0"],"private":a["\ube44\uacf5\uac1c"],date_of_opening:f["\uac1c\uc124\uc77c\uc790"],cnt_person:f["\uba85"],cnt_posts:f["\uac1c"],non_member:f["\ube44\uba64\ubc84"],go_to_community:f["\ucee4\ubba4\ub2c8\ud2f0 \uc785\uc7a5\ud558\uae30"],join_community:f["\ucee4\ubba4\ub2c8\ud2f0 \uac00\uc785\ud558\uae30"]},h=t.View.extend({el:".comm_side",events:function(){},initialize:function(){this.unbindEvent(),this.bindEvent(),this.communityRankcollection=null},bindEvent:function(){this.$el.on("click","li[data-id='memberCount']",e.proxy(this.changeRank,this)),this.$el.on("click","li[data-id='postCount']",e.proxy(this.changeRank,this)),this.$el.on("click","li[data-id='createdAt']",e.proxy(this.changeRank,this))},unbindEvent:function(){this.$el.off("click","li[data-id='memberCount']"),this.$el.off("click","li[data-id='postCount']"),this.$el.off("click","li[data-id='createdAt']")},moveCommunityAction:function(e){var t=e.attr("data-communityid"),r=e.attr("data-boardType"),i=e.attr("data-boardId"),s=e.attr("data-postId"),o=e.attr("class");if(r=="CLASSIC")n.router.navigate("community/"+t+"/board/"+i+"/post/"+s,!0);else if(r=="STREAM")n.router.navigate("community/"+t+"/board/"+i+"/post/"+s+"/stream",!0);else{if(o=="private")return;n.router.navigate("community/"+t+"/board/"+i,!0)}},render:function(e){var t=1,n=function(e){return GO.util.basicDate2(this.createdAt)},o=function(){if(this.id!=null)return t++},u=this,a=function(){return e=="postCount"?f["\uac00\uc7a5 \uae00\uc774 \ub9ce\uc740 \ucee4\ubba4\ub2c8\ud2f0"]:e=="createdAt"?f["\uac00\uc7a5 \ucd5c\uadfc\uc5d0 \uac1c\uc124\ub41c \ucee4\ubba4\ub2c8\ud2f0"]:f["\uac00\uc7a5 \ud68c\uc6d0\uc774 \ub9ce\uc740 \ucee4\ubba4\ub2c8\ud2f0"]};if(e==undefined||e==null)e="memberCount";this.communityRankcollection=r.create(),u.$el.html(i({lang:c,showSelectedOption:a,selectedSideOption:e})),this.communityRankcollection.fetch({data:{page:0,offset:10,property:e},statusCode:{403:function(){GO.util.error("403",{msgCode:"400-board"})},404:function(){GO.util.error("404",{msgCode:"400-board"})},500:function(){GO.util.error("500")}},async:!0,success:function(e){u.$el.find("#rank_list").html(s({communityRankData:e.toJSON(),lang:c,basicDate:n,cnt:o}))}})},changeRank:function(t){var n=e(t.currentTarget).attr("data-id");this.render(n)}});return{render:function(e){var t=new h;return t.render(e)}}})}).call(this);