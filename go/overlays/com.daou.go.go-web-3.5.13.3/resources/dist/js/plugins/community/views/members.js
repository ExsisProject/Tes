(function(){define(["jquery","backbone","app","hgn!community/templates/members","i18n!nls/commons","i18n!community/nls/community","board/views/board_title","community/models/info","jquery.go-grid","jquery.placeholder"],function(e,t,n,r,i,s,o,u){var a={community_member:s["\uba64\ubc84 \uc804\uccb4"],community_member_list:s["\ucee4\ubba4\ub2c8\ud2f0 \uc804\uccb4 \uba64\ubc84 \ub9ac\uc2a4\ud2b8"],name:i["\uc774\ub984"],dept:i["\uc18c\uc18d"],email:i["\uc774\uba54\uc77c"],count:i["\uba85"],join_date:s["\uac00\uc785 \uc2e0\uccad\uc77c"],post_count:s["\uac8c\uc2dc \uae00 \uc218"],name:i["\uc774\ub984"]},f=t.View.extend({el:"#content",manage:!1,events:{},initialize:function(e){this.options=e||{},this.unbindEvent(),this.bindEvent(),this.dataTable=null,this.communityId=this.options.communityId,this.status==undefined?this.status="online":this.status=this.options.status},bindEvent:function(){this.$el.on("click","#memberSearch",e.proxy(this.search,this)),this.$el.on("keydown","#memberSearch2 input",e.proxy(this.searchKeyboardEvent,this))},unbindEvent:function(){this.$el.off("click","#memberSearch"),this.$el.off("keydown","#memberSearch2 input")},render:function(){var t=this,n=u.read({communityId:this.communityId}).toJSON(),i=GO.config("mailExposure");this.$el.html(r({lang:a,mailExposure:i})),o.render({el:".content_top",dataset:{name:n.name},isCommunity:!0}),e("input[placeholder], textarea[placeholder]").placeholder();var s=[{mData:"name",sWidth:"100px",bSortable:!0},{mData:"departmentName",bSortable:!0},{mData:"email",bSortable:!0},{mData:"createdAt",bSortable:!0,fnRender:function(e){return GO.util.basicDate2(e.aData.createdAt)}},{mData:"postCount",bSortable:!0,sWidth:"100px"}];i||s.splice(2,1),this.dataTable=e.goGrid({el:"#memberList",url:GO.contextRoot+"api/community/"+this.communityId+"/member/"+this.status,method:"get",defaultSorting:[],params:{property:"memberType",direction:"asc"},columns:s,fnDrawCallback:function(e,n){t.renderToolbar(n._iRecordsTotal)}})},renderToolbar:function(e){this.$el.find("#toolBar #memberTotalElements").html(e),this.$el.find(".tool_bar .custom_header").html(this.$el.find("#toolBar").html())},searchKeyboardEvent:function(e){e.keyCode==13&&this.search()},search:function(){var t=this.$el.find('.table_search input[type="text"]'),r=t.val();if(!e.goValidation.isCheckLength(1,32,r))return e.goMessage(n.i18n(s["0\uc790\uc774\uc0c1 0\uc774\ud558 \uc785\ub825\ud574\uc57c\ud569\ub2c8\ub2e4."],{arg1:"1",arg2:"32"})),!1;this.dataTable.tables.search(this.$el.find(".table_search select").val(),r)}});return{render:function(e,t){var n=new f({communityId:e,status:t});return n.render()}}})}).call(this);