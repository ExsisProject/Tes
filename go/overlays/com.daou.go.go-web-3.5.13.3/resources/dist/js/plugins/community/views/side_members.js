(function(){define(["jquery","backbone","app","community/collections/members","hgn!community/templates/side_members","hgn!community/templates/side_members_item","i18n!nls/commons","i18n!community/nls/community","GO.util","jquery.nanoscroller"],function(e,t,n,r,i,s,o,u){var a={community_member_join:u["\uac00\uc785 \uba64\ubc84"],community_member_all:u["\uc804\uccb4 \ubcf4\uae30"],name_desc:o["\ud504\ub85c\ud544 \ubcf4\uae30"],community_invite:u["\ucd08\ub300\ud558\uae30"],community_leave:u["\ud0c8\ud1f4\ud558\uae30"],community_master:u["\ub9c8\uc2a4\ud130"]},f=t.View.extend({el:"#sideLnb",initialize:function(e){this.options=e||{},this.communityId=this.options.communityId,this.moreMemberStartNum=0},render:function(){var t=this,n=r.create();n.setVariables(this.communityId),n.fetch({async:!0,success:function(r){var o=r.toJSON()||[],u=s({dataset:o.length>10?o.slice(0,10):o,lang:a,isDataset:o.length?!0:!1,isMemberTypeMaster:function(){return this.memberType=="MASTER"}}),f=i({lang:a,total:r.size()});t.$el.empty().append(f).find("#communityMembers").append(u),o.length>10&&(t.$el.find("ul#communityMembers").addClass("content").css("width","auto").wrap('<div class="nano" style="height:240px"/>'),t.$el.find(".nano").nanoScroller(),e(".nano").on("scrollend",function(r){t.moreMemberStartNum=parseInt(t.moreMemberStartNum)+10;var i=t.moreMemberStartNum,o=n.toJSON().slice(t.moreMemberStartNum,i+10),u=s({dataset:o,lang:a,isMemberTypeMaster:function(){return this.memberType=="MASTER"}});e("#communityMembers").append(u),t.$el.find(".nano").nanoScroller({destroy:!0}),t.$el.find(".nano").nanoScroller()}));var l=e("#side").find(".select_nav").attr("data-memberStatus");l=="WAIT"&&t.$el.find("#memberInvite").remove(),l=="NONE"&&t.$el.find("ul.side_depth:has(li.new)").remove()}})}});return{render:function(e){var t=new f({communityId:e});return t.render()}}})}).call(this);