(function(){define(["jquery","backbone","app","community/models/create","hgn!community/templates/create","i18n!nls/commons","i18n!community/nls/community","jquery.go-validation"],function(e,t,n,r,i,s,o){var u=t.View.extend({className:"content_page",manage:!1,events:{},initialize:function(){this.unbindEvent(),this.bindEvent()},unbindEvent:function(){this.$el.off("click","span#btn_ok"),this.$el.off("click","span#btn_cancel"),this.$el.off("submit")},bindEvent:function(){this.$el.on("click","span#btn_ok",e.proxy(this.communityCreateSave,this)),this.$el.on("click","span#btn_cancel",e.proxy(this.communityCreateCancel,this)),this.$el.on("submit","",e.proxy(this.preventSubmit,this))},render:function(){return this.$el.empty().html(i({label_ok:s["\ud655\uc778"],label_cancel:s["\ucde8\uc18c"],label_public:o["\uacf5\uac1c"],label_private:s["\ube44\uacf5\uac1c"],label_publicFlag:o["\uacf5\uac1c\uc5ec\ubd80"],label_name:o["\ucee4\ubba4\ub2c8\ud2f0 \uba85"],label_desc:o["\uc18c\uac1c"],label_communityCreate:o["\ucee4\ubba4\ub2c8\ud2f0 \uac1c\uc124"],label_communityDesc:o["\ucee4\ubba4\ub2c8\ud2f0 \uc124\uba85"]})),this},preventSubmit:function(e){return e.preventDefault(),!1},communityCreateSave:function(){this.model=new r;var t=this,i=this.$el.find("form[name=formCommunityCreate]"),o=i.find('input[name="name"]'),u=i.find('[name="description"]');e.each(i.serializeArray(),function(e,n){t.model.set(n.name,n.value,{silent:!0})});var a=function(t,n){return e.goError(t,e(n).parent()),n&&n.focus().addClass("error"),!1};if(!e.goValidation.isCheckLength(2,64,e.trim(this.model.get("name"))))return a(n.i18n(s["0\uc790\uc774\uc0c1 0\uc774\ud558 \uc785\ub825\ud574\uc57c\ud569\ub2c8\ub2e4."],{arg1:"2",arg2:"64"}),o),!1;if(!e.goValidation.isCheckLength(0,124,e.trim(this.model.get("description"))))return a(n.i18n(s["0\uc790\uc774\uc0c1 0\uc774\ud558 \uc785\ub825\ud574\uc57c\ud569\ub2c8\ub2e4."],{arg1:"0",arg2:"124"}),u),!1;this.model.save({},{success:function(e,t){var r=e.toJSON().id;t.code=="200"&&n.router.navigate("community/"+r,!0)},error:function(t,n){var r=JSON.parse(n.responseText);e.goError(r.message)}})},communityCreateCancel:function(){n.router.navigate("community",!0)}});return u})}).call(this);