(function(){define(["jquery","backbone","app","hgn!community/templates/community_all","hgn!community/templates/community_all_null","i18n!nls/commons","i18n!community/nls/community","i18n!board/nls/board","jquery.go-grid","jquery.placeholder"],function(e,t,n,r,i,s,o,u){var a={communityall:o["\uc804\uccb4 \ucee4\ubba4\ub2c8\ud2f0"],community_name:o["\ucee4\ubba4\ub2c8\ud2f0 \uba85"],community:s["\ucee4\ubba4\ub2c8\ud2f0"],search:o["\uac80\uc0c9"],all_post:o["\uc804\uccb4 \uae00"],community_member:o["\ud68c\uc6d0\uc218"],new_post:o["\uc0c8 \uae00 \ub4f1\ub85d"],community_join:o["\uac00\uc785"],total:o["\ucd1d"],count:u["\uac1c"],community_null:o["\uc0dd\uc131\ub41c \ucee4\ubba4\ub2c8\ud2f0\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."],community_create:o["\ucee4\ubba4\ub2c8\ud2f0 \ub9cc\ub4e4\uae30"],community_create_at:o["\uac1c\uc124\uc77c"],community_master:o["\ub9c8\uc2a4\ud130"],placeholder_search:s["\ud50c\ub808\uc774\uc2a4\ud640\ub354\uac80\uc0c9"]},f=t.View.extend({el:".tab_contents",events:{},initialize:function(){},render:function(){return this.$el.html(r({lang:a})),this.$el.find("input[placeholder]").placeholder(),this.renderDataTables()},renderDataTables:function(){var t=this,n=GO.locale=="ja"?"120px":"70px",r=function(n){var r=e(n.currentTarget),i=r.attr("data-row"),a=t.$el.find("#communityDetail"+i);if(a.length)a.css("display")=="none"?(a.slideDown(100),e(r).find(".ic_open_s").addClass("ic_close_s").removeClass("ic_open_s").attr("title",s["\uc811\uae30"])):(e(r).find(".ic_close_s").addClass("ic_open_s").removeClass("ic_close_s").attr("title",s["\ud3bc\uce58\uae30"]),a.slideUp(100));else{e(r).find(".ic_open_s").addClass("ic_close_s").removeClass("ic_open_s");if(typeof u.tables.fnGetData=="function"){var f=u.tables.fnGetData(),l=f[i],c=GO.util.basicDate2(l.createdAt),h=['<tr class="detail_info" id="communityDetail',i,'"><td colspan="6"><ul><li class="no_line"><span class="photo"><img alt="\ucd08\uc0c1\ud654" src="'+l.thumbSmall+'" /></span>','<p class="info">'+l.description+'</p><span class="date">'+o["\uac1c\uc124\uc77c"]+" : "+c+'</span><span class="manager">'+o["\ub9c8\uc2a4\ud130"]+" : "+l.masterUser+"</span></li></ul></td></tr>"];r.parents("tr:eq(0)").after(h.join(""))}}},u=e.goGrid({el:"#allCommunity",url:GO.contextRoot+"api/community/list/all",emptyMessage:i({lang:a}),method:"get",defaultSorting:[],params:{property:"createdAt",direction:"desc"},columns:[{mData:"name",bSortable:!0,sClass:"align_l",fnRender:function(e){var t=['<span class="comm" data-id="',e.aData.id,'" data-communityStatus="',e.aData.status,'" data-memberType="',e.aData.memberType,'" data-memberStatus="',e.aData.memberStatus,'" data-publicFlag="',e.aData.publicFlag,'">'+_.escape(e.aData.name)];return e.aData.newCommunity&&t.push('&nbsp;<span class="ic_classic ic_new" title="'+o["\uc0c8\ucee4\ubba4\ub2c8\ud2f0"]+'"></span>'),e.aData.publicFlag||t.push('&nbsp;<span class="ic_classic ic_lock" title="'+s["\ube44\uacf5\uac1c"]+'"></span>'),t.push("</span>"),t.join("")}},{mData:"memberCount",bSortable:!0,sWidth:"80px"},{mData:"masterUser",mRender:function(e){return e?e:""},bSortable:!0,sWidth:"120px",fnRender:function(e){return e.aData.masterUser?'<span class="master">'+e.aData.masterUser+"</span></td>":'<span class="master"></span></td>'}},{mData:null,bSortable:!1,sWidth:n,fnRender:function(e){var t=['<span class="btn_fn7 communityAction">'];return e.aData.status=="WAIT"?e.aData.memberStatus=="ONLINE"?t.push('<span class="txt_caution">'+o["\uac1c\uc124\ucde8\uc18c"]+"</span>"):t.push('<span class="txt">'+o["\uac1c\uc124\ub300\uae30"]+"</span>"):e.aData.memberStatus=="ONLINE"?t.push('<span class="txt_caution">'+o["\ud0c8\ud1f4"]+"</span>"):e.aData.memberStatus=="WAIT"?t.push('<span class="txt">'+o["\uac00\uc785\ucde8\uc18c"]+"</span>"):t.push('<span class="txt_b">'+o["\uac00\uc785"]+"</span>"),t.push("</span></td>"),t.join("")}}],fnDrawCallback:function(e,n){t.renderToolbar(n._iRecordsTotal)}});return u},renderToolbar:function(e){this.$el.find("#toolBar #communityTotalElements").html(e),this.$el.find(".tool_bar .custom_header").append(this.$el.find("#toolBar").show())}});return{render:function(){var e=new f;return e.render()}}})}).call(this);