(function(){define(["jquery","backbone","app","approval/views/apprform/appr_company_folder_tree","hgn!approval/templates/side_company_doc_folder","i18n!nls/commons","i18n!approval/nls/approval","GO.util"],function(e,t,n,r,i,s,o){var u={company_docfolder:o["\uc804\uc0ac \ubb38\uc11c\ud568"],new_approval:o["\uc0c8 \uacb0\uc7ac \uc9c4\ud589"],approval:o["\uacb0\uc7ac\ud558\uae30"],user_docfolder:o["\uac1c\uc778 \ubb38\uc11c\ud568"],appr_wait_doc:o["\uacb0\uc7ac \ub300\uae30 \ubb38\uc11c"],appr_sched_doc:o["\uacb0\uc7ac \uc608\uc815 \ubb38\uc11c"],draft_docfolder:o["\uae30\uc548 \ubb38\uc11c\ud568"],appr_docfolder:o["\uacb0\uc7ac \ubb38\uc11c\ud568"],viewer_docfolder:o["\ucc38\uc870 \ubb38\uc11c\ud568"],reception_docfolder:o["\uc218\uc2e0 \ubb38\uc11c\ud568"],dept_rcpt:o["\ubd80\uc11c \uc218\uc2e0\ud568"],dept_folder:o["\ubd80\uc11c \ubb38\uc11c\ud568"],sub_dept_folder:o["\ud558\uc704 \ubd80\uc11c \ubb38\uc11c\ud568"],favorite_title:s["\uc990\uaca8\ucc3e\uae30"],no_dept:o["\uc18c\uc18d\ub41c \ubd80\uc11c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694."],user_config:o["\uacb0\uc7ac\ud658\uacbd\uc124\uc815"],confirm:s["\ud655\uc778"],cancel:s["\ucde8\uc18c"],collapse:s["\uc811\uae30"],expand:s["\ud3bc\uce58\uae30"]},a=t.Model.extend({url:"/api/approval/companyfolder/ismanager"}),f=GO.session("id")+"-docfolder-folder-toggle",l=t.View.extend({companyDocTreeView:null,el:"#side",events:{"click section#companyDocSide span.ic_side, section#companyDocSide span.txt":"slideToggle"},initialize:function(){this.$el.off(),this.companyFolderManager=new a,this.companyFolderManager.fetch({async:!1,statusCode:{403:function(){GO.util.error("403")},404:function(){GO.util.error("404",{msgCode:"400-common"})},500:function(){GO.util.error("500")}}}),this.isCompanyFolderManager=this.companyFolderManager.toJSON().manager},render:function(e){var t=this.getStoredCategory(f),n=i({lang:u,appName:GO.util.getAppName("docfolder"),isOpen:_.isUndefined(t)?!0:t});this.$el.html(n),this.sideCompanyDocRender(e),this.undelegateEvents(),this.delegateEvents()},sideCompanyDocRender:function(e){var t=this;this.companyDocTreeView=new r({isAdmin:!1,folderId:e,disabledSelect:!1,apiCommonUrl:"api/docfolder/sidetree",treeElementId:"companyDocTree",selectCallback:function(e){t.goCompanyDocList(e.id)}}),this.companyDocTreeView.render()},setSelectFolderStyle:function(e){this.companyDocTreeView&&this.companyDocTreeView._highlightStyle(e)},sideCompanyDocManager:function(){return this.isCompanyFolderManager},goCompanyDocList:function(t){var r="/docfolder/"+t+"/documents";n.router.navigate(r,{trigger:!0}),e("html, body").animate({scrollTop:0})},slideToggle:function(t){var n=e(t.currentTarget),r=n.parents("h1:first"),i=r.find(".ic_side");r.hasClass("folded")?(r.removeClass("folded"),i.attr("title",u.collapse)):(r.addClass("folded"),i.attr("title",u.expand)),r.next("ul").slideToggle("fast");var s=!r.hasClass("folded");this.storeCategoryIsOpen(f,s)},release:function(){this.$el.off(),this.$el.empty()},getStoredCategory:function(e){return GO.util.store.get(e)},storeCategoryIsOpen:function(e,t){GO.util.store.set(e,t)}},{__instance__:null,getInstance:function(){return this.__instance__=new this.prototype.constructor,this.__instance__},getCompanyDocManageble:function(){return this.__instance__===null&&(this.__instance__=new this.prototype.constructor),this.__instance__.sideCompanyDocManager()}});return l})}).call(this);