(function(){define(["jquery","underscore","backbone","app","approval/views/document/actcopy_detail","hgn!approval/templates/document/actcopy_list","i18n!nls/commons","i18n!approval/nls/approval","jquery.jstree"],function(e,t,n,r,i,s,o,u){var a=n.Model.extend({initialize:function(e){this.options=e||{}},url:function(){return"/api/approval/actcopyform/"+this.id},getYear:function(){var e=this.attributes.preserveDurationInYear;return e==0?u["\uc601\uad6c"]:r.i18n(o["{{arg1}}\ub144"],{arg1:e})},setId:function(e){this.id=e}}),f=n.Collection.extend({initialize:function(e){this.options=e||{}},model:n.Model.extend(),setKeyword:function(e){this.keyword=e},url:function(){return t.isUndefined(this.keyword)||t.isEmpty(this.keyword)?"/api/approval/actcopyform":"/api/approval/actcopyform?"+e.param({keyword:this.keyword})}});lang={"\uc0c1\uc138\uc815\ubcf4":u["\uc0c1\uc138\uc815\ubcf4"],"\uc591\uc2dd\uc81c\ubaa9":u["\uc591\uc2dd\uc81c\ubaa9"],"\ubb38\uc11c\ubd84\ub958":u["\ubb38\uc11c\ubd84\ub958"],"\ubcf4\uc874\uc5f0\ud55c":u["\ubcf4\uc874\uc5f0\ud55c"],"\uc124\uba85":u["\uc124\uba85"],"\uac80\uc0c9":o["\uac80\uc0c9"],"\uc591\uc2dd\uba85":u["\uc591\uc2dd\uba85"]};var l=n.View.extend({el:".go_popup .content",events:{"click span.txt":"selectedForm","keyup #actcopySearchKeyWord":"searchActcopyByKeyword"},initialize:function(e){this.options=e||{},this.model=new a,this.collection=new f,this.collection.fetch({async:!1})},render:function(){var e=s({lang:lang});this.$el.html(e),this.renderActCopyList(),this.$el.find("input[placeholder]").placeholder()},renderActCopyList:function(){var e=this.collection.toJSON(),t=Hogan.compile(["{{#dataset}}",'<li class="folder">','<p class="title">','<a><ins class="ic"></ins><span data-id="{{id}}" class="txt">{{name}}</span></a>',"</p>","</li>","{{/dataset}}"].join("")),n=Hogan.compile(['<p class="data_null"><span class="ic_data_type ic_no_part"></span>{{msg_no_search_result}}</p>'].join(""));this.collection.length>0?this.$el.find("#actCopyList").html(t.render({dataset:e})):this.$el.find("#actCopyList").html(n.render({msg_no_search_result:u["\uc790\ub8cc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4"]}))},searchActcopyByKeyword:function(t){var n=e(t.currentTarget).val();this.collection.setKeyword(n),this.collection.fetch({async:!1}),this.renderActCopyList()},selectedForm:function(t){var n=new i,r=e(t.currentTarget).parents("p.title");this.$el.find(".on").removeClass("on"),r.addClass("on");var s=e(t.currentTarget).attr("data-id");this.model.setId(s),this.model.fetch({async:!1}),n.render(this.model)},release:function(){this.$el.off(),this.$el.empty()}});return l})}).call(this);