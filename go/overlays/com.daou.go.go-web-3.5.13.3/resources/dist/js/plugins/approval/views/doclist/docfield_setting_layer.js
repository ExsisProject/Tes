define(["jquery","underscore","backbone","when","app","approval/collections/doc_list_field","approval/models/doc_list_field","hgn!approval/templates/docfield_setting_list_layout","hgn!approval/templates/docfield_setting_list_item","i18n!nls/commons","i18n!admin/nls/admin","i18n!approval/nls/approval"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h={save:f["\uc800\uc7a5"],cancel:f["\ucde8\uc18c"],"\ubd80\uc11c\uba85":l["\ubd80\uc11c\uba85"],"\ubb38\uc11c\ud568":l["\ubb38\uc11c\ud568"],"\uc218\uc2e0\ud568":l["\uc218\uc2e0\ud568"],"\uacf5\ubb38 \ubc1c\uc1a1\ud568":l["\uacf5\ubb38 \ubc1c\uc1a1\ud568"]},p=n.View.extend({el:".layer_fieldName .content",events:{},initialize:function(e){this.options=e||{},this.toRemoveColumns=this.options.toRemoveColumns||[],this.model=new o({docFolderType:this.options.docFolderType})},render:function(){var e=this,t=r.defer();return this.model.fetch({dataType:"json",contentType:"application/json",success:function(n){var r=n.getCollection();r.addLangField(),e.toRemoveColumns.length>0&&e.removeColumn(r);var i=r.toJSON();e.$el.html(u({lang:h,data:i})),t.resolve()},error:function(){console.log("error"),t.reject()}}),t.promise},getData:function(){var t=[];return this.$("#fieldSettingTbody").find("input:checkbox:checked").each(function(n,r){t.push({columnType:e(this).attr("columnType"),docFolderType:e(this).attr("docFolderType")})}),t},removeColumn:function(e){t.each(this.toRemoveColumns,function(t){var n=e.findWhere({columnMsgKey:t});e.remove(n)},this)}});return p});