define(["approval/models/document"],function(e){function r(e,t){typeof t=="undefined"&&(t=!1);if(e.constructor===Array)return Array.prototype.slice.call(e);var n=new Object;for(var i in e)n[i]=typeof e[i]=="object"&&t?r(e[i]):e[i];return n}var t=["docmaster","formadmin","officialdocmaster"],n=e.extend({initialize:function(n,r){r.docId&&(this.docId=r.docId),r.type&&(this.type=r.type);if(!_.contains(t,this.type))throw new Error("\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud0c0\uc785\uc785\ub2c8\ub2e4.");e.prototype.initialize.apply(this,arguments)},url:function(){var e="/api/approval/";switch(this.type){case"docmaster":e+="manage";break;case"formadmin":e+="manageform";break;default:e+="companyofficial"}return e+"/document/"+this.docId},getShowUrl:function(){var e=typeof this.docId=="string"?this.docId.split("?")[0]:this.docId;return"/approval/document/"+e},getFullShowUrl:function(){return window.location.protocol+"//"+window.location.host+GO.contextRoot+"app"+this.getShowUrl()},clone:function(){return new this.constructor(r(this.attributes,!0),{docId:this.docId,type:this.type})},getWaitActivites:function(){var e=[];if(_.isEmpty(this.get("apprFlow"))||_.isEmpty(this.get("apprFlow").activityGroups))return e;var t=this.get("apprFlow").activityGroups;return _.each(t,function(t){var n=t.activities;_.each(n,function(t){t["status"]=="WAIT"&&e.push(t.id)})}),e}},{create:function(e,t){return new n({},{docId:e,type:t})}});return n});