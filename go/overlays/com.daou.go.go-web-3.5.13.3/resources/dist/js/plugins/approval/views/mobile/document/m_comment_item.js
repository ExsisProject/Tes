(function(){define(["jquery","backbone","app","i18n!nls/commons","hgn!approval/templates/mobile/document/m_comment_item","GO.util","jquery.go-validation"],function(e,t,n,r,i){var s={save:r["\uc800\uc7a5"],cancel:r["\ucde8\uc18c"],modify:r["\uc218\uc815"],remove:r["\uc0ad\uc81c"],reply:r["\ub313\uae00"],removeRemoveDesc:r["\ub313\uae00\uc774 \ub4f1\ub85d\ub41c \uae00\uc740 \uc0ad\uc81c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],removeSuccess:r["\ub313\uae00\uc744 \uc0ad\uc81c\ud558\uc600\uc2b5\ub2c8\ub2e4."],commentPlaceHolder:r["\ub313\uae00\uc744 \uc785\ub825\ud558\uc138\uc694."],saveComment:r["\ub313\uae00 \uc791\uc131"]},o=t.View.extend({tagName:"li",events:{"vclick #info_mode a.modify":"modify","vclick #info_mode a.remove":"remove","vclick #edit_mode a.save":"save","vclick #edit_mode a.cancel":"cancel"},initialize:function(e){this.options=e||{},this.type=this.options.type,this.typeId=this.options.typeId,this.model=this.options.model,this.model.set({typeUrl:this.type,typeId:this.typeId},{silent:!0})},render:function(){var t=this.model.get("id")==this.model.get("thread")?!1:!0,r=this;return this.$el.html(i({data:e.extend({},this.model.toJSON(),{createdAtBasicDate:n.util.basicDate3(this.model.get("createdAt")),isReplyComment:t,showMessage:n.util.convertRichText(this.model.get("message")),editMessage:this.model.get("message")}),lang:s})),t?this.$el.addClass("depth2"):this.$el.addClass("depth1"),this.$el.attr("comment-id",this.model.get("id")),this.$el.attr("comment-thread-id",this.model.get("thread")),this},modify:function(){this.$el.find("#info_mode").hide(),this.$el.find("#edit_mode").show()},remove:function(){var e=this;if(this.$el.hasClass("depth1")&&this.$el.next().hasClass("depth2")){alert(s.removeRemoveDesc);return}this.model.destroy({success:function(){alert(s.removeSuccess),e.$el.trigger("comment:remove"),e.$el.remove()}})},cancel:function(){this.$el.find("#info_mode").show(),this.$el.find("#edit_mode").hide(),this.$el.find("#edit_mode textarea.edit_content").val(this.model.get("message"))},save:function(){var e=this.$el.find("#edit_mode textarea").val(),t=this;this.model.set({message:e}),this.model.save(null,{success:function(){t.render()}})}},{__instance__:null,create:function(e,t){var n=new o({type:e,typeId:t});return n.render(),n}});return o})}).call(this);