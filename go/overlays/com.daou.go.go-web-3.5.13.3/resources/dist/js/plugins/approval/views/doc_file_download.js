define("approval/views/doc_file_download",function(require){var e=require("jquery"),t=require("underscore"),n=require("backbone"),r=require("app"),i=require("i18n!nls/commons"),s=require("i18n!admin/nls/admin"),o=require("i18n!approval/nls/approval");require("jquery.filedownload"),require("jquery.cookie");var u=n.View.extend({initialize:function(e){this.$appendTarget=e.appendTarget,this.getDownloadURL=e.getDownloadURL,this.showDownloadBtn=e.showDownloadBtn,this.hideWhenDeletedDeptRcvDoc=e.hideWhenDeletedDeptRcvDoc},render:function(){var t=[];this.showDownloadBtn&&(this.hideWhenDeletedDeptRcvDoc||(t.push('<a id="downloadDoc" class="btn_tool" data-role="button">'),t.push('  <span class="ic_toolbar download"></span>  <span class="txt">{{lang.\ub2e4\uc6b4\ub85c\ub4dc}}</span>'),t.push("</a>"))),t.push('<a id="hiddenDownloadDoc" data-role="button" href="" style="display:none"></a>'),t.push('<form id="download_doc_form" method="POST"><input type="hidden" value="" name="downloadTokenId" id="downloadTokenId"/></form>'),t.push('<iframe name="ifm_download_doc_form" id="ifm_download_doc_form" style="border:0px;width:0px;height:0px;"></iframe>'),this.$appendTarget.append(Hogan.compile(t.join("")).render({lang:{"\ub2e4\uc6b4\ub85c\ub4dc":i["\ub2e4\uc6b4\ub85c\ub4dc"]}})),this.$appendTarget.find("a#downloadDoc").bind("click",e.proxy(this.download,this))},remove:function(){this.$appendTarget.find("#downloadDoc").remove()},download:function(t){var n=this;return t.preventDefault(),this.preloader=e.goPreloader(),e.fileDownload(location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+r.contextRoot+this.getDownloadURL,{successCallback:function(e){n.preloader.release()},failCallback:function(t,r){e.goAlert(s["\ud30c\uc77c \ub2e4\uc6b4\ub85c\ub4dc\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4."]),n.preloader.release()}}),e("#download_doc_form").attr("target","ifm_download_doc_form"),!1}});return u});