(function(){define(["views/mobile/m_more_list","jquery","backbone","hogan","app","approval/models/doclist_item","collections/paginated_collection","approval/views/mobile/m_pagination","approval/views/mobile/m_doclist_item","views/mobile/header_toolbar","hgn!approval/templates/mobile/m_doclist_empty","hgn!approval/templates/mobile/m_doclist_item","i18n!nls/commons","i18n!approval/nls/approval","jquery.go-validation","GO.util"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d={approval:p["\uc804\uc790\uacb0\uc7ac"],"\uac1c\uc778 \ubb38\uc11c\ud568":p["\uac1c\uc778 \ubb38\uc11c\ud568"],move_to_home:h["\ud648\uc73c\ub85c \uc774\ub3d9"]},v=o.extend({model:s,types:["userdoc"],initialize:function(e,t){o.prototype.initialize.call(this),this.type=e,this.folderId=t},url:function(){return"/api/approval/userfolder/"+this.folderId+"/documents"},setFolderId:function(e){this.folderId=e}}),m=e.extend({el:"#content",types:["userdoc"],typesWithNoState:["userdoc"],initialize:function(e){i.util.appLoading(!0),this.options=e||{},this.type=this.options.type;if(!_.contains(this.types,this.type))throw new Error("\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud0c0\uc785\uc785\ub2c8\ub2e4.");this.folderId=this.options.folderId,_.bindAll(this,"render","renderPages"),this.collection=new v(this.type,this.folderId),this.collection.setFolderId(this.folderId);var n=this.collection.url().replace("/api/",""),r=i.router.getUrl();r.indexOf("?")<0?i.router.navigate(n,{replace:!0}):r!=n&&i.router.navigate(n,{trigger:!1,pushState:!0}),this.headerToolbarView=f;var s={listFunc:t.proxy(function(e){this.renderList(e)},this),emptyListFunc:t.proxy(function(){this.$el.find("ul.list_box").append(l({lang:{doclist_empty:p["\ubb38\uc11c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."]}}))},this)};this.setRenderListFunc(s);var o={};this.setFetchInfo(o,this.collection)},renderPages:function(){this.$el.find("div.paging br_no").remove()},render:function(){var e=this;this.$el.html(c);var n=function(){return t('a[data-id="'+e.folderId+'"][data-navi="'+e.type+'"]').text().trim()};this.toolBarData={title:n(),isList:!0,isSideMenu:!0,isHome:!0,isSearch:!0},this.headerToolbarView.render(this.toolBarData),this.dataFetch().done(t.proxy(function(e){e.length===0?this.renderListFunc.emptyListFunc():(this.renderListFunc.listFunc(e),this.scrollToEl())},this)),_.contains(this.typesWithNoState,this.type)&&this.hideListState(),i.util.appLoading(!1)},hideListState:function(){this.$el.find("span.state").hide()},renderList:function(e){var t=this,n="approval";e.each(function(e){var r=new a({model:e,listType:n});t.$el.find("ul.list_box").append(r.render().el)})},scrollToEl:function(){if(_.isNull(this.properties))return!1;var e=JSON.parse(this.properties),n=t("a[data-docid="+e.docid+"]"),r=n.offset().top,i=n.height(),s=t(window).height(),o;i<s?o=r-(s/2-i/2):o=r,t("html").animate({scrollTop:o})},appendRenderAboveList:function(){var e=this,t=this.collection.pageInfo();if(!t.next)return;var n=t.pageNo+1;return this.collection.fetch({async:!1,data:{page:n,offset:this.offset},success:function(t){e.renderList(t)}}),!1}},{__instance__:null,create:function(){return this.__instance__=new this.prototype.constructor({el:t("#content")}),this.__instance__},render:function(){var e=this.create(),t=arguments.length>0?Array.prototype.slice.call(arguments):[];return this.prototype.render.apply(e,t)}});return m})}).call(this);