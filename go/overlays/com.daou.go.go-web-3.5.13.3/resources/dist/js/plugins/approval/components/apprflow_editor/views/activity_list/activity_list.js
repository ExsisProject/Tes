define("approval/components/apprflow_editor/views/activity_list/activity_list",["backbone","approval/components/apprflow_editor/views/activity_list/activity_group","approval/collections/appr_activity_groups","approval/collections/activities","hgn!approval/components/apprflow_editor/templates/activity_list/empty_group"],function(e,t,n,r,i){function o(){this.listenTo(this.observer,"dropCheck",a),this.listenTo(this.observer,"dropFinish",f),this.listenTo(this.observer,"dropOut",l),this.listenTo(this.observer,"resize",c)}function u(){this.$el.append(i())}function a(e,t){var n,r="last",i="last";if(!this.isActivated())return;n=h.call(this,r),n&&_.isFunction(n.drawDropHelper)&&n.drawDropHelper(i)}function f(e,t,n){var r;if(!this.isActivated())return;r=h.call(this,e),r&&(r.addActivity(n,t),r.clearDropHelper(t))}function l(){if(!this.isActivated())return;_.each(this.groupViewList,function(e){e.clearDropHelper()})}function c(){var e=this;setTimeout(function(){if(e.$el.parents("body").length>0){var t=parseInt(e.$el.innerHeight()),n=0,r=0,i=0;_.each(e.groupViewList,function(e){n+=parseInt(e.$el.outerHeight())}),r=t-n;if(r<i)return;e.$el.find(".empty-activity-group").css({height:r-i})}else c.call(e)},100)}function h(e){var t;return e==="last"?t=_.last(this.groupViewList):t=this.groupViewList[e],t}var s=e.View.extend({el:"#activity_groups",observer:null,collection:null,actionCheck:null,groupViewList:[],__activated__:!1,initialize:function(t){t=t||{},this.__activated__=!1,t.observer&&t.observer.hasOwnProperty("bind")?this.observer=t.observer:this.observer=_.extend({},e.Events),this.groupViewList=[],_.isObject(t.actionCheck)&&(this.actionCheck=t.actionCheck),o.call(this)},addGroupView:function(e){return e instanceof t&&(e.setIndex(this.groupViewList.length),this.groupViewList.push(e)),this},render:function(){this.$el.empty(),_.each(this.groupViewList,function(e,t){this.$el.append(e.el),e.render()},this),u.call(this),c.call(this),this.activate(),this.observer.trigger("activateDNDDroppable")},activate:function(){this.__activated__=!0},deactivate:function(){this.__activated__=!1},isActivated:function(){return this.__activated__}});return s});