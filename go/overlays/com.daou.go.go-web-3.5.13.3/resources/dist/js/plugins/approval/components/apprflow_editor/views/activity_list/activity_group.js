define("approval/components/apprflow_editor/views/activity_list/activity_group",["backbone","hgn!approval/components/apprflow_editor/templates/activity_list/activity_group"],function(e,t){function r(){this.$el.html(t({disabled:this.__disabled__})),this.$el.addClass("activity_group approval_line")}function i(){var e=".appr-activity:not(.inactive)",t=".activity_group";this.$el.sortable({connectWith:t,items:e,placeholder:"ui-state-highlight",stop:_.bind(function(n,r){var i=r.item.parents(t),s=parseInt(i.data("index")||0);if(s===this.index){var o=[];this.$el.find(e).each(function(e,t){o.push($(t).data("id"))}),this.__activityItemsView__.sortByIds(o)}},this)}),this.$el.filter("input").disableSelection()}var n=e.View.extend({groupTitle:null,dndDropTarget:"appr-activity",index:0,activities:[],observer:null,ActivityItemsView:null,__activityItemsView__:null,__disabled__:!1,__sortable__:!0,events:{"click .btn-add-activity":"_onClickAddActivity"},initialize:function(t){t=t||{},this.__activityItemsView__=null,this.__disabled__=!1,this.__sortable__=!0,_.isNumber(t.index)&&(this.index=t.index),_.isString(t.grouptTitle)&&(this.groupTitle=t.grouptTitle),t.dndDropTarget&&(this.dndDropTarget=t.dndDropTarget),t.actionCheck&&(this.actionCheck=t.actionCheck),t.tabId&&(this.tabId=t.tabId),t.activities&&(t.activities instanceof e.Collection?this.collection=t.activities:this.collection=new e.Collection(this.activities)),t.observer&&t.observer.hasOwnProperty("bind")?this.observer=t.observer:this.observer=_.extend({},e.Events),t.disable&&this.disable(),r.call(this)},render:function(){var e=new this.ActivityItemsView({collection:this.collection,dndDropTarget:this.dndDropTarget,actionCheck:this.actionCheck,tabId:this.tabId,disable:this.isDisabled(),observer:this.observer});this.$el.find(".activity-group-items").html(e.el),e.render(),this.__activityItemsView__=e},setIndex:function(e){this.index=e,this.$el.attr("data-index",this.index)},parseOrgTreeData:function(e){},addActivity:function(e,t){if(e&&e.type==="company")return;var n={},r=this.parseOrgTreeData(e);if(!r)return;_.isNumber(t)&&this.collection.length>t&&(n.at=t,n.merge=!0),this.collection.add(r,n),this.observer.trigger("resize")},drawDropHelper:function(e){this.__activityItemsView__.drawDropHelper(e)},clearDropHelper:function(){this.__activityItemsView__.clearDropHelper()},disable:function(){this.__disabled__=!0},isDisabled:function(){return this.__disabled__},_onClickAddActivity:function(e){e.preventDefault();if(this.isDisabled())return;this.observer.trigger("addActivity",_.bind(this.addActivity,this))}});return n});