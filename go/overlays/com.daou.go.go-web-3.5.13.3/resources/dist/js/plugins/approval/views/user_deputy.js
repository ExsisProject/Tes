define(["jquery","underscore","backbone","app","approval/views/content_top","views/pagination","views/pagesize","approval/views/deputylist_item","approval/models/deputy_item","collections/paginated_collection","hgn!approval/templates/doclist_empty","hgn!approval/templates/usersetting_userdeputy","i18n!nls/commons","i18n!approval/nls/approval"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=f.extend({model:a,url:function(){return"/api/approval/usersetting/deputy?"+e.param({page:this.pageNo,offset:this.pageSize})}}),v=n.Model.extend({url:function(){var e="/api/approval/usersetting/deputy";return e}}),m=n.View.extend({columns:{"\ubd80\uc7ac \ucd94\uac00":p["\ubd80\uc7ac \ucd94\uac00"],"\ubd80\uc7ac \uc2dc\uc791":p["\ubd80\uc7ac \uc2dc\uc791"],"\ubd80\uc7ac \uc885\ub8cc":p["\ubd80\uc7ac \uc885\ub8cc"],"\ub300\uacb0\uc790":p["\ub300\uacb0\uc790"],"\ubd80\uc7ac \uc0ac\uc720":p["\ubd80\uc7ac \uc0ac\uc720"],"\uc0ac\uc6a9 \uc5ec\ubd80":p["\uc0ac\uc6a9 \uc5ec\ubd80"],count:6},el:"#content",initialize:function(){t.bindAll(this,"render","renderPageSize","renderPages");var e=this;this.contentTop=i.getInstance(),this.collection=new d,this.collection.bind("reset",this.resetList,this),this.collection.fetch({statusCode:{403:function(){r.util.error("403")},404:function(){r.util.error("404",{msgCode:"400-common"})},500:function(){r.util.error("500")}}})},events:{"click .tab_menu > li":"selectTab","click a[data-id = btn_regist_deputy]":"goRegist","click input:checkbox":"toggleCheckbox","click a[data-id = btn_delete_deputy]":"btnDeleteAbsence"},btnDeleteAbsence:function(){var t=this,n=[],r=e("input[name=checkbox]:checked");r.each(function(){n.push(e(this).attr("data-id"))});if(e.isEmptyObject(n)){e.goError(p["\uc120\ud0dd\ub41c \ud56d\ubaa9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."]);return}var i=new v;e.goConfirm(p["\ubd80\uc7ac \uc124\uc815 \uc0ad\uc81c"],p["\ubd80\uc7ac \uc124\uc815\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"],function(){i.set({ids:n}),i.save({},{silent:!0,type:"DELETE",success:function(){e.goMessage(p["\uc120\ud0dd\ud55c \ud56d\ubaa9\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4"]),t.$el.find("#checkedAllAbsence").attr("checked",!1),t.collection.fetch()},error:function(){e.goError(h["\uc800\uc7a5\uc5d0 \uc2e4\ud328 \ud558\uc600\uc2b5\ub2c8\ub2e4."])}})})},render:function(){var e={"\uae30\ubcf8 \uc124\uc815":p["\uae30\ubcf8 \uc124\uc815"],"\ubd80\uc7ac/\uc704\uc784 \uc124\uc815":p["\ubd80\uc7ac/\uc704\uc784 \uc124\uc815"],"\uac1c\uc778 \uacb0\uc7ac\uc120 \uad00\ub9ac":p["\uac1c\uc778 \uacb0\uc7ac\uc120 \uad00\ub9ac"],"\ubd80\uc7ac \ucd94\uac00":p["\ubd80\uc7ac \ucd94\uac00"],"\uc0ad\uc81c":h["\uc0ad\uc81c"],"\ubd80\uc7ac \uc2dc\uc791":p["\ubd80\uc7ac \uc2dc\uc791"],"\ubd80\uc7ac \uc885\ub8cc":p["\ubd80\uc7ac \uc885\ub8cc"],"\ub300\uacb0\uc790":p["\ub300\uacb0\uc790"],"\ubd80\uc7ac \uc0ac\uc720":p["\ubd80\uc7ac \uc0ac\uc720"],"\uc0ac\uc6a9 \uc5ec\ubd80":p["\uc0ac\uc6a9 \uc5ec\ubd80"]};this.$el.html(c({lang:e,columns:this.columns})),this.contentTop.setTitle(p["\uacb0\uc7ac\ud658\uacbd\uc124\uc815"]),this.contentTop.render(),this.$el.find("header.content_top").replaceWith(this.contentTop.el),this.renderPageSize()},toggleCheckbox:function(t){var n=e(t.currentTarget),r=e("input#checkedAllAbsence"),i=n.is(":checked");n.attr("id")==r.attr("id")&&e('input[type="checkbox"][name="checkbox"]').attr("checked",i),n.hasClass("absence_item_checkbox")&&(i||r.attr("checked",i))},renderPageSize:function(){this.pageSizeView=new o({pageSize:this.collection.pageSize}),this.pageSizeView.render(),this.pageSizeView.bind("changePageSize",this.selectPageSize,this)},renderPages:function(){this.pageView=new s({pageInfo:this.collection.pageInfo()}),this.pageView.bind("paging",this.selectPage,this),this.$el.find("div.tool_absolute > div.dataTables_paginate").remove(),this.$el.find("div.tool_absolute").append(this.pageView.render().el)},resetList:function(t){var n=this.collection.url().replace("/api/",""),i=r.router.getUrl();i.indexOf("?")<0?r.router.navigate(n,{replace:!0}):i!=n&&r.router.navigate(n,{trigger:!1,pushState:!0}),e(".tb_config_absence > tbody").empty();var s=this.columns;if(!t)return e(".tb_config_absence > tbody").html(l({columns:this.columns,lang:{doclist_empty:p["\uc800\uc7a5\ub41c \ubd80\uc7ac \ubaa9\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"]}})),this.renderPages(),!1;t.each(function(t){var n=new u({model:t,columns:s});e(".tb_config_absence > tbody").append(n.render().el)}),t.length==0&&e(".tb_config_absence > tbody").html(l({columns:this.columns,lang:{doclist_empty:p["\uc800\uc7a5\ub41c \ubd80\uc7ac \ubaa9\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"]}})),this.renderPages()},selectTab:function(t){if(e(t.currentTarget).attr("class")==="active")return!1;var n=e(t.currentTarget).attr("id"),i="/approval/";n=="tab_user_config"?i+="usersetting/userconfig":n=="tab_user_deputy"&&(i+="usersetting/deputy"),r.router.navigate(i,{trigger:!0}),e("html, body").animate({scrollTop:0})},selectPage:function(e){this.collection.setPageNo(e),this.collection.fetch()},selectPageSize:function(e){this.collection.setPageSize(e),this.collection.fetch()},search:function(){},goRegist:function(e){var t="/approval/usersetting/deputy/regist";r.router.navigate(t,!0)},release:function(){this.$el.off(),this.$el.empty()}});return m});