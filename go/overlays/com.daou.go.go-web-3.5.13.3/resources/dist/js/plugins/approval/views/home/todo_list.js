define(["jquery","underscore","backbone","when","app","collections/paginated_collection","approval/views/doclist/doclist_card_item","approval/models/doclist_item","hgn!approval/templates/doclist_empty","hgn!approval/templates/home_card_list","i18n!nls/commons","i18n!approval/nls/approval"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=s.extend({model:u,url:function(){return"/api/approval/home/todo?page="+this.pageNo}}),p=n.Model.extend({url:"/api/approval/apprconfig"}),d=n.View.extend({initialize:function(e){var t=this;this.options=e||{},this.collection=new h,this.collection.bind("reset",this.generateList,this),this.configModel=new p,this.useHold=!0,this.configModel.fetch({async:!1,success:function(e){t.useHold=e.get("useHold")}}),this.collection.fetch({reset:!0})},events:{"click a.next":"_goNext","click a.previous":"_goPrevious"},render:function(){var e={};return this.$el.html(f({lang:{"\uc774\uc804":l["\uc774\uc804"],"\ub2e4\uc74c":l["\ub2e4\uc74c"]}})),this},generateList:function(){var t=this.$el;t.find("div.card_item_wrapper").empty();var n="approval";this.collection.each(function(e){var r=new o({listType:n,model:e,useHold:this.useHold});t.find("div.card_item_wrapper").append(r.render().el)},this),this.collection.length==0?(e("div.dashboard_box").html("<p class='desc'>"+c["\uacb0\uc7ac\ud560 \ubb38\uc11c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."]+"</p>"),e("div#pageNavigator").remove()):this._makePageNavigation()},release:function(){this.$el.off(),this.$el.empty()},_makePageNavigation:function(){var e=this.collection.pageInfo(),t="paginate_button_disabled";if(e.lastPageNo==0){this.$("#pageNavigator").remove();return}e.prev?this.$("a.previous").removeClass(t):this.$("a.previous").addClass(t),e.next?this.$("a.next").removeClass(t):this.$("a.next").addClass(t)},_goNext:function(){this._goPage("next")},_goPrevious:function(){this._goPage("previous")},_goPage:function(e){e==="next"?this.collection.nextPage():this.collection.prevPage()}});return d});