define(["jquery","underscore","backbone","app","hgn!approval/templates/form_detail","i18n!nls/commons","i18n!approval/nls/approval"],function(e,t,n,r,i,s,o){var u=n.Model.extend({getDetail:function(e){this.formId=e},url:function(){return"/api/approval/apprform/"+this.formId}}),a={"\uc81c\ubaa9":s["\uc81c\ubaa9"],"\uc804\uc0ac\ubb38\uc11c\ud568":o["\uc804\uc0ac\ubb38\uc11c\ud568"],"\ubd80\uc11c\ubb38\uc11c\ud568":o["\ubd80\uc11c\ubb38\uc11c\ud568"],"\ubcf4\uc874\uc5f0\ud55c":o["\ubcf4\uc874\uc5f0\ud55c"],"\ub144":o["\ub144"],"\uc124\uba85":o["\uc124\uba85"],"\uae30\uc548\ubd80\uc11c":o["\uae30\uc548\ubd80\uc11c"],"\uc18c\uc18d\ub41c \ubd80\uc11c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4":o["\uc18c\uc18d\ub41c \ubd80\uc11c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4"]},f=n.View.extend({el:"#form_detail",initialize:function(){this.deptFolderInfos=this.options.deptFolderInfos,this.drafterDeptFolderInfos=this.options.drafterDeptFolderInfos,this.model=new u},events:{"change #draftDeptId":"changeDept"},formDetail:function(t){this.formId=t,this.model.getDetail(this.formId,{silent:!0}),this.model.fetch({async:!1});var n=this.model.toJSON(),r=this.model.get("preserveDurationInYear");r=="0"?r=o["\uc601\uad6c"]:r+=o["\ub144"],this.$el.html(i({dData:n,deptFolderInfos:this.deptFolderInfos,drafterDeptFolderInfos:this.drafterDeptFolderInfos,emptyDept:e.isEmptyObject(this.drafterDeptFolderInfos),preserveYear:r,lang:a})),this.changeDept()},emptyDetail:function(e){this.$el.html(i({lang:a}))},changeDept:function(){var t=this,n=e("#draftDeptId").val();e.each(this.drafterDeptFolderInfos,function(e,r){r.deptId==n&&t.resetDeptDocFolders(r)})},resetDeptDocFolders:function(t){e("#deptFolderId").find("option").remove(),e("#deptFolderId").append("<option>"+o["\ubbf8\uc9c0\uc815"]+"</option>"),e.each(t.deptFolders,function(t,n){e("#deptFolderId").append('<option value="'+n.folderId+'">'+n.folderName+"</option>")})},release:function(){this.$el.off(),this.$el.empty()}});return f});