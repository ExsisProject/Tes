define(["jquery","underscore","backbone","app","approval/views/doclist/reception_doclist","approval/views/doclist/dept_doc_folder","approval/models/all_documents_action","i18n!nls/commons","i18n!approval/nls/approval"],function(e,t,n,r,i,s,o,u,a){var f=n.Model.extend({url:function(){var e=["/api/approval/deptfolder/"+this.folderId+"/document/add"].join("/");return e},setFolderId:function(e){this.folderId=e}}),l=i.extend({columns:{"\uc120\ud0dd":u["\uc120\ud0dd"],"\uc811\uc218\uc77c":a["\uc811\uc218\uc77c"],"\uacb0\uc7ac\uc591\uc2dd":a["\uacb0\uc7ac\uc591\uc2dd"],"\uae34\uae09":a["\uae34\uae09"],"\uc81c\ubaa9":u["\uc81c\ubaa9"],"\ucca8\ubd80":a["\ucca8\ubd80"],"\uae30\uc548\uc790":a["\uae30\uc548\uc790"],"\ub2f4\ub2f9\uc790":a["\ub2f4\ub2f9\uc790"],"\uacb0\uc7ac\uc0c1\ud0dc":a["\uacb0\uc7ac\uc0c1\ud0dc"],"\ubd80\uc11c \ubb38\uc11c\ud568":a["\ubd80\uc11c \ubb38\uc11c\ud568"],"\ubb38\uc11c\ubc88\ud638":a["\ubb38\uc11c\ubc88\ud638"],"\uc6d0\ubb38\ubc88\ud638":a["\uc6d0\ubb38\ubc88\ud638"],count:12},events:function(){return t.extend({},i.prototype.events,{"click #deptDocCopy":"deptDocCopy"})},buttons:{copy:!0},deptDocCopy:function(){var n=this,i=[],l=e("input[name=checkbox]:checked");l.each(function(){i.push(e(this).attr("data-id"))});if(e.isEmptyObject(i)){e.goError(a["\uc120\ud0dd\ub41c \ud56d\ubaa9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."]);return}var c=this.deptName,h=this.deptId,p,d=e.goPopup({pclass:"layer_normal layer_doc_type_select",header:a["\ubd80\uc11c \ubb38\uc11c\ud568 \ubd84\ub958"],modal:!0,width:300,contents:"",buttons:[{btext:u["\ud655\uc778"],btype:"confirm",autoclose:!1,callback:function(s){var l=s.find(".on span[data-folderid]").attr("data-folderid");if(!l)return e.goError(a["\uc774\ub3d9\ud558\uc2e4 \ubb38\uc11c\ud568\uc744 \uc120\ud0dd\ud574\uc8fc\uc2ed\uc2dc\uc694."],e(".list_wrap ")),!1;s.parent().find("#allSelectTr").is(":visible")&&s.parent().find("#allSelectMsg3").attr("data-value")=="folder"?(p=new o({folderType:"deptreceivefolder"}),!t.isUndefined(n.collection.keyword)&&n.collection.keyword.trim().length>0&&(p.setSearch(n.collection.searchtype,n.collection.keyword),n.collection.duration=="period"&&p.setDuration({duration:n.collection.duration,fromDate:r.util.toISO8601(n.collection.fromDate),toDate:r.util.searchEndDate(n.collection.toDate)})),p.set({deptId:h})):p=new f({ids:i}),p.setFolderId(l),p.save({},{silent:!0,type:"PUT",success:function(t,r){e.goMessage(a["\uc120\ud0dd\ud55c \ud56d\ubaa9\uc774 \ubcf5\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4"]),s.close(),n.$el.find("#checkedAllDeptDoc").attr("checked",!1),n.collection.fetch()},error:function(n,r){var i=r.responseJSON;return!t.isUndefined(i)&&i.message?(e.goError(i.message),!1):(e.goError(u["\uc800\uc7a5\uc5d0 \uc2e4\ud328 \ud558\uc600\uc2b5\ub2c8\ub2e4."]),!1)}})}},{btext:u["\ucde8\uc18c"],btype:"cancel"}]}),v=new s({docIds:i,deptId:h,deptName:c});v.render(),i!=""&&d.reoffset()},makeCompleteDocumentCountingUrl:function(){var e=r.contextRoot+"api/approval/deptfolder/"+this.deptId+"/reception/complete/count?";return e+this.makeParams()}});return l});