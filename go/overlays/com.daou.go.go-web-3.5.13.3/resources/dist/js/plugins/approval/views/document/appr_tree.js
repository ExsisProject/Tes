define(["jquery.go-orgtab"],function(){var e=Backbone.View.extend({orgEl:null,orgTab:null,elId:"orgTreeTab",orgElId:"org_tree_tab_content",elementId:null,observer:null,isAdmin:!1,multiCompanySupporting:!1,searchResultElId:"memberList",initialize:function(e){this.observer=e.observer,_.isString(e.elementId)&&(this.elId=e.elementId),_.isString(e.orgElId)&&(this.orgElId=e.orgElId),_.isBoolean(e.isDndActive)&&(this.isDndActive=e.isDndActive),_.isString(e.dndDropTarget)&&(this.dndDropTarget=e.dndDropTarget),_.isBoolean(e.isAdmin)&&(this.isAdmin=e.isAdmin),_.isBoolean(e.multiCompanySupporting)&&(this.multiCompanySupporting=e.multiCompanySupporting),_.isString(e.searchResultElId)&&(this.searchResultElId=e.searchResultElId),_.isString(e.type)&&(this.type=e.type),_.isString(e.draggables)&&(this.draggables=e.draggables),_.isBoolean(e.useDisableNodeStyle)&&(this.useDisableNodeStyle=e.useDisableNodeStyle),_.isBoolean(e.useApprReception)&&(this.useApprReception=e.useApprReception),_.isBoolean(e.useApprReference)&&(this.useApprReference=e.useApprReference),_.isString(e.receiveAllowType)&&(this.receiveAllowType=e.receiveAllowType)},render:function(){this.orgTab=$.goOrgTab({elId:this.elId,orgElId:this.orgElId,searchResultElId:this.searchResultElId,isAdmin:this.isAdmin,isDndActive:this.isDndActive,dndDropTarget:this.dndDropTarget,dropCheck:$.proxy(this._dropCheckCallback,this),dropFinish:$.proxy(this._dropFinishCallback,this),dropOut:$.proxy(this._dropOutCallback,this),multiCompanyVisible:this.multiCompanySupporting,draggables:this.draggables,useDisableNodeStyle:this.useDisableNodeStyle,useApprReception:this.useApprReception,useApprReference:this.useApprReference,receiveAllowType:this.receiveAllowType,css:{minHeight:"306px",maxHeight:"306px"},type:this.type}),this.observer.bind("activateDNDDroppable",function(){console.log("activateDNDDroppable"),this.orgTab.activateDNDDroppable()},this),this.orgEl=$("#"+this.elId)},_dropCheckCallback:function(e,t){var n=this._makeDNDInfoByDropTarget(e);return this.observer.trigger("dropCheck",n.groupSeq,n.activitySeq),!0},_dropFinishCallback:function(e,t){var n=this._makeDNDInfoByDropTarget(e);this.observer.trigger("dropFinish",n.groupSeq,n.activitySeq,t);return},_makeDNDInfoByDropTarget:function(e){var t=$(e);if(t.attr("data-isnullactivity")=="true")return{groupSeq:"last",activitySeq:"last"};var n=t.parents("div.activity_group"),r=t.parent().children();return{groupSeq:parseInt(n.attr("data-index")),activitySeq:parseInt(r.index(t))+1}},_dropOutCallback:function(e,t){this.observer.trigger("dropOut")},getSelected:function(){return this.orgTab.getSelectedData()},show:function(){this.orgEl.show()},hide:function(){this.orgEl.hide()},isShowing:function(){return this.orgEl.is(":hidden")==0},isHiding:function(){return this.orgEl.is(":hidden")==1}});return e});