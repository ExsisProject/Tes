define("approval/components/apprflow_editor/views/official_doc/activity_groups",["backbone","app","approval/components/apprflow_editor/views/official_doc/activity_group","approval/models/activity","approval/models/appr_activity_group","approval/collections/appr_receiver","approval/models/appr_receiver","approval/collections/appr_official_version","approval/models/appr_official_version","approval/collections/appr_flows","i18n!nls/commons","i18n!approval/nls/approval","jquery.go-sdk","jquery.jstree","jquery.go-popup","jquery.go-grid","jquery.go-validation"],function(e,t,n,r,i,s,o,u,a,f,l,c){function d(){this.listenTo(this.observer,"dropCheck",this.drawDNDLine),this.listenTo(this.observer,"dropFinish",this.addActivityByDND),this.listenTo(this.observer,"dropOut",this.clearAllGroupsDragDropLineCss),this.listenTo(this.observer,"resize",this._resizeEmptyGroupView),this.listenTo(this.activityGroups,"change add remove",function(e){this.model.docInfoModel.set("officialVersions",this.activityGroups.toJSON()),this.model.set("docInfoChanged",!0),this.observer.trigger("changedTabItem","officialdoc")})}function v(){var e=this;setTimeout(function(){if(e.$el.parents("body").length>0){var t=parseInt(e.$el.css("height")),n=0,r=0,i=0;_.each(e.groupViewList,function(e){n+=parseInt(e.$el.outerHeight())}),r=t-n;if(r<i)return;e.emptyGroupView.$el.css({height:r-i})}else v.call(e)},100)}var h={header:c["\uacb0\uc7ac \uc815\ubcf4"],save_as_my_line:c["\uac1c\uc778 \uacb0\uc7ac\uc120\uc73c\ub85c \uc800\uc7a5"],delete_as_my_line:c["\uac1c\uc778 \uacb0\uc7ac\uc120 \uc0ad\uc81c"],my_line_name:c["\uacb0\uc7ac\uc120 \uc774\ub984"],normal:c["\uc77c\ubc18"],my_lines:c["\ub098\uc758\uacb0\uc7ac\uc120"],draft:c["\uae30\uc548"],name:l["\uc774\ub984"],dept:c["\ubd80\uc11c"],line:c["\ub77c\uc778"],status:c["\uc0c1\ud0dc"],approval:c["\uacb0\uc7ac"],agreement:c["\ud569\uc758"],check:c["\ud655\uc778"],agreement_type:c["\ud569\uc758\ubc29\uc2dd"],agreement_linear:c["\uc21c\ucc28\ud569\uc758"],agreement_parallel:c["\ubcd1\ub82c\ud569\uc758"],activityType:c["\ud0c0\uc785"],add:l["\ucd94\uac00"],"delete":l["\uc0ad\uc81c"],confirm:l["\ud655\uc778"],cancel:l["\ucde8\uc18c"],add_activity:c["\ub4dc\ub798\uadf8\ud558\uc5ec \uacb0\uc7ac\uc120\uc744 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."],msg_duplicate_activity:c["\uc911\ubcf5\ub41c \ub300\uc0c1\uc785\ub2c8\ub2e4."],msg_max_approval_count_exceed:c["\uacb0\uc7ac\uc790 \uc218\uac00 \ucd5c\ub300 \uacb0\uc7ac\uc790 \uc218\ub97c \ub118\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],msg_not_selected:c["\uc120\ud0dd\ub41c \ub300\uc0c1\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."],msg_not_deletable_status_activity:c["\uc0ad\uc81c\ud560 \uc218 \uc5c6\ub294 \uc0c1\ud0dc\uc758 \uacb0\uc7ac\uc790 \uc785\ub2c8\ub2e4."],msg_not_deletable_assigned_activity:c["\uc9c0\uc815 \uacb0\uc7ac\uc790\ub294 \uc0ad\uc81c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],msg_save_success:l["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."],msg_not_addable_position:c["\uc644\ub8cc\ub41c \uacb0\uc7ac \uc55e\uc5d0 \uacb0\uc7ac\uc790\ub97c \ucd94\uac00\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],msg_duplicated_my_line_title:c["\uc911\ubcf5\ub41c \uc774\ub984\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],msg_my_line_set_error_maxCount:c["\uacb0\uc7ac\uc790\ub97c \ucd5c\ub300\uce58\ubcf4\ub2e4 \ub118\uac8c \ud560\ub2f9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],msg_my_line_set_error_assigned_deleted:c["\uc9c0\uc815 \uacb0\uc7ac\uc790\ub294 \uaf2d \ud3ec\ud568\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4."],msg_my_line_set_error_not_matching_group_count:c["\uacb0\uc7ac\uc120\uc758 \uac2f\uc218\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."],msg_parallel_agreement_should_has_2_more_agreement:c["\ubcd1\ub82c\ud569\uc758\ub294 \uc5f0\uc18d\ub41c \ub458 \uc774\uc0c1\uc758 \ud569\uc758\uac00 \ud544\uc694\ud569\ub2c8\ub2e4."],msg_not_belong_to_department_user:c["\ubd80\uc11c\uac00 \uc5c6\ub294 \uc0ac\uc6a9\uc790\ub294 \ucd94\uac00\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."],notAddable:c["\uc774 \uacb0\uc7ac\uce78\uc5d0\ub294 \uacb0\uc7ac\uc790\ub97c \ucd94\uac00\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"],not_allowed_apprline:"\uc120\ud0dd\ud55c \uac1c\uc778\uacb0\uc7ac\uc120\uc740 \uc774 \uacb0\uc7ac\uadf8\ub8f9\uc5d0 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."},p=e.View.extend({observer:null,activityGroups:null,actionCheck:null,groupViewList:null,__activated__:!1,__disabled__:!1,initialize:function(e){e=e||{},this.observer=e.observer,this.__activated__=!1,this.__disabled__=!1,e.disable&&this.disable(),this.activityGroups=this.getActivityGroups(),this.actionCheck=this.model.get("actionCheck"),this.viewerType=this.options.viewerType,d.call(this)},getActivityGroups:function(){return new u(this.model.docInfoModel.get("officialVersions"))},render:function(){return this.activate(),this.$el.empty(),this.groupViewList=[],this.activityGroups.each(function(e,t){var r=_.isEqual(e.get("state"),"CREATE"),i=!_.isEqual(e.get("state"),"APPROVE")&&_.isEqual(this.model.get("approvable"),!0),s=new n({model:e,observer:this.observer,viewerType:this.viewerType,index:t,documentEditModel:this.model,disable:this.isDisabled()||!r&&!i});s.render(),this.groupViewList.push(s),this.$el.append(s.$el)},this),this._makeEmptyGroupToSpareSpace(),this._resizeEmptyGroupView(),this.observer.trigger("activateDNDDroppable"),this.$el},activate:function(){this.__activated__=!0},deactivate:function(){this.__activated__=!1},isActivated:function(){return this.__activated__},_makeEmptyGroupToSpareSpace:function(){this.emptyGroupView=new n({model:null}),this.emptyGroupView.render(),this.$el.append(this.emptyGroupView.el)},_resizeEmptyGroupView:function(){v.call(this)},getCollectionJSON:function(){return this.activityGroups.toJSON()},drawDNDLine:function(){var e=arguments[0],t=arguments[1];if(!this.isActivated())return;if(e=="last"&&t=="last"){var n=_.last(this.groupViewList);return n.drawDragDropLineCss("last"),!0}this.clearAllGroupsDragDropLineCss();var n=this.groupViewList[e];return n.drawDragDropLineCss(t-1),!0},addActivityByDND:function(){var e=arguments[0],t=arguments[1],n=arguments[2];if(!this.isActivated())return;this.clearAllGroupsDragDropLineCss();if(e=="last"&&t=="last"){var r=_.last(this.groupViewList);r.addActivity(n,"last")}else{var r=this.groupViewList[e];r.addActivity(n,t)}},clearAllGroupsDragDropLineCss:function(){if(!this.isActivated())return;_.each(this.groupViewList,function(e){e.clearDragDropLineCss()})},disable:function(){this.__disabled__=!0},isDisabled:function(){return this.__disabled__}});return p});