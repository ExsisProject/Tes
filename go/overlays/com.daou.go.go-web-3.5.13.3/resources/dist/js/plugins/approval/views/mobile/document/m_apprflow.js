define(["jquery","backbone","app","approval/models/activity","approval/models/appr_flow","hgn!approval/templates/mobile/document/m_apprflow","i18n!nls/commons","i18n!approval/nls/approval"],function(e,t,n,r,i,s,o,u){var a=t.View.extend({initialize:function(e){this.options=e||{},this.release(),this.docId=this.options.docId,this.masterChange=this.options.masterChange,this.isAdmin=!1,_.isBoolean(this.options.isAdmin)&&(this.isAdmin=this.options.isAdmin),_.isObject(this.options.model)||(this.model=new i({docId:this.docId,isAdmin:this.isAdmin,masterChange:this.masterChange}),this.model.fetch({async:!1}))},render:function(){var e=function(){return typeof this.status!="undefined"&&this.status=="WAIT"&&!this.postCheck?!0:!1},t=this.status?!0:!1;_.each(this.model.get("activityGroups"),function(e,t){_.each(e.activities,function(e,t){_.isUndefined(e.comment)||_.isEmpty(e.comment)?e.isNotEmptyComment=!1:(e.isNotEmptyComment=!0,e.comment=GO.util.escapeHtml(e.comment)),e.holdingActivity&&e.holdingActivity.comment?(e.holdingActivity.comment=GO.util.escapeHtml(e.holdingActivity.comment),_.isEmpty(e.holdingActivity.comment)?e.isNotEmptyHoldingComment=!1:e.isNotEmptyHoldingComment=!0):e.isNotEmptyHoldingComment=!1,e.deputyActivity&&e.deputyActivity.comment?(e.deputyActivity.comment=GO.util.escapeHtml(e.deputyActivity.comment),_.isEmpty(e.deputyActivity.comment)?e.isNotEmptyDeputyComment=!1:e.isNotEmptyDeputyComment=!0):e.isNotEmptyDeputyComment=!1})});var n=s({dataset:this.model.get("activityGroups"),lang:{portrait:u["\ucd08\uc0c1\ud654"],postCheck:u["\ud6c4\uc5f4"],noApprline:u["\uacb0\uc7ac\uc120 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."],"\ubcf4\ub958":u["\ubcf4\ub958"]},isCurrent:e,isActive:t,fCompletedAt:function(){return GO.util.basicDate(this.completedAt)}});return this.$el.html(n),this},makeApprFlow:function(e){var t=0,n=null,r=s({dataset:e,lang:{portrait:u["\ucd08\uc0c1\ud654"]},isCurrent:function(){return t==0?n=!0:n=!1,t++,n},isActive:!1});this.$el.empty(),this.$el.html(r)},getCurrentActivity:function(){return this.model.getCurrentActivity()},release:function(){this.$el.off(),this.$el.empty()}});return a});