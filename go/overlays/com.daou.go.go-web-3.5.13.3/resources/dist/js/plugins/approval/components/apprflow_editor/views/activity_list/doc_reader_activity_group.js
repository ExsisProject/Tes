define("approval/components/apprflow_editor/views/activity_list/doc_reader_activity_group",["approval/components/apprflow_editor/views/activity_list/activity_group","approval/components/apprflow_editor/views/activity_list/activity_docinfo","hgn!approval/components/apprflow_editor/templates/activity_list/activity_docinfo_dept","hgn!approval/components/apprflow_editor/templates/activity_list/activity_docinfo_read","i18n!approval/nls/approval","i18n!attendance/nls/attendance","jquery.go-popup"],function(e,t,n,r,i,s){function f(e){var t={};return e&&e.type&&e.type.toLowerCase()==="org"?t={id:e.id,name:e.name,deptId:e.id,deptName:e.name,deptType:!0}:(t=_.pick(e,"id","name","position","deptId","deptName","thumbnail"),t.deptType=!1),t}var o=t.extend({template:n,getUniqId:function(e){return e.get("reader").id},parseActivities:function(){var e=this.collection.clone();return e.map(function(e){e.set("removable",!e.get("receivedAt"))}),e.toJSON()}}),u=t.extend({template:r,getUniqId:function(e){return e.get("reader").id},remove:function(e){var t=this.collection.find(function(t){return this.getUniqId(t)===e},this);this.collection.remove(t)},parseActivities:function(){var e=this.collection.clone();return e.map(function(e){var t,n=!1,r;if(_.isEqual(e.get("reader").deptType,!0)&&e.get("detailReader")){if(e.get("detailReader").length==1)t=_.first(e.get("detailReader")).name;else if(e.get("detailReader").length>1){var o=e.get("detailReader").length-1;n=!0,r=_.pluck(e.get("detailReader"),"name").join(","),t=GO.i18n(i["\uc544\ubb34\uac1c \uc678 0\uba85"],{args1:_.first(e.get("detailReader")).name,args2:o})}e.set("displayName",t)}var u=!e.get("receivedAt");this.options.tabId=="reader"&&(u=!e.get("readAt"),!this.options.actionCheck.readerEditable&&e.get("assigned")&&(u=!1)),e.set("removable",u),e.set("hasMany",n),e.set("displayTooltipText",r),e.set("displayReadAt",e.get("readAt")?GO.util.basicDate(e.get("readAt")):s["\ubbf8\ud655\uc778"])},this),e.toJSON()}}),a=e.extend({ActivityItemsView:o,initialize:function(t){t=t||{},t.includeReadAt&&(this.ActivityItemsView=u),e.prototype.initialize.apply(this,arguments),this.listenTo(this.collection,"reset",this.render)},parseOrgTreeData:function(e){if(e&&!e.hasOwnProperty("id"))return!1;var t={},n=this.collection.find(function(t){var n=t.get("reader");if(n)return e.type=="org"?n.deptType&&n.id===e.id:!n.deptType&&n.id===e.id});return n?($.goMessage(i["\uc911\ubcf5\ub41c \ub300\uc0c1\uc785\ub2c8\ub2e4."]),!1):{reader:f(e)}}});return a});