define(["jquery","underscore","backbone","app","when","approval/views/content_top","views/pagination","views/pagesize","approval/views/doclist/base_doclist","approval/views/doclist/doclist_item","approval/models/doclist_item","approval/collections/appr_base_doclist","hgn!approval/templates/doclist_empty","hgn!approval/templates/upcoming_doclist","i18n!nls/commons","i18n!approval/nls/approval"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=c.extend({url:function(){return"/api/approval/upcoming?"+this._makeParam()}}),g=a.extend({columns:{"\uae30\uc548\uc77c":v["\uae30\uc548\uc77c"],"\uae30\uc548\uc790":v["\uae30\uc548\uc790"],"\uacb0\uc7ac\uc120":v["\uacb0\uc7ac\uc120"],"\uacb0\uc7ac\uc591\uc2dd":v["\uacb0\uc7ac\uc591\uc2dd"],"\uae34\uae09":v["\uae34\uae09"],"\uc81c\ubaa9":d["\uc81c\ubaa9"],"\ucca8\ubd80":v["\ucca8\ubd80"],count:7},el:"#content",docFieldModel:null,usePeriod:!0,docFolderType:"appr_wait",initialize:function(e){this.options=e||{},t.bindAll(this,"render","renderPageSize","renderPages"),this.contentTop=s.getInstance(),this.collection=new m,this.initProperty="activityGroup.apprFlow.document.draftedAt",this.initDirection="desc",this.ckeyword="";var n=sessionStorage.getItem("list-history-baseUrl");n&&(n=n.replace(/#/gi,"")),n&&n=="approval/upcoming"?(this.initProperty=sessionStorage.getItem("list-history-property"),this.initDirection=sessionStorage.getItem("list-history-direction"),this.initSearchtype=sessionStorage.getItem("list-history-searchtype"),this.ckeyword=sessionStorage.getItem("list-history-keyword").replace(/\+/gi," "),this.duration=sessionStorage.getItem("list-history-duration"),this.fromDate=sessionStorage.getItem("list-history-fromDate"),this.toDate=sessionStorage.getItem("list-history-toDate"),this.collection.setListParam()):(this.collection.setDuration(),this.collection.setSort(this.initProperty,this.initDirection)),sessionStorage.clear(),this.collection.bind("reset",this.resetList,this),a.prototype.initialize.call(this,e)},events:function(){return t.extend({},a.prototype.events,{"click .sorting":"sort","click .sorting_desc":"sort","click .sorting_asc":"sort"})},renderLayout:function(){var e={"\uc81c\ubaa9":d["\uc81c\ubaa9"],"\uae30\uc548\uc790":v["\uae30\uc548\uc790"],"\uac80\uc0c9":d["\uac80\uc0c9"],"\uacb0\uc7ac\uc591\uc2dd":v["\uacb0\uc7ac\uc591\uc2dd"],"\uacb0\uc7ac\uc120":v["\uacb0\uc7ac\uc120"],placeholder_search:d["\ud50c\ub808\uc774\uc2a4\ud640\ub354\uac80\uc0c9"],"\uae30\uc548\ubd80\uc11c":v["\uae30\uc548\ubd80\uc11c"],search_all:v["\uc804\uccb4\uae30\uac04"],search_month:v["\uac1c\uc6d4"],search_year:v["\ub144"],search_input:v["\uae30\uac04\uc785\ub825"]};this.$el.html(p({lang:e})),this.contentTop.setTitle(v["\uacb0\uc7ac \uc608\uc815 \ubb38\uc11c"]),this.contentTop.render(),this.$el.find("header.content_top").replaceWith(this.contentTop.el),this.renderPageSize()},renderPageSize:function(){this.pageSizeView=new u({pageSize:this.collection.pageSize}),this.pageSizeView.render(),this.pageSizeView.bind("changePageSize",this.selectPageSize,this)},renderPages:function(){this.pageView=new o({pageInfo:this.collection.pageInfo()}),this.pageView.bind("paging",this.selectPage,this),this.$el.find("div.tool_absolute > div.dataTables_paginate").remove(),this.$el.find("div.tool_absolute").append(this.pageView.render().el)},resetList:function(t){var n=this.collection.url().replace("/api/",""),i=r.router.getUrl().replace("#","");i.indexOf("?")<0?r.router.navigate(n,{replace:!0}):i!=n&&r.router.navigate(n,{trigger:!1,pushState:!0}),e(".list_approval > tbody").empty();var s=this.columns,o="approval";t.each(function(t){var n=new f({model:t,listType:o,columns:s});e(".list_approval > tbody").append(n.render().el)}),t.length==0&&e(".list_approval > tbody").html(h({columns:this.columns,lang:{doclist_empty:v["\uacb0\uc7ac\ud560 \ubb38\uc11c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."]}})),this.renderPages()},selectPage:function(e){this.collection.setPageNo(e),this.collection.fetch()},selectPageSize:function(e){this.collection.setPageSize(e),this.collection.fetch()},release:function(){this.$el.off(),this.$el.empty()}});return g});