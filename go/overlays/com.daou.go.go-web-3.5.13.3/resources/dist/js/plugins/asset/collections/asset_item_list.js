define(["backbone"],function(e){var t=e.Collection.extend({url:function(){return["/api/asset",this.assetId,"item",this.urlPart].join("/")},setUrlPart:function(e){e=="reservation"?this.urlPart="":e=="rentable"?this.urlPart="rental/RENTABLE":e=="norentable"?this.urlPart="rental/NORENTABLE":e=="return"?this.urlPart="rental/RETURN":e=="notavailable"?this.urlPart="rental/NOTAVAILABLE":e=="calendar"&&(this.urlPart="reservation/availability")},setAssetId:function(e){this.assetId=e},getItems:function(){return this.map(function(e){return{assetId:e.get("assetId"),useRental:e.get("useRental"),rentStatus:e.get("rentStatus"),key:e.id,label:e.get("name")}})}});return{init:function(e){return new t(e)},getCollection:function(e){var n=new t;n.setAssetId(e.assetId),n.setUrlPart(e.type);var r={};return e.mobile&&(r.page=e.page||"0",r.offset=e.offset||"10",r.property="name",r.direction="desc"),e.type=="calendar"&&(r.startTime=e.startTime,r.endTime=e.endTime),n.fetch({data:r,async:!0,reset:!0}),n}}});