(function(){define(["jquery","backbone","app","i18n!nls/commons","i18n!asset/nls/asset","views/mobile/header_toolbar","hgn!asset/templates/mobile/m_search_result","hgn!asset/templates/mobile/m_search_result_unit","asset/collections/search_result","asset/collections/asset_admin","jquery.go-validation","GO.util"],function(e,t,n,r,i,s,o,u,a,f){var l={non_result:r["\uac80\uc0c9\uacb0\uacfc\uc5c6\uc74c"],pull_down:r["\uc5c5\ub370\uc774\ud2b8\ud558\uc2dc\ub824\uba74 \uc544\ub798\ub85c \ub2f9\uae30\uc138\uc694."],pull_up:r["\ub354 \ubcf4\ub824\uba74 \uc704\ub85c \ub2f9\uae30\uc138\uc694"],keyword:r["\uac80\uc0c9\uc5b4"]},c=t.View.extend({unbindEvent:function(){this.$el.off("vclick",'li[data-btntype="resultEventWrap"]'),this.$el.off("vclick","a[data-btn='paging']")},bindEvent:function(){this.$el.on("vclick",'li[data-btntype="resultEventWrap"]',e.proxy(this.moveEvent,this)),this.$el.on("vclick","a[data-btn='paging']",e.proxy(this.goPaging,this))},initialize:function(){this.headerToolbarView=s,this.offset=10},moveEvent:function(t){t.preventDefault(),t.stopPropagation();var n=e(t.currentTarget),r=n.attr("data-assetid"),i=n.attr("data-itemid"),s=n.attr("data-isrental"),o;if(s=="true"){var u=n.attr("data-rentstatus");if(u=="RENTABLE")o=["asset",r,"item",i,"create","rental"];else if(u=="RETURN"||u=="NORENTABLE")o=["asset",r,"item",i,"status","rental"]}else{var a=n.attr("data-assetname");o=["asset/monthly",r,i,a,GO.util.shortDate(GO.util.now())]}GO.router.navigate(o.join("/"),!0)},goPaging:function(t){GO.EventEmitter.trigger("common","layout:scrollToTop",this),t.stopPropagation();var n=e(t.currentTarget).attr("data-direction"),r=this.collection.page.page||0;return n=="prev"&&r>0?r--:n=="next"&&r++,e(t.currentTarget).parents(".paging").remove(),this.renderList(r),!1},getAttribute:function(){var e=f.getCollection({assetId:GO.util.getSearchParam(window.MsearchParam).assetId,type:"info"});return e},makeTemplete:function(t){var n=t.collection,r=t.attrCol;n&&e.each(n,function(t,n){e.each(n.properties,function(t,n){e.each(r.attributes,function(e,t){n.attributeId==t.id&&(n.attrName=t.name)})})});var i=function(){var t=[];return this.properties&&e.each(this.properties,function(e,n){t.push('<span class="txt">'+n.attrName+" : "+n.content+"</span>")}),t.join('<span class="part">|</span>')},s={dataset:n,parseAttr:i,lang:l};return u(s)},renderList:function(e){GO.util.appLoading(!0);var t=this,n=GO.util.getSearchParam(window.MsearchParam),r={page:e||0,offset:this.offset,nameKeyword:n.nameKeyword,assetId:n.assetId};this.attrCol=this.getAttribute(),this.collection=a.getCollection(r),this.collection.on("reset",function(e,r){var i=t.makeTemplete({collection:t.collection.toJSON(),attrCol:t.attrCol.toJSON()[0]}),s=o({keyword:n.nameKeyword,searchlistUnit:i,lang:l}),u=GO.util.mPaging(e);t.$el.html(s).find("ul.list_normal").append(u),GO.util.appLoading(!1)})},render:function(){this.unbindEvent(),this.bindEvent(),this.$listEl=this.$el.find("ul.list_normal"),this.renderList(GO.router.getSearch("page")||0),this.headerToolbarView.render({isClose:!0,title:r["\uac80\uc0c9\uacb0\uacfc"]})}},{__instance__:null,create:function(){return this.__instance__=new this.prototype.constructor({el:e("#content")}),this.__instance__},render:function(){var e=this.create(),t=arguments.length>0?Array.prototype.slice.call(arguments):[];return this.prototype.render.apply(e,t)}});return c})}).call(this);