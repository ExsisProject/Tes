define("contact/views/side/components/tree_menu",function(require){var e=require("board/components/board_tree/views/base_board_tree_menu"),t=require("text!contact/templates/tree_menu.html"),n=require("contact/collections/company_group"),r=require("text!contact/templates/mobile/m_tree_menu.html"),i=require("app"),s=e.extend({template:t,initialize:function(t){this.useNew=t.useNew!=undefined?t.useNew:!0,this.useOpen=t.useOpen!=undefined?t.useOpen:!0,e.prototype.initialize.apply(this,arguments),this.localStorageKey=t.localStorageKey,this.isMobile=_.isUndefined(t.isMobile)?!1:t.isMobile,this.isMobile&&(this.template=r),this.boardTreeNodes=n.init().set(t.nodes)},getTemplateVars:function(e,t){var n=this,r=n.getStoredCategoryIsOpen(i.session("loginId")+e.id+e.getName()+this.localStorageKey);return this.isOpen=_.isUndefined(r)?!1:!0,_.extend({parentId:e._getParentId(),nodeId:e.id,nodeType:"FOLDER",nodeValue:e.getName(),isAccessible:this.isDeleted?!1:e.isReadable()?e.isReadable():!1,iconType:"folder",hasChild:e.hasChild(),close:!this.isOpen,managable:!1,isWritable:e.isWritable()},t||{})},getStoredCategoryIsOpen:function(e){var t=i.util.store.get(e);return _.isUndefined(t)&&(t=!1),t},isNew:function(e){return this.useNew?e?i.util.isCurrentDate(e,1):!1:!1},render:function(){this.$el.addClass("docs-tree-nodes"),_.each(this.boardTreeNodes.getNodes(this.parentId),function(e){var t=this.boardTreeNodes.get(e.id),n=this.createNodeElement(t);this.$el.append(n)},this),i.EventEmitter.trigger("common","layout:refreshSideScroll")},renderChildView:function(e){var t=new this.constructor({nodes:this.boardTreeNodes,parentId:e.id,menuId:this.menuId,useNew:this.useNew,useOpen:this.useOpen,isMobile:this.isMobile,localStorageKey:this.localStorageKey});return t.render(),t}});return s});