(function(){define(["backbone","hogan","i18n!task/nls/task","task/collections/task_logs","task/views/task_log_item"],function(e,t,n,r,i){var s={history:n["\ubcc0\uacbd\uc774\ub825"],showMore:n["\ub354 \ubcf4\uae30"]},o=t.compile('<div class="reply_wrap"><header class="single_title"><span class="txt">{{lang.history}}</span><span class="num" id="logCount">{{count}}</span></header><div class="aside_wrapper_body"><ul id="logList" class="type_simple_list simple_list_alarm"></ul><div id="moreLog" class="bottom_action"><a class="btn_list_reload"><span class="ic"></span><span class="txt">{{lang.showMore}}</span></a></div></div></div>'),u=e.View.extend({events:{"click #moreLog":"moreLog"},initialize:function(e){this.logs=new r({id:e.taskId})},render:function(){var e=this;return this.logs.fetch({success:function(){e.$el.html(o.render({count:e.logs.models.length,lang:s})),e.renderLogs()}}),this},renderLogs:function(){_.each(this.logs.models,function(e){var t=new i(e);$("#logList").append(t.render().el)}),$("#logCount").text(this.logs.page.total),this.isEnd()&&$("#moreLog").hide()},moreLog:function(){var e=this,t=this.logs.page.page;this.logs.setPage(t+1),this.logs.fetch({success:function(t){e.renderLogs()}})},isEnd:function(){return $("#logList").find("li").length==this.logs.page.total}});return u})}).call(this);