(function(){define(["backbone","app","i18n!nls/commons","i18n!task/nls/task","hgn!task/templates/home","task/collections/todos","task/views/task_title","task/views/todo_item","jquery.go-preloader"],function(e,t,n,r,i,s,o,u){var a={count:r["\uac74"],total:r["\ucd1d"],all:n["\uc804\uccb4"],assign:r["\ub2f4\ub2f9\uc5c5\ubb34"],approve:r["\uc2b9\uc778\uc5c5\ubb34"],refer:r["\ucc38\uc870\uc5c5\ubb34"],request:r["\ub4f1\ub85d\uc5c5\ubb34"],showMore:r["\ub354 \ubcf4\uae30"]},f='<li><p class="data_null"><span class="ic_data_type ic_no_contents"></span><span class="txt">'+r["\ub4f1\ub85d\ub41c \uc5c5\ubb34\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."]+"</span>"+"<br><br>"+"</p>"+"</li>",l=e.View.extend({events:{"click #taskTypes li":"renderTaskByType","click #moreTodos":"moreTodos"},initialize:function(){this.todos=new s},dataFetch:function(){var e=this,t=$.Deferred();return this.todos.fetchAll().done(function(){e.type="all",t.resolve()}),this.initPreloader(t),t},initPreloader:function(e){var t=$.goPreloader();return e.progress(function(){t.render()}),e.always(function(){t.release()}),e},render:function(){this.$el.html(i({data:this.todos,lang:a}));var e=new o({title:r["\ub098\uc758 \uc5c5\ubb34"]});return this.$el.find(".content_top").html(e.el),e.render(),this},renderTodos:function(){this.todos.isEmpty()&&$("#todoList").append(f),_.each(this.todos.models,function(e){var t=new u({task:e,className:e.get("read")?"":"read_no"});$("#todoList").append(t.render().el)}),this.isEnd()&&$("#moreTodos").hide()},renderTaskByType:function(e){var t=this,n=$(e.currentTarget),r=n.attr("data-type");if(r==this.type)return;this.$("#taskTypes").find("li").removeClass("active"),n.addClass("active"),this.type=r,this.todos.setType(r),this.todos.setPage(0);var i=this.todos.fetch({success:function(){$("#todoList").find("li").remove(),$("#moreTodos").show(),t.renderTodos()}});this.initPreloader(i)},moreTodos:function(){var e=this,t=this.todos.listOption.page;this.todos.setPage(t+1),this.todos.fetch({success:function(t){e.renderTodos()}})},isEnd:function(){return $("#todoList").find("li[id]").length==this.todos.page.total}});return l})}).call(this);