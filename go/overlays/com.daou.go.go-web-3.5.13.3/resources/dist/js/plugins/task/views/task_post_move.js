(function(){define(["backbone","app","i18n!nls/commons","i18n!task/nls/task","i18n!board/nls/board","hgn!board/templates/header_select_list","board/collections/header_list","board/views/dept_list"],function(e,t,n,r,i,s,o,u){var a=e.View.extend({initialize:function(e){this.taskIds=_.isArray(e.taskIds)?e.taskIds:[e.taskIds],this.deptId=e.deptId,this.url=e.url},render:function(){var e=this,t=null,s=function(t){var r=t.find("#select_board"),s=r.find("option:selected"),o=r.val(),u=e.url+"/"+o,a=t.find("#move_header_list"),f=a.val(),l=t.find("#write_noti").is(":checked"),c=e.taskIds;if(s.attr("data-headerFlag")=="true"&&s.attr("data-headerRequiredflag")=="true"&&f==0)return $.goError(i["\ub9d0\uba38\ub9ac\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694."]),!1;if(!o)return $.goError(i["\uac8c\uc2dc\ud310\uc744 \uc120\ud0dd\ud574 \uc8fc\uc138\uc694."]),!1;$.goPopup.close(),GO.EventEmitter.trigger("common","layout:setOverlay",!0);var h=GO.util.shortDate(GO.util.toISO8601(new Date)),p={taskIds:c,noti:l,fromDate:l?GO.util.toISO8601(h):null,toDate:l?GO.util.calDate(GO.util.searchEndDate(h),"months",1e4):null};f!=undefined&&f!="0"&&(p.headerId=parseFloat(f)),$.ajax(u,{type:"PUT",contentType:"application/json",data:JSON.stringify(p),success:function(){$.goMessage(i["\uac8c\uc2dc\uae00\uc774 \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4."]),GO.EventEmitter.trigger("common","layout:clearOverlay",!0)},error:function(e){e.responseJSON.message?$.goError(e.responseJSON.message):$.goError(n["\uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."])}})},o=[r["\uc5c5\ubb34\ub97c \ub4f1\ub85d\ud560 \uac8c\uc2dc\ud310\uc744 \uc120\ud0dd\ud558\uc138\uc694."]];t=$.goPopup({pclass:"layer_normal layer_item_move",width:330,header:i["\uac8c\uc2dc\ubb3c \uc774\ub3d9"],title:o,modal:!0,contents:'<br /><br /><div id="deptList"></div>',buttons:[{btype:"confirm",btext:r["\ub4f1\ub85d"],autoclose:!1,callback:s}]});var a=e.deptId;u.render({id:".go_popup #deptList",boardList:!0,deptId:a,boardId:"",isCommunity:!1,boardType:"classic",postId:"",isMove:!0,checkStickable:!0}),t.reoffset(),$("#deptList select#select_board").die(),$("#deptList select#select_board").live("change",function(){e.changeBoardList()}),$("#deptList select#dept_select").live("change",function(){e.changeBoardList()})},changeBoardList:function(){var e=$("#select_board option:selected");this.attachHeaderSelect(e.val(),e.attr("data-headerflag"))},attachHeaderSelect:function(e,t){var n=[];t=="true"&&(n=o.getHeaderList({boardId:e}).toJSON());if(n.length>0){var r=s({dataset:n,defaultSelect:i["\ub9d0\uba38\ub9ac \uc120\ud0dd"],selectId:"move_header_list"});$("#header_dt").show(),$(".go_popup #deptList #board_header_wrap").html(r)}else $("#header_dt").hide(),$(".go_popup #deptList #board_header_wrap").html("")}});return a})}).call(this);