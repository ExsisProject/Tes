(function(){define(["backbone","hogan","app","i18n!task/nls/task","i18n!nls/commons","task/views/side_folder"],function(e,t,n,r,i,s){var o=t.compile('<p class="title"><a><ins class="ic"></ins>{{#isShared}}<span class="ic_side ic_shareboard"></span>{{/isShared}}<span class="txt" title="{{dept.name}}">{{dept.name}} {{#dept.deleted}} ('+i["\uc0ad\uc81c\ub41c \ubd80\uc11c"]+" ) {{/dept.deleted}}</span>"+"</a>"+"{{#dept.managable}}"+"{{#isDeptList}}"+'<span class="btn_wrap">'+'<span data-deptId="{{dept.id}}" class="ic_side ic_side_setting" title="{{lang.folderAdmin}}"></span>'+"</span>"+"{{/isDeptList}}"+"{{/dept.managable}}"+"</p>"+'<ul id="sideFolderList">'+"</ul>"),u=t.compile('<li class="delimiter"><p class="title"><ins class="ic"></ins><span class="txt" title="{{name}}">{{name}}</span></p></li>'),a='<li class="null"><p class="title"><a><span class="txt">'+r["\uc0dd\uc131\ub41c \uc5c5\ubb34 \ud3f4\ub354\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."]+"</span></a>"+"</p>"+"</li>",f={folderAdmin:r["\ud3f4\ub354 \uad00\ub9ac"]},l=e.View.extend({tagName:"li",events:{"click span[data-deptId]":"goEditDeptFolder"},initialize:function(e){this.options=e||{},this.department=this.options.dept,this.isDeptList=this.options.isDeptList},render:function(){var e=this.department.toJSON(),t=this.department.get("shared");return this.$el.html(o.render({lang:f,dept:e,isDeptList:this.isDeptList,isShared:t})),t?this.$el.addClass("org_share"):this.$el.addClass("org"),this.isDeptList&&this.$el.attr("data-item","department"+this.department.id),this},renderFolders:function(){var e=this.$el.find("#sideFolderList"),t=this.department.get("folders");t.length||e.append(a),_.each(t,function(t){if(!t.deptId){e.append(u.render(t));return}var n=new s({folder:t,isDeptList:this.isDeptList,department:this.department});e.append(n.render().el)},this)},goEditDeptFolder:function(){var e=this,t=function(){GO.util.store.set("taskFolderId",null,{type:"session"}),GO.util.store.set("sideItem","department"+e.department.id,{type:"session"}),n.router.navigate("task/dept/"+e.department.id+"/admin",!0),$(document).scrollTop(0)};GO.util.editorConfirm(t)}});return l})}).call(this);