(function(){define(["backbone","app","i18n!nls/commons","i18n!task/nls/task","hgn!task/templates/task_title","task/views/task_search_popup","dashboard/views/search/detail_search_popup"],function(e,t,n,r,i,s,o){var u={searchDetail:n["\uc0c1\uc138\uac80\uc0c9"],search:n["\uac80\uc0c9"],total:r["\ucd1d"],count:r["\uac74"],app_search:n["\uc571\uac80\uc0c9"],unified_search:n["\ud1b5\ud569\uac80\uc0c9"],task:n["\uc5c5\ubb34"],detail:n["\uc0c1\uc138"]},a=e.View.extend({events:{"click #searchDetail":"detailPopup","click #searchSimple":"searchSimple","keypress #keyword":"searchAction"},initialize:function(e){this.title=e.title,this.subTitle=e.subTitle,this.isPrivate=e.isPrivate,this.count=e.count,this.hasFavorite=e.hasFavorite,this.isFavorite=e.isFavorite},render:function(){return this.$el.html(i({lang:u,title:this.title,subTitle:this.subTitle,isPrivate:this.isPrivate,count:this.count,hasFavorite:this.hasFavorite,isFavorite:this.isFavorite})),this.$el.find("input[placeholder]").placeholder(),this},detailPopup:function(e){var t=$("#searchType").val();if(t!="appSearch"){this.detailTotalSearchPopup(e);return}var r=this,i=new s,o=$(e.currentTarget).offset();this.searchPopup=$.goSearch({modal:!0,header:n["\uc0c1\uc138\uac80\uc0c9"],offset:{top:parseInt(o.top+30,10),right:7},callback:function(){i.validate()&&r.search(i.getSearchParam())}}),this.searchPopup.find(".content").html(i.el),i.dataFetch().done(function(){i.render()})},search:function(e){var n=$("#searchType").val();n=="appSearch"?t.router.navigate("task/search?"+this.serializeObj(e),!0):(e.offset=5,t.router.navigate("unified/search?"+this.serializeObj(e),!0))},searchSimple:function(){var e=this.$("#keyword").val();e=$.trim(e),$("input#keyword").attr("placeholder")===e&&(e="");if(!e){$.goSlideMessage(n["\uac80\uc0c9\uc5b4\ub97c \uc785\ub825\ud558\uc138\uc694."],"caution");return}if(e.length<2||e.length>64){$.goMessage(GO.i18n(n["0\uc790\uc774\uc0c1 0\uc774\ud558 \uc785\ub825\ud574\uc57c\ud569\ub2c8\ub2e4."],{arg1:2,arg2:64}));return}if($.goValidation.isInValidEmailChar(e)){$.goMessage(n["\uba54\uc77c \uc0ac\uc6a9 \ubd88\uac00 \ubb38\uc790"]);return}var t={stype:"simple",keyword:e};this.search(t)},searchAction:function(e){e.which==13&&this.searchSimple()},serializeObj:function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},detailTotalSearchPopup:function(e){var t=this,r=new o,i=$(e.currentTarget).offset();this.searchPopup=$.goSearch({modal:!0,header:n["\uc0c1\uc138\uac80\uc0c9"],offset:{top:parseInt(i.top+30,10),right:7},callback:function(){r.validate()&&t.search(r.getSearchParam())}}),this.searchPopup.find(".content").html(r.el),r.render()}});return a})}).call(this);