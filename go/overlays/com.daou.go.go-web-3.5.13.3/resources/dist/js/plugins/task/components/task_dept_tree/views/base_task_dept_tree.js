define("task/components/task_dept_tree/views/base_task_dept_tree",function(require){var e=require("backbone"),t=require("hogan"),n=e.View.extend({tagName:"ul",template:"",initialize:function(e){var t=e||{};this.lastId=t.lastId,this.parentId=t.parentId,this.deptId=t.deptId,this.taskTreeNodes=t.nodes},render:function(){this.$el.addClass("task-tree-nodes"),_.each(this.taskTreeNodes,function(e){var t=this.createNodeElement(e);if(e.children.length>0){var n=this.renderChildView(e,this.lastId);t.append(n.el),this.isClosedNode(e.id)&&this.foldNode(t)}this.$el.append(t)},this)},renderChildView:function(e,t){var n=new this.constructor({nodes:this.deptNode.get("children"),parentId:e.get("data").parentId,lastId:t,deptId:e.get("data").id});return n.render(),n},createNodeElement:function(e,t){return $(this._renderTemplate(this.getTemplateVars(e,t)))},getTemplateVars:function(e,t){return _.extend({deptId:e.data.id,name:e.data.name,parentId:e.data.parentId,isLastNode:e.data.id==this.lastId?!0:!1,isClosedNode:e.children.length<=0,hasChildren:e.data.childrenCount>0},t||{})},isClosedNode:function(e){return!1},foldNode:function(e){},unfoldNode:function(e){},_renderTemplate:function(){var e=t.compile(_.result(this,"template"));return e.render.apply(e,arguments)}});return n});