(function(){define(["backbone","i18n!nls/commons","i18n!task/nls/task","hgn!task/templates/_share_dept","go-nametags"],function(e,t,n,r,i){var s={"delete":t["\uc0ad\uc81c"],all:n["\uc804\uccb4"],piece:n["\uc77c\ubd80"]},o=e.View.extend({tagName:"tr",events:{"click .add-btn":"addNameTag","click span.ic_basket_bx":"destroy","change input[data-type=readOption]":"toggleShareView"},initialize:function(e){this.dataSet=e,this.render()},render:function(){this.$el.html(r({data:this.dataSet,lang:s})),this.$el.attr("data-circleId",this.dataSet.id),this.$el.attr("id",this.dataSet.nodeId),this.renderNameTagView()},renderNameTagView:function(){this.nameTag=i.create({},{useAddButton:!0}),this.$el.find("div.wrap_name_tag").html(this.nameTag.el),_.each(this.dataSet.members,function(e){this.nameTag.addTag(e.id,e.name+" "+e.position||"",{removable:!0})},this)},addNameTag:function(){var e=this;$.goOrgSlide({loadId:this.$el.attr("id"),hideOrg:!this.$el.find("input[type=checkbox]").is(":checked"),contextRoot:GO.contextRoot,isMyDeptOpened:!1,callback:$.proxy(function(t){var n=t.displayName||t.name;e.nameTag.addTag(t.id,n,{removable:!0,attr:t})})})},destroy:function(){this.$el.trigger("shareDept:destroy",[this]),this.$el.remove()},toggleShareView:function(e){var t=this.$el.find("div.wrap_name_tag");$(e.target).val()=="all"?(t.hide(),t.find("li[data-id]").remove()):t.show()}});return o})}).call(this);