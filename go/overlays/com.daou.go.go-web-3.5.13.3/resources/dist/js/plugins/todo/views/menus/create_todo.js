define("todo/views/menus/create_todo",["app","components/history_menu/main","hgn!todo/templates/menus/create_todo_menu","text!todo/templates/partials/_input_board_title.html","text!todo/templates/partials/_select_public_option.html","text!todo/templates/partials/_confirm_button.html","todo/models/todo","todo/libs/util","i18n!todo/nls/todo","i18n!nls/commons","jquery.go-validation","jquery.go-popup"],function(e,t,n,r,i,s,o,u,a,f){function p(){this.$el.find(h.icon_public_status).removeClass("ic_public").addClass("ic_private"),this.$el.find(h.public_status_text).text(f["\ube44\uacf5\uac1c"]),this.$el.find(".public-option-select a").removeClass("select"),this.$el.find(h.option_private).addClass("select")}function d(){this.$el.find(h.icon_public_status).removeClass("ic_private").addClass("ic_public"),this.$el.find(h.public_status_text).text(f["\uacf5\uac1c"]),this.$el.find(".public-option-select a").removeClass("select"),this.$el.find(h.option_public).addClass("select")}function v(){var e=this.model.isPublic()?d:p;return e.call(this)}var l,c=t.HistoriableMenuView,h={public_option_status:".public-option-status",public_option_select:".public-option-select",option_public:".option-public",option_private:".option-private",icon_public_status:".icon-public-status",public_status_text:".public-status-text"};return l=c.extend({id:"create-todo-menu",className:"content layer_new_board",name:"create-todo-menu",title:a["\uc0c8\ubcf4\ub4dc \ub9cc\ub4e4\uae30"],template:n,myTodoList:null,events:{"click .btn-modify":"_modifyPublicOption","click .option-private":"_setPrivateOption","click .option-public":"_setPublicOption","click .btn-confirm":"_confirm","click .btn-cancel":"_cancel","submit form":"_confirm"},initialize:function(e){e=e||{},this.model||(this.model=new o),e.myTodoList&&(this.myTodoList=e.myTodoList),c.prototype.initialize.call(this,e)},render:function(){this.$el.empty().append(this.template({"private?":this.model.isPrivate(),"public_option_hide?":!0,label:{name:f["\uc774\ub984"],input_title_value:a["\uc0c8\ubcf4\ub4dc \ub9cc\ub4e4\uae30"],"private":f["\ube44\uacf5\uac1c"],"public":f["\uacf5\uac1c"],confirm:f["\ud655\uc778"],cancel:f["\ucde8\uc18c"],modify:f["\ubcc0\uacbd\ud558\uae30"]},msg:{about_private:a["\ubcf4\ub4dc \ube44\uacf5\uac1c \uc548\ub0b4\uba54\uc2dc\uc9c0"],about_public:a["\ubcf4\ub4dc \uacf5\uac1c \uc548\ub0b4\uba54\uc2dc\uc9c0"]}},{_input_board_title:r,_select_public_option:i,_confirm_button:s})),v.call(this)},_modifyPublicOption:function(e){this.$el.find(h.public_option_status).hide(),this.$el.find(h.public_option_select).show()},_setPrivateOption:function(e){e.preventDefault(),p.call(this),this.model.setPrivate()},_setPublicOption:function(e){e.preventDefault(),d.call(this),this.model.setPublic()},_confirm:function(t){var n=this.$el.find("input[name=title]").val(),r=this;if(!$.goValidation.isCheckLength(1,1e3,n))return $.goMessage(e.i18n(f["0\uc790\uc774\uc0c1 0\uc774\ud558 \uc785\ub825\ud574\uc57c\ud569\ub2c8\ub2e4."],{arg1:1,arg2:1e3})),r.$el.find("input[name=title]").focus(),!1;t.preventDefault(),u.promiseModelSave(this.model,{title:n}).then(function(t){r.myTodoList&&r.myTodoList.add(t),r.close(),e.router.navigate("todo/"+t.id,{trigger:!0,pushState:!0})})},_cancel:function(e){e.preventDefault(),this.back()}},{SELECTORS:h}),l});