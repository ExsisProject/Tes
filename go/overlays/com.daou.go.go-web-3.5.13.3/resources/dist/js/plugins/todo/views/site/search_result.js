define("todo/views/site/search_result",["backbone","moment","app","todo/models/todo_search_results","todo/libs/util","hgn!todo/templates/search_result","i18n!nls/commons","i18n!todo/nls/todo"],function(e,t,n,r,i,s,o,u){function l(e){var t=h(),r=(t.page||0)+1;e.length>0?this.$el.empty().append(this.template({contextRoot:n.config("contextRoot"),collection:p(e),currentPage:r,totalPage:e.page.total,"showPaging?":d(e),prevPage:m(e),nextPage:g(e),lastPage:y(e),"firstPageGroup?":w(e),"firstPage?":S(e),"lastPageGroup?":E(e),"lastPage?":x(e),pagingData:b(e),label:{dueDate:u["\uae30\ud55c\uc77c"],prev:o["\uc774\uc804"],next:o["\ub2e4\uc74c"]}})):c.call(this)}function c(){this.$el.empty().append('<p class="data_null"><span class="ic_classic ic_no_result"></span><span class="txt">'+o["\uac80\uc0c9\uacb0\uacfc\uc5c6\uc74c"]+"</span></p>")}function h(){return n.router.getSearch()}function p(e){var t=e.toJSON();return _.map(t,function(e){e.dueDate&&(e.dueDate=i.parseDuedate(e.dueDate))}),t}function d(e){var t=e.page;return t.total>1}function v(e){var t=e.page;return Math.ceil(t.total/t.offset)}function m(e){var t=e.page,n=t.page-1;return n>0?n:0}function g(e){var t=e.page,n=v(e),r=t.page+1;return r>=n?n:r}function y(e){return v(e)-1}function b(e){var t=[],n=e.page,r=v(e),i=f*Math.floor(n.page/f)+1,s=i+f-1;s>r&&(s=r);for(var o=i;o<=s;o++)t.push({page:o-1,label:o,isCurrent:o===n.page+1});return t}function w(e){var t=e.page;return t.page<1}function E(e){var t=e.page,n=Math.floor(t.page+1/f)+1;return n===v(e)}function S(e){return e.page.page===0}function x(e){return e.page.lastPage}var a,f=10;return a=e.View.extend({className:"content_page combine_search_page",template:s,events:{"click .page-link":"_changePage"},initialize:function(e){this.collection||(this.collection=new r)},render:function(){var e=this;return this.collection.getFilteredList(h()).then(_.bind(l,this)).otherwise(function(t){console.warn("[:::ToDO+ Rendering Error:::] : Caused by..."),console.log(t.stack?t.stack:t.message),c.call(e)})},_changePage:function(e){var t=$(e.currentTarget),r=parseInt(t.data("page")),i=h();e.preventDefault(),t.hasClass("disabled")||(i.page=r||0,n.router.navigate("todo/search?"+n.util.jsonToQueryString(i),{pushState:!0,trigger:!0}))}}),a});