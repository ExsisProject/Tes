define("todo/views/menus/select_label",["components/history_menu/main","hgn!todo/templates/menus/select_label_menu","todo/views/menus/edit_label","i18n!todo/nls/todo","i18n!nls/commons"],function(e,t,n,r,i){function u(){var e=this,t=this.model.get("labels");this.$el.find(".ui-label").each(function(t,n){var r=$(n).data("labelid"),i=e.model.hasLabel(r);i&&$(n).addClass("select")})}function a(e){e.hasClass("select")?e.removeClass("select"):e.addClass("select")}var s,o=e.HistoriableMenuView;return s=o.extend({id:"select-label-menu",className:"content",name:"select-label-menu",title:r["\ub77c\ubca8"],template:t,todoModel:null,events:{"click .ui-label":"_toggleSelectLabel","click .btn-modify-labelname":"_callEditLabelMenu"},initialize:function(e){e=e||{},this.todoModel=e.todoModel,o.prototype.initialize.call(this,e),this.todoModel.on("change:labels",this.render,this)},render:function(){this.$el.empty().append(this.template({labels:this.todoModel.get("labels"),label:{modify_name:r["\ub77c\ubca8\uc774\ub984 \ubcc0\uacbd"]}})),this.setMenuClass("layer_label"),u.call(this)},_toggleSelectLabel:function(e){var t=$(e.currentTarget),n=t.data("labelid"),r=this.model.get("labels"),i=t.hasClass("select")?"removeLabel":"addLabel";e.preventDefault(),this.model[i].call(this.model,n).then(function(e){a(t)})},_callEditLabelMenu:function(e){var t;e.preventDefault(),t=new n({model:this.todoModel}),this.forward(t)}}),s});