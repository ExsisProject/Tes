define("todo/views/mobile/side",["backbone","when","app","hgn!todo/templates/mobile/mobile_side","text!todo/templates/partials/_mobile_side_menu.html","i18n!todo/nls/todo"],function(e,t,n,r,i,s){function u(){this.$el.empty().append(this.template({myTodoList:a(this.collections.my),favoriteList:a(this.collections.favorite),"hasFavorite?":this.collections.favorite.length>0,label:{favorite:s["\uc990\uaca8\ucc3e\ub294 \ubcf4\ub4dc"],mytodo:s["\ub0b4 \ubcf4\ub4dc"]}},{_mobile_side_menu:i}))}function a(e){var t=e.toJSON(),r={my:"ic_board",favorite:"ic_board"}[e.modelType]||"ic_board";return _.map(t,function(e){e.relativeLink="todo/"+e.id,e.absoluteLink=n.config("contextRoot")+"app/"+e.relativeLink,e.icon=r}),t}var o;return o=e.View.extend({id:"todo-side-menu",collections:{},template:r,events:{"vclick a[data-category]":"_tabSideMenu","vclick a[data-navigate]":"goSideMenu"},initialize:function(e){this.collections=e.collections,this.listenTo(this.collections.my,"add",this.reload),this.listenTo(this.collections.favorite,"add",this.reload),this.listenTo(this.collections.favorite,"remove",this.reload),this.listenTo(this.collections.favorite,"resort",this.reload)},render:function(){var e=t.defer();return u.call(this),$("body").data("sideApp",this.options.packageName),e.resolve(this),e.promise},goSideMenu:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.currentTarget),r=t.attr("data-navigate");n.router.navigate(r,{trigger:!0})},reload:function(){u.call(this)},getStoredCategory:function(){return n.util.store.get(CATE_STORE_KEY)},storeCategory:function(e){},_tabSideMenu:function(e){e.preventDefault();var t=$(e.currentTarget);this.storeCategory(t.data("category")),n.router.navigate(t.data("href"),{trigger:!0,pushState:!0}),e.stopPropagation()}}),o});