define("todo/views/menus/public_option",["components/history_menu/main","hgn!todo/templates/menus/public_option_menu","text!todo/templates/partials/_select_public_option.html","text!todo/templates/partials/_confirm_button.html","todo/models/todo","todo/libs/util","i18n!todo/nls/todo","i18n!nls/commons"],function(e,t,n,r,i,s,o,u){function h(){this.$el.find(".public-option-select a").removeClass("select"),this.$el.find(l.option_private).addClass("select")}function p(){this.$el.find(".public-option-select a").removeClass("select"),this.$el.find(l.option_public).addClass("select")}var a,f=e.HistoriableMenuView,l={option_public:".option-public",option_private:".option-private"},c={"public":"Y","private":"N"};return a=f.extend({id:"public-option-menu",className:"content",name:"public-option-menu",title:o["\uacf5\uac1c\ubc94\uc704 \ubcc0\uacbd"],template:t,publicFlag:c.private,afterSave:function(){},events:{"click .option-private":"_setPrivateOption","click .option-public":"_setPublicOption","click .btn-confirm":"_confirm","click .btn-cancel":"_cancel"},initialize:function(e){e=e||{},this.model||(this.model=new i),this.publicFlag=this.model.get("publicFlag"),this.afterSave=e.afterSave||function(){},f.prototype.initialize.call(this,e)},render:function(){this.$el.empty().append(this.template({"private?":this.model.isPrivate(),label:{"private":u["\ube44\uacf5\uac1c"],"public":u["\uacf5\uac1c"],confirm:u["\ud655\uc778"],cancel:u["\ucde8\uc18c"]},msg:{about_private:o["\ubcf4\ub4dc \ube44\uacf5\uac1c \uc548\ub0b4\uba54\uc2dc\uc9c0"],about_public:o["\ubcf4\ub4dc \uacf5\uac1c \uc548\ub0b4\uba54\uc2dc\uc9c0"]}},{_select_public_option:n,_confirm_button:r}))},_setPrivateOption:function(e){e.preventDefault(),h.call(this),this.publicFlag=c.private},_setPublicOption:function(e){e.preventDefault(),p.call(this),this.publicFlag=c.public},_confirm:function(e){var t=this;e.preventDefault(),s.promiseModelSave(this.model,{publicFlag:this.publicFlag}).then(function(e){t.close(),t.afterSave.call(t,e)})},_cancel:function(e){e.preventDefault(),this.back()}}),a});