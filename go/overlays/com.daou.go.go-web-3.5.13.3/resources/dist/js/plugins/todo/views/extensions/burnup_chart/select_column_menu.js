define("todo/views/extensions/burnup_chart/select_column_menu",["backbone","todo/views/extensions/burnup_chart/column_store","hgn!todo/templates/column_select_menu","todo/constants","i18n!nls/commons","i18n!todo/nls/todo"],function(e,t,n,r,i,s){function a(){var e=t.get(this.model.id);this.$el.find("input:checkbox[name=id]").each(function(t,n){var r=$(n);_.indexOf(e,parseInt(r.val()))>-1&&r.prop("checked",!0)})}function f(){setTimeout(_.bind(function(){var e=this;$(document).on("go.todo.clearmenu",function(t){var n=$(t.relatedTarget);if(n.closest(e.$el).length>0)return;e.$el.is(":visible")&&e.remove()})},this),300)}var o,u="select-column-menu";return o=e.View.extend({id:u,className:"array_option",template:n,events:{"click input[type=checkbox]":"_onChecked","click .close-btn":"_close"},initialize:function(e){this.options=e||{},this.$el.data("instance",this)},render:function(){this.$el.append(this.template({columns:this.model.get("categories"),label:{all:i["\uc804\uccb4"],addColumn:s["\uce7c\ub7fc \ucd94\uac00"],close:i["\ub2eb\uae30"]}})),a.call(this),f.call(this)},remove:function(){e.View.prototype.remove.apply(this,arguments),$(document).off("go.todo.clearmenu")},check:function(e){var n=this.$el.find("#col-id-"+e);n.length>0&&(n.prop("checked",!0),t.add(this.model.id,parseInt(e)))},uncheck:function(e){var n=this.$el.find("#col-id-"+e);n.length>0&&(n.prop("checked",!1),t.remove(this.model.id,parseInt(e)))},_onChecked:function(e){var n=$(e.currentTarget),r=n.prop("checked");r?t.add(this.model.id,parseInt(n.val())):t.remove(this.model.id,parseInt(n.val())),this.options.onClicked&&this.options.onClicked(n)},_close:function(e){e.preventDefault(),this.remove()}},{attachTo:function(e,t){var n,r=e.offset();return this.clear(),n=new o(t||{}),$("body").append(n.el),n.$el.css({position:"absolute",left:r.left,top:r.top+e.outerHeight()}),n.render(),n},clear:function(){$("#"+u).data("instance")&&$("#"+u).data("instance").remove()},toggle:function(e,t){$("#"+u).length>0&&$("#"+u).data("instance")?$("#"+u).data("instance").remove():this.attachTo(e,t)}}),o});