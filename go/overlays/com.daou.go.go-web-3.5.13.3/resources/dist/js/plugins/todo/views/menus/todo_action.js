define("todo/views/menus/todo_action",["app","components/history_menu/main","hgn!todo/templates/menus/menu_items_menu","todo/views/menus/add_member","todo/views/menus/remove_confirm","i18n!todo/nls/todo"],function(e,t,n,r,i,s){function a(){var t=[];return t.push({classname:"share-board",next_view:"",menu_name:s["\uacf5\uc720 \uc124\uc815"],icon_class:!1,has_child:!1}),this.model.isOwner(e.session("id"))?t.push({classname:"remove-board",next_view:"",menu_name:s["\ubcf4\ub4dc \uc0ad\uc81c"],icon_class:!1,has_child:!1}):this.model.isMember(e.session("id"))&&t.push({classname:"leave-board",next_view:"",menu_name:s["\ubcf4\ub4dc\uc5d0\uc11c \ub098\uac00\uae30"],icon_class:!1,has_child:!1}),t}var o,u=t.HistoriableMenuView;return o=u.extend({id:"board-action-menu",className:"content",template:n,name:"board-action-menu",title:s["\ubcf4\ub4dc \uba54\ub274"],events:{"click .share-board a":"_callAddMemberMenu","click .remove-board a":"_callRemoveConfirmMenu","click .leave-board a":"_callLeaveConfirmMenu"},initialize:function(e){e=e||{},u.prototype.initialize.call(this,e),this.setMenuClass("layer_todo_board")},render:function(){this.$el.empty().append(this.template({menulist:a.call(this)}))},_callAddMemberMenu:function(t){var n;t.preventDefault(),this.model.isMember(e.session("id"))&&(n=new r({model:this.model}),this.forward(n))},_callRemoveConfirmMenu:function(t){var n=this;if(!this.model.isOwner(e.session("id")))return!1;t.preventDefault(),this.forward(new i({subject:s["\ubcf4\ub4dc \uc0ad\uc81c \ud0c0\uc774\ud2c0"],description:s["\ubcf4\ub4dc \uc0ad\uc81c \ud655\uc778 \uba54\uc2dc\uc9c0"],afterClick:function(){n.model.remove().then(function(t){n.close(),e.router.navigate("todo",{pushState:!0,trigger:!0})})}}))},_callLeaveConfirmMenu:function(t){var n=this,r=e.session("id");if(this.model.isOwner(r)||!this.model.isMember(r))return!1;t.preventDefault(),this.forward(new i({subject:s["\ubcf4\ub4dc\ub098\uac00\uae30 \ud0c0\uc774\ud2c0"],description:s["\ubcf4\ub4dc\ub098\uac00\uae30 \ud655\uc778 \uba54\uc2dc\uc9c0"],buttonText:s["\ub098\uac00\uae30"],afterClick:function(){n.model.leaveMember(r).then(function(t){n.close(),e.router.navigate("todo",{pushState:!0,trigger:!0})})}}))}}),o});