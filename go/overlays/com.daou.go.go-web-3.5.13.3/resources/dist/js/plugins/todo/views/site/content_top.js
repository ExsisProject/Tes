define(["app","views/content_top","todo/views/menus/main","i18n!nls/commons"],function(e,t,n,r){function s(){var e=[];return e.push('<div class="ui-btn-todolist critical">'),e.push('<a href="#" class="btn_menu" data-bypass><span class="ic_board ic_menu"></span><span class="txt">Board</span><span class="ic_board ic_open2_w" title=""></span></a>'),e.push("</div>"),e.join("\n")}var i;return i=t.extend({collections:{},searchUrl:"todo/search",events:function(){var e=_.result(t.prototype,"events");return _.extend({},e,{"click .ui-btn-todolist a":"_openTodoListMenu","change #searchType":"toggleSelect"})},initialize:function(e){e=e||{},e.myTodoList&&(this.collections.myTodoList=e.myTodoList),e.favoriteTodoList&&(this.collections.favoriteTodoList=e.favoriteTodoList),e.title=s(),t.prototype.initialize.call(this,e)},render:function(){t.prototype.render.apply(this,arguments),this.toggleSelect()},renderTitle:function(){this.$el.find("h1").replaceWith(this.title)},setAppSearchTitle:function(){this.$el.find('#searchType option[value="appSearch"]').html(r["ToDO+"])},showDetailSearch:function(e){e.preventDefault();var t=$(e.currentTarget),n=t.offset(),r=$("#searchType").val();return r!="appSearch"&&this.detailPopup(e),!1},_openTodoListMenu:function(e){var t=$(e.currentTarget),r=t.offset(),i;e.preventDefault(),n.attachTo(t,new n.TodoListMenuView({myTodoList:this.collections.myTodoList,favoriteTodoList:this.collections.favoriteTodoList}))},toggleSelect:function(){$("#searchType").val()!="appSearch"?$("#btn_DetailSearch").show():$("#btn_DetailSearch").hide()}}),i});