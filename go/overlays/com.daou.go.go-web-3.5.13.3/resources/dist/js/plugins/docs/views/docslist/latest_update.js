define("docs/views/docslist/latest_update",function(require){var e=require("jquery"),t=require("underscore"),n=require("backbone"),r=require("when"),i=require("app"),s=require("docs/views/base_docs"),o=require("docs/views/docslist/base_docs_list"),u=require("views/pagesize"),a=require("views/pagination"),f=require("docs/views/docslist/doclist_item"),l=require("docs/collections/docs_base_list"),c=require("docs/models/docs_doc_item"),h=require("hgn!docs/templates/docslist/base_docslist"),p=require("hgn!docs/templates/docslist/docslist_empty"),d=require("i18n!nls/commons"),v=require("i18n!docs/nls/docs"),m=require("i18n!approval/nls/approval"),g={"\uc81c\ubaa9":v["\uc81c\ubaa9"],"\ub0b4\uc6a9":d["\ub0b4\uc6a9"],"\ub4f1\ub85d\uc790":v["\ub4f1\ub85d\uc790"],"\uac80\uc0c9":d["\uac80\uc0c9"],placeholder_search:d["\ud50c\ub808\uc774\uc2a4\ud640\ub354\uac80\uc0c9"],search_all:m["\uc804\uccb4\uae30\uac04"],search_month:m["\uac1c\uc6d4"],search_year:m["\ub144"],search_input:m["\uae30\uac04\uc785\ub825"]},y=l.extend({initialize:function(e){l.prototype.initialize.apply(this,arguments),this.folderType=e.folderType},model:c,url:function(){return"/api/docs/folder/latestupdate?"+this._makeParam()}});return s.extend({initialize:function(e){this.initProperty="completeDate",this.initDirection="desc",this.initPage=20,this.ckeyword="",this.collection=new y({folderType:"latestupdate"}),this.collection.usePeriod=!0;var t=sessionStorage.getItem("list-history-baseUrl"),n=new RegExp("(#)?docs/folder/latestupdate$");t&&n.test(t)?(this.initProperty=sessionStorage.getItem("list-history-property"),this.initDirection=sessionStorage.getItem("list-history-direction"),this.initSearchtype=sessionStorage.getItem("list-history-searchtype"),this.ckeyword=sessionStorage.getItem("list-history-keyword").replace(/\+/gi," "),this.duration=sessionStorage.getItem("list-history-duration"),this.fromDate=sessionStorage.getItem("list-history-fromDate"),this.toDate=sessionStorage.getItem("list-history-toDate"),this.collection.setListParam()):(this.collection.pageSize=this.initPage,this.collection.setDuration(),this.collection.setSort(this.initProperty,this.initDirection)),sessionStorage.clear(),this.collection.bind("reset",this.resetList,this),s.prototype.initialize.apply(this,arguments)},columns:{"\ub4f1\ub85d\uc77c":d["\ub4f1\ub85d\uc77c"],"\uc81c\ubaa9":v["\uc81c\ubaa9"],"\ucca8\ubd80":v["\ucca8\ubd80"],"\ubb38\uc11c\uc704\uce58":v["\uc704\uce58"],"\ub4f1\ub85d\uc790":v["\ub4f1\ub85d\uc790"],"\ubb38\uc11c\ubc88\ud638":v["\ubb38\uc11c\ubc88\ud638"],count:6},sorts:{"\ub4f1\ub85d\uc77c":"completeDate","\uc81c\ubaa9":"title","\ub4f1\ub85d\uc790":"creatorName"},render:function(){return s.prototype.render.apply(this,arguments),e("#content header h1").text(v["\ucd5c\uadfc \uc5c5\ub370\uc774\ud2b8 \ubb38\uc11c"]),this.$el.html(h({lang:g,usePage:!0})),this._renderLatestUpdateList(),this._renderPageSize(),this._renderPages(),this},_renderPageSize:function(){this.pageSizeView=new u({pageSize:this.collection.pageSize}),this.pageSizeView.render(),this.pageSizeView.bind("changePageSize",this.selectPageSize,this)},_renderPages:function(){this.pageView=new a({pageInfo:this.collection.pageInfo()}),this.pageView.bind("paging",this.selectPage,this),this.$el.find("div.tool_absolute > div.dataTables_paginate").remove(),this.$el.find("div.tool_absolute").append(this.pageView.render().el)},selectPage:function(e){this.collection.setPageNo(e),this.collection.fetch()},selectPageSize:function(e){this.collection.setPageSize(e),this.collection.fetch()},_renderLatestUpdateList:function(){var e=new o({collection:this.collection,columns:this.columns,sorts:this.sorts,duration:this.duration,fromDate:this.fromDate,toDate:this.toDate,usePeriod:!0,usePage:!0});this.$el.find("#base_doclist").append(e.render().el),e.setInitSort(),this._bindEvent(e)},_bindEvent:function(e){this.$el.find("input#keyword").keydown(function(t){e.searchByEnter(t)}),this.$el.find(".btn_search2").click(function(t){e.search()})},resetList:function(t){var n=this.collection.url().replace("/api/",""),r=i.router.getUrl().replace("#","");r.indexOf("?")<0?i.router.navigate(n,{replace:!0}):r!=n&&i.router.navigate(n,{trigger:!1,pushState:!0}),e(".list_docs > tbody").empty();var s=this.columns,o="docs",u=this;t.each(function(t){t.folderType=u.collection.folderType;var n=new f({model:t,listType:o,columns:s});e(".list_docs > tbody").append(n.render().el)}),t.length==0&&e(".list_docs > tbody").html(p({columns:s,lang:{doclist_empty:v["\ubb38\uc11c\uc5c6\uc74c"]}})),this.renderPages()},renderPages:function(){this.pageView=new a({pageInfo:this.collection.pageInfo()}),this.pageView.bind("paging",this.selectPage,this),this.$el.find("div.tool_absolute > div.dataTables_paginate").remove(),this.$el.find("div.tool_absolute").append(this.pageView.render().el)}})});