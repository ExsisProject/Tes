define("docs/views/mobile/docslist/base_docs_list",function(require){var e=require("views/mobile/m_more_list"),t=require("jquery"),n=require("underscore"),r=require("backbone"),i=require("when"),s=require("app"),o=require("docs/collections/docs_list"),u=require("docs/models/doc_folder_info"),a=require("views/mobile/header_toolbar"),f=require("hgn!docs/templates/mobile/docslist/base_docslist"),l=require("hgn!docs/templates/mobile/docslist/docslist_empty"),c=require("hgn!docs/templates/mobile/docslist/docslist_item"),h=require("i18n!docs/nls/docs");return e.extend({el:"#content",initialize:function(e){s.util.appLoading(!0),sessionStorage.setItem("list-folderType",undefined),this.options=e,this.folderType=this.options.folderType?this.options.folderType:"",this.folderId=this.options.folderId,this.isHome=n.isUndefined(e.isHome)?!1:e.isHome,this.collection=new o([],{folderType:this.folderType,folderId:this.folderId}),this.isHome&&(this.folderType="latestread",this.collection.folderType="latestread"),this.$el.off();if(this.folderId){var r=this;this.folder=new u({id:this.folderId}),this.folder.fetch({async:!1}).done(function(){r.title=r._getTitleName()})}var i={listFunc:t.proxy(function(e){this.renderList(e)},this),emptyListFunc:t.proxy(function(){t("#docsList").append(l({lang:{doclist_empty:h["\ubb38\uc11c\uc5c6\uc74c"]}}))},this)};this.setRenderListFunc(i);var a={keyword:this.keyword,property:this.property,direction:this.direction,searchType:this.searchType};this.setFetchInfo(a,this.collection)},render:function(){t(".content_page").html(f({}));var e={title:this._getTitleName(),isList:!0,isSideMenu:!0,isHome:!0,isSearch:!0};return a.render(e),this.dataFetch().done(t.proxy(function(e){e.length===0?this.renderListFunc.emptyListFunc():(this.renderListFunc.listFunc(e),this.scrollToEl())},this)),s.util.appLoading(!1),this},renderList:function(e){n.each(e.models,function(e){var n={id:e.getDocsId(),docsInfoId:e.getDocsInfoId(),docsId:e.getDocsId(),folderId:e.getFolderId(),title:e.getTitle(),writer:e.getCreatorName(),writerId:e.getCreatorId(),writerPositionName:e.getCreatorPositionName(),writeDate:e.getRequestDate(),state:e.getDocsStatus(),stateName:e.getDocsStatusName(),statusClass:e.getDocsStatusClass(),folderPath:e.getFolderPath(),readDate:e.getReadDate(),completDate:e.getCompleteDate(),hasAttach:e.hasAttach(),attachCount:e.getAttachCount(),folderName:e.getFolderName(),commentCount:e.getCommentCount(),hasComment:e.hasComment(),docNum:e.getDocNum()},r=this.folderType=="registwaiting"||this.folderType=="approvewaiting"?!0:!1,i=this.folderType=="registwaiting"||this.folderType=="approvewaiting"?!1:!0,o=this.folderType=="latestread"?!0:!1,u=e.get("completDate")?s.util.isCurrentDate(e.get("completDate"),1):!1;t("#docsList").append(c({doc:n,useDocsStatus:r,useCompletDate:i,useReadDate:o,isNew:u}))},this),this.unbindEvent(),this.bindEvent()},unbindEvent:function(){t("a[data-list-id]").unbind("click"),t(window).off("orientation")},bindEvent:function(){var e=this;t("a[data-list-id]").click(function(t){e._goDocsDetail(t)})},_getTitleName:function(){return this.folderType=="latestread"?h["\ucd5c\uadfc \uc5f4\ub78c \ubb38\uc11c"]:this.folderType=="latestupdate"?h["\ucd5c\uadfc \uc5c5\ub370\uc774\ud2b8 \ubb38\uc11c"]:this.folderType=="registwaiting"?h["\ub4f1\ub85d \ub300\uae30 \ubb38\uc11c"]:this.folderType=="approvewaiting"?h["\uc2b9\uc778 \ub300\uae30 \ubb38\uc11c"]:this.folder.getName()},_goDocsDetail:function(e){this.setSessionInfo(e),this.folderType!=undefined&&this.folderType!=""&&this.folderType!=null&&sessionStorage.setItem("list-folderType",this.folderType);var t=e.currentTarget.getAttribute("data-id"),n="/docs/detail/"+t;s.router.navigate(n,!0)}})});