define("docs/search/views/search_popup",function(require){var e=require("hogan"),t=require("docs/collections/doc_folder_infos"),n=require("hgn!docs/search/templates/search_popup"),r=require("i18n!nls/commons"),i=require("i18n!docs/nls/docs"),s=require("i18n!dashboard/nls/dashboard"),o={folder:i["\uc704\uce58"],creator:i["\ub4f1\ub85d\uc790"],keyword:r["\uac80\uc0c9\uc5b4"],period:r["\uae30\uac04"],all:r["\uc804\uccb4"],aweek:s["\ucd5c\uadfc 1\uc8fc\uc77c"],twoweeks:s["\ucd5c\uadfc 2\uc8fc\uc77c"],amonth:s["\ucd5c\uadfc 1\uac1c\uc6d4"],directly:s["\uc9c1\uc811\uc120\ud0dd"],attachFileNames:r["\ucca8\ubd80\ud30c\uc77c \uba85"],attachFileContents:r["\ucca8\ubd80\ud30c\uc77c \ub0b4\uc6a9"],title:i["\uc81c\ubaa9"],content:r["\ub0b4\uc6a9"],docsyear:i["\ubcf4\uc874\uc5f0\ud55c"],docNum:i["\ubb38\uc11c\ubc88\ud638"],term:r["\uae30\uac04"],includeType:i["\ud558\uc704 \ubb38\uc11c\ud568 \ud3ec\ud568"],permanent:i["\uc601\uad6c"],oneyear:i["1\ub144"],threeyear:i["3\ub144"],fiveyear:i["5\ub144"],tenyear:i["10\ub144"],allFolder:i["\uc804\uccb4\ubb38\uc11c\ud568"]},u=e.compile('<option value="{{data.id}}">{{data.parentPathName}}</option>');return Backbone.View.extend({tagName:"form",events:{"change input[type=radio]":"changeTerm"},initialize:function(){this.docFolderList=new t},render:function(){return this.docFolderList.comparator="parentPathName",this.docFolderList.fetch({success:function(e){e.each(function(e){this.$("#folderId").append(u.render({data:e.toJSON()}))})}}),this.$el.html(n({lang:o})),$.datepicker.setDefaults($.datepicker.regional[GO.config("locale")]),this.renderDatePicker(),this},renderDatePicker:function(){this.$("#fromDate").datepicker({yearSuffix:"",dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0}),this.$("#toDate").datepicker({yearSuffix:"",dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0})},changeTerm:function(e){var t=$(e.currentTarget).attr("id")=="radioDirectly";this.$("input[data-type=datepicker]").prop("disabled",!t),this.renderDatePicker(),t&&this.$("input[data-type=datepicker]").val(GO.util.shortDate(new Date))},getSearchParam:function(){var e=this.$('input[name="title"]').is(":checked"),t=this.$('input[name="content"]').is(":checked"),n=this.$('input[name="attachFileNames"]').is(":checked"),r=this.$('input[name="attachFileContents"]').is(":checked"),i=this.$('input[name="includeType"]').is(":checked"),s=this.$("#keyword"),o=$.trim(s.val()),u=this.validate();if(!u)return;var a=this.getSearchTerm();return{stype:"detail",appName:"docs",keyword:o,searchTerm:a.searchTerm,page:0,offset:15,fromDate:a.fromDate,toDate:a.toDate,creatorName:this.$("#creatorName").val(),title:e?o:"",content:t?o:"",attachFileNames:n?o:"",attachFileContents:r?o:"",docNum:this.$("#docNum").val(),docsYear:this.$("#docsYear option:selected").val(),docsYearValue:this.$("#docsYear option:selected").text(),includeType:i?"include":"none",folderId:this.$("#folderId option:selected").val(),folderPathName:this.$("#folderId option:selected").text()}},getSearchTerm:function(){var e=this.$el.find("input[type=radio]:checked").val(),t=GO.util.shortDate(new Date),n=GO.util.toISO8601("1970/01/01"),r=GO.util.toISO8601(new Date),i="all";return e=="-1"?(n=GO.util.calDate(t,"weeks",e),i="1w"):e=="-2"?(n=GO.util.calDate(t,"weeks",e),i="2w"):e=="month"?(n=GO.util.calDate(t,"months",-1),i="1m"):e=="directly"&&(i="",n=GO.util.toISO8601($("#fromDate").val()),r=GO.util.searchEndDate($("#toDate").val())),{fromDate:n,toDate:r,searchTerm:i}},validate:function(){var e=this.$("#keyword"),t=$.trim(e.val()),n=$.trim(this.$("#creatorName").val());return!0},convertTime:function(e){var t=e.split("T");return t[0]}})});