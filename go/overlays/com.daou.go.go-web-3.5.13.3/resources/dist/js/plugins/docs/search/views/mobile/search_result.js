(function(){define(function(require){var e=require("jquery"),t=require("backbone"),n=require("app"),r=require("text!docs/search/templates/mobile/search_result.html"),i=require("text!docs/search/templates/mobile/search_result_unit.html"),s=require("views/mobile/m_search_common_result"),o=require("i18n!docs/nls/docs"),u=require("i18n!nls/commons");require("GO.util");var a=null,f={"\uac80\uc0c9\uacb0\uacfc\uc5c6\uc74c":u["\uac80\uc0c9\uacb0\uacfc\uc5c6\uc74c"],"\uac80\uc0c9\uacb0\uacfc":u["\uac80\uc0c9\uacb0\uacfc"],"\ubc84\uc804":o["\ubc84\uc804"]},l=function(){return this.completeDate?n.util.snsDate(this.completeDate):""},c=n.BaseCollection.extend({url:function(){return"/api/search/docs"}}),h=t.View.extend({el:"#searchResultWrap",events:{"vclick li[data-docsId]":"_getContent"},initialize:function(e){var t=this;this.options=e,this.lastPage=!1,this.$el.off(),this.collection=new c,s.set({collection:this.collection,searchOptions:this.options,renderListFunc:function(e){t._renderContents(e)},renderListMoreFunc:function(e){t._moreList(e)}})},render:function(){return s.fetch(),this.el},_renderContents:function(){var t=this.collection;this.$el.html(Hogan.compile(r).render({lang:f,data:t.toJSON(),resultCount:t.page.total,convertDate:l},{partial:i})),e("#detailSearchToggle").removeClass("on"),this._showResultWrap()},_moreList:function(e){var t=e.toJSON();this.$el.find("ul:first").append(Hogan.compile(i).render({lang:f,data:t,convertDate:l}))},_showResultWrap:function(){e("#simpleSearchWrap").hide(),e("#detailSearchWrap").hide(),e("#searchResultWrap").show()},_getContent:function(t){var r=e(t.currentTarget).attr("data-docsId");n.router.navigate("/docs/detail/"+r,!0)}});return{render:function(e){return a=new h(e),a.render()}}})}).call(this);