define("docs/views/docs_attach",function(require){var e=require("jquery"),t=require("underscore"),n=require("backbone"),r=require("app"),i=require("i18n!nls/commons"),s=require("i18n!docs/nls/docs"),o=require("i18n!approval/nls/approval"),u=require("hgn!docs/templates/docs_attach"),a={save:i["\uc800\uc7a5"],no_attach_file:o["\ucca8\ubd80 \ud30c\uc77c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."]},f=n.Collection.extend({model:n.Model.extend(),url:function(){return["/api/docs",this.docId,"attach"].join("/")},initialize:function(e){this.docId=e.docId}});return n.View.extend({initialize:function(e){this.docId=e.docId,this.collection=new f({docId:this.docId})},render:function(e){return this.collection.fetch({success:this._onFetchSuccess,error:this._onFetchFail}),this},_onFetchSuccess:function(t,n,s){var f=this,l=[],c;e.each(t.toJSON(),function(e,t){var n=new RegExp("(zip|doc|docx|ppt|pptx|xls|xlsx|hwp|pdf|txt|html|htm|jpg|jpeg|png|gif|tif|tiff|bmp|exe|avi|mp3|mp4|mov|mpg|mpeg|lzh|xml|log|csv|eml)","gi"),i=t.extention.toLowerCase();t.size=r.util.getHumanizedFileSize(t.size),t.extention=n.test(i)?i:"def",t.docId=f.docId,l.push(t)}),c=u({contextRoot:r.config("contextRoot"),docId:t.docId,dataset:l,lang:a}),e.goPopup({pclass:"layer_normal layer_list_attach",header:o["\ucca8\ubd80 \ud30c\uc77c \ubaa9\ub85d"],modal:!0,width:"400px",contents:c,buttons:[{btext:i["\ud655\uc778"],btype:"confirm",callback:function(){}}]})},_onFetchFail:function(t,n,r){e.goMessage(i["\uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."])}})});