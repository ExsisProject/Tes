define("docs/views/mobile/docs_action",function(require){var e=require("backbone"),t=require("i18n!docs/nls/docs"),n=require("i18n!approval/nls/approval"),r=require("i18n!nls/commons"),i=require("views/mobile/header_toolbar"),s={"\ubc84\uc804":t["\ubc84\uc804"],"\uc2b9\uc778":t["\uc2b9\uc778"],"\ubc18\ub824":t["\ubc18\ub824"],"\uc2b9\uc778\uc120\ud0dd":n["\uc2b9\uc778\uc120\ud0dd"],"\ucca8\ubd80\ud30c\uc77c":r["\ucca8\ubd80\ud30c\uc77c"],"\ub313\uae00":r["\ub313\uae00"],"\ubaa9\ub85d":r["\ubaa9\ub85d"]},o=e.View.extend({initialize:function(e){this.options=e||{},this.docsModel=this.options.model,this.folderModel=this.options.folderModel,this.folderInfo=this.options.folderInfo,this.docsId=this.docsModel.id,this.headerBindEvent()},headerBindEvent:function(){GO.EventEmitter.off("trigger-action"),GO.EventEmitter.on("trigger-action","docs-attach",this.goAttaches,this),GO.EventEmitter.on("trigger-action","docs-version",this.goVersion,this),GO.EventEmitter.on("trigger-action","docs-permit",this.doPermit,this),GO.EventEmitter.on("trigger-action","docs-reject",this.doReject,this),GO.EventEmitter.on("trigger-action","docs-reply",this.replyView,this)},render:function(){var e={isPrev:!0,actionMenu:this.getUseMenus()};return i.render(e),this},getUseMenus:function(){var e={"\ucca8\ubd80\ud30c\uc77c":{id:"docs-attach",text:s.\ucca8\ubd80\ud30c\uc77c,triggerFunc:"docs-attach",cls:"btn_comments",commentsCount:this.docsModel.getAttaches().length},"\ubc84\uc804":{id:"docs-version",text:s.\ubc84\uc804,triggerFunc:"docs-version",cls:"btn_comments",commentsCount:this.docsModel.getDocsCount()},"\uc2b9\uc778":{id:"docs-permit",text:s.\uc2b9\uc778,triggerFunc:"docs-permit"},"\ubc18\ub824":{id:"docs-reject",text:s.\ubc18\ub824,triggerFunc:"docs-reject"},"\ub313\uae00":{id:"docs-reply",text:s.\ub313\uae00,triggerFunc:"docs-reply",cls:"btn_comments",commentsCount:this.docsModel.getCommentCount()}},t=[];return this.docsModel.getAttaches().length>0&&t.push(e.\ucca8\ubd80\ud30c\uc77c),this.isComplete()&&t.push(e.\ubc84\uc804),this.isApproveWaiting()&&this.folderModel.isManagable()&&(t.push(e.\uc2b9\uc778),t.push(e.\ubc18\ub824)),!this.isApproveWaiting()&&!this.isNeedState()&&t.push(e.\ub313\uae00),t},isComplete:function(){return this.docsModel.getDocsStatus()=="COMPLETE"},isApproveWaiting:function(){return this.docsModel.getDocsStatus()=="APPROVEWAITING"},isNeedState:function(){return this.docsModel.isNeedState()||this.docsModel.getDocsStatus()=="TEMPSAVE"},goAttaches:function(){GO.router.navigate("/docs/attaches/"+this.docsModel.id,!0)},goVersion:function(){GO.router.navigate("/docs/version/"+this.docsModel.id,!0)},doPermit:function(){var n=this;if(confirm(t["\uc2b9\uc778\ud655\uc778"])){var r=new e.Model;r.id=n.docsId,r.url=GO.config("contextRoot")+"api/docs/"+n.docsId+"/approved",r.save(null,{type:"PUT",contentType:"application/json",success:function(){GO.router.navigate("docs/detail/"+n.docsId,!0)}})}else $("#selectAction").val("none")},doReject:function(){var e="/docs/reject/"+this.docsModel.id;GO.router.navigate(e,!0)},doAction:function(n){var r=$(n.currentTarget),i=r.attr("data-trigger");if(i=="docs-reject"){var s="/docs/reject/"+this.docsModel.id;GO.router.navigate(s,!0)}else if(i=="docs-permit"){var o=this;if(confirm(t["\uc2b9\uc778\ud655\uc778"])){var u=new e.Model;u.id=o.docsId,u.url=GO.config("contextRoot")+"api/docs/"+o.docsId+"/approved",u.save(null,{type:"PUT",contentType:"application/json",success:function(){GO.router.navigate("docs/detail/"+o.docsId,!0)}})}else $("#selectAction").val("none")}},goToList:function(){var e="/docs/folder/";this.folderInfo?e+=this.folderInfo:e+=this.docsModel.getFolderId(),GO.router.navigate(e,!0)},replyView:function(e){var t="/docs/reply/"+this.docsModel.getDocsInfoId();GO.router.navigate(t,!0)}});return o});