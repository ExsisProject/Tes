define("docs/views/docs_tree_menu",function(require){var e=require("board/components/board_tree/views/base_board_tree_menu"),t=require("text!docs/templates/docs_tree_menu.html"),n=require("app"),r=e.extend({template:t,initialize:function(t){this.useNew=t.useNew!=undefined?t.useNew:!0,this.useOpen=t.useOpen!=undefined?t.useOpen:!0,e.prototype.initialize.apply(this,arguments)},getTemplateVars:function(e,t){var r=this;return this.isOpen=r.getStoredCategoryIsOpen(n.session("loginId")+e.id+e.getName()+"-docs-folder-toggle"),_.extend({parentId:e._getParentId(),nodeId:e.id,nodeType:"FOLDER",nodeValue:e.getName(),isHidden:e.attributes.state?e.attributes.state=="HIDDEN":!0,isDeleted:e.attributes.state?e.attributes.state!="NORMAL":!0,isAccessible:this.isDeleted?!1:e.isReadable()?e.isReadable():!1,iconType:"folder",hasChild:this.boardTreeNodes.hasChildren(e.id),close:r.useOpen?this.isOpen:!0,isNew:r.isNew(e.get("lastDocsCompleteDate")),managable:!1,isWritable:e.isWritable()},t||{})},getStoredCategoryIsOpen:function(e){var t=n.util.store.get(e);return _.isUndefined(t)&&(t=!0),t},isNew:function(e){return this.useNew?e?n.util.isCurrentDate(e,1):!1:!1},render:function(){this.$el.addClass("docs-tree-nodes"),_.each(this.boardTreeNodes.getNodes(this.parentId),function(e){var t=this.boardTreeNodes.get(e.id),n=this.createNodeElement(t);if(this.boardTreeNodes.hasChildren(t.id)){var r=this.renderChildView(t);n.append(r.el),this.useOpen&&!this.isOpen&&r.$el.hide()}this.$el.append(n)},this),n.EventEmitter.trigger("common","layout:refreshSideScroll")},renderChildView:function(e){var t=new this.constructor({nodes:this.boardTreeNodes,parentId:e.id,menuId:this.menuId,useNew:this.useNew,useOpen:this.useOpen});return t.render(),t}});return r});