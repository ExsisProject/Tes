function selectSettingMenu(e){checkEscapeWriteMode(function(){changeMailContainer("setting"),currentMenu="setting",currentMenuType=e,selectCurrentFolderName("");var t={type:"setting",name:mailMsg.location_conf};makeMailHeaderMessege(t);switch(e){case"basic":mailSettingControl.loadBasicSetting();break;case"sign":mailSettingControl.loadViewSign();break;case"folder":mailSettingControl.loadViewFolderManage();break;case"spam":mailSettingControl.loadViewSapmRule();break;case"filter":mailSettingControl.loadViewFilter();break;case"forward":mailSettingControl.loadViewForward();break;case"autoreply":mailSettingControl.loadViewAutoReply();break;case"extmail":mailSettingControl.loadViewExtMail();break;case"lastrcpt":mailSettingControl.loadViewLastRcpt()}})}function toggleAddressLayer(e){jQuery("#detail"+e+"AddressLayerWrap").css("display")=="none"?makeAddressLayer(e):closeAddressLayer(e)}function makeAddressLayer(e){jQuery("#detail"+e+"AddressLayerWrap").show(),jQuery("#detail"+e+"AddressLayerWrap").handlebars("addr_address_layer_view_tmpl",{type:e}),jQuery("#detail"+e+"AddressLayerWrap").on("click","a,span",function(t){t.preventDefault();var n=jQuery(this).attr("evt-rol");if(n=="closeDetailAddress")closeAddressLayer(e);else if(n=="inputDetailAddress"){if(!setAddressData(e))return;closeAddressLayer(e)}})}function closeAddressLayer(e){jQuery("#detail"+e+"AddressLayerWrap").hide(),jQuery("#detail"+e+"AddressLayerWrap").off()}function addExtForwardInfo(){saveForwardInfo()}function saveDefineForwardInfo(){saveDefineForwardInfo()}function filterTagToolbar(){var e=mailSettingControl.getTagData();mailSettingControl.makeToolbarTagList(e)}function initSettingFunction(){initSettingMenuDispaly(),mailSettingControl=new MailSettingControl,initSettingService()}function initSettingMenuDispaly(){useGroupForwarding||jQuery("#auto-forward-menu").hide(),useExternal||(jQuery("#auto-extMail-setting").hide(),jQuery("#extmail-download-menu").hide()),useAutoreply||jQuery("#auto-reply-menu").hide()}function initSettingService(){mailSettingControl.makeMailEvent()}function setSchedulerTab(e){jQuery(".tab_menu_wrap li").removeClass(),jQuery(".tab_menu_wrap li:eq("+e+")").addClass("active")}function defaultUserSetting(){jQuery("#hiddenimg").attr("checked",!0),jQuery("#hiddentag").attr("checked",!0),jQuery("#searchallfolder").attr("checked",!1),jQuery("#saveSendBox").attr("checked",!0),jQuery("#notSaveSendBox").attr("checked",!1),jQuery("#receiveNoti").attr("checked",!0),jQuery("#notUseReceiveNoti").attr("checked",!1),jQuery("#wmodeSelect").val("HTML"),jQuery("#composeModeSelect").val("normal"),jQuery("#encodingSelect").val("UTF-8"),jQuery("#writeNoti").attr("checked",!1),jQuery("#notUseWriteNoti").attr("checked",!0);var e=jQuery("#senderName").val();jQuery("#senderNameInfo").val(e);var e=jQuery("#senderEmail").val();jQuery("#senderEmailInfo").val(e),jQuery("#vcardAttach").attr("checked",!0),jQuery("#mailBadgeUse").attr("checked",!1),jQuery("#listViewCc").attr("checked",!1),jQuery("#replyToSameMail").is(":visible")&&(jQuery("#replyToSameMail").attr("checked",!0),jQuery("#senderEmailInfo").attr("disabled",!0)),jQuery("#defaultEmail").remove(),jQuery("#myEmailDefault").closest("tr").find(".senderItem").after('<span id="defaultEmail">('+mailMsg.conf_userinfo_sender_email_default+")</span>")}function modifyUserInfo(){var e=getUserInfo();mailSettingControl.saveBasciPopupInfo(e)}function modifyVcardInfo(){var e=getUserInfo();if(!isValidAddressInfo(e))return;mailSettingControl.savePopupVcardInfo(e)}function modifyUserAddrInfo(){var e=getUserAddrInfo();mailSettingControl.saveBasciPopupInfo(e)}function setAddressData(e){var t=jQuery("#"+e+"Country").val(),n=jQuery("#"+e+"State").val(),r=jQuery("#"+e+"City").val(),i=jQuery("#"+e+"PostalCode").val(),s=jQuery("#"+e+"Street").val();if(!checkInputLength("jQuery",jQuery("#"+e+"Country"),"",0,128,!0))return jQuery("#"+e+"Country").focus(),!1;if(!checkInputValidate("jQuery",jQuery("#"+e+"Country"),"onlyBack"))return jQuery("#"+e+"Country").focus(),!1;if(!checkInputLength("jQuery",jQuery("#"+e+"State"),"",0,128,!0))return jQuery("#"+e+"State").focus(),!1;if(!checkInputValidate("jQuery",jQuery("#"+e+"State"),"onlyBack"))return jQuery("#"+e+"State").focus(),!1;if(!checkInputLength("jQuery",jQuery("#"+e+"City"),"",0,128,!0))return jQuery("#"+e+"City").focus(),!1;if(!checkInputValidate("jQuery",jQuery("#"+e+"City"),"onlyBack"))return jQuery("#"+e+"City").focus(),!1;if(!checkInputLength("jQuery",jQuery("#"+e+"Street"),"",0,128,!0))return jQuery("#"+e+"Street").focus(),!1;if(!checkInputValidate("jQuery",jQuery("#"+e+"Street"),"onlyBack"))return jQuery("#"+e+"Street").focus(),!1;if(jQuery("#"+e+"PostalCode").val()!=""&&!checkInputValidate("jQuery",jQuery("#"+e+"PostalCode"),"number"))return!1;var o="";return t&&(jQuery("#"+e+"Country").val(t),o+=t+" "),n&&(jQuery("#"+e+"State").val(n),o+=n+" "),r&&(jQuery("#"+e+"City").val(r),o+=r+" "),i&&(jQuery("#"+e+"PostalCode").val(i),o+=i+" "),s&&(jQuery("#"+e+"Street").val(s),o+=s),e=="office"?jQuery("#officeBasicAddress").val(o):e=="home"&&jQuery("#homeAddress").val(o),jQuery("#"+e+"AddressTemp").val(o),!0}function getUserInfo(){var e={},t=jQuery("#firstName").val(),n=jQuery("#lastName").val(),r=jQuery("#memberName").val(),i=jQuery("#memberEmail").val(),s=jQuery("#titleName").val(),o=jQuery("#companyName").val(),u=jQuery("#departmentName").val(),i=jQuery("#memberEmail").val(),a=jQuery("#mobileNo").val(),f=jQuery("#officeTel").val(),l=jQuery("#description").val(),c=jQuery("#homeCountry").val(),h=jQuery("#homePostalCode").val(),p=jQuery("#homeState").val(),d=jQuery("#homeCity").val(),v=jQuery("#homeStreet").val(),m=jQuery("#officeCountry").val(),g=jQuery("#officePostalCode").val(),y=jQuery("#officeState").val(),b=jQuery("#officeCity").val(),w=jQuery("#officeStreet").val(),E=jQuery("#homeTel").val(),S=jQuery("#officeHomepage").val(),x=jQuery("#messenger").val(),T=jQuery("#thumbnail_image").attr("img-data");t&&(e.firstName=t),n&&(e.lastName=n),r&&(e.memberName=r),i&&(e.memberEmail=i),s&&(e.titleName=s),o&&(e.companyName=o),u&&(e.departmentName=u),i&&(e.memberEmail=i),a&&(e.mobileNo=a),f&&(e.officeTel=f),E&&(e.homeTel=E),x&&(e.messenger=x),S&&(e.officeHomepage=S);var N=jQuery("#homeAddressTemp").val(),C=jQuery("#homeAddress").val();N==""&&(C&&(e.homeExtAddress=C),e.homeCountry="",e.homePostalCode="",e.homeCity="",e.homeState=""),N==C&&(c&&(e.homeCountry=c),h&&(e.homePostalCode=h),p&&(e.homeState=p),d&&(e.homeCity=d));var k=jQuery("#officeAddressTemp").val(),L=jQuery("#officeBasicAddress").val();return k==""&&L&&(e.officeExtAddress=L),k!=""&&k!=L&&L&&(e.officeExtAddress=L),k==L&&(m&&(e.officeCountry=m),g&&(e.officePostalCode=g),y&&(e.officeState=y),b&&(e.officeCity=b),w&&(e.officeStreet=w)),l&&(e.description=l),T&&(e.photoPath=T),e}function isValidAddressInfo(){return validateInput(jQuery("#lastName"),1,128,"userName")?validateInput(jQuery("#firstName"),1,128,"userName")?validateInput(jQuery("#memberName"),2,512,"userName")?checkInputLength("jQuery",jQuery("#memberName"),"",0,128)?validateInput(jQuery("#titleName"),2,256,"userName")?checkInputLength("jQuery",jQuery("#titleName"),"",0,128)?validateInput(jQuery("#companyName"),2,256,"userName")?checkInputLength("jQuery",jQuery("#companyName"),"",0,128)?validateInput(jQuery("#departmentName"),2,256,"userName")?checkInputLength("jQuery",jQuery("#departmentName"),"",0,128)?checkInputLength("jQuery",jQuery("#memberEmail"),"",0,256,!0)?jQuery("#memberEmail").val()!=""&&!isEmail(jQuery("#memberEmail").val())?(jQuery.goAlert(mailMsg.error_email),jQuery("#memberEmail").focus(),!1):checkInputLength("jQuery",jQuery("#mobileNo"),"",0,32)?checkInputValidate("jQuery",jQuery("#mobileNo"),"onlyBack")?checkInputLength("jQuery",jQuery("#officeTel"),"",0,32)?checkInputValidate("jQuery",jQuery("#officeTel"),"onlyBack")?validateInput(jQuery("#officeAddress"),0,1024,"onlyBack")?checkInputLength("jQuery",jQuery("#homeTel"),"",0,64)?checkInputValidate("jQuery",jQuery("#homeTel"),"onlyBack")?validateInputValue(jQuery("#officeHomepage"),0,512,"onlyBack")?checkInputLength("jQuery",jQuery("#homeCountry"),"",0,64)?checkInputValidate("jQuery",jQuery("#homeCountry"),"onlyBack")?checkInputLength("jQuery",jQuery("#homeState"),"",0,64)?checkInputValidate("jQuery",jQuery("#homeState"),"onlyBack")?checkInputLength("jQuery",jQuery("#homeCity"),"",0,64)?checkInputValidate("",jQuery("#homeCity"),"onlyBack")?checkInputLength("jQuery",jQuery("#homeStreet"),"",0,64)?checkInputValidate("jQuery",jQuery("#homeStreet"),"onlyBack")?validateInput(jQuery("#homeAddress"),0,1024,"onlyBack")?checkInputLength("jQuery",jQuery("#homePostalCode"),"",0,64)?checkInputValidate("jQuery",jQuery("#homePostalCode"),"onlyBack")?checkInputLength("jQuery",jQuery("#officeCountry"),"",0,64)?checkInputValidate("jQuery",jQuery("#officeCountry"),"onlyBack")?checkInputLength("jQuery",jQuery("#officeState"),"",0,64)?checkInputValidate("jQuery",jQuery("#officeState"),"onlyBack")?checkInputLength("jQuery",jQuery("#officeCity"),"",0,64)?checkInputValidate("jQuery",jQuery("#officeCity"),"onlyBack")?checkInputLength("jQuery",jQuery("#officeStreet"),"",0,64)?checkInputValidate("jQuery",jQuery("#officeStreet"),"onlyBack")?validateInput(jQuery("#officAddress"),0,1024,"onlyBack")?checkInputLength("jQuery",jQuery("#officPostalCode"),"",0,64)?checkInputValidate("jQuery",jQuery("#officPostalCode"),"onlyBack")?!0:(jQuery("#homePostalCode").focus(),!1):(jQuery("#homePostalCode").focus(),!1):!1:(jQuery("#officeStreet").focus(),!1):(jQuery("#officeStreet").focus(),!1):(jQuery("#officeCity").focus(),!1):(jQuery("#officeCity").focus(),!1):(jQuery("#officeState").focus(),!1):(jQuery("#officeState").focus(),!1):(jQuery("#officeCountry").focus(),!1):(jQuery("#officeCountry").focus(),!1):(jQuery("#homePostalCode").focus(),!1):(jQuery("#homePostalCode").focus(),!1):!1:(jQuery("#homeStreet").focus(),!1):(jQuery("#homeStreet").focus(),!1):(jQuery("#homeCity").focus(),!1):(jQuery("#homeCity").focus(),!1):(jQuery("#homeState").focus(),!1):(jQuery("#homeState").focus(),!1):(jQuery("#homeCountry").focus(),!1):(jQuery("#homeCountry").focus(),!1):!1:(jQuery("#homeTel").focus(),!1):(jQuery("#homeTel").focus(),!1):!1:(jQuery("#officeTel").focus(),!1):(jQuery("#officeTel").focus(),!1):(jQuery("#mobileNo").focus(),!1):(jQuery("#mobileNo").focus(),!1):(jQuery("#memberEmail").focus(),!1):(jQuery("#departmentName").focus(),!1):!1:(jQuery("#companyName").focus(),!1):!1:(jQuery("#titleName").focus(),!1):!1:(jQuery("#memberName").focus(),!1):!1:!1:!1}function menuLayerOut(e){viewTime=setTimeout("menuLayerClose('"+e+"')",300)}function menuLayerClose(e){if(viweStatus!="out")return;document.getElementById(e).style.display="none"}function menuLayerOpen(e){if(viweStatus=="out"||viweStatus!=e)return;if(viweStatus=="ly_etc_dn1")if(isMsie){var t=findPosY(document.getElementById("etc_dn_sp"));document.getElementById(e).style.pixelTop=t+20}else{var t=findPosY(document.getElementById("etc_dn_sp"));document.getElementById(e).style.top=t+13+"px"}document.getElementById(e).style.display="inline"}function selPFolder(e,t,n,r){t.indexOf(".")!=-1&&(e=t.replace(/\./g,"/")),r=="new"?(jQuery("#parentFolder_new").text(e),jQuery("#parentFolder").val(t),n&&(viweStatus="out",menuLayerOut("newPfBox"),jQuery("#newPfBox").hide())):(jQuery("#parentFolder_default").text(e),t!=""?jQuery("#policy").val("move "+t):jQuery("#policy").val(""),n&&(viweStatus="out",menuLayerOut("pfBox"),jQuery("#pfBox").hide()))}function getUserAddrInfo(){var e={},t=jQuery("#officeCountry").val(),n=jQuery("#officePostalCode").val(),r=jQuery("#officeState").val(),i=jQuery("#officeCity").val(),s=jQuery("#officeStreet").val();return t&&(e.officeCountry=t),n&&(e.officePostalCode=n),r&&(e.officeState=r),i&&(e.officeCity=i),s&&(e.officeStreet=s),e}function closeViewSignLayer(){jQuery("#viewSignWrap").hide(),jQuery("#viewSignWrap").off()}function saveBasicInfo(){var e=getUserBasicInfoData();e&&mailSettingControl.saveBasicInfo(e)}function getUserBasicInfoData(){var e="on",t="off",n=jQuery("#senderEmailInfo"),r=n.val(),i=jQuery("#senderNameInfo");if(!checkInputLength("jQuery",i,mailMsg.conf_userinfo_msg_01,0,128))return;if(!checkInputValidate("jQuery",i,"userName"))return;if(trim(r)!=""&&!isEmail(r)){jQuery.goAlert(mailMsg.common_2),n.focus();return}var s=jQuery("input[name='saveSendBoxFalg']:checked").val(),o=jQuery("input[name='receiveNotiFalg']:checked").val(),u=jQuery("#wmodeSelect").val();if(u=="text"&&o==e&&notiMode=="link"){jQuery.goAlert(mailMsg.conf_alert_userinfo_receivenoti_wmode);return}if(s==t&&o==e&&u=="html"){if(!confirm(mailMsg.conf_alert_userinfo_receivenoti))return;jQuery("#receiveNoti").attr("checked","checked"),jQuery("#saveSendBox").attr("checked","checked")}var a={};a.addressVisible=getOnOffIfChecked(jQuery("input[name='addressVisible']:checked").val()==e),a.hiddenImg=getOnOffIfChecked(jQuery("#hiddenimg").is(":checked")),a.hiddenTag=getOnOffIfChecked(jQuery("#hiddentag").is(":checked")),a.searchAllFolder=getOnOffIfChecked(jQuery("#searchallfolder").is(":checked")),a.saveSendBox=getOnOffIfChecked(jQuery("input[name='saveSendBoxFalg']:checked").val()==e),a.receiveNoti=getOnOffIfChecked(jQuery("input[name='receiveNotiFalg']:checked").val()==e),a.writeNoti=getOnOffIfChecked(jQuery("input[name='writeNotiFalg']:checked").val()==e),a.vcardAttach=getOnOffIfChecked(jQuery("#vcardattach").is(":checked")),a.writeMode=jQuery("#wmodeSelect").val(),a.composeMode=jQuery("#composeModeSelect").val(),a.charSet=jQuery("#encodingSelect").val(),a.senderName=i.val(),a.senderEmail=r,a.pageLineCnt=jQuery("#pageLineCntVal").val(),a.mailBadgeUse=getOnOffIfChecked(jQuery("#mailBadgeUse").is(":checked")),a.listViewCc=getOnOffIfChecked(jQuery("#listViewCc").is(":checked")),a.nationView=getOnOffIfChecked(jQuery("#nationView").is(":checked")),a.useMailSender=jQuery("#mailSenderUse").val()===e;var f=[];return!a.useMailSender||jQuery("#mailSenderListTbody .senderItem").each(function(){var e=USERLOGINEMAIL;if(jQuery(this).data("email").indexOf(e)<=0){var t={};t.email=jQuery(this).data("email"),t.aliasUser=!!jQuery(this).data("alias"),t.defaultMail=jQuery(this).closest("tr").find("#defaultEmail").length>0,f.push(t)}}),a.senderList=f,jQuery("#replyToSameMail").is(":visible")&&(a.replyToSameMail=getOnOffIfChecked(jQuery("#replyToSameMail").is(":checked"))),a.rcptMode=jQuery("input[name='rcptMode']:checked").val(),a.sendConfirm=jQuery("input[name='sendConfirm']:checked").val(),a}function getOnOffIfChecked(e){if(!_.isBoolean(e))return;return e?"on":"off"}function init(){jQuery("#signApplySelect").selectbox({selectId:"signApply",selectFunc:""},"${fn:escapeXml(signVo.signApply)}",[{index:signMsg.conf_sign_3,value:"T"},{index:signMsg.conf_sign_4,value:"F"}])}function checkSpamMode(){var e=jQuery("#spamPolicy").val();e==1?(jQuery("#spamLevel").show(),jQuery("#blackAndWhiteTr").show(),jQuery("#spamHandleTr").show(),jQuery("#blackListTr").show()):e==2?(jQuery("#spamLevel").hide(),jQuery("#blackAndWhiteTr").show(),jQuery("#spamHandleTr").show(),jQuery("#blackListTr").show()):e==3?(jQuery("#spamLevel").hide(),jQuery("#blackAndWhiteTr").hide(),jQuery("#spamHandleTr").hide(),jQuery("#blackListTr").hide()):e==4&&(jQuery("#spamLevel").hide(),jQuery("#blackAndWhiteTr").show(),jQuery("#spamHandleTr").show(),jQuery("#blackListTr").hide())}function getSpamPolicy(e){var t=e.applyAllowedlistOnly,n=e.applyRuleLevel,r=e.applyBlacklist,i=e.applyWhitelist;if(t=="off"&&n=="on"&&r=="on"&&i=="on")return 1;if(t=="off"&&n=="off"&&r=="on"&&i=="on")return 2;if(t=="off"&&n=="off"&&r=="off"&&i=="on")return 3;if(t=="on"&&n=="off"&&r=="off"&&i=="on")return 4}function addWhiteMailList(){jQuery.goPopup({id:"spam_mail_add_popup",pclass:"layer_normal layer_add_mailbox",header:mailMsg.conf_spamrule_47,contents:getHandlebarsTemplate("mail_setting_spam_modal_white_tmpl"),buttons:[{btype:"confirm",btext:mailMsg.comn_confirm,autoclose:!1,callback:addWhiteRuleList},{btype:"cancel",btext:mailMsg.comn_cancel}]})}function addBlackMailList(){jQuery.goPopup({id:"spam_mail_add_popup",pclass:"layer_normal layer_add_mailbox",header:mailMsg.conf_spamrule_47,contents:getHandlebarsTemplate("mail_setting_spam_modal_black_tmpl"),buttons:[{btype:"confirm",btext:mailMsg.comn_confirm,autoclose:!1,callback:addBlackRuleList},{btype:"cancel",btext:mailMsg.comn_cancel}]})}function addForwardMailList(){jQuery.goPopup({id:"forward_mail_add_popup",pclass:"layer_normal layer_add_mailbox",header:mailMsg.conf_spamrule_47,contents:getHandlebarsTemplate("mail_setting_spam_modal_white_tmpl"),buttons:[{btype:"confirm",btext:mailMsg.comn_confirm,autoclose:!1,callback:addForwardList},{btype:"cancel",btext:mailMsg.comn_cancel}]})}function addWhiteRuleList(){var e,t,n,r=!1,i=USEREMAIL;e=jQuery("#addWhiteMail").val().toLowerCase(),t=jQuery("#whiteList td.txt").map(function(){return jQuery(this).text()}).get(),n=jQuery("#blackList td.txt").map(function(){return jQuery(this).text()}).get();if(t&&t.length>0)for(var s=0;s<t.length;s++)if(t[s]==e){jQuery.goAlert(mailMsg.conf_spam_14),r=!0;return}if(n&&n.length>0)for(var s=0;s<n.length;s++)if(e==n[s]){jQuery.goAlert(mailMsg.conf_spam_15),r=!0;return}if(incNotAllowSpecialChar(e)){jQuery.goAlert(mailMsg.common_form_004);return}if(!r){if(!checkInputSearchAddr(e,2,255,!0))return;addMailList(jQuery("#addWhiteMail"),t,"1000",i,!1,"w"),jQuery("#whiteList_empty").hide()}jQuery.goPopup.close()}function addBlackRuleList(){var e,t,n,r=!1,i=USEREMAIL;e=jQuery("#addBlackMail").val().toLowerCase(),t=jQuery("#blackList td.txt").map(function(){return jQuery(this).text()}).get(),n=jQuery("#whiteList td.txt").map(function(){return jQuery(this).text()}).get();if(t&&t.length>0)for(var s=0;s<t.length;s++)if(t[s]==e){jQuery.goAlert(mailMsg.conf_spam_15),r=!0;return}if(n&&n.length>0)for(var s=0;s<n.length;s++)if(e==n[s]){jQuery.goAlert(mailMsg.conf_spam_14),r=!0;return}if(incNotAllowSpecialChar(e)){jQuery.goAlert(mailMsg.common_form_004);return}if(!r){if(!checkInputSearchAddr(e,2,255,!0))return;addMailList(jQuery("#addBlackMail"),t,"1000",i,!1,"b"),jQuery("#blackList_empty").hide()}jQuery.goPopup.close()}function addForwardList(){var e,t;jQuery("#forwardMailList_empty_area").hide();var n=USEREMAIL;e=jQuery("#addWhiteMail").val().toLowerCase(),t=jQuery("#forwardMailList td.forwardMailList").map(function(){return jQuery(this).text()}).get();if(t&&t.length>0)for(var r=0;r<t.length;r++)if(e==t[r]){jQuery.goMessage(mailMsg.common_form_005);return}if(maxForwaringCount<=t.length){jQuery.goMessage(msgArgsReplace(mailMsg.conf_forward_15,[maxForwaringCount]));return}addMailList(jQuery("#addWhiteMail"),t,"1000",n,!1,"f"),jQuery.goPopup.close()}function deleteMailList(e){var t=0;if(e=="w"){var n=jQuery("#whiteList_txt").length;n==0&&jQuery("#whiteList_empty").show()}else if(e=="b"){var r=jQuery("#blackList_txt").length;r==0&&jQuery("#blackList_empty").show()}}function deleteAllMailList(e){var t=0;e=="w"?(jQuery("#whiteList #whiteList_txt").each(function(){jQuery(this).remove()}),jQuery("#whiteList_empty").show()):e=="b"&&(jQuery("#blackList #blackList_txt").each(function(){jQuery(this).remove()}),jQuery("#blackList_empty").show()),jQuery.goAlert(mailMsg.del_ok)}function deleteAllFilters(){var e=jQuery("#autoFilter span[evt-rol='delete-filter']");if(e.length==0)return;jQuery.goConfirm(mailMsg.alert_remove_all,"",function(){var t={},n=[];e.each(function(){n.push(jQuery(this).attr("condseq"))}),t.condSeqs=n,mailSettingControl.deleteFilterRule(t)})}function addExceptForwardList(){var e,t,n,r=USEREMAIL;n=!1,e=jQuery("#defineForwardingAddressText").val().toLowerCase(),t=jQuery("#defineForwardingList li span").map(function(){return jQuery(this).text()}).get();if(t&&t.length>0)for(var i=0;i<t.length;i++)if(e==t[i]){jQuery.goMessage(mailMsg.conf_forward_2),n=!0;return}n||(addMailList(jQuery("#defineForwardingAddressText"),t,"1000",r,!1,"e"),jQuery("#defineForwardingAddressText").attr("value",""))}function deleteSelectList(){var e=0;jQuery("#defineForwardingList li input:checkbox").each(function(){jQuery(this).attr("checked")&&e++});if(e==0){jQuery.goMessage(mailMsg.common_form_007);return}jQuery("#defineForwardingList li input:checkbox").each(function(){jQuery(this).attr("checked")&&jQuery(this).closest("li").remove()})}function deleteAllList(){var e=0;jQuery("#defineForwardingList li input:checkbox").each(function(){e++});if(e==0){jQuery.goAlert(mailMsg.common_form_007);return}e>0&&jQuery("#defineForwardingList li input:checkbox").each(function(){jQuery(this).attr("checked",!0)}),jQuery("#defineForwardingList li input:checkbox").each(function(){jQuery(this).closest("li").remove()})}function saveSpamInfo(){var e=getSpamInfo();mailSettingControl.saveSpamInfo(e)}function getSpamInfo(){var e={},t=jQuery("#spamPolicy").val();t=="1"?(e.applyAllowedlistOnly="off",e.applyRuleLevel="on",e.applyBlacklist="on",e.applyWhitelist="on"):t=="2"?(e.applyAllowedlistOnly="off",e.applyRuleLevel="off",e.applyBlacklist="on",e.applyWhitelist="on"):t=="3"?(e.applyAllowedlistOnly="off",e.applyRuleLevel="off",e.applyBlacklist="off",e.applyWhitelist="on"):t=="4"&&(e.applyAllowedlistOnly="on",e.applyRuleLevel="off",e.applyBlacklist="off",e.applyWhitelist="on");var n=jQuery("#spamLevel").val();n=="1"?e.pspamRuleLevel="3":n=="2"?e.pspamRuleLevel="2":n=="3"&&(e.pspamRuleLevel="1");var r=jQuery("#spamHandle").val();r=="move Spam"?e.pspamPolicy="move Spam":r=="move Trash"?e.pspamPolicy="move Trash":r=="delete"&&(e.pspamPolicy="delete");var i=new Array;jQuery("#whiteList #whiteList_txt .txt").each(function(){i.push(jQuery(this).text())});var s=new Array;return jQuery("#blackList #blackList_txt .txt").each(function(){s.push(jQuery(this).text())}),e.whiteList=i,e.blackList=s,e}function saveFilter(){var e={},t=[],n=!1,r="",i=!1,s="",o="",u=jQuery("#setting_filter_sender").val().trim().toLowerCase(),a=jQuery("#setting_filter_receiver").val().trim().toLowerCase(),f=jQuery("#setting_filter_subject").val().trim();if(u==""&&a==""&&f==""){jQuery.goMessage(mailMsg.conf_filter_1),jQuery("#setting_filter_sender").focus(),isSuccess=!1;return}u!=""&&t.push({field:"FROM",pattern:u}),a!=""&&t.push({field:"TO",pattern:a});if(f!=""){if(!validateInputValue(jQuery("#setting_filter_subject"),0,255,"onlyBack")){jQuery("#setting_filter_subject").focus(),isSuccess=!1;return}t.push({field:"SUBJECT",pattern:f})}e.condSeq=jQuery("#filterCondSeq").val(),e.subcondList=t;var l=jQuery("#mail_setting_modal_filter input[name=filterOperation]:checked").val();e.operation=l;var c=jQuery("input[name='autoFilterSelect']:checked").val();if(c=="folder"){var h=jQuery("#settingFilterSaveFolder option:selected").val();if(h==""){jQuery.goMessage(mailMsg.conf_alert_mailbox_select);return}e.policy="move "+h}else if(c=="newFolder"){var p=jQuery("#settingFilterInputBoxName"),d=jQuery.trim(p.val());if(d==""||p.hasClass("placeholder")){jQuery.goMessage(mailMsg.conf_filter_37),p.focus();return}if(!validateInputValue(p,2,32,"folderName"))return;var v=jQuery("#settingFilterSaveNewFolder option:selected").val();v==""?r=d:r=v+"."+d,n=!0}else if(c=="tag"){var m=jQuery("#settingFilterTagList option:selected").val();if(m==""){jQuery.goMessage(mailMsg.mail_tag_select_msg);return}e.policy="tag "+m}else{if(c!="newTag"){jQuery.goMessage(mailMsg.conf_filter_1);return}var g=jQuery("#settingFilterNewTagName"),y=jQuery.trim(g.val());if(y==""||g.hasClass("placeholder")){jQuery.goMessage(mailMsg.mail_tag_add_msg),g.focus();return}if(!checkInputLength("jQuery",g,mailMsg.conf_filter_1,2,32))return;if(isExistTagName(y)){jQuery.goSlideMessage(mailMsg.alert_tag_samename,"caution");return}var b=folderControl.getTagData();if(b&&b.length>=300){jQuery.goMessage(mailMsg.mail_tag_insert_limit);return}i=!0,s=y;var w=jQuery("#mail_setting_modal_filter div.layer_pallete a.active").attr("color");o=w}if(n)folderControl.addFolderAfterFunc(r,function(){e.policy="move "+r,mailSettingControl.saveAutoFilter(e)});else if(i){var E={tagName:s,tagColor:o};folderControl.addTagAfterFunc(E,function(){folderControl.getTagListAfterFunc(function(t){folderControl.makeTagList(t);var n="";for(var r=0;r<t.length;r++)if(t[r].name==y){n=t[r].id;break}e.policy="tag "+n,mailSettingControl.saveAutoFilter(e)})})}else mailSettingControl.saveAutoFilter(e)}function saveExtMailManager(e){var t={},n=!1,r="",i=jQuery("#pop3Host");if(!validateInputValue(i,2,255,"onlyBack"))return;var s=i.val().trim();if(!validateIP(s)&&!isDomain(s))return jQuery.goMessage(mailMsg.conf_pop_37),i.select(),!1;var o=jQuery("#pop3Port").val().trim();if(o=="")return jQuery.goMessage(mailMsg.conf_pop_40),jQuery("#pop3Port").select(),!1;if(!isPort(o))return jQuery.goMessage(mailMsg.conf_pop_43),!1;var u=jQuery("#pop3Id");if(!validateInputValue(u,2,255,"onlyBack"))return;var a=u.val().trim();if(a=="")return jQuery.goMessage(mailMsg.conf_pop_2),u.select(),!1;if(!isLocal(a)&&!isEmail(a))return jQuery.goMessage(mailMsg.conf_pop_52),u.select(),!1;var f=jQuery("#pop3Pw");if(!validateInputValue(f,1,64,"onlyBack"))return;if(jQuery("#mbox").attr("checked")){var l=trim(jQuery("#inputBoxName").val());if(!checkInputLength("jQuery",jQuery("#inputBoxName"),mailMsg.conf_filter_37,2,32))return;if(!checkInputValidate("jQuery",jQuery("#inputBoxName"),"folderName"))return;if(trim(jQuery("#saveNewFolder option:selected").val())=="noChoiceParentFolder")r=l;else{var c=jQuery("#saveNewFolder option:selected").val();c=c.split(" ").join(""),c=c.replace(/>/gi,"."),r=c+"."+l}n=!0}else{var h=jQuery("#saveFolder option:selected").val();if(h=="noChoiceParentFolder")return jQuery.goMessage(mailMsg.conf_alert_mailbox_select),!1;h.indexOf(">")>0&&(h=h.split(" ").join(""),h=h.replace(/>/gi,".")),t.policy="move "+h}t.pop3Host=s,t.pop3Port=o,t.pop3Id=a,t.pop3Pw=f.val().trim(),t.sslCheck=jQuery("#sslCheck").attr("checked")?!0:!1,t.pop3Del=jQuery("#pop3Del1").attr("checked")?!0:!1,n?folderControl.addFolderAfterFunc(r,function(){t.policy="move "+r,mailSettingControl.saveExtMailSetting(t)}):mailSettingControl.saveExtMailSetting(t)}function isEmailCheck(e){return e.indexOf("@")>-1&&!isEmail(e)&&!isMailDomain(e)&&!isMailSubDomain(e)?!1:!0}function saveFilterInfo(){var e=getFilterInfo();mailSettingControl.saveFilterInfo(e)}function saveForwardInfo(){if(!validationCheck())return;var e=!1,t=getForwardInfo(),n=jQuery("#defineValue").val().toLowerCase();jQuery("#defineForwardingList input[dlist=defineList]").each(function(){n==jQuery.trim(jQuery(this).val())&&(jQuery.goAlert(mailMsg.conf_forward_31),e=!0)}),e||(mailSettingControl.saveForwardInfo(t),jQuery.goPopup.close())}function saveAllForwardInfo(){getForwardInfo(),mailSettingControl.saveForwardInfo(param)}function saveDefineForwardInfo(){if(!validationCheck())return;var e=!1,t=getDefineForwardInfo(),n=jQuery("#defineValue").val().toLowerCase(),r=t.defineForwardingSeq;jQuery("#defineForwardList tr .defineRuleValue").each(function(){var t=jQuery(this).parents().attr("data-index");r!=t&&n==jQuery.trim(jQuery(this).text())&&(jQuery.goAlert(mailMsg.conf_forward_31),e=!0)}),e||(mailSettingControl.saveDefineForwardInfo(t),jQuery.goPopup.close())}function saveAutoReply(){var e=jQuery("#startTime").val(),t=jQuery("#endTime").val();if(jQuery("#reply_apply").attr("checked")){if(!checkInputLength("jQuery",jQuery("#autoReplySubject"),"",0,255))return;if(jQuery.trim(jQuery("#autoReplyText").val()).length>2048){jQuery.goAlert(msgArgsReplace(mailMsg.error_inputlength_over,[2048]));return}if(trim(e)==""){jQuery.goAlert(mailMsg.conf_autoreply_29);return}if(trim(t)==""){jQuery.goAlert(mailMsg.conf_autoreply_30);return}var n=e.split("-"),r=t.split("-"),i=new Date(n[0],n[1]-1,n[2]),s=new Date(r[0],r[1]-1,r[2]),o=new Date;o.setHours(0,0,0,0);if(o.getTime()>i.getTime()){jQuery.goAlert(mailMsg.conf_autoreply_28);return}if(i.getTime()>s.getTime()){jQuery.goAlert(mailMsg.conf_autoreply_8);return}if(o.getTime()>s.getTime()){jQuery.goAlert(mailMsg.conf_autoreply_7);return}}var u={};u.useAutoReply=jQuery("#reply_apply").attr("checked")?!0:!1;var a=new Array;jQuery("#mail_add_list tr .reply_address").each(function(){a.push(jQuery(this).text())}),trim(e)!=""&&(e+="-00-00-00",e=moment(e,"YYYY-MM-DD-HH-mm-ss").utc().format()),trim(t)!=""&&(t+="-23-59-59",t=moment(t,"YYYY-MM-DD-HH-mm-ss").utc().format()),u.startTime=e,u.endTime=t,u.subject=jQuery("#autoReplySubject").val(),u.content=jQuery("#autoReplyText").val(),u.replyMode=jQuery("#replyMode").val(),u.replyAddressList=a,mailSettingControl.saveAutoReply(u)}function deleteForwardMailList(e){var t=0;if(e=="f"){var n=jQuery("#forward_mail_list").length;n==0&&jQuery("#forwardMailList_empty_area").show()}else if(e=="e"){jQuery("#blackList li input:checkbox").each(function(){jQuery(this).attr("checked")&&t++});if(t==0){jQuery.goAlert(mailMsg.common_form_007);return}if(t>0&&!confirm(mailMsg.common_form_009))return;jQuery("#blackList li input:checkbox").each(function(){jQuery(this).attr("checked")&&jQuery(this).closest("li").remove()})}}function deleteAllForwardMailList(e){var t=0;if(e=="f"){var n=jQuery("#forwardMailList_empty_area").prev().html(),r=jQuery("#forwardMailList_empty_area").next().html();while(n||r)jQuery("#forward_mail_list").remove(),n=jQuery("#forwardMailList_empty_area").prev().html(),r=jQuery("#forwardMailList_empty_area").next().html();jQuery("#forwardMailList_empty_area").show()}else if(e=="e"){jQuery("#blackList li input:checkbox").each(function(){t++});if(t==0){jQuery.goAlert(mailMsg.common_form_007);return}if(t>0){jQuery("#blackList li input:checkbox").each(function(){jQuery(this).attr("checked",!0)});if(!confirm(mailMsg.common_form_009))return}jQuery("#blackList li input:checkbox").each(function(){jQuery(this).closest("li").remove()})}else e=="d"&&(jQuery(".defineForwarList_value").hide(),jQuery("#defineForwarList_empty_area").show())}function getFilterInfo(){param={};var e=jQuery("input[name='filterApplyFlg']:checked").val(),t=jQuery("input[name='billbox']:checked").val(),n=jQuery("input[name='advbox']:checked").val(),r=jQuery("input[name='snsbox']:checked").val();return param.filter=e=="on"?!0:!1,smartFilter&&(param.billbox=t=="on"?!0:!1,param.advbox=n=="on"?!0:!1,param.snsbox=r=="on"?!0:!1),param}function getForwardInfo(){param={};var e=jQuery("input[name='forwardApplyFlag']:checked").val();if(e=="on"){var t=jQuery("#forwardMode").val();t=="forwarding"?param.forwardMode="forwarding":t=="forwardingonly"&&(param.forwardMode="forwardingonly")}else param.forwardMode="none";var n=new Array;jQuery("#forwardMailList tr .forwardMailList").each(function(){n.push(jQuery(this).text())});var r=new Array,i=jQuery("#removeAllDefineForward").val();i!="true"&&jQuery("#defineForwardList").find("tr[data-index]").each(function(){r.push(jQuery(this).data("index"))}),param.forwardingAddress=n,param.defineForwardingSeqList=r;var s=jQuery("#defineForwardingSeq").val();return param.defineForwardingSeq=s,param}function getDefineForwardInfo(){param={};var e=jQuery("input[name='forwardApplyFlag']:checked").val();if(e=="on"){var t=jQuery("#forwardMode").val();t=="forwarding"?param.forwardMode="forwarding":t=="forwardingonly"&&(param.forwardMode="forwardingonly")}else param.forwardMode="none";var n=new Array;jQuery("#forwardMailList tr .forwardMailList").each(function(){n.push(jQuery(this).text())}),param.forwardingAddress=n;var r=jQuery("#defineType").val();r=="mail"?param.defineType="mail":r=="domain"&&(param.defineType="domain");var i=jQuery("#defineValue").val();i&&(i=i.toLowerCase()),param.defineValue=i;var s=new Array;jQuery("#defineForwardingList li .txt").each(function(){s.push(jQuery(this).text())}),param.defineForwardingAddress=s;var o=jQuery("#defineForwardingSeq").val();return param.defineForwardingSeq=o,param}function validationCheck(){var e=jQuery("#defineType").val(),t=jQuery("#defineValue").val().toLowerCase(),n=new Array;jQuery("#defineForwardingList li .txt").each(function(){n.push(jQuery(this).text())});if(n.length>0){if(e=="mail"){if(!isMail(t))return jQuery.goMessage(mailMsg.common_2),jQuery("#defineValue").focus(),!1}else if(e=="domain"&&!isDomain(t))return jQuery.goMessage(mailMsg.error_domain),jQuery("#defineValue").focus(),!1;return!0}return jQuery.goMessage(mailMsg.conf_forward_empty_msg),!1}function deleteFilter(e){var t={};t.condSeqs=[e],mailSettingControl.deleteFilterRule(t)}function deleteExtList(e,t){param={},param.pop3Host=e,param.pop3Id=t,mailSettingControl.deleteExtRule(param)}function deleteAllExtList(){jQuery.goConfirm(mailMsg.alert_remove_all,"",function(){mailSettingControl.deleteAllExtRule()})}function setStartTime(){jQuery("#startTime").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearSuffix:""})}function setEndTime(){jQuery("#endTime").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearSuffix:""})}function changeSslSelect(){var e=jQuery("#sslCheck").attr("checked");e?jQuery("#pop3Port").attr("value","995"):jQuery("#pop3Port").attr("value","110")}function changeReplyMode(){var e=jQuery("#replyMode").val();e=="REPLYWHITE"?jQuery("#reply_mode_area").show():e=="REPLYALL"&&jQuery("#reply_mode_area").hide()}function deleteReplyMail(){var e=jQuery("#reply_mail_list").length;e==0&&jQuery("#mail_list_empty").show()}function deleteReplyMailAll(){var e=jQuery("#mail_list_empty").prev().html(),t=jQuery("#mail_list_empty").next().html();while(e||t)jQuery("#reply_mail_list").remove(),e=jQuery("#mail_list_empty").prev().html(),t=jQuery("#mail_list_empty").next().html();jQuery("#mail_list_empty").show()}function saveMailAdd(){var e,t;jQuery("#mail_list_empty").hide();var n=USEREMAIL;e=jQuery("#add_mail_name").val();if(!checkInputLength("jQuery",jQuery("#add_mail_name"),"",0,255))return;t=jQuery("#mail_add_list tr .reply_address").map(function(){return jQuery(this).text()}).get(),addMailList(jQuery("#add_mail_name"),t,"1000",n,!1,"r"),jQuery.goPopup.close()}function setPOP3Server(){var e=jQuery("#pop3List").val();jQuery("form input").attr("disabled",e==""),e.indexOf("|")>-1?(e=e.replace("|ssl",""),jQuery("#pop3Port").val("995"),jQuery("#sslCheck").attr("checked",!0)):(jQuery("#pop3Port").val("110"),jQuery("#sslCheck").attr("checked",!1)),jQuery("#pop3Host").val(e=="userInput"?"":e)}function checkBox(){jQuery("#mbox").attr("checked")?(jQuery("#saveNewFolder").removeAttr("disabled"),jQuery("#saveFolder").attr("disabled","disabled"),jQuery("#inputBoxName").show()):(jQuery("#saveNewFolder").attr("disabled","disabled"),jQuery("#saveFolder").removeAttr("disabled"),jQuery("#inputBoxName").hide())}function changeOnlyImageSignMode(e){var t=jQuery("#sign_only_image").attr("checked");if(t=="checked")settingEditorBoxDestroy(),jQuery("#signSelectMode").hide(),jQuery("#registSignImage").show(),jQuery("#signText").hide(),jQuery("#signHtml").hide(),jQuery("#signImgSizeText").hide(),jQuery("#onlySignImgSize").show(),jQuery("#thumbnail_image").removeAttr("width"),jQuery("#thumbnail_image").removeAttr("height"),jQuery("#thumbnailImageWrap").height("170px"),"image"==jQuery("input[name='imgSizeFlag']:checked").val()||jQuery("input[name='imgSizeFlag']:checked").val()==undefined?(jQuery("#thumbnail_image").css({width:"350px",height:"170px"}),jQuery("#signImageSizeDesc").text("350 x 170"),jQuery("input[name='imgSizeFlag'][value='image']").attr("checked","checked")):(jQuery("#thumbnail_image").css({width:"",height:""}),jQuery("input[name='imgSizeFlag'][value='image_full']").attr("checked","checked")),jQuery("#thumbnailImageDivWrap").css({overflow:"auto",width:"670px",height:"180px"});else{jQuery("#signSelectMode").show(),jQuery("#registSignImage").show();var n=jQuery("#sign_mode option:selected").val();n=="html"?(jQuery("#signText").hide(),jQuery("#signHtml").show(),settingEditorBoxScript(null,e)):(jQuery("#signText").show(),jQuery("#signHtml").hide(),settingEditorBoxDestroy()),jQuery("#signImgSizeText").show(),jQuery("#onlySignImgSize").hide(),jQuery("#thumbnailImageWrap").height("120px"),jQuery("#thumbnail_image").css({width:"100px",height:"120px"}),jQuery("#signImageSizeDesc").text("100 x 120"),jQuery("#thumbnailImageDivWrap").css({overflow:"",width:"",height:""})}}function changeSignMode(){jQuery("#mail_setting_modify_sign_modal").hide();var e=jQuery("#sign_mode option:selected").val();jQuery("#signSelectMode").show(),jQuery("#registSignImage").show();if(e=="html"){if(!confirm(mailMsg.conf_sign_18)){jQuery("#sign_mode").val("text"),jQuery("#mail_setting_modify_sign_modal").show();return}var t=jQuery("#signText_Textarea").val();jQuery("#signText").hide(),jQuery("#signHtml").show(),settingEditorBoxDestroy(),settingEditorBoxScript()}else{if(!confirm(mailMsg.conf_sign_17)){jQuery("#sign_mode").val("html"),jQuery("#mail_setting_modify_sign_modal").show();return}jQuery("#signText").show(),jQuery("#signHtml").hide(),jQuery("#signText_Textarea").empty()}jQuery("#mail_setting_modify_sign_modal").show()}function selectPicture(){jQuery("#theFile").click()}function deleteThumbnailImage(){jQuery("#thumbnail_image").attr("img-data",""),jQuery("#thumbnail_image").attr("src","/resources/images/photo_profile_sample.jpg")}function saveSign(){var e=getSignData();e&&(mailSettingControl.destroySignAttach(),mailSettingControl.saveSignData(e),jQuery.goPopup.close())}function getSignData(){var e=jQuery("#signName"),t=e.val();if(!validateInputValue(e,1,20,"onlyBack"))return;var n=jQuery("#beforeSignName"),r=n.val(),i=jQuery("#signWriteType").val(),s=!1;jQuery("#signListTable input[name='signNameHidden']").each(function(e){jQuery.trim(t)==jQuery.trim(jQuery(this).val())&&(i=="modify"?r!=t&&(s=!0):s=!0)});if(s){jQuery.goMessage(mailMsg.conf_sign_alert_signName_same);return}var o=jQuery("#sign_only_image").attr("checked"),u=jQuery("#sign_mode option:selected").val(),a="",f=!1;if(!o){u=="html"?a=settingGetHtmlMessage():a=jQuery("#signText_Textarea").val();var l=a.length;if(l<1&&l>2048){jQuery.goMessage(msgArgsReplace(mailMsg.error_inputlength,[1,2048]));return}}var c=jQuery("#signSeq").val(),h="",p=jQuery("#defaultSign").attr("checked");p=="checked"&&(f=!0),o?h=jQuery("input[name='imgSizeFlag']:checked").val():h="normal";var d={};d.signName=t,d.defaultSign=f,d.signMode=u,d.signText=a,d.signSeq=c,d.signType=h;var v=jQuery("#thumbnail_image").attr("img-data");v&&(d.signImagePath=v);var m=jQuery("#thumbnail_image").attr("img-name");return m&&(d.signImageName=m),d}function settingGetHtmlMessage(){return signSmartEditorControl.getEditorText()}function sleep(e){var t=(new Date).getTime(),n=t;while(n-t<e)n=(new Date).getTime()}function selectSignImage(){jQuery("#theFile").click()}function deleteGetSignData(e){var t={signSeq:e};mailSettingControl.deleteSignData(t)}function deleteGetAllSignData(){var e=function(){mailSettingControl.deleteAllSignData()};jQuery.goConfirm(mailMsg.location_sign,mailMsg.mail_sign_select_all_remove_title,function(){e()})}function setDefaultSign(e){var t={};t.signSeq=e,mailSettingControl.settingDefaultSign(t)}function saveSignSetting(){var e=jQuery("#sign_apply").attr("checked")?!0:!1,t=jQuery("#signLocationOption option:selected").val(),n={};n.signUse=e,n.signOutside=t=="outside",mailSettingControl.modifySign(n)}function changeUserFolderAgingDayExcute(e,t){var n=e,r=function(){mailSettingControl.changeUserFolderAgingDay(n)},i=function(){var e=n.preAgingDay,r;t.find("option").each(function(){var t=jQuery(this).val();e==t&&(r=jQuery(this))}),r?r.attr("selected",!0):t.find("option").attr("selected",!1)};jQuery.goConfirm(mailMsg.mail_folder,mailMsg.mail_change_aging_title,function(){r()},function(){i()})}function startBackupFolderExcute(e,t){if(isBackup||isBackupComplete||backupWork){jQuery.goAlert(mailMsg.mail_backup_title,mailMsg.alert_backup_process);return}backupWork=!0,backupStatusId=t;var n={folderName:e,folderEncName:t};mailSettingControl.startBackupFolder(n)}function reloadViewFolderManage(){mailSettingControl.loadViewFolderManage()}function closeModifyFolderArea(){jQuery("#folderManageWrap span.txt_edit").each(function(){jQuery(this).prev().show(),jQuery(this).hide()}),jQuery("#folderManageWrap tr.edit").each(function(){jQuery(this).removeClass("edit")})}function settingEditorBoxScript(e,t){var n={useImage:!1};signSmartEditorControl&&(signSmartEditorControl.destroy(),signSmartEditorControl=null),n.id="signSmartEditor",n.locale=LOCALE,n.simpleMode=!0,n.blockResize=!0,signSmartEditorControl=new SmartEditorControl(n),signSmartEditorControl.makeEditor(function(){t&&signSmartEditorControl.setEditorText(t)})}function settingEditorBoxDestroy(){signSmartEditorControl&&(signSmartEditorControl.destroy(),signSmartEditorControl=null)}function saveMailTagExcute(){var e=jQuery("#tag_name_input"),t=e.val(),n=jQuery("#mail_tag_popup div.layer_pallete a.active").attr("color");if(!validateInputValue(e,2,32,"folderName"))return;mailSettingControl.addTag(t,n),jQuery.goPopup.close()}function closeMailTagPallete(){jQuery("#mailTagPallete").remove();var e=jQuery("#tag_modify_area").length;e&&(jQuery("#tag_modify_area").parent().parent().prev().show(),jQuery("#tag_modify_area").parent().parent().empty())}function modifyTagNameExcute(e){var t=e.tagName,n=e.color,r=e.id,i="tag_row_"+r,s="modify_tag_pallete_"+r,o="tag_modify_area_"+r,u={name:t,color:n,id:r};jQuery("#"+i).hide(),jQuery("#"+o).append(getHandlebarsTemplate("tag_modify_tmpl",u)),jQuery("#"+o).show();var u={color:n};jQuery("#"+s).html(getHandlebarsTemplate("mail_pallete_modal_tmpl",u)),jQuery("#"+s+" div.layer_pallete").on("click","a",function(e){jQuery("#"+s+" div.layer_pallete a").removeClass("active"),jQuery(this).addClass("active")})}function deleteLastRcptExcute(e){var t=jQuery("#rcptList"),n=t.val();n==""?t.val(e):t.val(n+","+e),jQuery("#rcptbodyEmpty ~ tr").length||jQuery("#rcptbodyEmpty").show()}function deleteAllLastRcptExcute(){jQuery("#rcptData .deleteBtn").each(function(){deleteLastRcptExcute(jQuery(this).data("seq"))}),jQuery("#rcptbodyEmpty ~ tr").remove(),jQuery("#rcptbodyEmpty").show()}function saveLastRcptExcute(){var e=jQuery("#rcptList").val();if(e==""){jQuery.goSlideMessage(mailMsg.save_ok);return}var t=e.split(","),n={rcptSeqList:t};mailSettingControl.deleteLastRcpt(n)}function isMail(e){len=get_length(e);if(len>256)return!1;for(i=0;i<len;i++){ch=e.charAt(i);if(ch>="0"&&ch<="9"||ch>="A"&&ch<="Z"||ch>="a"&&ch<="z"||ch=="-"||ch=="."||ch=="_"||ch=="@")continue;return!1}for(i=0;i<len;i++){ch=e.charAt(i);if(ch=="@")return!0}return!1}function get_length(e){real_length=0,len=e.length;for(i=0;i<len;i++)ch=e.charCodeAt(i),ch>=16777215?real_length+=4:ch>=65535?real_length+=3:ch>=255?real_length+=2:real_length++;return real_length}function checkName(){var e=jQuery("#lastName").val(),t=jQuery("#firstName").val();e+=" ",jQuery("#memberName").val(e+t)}function validateAddSenderEmail(){if(jQuery("#mailSenderListTbody .senderItem").length>=100){jQuery.goMessage(msgArgsReplace(mailMsg.common_form_002,[100]));return}if(!validateInputValue(jQuery("#inputSenderName"),0,128,"userName"))return;var e=jQuery.trim(jQuery("#inputSenderName").val()),t=jQuery("#availableEmails :selected"),n=jQuery.trim(t.val());if(n==""){jQuery.goMessage(mailMsg.common_form_003),t.focus();return}if(!isEmail(n)){jQuery.goMessage(mailMsg.common_form_004),t.focus();return}var r=!1;jQuery("#mailSenderListTbody .senderItem").each(function(){var e=get_email(jQuery(this).data("email"));if(e==n)return r=!0,!1});if(r){jQuery.goMessage(mailMsg.common_form_005);return}var i={},s=getEmailFormat(e,n);i.value=s,i.isAliasUser=t.data("type")=="AliasUser";var o=getHandlebarsTemplate("mail_sender_add_tmpl",i);jQuery("#mailSenderListTbody").append(o),jQuery("#mailSenderListWrap").show(),jQuery("#inputSenderName").val("")}function toggleReplyTo(e){jQuery(e.currentTarget).is(":checked")?jQuery("#senderEmailInfo").attr("disabled","disabled"):jQuery("#senderEmailInfo").removeAttr("disabled")}function changePersonalPart(e){jQuery(".senderItem").first().text('"'+jQuery(e.currentTarget).val()+'" <'+USEREMAIL+">")}function changeImgSize(){jQuery("#signSelectMode").hide(),jQuery("#registSignImage").show(),jQuery("#signText").hide(),jQuery("#signHtml").hide(),jQuery("#signImgSizeText").hide(),jQuery("#onlySignImgSize").show(),jQuery("#thumbnail_image").removeAttr("width"),jQuery("#thumbnail_image").removeAttr("height"),jQuery("#thumbnailImageWrap").height("170px"),"image"==jQuery("input[name='imgSizeFlag']:checked").val()?(jQuery("#thumbnail_image").css({width:"350px",height:"170px"}),jQuery("#signImageSizeDesc").text("350 x 170")):jQuery("#thumbnail_image").css({width:"",height:""})}function bindFilterInputEvent(){jQuery("#setting_filter_sender,#setting_filter_receiver,#setting_filter_subject").keyup(function(){var e=jQuery.trim(jQuery("#setting_filter_sender").val()),t=jQuery.trim(jQuery("#setting_filter_receiver").val()),n=jQuery.trim(jQuery("#setting_filter_subject").val());e!=""&&t!=""||e!=""&&n!=""||t!=""&&n!=""?jQuery("#settingFilterCondOperationWrap").show():jQuery("#settingFilterCondOperationWrap").hide()})}function unbindFilterInputEvent(){jQuery("#setting_filter_sender,#setting_filter_receiver,#setting_filter_subject").unbind("keyup")}var isBackup=!1,isBackupComplete=!1,backupWork=!1,backupStatusId="",backupInterval,backupFolderName="",backupFolderEncName="",maxForwaringCount=0,installLocale="",MailSettingControl=function(){var e=this;this.basicSettingAction="/api/mail/setting/basic",this.vcardAction="/api/mail/setting/vcard",this.spamRuleAction="/api/mail/setting/spam",this.signAction="/api/mail/setting/sign",this.signDataAction="/api/mail/setting/sign/data",this.defaultSignAction="/api/mail/setting/sign/default",this.deleteSignDataAction="/api/mail/setting/sign/data/delete",this.deleteAllSignDataAction="/api/mail/setting/sign/data/delete/all",this.filterAction="/api/mail/setting/filter",this.saveFilterApplyAction="/api/mail/setting/filter/apply",this.deleteFilterAction="/api/mail/setting/filter/delete",this.selectFilterAction="/api/mail/setting/filter/cond",this.forwardAction="/api/mail/setting/forward",this.saveDefineForwardAction="/api/mail/setting/forward/ext",this.autoReplyAction="/api/mail/setting/autoreply",this.extMailAction="/api/mail/setting/extmail",this.extMailsAction="/api/mail/setting/extmails",this.deleteExtMailAction="/api/mail/setting/extmail/delete",this.deleteAllExtMailAction="/api/mail/setting/extmail/delete/all",this.folderManageAction="/api/mail/setting/folder",this.changeUserFolderAgingAction="/api/mail/setting/folder/aging",this.startBackupFolderAction="/api/mail/setting/folder/backup/start",this.statusBackupFolderAction="/api/mail/setting/folder/backup/status",this.downloadBackupFolderAction="/api/mail/setting/folder/backup/download",this.deleteBackupFolderAction="/api/mail/setting/folder/backup/delete",this.lastRcptAction="/api/mail/setting/lastrcpt",this.makeMailEvent=function(){var t=new EventControl("#mailSettingContent","click","a, span, ins, input, select");t.add("save-basic-setting",function(e){saveBasicInfo()}),t.add("basic-setting-cancel",function(t){e.loadBasicSetting()}),t.add("default-basic-setting",function(e){defaultUserSetting()}),t.add("save-spam-setting",function(e){saveSpamInfo()}),t.add("spam-setting-cancel",function(t){e.loadViewSapmRule()}),t.add("save-auto-filter",function(e){saveFilterInfo()}),t.add("save-auto-forward",function(e){saveAllForwardInfo()}),t.add("auto-forward-cancel",function(t){e.loadViewForward()}),t.add("auto-filter-cancel",function(t){e.loadViewFilter()}),t.add("view-vcard",function(t){e.loadManageVcard()}),t.add("mail-white-add",function(e){addWhiteMailList()}),t.add("mail-black-add",function(e){addBlackMailList()}),t.add("mail-white-delete",function(e){jQuery(e).parent().parent().remove(),deleteMailList("w")}),t.add("mail-black-delete",function(e){jQuery(e).parent().parent().remove(),deleteMailList("b")}),t.add("all-white-delete",function(e){deleteAllMailList("w")}),t.add("all-black-delete",function(e){deleteAllMailList("b")}),t.add("modify-signData",function(t){var n=jQuery(t).parent().data("sign_seq");e.loadModifySignData(n)}),t.add("write-signData",function(t){e.addSignData()}),t.add("delete-signData",function(e){var t=jQuery(e).parent().data("sign_seq");deleteGetSignData(t)}),t.add("delete-AllsignData",function(e){deleteGetAllSignData()}),t.add("setting-defaultSign",function(e){var t=jQuery(e).parent().data("sign_seq");setDefaultSign(t)}),t.add("save-sign-setting",function(e){saveSignSetting()}),t.add("cancel-sign-setting",function(t){e.loadViewSign()}),t.add("auto-filter-add",function(t){e.loadFilterManager()}),t.add("delete-filter",function(e){var t=jQuery(e).attr("condSeq");deleteFilter(t)}),t.add("all-filter-delete",function(e){deleteAllFilters()}),t.add("modify-filter",function(t){var n=jQuery(t).attr("condseq"),r={};r.condSeq=n,e.modifyFilterManager(r)}),t.add("forward-mail-add",function(e){addForwardMailList()}),t.add("forward-mail-delete",function(e){jQuery(e).parent().parent().remove(),deleteForwardMailList("f")}),t.add("forward-all-delete",function(e){deleteAllForwardMailList("f")}),t.add("exception-forward-add",function(t){var n={},r=jQuery("#defineForwardList").attr("data-forward_list_num"),i=new Array;jQuery("#defineForwardList .defineRuleValue").each(function(){i.push({didSaveDefineValue:jQuery(t).text()})}),n.forward_list_num=r++,n.defineList=i,e.forwardExcept(n)}),t.add("delete-ext-rule",function(e){jQuery(e).parent().parent().remove();var t=jQuery(e).data("index");jQuery("#removeDefineForwardList").append("<option value="+t+">"+t+"</option>")}),t.add("exception-forward-delete-all",function(e){jQuery("#removeAllDefineForward").val("true"),deleteAllForwardMailList("d")}),t.add("modify-ext-rule",function(t){var n={},r=jQuery(t).data("index"),i=jQuery(t).data("address"),s=jQuery(t).data("domain");i==""?(n.defineType="domain",n.defineValue=s):(n.defineType="mail",n.defineValue=i);var o=new Array;jQuery("#seq"+r+" "+"label").each(function(){o.push({forwarding_address_list:jQuery(this).text()})}),n.forwarding_address_list=o,n.defineForwardingSeq=r,e.forwardModifyExcept(n)}),t.add("mail-add",function(e){addMailList()}),t.add("mail-delete",function(e){deleteMailList()}),t.add("start-time",function(e){setStartTime()}),t.add("end-time",function(e){setEndTime()}),t.add("reply-mail-add",function(t){e.addReplyMail()}),t.add("reply-mail-delete",function(e){jQuery(e).parent().parent().remove(),deleteReplyMail()}),t.add("reply-mail-delete-all",function(e){deleteReplyMailAll()}),t.add("ext-mail-add",function(t){e.popupExtMailManager()}),t.add("ext-mail-delete",function(e){var t=jQuery(e).attr("pop3host"),n=jQuery(e).attr("pop3id");deleteExtList(t,n)}),t.add("ext-mail-modify",function(t){var n=jQuery(t).attr("pop3host"),r=jQuery(t).attr("pop3id"),i={};i.pop3Host=n,i.pop3Id=r,e.modifyExtMailManager(i)}),t.add("ext-mail-delete-all",function(e){deleteAllExtList()}),t.add("add-folder",function(e){addFolder()}),t.add("folder",function(e){var t=jQuery(e).attr("fname");goFolder(t)}),t.add("modify-folderName",function(e){closeModifyFolderArea();var t=jQuery(e).closest("tr");t.hasClass("edit")?t.removeClass("edit"):t.addClass("edit"),jQuery(e).parent().parent().hide(),jQuery(e).parent().parent().next().show()}),t.add("modify-folder",function(t){var n=jQuery(t).parent().attr("fid"),r=jQuery("#modify_folder_"+n);if(!validateInputValue(r,2,32,"folderName"))return;var i=r.attr("previous_name"),s=jQuery.trim(r.val()),o=jQuery("#modify_folder_"+n).data("folder-name");if(s==o){var n=jQuery(t).parent().attr("fid"),u=jQuery("#modify_folder_"+n).attr("previous_name");jQuery("#modify_folder_"+n).val(o),closeModifyFolderArea();return}var a="";i.indexOf(".")>0&&(a=i.substring(0,i.lastIndexOf(".")+1)),s=a+""+s;if(isDefaultBoxCheck(s)){jQuery.goMessage(mailMsg.alert_systemfolder);return}var f={previousName:i,newName:s};folderControl.modifyFolder(f,function(){e.loadViewFolderManage()})}),t.add("modify-folder-cancel",function(e){var t=jQuery(e).parent().attr("fid"),n=jQuery("#modify_folder_"+t).data("folder-name"),r=jQuery("#modify_folder_"+t).attr("previous_name");jQuery("#modify_folder_"+t).val(n),closeModifyFolderArea()}),t.add("add-tag",function(e){addMailTag()}),t.add("delete-folder",function(e){var t=jQuery(e).parent().attr("fname");deleteFolder(t)}),t.add("move-folder",function(e){var t=jQuery(e).parent().attr("fname");moveFolder(t,!0)}),t.add("empty-folder",function(e){var t=jQuery(e).parent().attr("fname");emptyFolder(t)}),t.add("modify-tagName",function(e){var t=jQuery(e).attr("tagname"),n=jQuery(e).attr("tagcolor"),r=jQuery(e).attr("tagid"),i={id:r,name:t,color:n,type:"modify"};addMailTag(i)}),t.add("modify-tag-cancel",function(e){var t=jQuery(e).parent().attr("fid");jQuery("#mailTagPallete").remove(),jQuery("#tag_row_"+t).show(),jQuery("#tag_modify_area_"+t).hide().empty()}),t.add("delete-tag",function(e){var t=jQuery(e).attr("tagid");deleteMailTag(t)}),t.add("backup-folder",function(e){var t=jQuery(e).parent().attr("fname"),n=jQuery(e).parent().attr("fid");startBackupFolderExcute(t,n)}),t.add("download-backup",function(t){e.downloadBackupFolder()}),t.add("delete-backup",function(t){e.deleteBackupFolder(),jQuery("#empty_org").hide()}),t.add("lastrcpts-delete",function(e){jQuery(e).closest("tr").remove();var t=jQuery(e).data("seq");deleteLastRcptExcute(t)}),t.add("lastrcpts-delete-all",function(e){deleteAllLastRcptExcute()}),t.add("share-folder",function(t){var n=jQuery(t).parent().attr("fname");openShareFolderSettingLayer(n,function(){e.loadViewFolderManage()});var r="on"==jQuery(t).parent().data("share");if(r){var i=jQuery(t).parent().data("shareseq");jQuery("#orgShareFlag").attr("checked",!0),jQuery("#orgShareFlag").data("shareSeq",i);var s={folderUid:i};folderControl.getSharringReaderList(s)}}),t.add("save-auto-reply",function(e){saveAutoReply()}),t.add("auto-reply-cancel",function(t){e.loadViewAutoReply()}),t.add("rcpt-setting-cancel",function(t){e.loadViewLastRcpt()}),t.add("save-rcpt",function(e){saveLastRcptExcute()}),t.add("upload-folder",function(e){upfolderName=jQuery(e).parent().attr("fname"),openUploadMessageLayer()}),t.add("add-sender-email",function(e){validateAddSenderEmail(),jQuery("#mailSenderListTbody tr").length>1&&jQuery("#myEmailDefault").show()}),t.add("delete-sender-item",function(e){jQuery(e).closest("tr").find("#defaultEmail").length>0&&jQuery(".senderItem").first().after('<span id="defaultEmail">('+mailMsg.conf_userinfo_sender_email_default+")</span>"),jQuery(e).closest("tr").remove(),jQuery("#mailSenderListTbody tr").length==0?jQuery("#mailSenderListWrap").hide():jQuery("#mailSenderListTbody tr").length==1&&jQuery("#myEmailDefault").hide()}),t.add("default-sender-email",function(e){jQuery("#defaultEmail").remove(),jQuery(e).closest("tr").find(".senderItem").after('<span id="defaultEmail">('+mailMsg.conf_userinfo_sender_email_default+")</span>")});var n=new EventControl("#mailSettingWrap","click","a, span, ins, li");n.add("basic-setting",function(e){selectSettingMenu("basic")}),n.add("sign-setting",function(e){selectSettingMenu("sign")}),n.add("folder-setting",function(e){selectSettingMenu("folder")}),n.add("spam-setting",function(e){selectSettingMenu("spam")}),n.add("auto-filter",function(e){selectSettingMenu("filter")}),n.add("auto-forward",function(e){selectSettingMenu("forward")}),n.add("auto-reply",function(e){selectSettingMenu("autoreply")}),n.add("extMail-setting",function(e){selectSettingMenu("extmail")}),n.add("last-rcpt",function(e){selectSettingMenu("lastrcpt")});var r=new EventControl("#mailSettingWrap","change","select");r.add("spam-policy",function(e){checkSpamMode()}),r.add("spam-level",function(e){}),r.add("spam-handle",function(e){}),r.add("pop3-server-select",function(e){setPOP3Server()}),r.add("change-UserFolderAging",function(e){var t=jQuery(e).data("name"),n=jQuery(e).data("preaging"),r=jQuery(e).val(),i=jQuery(e).data("index"),s={folderName:t,preAgingDay:n,agingDay:r,selectIdx:i};changeUserFolderAgingDayExcute(s,jQuery(e))}),r.add("reply-mode",function(e){changeReplyMode()})},this.loadBasicSetting=function(){changeMailContainer("setting"),ActionLoader.getGoLoadAction(this.basicSettingAction,null,e.printBasicSetting,"json"),google.sendPageView(this.basicSettingAction)},this.printBasicSetting=function(t){setSchedulerTab("0");var n=USERLOGINEMAIL;t.myEmail='"'+t.senderName+'" <'+n+">",t.mailExposure=MAIL_EXPOSURE;if(t.useMailSender){var r=!0,i=t.senderList;if(i)for(var s=0;s<i.length;s++)i[s].defaultMail&&(r=!1);t.myEmailDefault=r}jQuery("#mailSettingContent").handlebars("mail_setting_basic_tmpl",t),jQuery.ajax({type:"GET",url:"/api/user/available/emails",data:null,async:!1,success:function(e,t){var n=jQuery("#availableEmails");jQuery(e.data).each(function(e,t){n.append("<option value="+t.email+" data-type="+t.userType+">"+t.email+"</option>")})},dataType:"json"}),e.initTabScroll()},this.saveBasicInfo=function(e){ActionLoader.postGoJsonLoadAction(this.basicSettingAction,e,function(e){jQuery("#searchallfolder").attr("checked")?searchAllFolder="on":searchAllFolder="off",isPopupWrite="popup"==jQuery("#composeModeSelect").val(),isWriteNoti=jQuery("#writeNoti").attr("checked"),isMailBadgeUse=jQuery("#mailBadgeUse").attr("checked"),makeMailBadgeCount(),jQuery.goSlideMessage(mailMsg.save_ok)},"json")},this.saveBasciPopupInfo=function(t){ActionLoader.postGoJsonLoadAction(this.vcardAction,t,e.messageAlert,"json")},this.savePopupVcardInfo=function(t){ActionLoader.postGoJsonLoadAction(this.vcardAction,t,e.vcardMessagevAlert,"json")},this.saveSpamInfo=function(e){ActionLoader.postGoJsonLoadAction(this.spamRuleAction,e,function(e){jQuery.goSlideMessage(mailMsg.save_ok)},"json")},this.resultDialog=function(e){e.isSuccess?jQuery.goSlideMessage(e.isSuccess):jQuery.goSlideMessage(e.isFail,"caution")},this.filterMessageAlert=function(t){t.result?t.msg?jQuery.goSlideMessage(t.msg):jQuery.goSlideMessage(mailMsg.common_job_success):t.msg&&jQuery.goSlideMessage(t.msg,"caution"),e.loadViewFilter()},this.messageAlert=function(e){e.result?e.msg?jQuery.goAlert(e.msg):jQuery.goAlert(mailMsg.common_job_success):e.msg&&jQuery.goAlert(e.msg)},this.extMessageAlert=function(e){if(e.isSuccess)e.msg?jQuery.goAlert(e.msg):jQuery.goAlert(mailMsg.common_job_success),jQuery.goPopup.close();else if(e.msg)return jQuery.goAlert(e.msg),!1},this.vcardMessagevAlert=function(e){jQuery.goAlert(mailMsg.save_ok)},this.saveForwardMessageAlert=function(t){t.result?jQuery.goSlideMessage(t.msg):t.msg&&jQuery.goSlideMessage(t.msg,"caution"),e.loadViewForward()},this.settingDefaultSign=function(t){ActionLoader.postGoLoadAction(this.defaultSignAction,t,function(t){jQuery.goSlideMessage(mailMsg.save_ok),e.loadViewSign()},"json")},this.modifySign=function(t){ActionLoader.postGoLoadAction(this.signAction,t,function(t){e.loadViewSign(),jQuery.goSlideMessage(mailMsg.save_ok)},"json")},this.deleteSignData=function(t){ActionLoader.postGoLoadAction(this.deleteSignDataAction,t,function(t){e.loadViewSign(),jQuery.goSlideMessage(mailMsg.del_ok)},"json")},this.deleteAllSignData=function(){ActionLoader.postGoLoadAction(this.deleteAllSignDataAction,null,function(t){e.loadViewSign(),jQuery.goSlideMessage(mailMsg.del_ok)},"json")},this.addSignData=function(){var t={useFlash:hasFlashPlayer()},n=jQuery("#mail_setting_modify_sign_modal").length;n||jQuery.goPopup({id:"mail_setting_modify_sign_modal",width:700,isLock:!0,offset:{top:"10px",left:"25%"},pclass:"layer_normal layer_sign",header:mailMsg.conf_profile_66,contents:getHandlebarsTemplate("mail_setting_modify_sign_modal_tmpl",t),openCallback:function(){settingEditorBoxScript(),jQuery("#signSelectMode").show(),jQuery("#registSignImage").show(),jQuery("#signText").hide(),jQuery("#signHtml").show(),jQuery("#signImgSizeText").show(),jQuery("#onlySignImgSize").hide(),jQuery("#signWriteType").val("write");var e=jQuery(window).height()-200;jQuery("#mail_setting_modify_sign_modal .content").css({height:e+"px","overflow-y":"scroll"}),jQuery("#mail_setting_modify_sign_modal table.form_type").on("change","select, input, span",function(e){var t=jQuery(this).attr("evt-rol");if(!t)return;t=="change-SignMode"?changeSignMode():t=="change-onlyImageSignMode"?changeOnlyImageSignMode():t=="changeImgSize"&&changeImgSize()}),jQuery("#mail_setting_modify_sign_modal table.form_type").on("click","span",function(e){var t=jQuery(this).attr("evt-rol");if(!t)return;t=="upload-SignImage"&&selectSignImage()}),jQuery("#sign_img_delete").on("click",function(){deleteThumbnailImage(),jQuery("#sign_img_delete").hide()});var t={locale:LOCALE};hasFlashPlayer()?signSettingControl=new SignSettingControl(t):(signSettingControl=new SignSimpleSettingControl(t),jQuery("#mailSimpleSignImageUpload").fileupload({url:"/api/mail/image/upload",formData:{uploadType:"flash",maxImageSize:jQuery("#maxImageSize").val()},dataType:"json",pasteZone:null,done:function(e,t){var n=t.result;n.errorMessage==""?(jQuery("#thumbnail_image").attr("src",n.fileURL).attr("img-data",n.filePath).attr("img-name",n.fileName),jQuery("#sign_img_delete").show()):jQuery.goSlideMessage(n.errorMessage,"caution")}})),signSettingControl.makeBtnControl()},closeCallback:function(){settingEditorBoxDestroy(),e.destroySignAttach(),jQuery("#mail_setting_modify_sign_modal div.content").off()},buttons:[{btype:"confirm",btext:mailMsg.comn_confirm,autoclose:!1,callback:saveSign},{btype:"cancel",btext:mailMsg.comn_cancel}],toggleTrigger:!1})},this.destroySignAttach=function(){if(signSettingControl){var e=jQuery("#registSignImage object").length==0?!1:!0;if(e)try{signSettingControl.destroy()}catch(t){}}},this.saveSignData=function(t){ActionLoader.postGoJsonLoadAction(this.signDataAction,t,function(t){e.loadViewSign(),jQuery.goSlideMessage(mailMsg.save_ok)},"json")},this.loadViewSign=function(){changeMailContainer("setting"),ActionLoader.getGoLoadAction(this.signAction,null,e.printViewSign,"json"),google.sendPageView(this.signAction)},this.printViewSign=function(t){setSchedulerTab("1"),jQuery("#mailSettingContent").handlebars("mail_setting_sign_tmpl",t),e.initTabScroll()},this.printViewSignData=function(e){setSchedulerTab("1"),jQuery("#mailSettingContent").handlebars("mail_setting_sign_data_tmpl",e)},this.loadWriteSignData=function(){ActionLoader.postLoadAction(this.writeSignDataAction,null,e.printSignDataAction,"json")},this.loadModifySignData=function(t){ActionLoader.getGoLoadAction(this.signDataAction,{signSeq:t},e.modifySignData,"json")},this.modifySignData=function(e){e.useFlash=hasFlashPlayer();var t=jQuery("#mail_setting_modify_sign_modal").length;t||jQuery.goPopup({id:"mail_setting_modify_sign_modal",width:700,isLock:!0,offset:{top:"10px",left:"25%"},pclass:"layer_normal layer_sign",header:mailMsg.conf_sign_edit,contents:getHandlebarsTemplate("mail_setting_modify_sign_modal_tmpl",e),openCallback:function(){var t=e.signType;if(t=="image"||t=="image_full")jQuery("#signText").hide(),jQuery("#signHtml").hide(),jQuery("#signSelectMode").hide(),jQuery("#signImgSizeText").hide(),jQuery("#onlySignImgSize").show(),jQuery("#thumbnail_image").removeAttr("width"),jQuery("#thumbnail_image").removeAttr("height"),jQuery("#thumbnailImageWrap").height("170px"),t=="image"&&(jQuery("#thumbnail_image").css({width:"350px",height:"170px"}),jQuery("#signImageSizeDesc").text("350 x 170")),jQuery("#sign_only_image").attr("checked","checked");else{jQuery("#signSelectMode").show(),jQuery("#registSignImage").show();var n=jQuery("#sign_mode").val();n=="html"?(jQuery("#signText").hide(),jQuery("#signHtml").show(),settingEditorBoxScript(null,e.signText)):(jQuery("#signText").show(),jQuery("#signHtml").hide()),jQuery("#onlySignImgSize").hide(),jQuery("#thumbnailImageWrap").height("120px"),jQuery("#thumbnail_image").css({width:"100px",height:"120px"}),jQuery("#signImageSizeDesc").text("100 x 120")}jQuery("#signWriteType").val("modify");var r=jQuery(window).height()-200;jQuery("#mail_setting_modify_sign_modal .content").css({height:r+"px","overflow-y":"scroll"}),jQuery("#mail_setting_modify_sign_modal table.form_type").on("change","select, input, span",function(t){var n=jQuery(this).attr("evt-rol");if(!n)return;n=="change-SignMode"?changeSignMode():n=="change-onlyImageSignMode"?changeOnlyImageSignMode(e.signText):n=="changeImgSize"&&changeImgSize()}),jQuery("#mail_setting_modify_sign_modal table.form_type").on("click","span",function(e){var t=jQuery(this).attr("evt-rol");if(!t)return;t=="upload-SignImage"&&selectSignImage()}),jQuery("#sign_img_delete").on("click",function(){deleteThumbnailImage(),jQuery("#sign_img_delete").hide()});var i={width:LOCALE=="jp"?90:73};hasFlashPlayer()?signSettingControl=new SignSettingControl(i):(signSettingControl=new SignSimpleSettingControl(i),jQuery("#mailSimpleSignImageUpload").fileupload({url:"/api/mail/image/upload",formData:{uploadType:"flash",maxImageSize:jQuery("#maxImageSize").val()},dataType:"json",pasteZone:null,done:function(e,t){var n=t.result;n.errorMessage==""?(jQuery("#thumbnail_image").attr("src",n.fileURL).attr("img-data",n.filePath).attr("img-name",n.fileName),jQuery("#sign_img_delete").show()):jQuery.goSlideMessage(n.errorMessage,"caution")}})),signSettingControl.makeBtnControl()},closeCallback:function(){settingEditorBoxDestroy(),signSettingControl.destroy(),jQuery("#mail_setting_modify_sign_modal div.content").off()},buttons:[{btype:"confirm",btext:mailMsg.comn_confirm,autoclose:!1,callback:saveSign},{btype:"cancel",btext:mailMsg.comn_cancel}],toggleTrigger:!1})},this.printSavaSignDataResult=function(e){e.isSuccess=="success"&&jQuery.goAlert("success")},this.loadViewFolderManage=function(){changeMailContainer("setting"),ActionLoader.getGoLoadAction(e.folderManageAction,null,e.viewFolderSetting,"json"),google.sendPageView(this.folderManageAction)},this.viewFolderSetting=function(t){setSchedulerTab("2"),jQuery("#mailSettingContent").handlebars("mail_setting_folder_tmpl",t.folderListModel),useSharedfolder||jQuery("#folderManageWrap .shareFolder").hide(),t.backupModel&&t.backupModel.folderName&&(backupStatusId=t.backupModel.folderName),e.checkBackup(t.backupModel),e.printBackupFolderInfo(t.backupModel),e.processBackupFolder(),e.initTabScroll()},this.initTabScroll=function(){jQuery("#mailSettingContent").css({"overflow-y":"auto",height:jQuery(window).height()-175+"px"})},this.messageResult=function(e){e.msg=="success"?jQuery.goAlert("success"):jQuery.goAlert(e.msg)},this.changeUserFolderAgingDay=function(e){ActionLoader.postLoadAction(this.changeUserFolderAgingAction,e,function(e){jQuery.goMessage(mailMsg.common_job_change)},function(){jQuery.goMessage(mailMsg.conf_pop_56)},"json")},this.startBackupFolder=function(t){t.type="start",e.printBackupFolderInfo(t),ActionLoader.postGoLoadAction(this.startBackupFolderAction,t,e.resultStartBackupProcess,"json")},this.resultStartBackupProcess=function(t){isBackup=!1,t.error||(isBackup=!0,backupFolderName=t.folderName,backupFolderEncName=t.folderEncName,e.processBackupFolder()),e.printBackupFolderInfo(t),backupWork=!1},this.processBackupFolder=function(){isBackup&&(backupInterval=setTimeout(function(){e.statusBackupFolder()},3e3))},this.checkBackup=function(e){e.processing?isBackup=!0:isBackup=!1,e.complate?isBackupComplete=!0:isBackupComplete=!1,e.folderName&&(backupFolderName=e.folderName,backupFolderEncName=e.folderEncName)},this.statusBackupFolder=function(){ActionLoader.getGoLoadAction(this.statusBackupFolderAction,null,function(t){t.error?(isBackup=!1,t.folderEncName=backupFolderEncName):(t.complate&&(isBackup=!1,isBackupComplete=!0),e.processBackupFolder()),e.printBackupFolderInfo(t)},"json")},this.printBackupFolderInfo=function(e){var t=getFolderNameId(e.folderEncName);if(!e.error&&e.type=="start")jQuery("#startBackup_graph_"+t).parent().show(),jQuery("#startBackup_graph_"+t).css("width","0%"),jQuery("#startBackup_"+t+" span.desc").text(mailMsg.mail_backup_process),jQuery("#startBackup_"+t).show();else if(e.type=="start")jQuery("#startBackup_graph_"+t).parent().hide(),jQuery("#startBackup_"+t+" span.desc").text(mailMsg.mail_backup_start),jQuery("#startBackup_"+t).show();else if(e.error)jQuery("#startBackup_graph_"+t).parent().hide(),jQuery("#startBackup_"+t+" span.desc").text(mailMsg.mail_backup_error);else if(e.complate){var n=e.folderName.split("."),r=n[n.length-1],i='"'+r+'" '+mailMsg.mail_backup_complete+" ("+e.fileSizeFormat+")";jQuery("#startBackup_graph_"+t).length==0?(jQuery("#empty_org").show(),jQuery("#empty_msg").append(i)):(jQuery("#startBackup_graph_"+t).css("width","100%"),jQuery("#startBackup_"+t).hide(),jQuery("#completeBackup_"+t+" span.desc").text(i),jQuery("#completeBackup_"+t).show())}else e.processing?(jQuery("#startBackup_"+t).show(),jQuery("#startBackup_graph_"+t).css("width",e.percent+"%")):(jQuery("#startBackup_"+t).hide(),jQuery("#completeBackup_"+t).hide())},this.downloadBackupFolder=function(){isBackup=!1,isBackupComplete=!1,e.printBackupFolderInfo({folderName:backupFolderName,folderEncName:backupFolderEncName}),jQuery("#reqFrame").attr("src",this.downloadBackupFolderAction)},this.deleteBackupFolder=function(){isBackup=!1,isBackupComplete=!1,e.printBackupFolderInfo({folderName:backupFolderName,folderEncName:backupFolderEncName}),ActionLoader.postGoLoadAction(this.deleteBackupFolderAction,null,function(t){t.error?jQuery.goAlert(mailMsg.alert_backup_delete_error):jQuery.goAlert(mailMsg.alert_backup_delete_success),isBackup=!1,isBackupComplete=!1,e.processBackupFolder(),backupWork=!1},"json")},this.loadViewSapmRule=function(){changeMailContainer("setting"),ActionLoader.getGoLoadAction(this.spamRuleAction,null,e.viewSpamRuleSetting,"json"),google.sendPageView(this.spamRuleAction)},this.viewSpamRuleSetting=function(t){setSchedulerTab("3");var n=getSpamPolicy(t);t.spamPolicyValue=n,jQuery("#mailSettingContent").handlebars("mail_setting_spam_tmpl",t),checkSpamMode(),e.initTabScroll()},this.saveSpamInfo=function(e){ActionLoader.postGoJsonLoadAction(this.spamRuleAction,e,function(e){jQuery.goSlideMessage(mailMsg.save_ok)},"json")},this.loadViewFilter=function(){changeMailContainer("setting"),ActionLoader.getGoLoadAction(this.filterAction,null,e.viewFilterSetting,"json"),google.sendPageView(this.filterAction)},this.viewFilterSetting=function(t){setSchedulerTab("4"),t.smartFilter=smartFilter,jQuery("#mailSettingContent").handlebars("mail_setting_filter_tmpl",t),e.initTabScroll()},this.saveFilterInfo=function(e){ActionLoader.postGoJsonLoadAction(this.saveFilterApplyAction,e,function(){jQuery.goSlideMessage(mailMsg.save_ok)},"json")},this.loadViewForward=function(){changeMailContainer("setting"),ActionLoader.getGoLoadAction(this.forwardAction,null,e.viewForwardSetting,"json")},this.saveForwardInfo=function(t){ActionLoader.postGoJsonLoadAction(this.forwardAction,t,function(t){jQuery.goSlideMessage(mailMsg.save_ok),e.loadViewForward()},"json")},this.saveDefineForwardInfo=function(t){ActionLoader.postGoJsonLoadAction(this.saveDefineForwardAction,t,function(t){jQuery.goSlideMessage(mailMsg.save_ok),e.loadViewForward()},"json")},this.viewForwardSetting=function(t){setSchedulerTab("5"),maxForwaringCount=t.maxForwaringCount,jQuery("#mailSettingContent").handlebars("mail_setting_forward_tmpl",t),e.initTabScroll()},this.deleteFilterRule=function(t){ActionLoader.postGoLoadAction(this.deleteFilterAction,t,function(){jQuery.goSlideMessage(mailMsg.del_ok),e.loadViewFilter()},"json")},this.loadViewAutoReply=function(){changeMailContainer("setting"),ActionLoader.getGoLoadAction(this.autoReplyAction,null,e.viewAutoReplySetting,"json"),google.sendPageView(this.autoReplyAction)},this.addReplyMail=function(){var e=jQuery("#mail_setting_mailadd").length;e||jQuery.goPopup({id:"mail_setting_mailadd",pclass:"layer_normal layer_add_mailbox",header:mailMsg.conf_spamrule_47,contents:getHandlebarsTemplate("mail_setting_mailadd_tmpl"),openCallback:function(){},closeCallback:function(){jQuery("#mail_setting_mailadd div.content").off()},buttons:[{btype:"confirm",btext:mailMsg.comn_confirm,autoclose:!1,callback:saveMailAdd},{btype:"cancel",btext:mailMsg.comn_cancel}]})},this.viewAutoReplySetting=function(t){setSchedulerTab("6"),jQuery("#mailSettingContent").handlebars("mail_setting_reply_tmpl",t),jQuery("#startTime").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearSuffix:""}),jQuery("#endTime").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,yearSuffix:""}),e.initTabScroll()},this.saveAutoReply=function(e){ActionLoader.postGoJsonLoadAction(this.autoReplyAction,e,function(){jQuery.goSlideMessage(mailMsg.save_ok)},"json")},this.loadViewExtMail=function(){changeMailContainer("setting"),ActionLoader.getGoLoadAction(this.extMailsAction,null,e.viewExtMailSetting,"json"),google.sendPageView(this.extMailsAction)},this.viewExtMailSetting=function(t){setSchedulerTab("7"),installLocale=t.installLocale,jQuery("#mailSettingContent").handlebars("mail_setting_ext_tmpl",t),e.initTabScroll()},this.deleteExtRule=function(t){ActionLoader.postGoJsonLoadAction(this.deleteExtMailAction,t,function(t){jQuery.goSlideMessage(mailMsg.del_ok),e.loadViewExtMail()},"json")},this.deleteAllExtRule=function(){ActionLoader.postGoJsonLoadAction(this.deleteAllExtMailAction,null,function(t){jQuery.goSlideMessage(mailMsg.del_ok),e.loadViewExtMail()},"json")},this.loadViewLastRcpt=function(){changeMailContainer("setting"),ActionLoader.getGoLoadAction(this.lastRcptAction,null,e.viewLastRcptSetting,"json"),google.sendPageView(this.lastRcptAction)},this.viewLastRcptSetting=function(t){setSchedulerTab("8"),t.mailExposure=MAIL_EXPOSURE,t.companyDomainList=companyDomainList,jQuery("#mailSettingContent").handlebars("mail_setting_rcpt_tmpl",t),e.initTabScroll()},this.deleteLastRcpt=function(t){ActionLoader.postGoLoadAction(this.lastRcptAction,t,function(t){jQuery.goSlideMessage(mailMsg.save_ok),e.loadViewLastRcpt()},"json")},this.loadManageVcard=function(){ActionLoader.getGoLoadAction(this.vcardAction,null,e.manageVcard,"json")},this.manageVcard=function(e){e.useFlash=hasFlashPlayer();var t=jQuery.goPopup({id:"mail_setting_modal_popup",width:700,pclass:"layer_normal layer_nameCard",header:mailMsg.conf_sign_13,contents:getHandlebarsTemplate("mail_setting_modal_tmpl",e),openCallback:function(){jQuery("#mail_setting_modal_popup div.content").on("click","input, span, a",function(e){var t=jQuery(this).attr("evt-rol");t=="add-folder-select-parent"?jQuery(this).attr("checked")?jQuery("#addFolderParentSelect").attr("disabled",!1):jQuery("#addFolderParentSelect").attr("disabled",!0):t=="basic-upload-photo"?selectPicture():t=="delete-photo"?(deleteThumbnailImage(),jQuery("#vcard_img_delete").hide()):t=="detail-addr"?toggleAddressLayer("office"):t=="detail-home-addr"&&toggleAddressLayer("home")}),jQuery("#mail_setting_modal_popup div.content").on("change","select",function(e){var t=jQuery(this).attr("evt-rol");if(t=="select-item"){var n=jQuery(this).find("option:selected"),r=n.val();if(r&&r!=""){var i=n.text(),s={itemName:i,itemId:r},o=jQuery("#tbody #"+r).length==0?!0:!1;o&&jQuery("#selectAddItem").before(getHandlebarsTemplate("addr_member_view_add_item_tmpl",s)),n.remove()}}});var e={locale:LOCALE};hasFlashPlayer()?simpleBasicControl=new SimpleBasicControl(e):(simpleBasicControl=new UploadSimpleBasicControl(e),jQuery("#mailSimpleVcardImageUpload").fileupload({url:"/api/mail/image/upload",formData:{uploadType:"flash",maxImageSize:jQuery("#maxImageSize").val()},dataType:"json",pasteZone:null,done:function(e,t){var n=t.result;n.errorMessage==""?(jQuery("#thumbnail_image").attr("src",n.fileURL).attr("img-data",n.filePath).attr("img-name",n.fileName),jQuery("#vcard_img_delete").show()):jQuery.goSlideMessage(n.errorMessage,"caution")}})),simpleBasicControl.makeBtnControl()},closeCallback:function(){jQuery("#mail_setting_modal_popup div.content").off()},buttons:[{btype:"confirm",btext:mailMsg.comn_confirm,autoclose:!1,callback:modifyVcardInfo},{btype:"cancel",btext:mailMsg.comn_cancel}]});t.reoffset(),jQuery("#mail_setting_modal_popup").css("margin-left","-350px")},this.forwardExcept=function(e){jQuery.goPopup({id:"mail_forward_except_modal_popup",width:700,pclass:"layer_normal layer_except",header:mailMsg.conf_forward_38,contents:getHandlebarsTemplate("mail_forward_except_modal_tmpl",e),openCallback:function(){jQuery("#defineForwardingSeq").attr("value",e.forward_list_num),jQuery("#mail_forward_except_modal_popup div.content").on("click","input, span, a",function(e){var t=jQuery(this).attr("evt-rol");t=="forward-except-add"?addExceptForwardList():t=="forward-except-delete"?deleteSelectList():t=="forward-except-all-delete"&&deleteAllList()})},closeCallback:function(){jQuery("#mail_forward_except_modal_popup div.content").off()},buttons:[{btype:"confirm",btext:mailMsg.comn_confirm,autoclose:!1,callback:saveDefineForwardInfo},{btype:"cancel",btext:mailMsg.comn_cancel}]})},this.forwardModifyExcept=function(e){jQuery.goPopup({id:"mail_forward_except_modify_modal_popup",width:700,pclass:"layer_normal layer_except",header:mailMsg.conf_forward_39,contents:getHandlebarsTemplate("mail_forward_except_modal_tmpl",e),openCallback:function(){jQuery("#mail_forward_except_modify_modal_popup div.content").on("click","input, span, a",function(e){var t=jQuery(this).attr("evt-rol");if(t=="forward-except-add"){var n=jQuery("#defineForwardingAddressText").val();addExceptForwardList(n)}else t=="forward-except-delete"?deleteSelectList():t=="forward-except-all-delete"&&deleteAllList()})},closeCallback:function(){jQuery("#mail_forward_except_modify_modal_popup div.content").off()},buttons:[{btype:"confirm",btext:mailMsg.comn_confirm,autoclose:!1,callback:saveDefineForwardInfo},{btype:"cancel",btext:mailMsg.comn_cancel}]})},this.loadFilterManager=function(){var t={};e.filterManager(t)},this.filterManager=function(e){var t=folderControl.getUserFolderList(),n=folderControl.getTagData();e.folderList=t,e.tagList=n,jQuery.goPopup({id:"mail_setting_modal_filter",width:600,pclass:"layer_normal layer_autoSort",header:mailMsg.menu_conf_filter,contents:getHandlebarsTemplate("mail_setting_modal_filter_tmpl",e),openCallback:function(){jQuery("#mail_setting_modal_filter input[placeholder]").placeholder(),jQuery("#mail_setting_modal_filter div.content").on("click","input, a",function(e){var t=jQuery(this).attr("evt-rol"),n=jQuery("#settingFilterSaveFolder"),r=jQuery("#settingFilterSaveNewFolder"),i=jQuery("#settingFilterInputBoxName"),s=jQuery("#settingFilterTagList"),o=jQuery("#settingFilterNewTagName");t=="move-folder"?(n.attr("disabled",!1),r.attr("disabled",!0),i.attr("disabled",!0),s.attr("disabled",!0),o.attr("disabled",!0)):t=="move-newFolder"?(n.attr("disabled",!0),r.attr("disabled",!1),i.attr("disabled",!1),s.attr("disabled",!0),o.attr("disabled",!0)):t=="set-tag"?(n.attr("disabled",!0),r.attr("disabled",!0),i.attr("disabled",!0),s.attr("disabled",!1),o.attr("disabled",!0)):t=="set-new-tag"&&(n.attr("disabled",!0),r.attr("disabled",!0),i.attr("disabled",!0),s.attr("disabled",!0),o.attr("disabled",!1))}),bindFilterInputEvent(),jQuery("#mail_setting_modal_filter div.layer_pallete").on("click","a",function(e){jQuery("#mail_setting_modal_filter div.layer_pallete a").removeClass("active"),jQuery(this).addClass("active")}),e.policy&&(e.tagPolicy?e.tagPolicy&&(jQuery("#settingFilterSaveFolder").attr("disabled",!0),jQuery("#settingFilterTagList").attr("disabled",!1).val(e.policy.replace("tag ","")),jQuery("#settingFilterSetTag").attr("checked","checked")):(jQuery("#settingFilterTagList").attr("disabled",!0),jQuery("#settingFilterSaveFolder").val(e.policy.replace("move ","")),jQuery("#settingFilterFolderSave").attr("checked","checked"))),e.subcondList&&e.subcondList.length>1&&jQuery("#settingFilterCondOperationWrap").show()},closeCallback:function(){unbindFilterInputEvent(),jQuery("#mail_setting_modal_filter div.layer_pallete").off()},buttons:[{btype:"confirm",btext:mailMsg.comn_confirm,autoclose:!1,callback:saveFilter},{btype:"cancel",btext:mailMsg.comn_cancel}]});var r=jQuery("#mail_setting_modal_filter").css("margin-top");r=Number(r.substring(0,r.indexOf("px"))),jQuery("#mail_setting_modal_filter").css("margin-top",r+55+"px")},this.modifyFilterManager=function(t){ActionLoader.getGoLoadAction(this.selectFilterAction,t,e.filterManager,"json")},this.saveAutoFilter=function(t){ActionLoader.postGoJsonLoadAction(e.filterAction,t,function(t){jQuery.goPopup.close(),jQuery.goMessage(mailMsg.save_ok),e.loadViewFilter(),folderControl.getFolderInfo(),folderControl.getTagList()},"json",function(e){e.name=="DuplicatedException"?jQuery.goMessage(mailMsg.conf_filter_exist):jQuery.goMessage(mailMsg.save_fail)})},this.saveExtMailSetting=function(t){ActionLoader.postGoJsonLoadAction(this.extMailAction,t,function(t){jQuery.goPopup.close(),jQuery.goSlideMessage(mailMsg.save_ok),e.loadViewExtMail(),folderControl.getFolderInfo()},"json")},this.popupExtMailManager=function(){var t={pop3Port:""};e.extMailManager(t)},this.extMailManager=function(e){e.folderList=folderControl.getUserFolderList(),e.locale=installLocale,jQuery.goPopup({id:"mail_ext_setting_modal",width:650,pclass:"layer_normal layer_outMail",header:mailMsg.conf_pop_9,contents:getHandlebarsTemplate("mail_ext_setting_modal_tmpl",e),openCallback:function(){e.pop3Boxname&&jQuery("#saveFolder").val(e.pop3Boxname.replace("move ","")),installLocale=="jp"&&(jQuery("#pop3Id").attr("disabled",!1),jQuery("#pop3Port").attr("disabled",!1),jQuery("#pop3Host").attr("disabled",!1),jQuery("#sslCheck").attr("disabled",!1),jQuery("#pop3Pw").attr("disabled",!1),jQuery("pop3Del1").attr("disabled",!1),jQuery("pop3Del2").attr("disabled",!1),setPOP3Server()),jQuery("#mail_ext_setting_modal div.content").on("change","select, input",function(e){var t=jQuery(this).attr("evt-rol");if(!t)return;if(t=="pop3-server-select"){var n=jQuery("#pop3List option:selected").val();n!="none"?(jQuery("#pop3Id").attr("disabled",!1),jQuery("#pop3Port").attr("disabled",!1),jQuery("#pop3Host").attr("disabled",!1),jQuery("#sslCheck").attr("disabled",!1),jQuery("#pop3Pw").attr("disabled",!1),jQuery("pop3Del1").attr("disabled",!1),jQuery("pop3Del2").attr("disabled",!1),setPOP3Server()):(jQuery("#pop3Id").attr("disabled",!0),jQuery("#pop3Id").val(""),jQuery("#pop3Port").attr("disabled",!0),jQuery("#pop3Port").val(""),jQuery("#pop3Host").attr("disabled",!0),jQuery("#pop3Host").val(""),jQuery("#sslCheck").attr("disabled",!0),jQuery("#sslCheck").attr("checked",!1),jQuery("#pop3Pw").attr("disabled",!0),jQuery("#pop3Pw").val(""))}else t=="ssl-check"&&changeSslSelect()}),jQuery("#mail_ext_setting_modal div.content").on("click","input",function(e){var t=jQuery(this).attr("evt-rol");if(!t)return;t=="create-new-folder"&&checkBox()})},closeCallback:function(){jQuery("#mail_filter_modal_popup div.content").off()},buttons:[{btype:"confirm",btext:mailMsg.comn_confirm,autoclose:!1,callback:saveExtMailManager},{btype:"cancel",btext:mailMsg.comn_cancel}]})},this.modifyExtMailManager=function(t){ActionLoader.getGoLoadAction(this.extMailAction,t,e.extMailManager,"json")}},viewTime=null,signSmartEditorControl;