/*
 * SWFUpload jQuery Plugin v1.0.0
 *
 * Copyright (c) 2009 Adam Royle
 * Licensed under the MIT license.
 *
 */

(function(e){var t=["swfupload_loaded_handler","file_queued_handler","file_queue_error_handler","file_dialog_start_handler","file_dialog_complete_handler","upload_start_handler","upload_progress_handler","upload_error_handler","upload_success_handler","upload_complete_handler","queue_complete_handler"],n=[];e.fn.swfupload=function(){var r=e.makeArray(arguments);return this.each(function(){var i;if(r.length==1&&typeof r[0]=="object"){i=e(this).data("__swfu");if(!i){var s=r[0],o=e(this),u=[];e.merge(u,t),e.merge(u,n),e.each(u,function(t,n){var r=n.replace(/_handler$/,"").replace(/_([a-z])/g,function(){return arguments[1].toUpperCase()});s[n]=function(){var t=e.Event(r);return o.trigger(t,e.makeArray(arguments)),!t.isDefaultPrevented()}}),e(this).data("__swfu",new SWFUpload(s))}}else if(r.length>0&&typeof r[0]=="string"){var a=r.shift();i=e(this).data("__swfu"),i&&i[a]&&i[a].apply(i,r)}})},e.swfupload={additionalHandlers:function(){if(arguments.length===0)return n.slice();e(arguments).each(function(t,r){e.merge(n,e.makeArray(r))})},defaultHandlers:function(){return t.slice()},getInstance:function(t){return e(t).data("__swfu")}}})(jQuery),jQuery.fn.bindAll=function(e){var t=this;return jQuery.each(e,function(e,n){t.bind(e,n)}),this},jQuery.fn.unbindAll=function(e){var t=this;return jQuery.each(e,function(e,n){t.unbind(e,n)}),this};var SimpleBasicControl=function(e){this.opt=e,this.init=function(){var e=this.opt},this.makeBtnControl=function(){var e=this.opt,t="font-family:\ub3cb\uc6c0,dotum,AppleGothic,arial,Helvetica,sans-serif";this.opt.locale=="jp"&&(t="font-family:MS PGothic,Osaka,arial,sans-serif !important"),jQuery("#swfupload-control").swfupload({file_post_name:"NewFile",upload_url:"/api/mail/image/upload",file_size_limit:"10240",file_types:"*.jpg;*.gif;*.png;*.bmp",file_types_description:"",file_upload_limit:"0",flash_url:BASEURL+"resources/js/plugins/mail/swfupload/swfupload.swf",post_params:{maxImageSize:"1024000",uploadType:"flash"},button_cursor:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_text:"<span class='buttonText'>"+mailMsg.common_upload_picture+"</span>",button_text_style:".buttonText {color:#ffffff;font-size:12px;font-weight:bold;font-family:"+t+"}",button_width:100,button_height:20,button_text_top_padding:1,button_text_left_padding:this.opt.locale=="ko"?15:5,button_placeholder:jQuery("#button")[0],debug:!1}).bind("swfuploadLoaded",function(e){}).bind("fileQueued",function(e,t){jQuery(this).swfupload("startUpload")}).bind("fileQueueError",function(e,t,n,r){}).bind("fileDialogStart",function(e){}).bind("fileDialogComplete",function(e,t,n){}).bind("uploadStart",function(e,t){var n=new RegExp("(.jpg|.gif|.png|.bmp)","gi"),r=t.type.toLowerCase();n.test(r)||(jQuery.goMessage(mailMsg.conf_sign_8),jQuery(this).swfupload("cancelUpload"))}).bind("uploadProgress",function(e,t,n){}).bind("uploadSuccess",function(e,t,n){var r=jQuery.parseJSON(n);r.errorMessage==""?(jQuery("#thumbnail_image").attr("src",r.fileURL).attr("img-data",r.filePath).attr("img-name",r.fileName),jQuery("#vcard_img_delete").show()):jQuery.goSlideMessage(r.errorMessage,"caution")}).bind("uploadComplete",function(e,t){}).bind("uploadError",function(e,t,n,r){})},this.destroy=function(){try{jQuery("#swfupload-control").swfupload("destroy")}catch(e){}}},SignSettingControl=function(e){this.opt=e,this.init=function(){var e=this.opt},this.makeBtnControl=function(){var e=this.opt,t="font-family:\ub3cb\uc6c0,dotum,AppleGothic,arial,Helvetica,sans-serif";this.opt.locale=="jp"&&(t="font-family:MS PGothic,Osaka,arial,sans-serif !important"),jQuery("#swfupload-control").swfupload({file_post_name:"NewFile",upload_url:"/api/mail/image/upload",file_size_limit:"10240",file_types:"*.jpg;*.gif;*.png;*.bmp",file_types_description:"",file_upload_limit:"0",flash_url:BASEURL+"resources/js/plugins/mail/swfupload/swfupload.swf",post_params:{maxImageSize:"1024000",uploadType:"flash"},button_cursor:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_text:"<span class='buttonText'>"+mailMsg.comn_file_select+"</span>",button_text_style:".buttonText {color:#656565;font-size:12px;font-weight:bold;font-family:"+t+"}",button_width:this.opt.locale=="jp"?90:73,button_height:26,button_text_top_padding:4,button_text_left_padding:7,button_placeholder:jQuery("#button")[0],debug:!1}).bind("swfuploadLoaded",function(e){}).bind("fileQueued",function(e,t){jQuery(this).swfupload("startUpload")}).bind("fileQueueError",function(e,t,n,r){}).bind("fileDialogStart",function(e){}).bind("fileDialogComplete",function(e,t,n){}).bind("uploadStart",function(e,t){var n=new RegExp("(.jpg|.gif|.png|.bmp)","gi"),r=t.type.toLowerCase();n.test(r)||(jQuery.goMessage(mailMsg.conf_sign_8),jQuery(this).swfupload("cancelUpload"))}).bind("uploadProgress",function(e,t,n){}).bind("uploadSuccess",function(e,t,n){var r=jQuery.parseJSON(n);r.errorMessage==""?(jQuery("#thumbnail_image").attr("src",r.fileURL).attr("img-data",r.filePath).attr("img-name",r.fileName),jQuery("#sign_img_delete").show()):jQuery.goSlideMessage(r.errorMessage,"caution")}).bind("uploadComplete",function(e,t){}).bind("uploadError",function(e,t,n,r){}).css("width",this.opt.locale=="jp"?90:73)},this.destroy=function(){try{jQuery("#swfupload-control").swfupload("destroy")}catch(e){}}},SimpleBasicCSVControl=function(e){this.opt=e,this.defaultImgPath="",this.init=function(){var e=this.opt;this.btnId="#"+e.btnId,this.queueFileList=new HashMap,this.uploadCompleteFile=[]},this.makeBtnControl=function(){var e=this.opt,t="font-family:\ub3cb\uc6c0,dotum,AppleGothic,arial,Helvetica,sans-serif";this.opt.locale=="jp"&&(t="font-family:MS PGothic,Osaka,arial,sans-serif !important"),jQuery(this.btnId).swfupload({file_post_name:e.formName,post_params:e.param,upload_url:e.url,file_size_limit:e.maxFileSize+"",file_types:e.fileType,file_types_description:"",file_upload_limit:"0",flash_url:BASEURL+"resources/js/plugins/mail/swfupload/swfupload.swf",button_cursor:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_text:"<span class='buttonText'>"+mailMsg.comn_file_select+"</span>",button_text_style:".buttonText {color:#656565;font-size:12px;font-weight:bold;font-family:"+t+"}",button_width:73,button_height:26,button_text_top_padding:4,button_text_left_padding:7,debug:e.debug,button_placeholder:jQuery("#button")[0]}),jQuery(this.btnId).bindAll(e.handler)},this.startUpload=function(){jQuery(this.btnId).swfupload("startUpload")},this.addPostParam=function(e,t){jQuery(this.btnId).swfupload("addPostParam",e,t)},this.destroy=function(){try{jQuery(this.btnId).swfupload("destroy")}catch(e){}}},UploadBasicControl=function(e){this.opt=e,this.defaultImgPath="",this.init=function(){var e=this.opt;this.btnId="#"+e.btnId,this.listId="#"+this.opt.listId,this.controlType=e.controlType,this.quota={hugeMax:0,normalMax:0,hugeUse:0,normalUse:0},this.normalFileList=new HashMap,this.hugeFileList=new HashMap,this.queueFileList=new HashMap,this.uploadCompleteFile=[],this.hugeMode=e.controlType=="power"?!0:!1,this.defaultImgPath="/resources/images/upload.gif"},this.makeBtnControl=function(){var e=this.opt;isMsie?e.buttonTextTopPadding=4:e.buttonTextTopPadding=4;var t="font-family:\ub3cb\uc6c0,dotum,AppleGothic,arial,Helvetica,sans-serif";this.opt.locale=="jp"&&(t="font-family:MS PGothic,Osaka,arial,sans-serif !important"),jQuery(this.btnId).swfupload({file_post_name:e.formName,post_params:e.param,upload_url:e.url,file_size_limit:e.maxFileSize+"",file_types:e.fileType,file_types_description:"",file_upload_limit:"0",flash_url:BASEURL+"resources/js/plugins/mail/swfupload/swfupload.swf",button_text:"<span class='buttonText'>"+e.btnText+"</span>",button_text_style:".buttonText {color:#656565;font-size:12px;font-weight:bold;"+t+"}",button_width:this.opt.width?this.opt.width:73,button_height:26,button_text_top_padding:this.opt.buttonTextTopPadding,button_text_left_padding:7,button_placeholder_id:e.btnCid,button_cursor:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,debug:e.debug,button_action:e.singleSelect?SWFUpload.BUTTON_ACTION.SELECT_FILE:SWFUpload.BUTTON_ACTION.SELECT_FILES}).css("width",this.opt.width?this.opt.width:73),jQuery(this.btnId).bindAll(e.handler)},this.btnControldestory=function(){jQuery(this.btnId).swfupload("destroy")},this.getControlFile=function(e){return jQuery(this.btnId).swfupload("getFile",e)},this.startUpload=function(){jQuery(this.btnId).swfupload("startUpload")},this.stopUpload=function(){jQuery(this.btnId).swfupload("stopUpload"),this.uploadCompleteFile=[]},this.cancelUpload=function(){if(this.queueFileList){var e=this.queueFileList.getKeys();for(var t=0;t<e.length;t++){var n=this.getControlFile(e[t]);n&&(jQuery(this.btnId).swfupload("cancelUpload",e[t]),this.queueFileList.remove(e[t]))}}},this.resetUpload=function(){this.stopUpload(),this.cancelUpload(),this.init(),this.makeListControl()},this.makeListControl=function(){var e=jQuery('<table id="basicAttachTitle" class="in_table form_mail004">'),t=jQuery("<thead></thead>"),n=jQuery("<tr></tr>");n.append('<th class="checkbox"><input type="checkbox" id="basicAttachChkAll" onclick="checkAll(this,document.uploadForm.basicAttachFileEl)"/></th>'),n.append('<th class="align_l filename">'+mailMsg.bigattach_list_001+"</th>"),n.append('<th class="align_r filesize">'+mailMsg.bigattach_list_002+"</th>"),this.controlType=="power"&&n.append('<th class="align_c attachtype">'+mailMsg.mail_attach_type+"</th>"),n.append('<th class="align_c remove">'+mailMsg.mail_attach_delete+"</th>"),t.append(n),e.append(t);var r=jQuery('<div id="basicAttachItemList" class="div_scroll" style="max-height: 125px">'),i=e.clone();i.attr("id","basicAttachList"),i.find("tr").remove(),r.append(i);var s=this.listId;setTimeout(function(){jQuery(s).empty(),jQuery(s).append(e),jQuery(s).append(r)},100)},this.makeListWebFolderControl=function(){var e=jQuery('<table class="form_type"></table>'),t=jQuery("<tr></tr>"),n=jQuery('<td style="padding:0"></td>'),r=jQuery('<table id="basicAttachTitle" class="in_table form_mail004"></table>'),i=jQuery("<thead></thead>"),s=jQuery("<tr></tr>");s.append('<th class="checkbox"><input type="checkbox" id="basicAttachChkAll" onclick="checkAll(this,document.uploadForm.basicAttachFileEl)"/></th>'),s.append('<th class="align_l filename">'+mailMsg.bigattach_list_001+"</th>"),s.append('<th class="align_r filesize">'+mailMsg.bigattach_list_002+"</th>"),s.append('<th class="align_c attachtype">'+mailMsg.comn_upload_status+"</th>"),s.append('<th class="align_c remove">'+mailMsg.mail_attach_delete+"</th>"),i.append(s),r.append(i),n.append(r),t.append(n),e.append(t);var o=jQuery('<div class="div_scroll" style="height:200px"><table id="basicAttachList" class="in_table form_mail004">'),u=this.listId;setTimeout(function(){jQuery(u).empty(),jQuery(u).append(e),jQuery(u).append(o)},100)},this.addAttachList=function(e){var t=e.type=="huge"?!0:!1,n='<tr id="'+e.id+'Low" >'+'<td class="checkbox"><input type="checkbox" id="'+e.id+'" name="basicAttachFileEl" value="" attsize="'+e.size+'" atttype="'+(t?"huge":"normal")+'"></td>'+'<td class="align_l filename" title="'+escape_tag(e.name)+'">'+'<span class="item_file file_wrap">'+'<span class="ic_file ic_'+getFileTypeImage(e.name)+'"></span>'+'<span class="name">'+escape_tag(e.name)+"</span>"+"</span>"+"</td>"+'<td class="align_r filesize"><span class="size">'+printSize(e.size)+"</span></td>";if(this.controlType=="power"||this.opt.webfolder)n+='<td id="'+e.id+'TypeInfo" class="attachtype">'+(t?mailMsg.bigattach_11:mailMsg.bigattach_10)+'<span id="progress_'+e.id+'" class="progressBar"></span></td>';n+='<td class="remove"><span class="btn_bdr" onclick="deletefileById(\''+e.id+'\')"><span title="'+mailMsg.comn_del+'" class="ic_classic ic_basket"></span></span></td>',n+="</tr>",t?this.hugeFileList.put(e.id,e):this.normalFileList.put(e.id,e),n=this.previewTempAttach(e,jQuery(n)),jQuery("#basicAttachList").append(n)},this.previewTempAttach=function(e,t){function s(e){e=e.toLowerCase();var t="doc|docx|hwp|ppt|pptx|xls|xlsx|pdf|txt",n=new RegExp("("+t+")$","i");return n.test(e)?!0:!1}var n=[];if(s(getFileTypeImage(e.name))){var r=['<span class="btn_fn4 " style="margin:0 0 0 2px !important;" onclick="previewTempFile(\''+e.id+"')\">",'<span class="txt" style="padding:0px;">'+mailMsg.mail_preview+"</span>","</span>"];jQuery.merge(n,r)}var i=['<span class="btn_fn4 " style="margin:0 0 0 2px !important;" onclick="downloadTempFile(\''+e.id+"')\">",'<span class="txt" style="padding:0px;">'+mailMsg.bigattach_09+"</span>","</span>"];return jQuery.merge(n,i),t.find("span.item_file").append(n.join("")),t},this.addAttachWebfolderList=function(e){var t=e.type=="huge"?!0:!1,n='<tr id="'+e.id+'Low" >'+'<td class="checkbox"><input type="checkbox" id="'+e.id+'" name="basicAttachFileEl" value="" attsize="'+e.size+'" atttype="'+(t?"huge":"normal")+'"></td>'+'<td class="align_l filename" title="'+escape_tag(e.name)+'">'+'<span class="item_file file_wrap">'+'<span class="ic_file ic_'+getFileTypeImage(e.name)+'"></span>'+'<span class="name">'+escape_tag(e.name)+"</span>"+"</span>"+"</td>"+'<td class="align_r filesize"><span class="size">'+printSize(e.size)+"</span></td>";n+='<td id="'+e.id+'TypeInfo" class="align_c attachtype"><span id="progress_'+e.id+'" class="progressBar">['+mailMsg.comn_upload_ready+"]</span></td>",n+='<td class="align_c remove"><span class="btn_bdr" onclick="deletefileById(\''+e.id+'\')"><span title="'+mailMsg.comn_del+'" class="ic_classic ic_basket"></span></span></td>',n+="</tr>",t?this.hugeFileList.put(e.id,e):this.normalFileList.put(e.id,e),jQuery("#basicAttachList").append(n)},this.getCheckAttachFileIds=function(){var e=[];return jQuery("#basicAttachList input[name=basicAttachFileEl]:checked").each(function(){e.push(jQuery(this).attr("id"))}),e},this.deleteAttachList=function(e){var t=jQuery("#"+e).attr("atttype"),n=jQuery("#"+e).attr("attsize");t=="huge"?(this.quota.hugeUse-=n,this.hugeFileList.remove(e)):(this.quota.normalUse-=n,this.normalFileList.remove(e)),jQuery("#"+e+"Low").remove();var r=this.getControlFile(e);r&&(jQuery(this.btnId).swfupload("cancelUpload",e),this.queueFileList.remove(e))},this.setAttachSize=function(e,t){e=="hugeMax"?this.quota.hugeMax=t:e=="hugeUse"?this.quota.hugeUse=t:e=="normalMax"?this.quota.normalMax=t:e=="normalUse"&&(this.quota.normalUse=t)},this.getAttachSize=function(e){var t=0;return e=="hugeMax"?t=this.quota.hugeMax:e=="hugeUse"?t=this.quota.hugeUse:e=="normalMax"?t=this.quota.normalMax:e=="normalUse"&&(t=this.quota.normalUse),t},this.getAttachQuotaInfo=function(){return this.quota},this.getFileList=function(e){return e=="huge"?this.hugeFileList.getValues():this.normalFileList.getValues()},this.setFileList=function(e,t){var n=new HashMap;for(var r=0;r<t.length;r++)n.put(t[r].id,t[r]);e=="huge"?this.hugeFileList=n:this.normalFileList=n},this.getAttachFileInfo=function(e,t){return e=="huge"?this.hugeFileList.get(t):this.normalFileList.get(t)},this.setAttachFileInfo=function(e,t,n){e=="huge"?this.hugeFileList.put(t,n):this.normalFileList.put(t,n)},this.addUploadQueueFile=function(e){this.queueFileList.put(e.id,{id:e.id,name:e.name,size:e.size})},this.getUploadQueueFile=function(){return this.queueFileList.getValues()},this.getUploadQueueSize=function(){return this.queueFileList.size()},this.isNextUploadQueue=function(e){return this.queueFileList.remove(e),this.queueFileList.size()>0?!0:!1},this.setUploadCompleteFile=function(e,t){var n=this.hugeFileList.get(e);n?(n.uid=t.uid,n.path=t.filePath,n.hostId=t.hostId,this.hugeFileList.remove(e),this.hugeFileList.put(e,n)):(n=this.normalFileList.get(e),n&&(n.uid=t.uid,n.path=t.filePath,n.hostId=t.hostId,this.normalFileList.remove(e),this.normalFileList.put(e,n)))},this.setHugeUploadUse=function(e){this.hugeMode=e},this.getHugeUploadUse=function(){return this.hugeMode},this.isHugeTypeFile=function(e){var t=this.hugeFileList.get(e);return t?!0:!1},this.chageAttachType=function(e){var t=jQuery("#"+e).attr("atttype"),n;if(t=="huge")n=this.hugeFileList.get(e),this.normalFileList.put(e,n),this.hugeFileList.remove(e),jQuery("#"+e).attr("atttype","normal"),jQuery("#"+e+"TypeInfo").text(mailMsg.bigattach_10),jQuery("#"+e+"ChgLink").text(mailMsg.mail_attach_chg_bigattach),jQuery(this.btnId).swfupload("removeFileParam",e,"attachtype"),jQuery(this.btnId).swfupload("removeFileParam",e,"regdate");else{n=this.normalFileList.get(e),this.hugeFileList.put(e,n),this.normalFileList.remove(e);var r=new Date;jQuery("#"+e).attr("atttype","huge"),jQuery("#"+e+"TypeInfo").text(mailMsg.bigattach_11),jQuery("#"+e+"ChgLink").text(mailMsg.mail_attach_chg_normal),jQuery(this.btnId).swfupload("addFileParam",e,"attachtype","huge"),jQuery(this.btnId).swfupload("addFileParam",e,"regdate",r.getTime())}},this.destroy=function(){try{jQuery(this.btnId).swfupload("destroy")}catch(e){}this.listId&&jQuery(this.listId).empty(),this.quota={hugeMax:0,normalMax:0,hugeUse:0,normalUse:0},this.normalFileList&&this.normalFileList.destroy(),this.hugeFileList&&this.hugeFileList.destroy(),this.queueFileList&&this.queueFileList.destroy(),this.uploadCompleteFile=[]},this.emptyFileList=function(){jQuery(this.btnId).unbindAll(e.handler),this.listId&&jQuery(this.listId).empty(),this.cancelUpload()}},MailInlineImgControl=function(e){this.opt=e,this.init=function(){var e=this.opt},this.makeBtnControl=function(){var e=this.opt,t=this,n=0,r="font-family:\ub3cb\uc6c0,dotum,AppleGothic,arial,Helvetica,sans-serif";this.opt.locale=="jp"&&(r="font-family:MS PGothic,Osaka,arial,sans-serif !important"),jQuery("#swfupload-control").swfupload({file_post_name:"NewFile",post_params:e.param,upload_url:"/api/mail/image/upload",file_size_limit:"10240",file_types:"*.jpg;*.gif;*.png;*.bmp",file_types_description:"",file_upload_limit:"0",flash_url:BASEURL+"resources/js/plugins/mail/swfupload/swfupload.swf",button_cursor:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,button_text:"<span class='buttonText'>"+mailMsg.comn_file_select+"</span>",button_text_style:".buttonText {color:#656565;font-size:12px;font-weight:bold;"+r+"}",button_width:this.opt.locale=="jp"?90:73,button_height:26,button_text_top_padding:6,button_text_left_padding:7,button_placeholder:jQuery("#button")[0],debug:!1}).bind("swfuploadLoaded",function(e){}).bind("fileQueued",function(e,t){n++,jQuery(this).swfupload("startUpload")}).bind("fileQueueError",function(e,t,n,r){var i=new RegExp("(.jpg|.gif|.png|.bmp|.jpeg|.tif)","gi"),s=t.type.toLowerCase();if(!i.test(s)){jQuery.goSlideMessage(mailMsg.conf_sign_8,"caution");return}if(t.size>10240){jQuery.goSlideMessage(msgArgsReplace(mailMsg.conf_userinfo_msg_11,["10MB"]),"caution");return}}).bind("fileDialogStart",function(e){}).bind("fileDialogComplete",function(e,t,n){}).bind("uploadStart",function(e,t){var n=new RegExp("(.jpg|.gif|.png|.bmp|.jpeg|.tif)","gi"),r=t.type.toLowerCase();n.test(r)||(jQuery.goMessage(mailMsg.conf_sign_8),jQuery(this).swfupload("cancelUpload"))}).bind("uploadProgress",function(e,t,n){}).bind("uploadSuccess",function(e,t,n){var r=jQuery.parseJSON(n),i=r.errorMessage;if(i!=""){jQuery.goSlideMessage(r.errorMessage,"caution");return}var s='<img src="'+r.fileURL+'" title="'+r.fileName+'"/>';editorControl.addEditorText(s)}).bind("uploadComplete",function(e,r){n--,n==0?(jQuery("#swfupload-control").swfupload("destroy"),t.opt.popupContents.close()):jQuery(this).swfupload("startUpload")}).bind("uploadError",function(e,t,n,r){}).css("width",this.opt.locale=="jp"?90:73)},this.destroy=function(){try{jQuery("#swfupload-control").swfupload("destroy")}catch(e){}}};