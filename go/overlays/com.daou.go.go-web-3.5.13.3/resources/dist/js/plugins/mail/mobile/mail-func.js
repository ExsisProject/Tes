var goAgent_device=sessionStorage.getItem("GO-Agent-mail");goAgent_device!="GO-Android"&&goAgent_device!="GO-iPhone"?(window.previewAttach=function(e,t,n){var r={folderName:t,uid:e,part:n,type:"normal"};r=mailControl.getSharedFolderParam(r),ActionLoader.postGoLoadAction("/api/mail/message/attach/preview",r,function(e){removeProcessLoader(),e.convert?e.image?window.location.href=e.previewPath:window.location.href=BASEURL+"resources/synap/skin/doc.html?fn="+e.previewPath+"&rs=/api/preview/rs/"+e.previewPath:alert(mailMsg.mail_attach_convert_error1),isCallPreviewAttach=!1},"json",function(){alert(mailMsg.mail_attach_convert_error1),isCallPreviewAttach=!1})},window.previewAttachTemp=function(e,t,n){var r={filePath:e,fileName:t,hostId:n};ActionLoader.postGoLoadAction("/api/preview/tempFile",r,function(e){removeProcessLoader();var t=e.str.split("&")[0].split("fn=")[1];window.location.href=BASEURL+"resources/synap/skin/doc.html?fn="+t+"&rs=/api/preview/rs/"+t,isCallPreviewAttach=!1},"json",function(){alert(mailMsg.mail_attach_convert_error1),isCallPreviewAttach=!1})},window.previewAttachImage=function(e,t,n,r){previewAttach(e,t,n)},window.previewAction=function(e,t){var n=location.protocol+"//"+window.location.host;makeProcessLoader(),ActionLoader.postGoLoadAction(e,t,function(e){removeProcessLoader(),e.convert?e.image?window.location.href=e.previewPath:window.location.href=BASEURL+"resources/synap/skin/doc.html?fn="+e.previewPath+"&rs=/api/preview/rs/"+e.previewPath:alert(mailMsg.mail_attach_convert_error1),isCallPreviewAttach=!1},"json",function(){alert(mailMsg.mail_attach_convert_error1),isCallPreviewAttach=!1})},window.attachTakePicuture=function(){},window.attachSelectAlbum=function(){},window.attachFile=function(){},window.attachFileSuccess=function(e){if(isImage(e.data.fileExt))e.data.formattedFileSize=getFileSizeWithUnit(e.data.fileSize,2),jQuery("#img_wrap").append(getHandlebarsTemplate("mail_attach_image_tmpl",e.data));else{var t={calFileSize:getFileSizeWithUnit(e.data.fileSize,2),fileIcon:getFileIconStyle(e.data.fileExt),fileExt:e.data.fileExt,useHtmlConverter:jQuery("#useHtmlConverter").val(),useMobilePreviewOption:jQuery("#useMobilePreviewOption").val()};jQuery("#file_wrap").append(getHandlebarsTemplate("mail_attach_file_tmpl",jQuery.extend({},e.data,t)))}},window.attachFileFail=function(e){alert(mailMsg.alert_attachFile)},window.isImage=function(e){var t=new RegExp("(jpg|jpeg|gif|png|bmp|tif)","gi");return t.test(e)?!0:!1},window.isMobileApp=function(){var e=sessionStorage.getItem("GO-Agent-mail");return e=="GO-Android"||e=="GO-iPhone"},window.checkOS=function(){var e=window.navigator.userAgent.toLowerCase();return e.indexOf("android")>-1?"android":e.indexOf("iphone")>-1?"iphone":e.indexOf("ipad")>-1?"ipad":-1},window.isMobile=function(){return this.checkOS()!=-1},window.isAndroidApp=function(){return this.isMobileApp()&&this.checkOS()=="android"},window.progressAction=function(e){},window.downLoadTnefAttach=function(e,t,n,r){var i={folderName:e,uid:t,part:n,type:"tnef",tnefKey:r};i=mailControl.getSharedFolderParam(i);var s=location.protocol+"//"+window.location.host;url="/api/mail/message/tnef/attach/download?"+jQuery.param(i),window.location=s+url},window.downloadAttach=function(e,t,n){var r=location.protocol+"//"+window.location.host;url="/api/mail/message/attach/download?"+jQuery.param(e),window.location=r+url},window.previewAttachImage=function(e,t,n,r){previewAttach(e,t,n)},window.androidHistoryBack=function(){hideMailFolderSide(),closeSearchMessageWrap(),closeAttachPhoto(),closeWebFolder()},window.executeExtUrl=function(e){window.open(e)},window.pageDone=function(){},window.changeStatusBarColor=function(e){return},window.gotoHistoryBack=function(){window.history.back()},window.dormantRelease=function(e){location.href=e},window.goUrl=function(e,t){console.log("mail-func web goUrl call!! url:"+e+", agent: "+t),e.indexOf("http")!=-1?window.location.href=e:GO.router.navigate(e,!0)},window.goToPcVersion=function(){return document.cookie="pcVersion=true;path=/",document.location.reload(),!1},window.callSessionTimeout=function(){window.location="/"},window.mailSendComplete=function(){},window.addReceiverSuccess=function(e){var t=JSON.parse(e);addSelectedMemberInReceiverList("to",t.receiver),addSelectedMemberInReceiverList("bcc",t.hiddenReference),addSelectedMemberInReceiverList("cc",t.reference),checkCcBccRcptArea()},window.addReceiverFail=function(){alert(mailMsg.addr_list_write_insert_fail)}):(window.previewAttach=function(e,t,n){var r=location.protocol+"//"+window.location.host,i={folderName:t,uid:e,part:n,type:"normal"};i=mailControl.getSharedFolderParam(i),makeProcessLoader(),ActionLoader.postGoLoadAction("/api/mail/message/attach/preview",i,function(e){removeProcessLoader();if(e.convert){var t=e.previewPath;e.image||(t=BASEURL+"resources/synap/skin/doc.html?fn="+e.previewPath+"&rs=/api/preview/rs/"+e.previewPath)}else alert(mailMsg.mail_attach_convert_error1);if(isAndroid())window.GOMobile.attachView(r+t);else if(isIphone()||isIpad())window.location.href="gomobile://attachView?"+r+t;isCallPreviewAttach=!1},"json",function(){alert(mailMsg.mail_attach_convert_error1),isCallPreviewAttach=!1})},window.previewAttachTemp=function(e,t,n){var r=location.protocol+"//"+window.location.host,i={filePath:e,fileName:t,hostId:n};makeProcessLoader(),ActionLoader.postGoLoadAction("/api/preview/tempFile",i,function(e){removeProcessLoader();var t=e.str.split("&")[0].split("fn=")[1],n=BASEURL+"resources/synap/skin/doc.html?fn="+t+"&rs=/api/preview/rs/"+t;if(isAndroid())window.GOMobile.attachView(r+n);else if(isIphone()||isIpad())window.location.href="gomobile://attachView?"+r+n;isCallPreviewAttach=!1},"json",function(){alert(mailMsg.mail_attach_convert_error1),isCallPreviewAttach=!1})},window.attachTakePicuture=function(){if(isAndroid())window.GOMobile.callCamera("attachFileSuccess","attachFileFail");else if(isIphone()||isIpad())window.location="gomobile://callCamera?attachFileSuccess&attachFileFail"},window.attachSelectAlbum=function(){if(isAndroid())window.GOMobile.callAlbum("attachFileSuccess","attachFileFail");else if(isIphone()||isIpad())window.location="gomobile://callAlbum?attachFileSuccess&attachFileFail"},window.mailSendComplete=function(){if(isAndroid())window.GOMobile.callMailSendComplete();else if(isIphone()||isIpad())window.location="gomobile://callMailSendComplete"},window.attachFile=function(e,t,n){try{var r=e==undefined?-1:e,i=t==undefined?-1:t,s=n==undefined?"":n;isAndroid()&&window.GOMobile.callFile("attachFileSuccess","attachFileFail",i,r,s)}catch(o){}},window.attachFileSuccess=function(e){var t;typeof e=="string"?t=JSON.parse(e):t=e.data;var n=MAILCONFIG.maxAttachSize,r=MAILCONFIG.maxAttachCount,i="",s=jQuery("#attach_wrap li").size(),o=r-s,u=t.fileSize/1024/1024;jQuery("#attach_wrap li").each(function(){u+=jQuery(this).attr("filesize")/1024/1024});if(n<u){alert(msgArgsReplace(mailMsg.mail_attach_limit_size,[n]));return}n-=u;if(r==0)o=-1;else if(o<1)return alert(msgArgsReplace(mailMsg.mail_attach_limit_count,[r])),!1;if(isImage(t.fileExt))t.formattedFileSize=getFileSizeWithUnit(t.fileSize,2),jQuery("#img_wrap").append(getHandlebarsTemplate("mail_attach_image_tmpl",t));else{var a={calFileSize:getFileSizeWithUnit(t.fileSize,2),fileIcon:getFileIconStyle(t.fileExt),useHtmlConverter:jQuery("#useHtmlConverter").val(),useMobilePreviewOption:jQuery("#useMobilePreviewOption").val()};jQuery("#file_wrap").append(getHandlebarsTemplate("mail_attach_file_tmpl",jQuery.extend({},t,a)))}},window.attachFileFail=function(e){alert(mailMsg.alert_attachFile)},window.progressAction=function(e){if(isAndroid())e.msg?window.GOMobile.callProgressBar(e.action,e.msg):window.GOMobile.callProgressBar(e.action);else if(isIphone()||isIpad())e.msg?window.location="gomobile://callProgressBar?"+e.action+"&"+e.msg:window.location="gomobile://callProgressBar?"+e.action},window.downloadAttach=function(e,t,n){var r=location.protocol+"//"+window.location.host;url="/api/mail/message/attach/download?"+jQuery.param(e);if(isAndroid())window.GOMobile.attachSave(r+url,t,n);else if(isIphone()||isIpad())window.location="gomobile://attachSave?"+r+url+"&fileName="+t},window.previewAttachImage=function(e,t,n,r){var i={folderName:t,uid:e,part:n,type:"normal"};i=mailControl.getSharedFolderParam(i),ActionLoader.postGoLoadAction("/api/mail/message/attach/preview",i,function(e){removeProcessLoader();if(e.convert){var t=[{url:e.previewPath,fileName:r}];if(isAndroid())window.GOMobile.attachImageView(JSON.stringify(t),0);else if(isIphone()||isIpad())window.location="gomobile://attachImageView?"+JSON.stringify(t)+"&0"}else alert(mailMsg.mail_attach_convert_error1)},"json",function(){alert(mailMsg.mail_attach_convert_error1)})},window.androidHistoryBack=function(){var e=jQuery("#go_content").css("left")=="0px",t=jQuery("#search_wrap").css("display")=="none",n=jQuery("#attachLayer").css("display")=="none",r=jQuery("#goSearch").css("display")=="none",i=jQuery("#webfolder_content").css("display")=="none";isAndroid()&&e&&t&&n&&r&&i?window.location.href.split("=")[1]==1?jQuery("#mail_write_table").length>0||jQuery("#mailViewContentWrap").length>0?window.GOMobile.pressBackKey():window.GOMobile.goHome():window.GOMobile.pressBackKey():(hideMailFolderSide(),closeSearchMessageWrap(),closeAttachPhoto(),jQuery("#mailWebFolderHomeToolbarWrap").css("display")=="none"?goParentWebFolder():closeWebFolder())},window.executeExtUrl=function(e){if(!e||jQuery.trim(e)=="")return;e=e.toLowerCase().indexOf("http")==0?e:"http://"+e;if(isAndroid())window.GOMobile.externalUrl(e);else if(isIphone()||isIpad()){var t=e.includes("downloadBigAttach.do");t?window.location="gomobile://attachSave?"+e:window.location="gomobile://externalUrl?"+e}},window.pageDone=function(){if(isAndroid())window.GOMobile.pageDone();else if(isIphone()||isIpad())window.location="gomobile://pageDone"},window.gotoHistoryBack=function(){if(isAndroid())window.GOMobile.pressBackKey();else if(isIphone()||isIpad())historyControl&&historyControl.historyIdx>1?window.history.back():window.location="gomobile://goHome"},window.dormantRelease=function(e){if(isAndroid())window.GOMobile.dormantRelease(),location.href=e;else if(isIphone()||isIpad())window.location="gomobile://dormantRelease?"+e},window.goUrl=function(e,t){jQuery.cookie("GO-Agent",t);if(t==="GO-iPhone"&&e.indexOf("mail?work=")>0){var n={};e.split("mail")[1].replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,r){n[t]=r}),n.work==="write"?goWrite():n.work==="read"&&n.folder?readMessage(n.folder,n.uid):window.location.href=e}else window.location.href=e},window.callSessionTimeout=function(){if(isAndroid())window.GOMobile.callSessionTimeout("redirection","401");else if(isIphone()||isIpad())window.location="gomobile://callSessionTimeout?redirection&401"},window.isMoveTab=function(){isAndroid()?window.GOMobile.moveTab():(isIphone()||isIpad())&&setTimeout(function(){window.location="gomobile://moveTab"},300)},window.changeStatusBarColor=function(e){if(isAndroid())try{window.GOMobile.changeStatusBarColor(e)}catch(t){console.log(t);return}else try{window.location="gomobile://changeStatusBarColor?"+e}catch(t){console.log(t);return}},window.isMoveTabReturn=function(){if(isAndroid())window.GOMobile.moveTabReturn();else if(isIphone()||isIpad())window.location="gomobile://moveTabReturn"},window.checkOS=function(){var e=window.navigator.userAgent.toLowerCase();return e.indexOf("android")>-1?"android":e.indexOf("iphone")>-1?"iphone":e.indexOf("ipad")>-1?"ipad":-1},window.isAndroidApp=function(){return this.checkOS()=="android"},window.addReceiverSuccess=function(e){var t=JSON.parse(e);addSelectedMemberInReceiverList("to",t.receiver),addSelectedMemberInReceiverList("bcc",t.hiddenReference),addSelectedMemberInReceiverList("cc",t.reference),checkCcBccRcptArea(),closeAddressContent()},window.addReceiverFail=function(){alert(mailMsg.addr_list_write_insert_fail),closeAddressContent()},window.changeSystemFontsize=function(e){"BIG"===e?(jQuery("#systemBigStyle").prop("disabled",!1),jQuery("#systemBiggerStyle").prop("disabled",!0)):"BIGGER"===e?(jQuery("#systemBigStyle").prop("disabled",!0),jQuery("#systemBiggerStyle").prop("disabled",!1)):(jQuery("#systemBigStyle").prop("disabled",!0),jQuery("#systemBiggerStyle").prop("disabled",!0))});