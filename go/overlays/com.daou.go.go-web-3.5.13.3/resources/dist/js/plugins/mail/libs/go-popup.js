(function($){var GP=$.goPopup=function(){return GP.render(arguments[0])};$.extend(GP,{version:"0.0.1",defaults:{pid:"gpopupLayer",targetEl:".go_body",width:400,modal:!0,btype:{normal:"btn_minor_s",caution:"btn_caution_s",confirm:"btn_major_s"},buttons:{ok:{btext:mailMsg.comn_confirm,btype:"confirm"},move:{btext:mailMsg.comn_move,btype:"confirm"},save:{btext:mailMsg.comn_btn_save,btype:"confirm"},close:{btext:mailMsg.comn_close,btype:"normal"},cancel:{btext:mailMsg.comn_cancel,btype:"normal"},del:{btext:mailMsg.comn_del,btype:"caution"},search:{btext:mailMsg.comn_search,btype:"confirm"}},tpl:{wrap:['<div class="go_popup {pclass}" id="{pid}" data-close="false" style="display:none" data-layer>','<header><h1>{header}</h1>{headerHtml}<a class="btn_layer_x" data-bypass><span class="ic"></span><span class="txt">'+mailMsg.comn_close+"</span></a></header>",'<div class="content">{pTitle}{message}{contents}</div>{buttonwrap}</div>'],wrapSearch:['<div class="go_popup detail_search_wrap{pclass}" style="display:" data-layer>','<div class="detail_search">',"<header><h1>{header}</h1>",'<a class="btn_layer_x" data-bypass><span class="ic"></span><span class="txt">'+mailMsg.comn_close+"</span></a>","</header>",'<span class="layer_tail_top"><i></i></span>','<div class="content">{contents}</div>',"{buttonwrap}","</div>","</div>"],pTitle:'<p class="q">{pTitle}</p>',message:'<p class="add">{message}</add>',buttonwrap:'<footer class="btn_layer_wrap"></footer>',button:'<a class="{bclass}" data-bypass style="margin-right:5px"><span class="ic"></span><span class="txt">{btext}</span></a>',overlay:'<div id="popOverlay" class="overlay" data-overlay></div>'}},error:function(e){GP.slideMessage(e,"caution");return},message:function(e){GP.slideMessage(e);return},slideMessage:function(e,t){if(window.opener||!window.top.$){$("#go_slideMessage").remove();var n;t=="caution"?n=['<div id="go_slideMessage" class="alert_wrap go_error" style="display:none"><ins class="ic_con ic_alert_caution"></ins><span class="txt">',e,'</span><span class="btn_wrap" alt="\ub808\uc774\uc5b4 \ub2eb\uae30"><span class="btn_del_light"></span></span>']:n=['<div id="go_slideMessage" class="alert_wrap" style="display:none"><ins class="ic_con ic_alert"></ins><span class="txt">',e,'</span><span class="btn_wrap" alt="\ub808\uc774\uc5b4 \ub2eb\uae30"><span class="btn_del_light"></span></span>'],$(n.join("")).appendTo("body"),$("#go_slideMessage").slideDown(200,function(){$("#go_slideMessage").delay(2e3).slideUp(200,function(){$("#go_slideMessage").remove()}),$(".btn_del_light").bind("click",function(){$("#go_slideMessage").remove()})})}else window.top.$.goSlideMessage(e,t);return},alert:function(e,t,n,r){return GP.render({title:e,message:t,modal:!0,buttons:[{btext:r||GP.defaults.buttons.close.btext,btype:"normal",callback:n}]})},confirm:function(e,t,n,r,i){return GP.render({title:e,message:t,modal:!0,buttons:[{btext:i||GP.defaults.buttons.ok.btext,btype:"confirm",callback:n},{btext:GP.defaults.buttons.cancel.btext,btype:"normal",callback:r}]})},caution:function(e,t,n,r,i){return GP.render({title:e,message:t,modal:!0,buttons:[{btext:i||GP.defaults.buttons.del.btext,btype:"caution",callback:n},{btext:GP.defaults.buttons.cancel.btext,bclass:GP.defaults.buttons.cancel.bclass,callback:r}]})},search:function(e){var t=" layer_normal",n=null;"pclass"in e&&(t=[t,e.pclass].join(" "),delete e.pclass),"callback"in e&&(n=e.callback,delete e.callback);var r=$.extend({width:460,wrapTpl:GP.defaults.tpl.wrapSearch,pclass:t,buttons:[{btype:GP.defaults.buttons.search.btype,btext:GP.defaults.buttons.search.btext,autoclose:!1,callback:n},GP.defaults.buttons.cancel]},e);return GP.render(r)},template:function(e,t){return e.replace(/{(\w*)}/g,function(e,n){return t.hasOwnProperty(n)?t[n]:""})},close:function(e){typeof e=="function"&&e(),ocxUploadVisible(!0),$(document).unbind(".gopop"),$(".go_popup").remove(),getLayerLength()==0&&($("#popOverlay").remove(),!window.opener&&window.top.$&&(window.top.$(".overlay").remove(),window.top.$("div.gnb").removeClass("adv_overlay"))),GP.toggleTrigger&&$(document).trigger("hideLayer.goLayer")},renderPopup:function(options){var popupEl=null,wrapTpl=options.wrapTpl||GP.defaults.tpl.wrap;pid=options.id||GP.defaults.pid,targetEl=options.targetEl||GP.defaults.targetEl,header=options.header||"",headerHtml=options.headerHtml||"",pclass=options.pclass?options.pclass:header?"layer_normal":"layer_confim",width=options.width||GP.defaults.width,pTitle=options.title||"",message=options.message||"",contents=options.contents||"",buttons=options.buttons||"",buttonwrap=buttons?GP.defaults.tpl.buttonwrap:"",openCallback=options.openCallback||"",closeCallback=options.closeCallback||"",addCss=width<0?{}:{width:width},modal=options.hasOwnProperty("modal")?options.modal:GP.defaults.modal,isDrag=options.hasOwnProperty("modal")?options.isDrag:!1,isLock=options.isLock,appendTarget=options.appendTarget||"body",handle=options.handle||"",GP.toggleTrigger=options.toggleTrigger!=0?!0:!1;var deferred=$.Deferred(),isClose=options.isClose||!1;isClose||GP.close();if(modal&&$("div[data-overlay]").length==0){$(appendTarget).append(GP.defaults.tpl.overlay);if(!window.opener&&window.top.$){var height=window.top.$("header.go_header").outerHeight(),width=window.top.$("header.go_header").outerWidth();window.top.$("body").append("<div class='overlay' data-overlay style='height: "+height+"px;width: "+width+"px '></div>"),window.top.$("div.gnb").addClass("adv_overlay")}}popupEl=$(GP.template(wrapTpl.join(""),{pid:pid,header:header,pTitle:pTitle?GP.template(GP.defaults.tpl.pTitle,{pTitle:pTitle}):"",pclass:pclass,headerHtml:headerHtml,width:width,message:message?GP.template(GP.defaults.tpl.message,{message:message}):"",contents:contents,buttonwrap:buttonwrap})).appendTo(appendTarget),ocxUploadVisible(!1),popupEl.css("z-index","70");var popupDragged=!1;isLock||popupEl.draggable({containment:"parent",handle:handle?handle:isDrag?"go_popup":"header, footer",cursor:"move",delay:200,stop:function(e,t){popupDragged=!0}}),openCallback&&openCallback(popupEl);if(buttons){var buttonWrap=popupEl.find(".btn_layer_wrap");$(buttons).each(function(k,v){buttonWrap.append($(GP.template(GP.defaults.tpl.button,$.extend(v,{bclass:eval("GP.defaults.btype."+v.btype)||GP.defaults.btype.normal}))).bind("click.gopop",function(e){e.stopPropagation();if(popupDragged)return popupDragged=!1,!1;v.autoclose=v.hasOwnProperty("autoclose")?v.autoclose:!0,typeof v.callback=="function"&&v.callback(popupEl),v.autoclose&&GP.close(closeCallback)}))})}return popupEl.reoffset=function(){options.offset?$.extend(addCss,options.offset,{position:"absolute",margin:0}):$.extend(addCss,{position:"fixed",left:"50%",top:"50%",marginTop:(popupEl.height()/2+13)*-1+"px",marginLeft:popupEl.width()/2*-1+"px"}),popupEl.css(addCss).show()},popupEl.close=GP.close,popupEl.reoffset(),popupEl.find(".btn_layer_x").bind("click.gopop",function(){GP.close(closeCallback)}),jQuery(window).trigger("resize").trigger("resize"),deferred.resolveWith(this,[popupEl]),deferred},render:function(e){var t=null;return GP.renderPopup(e).done(function(n){t=n;var r=n.find(".click.gopop");$(r).bind("click.gopop",function(e){if($(".go_popup").length&&$(".go_popup").attr("data-close")=="true"&&!$(e.target).parents(".go_popup").length&&$(e.target).attr("id")!="fileReader"){if($("#popOverlay").length||$(e.target).hasClass("paginate_button"))return!1;if($(".ui-datepicker").length>0&&$(".ui-datepicker").is(":visible"))return!1;GP.close(closeCallback)}$(".go_popup").attr("data-close",!0)}),e.toggleTrigger!=0&&$(document).trigger("showLayer.goLayer")}),t},_error:function(){}}),$.goAlert=GP.alert,$.goConfirm=GP.confirm,$.goCaution=GP.caution,$.goMessage=GP.message,$.goError=GP.error,$.goSearch=GP.search,$.goSlideMessage=GP.slideMessage})(jQuery);