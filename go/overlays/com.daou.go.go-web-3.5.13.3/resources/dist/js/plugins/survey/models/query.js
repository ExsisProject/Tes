(function(){define(["backbone","app"],function(e,t){var n=e.Model.extend({initialize:function(){this.on("all",this._reorderQueryCase,this)},urlRoot:function(){return["/api/survey",this.get("surveyId"),"query"].join("/")},reorder:function(e,n){var r=t.config("contextRoot")+_.result(this,"url")+"/order",i=_.extend(n||{},{url:r.replace("//","/")});this.save({seq:+e},i)},getQueryNum:function(){return this.get("seq")+1},getCases:function(){return this.get("cases")||[]},getMaxOfSelectable:function(){return this.get("maxOfSelectable")||0},getResponseCount:function(){return this.get("responseCount")||0},isRequired:function(){return this.get("required")||!1},isSelectType:function(){return this.get("type")==="select"},isMultiSelectType:function(){return this.get("type")==="mselect"},isTextType:function(){return this.get("type")==="text"},isTextareaType:function(){return this.get("type")==="textarea"},isScoreType:function(){return this.get("type")==="score"},getGroupedType:function(){return{select:"select",mselect:"select",text:"text",textarea:"text",score:"score"}[this.get("type")]},isGroupOfSelect:function(){return this.getGroupedType()==="select"},isGroupOfText:function(){return this.getGroupedType()==="text"},isAnswered:function(){return this.get("answered")||!1},copy:function(){return new n(_.omit(this.toJSON(),"id"))},_reorderQueryCase:function(){if(!this.isGroupOfText()){var e=this.getCases(),t;t=_.sortBy(e,function(e){return+e.seq}),this.set("cases",t,{silent:!0})}}});return n})})();