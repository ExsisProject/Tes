(function(){define(["jquery","amplify","app","views/layouts/default","views/content_top","components/backdrop/backdrop","hgn!survey/templates/side","i18n!nls/commons","i18n!survey/nls/survey"],function(e,t,n,r,i,s,o,u,a){var f={name:n.session("id")+"-survey-lastcate",type:"session"},l={name:n.session("loginId")+"-survey-folder-toggle",type:"local"},c=i.extend({initialize:function(e){i.prototype.initialize.call(this,e),_.extend(this.options,e||{}),i.prototype.initialize.apply(this,arguments),this.options.use_search=!1}}),h=r.extend({events:{"click section#surveySide .side-category":"_toggleSideMenu","click section#surveySide span.ic_side":"_toggleFolder","click section#surveySide span.txt":"_toggleFolder","click h1 #titleDescBtn":"toggleTitleDesc"},initialize:function(){var e=Array.prototype.slice.call(arguments);r.prototype.initialize.apply(this,e),this.contentTopView=new c},render:function(){var t=this,n=e.Deferred();return this.appName="survey",r.prototype.render.apply(this).done(function(){t.renderSide(),t.renderContentTop(),t.getContentElement().addClass("go_renew go_alarm"),n.resolveWith(t,[t])}),n},renderSide:function(){var e=this.getStoredValue(l);this.clearSide(),this.getSideElement().append(o({context_root:n.config("contextRoot"),label:{survey:a["\uc124\ubb38"],create_survey:a["\uc124\ubb38 \uc791\uc131"],progressing:a["\uc9c4\ud589\uc911\uc778 \uc124\ubb38"],finished:a["\uc644\ub8cc\ub41c \uc124\ubb38"],created_by_me:a["\ub0b4\uac00 \ub9cc\ub4e0 \uc124\ubb38"],bring_survey:a["\uc124\ubb38 \uac00\uc838\uc624\uae30"],collapse:u["\uc811\uae30"],expand:u["\ud3bc\uce58\uae30"]},isMultiCompanyUser:n.session("integratedCompanies").length>1,isSurveyOpen:_.isUndefined(e)?!0:e,appName:n.util.getAppName("survey")}))},renderContentTop:function(){this.getContentElement().append(this.contentTopView.el),this.contentTopView.render()},setTitle:function(e){if(this.contentTopView===null)throw new Error("contentTopView \uac1d\uccb4\uac00 \ud544\uc694\ud569\ub2c8\ub2e4.");return this.contentTopView.setTitle(e),this},setTitleDescription:function(e){if(e==="copyable"){var t='<span class="btn_wrap"><span id="titleDescBtn" class="ic ic_info"><span class="layer_tail tooltip-desc" el-backdrop style="display:none;"><div>'+a["\uc124\ubb38 \uac00\uc838\uc624\uae30 \uc124\uba85"]+"</div></span></span></span>";this.contentTopView.$el.find("h1").append(t)}},toggleTitleDesc:function(){if(!this.backdropView){var t=this.contentTopView.$el.find("#titleDescBtn");this.backdropView=new s,this.backdropView.backdropToggleEl=e(t).find("span[el-backdrop]"),this.backdropView.linkBackdrop(t)}},selectSideMenu:function(t){_.isUndefined(this.getStoredValue(f))&&this.storeKeyValue(f,t),e("#side .side-category").each(function(n,r){var i=e(r).closest("p.title");e(r).data("category")===t?i.addClass("on"):i.removeClass("on")})},getStoredValue:function(e){return n.util.store.get(e.name)},storeKeyValue:function(e,t){n.util.store.set(e.name,t,{type:e.type})},_toggleSideMenu:function(t){var n=e(t.currentTarget).data("category");this.storeKeyValue(f,n)},_toggleFolder:function(t){var n=e(t.currentTarget),r=n.parents("h1"),i=r.find("span.ic_side");r.hasClass("folded")?(r.next("ul").slideDown(200),r.removeClass("folded"),i.attr("title",u["\uc811\uae30"])):(r.next("ul").slideUp(200),r.addClass("folded"),i.attr("title",u["\ud3bc\uce58\uae30"]));var s=!r.hasClass("folded");this.storeKeyValue(l,s)}},{__instance__:null});return h})})();