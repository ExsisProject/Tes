(function(){define(["underscore","survey/models/query","survey/views/query/response","i18n!nls/commons"],function(e,t,n,r){function s(e){var t=[];return t.push('<div class="reserach_preview">'),t.push(e),t.push("</div>"),t.push('<div class="action_wrap">'),t.push('<a class="btn_ic24 btn-edit-query" title='+r["\uc218\uc815"]+'><span class="ic_toolbar write"></span></a>'),t.push('<a class="btn_ic24 btn-copy-query" title='+r["\ubcf5\uc0ac"]+'><span class="ic_toolbar copy"></span></a>'),t.push('<a class="btn_ic24 btn-remove-query" title='+r["\uc0ad\uc81c"]+'><span class="ic_toolbar del"></span></a>'),t.push("</div>"),t.push('<span class="drag_area"></span>'),t.join("\n")}var i=n.extend({type:"preview",removeFlag:!1,events:{"click .btn-edit-query":"convertToForm","click .btn-copy-query":"copyQuery","click .btn-remove-query":"removeQuery"},initialize:function(){n.prototype.initialize.apply(this,arguments),this.template=s(this.template),this.$el.data("view",this),this.removeFlag=!1},updateSeq:function(e){this.model.set("seq",+e),this.$el.find(".question > .seq").text(e)},convertToForm:function(e){e.preventDefault(),this.$el.trigger("click:edit-start")},copyQuery:function(t){t.preventDefault();var n=this.model.copy();n.save(null,{success:e.bind(function(e){this.$el.trigger("copied",[e])},this)})},removeQuery:function(t){t.preventDefault(),this.model.destroy({success:e.bind(function(e){this.removeFlag=!0,this.$el.trigger("removed",[e]),this.remove()},this)})},isRemoved:function(){return this.removeFlag}});return i})})();