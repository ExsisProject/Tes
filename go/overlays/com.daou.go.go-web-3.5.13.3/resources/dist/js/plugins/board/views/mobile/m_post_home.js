(function(){define(["jquery","backbone","app","board/models/board_config","views/mobile/header_toolbar","board/views/mobile/m_post_detail","board/views/mobile/m_post_stream","board/views/mobile/m_post_bbs","i18n!board/nls/board","i18n!nls/commons","GO.util"],function(e,t,n,r,i,s,o,u,a,f){var l=null,c={post_write:a["\uae00\uc4f0\uae30"]},h=t.View.extend({el:"#content",initialize:function(e){this.options=e||{},this.headerToolbarView=i,this.boardId=this.options.boardId,this.postId=this.options.postId,this.model=r.get(this.boardId)},render:function(){return this.actions=this.model.get("actions"),this.masterOwner=this._getMasterOwner(),this.renderContents(),this.el},renderBoardTitle:function(){var e=this,t=this.model.toJSON(),r=this.model.isWritable()?{text:c.post_write,callback:function(){n.util.appLoading(!0);var t=e._isCommunity()?"community":"board";t+="/post/write/"+e.masterOwner.ownerId+"/"+e.boardId,n.router.navigate(t,{trigger:!0})}}:!1,i={isPrev:this.postId>0?!0:!1,isIscroll:this.postId>0?!1:!0,name:t.name,rightButton:r};this.postId||(i.refreshButton={callback:function(){e.renderList()}}),this.titleToolbarView.render(i)},_isCommunity:function(){return l.masterOwner&&l.masterOwner.ownerType=="Community"},_getMasterOwner:function(){var t=this,n=null;return e.each(this.model.get("owners"),function(e,t){t.ownerShip=="MASTER"&&(n=t)}),n},renderList:function(e){this.model.isStreamType()?o.render({boardId:this.boardId,writable:this.model.isWritable(),owner:this.masterOwner,isCommunity:e,boardModel:this.model.toJSON()}):u.render({writable:this.model.isWritable(),manageable:this.actions.managable,boardId:this.boardId,status:this.model.get("status"),owner:this.masterOwner,isCommunity:e,communityId:this.options.communityId,boardModel:this.model.toJSON()})},renderContents:function(){var e=this._isCommunity();this.postId?s.render({boardId:this.boardId,postId:this.postId,owner:this.masterOwner,isCommunity:e,boardType:this.model.get("type"),commentFlag:this.model.get("commentFlag"),actions:this.actions}):this.renderList(e)}});return{render:function(e){return l?(l.boardId=e.boardId,l.postId=e.postId,l.model.get("id")!=l.boardId&&(l.model=r.get(l.boardId))):l=new h({boardId:e.boardId,postId:e.postId}),l.render()}}})}).call(this);