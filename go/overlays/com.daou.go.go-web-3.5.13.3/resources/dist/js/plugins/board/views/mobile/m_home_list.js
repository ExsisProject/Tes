(function(){define(["views/mobile/m_more_list","jquery","backbone","hogan","app","i18n!board/nls/board","i18n!nls/commons","hgn!board/templates/mobile/m_home_list_unit","hgn!board/templates/mobile/m_board_list_item","board/collections/post_myhome","views/mobile/header_toolbar","jquery.go-validation","GO.util"],function(e,t,n,r,i,s,o,u,a,f,l){var c={board:o["\uac8c\uc2dc\ud310"],activity_posts:s["\ucd5c\uadfc\uae00"],post_write:s["\uae00\uc4f0\uae30"],detail_view:o["\uc790\uc138\ud788 \ubcf4\uae30"],more_view:s["\ub354 \ubcf4\uae30"],view_count:s["\uc870\ud68c"],total:s["\ucd1d"],count:s["\uac74"],not_list:s["\uc544\uc9c1 \ub4f1\ub85d\ub41c \uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. \uc544\ub798 \ubc84\ud2bc\uc744 \ud074\ub9ad\ud558\uc5ec, \uae00\uc744 \ub4f1\ub85d\ud574 \uc8fc\uc138\uc694."],new_post:s["\uc0c8 \uae00 \uc791\uc131\ud558\uae30"],new_board:s["\uac8c\uc2dc\ud310 \ucd94\uac00\ud558\uae30"],no_auth:s["\uc5f4\ub78c\uad8c\ud55c\uc774 \uc5c6\ub294 \uac8c\uc2dc\ubb3c\uc785\ub2c8\ub2e4."],post_null:s["\uc791\uc131\ub41c \uac8c\uc2dc\uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."],board_null_msg1:s["\ub4f1\ub85d\ub41c \uac8c\uc2dc\ud310\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."],board_null_msg2:s["\uc18c\uc18d\ub41c \ubd80\uc11c\uc5d0\uc11c \uac8c\uc2dc\ud310\uc744 \uc0dd\uc131\ud558\uace0 \uc5f4\ub78c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."],move_to_home:o["\ud648\uc73c\ub85c \uc774\ub3d9"],plus:s["\uc88b\uc544\uc694"]},h=e.extend({unbindEvent:function(){this.$el.off("vclick","ul.home_list li>a"),this.$el.off("vclick",".board_link"),this.$el.off("vclick","#homeListNewPostBtn"),this.$el.off("vclick","#homeListNewBoardBtn")},bindEvent:function(){this.$el.on("vclick","ul.home_list li>a",t.proxy(this.viewDetailLi,this)),this.$el.on("vclick",".board_link",t.proxy(this.moveBoardLink,this)),this.$el.on("vclick","#homeListNewPostBtn",t.proxy(this.newPost,this)),this.$el.on("vclick","#homeListNewBoardBtn",t.proxy(this.newBoard,this))},initialize:function(){GO.util.appLoading(!0);var e=this;this.headerToolbarView=l,this.$listEl=null,this.toolBarData={title:c.activity_posts,isList:!0,isSideMenu:!0,isHome:!0,isSearch:!0,isWriteBtn:!0,writeBtnCallback:function(){e.newPost()}},this.collection=f.create();var n={listFunc:t.proxy(function(e){var t=this.makeTemplete({collection:e});this.$listEl.append(t)},this)};this.setRenderListFunc(n),this.setFetchInfo({"url-type":"all"},this.collection)},render:function(){GO.util.pageDone(),this.unbindEvent(),this.bindEvent(),this.$el.html(a({otherClass:"list_board home_list"})),this.$el.find(".paging").remove(),this.$listEl=this.$el.find("ul"),this.headerToolbarView.render(this.toolBarData),this.dataFetch().done(t.proxy(function(e){this.hasWritableBoard=e.extParameter?e.extParameter.hasWritableBoard:!0,this.hasBoard=e.extParameter?e.extParameter.hasBoard:!0,console.log(this.hasWritableBoard),this.hasWritableBoard||t("#commonWriteButton").hide(),this.renderListFunc.listFunc(e),this.scrollToEl()},this)),GO.util.appLoading(!1)},newPost:function(){GO.util.appLoading(!0),i.router.navigate("board/post/write",{trigger:!0,pushState:!0})},newBoard:function(){i.router.navigate("board/create",!0)},moveBoardLink:function(e){var n=t(e.currentTarget).parents("li").first(),r=n.attr("data-boardId");i.router.navigate("board/"+r,!0),e.stopPropagation()},viewDetailLi:function(e){e.stopPropagation(),this.setSessionInfo(e);var n=t(e.currentTarget);return this.moveBoardAction(n),!1},moveBoardAction:function(e){var t=e.attr("data-boardType"),n=e.attr("data-boardId"),r=e.attr("data-postId"),o=e.attr("data-hidden");return n?o=="true"?(alert(s["\uac8c\uc2dc\uae00 \uc5f4\ub78c\ubd88\uac00 \uba54\uc138\uc9c0"]),!1):(t=="CLASSIC"?i.router.navigate("board/"+n+"/post/"+r,!0):t=="STREAM"?i.router.navigate("board/"+n+"/post/"+r+"/stream",!0):i.router.navigate("board/"+n,!0),!1):!1},makeTemplete:function(e){var n=e.collection,r,i=function(){return parseInt(this.recommendCount)==0?"zero":""},s=function(e){return GO.util.snsDate(this.createdAt)},o=function(){var e=this.type;return e=="CLASSIC"?!0:!1},a=function(){return GO.util.br2nl(GO.util.escapeHtml(t.goValidation.charEllipsis(this.summary,40)))},f=function(){return GO.util.escapeHtml(this.title)},l=function(){return this.hiddenPost},h=function(){return this.summary==" $$#HIDDEN_POST#$$ "};return r=u({dataSet:n.toJSON(),isZero:i,titleParse:f,contentParse:a,dateParse:s,getPostDetailUrl:function(){var e="board/"+this.boardId;return this.type=="CLASSIC"?e+="/post/"+this.id:this.type=="STREAM"&&(e+="/post/"+this.id+"/stream"),e},hasBoard:this.hasBoard,hasWritableBoard:this.hasWritableBoard,isClassic:o,lang:c,isPostHidden:l,isTitleHidden:h}),r},renderList:function(){GO.util.appLoading(!0);var e={page:"0",offset:this.offset};this.collection.fetch({data:e,reset:!0})}},{__instance__:null,create:function(){return this.__instance__=new this.prototype.constructor({el:t("#content")}),this.__instance__},render:function(){var e=this.create(),t=arguments.length>0?Array.prototype.slice.call(arguments):[];return this.prototype.render.apply(e,t)}});return h})}).call(this);