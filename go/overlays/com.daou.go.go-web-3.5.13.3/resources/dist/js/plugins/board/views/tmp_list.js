(function(){define(["jquery","backbone","app","i18n!board/nls/board","i18n!nls/commons","hgn!board/templates/tmp_list","board/collections/clipboard"],function(e,t,n,r,i,s,o){var u={no_more:r["\uc784\uc2dc \uc800\uc7a5\ub41c \uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."],"delete":i["\uc0ad\uc81c"]},a=t.View.extend({el:".go_popup .content",manage:!1,initialize:function(){this.collection=new o;var e=this;this.collection.fetch({success:function(t){var n=function(e){return GO.util.snsDate(this.createdAt)},r=s({dataset:t.toJSON(),dateParse:n,lang:u});e.$el.html(r),e.$el.find("ul.list_line li:last-child").addClass("last")},error:function(e,t){console.log(t)}})},events:{"click span.subject":"clickSubject","click span.ic_del":"clickDelete"},render:function(){this.$el.css({overflow:"auto","overflow-x":"hidden","overflow-y":"auto"})},clickDelete:function(t){var n=GO.contextRoot+"api/clipboard/"+e(t.target).attr("data-tmpId");e.go(n,{},{qryType:"DELETE",contentType:"application/json",responseFn:function(n){e(t.target).parents("li").remove(),e("#tmpCnt").html(e(".go_popup li").length),parseInt(e(".go_popup li").length)==0&&e.goPopup.close()}})},clickSubject:function(t){e.goPopup.close(),e("#fileWrap").children("li").remove(),e("#imgWrap").children("li").remove();var n=GO.util.unescapeHtml(e(t.target).html()),r=e(t.target).attr("data-tmpContent"),i=e(t.target).attr("data-tmpid");e("#subject").val("").val(n),GO.Editor.getInstance("editor").setContent(r),e("div.editor a.btn_temp_list").attr("data-tmpid",i);var s=_.find(this.collection.models,function(e){return e.id==i}),o=s.get("attaches"),u="";_.each(o,function(t){var n=GO.util.getHumanizedFileSize(t.size);if(GO.util.isImage(t.extention))u='<li class="" data-clipboard="'+t.clipboard+'" data-tmpname="'+t.path+'" data-name="'+t.name+'" data-hostid="'+"unknown"+'" + data-id="'+t.id+'">'+'<span class="item_image">'+'<span class="thumb">'+'<img src="'+t.thumbSmall+'" alt="'+t.name+'" />'+"</span>"+'<span class="name">'+t.name+"</span>"+'<span class="size">('+n+")</span>"+"</span>"+'<span class="btn_wrap">'+'<span class="ic_classic ic_del"></span>'+"</span>"+"</li>",e("#imgWrap").append(u);else{var r="def";GO.util.fileExtentionCheck(t.extention)&&(r=t.extention),u='<li class="" data-clipboard="'+t.clipboard+'"  data-tmpname="'+t.path+'" data-name="'+t.name+'" data-hostid="'+"unknown"+'" data-id="'+t.id+'">'+'<span class="item_file">'+'<span class="ic_file ic_'+r+'"></span>'+'<span class="name">'+t.name+"</span>"+'<span class="size">('+n+")</span>"+'<span class="btn_bdr">'+'<span class="ic_classic ic_del"></span>'+"</span>"+"</span>"+"</li>",e("#fileWrap").append(u)}},this),e(".go_popup").remove()}});return{render:function(e){var t=new a;return t.render()}}})}).call(this);