(function(){define(["jquery","backbone","app","board/models/board_config","views/mobile/header_toolbar","board/views/mobile/m_post_info","board/collections/post_recommend","hgn!board/templates/mobile/m_post_recommends","hgn!board/templates/mobile/m_post_more_recommends","i18n!board/nls/board","i18n!nls/commons","GO.util"],function(e,t,n,r,i,s,o,u,a,f,l){var c={recommend:f["\uc88b\uc544\uc694"],recommend_null:f["\uc88b\uc544\uc694 \ubaa9\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."]},h=t.View.extend({unbindEvent:function(){this.$el.off("vclick",'a[data-btn="paging"]')},bindEvent:function(){this.$el.on("vclick",'a[data-btn="paging"]',e.proxy(this.goPaging,this))},initialize:function(e){this.options=e||{}},initPage:function(e){this.boardId=e.boardId,this.postId=e.postId,this.options={boardId:this.boardId,postId:this.postId}},render:function(){this.unbindEvent(),this.bindEvent(),this.initPage(arguments[0]),this.renderTitleToolbar(),this.recommendCollection=o.getCollection(this.options),this.dataset=this.recommendCollection.toJSON();var e=u({lang:c,recommendCount:this.dataset.length,dataset:this.dataset,dateformat:function(){return n.util.basicDate3(this.updatedAt)}});this.$el.html(e),this.renderPostInfo(),this.$listEl=this.$el.find("ul.list_normal");var t=n.util.mPaging(this.recommendCollection);this.$el.find(".paging").remove(),this.$listEl.after(t)},renderPostInfo:function(){var e=s.render(this.options),t=e.$el;this.$el.find("."+t.className).remove(),this.$el.find(".classic_detail").prepend(t)},renderTitleToolbar:function(){this.boardModel=r.get(this.boardId),this.boardName=this.boardModel.get("name"),i.render({isClose:!0})},goPaging:function(t){n.EventEmitter.trigger("common","layout:scrollToTop",this),t.stopPropagation();var r=e(t.currentTarget).attr("data-direction"),i=this.recommendCollection.page.page||0;r=="prev"&&i>0?i--:r=="next"&&i++,e(t.currentTarget).parents(".paging").remove(),this.$listEl.empty(),this.recommendCollection.fetch({async:!1,data:{page:i,offset:this.offset},reset:!0}),this.dataset=this.recommendCollection.toJSON();var s=a({dataset:this.dataset,dateformat:function(){return n.util.basicDate3(this.updatedAt)}});this.$listEl.html(s);var o=n.util.mPaging(this.recommendCollection);return this.$listEl.after(o),!1}},{__instance__:null,create:function(){return this.__instance__=new this.prototype.constructor({el:e("#content")}),this.__instance__},render:function(){var e=this.create(),t=arguments.length>0?Array.prototype.slice.call(arguments):[];return this.prototype.render.apply(e,t)}});return h})}).call(this);