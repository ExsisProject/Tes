define("board/components/board_tree/views/base_board_tree",function(require){var e=require("backbone"),t=require("hogan"),n=require("board/models/board_tree_node"),r=e.View.extend({tagName:"ul",template:"",initialize:function(e){var t=e||{};this.parentId=t.parentId,t.nodes instanceof n.Collection?this.boardTreeNodes=t.nodes:this.boardTreeNodes=new n.Collection(t.nodes||[])},render:function(){this.$el.addClass("board-tree-nodes"),_.each(this.boardTreeNodes.getNodes(this.parentId),function(e){var t=this.boardTreeNodes.get(e.id),n=e.id,r=this.createNodeElement(t);if(t.isFolderNode()&&this.boardTreeNodes.hasChildren(n)){var i=this.renderChildView(t);r.append(i.el),this.isClosedNode(t)&&this.foldNode(r)}this.$el.append(r)},this),GO.EventEmitter.trigger("common","layout:refreshSideScroll")},renderChildView:function(e){var t=new this.constructor({nodes:this.boardTreeNodes,parentId:e.getNodeId()});return t.render(),t},createNodeElement:function(e,t){return $(this._renderTemplate(this.getTemplateVars(e,t)))},getTemplateVars:function(e,t){return _.extend({isNew:e.isNew(),nodeId:e.getNodeId(),nodeType:e.getNodeType(),nodeValue:e.getNodeValue(),parentId:e.getParentId(),linkUrl:GO.config("root")+this.getLinkUrl(e),iconType:this.getIconType(e),isFolderNode:e.isFolderNode(),isBoardNode:e.isBoardNode(),isSeperatorNode:e.isSeperatorNode(),isCompanyShareNode:e.isCompanyShareNode(),shareCompanyName:e.getCompanyNameByCompanyShares(),isPrivateBoard:e.isPrivateBoard(),isSharedBoard:e.isSharedBoard(),isShared:e.isSharedBoard()||e.isCompanyShareNode(),hasBoardNewPost:e.hasBoardNewPost(),managable:e.isManagable(),hasChildren:this.boardTreeNodes.hasChildren(e.get("id")),isClosedNode:this.isClosedNode(e),boardId:e.getBoardId()},t||{})},getIconType:function(e){var t=e.get("nodeType"),n="";return e.isFolderNode()?n="folder":e.isBoardNode()?(n=e.getBoardModel().getIconType(),e.isSharedBoard()&&(n+="_share"),e.isAnonymBoard()&&(n+="_anonym")):e.isSeperatorNode()?n="delimiter":e.isCompanyShareNode()&&(n=e.getBoardModel().getIconType(),n+="_share"),n},getLinkUrl:function(e){var t="#";return e.isBoardNode()&&(t="board/"+e.getBoardId()),t},isClosedNode:function(e){return!1},foldNode:function(e){},unfoldNode:function(e){},getParentId:function(){return this.parentId||null},isRootNode:function(){return this.getParentId()===null},_renderTemplate:function(){var e=t.compile(_.result(this,"template"));return e.render.apply(e,arguments)}});return r});