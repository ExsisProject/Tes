(function(){define(["backbone","app","board/views/board_title","hgn!board/templates/close_company_board","i18n!board/nls/board","i18n!nls/commons","jquery.go-grid","GO.util"],function(e,t,n,r,i,s){function a(e,t,n){}var o={title:i["\uc911\uc9c0\ub41c \uac8c\uc2dc\ud310 \uad00\ub9ac"],name:s["\uac8c\uc2dc\ud310"],board_term:i["\uac8c\uc2dc \uae30\uac04"],empty_data:i["\uc911\uc9c0\ub41c \uac8c\uc2dc\ud310\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."],remove:s["\uc0ad\uc81c"],change_status_normal:s["\uc815\uc0c1 \uc0c1\ud0dc\ub85c \ubcc0\uacbd"],not_select_board:i["\uac8c\uc2dc\ud310\uc744 \uc120\ud0dd\ud574 \uc8fc\uc138\uc694."],delete_success:s["\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."],delete_confirm:i["\uac8c\uc2dc\ud310 \uc0ad\uc81c \ud655\uc778"],change_success:s["\ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."],dept_name:i["\ubd80\uc11c\uba85"],post_count:i["\uac8c\uc2dc\uae00 \uc218"],normal_confirm:i["\uc815\uc0c1\uc73c\ub85c \ubcc0\uacbd \uc54c\ub9bc"],company_board:i["\uc804\uc0ac\uac8c\uc2dc\ud310"]},u=e.View.extend({el:"#content",events:{},initialize:function(){},render:function(){return this.$el.html(r({lang:o})),n.render({el:".content_top",dataset:{name:o.title,masterOwner:{ownerInfo:o.company_board}}}),this.makeGrid(),this},makeGrid:function(){var e=this;this.closeDeptBoardList=$.goGrid({el:"#folders_table",method:"GET",destroy:!0,url:t.contextRoot+"api/company/closed/boards",emptyMessage:"<p class='data_null'> <span class='ic_data_type ic_no_data'></span><span class='txt'>"+o.empty_data+"</span>"+"</p>",params:{offset:20,page:0,property:"closedAt",direction:"desc"},columns:[{mData:null,sClass:"period",sbSortable:!1,fnRender:function(e){return t.util.customDate(e.aData.createdAt,"YYYY-MM-DD")+" ~ "+t.util.customDate(e.aData.closedAt,"YYYY-MM-DD")}},{mData:null,sbSortable:!1,sClass:"bbs_name",fnRender:function(e){return"<span data-id='"+e.aData.id+"'>"+e.aData.name+"</span>"}},{mData:null,sClass:"count",bSortable:!1,fnRender:function(e){return e.aData.postCount}}],fnDrawCallback:function(n,r,i){e.$el.find(".custom_header").append(e.$el.find("#controlButtons").show()),e.$el.find("#checkedAll").attr("checked",!1),e.$el.find(this.el+" tr>td.bbs_name").css("cursor","pointer").click(function(e){var n=$(e.currentTarget).find("span");t.router.navigate("board/"+n.attr("data-id"),{trigger:!0})})}}).tables},active:function(){var e=this,n=this.closeDeptBoardList.getCheckedIds();if(n.length==0){$.goMessage(o.not_select_board);return}$.goConfirm(o.change_status_normal,o.normal_confirm,function(){$.ajax({type:"PUT",async:!0,data:JSON.stringify({ids:n}),dataType:"json",contentType:"application/json",url:t.config("contextRoot")+"api/board/status/active"}).done(function(n){$.goMessage(o.change_success),t.EventEmitter.trigger("board","changed:deptBoard",!0),e.render()})})},remove:function(){var e=this.closeDeptBoardList.getCheckedIds(),n=this;if(e.length==0){$.goMessage(o.not_select_board);return}$.goConfirm(o.name+" "+o.remove,o.delete_confirm,function(){$.ajax({type:"DELETE",async:!0,data:JSON.stringify({ids:e}),dataType:"json",contentType:"application/json",url:t.config("contextRoot")+"api/board/status/deleted"}).done(function(e){$.goMessage(o.delete_success),t.EventEmitter.trigger("board","changed:deptBoard",!0),n.render()})})}});return u})})();