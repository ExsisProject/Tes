(function(){define(["app","views/layouts/default","views/layouts/popup_default","i18n!nls/commons","views/layouts/fullpage"],function(e,t,n,r,i){var s=function(){function u(e){var t=Array.prototype.slice.call(arguments,1);if(!s){var n=++o;setTimeout(function(){n==o&&!s&&(s++,e.apply(undefined,t),s--)},200)}}function a(e){var t=$(window).height(),n=t,r=$("header.go_header").outerHeight(),i="600px";$(".go_wrap").children().each(function(e,t){$(t).is(":not(.go_body)")&&(n-=$(t).outerHeight())}),n<r+600&&(i="auto"),$(".go_body").css({height:n,overflow:"hidden","min-height":i}),e.height(n-3);return}var r=function(){};r.prototype={renderer:function(e,n,r,i){require([n,r],function(n,r){t.render().done(function(t){r.render(e),n.render(i)})})},popupRenderer:function(e,t){require([e],function(e){n.render().done(function(n){e.render(t)})})},userProfile:function(){this.renderer("userProfile","views/user/user_profile","views/user/side_user")},userPassword:function(){this.popupRenderer("views/user/user_password")},userConfig:function(){this.renderer("userConfig","views/user/user_config","views/user/side_user")},userNoti:function(){require(["views/user/user_noti","views/user/side_user"],function(e,n){t.render().done(function(t){n.render("userNoti"),e.render(),this.$el.addClass("do_setting")})})},userDevice:function(){this.renderer("userDevice","views/user/user_device","views/user/side_user")},sitelink:function(){var t=e.router.getSearch("url");if(!t){e.router.navigate("/home",{trigger:!0,replace:!0});return}var n=$.ajax({type:"GET",url:e.contextRoot+"api/new-link-menu/url"});n.done(_.bind(this.goToSiteLink,this)).fail(function(t){console.log(t),e.util.error("404")})},goToSiteLink:function(t){var n=e.router.getSearch("url");this.validateSiteLinkUrl(t,n),i.render().done(function(){var e=$('<iframe id="site-viewer" width="100%" marginHeight="0" marginWidth="0" frameBorder="0"></iframe>').appendTo(".go_body");e.attr("src",decodeURIComponent(n)),a(e),$(window).resize(function(){u(a,e)})})},validateSiteLinkUrl:function(t,n){var r=[];_.each(t.data,function(e){r.push(e)}),_.contains(r,n)||e.util.error("404")},preview:function(e){require(["views/preview"],function(t){var n=new t({encrypt:e});$("body").append(n.render().$el)})},previewTempFile:function(e,t,n){require(["views/preview"],function(r){var i=new r({realname:e,folder:t,tempname:n});$("body").append(i.renderTemp().$el)})},note:function(){require(["note/views/note"],function(e){var t=e.init({attachInfos:[]});$("body").css("min-width","710px"),$("body").html(t.el),t.render()})},writeNote:function(e){require(["note/views/note_write"],function(t){var n=t.init({type:e,attachInfos:[]});$("body").css("min-width","710px"),$("body").html(n.el),n.fetch().done(function(){n.render(),console.log('note:{"function" : "complete", "param1" : "true"}')}).fail(function(){console.log('note:{"function" : "complete", "param1" : "false"}')})})},readNote:function(){require(["note/views/note_read"],function(e){var t=new e({attachInfos:[]});$("body").css("min-width","initial"),$("body").html(t.el),t.fetch().done(function(){t.render()})})}};var s=0,o=0;return r}();return new s})}).call(this);