define("collections/base_collection",function(){return Backbone.Collection.extend({initialize:function(){this.deferred=$.Deferred()},fetch:function(e){if(!this.isFetching){this.isFetching=!0,e=e||{};var t=e.success;e.success=$.proxy(function(e){this.deferred.resolve(e),t&&t(this,e)},this),this.promise=Backbone.Collection.prototype.fetch.call(this,e).done($.proxy(function(){this.isFetching=!1},this))}return this.promise},getData:function(){var e=$.Deferred();return this.deferred.state()==="pending"&&!this.isFetching?(console.log("case 1"),this.fetch().done($.proxy(function(){e.resolve(this)},this)),e):this.deferred.state()==="pending"&&this.isFetching?(console.log("case 2"),this.deferred):(console.log("case 3"),e.resolve(this))}})});