(function(){define(["jquery","underscore","backbone","app","hgn!templates/mobile/title_toolbar","i18n!nls/commons","GO.util"],function(t,n,r,i,s,o){var u=r.View.extend({el:"#titleToolbar",initialize:function(){this.$sideEl=t("#side"),this.$contentEl=t(".go_content")},unbindEvent:function(){this.$el.off("vclick.side","#btnSideMenu"),this.$el.off("vclick","#btnPrev"),this.$el.off("vclick","a[data-role]")},bindEvent:function(){this.isPrev?this.$el.on("vclick","#btnPrev",t.proxy(this.customButton,this)):this.$el.on("vclick.side","#btnSideMenu",t.proxy(this.showSideMenu,this)),this.$el.on("vclick","a[data-role]",t.proxy(this.customButton,this))},blurEl:function(e){return t(e.currentTarget).blur().trigger("focusout"),!1},render:function(){var e=arguments[0];return this.isIscroll=e.isIscroll!=0,this.isPrev=e.isPrev||!1,this.prevCallback=e.prevCallback||null,this.isLeftCancelBtn=e.isLeftCancelBtn||!1,this.leftButton=e.hasOwnProperty("leftButton")?e.leftButton:!0,this.btnCallBack=e.rightButton?e.rightButton.callback:null,this.btnCallBackOther=e.rightButtonOther?e.rightButtonOther.callback:null,this.backBtnCallBack=e.isLeftCancelBtn?e.isLeftCancelBtn.callback:null,this.refreshBtnCallBack=e.refreshButton?e.refreshButton.callback:null,e.isLeftCancelBtn&&(e.isLeftCancelBtn.text=e.rightButton?e.rightButton.text:null),e.rightButton&&typeof e.rightButton.callback=="function"?(e.rightButton.text=e.rightButton.text||null,e.rightButton.id=e.rightButton.id||"btnToolbarRight"):e.rightButton=!1,this.$el=this.$el.empty(),this.$el.html(s(t.extend(e,{cancel:o["\ucde8\uc18c"],name:arguments[0].name||" ",leftButton:this.leftButton}))),t("#titleToolbar").show(),this.$contentEl.find(this.el).length||this.$contentEl.prepend(this.el),this.unbindEvent(),this.bindEvent(),this.$sideEl.css("visibility","hidden"),this.el},setTitle:function(e){this.$el.find("h2").html(e)},scrollToTop:function(){return e.stopPropagation(),i.EventEmitter.trigger("common","layout:scrollToTop",this),!1},showSideMenu:function(e){return t(e.currentTarget).blur().trigger("focusout"),i.EventEmitter.trigger("common","layout:showSideMenu",this),e.stopPropagation(),!1},customButton:function(e){var n=t(e.currentTarget);return n.blur().trigger("focusout"),e.preventDefault(),e.stopPropagation(),n.attr("data-role")=="refresh"?typeof this.refreshBtnCallBack=="function"&&this.refreshBtnCallBack():n.attr("btn-type")=="btnprev"?typeof this.backBtnCallBack=="function"?this.backBtnCallBack():this.routePrev(e):n.attr("data-role")=="buttonOther"?this.btnCallBackOther&&typeof this.btnCallBackOther=="function"&&this.btnCallBackOther(e):typeof this.btnCallBack=="function"&&this.btnCallBack(e),!1},routePrev:function(e){t(e.currentTarget).blur(),e.stopPropagation();if(this.disagreeContentLoss())return;return t("#startDate").length&&(t("#startDate").datepicker("hide"),t("#endDate").datepicker("hide")),t("#birthdayDate").length&&(t("#birthdayDate").blur(),t("#birthdayDate").datepicker("hide")),t("#anniversaryDate").length&&(t("#anniversaryDate").blur(),t("#anniversaryDate").datepicker("hide")),typeof this.prevCallback=="function"?this.prevCallback():window.history.length==1?i.util.goHome():window.history.back(),!1},disagreeContentLoss:function(){return t("textarea:visible").val()&&!confirm(i.util.br2nl(o["\ub0b4\uc6a9 \uc791\uc131 \uc911 \uc774\ub3d9 \uacbd\uace0 \uba54\uc2dc\uc9c0"]))}},{__instance__:null,create:function(){return new this.prototype.constructor},render:function(){var e=this.create(),t=arguments.length>0?Array.prototype.slice.call(arguments):[];return this.prototype.render.apply(e,t)}});return u})}).call(this);