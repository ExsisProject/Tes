(function(){define(["app","views/layouts/default","hgn!templates/layouts/system_default","system/models/licenseModel","i18n!nls/commons","i18n!admin/nls/admin","GO.util"],function(e,t,n,r,i,s){var o=t.prototype,u=Array.prototype.slice,a,f={tpl:{overlay:'<div id="popOverlay" class="overlay"><div class="processing"></div></div>'}};return a=t.extend({initialize:function(){var t=u.call(arguments);o.initialize.apply(this,t),this.variables={},this.licenseModel=r.read();var n=!1;this.licenseModel.get("mobileServicePack")&&(n=!0),_.extend(this.variables,{contextRoot:e.config("contextRoot"),label_logo:this.getLogoName(),label_logout:i["\ub85c\uadf8\uc544\uc6c3"],label_guide:i["\ub3c4\uc6c0\ub9d0"],label_main:s["\uba54\uc778\ud648"],label_system:s["\uc2dc\uc2a4\ud15c \uad00\ub9ac"],label_site:s["\ub3c4\uba54\uc778/\uc0ac\uc774\ud2b8 \uad00\ub9ac"],label_security:s["\ubcf4\uc548 \uc124\uc815"],label_monitor:s["\ubaa8\ub2c8\ud130\ub9c1"],label_mobile:s["\ubaa8\ube4c\ub9ac\ud2f0"],label_etc:s["\uae30\ud0c0 \uc124\uc815"],label_admin:s["\uad00\ub9ac\uc790"],label_stat:s["\ud1b5\uacc4"],label_breadcrumb:s["\ubaa8\ube4c\ub9ac\ud2f0 > \ubaa8\ubc14\uc77c \uc571 \ubc84\uc804 \uad00\ub9ac"],model:e.session(),lastLoginedAt:e.util.basicDate(e.session().lastLoginedAt),hasMobilePack:n,logoImg:this.getLogoImg()})},events:{"click #btn_help":"viewHelp"},setTitle:function(e){return this.isMe()?this.$el.find("#layoutTitle").empty().html(e):this.variables.title=e,this},render:function(){var e=$.Deferred();return this.renderLayout(),e.resolveWith(this,[this]),this.trigger("rendered:layout",[this]),e},renderLayout:function(e){e=e||!1,this.clearContent();if(!e&&this.isMe())return;$(document).attr("title",this.getTitle()),this.setCurrentLayout(),this.$el.empty().append(n(this.variables)),this.setNavigator(),this.resizeSide(),this._initPageEvents()},showSettingsMenu:function(){return console.log("showSettingsMenu"),!1},setSessionInfo:function(){this.variables["profile?"]=this.profile.toJSON()},setNavigator:function(){this.$el.find("#mobilty").addClass("on")},getContentElement:function(){return this.$el.find("#layoutContent")},_initPageEvents:function(){e.EventEmitter.on("common","layout:setOverlay",this.setOverlay,this),e.EventEmitter.on("common","layout:clearOverlay",this.clearOverlay,this)},setOverlay:function(){this.clearOverlay(),this.$el.append(f.tpl.overlay)},clearOverlay:function(){this.$el.find("#popOverlay").fadeOut(1e3,function(){$(this).remove()})},clearContent:function(e){var t=this.getContentElement(),n=this.getPopupElement();t.empty(),n.remove()},getLogoName:function(){return e.util.getBrandName(true)=="TMS"?s["TMS Service Admin"]:s["DO Service Admin"]},getLogoImg:function(){return e.util.getBrandName(true)=="TMS"?"/resources/images/admin/logo_admin_system.png":"/resources/images/admin/logo_admin_system_do.png"},getTitle:function(){return e.util.getBrandName(true)=="TMS"?"TMS System Admin":"DO System Admin"},viewHelp:function(){var t=jQuery('meta[name="locale"]').attr("content"),n="do";t=="jp"&&(t="ja"),e.util.getBrandName(true)=="TMS"&&(n="tms"),window.open("/go/help/"+n+"/"+t+"/system/pdf/"+n+"_system_"+t+".pdf","help","width=1050,height=700,status=yes,scrollbars=no,resizable=no")}}),new a})}).call(this);