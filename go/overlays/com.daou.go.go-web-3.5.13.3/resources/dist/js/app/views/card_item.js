(function(){define(["jquery","underscore","backbone","hgn!templates/card_item"],function(e,t,n,r){function s(e,t,n){var r=["ic"];return!t||r.push(t),'<a class="btn_lead" data-name="'+e+'"><span class="'+r.join(" ")+'"></span><span class="txt">'+n+"</span></a>"}var i=n.View.extend({tagName:"section",className:"card_item",initialize:function(e){this.options=e||{},this.options.className&&this.$el.addClass(this.options.className),this.options.hasButtons=!1},render:function(){this.options.hasButtons=(this.options.buttons||[]).length>0,this.$el.append(r(this.options)),t.each(this.options.buttons,function(n,r){var i=e(s(n.name,n.classname,n.label));i.on("click",t.bind(function(e){var r=e.currentTarget;n.onClick&&t.isFunction(n.onClick)&&n.onClick(e,r,this),this.$el.trigger("clicked:button",[r,this])},this)),this.$el.find(".card_action").append(i)},this)},setHeader:function(e){return this.options.header=e,this},setSubject:function(e){return this.options.subject=e,this},setContent:function(e){return this.options.content=e,this},addButtons:function(e){return this.options.buttons=this.options.buttons||[],this.options.buttons.push(e),this},bind:function(e,t){return this.$el.on(e,t)}});return i})})();