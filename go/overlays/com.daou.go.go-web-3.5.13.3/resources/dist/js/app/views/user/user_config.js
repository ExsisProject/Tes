(function(){define(["jquery","backbone","app","hgn!templates/user/user_config","models/user_config","models/time_zone","models/site_config","i18n!nls/commons","i18n!admin/nls/admin","i18n!nls/user"],function(e,t,n,r,i,s,o,u,a,f){return UserConfig=t.View.extend({type:{ko:u["\ud55c\uad6d\uc5b4"],en:u["\uc601\uc5b4"],ja:u["\uc77c\ubcf8\uc5b4"],vi:u["\ubca0\ud2b8\ub0a8\uc5b4"],zh_cn:u["\uc911\uad6d\uc5b4 \uac04\uccb4"],zh_tw:u["\uc911\uad6d\uc5b4 \ubc88\uccb4"],saveFail:u["\uc800\uc7a5\uc5d0 \uc2e4\ud328 \ud558\uc600\uc2b5\ub2c8\ub2e4."],saveSuccess:u["\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."],save:u["\uc800\uc7a5"],cancel:u["\ucde8\uc18c"],title:f["\ud658\uacbd\uc124\uc815"],language:f["\uc5b8\uc5b4\uc124\uc815"],timezone:f["\uc2dc\uac04\uc124\uc815"],notification:f["\uc54c\ub9bc\uc124\uc815"],use_abbroad_ip_check:f["\ud574\uc678 \ub85c\uadf8\uc778 \ucc28\ub2e8"],help_use_abbroad_ip_check:f["\ud574\uc678 \ub85c\uadf8\uc778 \ucc28\ub2e8 \ub3c4\uc6c0\ub9d0"],use:f["\uc0ac\uc6a9\ud568"],not_use:f["\uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc74c"],skin:a["\uc2a4\ud0a8 \uc124\uc815"],basic:a["\uae30\ubcf8"],theme:u["\uba54\ub274 \ud14c\ub9c8 \uc124\uc815"],themeClassicDesc:f["\uae30\ubcf8\ud615 \uba54\ub274 \uc124\uba85"],themeAdvancedDesc:f["2.6 \uba54\ub274 \uc124\uba85"]},el:"#content",delegateEvents:function(n){return this.undelegateEvents(),t.View.prototype.delegateEvents.call(this,n),this.$el.on("click.userconfig","#save",e.proxy(this.save,this)),this.$el.on("click.userconfig","#cancel",e.proxy(this.cancel,this)),this},undelegateEvents:function(){return t.View.prototype.undelegateEvents.call(this),this.$el.off(".userconfig"),this},initialize:function(){e(this.el).removeClass("go_home"),this.model=i.read(GO.session().id),this.time_zone=s.read(),this.siteConfigModel=o.read().toJSON()},save:function(){var t=e("#configForm [name=locale]").val(),n=e("#configForm  [name=timeZone]").val(),r=e("#configForm [type=radio][name=noti]:checked").val(),i=e("#configForm [type=radio][name=useAbbroadIpCheck]:checked").val(),s=e("#configForm [name=style]").val(),o=e('input[name="theme"]:checked').val(),u=this,a=e.proxy(u.reload,u);return this.model.set({locale:t,timeZone:n,noti:r,useAbbroadIpCheck:i,style:s,theme:o}),this.model.save(null,{success:function(){e.goAlert(u.type.saveSuccess,"",a)},error:function(t,n){e.goAlert(u.type.saveFail)}}),!1},cancel:function(){return e.goAlert(u["\ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."],"",e.proxy(this.render,this)),!1},reload:function(){window.location.reload(!0)},render:function(){var t=[{value:"ko",text:this.type.ko},{value:"en",text:this.type.en},{value:"ja",text:this.type.ja},{value:"zh_CN",text:this.type.zh_cn},{value:"zh_TW",text:this.type.zh_tw},{value:"vi",text:this.type.vi}],n=[{value:"enable",text:"\ubc1b\uc74c"},{value:"disable",text:"\ubc1b\uc9c0 \uc54a\uc74c"}],i=[{value:!0,text:this.type.use},{value:!1,text:this.type.not_use}],s=[{value:"basic",text:this.type.basic},{value:"blue",text:"BLUE"},{value:"orange",text:"ORANGE"},{value:"red",text:"RED"},{value:"yellow",text:"YELLOW"},{value:"green",text:"GREEN"}],o=e.extend(!0,[],this.time_zone.toJSON()),u=!1,a=!0;this.__setTimeZone(o),this.__setLocale(t),this.__setNoti(n),this.__setUseAbbroadIpCheck(i),this.__setStyle(s),this.siteConfigModel.useAbbroadIpCheck=="on"&&(u=!0);if(this.model.toJSON().style==null||this.model.toJSON().style=="undefind")a=!1;this.$el.html(r({timeZone:o,locale:t,noti:n,useAbbroadIpCheck:i,skinStyle:s,type:this.type,useAbbroadIpCheckConfigOn:u,useSkinStyleOn:a,isAdvancedTheme:this.model.get("theme")=="THEME_ADVANCED"})),this._renderBrowserTitle()},_renderBrowserTitle:function(){e(document).attr("title",this.type.title+" - "+GO.config("webTitle"))},__setNoti:function(e){for(var t=0;t<e.length;t++)this.model.get("noti")==e[t].value&&(e[t]["isNoti?"]=!0)},__setTimeZone:function(e){for(var t=0;t<e.length;t++)this.model.get("timeZone")==e[t].location&&(e[t]["isTimeZone?"]=!0)},__setLocale:function(e){for(var t=0;t<e.length;t++)if(this.model.get("locale")==e[t].value){e[t]["isLocale?"]=!0;break}},__setUseAbbroadIpCheck:function(e){for(var t=0;t<e.length;t++)this.model.get("useAbbroadIpCheck")==e[t].value&&(e[t]["isUseAbbroadIpCheck?"]=!0)},__setStyle:function(e){for(var t=0;t<e.length;t++)this.model.get("style")==e[t].value&&(e[t]["isStyle?"]=!0)}}),{render:function(){var e=new UserConfig;return e.render()}}})}).call(this);