(function(){define(["jquery","backbone","app","components/attach_file/views/base_attach_files"],function(e,t,n,r){function o(){this.$el.find(".btn-preview .btn-text").addClass("ic_nav ic_nav_search"),this.$el.find(".btn-download .btn-text").addClass("ic ic_file_download")}var i=r.prototype,s=r.extend({events:{"vclick .imageview":"viewImage"},initialize:function(t){e.extend(this.events,i.events),i.initialize.apply(this,arguments)},render:function(){i.render.apply(this,arguments),o.call(this)},viewImage:function(t){t.preventDefault();var r=e(t.currentTarget),i=r.parents(".img_wrap"),s=i.find('a[data-fancybox-group="'+r.attr("data-fancybox-group")+'"]'),o=r.parent().parent().parent().attr("data-id"),u=0,a=[];return e.each(s,function(t,n){var r=e(n);a.push({fileName:r.attr("title"),url:r.attr("href")}),r.parent().parent().parent().attr("data-id")==o&&(u=t)}),n.util.attachImages(a,u),!1}});return s})})();