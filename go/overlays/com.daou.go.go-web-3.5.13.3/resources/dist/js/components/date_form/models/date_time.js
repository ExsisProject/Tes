define(function(){var e=Backbone.Model.extend({initialize:function(e){var t=e.startDate||this._defaultStartDate(),n=e.startTime||this._defaultStartTime().format("HH:mm"),r=e.startDateTime||this.getStartDateTime(t,n),i=e.endDate||this._defaultStartDate(),s=e.endTime||this._defaultStartTime().add("hours",1).format("HH:mm"),o=e.endDateTime||this.getEndDateTime(i,s);this.set("startDateTime",r),this.set("endDateTime",o)},getStartDateTime:function(e,t){return moment((e||this.getStartDate())+"T"+(t||this.getStartTime())+":00")},getEndDateTime:function(e,t){return moment((e||this.getEndDate())+"T"+(t||this.getEndTime())+":00")},parseTime:function(e){if(!e)return"";var t=/[^(0-9)]/gi;e=e.replace(t,""),e=e.substr(0,4);var n=e.substr(0,1);parseInt(n)>2&&(e="0"+e.substr(0,3));var r=e,i=r.substr(0,2),s=r.substr(2,2);s.length==0&&(s="00"),s.length==1&&(s="0"+s);var o=parseInt(i)<=23&&parseInt(i)>=0&&parseInt(s)<=59&&parseInt(s)>=0;return o?r=i+":"+s:r=GO.util.hourMinute(),r},getStartDate:function(){return this.get("startDateTime").format("YYYY-MM-DD")},getEndDate:function(){return this.get("endDateTime").format("YYYY-MM-DD")},getStartTime:function(){return this.get("startDateTime").format("HH:mm")},getEndTime:function(){return this.get("endDateTime").format("HH:mm")},validate:function(e){if(e.endDateTime.diff(e.startDateTime,"minutes")<0)return"end time can not be smaller than the start time"},_defaultStartDate:function(){return moment().format("YYYY-MM-DD")},_defaultStartTime:function(){var e=moment(new Date),t=e.isSame(new Date,"day")?e:e.clone().startOf("day"),n=1800,r=t.valueOf()/1e3,i=Math.floor(r)/n,s=Math.ceil(i)*n;return moment(s*1e3)}});return e});