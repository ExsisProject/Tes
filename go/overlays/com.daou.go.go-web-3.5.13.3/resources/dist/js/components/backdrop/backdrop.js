define("components/backdrop/backdrop",function(require){return Backbone.View.extend({initialize:function(){this.$el.attr("el-backdrop",this.cid),this.backdropToggleEl=this.$el,this.bindBackdrop()},setBackdropElement:function(e){this.backdropToggleEl=e},linkBackdrop:function(e){e.attr("el-backdrop-link",this.cid),this.links||(this.links=[]),this.links.push(e)},bindBackdrop:function(){if(this.alreadyBind)return;this.alreadyBind=!0,$(document).on("backdrop."+this.cid,$.proxy(function(e){this._onBackdrop(e)},this))},unBindBackdrop:function(){$(document).off("backdrop."+this.cid)},toggle:function(e){var t=e!=this._isVisible();this.backdropToggleEl||this._setBackdropToggleEl(),this.backdropToggleEl.toggle(e),t&&(e?this.afterShow():this.afterHide())},afterShow:function(){},afterHide:function(){},remove:function(){$(document).off("backdrop."+this.cid),Backbone.View.prototype.remove.apply(this,arguments)},_onBackdrop:function(e){if($(e.relatedTarget).closest(this.backdropToggleEl).length>0){this.toggle(!0);return}var t=!1,n=!1;_.each(this.links,function(r){if(r.length==0)r=r.selector;else{if(r.attr("disabled")==="disabled")return;if(!r.is(":visible"))return}if($(e.relatedTarget).closest(r).length>0)return n=!0,typeof r=="string"?t=$(r).attr("backdrop-toggle"):t=r.attr("backdrop-toggle"),!1});if(n){t=t?!this._isVisible():!0,this.toggle(t);return}this.toggle(!1)},_isVisible:function(){return this.backdropToggleEl||this._setBackdropToggleEl(),this.backdropToggleEl.is(":visible")},_setBackdropToggleEl:function(){if(!this.backdropToggleElSelector){console.warn("backdropToggleElSelector is not specified.");return}this.backdropToggleEl=typeof this.backdropToggleElSelector=="object"?this.backdropToggleElSelector:this.$(this.backdropToggleElSelector)}})});