jindo.Component=jindo.$Class({_htEventHandler:null,_htOption:null,$init:function(){var e=this.constructor.getInstance();e.push(this),this._htEventHandler={},this._htOption={},this._htOption._htSetter={}},option:function(e,t){switch(typeof e){case"undefined":return this._htOption;case"string":if(typeof t=="undefined")return this._htOption[e];if(e=="htCustomEventHandler"){if(typeof this._htOption[e]!="undefined")return this;this.attach(t)}this._htOption[e]=t,typeof this._htOption._htSetter[e]=="function"&&this._htOption._htSetter[e](t);break;case"object":for(var n in e){if(n=="htCustomEventHandler"){if(typeof this._htOption[n]!="undefined")continue;this.attach(e[n])}this._htOption[n]=e[n],typeof this._htOption._htSetter[n]=="function"&&this._htOption._htSetter[n](e[n])}}return this},optionSetter:function(e,t){switch(typeof e){case"undefined":return this._htOption._htSetter;case"string":if(typeof t=="undefined")return this._htOption._htSetter[e];this._htOption._htSetter[e]=jindo.$Fn(t,this).bind();break;case"object":for(var n in e)this._htOption._htSetter[n]=jindo.$Fn(e[n],this).bind()}return this},fireEvent:function(e,t){t=t||{};var n=this["on"+e],r=this._htEventHandler[e]||[],i=typeof n=="function",s=r.length>0;if(!i&&!s)return!0;r=r.concat(),t.sType=e,typeof t._aExtend=="undefined"&&(t._aExtend=[],t.stop=function(){t._aExtend.length>0&&(t._aExtend[t._aExtend.length-1].bCanceled=!0)}),t._aExtend.push({sType:e,bCanceled:!1});var o=[t],u,a;for(u=2,a=arguments.length;u<a;u++)o.push(arguments[u]);i&&n.apply(this,o);if(s){var f;for(u=0,f;f=r[u];u++)f.apply(this,o)}return!t._aExtend.pop().bCanceled},attach:function(e,t){if(arguments.length==1)return jindo.$H(arguments[0]).forEach(jindo.$Fn(function(e,t){this.attach(t,e)},this).bind()),this;var n=this._htEventHandler[e];return typeof n=="undefined"&&(n=this._htEventHandler[e]=[]),n.push(t),this},detach:function(e,t){if(arguments.length==1)return jindo.$H(arguments[0]).forEach(jindo.$Fn(function(e,t){this.detach(t,e)},this).bind()),this;var n=this._htEventHandler[e];if(n)for(var r=0,i;i=n[r];r++)if(i===t){n=n.splice(r,1);break}return this},detachAll:function(e){var t=this._htEventHandler;if(arguments.length)return typeof t[e]=="undefined"?this:(delete t[e],this);for(var n in t)delete t[n];return this}}),jindo.Component.factory=function(e,t){var n=[],r;typeof t=="undefined"&&(t={});for(var i=0,s;s=e[i];i++)r=new this(s,t),n[n.length]=r;return n},jindo.Component.getInstance=function(){return typeof this._aInstance=="undefined"&&(this._aInstance=[]),this._aInstance},jindo.UIComponent=jindo.$Class({$init:function(){this._bIsActivating=!1},isActivating:function(){return this._bIsActivating},activate:function(){return this.isActivating()?this:(this._bIsActivating=!0,arguments.length>0?this._onActivate.apply(this,arguments):this._onActivate(),this)},deactivate:function(){return this.isActivating()?(this._bIsActivating=!1,arguments.length>0?this._onDeactivate.apply(this,arguments):this._onDeactivate(),this):this}}).extend(jindo.Component),jindo.RolloverArea=jindo.$Class({$init:function(e,t){this.option({sClassName:"rollover",sClassPrefix:"rollover-",bCheckMouseDown:!0,bActivateOnload:!0,htStatus:{sOver:"over",sDown:"down"}}),this.option(t||{}),this._elArea=jindo.$(e),this._aOveredElements=[],this._aDownedElements=[],this._wfMouseOver=jindo.$Fn(this._onMouseOver,this),this._wfMouseOut=jindo.$Fn(this._onMouseOut,this),this._wfMouseDown=jindo.$Fn(this._onMouseDown,this),this._wfMouseUp=jindo.$Fn(this._onMouseUp,this),this.option("bActivateOnload")&&this.activate()},_addOvered:function(e){this._aOveredElements.push(e)},_removeOvered:function(e){this._aOveredElements.splice(jindo.$A(this._aOveredElements).indexOf(e),1)},_addStatus:function(e,t){jindo.$Element(e).addClass(this.option("sClassPrefix")+t)},_removeStatus:function(e,t){jindo.$Element(e).removeClass(this.option("sClassPrefix")+t)},_isInnerElement:function(e,t){return e===t?!0:jindo.$Element(e).isParentOf(t)},_onActivate:function(){this._wfMouseOver.attach(this._elArea,"mouseover"),this._wfMouseOut.attach(this._elArea,"mouseout"),this.option("bCheckMouseDown")&&(this._wfMouseDown.attach(this._elArea,"mousedown"),this._wfMouseUp.attach(document,"mouseup"))},_onDeactivate:function(){this._wfMouseOver.detach(this._elArea,"mouseover"),this._wfMouseOut.detach(this._elArea,"mouseout"),this._wfMouseDown.detach(this._elArea,"mousedown"),this._wfMouseUp.detach(document,"mouseup"),this._aOveredElements.length=0,this._aDownedElements.length=0},_findRollover:function(e){var t=this.option("sClassName");return jindo.$$.test(e,"."+t)?e:jindo.$$.getSingle("! ."+t,e)},_onMouseOver:function(e){var t=e.element,n=e.relatedElement,r;for(;t=this._findRollover(t);t=t.parentNode){if(n&&this._isInnerElement(t,n))continue;this._addOvered(t),r={element:t,htStatus:this.option("htStatus"),weEvent:e},this.fireEvent("over",r)&&this._addStatus(r.element,r.htStatus.sOver)}},_onMouseOut:function(e){var t=e.element,n=e.relatedElement,r;for(;t=this._findRollover(t);t=t.parentNode){if(n&&this._isInnerElement(t,n))continue;this._removeOvered(t),r={element:t,htStatus:this.option("htStatus"),weEvent:e},this.fireEvent("out",r)&&this._removeStatus(r.element,r.htStatus.sOver)}},_onMouseDown:function(e){var t=e.element,n;while(t=this._findRollover(t))n={element:t,htStatus:this.option("htStatus"),weEvent:e},this._aDownedElements.push(t),this.fireEvent("down",n)&&this._addStatus(n.element,n.htStatus.sDown),t=t.parentNode},_onMouseUp:function(e){var t=e.element,n=[],r=this._aDownedElements,i,s,o;for(o=0;s=r[o];o++)n.push({element:s,htStatus:this.option("htStatus"),weEvent:e});for(;t=this._findRollover(t);t=t.parentNode){if(jindo.$A(r).indexOf(t)>-1)continue;n.push({element:t,htStatus:this.option("htStatus"),weEvent:e})}for(o=0;i=n[o];o++)this.fireEvent("up",i)&&this._removeStatus(i.element,i.htStatus.sDown);this._aDownedElements=[]}}).extend(jindo.UIComponent),jindo.Calendar=jindo.$Class({$init:function(e,t){this._htToday=this.constructor.getDateHashTable(new Date),this._elLayer=jindo.$(e),this.htDefaultOption={sClassPrefix:"calendar-",nYear:this._htToday.nYear,nMonth:this._htToday.nMonth,nDate:this._htToday.nDate,sTitleFormat:"yyyy-mm",sYearTitleFormat:"yyyy",sMonthTitleFormat:"m",aMonthTitle:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],bDrawOnload:!0},this.option(this.htDefaultOption),this.option(t||{}),this._assignHTMLElements(),this.activate(),this.setDate(this.option("nYear"),this.option("nMonth"),this.option("nDate")),this.option("bDrawOnload")&&this.draw()},getBaseElement:function(){return this._elLayer},getDate:function(){return this._htDate},getDateOfElement:function(e){var t=jindo.$A(this._aDateContainerElement).indexOf(e);return t>-1?this._aMetaData[t]:null},getToday:function(){return this._htToday},setDate:function(e,t,n){this._htDate={nYear:e,nMonth:t*1,nDate:n*1}},getShownDate:function(){return this._getShownDate()},_getShownDate:function(){return this.htShownDate||this.getDate()},_setShownDate:function(e,t){this.htShownDate={nYear:e,nMonth:t*1,nDate:1}},_assignHTMLElements:function(){var e=this.option("sClassPrefix"),t=this.getBaseElement();if(this.elBtnPrevYear=jindo.$$.getSingle("."+e+"btn-prev-year",t))this.wfPrevYear=jindo.$Fn(function(e){e.stop(jindo.$Event.CANCEL_DEFAULT),this.draw(-1,0,!0)},this);if(this.elBtnPrevMonth=jindo.$$.getSingle("."+e+"btn-prev-mon",t))this.wfPrevMonth=jindo.$Fn(function(e){e.stop(jindo.$Event.CANCEL_DEFAULT),this.draw(0,-1,!0)},this);if(this.elBtnNextMonth=jindo.$$.getSingle("."+e+"btn-next-mon",t))this.wfNextMonth=jindo.$Fn(function(e){e.stop(jindo.$Event.CANCEL_DEFAULT),this.draw(0,1,!0)},this);if(this.elBtnNextYear=jindo.$$.getSingle("."+e+"btn-next-year",t))this.wfNextYear=jindo.$Fn(function(e){e.stop(jindo.$Event.CANCEL_DEFAULT),this.draw(1,0,!0)},this);this.elTitle=jindo.$$.getSingle("."+e+"title",t),this.elTitleYear=jindo.$$.getSingle("."+e+"title-year",t),this.elTitleMonth=jindo.$$.getSingle("."+e+"title-month",t);var n=jindo.$$.getSingle("."+e+"week",t);this.elWeekTemplate=n.cloneNode(!0),this.elWeekAppendTarget=n.parentNode},_setCalendarTitle:function(e,t,n){t<10&&(t=("0"+t*1).toString());var r=this.elTitle,i=this.option("sTitleFormat"),s;if(typeof n!="undefined")switch(n){case"year":r=this.elTitleYear,i=this.option("sYearTitleFormat"),s=i.replace(/yyyy/g,e).replace(/y/g,e.toString().substr(2,2));break;case"month":r=this.elTitleMonth,i=this.option("sMonthTitleFormat"),s=i.replace(/mm/g,t).replace(/m/g,t*1).replace(/M/g,this.option("aMonthTitle")[t-1])}else s=i.replace(/yyyy/g,e).replace(/y/g,e.toString().substr(2,2)).replace(/mm/g,t).replace(/m/g,t*1).replace(/M/g,this.option("aMonthTitle")[t-1]);jindo.$Element(r).text(s)},draw:function(e,t,n){var r=this.option("sClassPrefix"),i=this.getDate(),s=this._getShownDate();if(s&&typeof n!="undefined"&&n){var o=this.constructor.getRelativeDate(e,t,0,s);e=o.nYear,t=o.nMonth}else typeof e=="undefined"&&typeof t=="undefined"&&typeof n=="undefined"?(e=i.nYear,t=i.nMonth):(e=e||s.nYear,t=t||s.nMonth);if(this.fireEvent("beforeDraw",{nYear:e,nMonth:t})){this.elTitle&&this._setCalendarTitle(e,t),this.elTitleYear&&this._setCalendarTitle(e,t,"year"),this.elTitleMonth&&this._setCalendarTitle(e,t,"month"),this._clear(jindo.Calendar.getWeeks(e,t)),this._setShownDate(e,t);var u=this.getToday(),a=this.constructor.getFirstDay(e,t),f=this.constructor.getLastDay(e,t),l=this.constructor.getLastDate(e,t),c=0,h=this.constructor.getRelativeDate(0,-1,0,{nYear:e,nMonth:t,nDate:1}),p=this.constructor.getRelativeDate(0,1,0,{nYear:e,nMonth:t,nDate:1}),d=this.constructor.getLastDate(h.nYear,h.nMonth),v=[],m,g,y,b,w,E,S,x,T,N=this.constructor.getWeeks(e,t);for(T=0;T<N;T++)x=this.elWeekTemplate.cloneNode(!0),jindo.$Element(x).appendTo(this.elWeekAppendTarget),this._aWeekElement.push(x);this._aDateElement=jindo.$$("."+r+"date",this.elWeekAppendTarget),this._aDateContainerElement=jindo.$$("."+r+"week > *",this.elWeekAppendTarget);if(a>0)for(T=d-a;T<d;T++)v.push(T+1);for(T=1;T<l+1;T++)v.push(T);S=v.length-1;for(T=1;T<7-f;T++)v.push(T);for(T=0;T<v.length;T++)m=!1,g=!1,y=jindo.$Element(this._aDateContainerElement[T]),b=e,w=t,T<a?(m=!0,y.addClass(r+"prev-mon"),b=h.nYear,w=h.nMonth):T>S?(g=!0,y.addClass(r+"next-mon"),b=p.nYear,w=p.nMonth):(b=e,w=t),c===0&&y.addClass(r+"sun"),c==6&&y.addClass(r+"sat"),b==u.nYear&&w*1==u.nMonth&&v[T]==u.nDate&&y.addClass(r+"today"),E={elDate:this._aDateElement[T],elDateContainer:y.$value(),nYear:b,nMonth:w,nDate:v[T],bPrevMonth:m,bNextMonth:g,sHTML:v[T]},jindo.$Element(E.elDate).html(E.sHTML.toString()),this._aMetaData.push({nYear:b,nMonth:w,nDate:v[T]}),c=(c+1)%7,this.fireEvent("draw",E);this.fireEvent("afterDraw",{nYear:e,nMonth:t})}},_clear:function(e){this._aMetaData=[],this._aWeekElement=[],jindo.$Element(this.elWeekAppendTarget).empty()},attachEvent:function(){this.activate()},detachEvent:function(){this.deactivate()},_onActivate:function(){this.elBtnPrevYear&&this.wfPrevYear.attach(this.elBtnPrevYear,"click"),this.elBtnPrevMonth&&this.wfPrevMonth.attach(this.elBtnPrevMonth,"click"),this.elBtnNextMonth&&this.wfNextMonth.attach(this.elBtnNextMonth,"click"),this.elBtnNextYear&&this.wfNextYear.attach(this.elBtnNextYear,"click")},_onDeactivate:function(){this.elBtnPrevYear&&this.wfPrevYear.detach(this.elBtnPrevYear,"click"),this.elBtnPrevMonth&&this.wfPrevMonth.detach(this.elBtnPrevMonth,"click"),this.elBtnNextMonth&&this.wfNextMonth.detach(this.elBtnNextMonth,"click"),this.elBtnNextYear&&this.wfNextYear.detach(this.elBtnNextYear,"click")}}).extend(jindo.UIComponent),jindo.Calendar.getDateObject=function(e){return arguments.length==3?new Date(arguments[0],arguments[1]-1,arguments[2]):new Date(e.nYear,e.nMonth-1,e.nDate)},jindo.Calendar.getDateHashTable=function(e){return arguments.length==3?{nYear:arguments[0],nMonth:arguments[1],nDate:arguments[2]}:(arguments.length<=1&&(e=e||new Date),{nYear:e.getFullYear(),nMonth:e.getMonth()+1,nDate:e.getDate()})},jindo.Calendar.getTime=function(e){return this.getDateObject(e).getTime()},jindo.Calendar.getFirstDay=function(e,t){return(new Date(e,t-1,1)).getDay()},jindo.Calendar.getLastDay=function(e,t){return(new Date(e,t,0)).getDay()},jindo.Calendar.getLastDate=function(e,t){return(new Date(e,t,0)).getDate()},jindo.Calendar.getWeeks=function(e,t){var n=this.getFirstDay(e,t),r=this.getLastDate(e,t);return Math.ceil((n+r)/7)},jindo.Calendar.getRelativeDate=function(e,t,n,r){return this.getDateHashTable(new Date(r.nYear+e,r.nMonth+t-1,r.nDate+n))},jindo.Calendar.isPast=function(e,t){return this.getTime(e)<this.getTime(t)?!0:!1},jindo.Calendar.isFuture=function(e,t){return this.getTime(e)>this.getTime(t)?!0:!1},jindo.Calendar.isSameDate=function(e,t){return this.getTime(e)==this.getTime(t)?!0:!1},jindo.Calendar.isBetween=function(e,t,n){return this.isFuture(e,n)||this.isPast(e,t)?!1:!0},jindo.LayerManager=jindo.$Class({_bIsActivating:!1,_bIsLayerVisible:!1,_bIsHiding:!1,_bIsShowing:!1,_aLink:null,$init:function(e,t){this.option({sCheckEvent:"click",nCheckDelay:100,nShowDelay:0,nHideDelay:100,sMethod:"show",nDuration:200,Transition:{fFadeIn:jindo.Effect.cubicEaseOut,fFadeOut:jindo.Effect.cubicEaseIn,fSlideDown:jindo.Effect.cubicEaseOut,fSlideUp:jindo.Effect.cubicEaseIn}}),this.option(t||{}),this.setLayer(e),this._aLink=[],this._oShowTimer=new jindo.Timer,this._oHideTimer=new jindo.Timer,this._oEventTimer=new jindo.Timer,this._wfOnEvent=jindo.$Fn(this._onEvent,this),this.getVisible(),this.activate()},_onActivate:function(){this._wfOnEvent.attach(document,this.option("sCheckEvent"))},_onDeactivate:function(){this._wfOnEvent.detach(document,this.option("sCheckEvent"))},getVisible:function(){return this._bIsLayerVisible=this._wel.visible()&&this._wel.opacity()>0},_check:function(e){var t=jindo.$Element(e);for(var n=0,r;r=this._aLink[n];n++){r=jindo.$Element(r).$value();if(r&&(e==r||t.isChildOf(r)))return!0}return!1},_find:function(e){for(var t=0,n;n=this._aLink[t];t++)if(n==e)return t;return-1},getLayer:function(){return this._el},setLayer:function(e){this._el=jindo.$(e),this._wel=jindo.$Element(e);var t=this._el.cloneNode(!0),n=jindo.$Element(t);return n.css({position:"absolute",left:"-5000px"}).appendTo(this._el.parentNode),n.show(),this._nLayerHeight=n.height(),n.height(this._nLayerHeight),this._sLayerCSSHeight=n.css("height"),this._sLayerCSSOverflowX=this._wel.css("overflowX"),this._sLayerCSSOverflowY=this._wel.css("overflowY"),n.css("overflow","hidden").height(0),this._nSlideMinHeight=n.height()+1,n.leave(),this},_transform:function(){this._wel.css({overflowX:"hidden",overflowY:"hidden"})},_restore:function(){this._wel.css({overflowX:this._sLayerCSSOverflowX,overflowY:this._sLayerCSSOverflowY})},getLinks:function(){return this._aLink},setLinks:function(e){return this._aLink=jindo.$A(e).unique().$value(),this},link:function(e){if(arguments.length>1){for(var t=0,n=arguments.length;t<n;t++)this.link(arguments[t]);return this}return this._find(e)!=-1?this:(this._aLink.push(e),this)},unlink:function(e){if(arguments.length>1){for(var t=0,n=arguments.length;t<n;t++)this.unlink(arguments[t]);return this}var r=this._find(e);return r>-1&&this._aLink.splice(r,1),this},_fireEventBeforeShow:function(){return this._transform(),this.fireEvent("beforeShow",{elLayer:this.getLayer(),aLinkedElement:this.getLinks(),sMethod:this.option("sMethod")})},_fireEventAppear:function(){this.fireEvent("appear",{elLayer:this.getLayer(),aLinkedElement:this.getLinks(),sMethod:this.option("sMethod")})},_fireEventShow:function(){this._bIsShowing=!1,this._restore(),this.fireEvent("show",{elLayer:this.getLayer(),aLinkedElement:this.getLinks(),sMethod:this.option("sMethod")})},_fireEventBeforeHide:function(){return this._transform(),this.fireEvent("beforeHide",{elLayer:this.getLayer(),aLinkedElement:this.getLinks(),sMethod:this.option("sMethod")})},_fireEventHide:function(){this._bIsHiding=!1,this._restore(),this.fireEvent("hide",{elLayer:this.getLayer(),aLinkedElement:this.getLinks(),sMethod:this.option("sMethod")})},_show:function(e,t){this._oEventTimer.abort(),this._bIsShowing=!0,this._bIsHiding=!1,t>0?this._oShowTimer.start(e,t):(this._oHideTimer.abort(),e())},_hide:function(e,t){this._bIsShowing=!1,this._bIsHiding=!0,t>0?this._oHideTimer.start(e,t):(this._oShowTimer.abort(),e())},_getShowMethod:function(){switch(this.option("sMethod")){case"show":return"showIn";case"fade":return"fadeIn";case"slide":return"slideDown"}},_getHideMethod:function(){switch(this.option("sMethod")){case"show":return"hideOut";case"fade":return"fadeOut";case"slide":return"slideUp"}},show:function(e){return typeof e=="undefined"&&(e=this.option("nShowDelay")),this[this._getShowMethod()](e),this},hide:function(e){return typeof e=="undefined"&&(e=this.option("nHideDelay")),this[this._getHideMethod()](e),this},showIn:function(e){typeof e=="undefined"&&(e=this.option("nShowDelay"));var t=this;return this._show(function(){t._sAppliedMethod="show",t.getVisible()||t._fireEventBeforeShow()&&(t._wel.show(),t._fireEventAppear(),t._fireEventShow())},e),this},hideOut:function(e){typeof e=="undefined"&&(e=this.option("nHideDelay"));var t=this;return this._hide(function(){t._sAppliedMethod="show",t.getVisible()&&t._fireEventBeforeHide()&&(t._wel.hide(),t._fireEventHide())},e),this},_getTransition:function(){return this._oTransition?this._oTransition:this._oTransition=(new jindo.Transition).fps(30)},fadeIn:function(e){var t=this._getTransition();t.detachAll().abort(),typeof e=="undefined"&&(e=this.option("nShowDelay"));var n=this.option("nDuration"),r=this;return this._show(function(){r._sAppliedMethod="fade";var e=r.getLayer();(!r._wel.visible()||r._wel.opacity()!=1)&&r._fireEventBeforeShow()&&(r._wel.visible()||(r._wel.opacity(0),r._wel.show()),n*=1-r._wel.opacity(),t.attach({playing:function(e){e.nStep===1&&(this.detach("playing",arguments.callee),r._fireEventAppear())},end:function(e){this.detach("end",arguments.callee),r._fireEventShow()}}).start(n,e,{"@opacity":r.option("Transition").fFadeIn.apply(null,[1])}))},e),this},fadeOut:function(e){var t=this._getTransition();t.detachAll().abort(),typeof e=="undefined"&&(e=this.option("nHideDelay"));var n=this.option("nDuration"),r=this;return this._hide(function(){r._sAppliedMethod="fade";if(r.getVisible()){var e=r.getLayer();r._fireEventBeforeHide()&&(n*=r._wel.opacity(),t.attach({end:function(e){this.detach("end",arguments.callee),r._wel.hide(),r._wel.opacity(1),r._fireEventHide()}}).start(n,e,{"@opacity":r.option("Transition").fFadeOut.apply(null,[0])}))}},e),this},slideDown:function(e){var t=this._getTransition();t.detachAll().abort(),typeof e=="undefined"&&(e=this.option("nShowDelay"));var n=this.option("nDuration"),r=this;return this._show(function(){r._sAppliedMethod="slide";var e=r.getLayer();Math.ceil(r._wel.height())<r._nLayerHeight&&r._fireEventBeforeShow()&&(r.getVisible()?n=Math.ceil(n*((r._nLayerHeight-r._wel.height())/(r._nLayerHeight-r._nSlideMinHeight))):r._wel.height(0).show(),t.attach({playing:function(e){e.nStep===1&&(this.detach("playing",arguments.callee),r._fireEventAppear())},end:function(e){this.detach("end",arguments.callee),r._fireEventShow()}}).start(n,{getter:function(t){return jindo.$Element(e)[t]()+1},setter:function(t,n){jindo.$Element(e)[t](parseFloat(n))}},{height:r.option("Transition").fSlideDown.apply(null,[r._nLayerHeight])}))},e),this},slideUp:function(e){var t=this._getTransition();t.detachAll().abort(),typeof e=="undefined"&&(e=this.option("nHideDelay"));var n=this.option("nDuration"),r=this;return this._hide(function(){r._sAppliedMethod="slide";var e=r.getLayer();r.getVisible()&&r._fireEventBeforeHide()&&(n=Math.ceil(n*(r._wel.height()/r._nLayerHeight)),t.attach({end:function(e){r._wel.hide().css({height:r._sLayerCSSHeight}),this.detach("end",arguments.callee),r._fireEventHide()}}).start(n,{getter:function(t){return jindo.$Element(e)[t]()},setter:function(t,n){jindo.$Element(e)[t](Math.ceil(n))}},{height:r.option("Transition").fSlideUp.apply(null,[r._nSlideMinHeight])}))},e),this},toggle:function(e){return!this.getVisible()||this._bIsHiding?this.show(e||this.option("nShowDelay")):this.hide(e||this.option("nHideDelay")),this},_onEvent:function(e){var t=e.element,n=this;this._oEventTimer.start(function(){!n._bIsHiding&&n.getVisible()&&(n._check(t)?n._bIsShowing||(n.fireEvent("ignore",{sCheckEvent:n.option("sCheckEvent")}),n._oHideTimer.abort(),n._bIsHiding=!1):typeof t.tagName!="undefined"&&n.hide())},this.option("nCheckDelay"))}}).extend(jindo.UIComponent),jindo.LayerPosition=jindo.$Class({$init:function(e,t,n){this.option({sPosition:"outside-bottom",sAlign:"left",sValign:"",nTop:0,nLeft:0,bAuto:!1}),this.option(n||{}),this.setElement(e),t&&this.setLayer(t),e&&t&&this.setPosition(),this._wfSetPosition=jindo.$Fn(function(){var e=this._elLayer;e&&this._welLayer.visible()&&this.fireEvent("beforeAdjust",{elLayer:e,htCurrentPosition:this.getCurrentPosition(),htAdjustedPosition:this._adjustPosition(this.getCurrentPosition())})&&(this.setPosition(),this.fireEvent("adjust",{elLayer:e,htCurrentPosition:this.getCurrentPosition()}))},this),this.option("bAuto")&&this._wfSetPosition.attach(window,"scroll").attach(window,"resize")},getElement:function(){return this._el},setElement:function(e){return this._el=jindo.$(e),this._wel=jindo.$Element(e),this},getLayer:function(){return this._elLayer},setLayer:function(e){return this._elLayer=jindo.$(e),this._welLayer=jindo.$Element(e),document.body.appendChild(e),this},_isPosition:function(e,t){return e.sPosition.indexOf(t)>-1?!0:!1},_setLeftRight:function(e,t){var n=this.getElement(),r=this.getLayer(),i=n.offsetWidth,s=r.offsetWidth;n==document.body&&(i=jindo.$Document().clientSize().width);var o=this._isPosition(e,"left"),u=this._isPosition(e,"right"),a=this._isPosition(e,"inside");return o?a?t.nLeft+=e.nLeft:(t.nLeft-=s,t.nLeft-=e.nLeft):u?(t.nLeft+=i,a?(t.nLeft-=s,t.nLeft-=e.nLeft):t.nLeft+=e.nLeft):(e.sAlign=="left"&&(t.nLeft+=e.nLeft),e.sAlign=="center"&&(t.nLeft+=(i-s)/2),e.sAlign=="right"&&(t.nLeft+=i-s,t.nLeft-=e.nLeft)),t},_setVerticalAlign:function(e,t){var n=this.getElement(),r=this.getLayer(),i=n.offsetHeight,s=r.offsetHeight;n==document.body&&(i=jindo.$Document().clientSize().height);switch(e.sValign){case"top":t.nTop+=e.nTop;break;case"middle":t.nTop+=(i-s)/2;break;case"bottom":t.nTop+=i-s-e.nTop}return t},_adjustScrollPosition:function(e){if(this.getElement()==document.body){var t=jindo.$Document().scrollPosition();e.nTop+=t.top,e.nLeft+=t.left}return e},getPosition:function(e){typeof e!="object"&&(e=this.option()),typeof e.nTop=="undefined"&&(e.nTop=0),typeof e.nLeft=="undefined"&&(e.nLeft=0);var t,n=this._isPosition(e,"center"),r=this._isPosition(e,"inside"),i=this._isPosition(e,"top"),s=this._isPosition(e,"bottom"),o=this._isPosition(e,"left"),u=this._isPosition(e,"right");o&&(t="left"),u&&(t="right"),i&&(t="top"),s&&(t="bottom"),n&&(t="center");var a=this.getElement(),f=jindo.$Element(a),l=this.getLayer(),c=jindo.$Element(l),h=f.offset(),p=a.offsetWidth,d=a.offsetHeight,v,m=l.offsetWidth,g=l.offsetHeight,y={nTop:h.top,nLeft:h.left};a==document.body&&(v=jindo.$Document().clientSize(),p=v.width,d=v.height),m+=parseInt(c.css("marginLeft"))+parseInt(c.css("marginRight"))||0,g+=parseInt(c.css("marginTop"))+parseInt(c.css("marginBottom"))||0;switch(t){case"center":y.nTop+=(d-g)/2,y.nTop+=e.nTop,y.nLeft+=(p-m)/2,y.nLeft+=e.nLeft;break;case"top":r?y.nTop+=e.nTop:y.nTop-=e.nTop+g,y=this._setLeftRight(e,y);break;case"bottom":y.nTop+=d,r?y.nTop-=e.nTop+g:y.nTop+=e.nTop,y=this._setLeftRight(e,y);break;case"left":r?y.nLeft+=e.nLeft:y.nLeft-=e.nLeft+m,y=this._setVerticalAlign(e,y);break;case"right":y.nLeft+=p,r?y.nLeft-=e.nLeft+m:y.nLeft+=e.nLeft,y=this._setVerticalAlign(e,y)}return y=this._adjustScrollPosition(y),y},setPosition:function(e){var t=jindo.$Element(this.getLayer());return t.css("left","-9999px").css("top","0px"),typeof e=="undefined"&&(e=this.getPosition()),this.option("bAuto")&&(e=this._adjustPosition(e)),t.css("left",e.nLeft+"px").css("top",e.nTop+"px"),this},getCurrentPosition:function(){var e=jindo.$Element(this.getLayer());return{nTop:parseInt(e.css("top")),nLeft:parseInt(e.css("left"))}},_isFullyVisible:function(e){var t=this.getLayer(),n=jindo.$Element(t),r=jindo.$Document().scrollPosition(),i=r.top,s=r.left,o=jindo.$Document().clientSize(),u=t.offsetWidth+(parseInt(n.css("marginLeft"))+parseInt(n.css("marginRight"))||0),a=t.offsetHeight+(parseInt(n.css("marginTop"))+parseInt(n.css("marginBottom"))||0);return e.nLeft>=0&&e.nTop>=0&&o.width>=e.nLeft-s+u&&o.height>=e.nTop-i+a?!0:!1},_mirrorHorizontal:function(e){if(e.sAlign=="center"||e.sPosition=="inside-center")return e;var t={};for(var n in e)t[n]=e[n];return this._isPosition(t,"right")?t.sPosition=t.sPosition.replace(/right/,"left"):this._isPosition(t,"left")?t.sPosition=t.sPosition.replace(/left/,"right"):t.sAlign=="right"?t.sAlign="left":t.sAlign=="left"&&(t.sAlign="right"),t},_mirrorVertical:function(e){if(e.sValign=="middle"||e.sPosition=="inside-center")return e;var t={};for(var n in e)t[n]=e[n];return this._isPosition(t,"top")?t.sPosition=t.sPosition.replace(/top/,"bottom"):this._isPosition(t,"bottom")?t.sPosition=t.sPosition.replace(/bottom/,"top"):t.sValign=="top"?t.sValign="bottom":t.sValign=="bottom"&&(t.sValign="top"),t},_adjustPosition:function(e){var t=this.option(),n=[];n.push(e),n.push(this.getPosition(this._mirrorHorizontal(t))),n.push(this.getPosition(this._mirrorVertical(t))),n.push(this.getPosition(this._mirrorVertical(this._mirrorHorizontal(t))));for(var r=0,i;i=n[r];r++)if(this._isFullyVisible(i)){e=i;break}return e}}).extend(jindo.Component),jindo.Timer=jindo.$Class({$init:function(){this._nTimer=null,this._nLatest=null,this._nRemained=0,this._nDelay=null,this._fRun=null,this._bIsRunning=!1},start:function(e,t){return this.abort(),this._nRemained=0,this._nDelay=t,this._fRun=e,this._bIsRunning=!0,this._nLatest=this._getTime(),this.fireEvent("wait"),this._excute(this._nDelay,!1),!0},isRunning:function(){return this._bIsRunning},_getTime:function(){return(new Date).getTime()},_clearTimer:function(){var e=!1;return this._nTimer&&(clearInterval(this._nTimer),this._bIsRunning=!1,e=!0),this._nTimer=null,e},abort:function(){var e=this._clearTimer();return e&&(this.fireEvent("abort"),this._fRun=null),e},pause:function(){var e=this._getTime()-this._nLatest;return this._nRemained=Math.max(this._nDelay-e,0),this._clearTimer()},_excute:function(e,t){var n=this;this._clearTimer(),this._bIsRunning=!0,this._nTimer=setInterval(function(){if(n._nTimer){n.fireEvent("run");var e=n._fRun();n._nLatest=n._getTime();if(!e){clearInterval(n._nTimer),n._nTimer=null,n._bIsRunning=!1,n.fireEvent("end");return}n.fireEvent("wait"),t&&n._excute(n._nDelay,!1)}},e)},resume:function(){return!this._fRun||this.isRunning()?!1:(this._bIsRunning=!0,this.fireEvent("wait"),this._excute(this._nRemained,!0),this._nRemained=0,!0)}}).extend(jindo.Component),jindo.Transition=jindo.$Class({_nFPS:30,_aTaskQueue:null,_oTimer:null,_bIsWaiting:!0,_bIsPlaying:!1,$init:function(e){this._aTaskQueue=[],this._oTimer=new jindo.Timer,this.option({fEffect:jindo.Effect.linear,bCorrection:!1}),this.option(e||{})},fps:function(e){return arguments.length>0?(this._nFPS=e,this):this._nFPS},isPlaying:function(){return this._bIsPlaying},abort:function(){return this._aTaskQueue=[],this._oTimer.abort(),this._bIsPlaying&&this.fireEvent("abort"),this._bIsWaiting=!0,this._bIsPlaying=!1,this._htTaskToDo=null,this},start:function(e,t,n){return arguments.length>0&&this.queue.apply(this,arguments),this._prepareNextTask(),this},queue:function(e,t){var n;if(typeof arguments[0]=="function")n={sType:"function",fTask:arguments[0]};else{var r=[],i=arguments.length;if(arguments[1]instanceof Array)r=arguments[1];else{var s=[];jindo.$A(arguments).forEach(function(e,t){t>0&&(s.push(e),t%2==0&&(r.push(s.concat()),s=[]))})}n={sType:"task",nDuration:e,aList:[]};for(var o=0;o<r.length;o++){var u=[],a=r[o][1],f;for(var l in a)f=a[l],/^(@|style\.)(\w+)/i.test(l)?u.push(["style",RegExp.$2,f]):u.push(["attr",l,f]);n.aList.push({elTarget:r[o][0],aValue:u})}}return this._queueTask(n),this},pause:function(){return this._oTimer.abort()&&this.fireEvent("pause"),this},resume:function(){if(this._htTaskToDo){this._bIsWaiting===!1&&this._bIsPlaying===!0&&this.fireEvent("resume"),this._doTask(),this._bIsWaiting=!1,this._bIsPlaying=!0;var e=this;this._oTimer.start(function(){var t=!e._doTask();return t&&(e._bIsWaiting=!0,setTimeout(function(){e._prepareNextTask()},0)),!t},this._htTaskToDo.nInterval)}return this},precede:function(e,t,n){return this.start.apply(this,arguments),this},sleep:function(e,t){return typeof t=="undefined"&&(t=function(){}),this._queueTask({sType:"sleep",nDuration:e,fCallback:t}),this._prepareNextTask(),this},_queueTask:function(e){this._aTaskQueue.push(e)},_dequeueTask:function(){var e=this._aTaskQueue.shift();if(e){if(e.sType=="task"){var t=e.aList;for(var n=0,r=t.length;n<r;n++){var i=t[n].elTarget;for(var s=0,o=t[n].aValue,u=o.length;s<u;s++){var a=o[s][0],f=o[s][2];typeof f!="function"&&(f instanceof Array?f=this.option("fEffect")(f[0],f[1]):f=this.option("fEffect")(f));if(f.setStart)if(this._isHTMLElement(i)){var l=jindo.$Element(i);switch(a){case"style":f.setStart(l.css(o[s][1]));break;case"attr":f.setStart(l.$value()[o[s][1]])}}else f.setStart(i.getter(o[s][1]));o[s][2]=f}}}return e}return null},_prepareNextTask:function(){if(this._bIsWaiting){var e=this._dequeueTask();if(e)switch(e.sType){case"task":this._bIsPlaying||this.fireEvent("start");var t=1e3/this._nFPS,n=t/e.nDuration;this._htTaskToDo={aList:e.aList,nRatio:0,nInterval:t,nGap:n,nStep:0,nTotalStep:Math.ceil(e.nDuration/t)},this.resume();break;case"function":this._bIsPlaying||this.fireEvent("start"),e.fTask(),this._prepareNextTask();break;case"sleep":this._bIsPlaying&&(this.fireEvent("sleep",{nDuration:e.nDuration}),e.fCallback());var r=this;setTimeout(function(){r.fireEvent("awake"),r._prepareNextTask()},e.nDuration)}else this._bIsPlaying&&(this._bIsPlaying=!1,this.abort(),this.fireEvent("end"))}},_isHTMLElement:function(e){return"tagName"in e},_doTask:function(){var e=this._htTaskToDo,t=parseFloat(e.nRatio.toFixed(5),1),n=e.nStep,r=e.nTotalStep,i=e.aList,s={},o=this.option("bCorrection");for(var u=0,a=i.length;u<a;u++){var f=i[u].elTarget;for(var l=0,c=i[u].aValue,h=c.length;l<h;l++){var p=c[l][0],d=c[l][1],v=c[l][2](t);if(this._isHTMLElement(f)){var m=jindo.$Element(f);if(o){var g=/^[0-9]*([^0-9]*)$/.test(v)&&RegExp.$1||"";if(g){var y=parseFloat(v),b;y+=s[d]||0,y=parseFloat(y.toFixed(5)),u==a-1?v=Math.round(y)+g:(b=parseFloat(/(\.[0-9]+)$/.test(y)&&RegExp.$1||0),v=parseInt(y,10)+g,s[d]=b)}}switch(p){case"style":m.css(d,v);break;case"attr":m.$value()[d]=v}}else f.setter(d,v);this._bIsPlaying&&this.fireEvent("playing",{element:f,sKey:d,sValue:v,nStep:n,nTotalStep:r})}}return e.nRatio=Math.min(e.nRatio+e.nGap,1),e.nStep+=1,t!=1}}).extend(jindo.Component),function(){var e=jindo.$Element.prototype.css;jindo.$Element.prototype.css=function(t,n){return t=="opacity"?typeof n!="undefined"?this.opacity(parseFloat(n)):this.opacity():typeof n!="undefined"?e.call(this,t,n):e.call(this,t)}}(),jindo.Effect=function(e){if(this instanceof arguments.callee)throw new Error("You can't create a instance of this");var t=/^(\-?[0-9\.]+)(%|px|pt|em)?$/,n=/^rgb\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+)\)$/i,r=/^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,i=/^#([0-9A-F])([0-9A-F])([0-9A-F])$/i,s=function(e){var s=e,o;return t.test(e)?(s=parseFloat(e),o=RegExp.$2):n.test(e)?(s=[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10)],o="color"):r.test(e=e.replace(i,"#$1$1$2$2$3$3"))&&(s=[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16)],o="color"),{nValue:s,sUnit:o}};return function(t,n){var r;arguments.length>1?(t=s(t),n=s(n),r=n.sUnit):(n=s(t),t=null,r=n.sUnit);if(t&&n&&t.sUnit!=n.sUnit)throw new Error("unit error");t=t&&t.nValue,n=n&&n.nValue;var i=function(i){var s=e(i),o=function(e,t){return(t-e)*s+e+r};if(r=="color"){var u=parseInt(o(t[0],n[0]),10)<<16;u|=parseInt(o(t[1],n[1]),10)<<8,u|=parseInt(o(t[2],n[2]),10),u=u.toString(16).toUpperCase();for(var a=0;6-u.length;a++)u="0"+u;return"#"+u}return o(t,n)};return t===null&&(i.setStart=function(e){e=s(e);if(e.sUnit!=r)throw new Error("unit eror");t=e.nValue}),i}},jindo.Effect.linear=jindo.Effect(function(e){return e}),jindo.Effect.easeIn=jindo.Effect(function(e){return 1-Math.sqrt(1-e*e)}),jindo.Effect.easeOut=jindo.Effect(function(e){return Math.sqrt((2-e)*e)}),jindo.Effect.bounce=jindo.Effect(function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),jindo.Effect._cubicBezier=function(e,t,n,r){return function(i){function p(e){return((u*e+o)*e+s)*e}function v(e){return((h*e+l)*e+f)*e}function m(e,t){var n=0,r=1,i=e,a,f;for(var l=0;l<8;l++){a=p(i)-e;if(Math.abs(a)<t)return i;f=(3*u*i+2*o)*i+s;if(Math.abs(f)<1e-6)break;i-=a/f}if(i<n)return n;if(i>r)return r;while(n<r){a=p(i);if(Math.abs(a-e)<t)return i;e>a?n=i:r=i,i=(r-n)*.5+n}return i}var s=3*e,o=3*(n-e)-s,u=1-s-o,f=3*t,l=3*(r-t)-f,h=1-f-l;return v(m(i,.001))}},jindo.Effect.cubicBezier=function(e,t,n,r){return jindo.Effect(jindo.Effect._cubicBezier(e,t,n,r))},jindo.Effect.overphase=jindo.Effect.cubicBezier(.25,.75,.8,1.3),jindo.Effect.easeInOut=jindo.Effect.cubicBezier(.75,0,.25,1),jindo.Effect.easeOutIn=jindo.Effect.cubicBezier(.25,.75,.75,.25),jindo.Effect.cubicEase=jindo.Effect.cubicBezier(.25,.1,.25,1),jindo.Effect.cubicEaseIn=jindo.Effect.cubicBezier(.42,0,1,1),jindo.Effect.cubicEaseOut=jindo.Effect.cubicBezier(0,0,.58,1),jindo.Effect.cubicEaseInOut=jindo.Effect.cubicBezier(.42,0,.58,1),jindo.Effect.cubicEaseOutIn=jindo.Effect.cubicBezier(0,.42,1,.58),jindo.Effect.pulse=function(e){return jindo.Effect(function(t){return-Math.cos(t*(e-.5)*2*Math.PI)/2+.5})},jindo.FileUploader=jindo.$Class({_bIsActivating:!1,_aHiddenInput:[],$init:function(e,t){var n={sUrl:"",sCallback:"",htData:{},sFiletype:"*",sMsgNotAllowedExt:"\uc5c5\ub85c\ub4dc\uac00 \ud5c8\uc6a9\ub418\uc9c0 \uc54a\ub294 \ud30c\uc77c\ud615\uc2dd\uc785\ub2c8\ub2e4",bAutoUpload:!1,bAutoReset:!0,bActivateOnload:!0};this.option(n),this.option(t||{}),this._el=jindo.$(e),this._wel=jindo.$Element(this._el),this._elForm=this._el.form,this._aHiddenInput=[],this.constructor._oCallback={},this._wfChange=jindo.$Fn(this._onFileSelectChange,this),this._sFunctionName=null,this.option("bActivateOnload")&&this.activate()},_appendIframe:function(){var e="tmpFrame_"+this._makeUniqueId();this._welIframe=jindo.$Element(jindo.$('<iframe name="'+e+'" src="">')).css({position:"absolute",width:"1px",height:"1px",left:"-100px",top:"-100px"}),document.body.appendChild(this._welIframe.$value())},_removeIframe:function(){this._welIframe&&this._welIframe.leave()},getBaseElement:function(){return this.getFileSelect()},getFileSelect:function(){return this._el},getFormElement:function(){return this._elForm},upload:function(){this._appendIframe();var e=this.getFormElement(),t=jindo.$Element(e),n=this._welIframe.attr("name"),r=this._sFunctionName=n+"_func",i=this.option("sUrl");t.attr({target:n,action:i}),this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:"callback",value:this.option("sCallback")})),this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:"callback_func",value:r}));for(var s in this.option("htData"))this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:s,value:this.option("htData")[s]}));for(var o=0;o<this._aHiddenInput.length;o++)e.appendChild(this._aHiddenInput[o]);this.constructor._oCallback[r+"_success"]=jindo.$Fn(function(e){this.option("bAutoReset")&&this.reset(),this._revertFormAttr(),this.fireEvent("success",{htResult:e}),this._clear()},this).bind(),this.constructor._oCallback[r+"_error"]=jindo.$Fn(function(e){this.option("bAutoReset")&&this.reset(),this._revertFormAttr(),this.fireEvent("error",{htResult:e}),this._clear()},this).bind(),e.submit()},reset:function(){var e=jindo.$("<form>");this._wel.wrap(e),e.reset(),jindo.$Element(e).replace(this._el);var t=jindo.$Agent().navigator();if(t.ie&&t.version<=10){var n=this.getFormElement();n.type="radio",n.type="file"}return this._clear(),this},_revertFormAttr:function(){var e=this.getFormElement(),t=jindo.$Element(e);t.attr({target:this._sPrevTarget,action:this._sAction})},_onActivate:function(){var e=this.getFormElement(),t=jindo.$Element(e);this._sPrevTarget=t.attr("target"),this._sAction=t.attr("action"),this._el.value="",this._wfChange.attach(this._el,"change")},_onDeactivate:function(){this._wfChange.detach(this._el,"change")},_makeUniqueId:function(){return(new Date).getMilliseconds()+Math.floor(Math.random()*1e5)},_createElement:function(e,t){var n=jindo.$("<"+e+">"),r=jindo.$Element(n);for(var i in t)r.attr(i,t[i]);return n},_checkExtension:function(e){var t=this.option("sFiletype").split(";");for(var n=0,r;n<t.length;n++){r=t[n]=="*.*"?"*":t[n],r=r.replace(/^\s+|\s+$/,""),r=r.replace(/\./g,"\\."),r=r.replace(/\*/g,"[^\\/]+");if((new RegExp(r+"$","gi")).test(e))return!0}return!1},_onFileSelectChange:function(e){var t=e.element.value,n=this._checkExtension(t),r={sValue:t,bAllowed:n,sMsgNotAllowedExt:this.option("sMsgNotAllowedExt")};t.length&&this.fireEvent("select",r)&&(n?this.option("bAutoUpload")&&this.upload():alert(r.sMsgNotAllowedExt))},_clear:function(){this._sFunctionName!=null&&(delete this.constructor._oCallback[this._sFunctionName+"_success"],delete this.constructor._oCallback[this._sFunctionName+"_error"],this._sFunctionName=null);for(var e=0,t=this._aHiddenInput.length;e<t;e++)jindo.$Element(this._aHiddenInput[e]).leave();this._aHiddenInput.length=0,this._removeIframe()}}).extend(jindo.UIComponent),jindo.MultipleAjaxRequest=jindo.$Class({_bIsRequesting:!1,$init:function(e){var t={sMode:"parallel"};this.option(t),this.option(e)},isRequesting:function(){return this._bIsRequesting},request:function(e,t){if(this.isRequesting())return!1;e instanceof Array||(e=[e]),typeof t=="undefined"&&(t={}),this._htMetaData=t;switch(this.option("sMode")){case"parallel":this._parallelRequest(e);break;case"serial":this._serialRequest(e);break;default:return!1}return!0},_fireEventStart:function(){return this._bIsRequesting=!0,this.fireEvent("start",{aAjax:this._aAjax,htMetaData:this._htMetaData})?!0:(this.abort(),!1)},_fireEventBeforeEachRequest:function(e){return this.fireEvent("beforeEachRequest",{oAjax:this._aAjax[e],nIndex:e})?!0:(this.abort(),!1)},_fireEventAfterEachResponse:function(e){return this.fireEvent("afterEachResponse",{oAjax:this._aAjax[e],nIndex:e})?!0:(this.abort(),!1)},_parallelRequest:function(e){this._aAjaxData=e,this._aAjax=[],this._aStatus=[],this._aStatus.length=e.length,this._aResponse=[];if(this._fireEventStart()){var t=this;jindo.$A(this._aAjaxData).forEach(function(e,n){var r=function(e){e._constructor=t._aAjax[n];var r=t._findAjaxObjectIndexOfResponse(e._constructor);t._aResponse[r]=e,t._aStatus[r]=!0,t._fireEventAfterEachResponse(r)&&t._hasCompletedGotResponsesOfParallelResponses()&&t._complete()};t._aAjax.push(jindo.$Ajax(e.sUrl,e.htOption)),e.htOption.onload=r,e.htOption.onerror=r,e.htOption.ontimeout=r,t._aAjax[n].option(e.htOption),t._fireEventBeforeEachRequest(n)?t._aAjax[n].request(e.htParameter):jindo.$A.Break()})}},_findAjaxObjectIndexOfResponse:function(e){return jindo.$A(this._aAjax).indexOf(e)},_hasCompletedGotResponsesOfParallelResponses:function(){var e=!0;return jindo.$A(this._aStatus).forEach(function(t){t||(e=!1,jindo.$A.Break())}),e},_serialRequest:function(e){this._aAjaxData=e,this._aAjax=[],this._aStatus=[],this._aStatus.length=e.length,this._aResponse=[];var t=this;jindo.$A(this._aAjaxData).forEach(function(e,n){var r=function(e){e._constructor=t._aAjax[n],t._aResponse.push(e),t._serialRequestNext()};t._aAjax.push(jindo.$Ajax(e.sUrl,e.htOption)),e.htOption.onload=r,e.htOption.onerror=r,e.htOption.ontimeout=r,t._aAjax[n].option(e.htOption)}),this._fireEventStart()&&this._fireEventBeforeEachRequest(0)&&(this._aAjax[0].request(this._aAjaxData[0].htParameter),this._aStatus[0]=!0)},_serialRequestNext:function(){var e=-1;for(var t=0;t<this._aStatus.length;t++)if(!this._aStatus[t]){this._aStatus[t]=!0,e=t;break}e>0?this._fireEventAfterEachResponse(e-1)&&this._fireEventBeforeEachRequest(e)&&this._aAjax[e].request(this._aAjaxData[e].htParameter):e==-1&&this._fireEventAfterEachResponse(this._aStatus.length-1)&&this._complete()},_reset:function(){this._aAjaxData.length=0,this._aAjax.length=0,this._aStatus.length=0,this._aResponse.length=0,this._htMetaData=null,delete this._aAjaxData,delete this._aAjax,delete this._aStatus,delete this._aResponse,delete this._htMetaData,this._bIsRequesting=!1},abort:function(){jindo.$A(this._aAjax).forEach(function(e){e.abort()}),this._reset()},_complete:function(){var e=this._aResponse.concat(),t={},n;for(n in this._htMetaData)t[n]=this._htMetaData[n];this._reset(),this.fireEvent("complete",{aResponse:e,htMetaData:t})}}).extend(jindo.Component),jindo.RolloverClick=jindo.$Class({$init:function(e,t){this.option({bActivateOnload:!0,sCheckEvent:"click",bCheckDblClick:!1,RolloverArea:{sClassName:"rollover",sClassPrefix:"rollover-",bCheckMouseDown:!1,bActivateOnload:!1,htStatus:{sOver:"over",sDown:"down"}}}),this.option(t||{});var n=this;this._oRolloverArea=(new jindo.RolloverArea(e,this.option("RolloverArea"))).attach({over:function(e){n.fireEvent("over",e)||e.stop()},out:function(e){n.fireEvent("out",e)||e.stop()}}),this._wfClick=jindo.$Fn(this._onClick,this),this._wfDblClick=jindo.$Fn(this._onClick,this),this.option("bActivateOnload")&&this.activate()},_onClick:function(e){var t=e.element,n="click";e.type=="dblclick"&&(n=e.type);while(t=this._oRolloverArea._findRollover(t))this.fireEvent(n,{element:t,htStatus:this._oRolloverArea.option("htStatus"),weEvent:e}),t=t.parentNode},_onActivate:function(){this._wfClick.attach(this._oRolloverArea._elArea,this.option("sCheckEvent")),this.option("bCheckDblClick")&&this._wfDblClick.attach(this._oRolloverArea._elArea,"dblclick"),this._oRolloverArea.activate()},_onDeactivate:function(){this._wfClick.detach(this._oRolloverArea._elArea,this.option("sCheckEvent")),this._wfDblClick.detach(this._oRolloverArea._elArea,"dblclick"),this._oRolloverArea.deactivate()}}).extend(jindo.UIComponent),jindo.Pagination=jindo.$Class({$init:function(e,t){this._elPageList=jindo.$(e),this._welPageList=jindo.$Element(this._elPageList),this._waPage=jindo.$A([]),this._fClickPage=jindo.$Fn(this._onClickPageList,this),this.option({bActivateOnload:!0,nItem:10,nItemPerPage:10,nPagePerPageList:10,nPage:1,sMoveUnit:"pagelist",bAlignCenter:!1,sInsertTextNode:"",sClassFirst:"first-child",sClassLast:"last-child",sPageTemplate:"<a href='#'>{=page}</a>",sCurrentPageTemplate:"<strong>{=page}</strong>",elFirstPageLinkOn:jindo.$$.getSingle("a.pre_end",this._elPageList),elPrevPageLinkOn:jindo.$$.getSingle("a.pre",this._elPageList),elNextPageLinkOn:jindo.$$.getSingle("a.next",this._elPageList),elLastPageLinkOn:jindo.$$.getSingle("a.next_end",this._elPageList),elFirstPageLinkOff:jindo.$$.getSingle("span.pre_end",this._elPageList),elPrevPageLinkOff:jindo.$$.getSingle("span.pre",this._elPageList),elNextPageLinkOff:jindo.$$.getSingle("span.next",this._elPageList),elLastPageLinkOff:jindo.$$.getSingle("span.next_end",this._elPageList)}),this.option(t||{}),this.option("bActivateOnload")&&this.activate()},getBaseElement:function(){return this._elPageList},getItemCount:function(){return this.option("nItem")},setItemCount:function(e){this.option({nItem:e})},getItemPerPage:function(){return this.option("nItemPerPage")},setItemPerPage:function(e){this.option("nItemPerPage",e)},getCurrentPage:function(){return this._nCurrentPage},getFirstItemOfPage:function(e){return this.getItemPerPage()*(e-1)+1},getPageOfItem:function(e){return Math.ceil(e/this.getItemPerPage())},_getLastPage:function(){return Math.ceil(this.getItemCount()/this.getItemPerPage())},_getRelativePage:function(e){var t=null;if(this.option("sMoveUnit")=="page")switch(e){case"pre":t=this.getCurrentPage()-1;break;case"next":t=this.getCurrentPage()+1}else{var n=this._getPageList(this.getCurrentPage());switch(e){case"pre_end":t=1;break;case"pre":var r=(n-1)*this.option("nPagePerPageList");t=r;break;case"next":var i=n*this.option("nPagePerPageList")+1;t=i;break;case"next_end":t=this._getLastPage()}}return t},_getPageList:function(e){if(this.option("bAlignCenter")){var t=Math.floor(this.option("nPagePerPageList")/2),n=e-t;return n=Math.max(n,1),n=Math.min(n,this._getLastPage()),n}return Math.ceil(e/this.option("nPagePerPageList"))},_isIn:function(e,t){return t?e===t?!0:jindo.$Element(e).isChildOf(t):!1},_getPageElement:function(e){for(var t=0,n=this._waPage.$value().length;t<n;t++){var r=this._waPage.get(t);if(this._isIn(e,r))return r}return null},_onClickPageList:function(e){e.stop(jindo.$Event.CANCEL_DEFAULT);var t=null,n=this.option(),r=e.element;if(this._isIn(r,n.elFirstPageLinkOn))t=this._getRelativePage("pre_end");else if(this._isIn(r,n.elPrevPageLinkOn))t=this._getRelativePage("pre");else if(this._isIn(r,n.elNextPageLinkOn))t=this._getRelativePage("next");else if(this._isIn(r,n.elLastPageLinkOn))t=this._getRelativePage("next_end");else{var i=this._getPageElement(r);if(!i)return;t=parseInt(jindo.$Element(i).text(),10)}this.movePageTo(t)},_convertToAvailPage:function(e){var t=this._getLastPage();return e=Math.max(e,1),e=Math.min(e,t),e},movePageTo:function(e,t){typeof t=="undefined"&&(t=!0),e=this._convertToAvailPage(e),this._nCurrentPage=e;if(t&&!this.fireEvent("beforeMove",{nPage:e}))return;this._paginate(e),t&&this.fireEvent("move",{nPage:e})},reset:function(e){typeof e=="undefined"&&(e=this.option("nItem")),this.setItemCount(e),this.movePageTo(1,!1)},_onActivate:function(){this._fClickPage.attach(this._elPageList,"click"),this.setItemCount(this.option("nItem")),this.movePageTo(this.option("nPage"),!1),this._welPageList.addClass("loaded")},_onDeactivate:function(){this._fClickPage.detach(this._elPageList,"click"),this._welPageList.removeClass("loaded")},_addTextNode:function(){var e=this.option("sInsertTextNode");this._elPageList.appendChild(document.createTextNode(e))},_paginate:function(e){this._empty(),this._addTextNode();var t=this.option(),n=t.elFirstPageLinkOn,r=t.elPrevPageLinkOn,i=t.elNextPageLinkOn,s=t.elLastPageLinkOn,o=t.elFirstPageLinkOff,u=t.elPrevPageLinkOff,a=t.elNextPageLinkOff,f=t.elLastPageLinkOff,l=this._getLastPage(),c=this._getPageList(e),h=this._getPageList(l);l===0?this._welPageList.addClass("no-result"):l==1?this._welPageList.addClass("only-one"):this._welPageList.removeClass("only-one").removeClass("no-result");var p,d;if(t.bAlignCenter){var v=Math.floor(t.nPagePerPageList/2);p=e-v,p=Math.max(p,1),d=p+t.nPagePerPageList-1,d>l&&(p=l-t.nPagePerPageList+1,p=Math.max(p,1),d=l)}else p=(c-1)*t.nPagePerPageList+1,d=c*t.nPagePerPageList,d=Math.min(d,l);t.sMoveUnit=="page"&&(c=e,h=l),e>1?n&&(this._welPageList.append(n),this._addTextNode()):o&&(this._welPageList.append(o),this._addTextNode()),c>1?r&&(this._welPageList.append(r),this._addTextNode()):u&&(this._welPageList.append(u),this._addTextNode());var m,g;for(var y=p;y<=d;y++)y==e?m=jindo.$(jindo.$Template(t.sCurrentPageTemplate).process({page:y.toString()})):(m=jindo.$(jindo.$Template(t.sPageTemplate).process({page:y.toString()})),this._waPage.push(m)),g=jindo.$Element(m),y==p&&g.addClass(this.option("sClassFirst")),y==d&&g.addClass(this.option("sClassLast")),this._welPageList.append(m),this._addTextNode();c<h?i&&(this._welPageList.append(i),this._addTextNode()):a&&(this._welPageList.append(a),this._addTextNode()),e<l?s&&(this._welPageList.append(s),this._addTextNode()):f&&(this._welPageList.append(f),this._addTextNode())},_empty:function(){var e=this.option(),t=e.elFirstPageLinkOn,n=e.elPrevPageLinkOn,r=e.elNextPageLinkOn,i=e.elLastPageLinkOn,s=e.elFirstPageLinkOff,o=e.elPrevPageLinkOff,u=e.elNextPageLinkOff,a=e.elLastPageLinkOff;t=this._clone(t),n=this._clone(n),i=this._clone(i),r=this._clone(r),s=this._clone(s),o=this._clone(o),a=this._clone(a),u=this._clone(u),this._waPage.empty(),this._welPageList.empty()},_clone:function(e){return e&&typeof e.cloneNode=="function"?e.cloneNode(!0):e}}).extend(jindo.UIComponent),jindo.DatePicker=jindo.$Class({_aDatePickerSet:[],_htSelectedDatePickerSet:null,$init:function(e,t){var n=new Date;this.htDefaultOption={bUseLayerPosition:!0,Calendar:{sClassPrefix:"calendar-",nYear:n.getFullYear(),nMonth:n.getMonth()+1,nDate:n.getDate(),sTitleFormat:"yyyy-mm",aMonthTitle:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"]},LayerManager:{sCheckEvent:"click",nShowDelay:0,nHideDelay:0},LayerPosition:{sPosition:"outside-bottom",sAlign:"left",nTop:0,nLeft:0,bAuto:!1}},this.option(this.htDefaultOption),this.option(t),this._elCalendarLayer=jindo.$(e),this._initCalendar(),this._initLayerManager(),this._initLayerPosition(),this._wfFocusInput=jindo.$Fn(this._onFocusInput,this),this._wfClickLinkedElement=jindo.$Fn(this._onClickLinkedElement,this),this._wfMouseOverOutDate=jindo.$Fn(this._onMouseOverOutDate,this),this._wfClickDate=jindo.$Fn(this._onClickDate,this),this.activate()},addDatePickerSet:function(e){var t=this.option(),n=this.getCalendar().option(),r={nYear:n.nYear,nMonth:n.nMonth,nDate:n.nDate,bDefaultSet:!0,bReadOnly:!0,sDateFormat:"yyyy-mm-dd",htSelectableDateFrom:{nYear:1900,nMonth:1,nDate:1},htSelectableDateTo:{nYear:2100,nMonth:12,nDate:31}};if(typeof e.htOption!="undefined")for(var i in e.htOption)typeof r[i]!="undefined"&&(r[i]=e.htOption[i]);e.htOption=r,this._aDatePickerSet.push(e);var s=this.getLayerManager();return typeof e.elInput!="undefined"&&(s.link(e.elInput),e.htOption.bReadOnly&&(e.elInput.readOnly=!0),this._wfFocusInput.attach(e.elInput,"focus"),this._wfClickLinkedElement.attach(e.elInput,"click")),typeof e.elButton!="undefined"&&(s.link(e.elButton),this._wfClickLinkedElement.attach(e.elButton,"click")),e.htOption.bDefaultSet&&this._setDate(e,e.htOption),this},removeDatePickerSet:function(e){var t=-1;for(var n=0,r=this._aDatePickerSet.length;n<r;n++)if(this._aDatePickerSet[n].elInput==e.elInput||this._aDatePickerSet[n].elButton==e.elButton){t=n;break}var i=this._aDatePickerSet[t],s=this.getLayerManager();return typeof i.elButton!="undefined"&&(s.unlink(i.elButton),this._wfClickLinkedElement.detach(i.elButton,"click")),typeof i.elInput!="undefined"&&(this._wfFocusInput.detach(i.elInput,"focus"),this._wfClickLinkedElement.detach(i.elInput,"click"),i.elInput.readOnly=!1),i==this._htSelectedDatePickerSet&&(this._htSelectedDatePickerSet=null),this._aDatePickerSet.splice(n,1),this},getDatePickerSet:function(e){if(typeof e=="undefined")return this._aDatePickerSet;for(var t=0,n=this._aDatePickerSet.length;t<n;t++)if(this._aDatePickerSet[t].elInput==e||this._aDatePickerSet[t].elButton==e)return this._aDatePickerSet[t];return!1},getCalendarLayer:function(){return this._elCalendarLayer},_initCalendar:function(){var e=this;this._oCalendar=(new jindo.Calendar(this.getCalendarLayer(),this.option("Calendar"))).attach({beforeDraw:function(t){e.fireEvent("beforeDraw",t)||t.stop()},draw:function(t){var n=this.option("sClassPrefix"),r=e._htSelectedDatePickerSet;e.isSelectable(r,t)?(t.bSelectable=!0,jindo.Calendar.isSameDate(t,r)&&jindo.$Element(t.elDateContainer).addClass(n+"selected")):(t.bSelectable=!1,jindo.$Element(t.elDateContainer).addClass(this.option("sClassPrefix")+"unselectable")),e.fireEvent("draw",t)||t.stop()},afterDraw:function(t){e.fireEvent("afterDraw",t)}})},getCalendar:function(){return this._oCalendar},_initLayerManager:function(){var e=this,t=this.getCalendarLayer();this._oLayerManager=(new jindo.LayerManager(t,this.option("LayerManager"))).attach({hide:function(t){e._htSelectedDatePickerSet=null}}).link(t)},getLayerManager:function(){return this._oLayerManager},_initLayerPosition:function(){this.option("bUseLayerPosition")&&(this._oLayerPosition=new jindo.LayerPosition(null,this.getCalendarLayer(),this.option("LayerPosition")))},getLayerPosition:function(){return this._oLayerPosition},getInput:function(e){return e.elInput||null},setInput:function(e,t){this._setDate(e,t)},getDate:function(e){return{nYear:e.nYear,nMonth:e.nMonth,nDate:e.nDate}},_setDate:function(e,t){e.nYear=t.nYear*1,e.nMonth=t.nMonth*1,e.nDate=t.nDate*1,typeof e.elInput!="undefined"&&(e.elInput.value=this._getDateFormat(e,t))},isSelectable:function(e,t){return jindo.Calendar.isBetween(t,e.htOption.htSelectableDateFrom,e.htOption.htSelectableDateTo)},setDate:function(e,t){if(this.isSelectable(e,t)){var n=this._getDateFormat(e,t),r={sText:n,nYear:t.nYear,nMonth:t.nMonth,nDate:t.nDate};return this.fireEvent("beforeSelect",r)&&(this._setDate(e,t),this.fireEvent("select",r)&&this.getLayerManager().hide()),!0}return!1},_getDateFormat:function(e,t){var n=t.nYear,r=t.nMonth,i=t.nDate;r<10&&(r=("0"+r*1).toString()),i<10&&(i=("0"+i*1).toString());var s=e.htOption.sDateFormat;return s=s.replace(/yyyy/g,n).replace(/y/g,n.toString().substr(2,2)).replace(/mm/g,r).replace(/m/g,r*1).replace(/M/g,this.getCalendar().option("aMonthTitle")[r-1]).replace(/dd/g,i).replace(/d/g,i*1),s},_linkOnly:function(e){var t=this.getLayerManager();t.setLinks([this.getCalendarLayer()]),typeof e.elInput!="undefined"&&t.link(e.elInput),typeof e.elButton!="undefined"&&t.link(e.elButton)},_onActivate:function(){var e=this.getCalendarLayer();this._wfMouseOverOutDate.attach(e,"mouseover").attach(e,"mouseout"),this._wfClickDate.attach(e,"click"),this.getLayerManager().activate(),this.getCalendar().activate()},_onDeactivate:function(){var e=this.getCalendarLayer();this._wfMouseOverOutDate.detach(e,"mouseover").detach(e,"mouseout"),this._wfClickDate.detach(e,"click").detach(e,"mouseover").detach(e,"mouseout"),this.getLayerManager().deactivate(),this.getCalendar().deactivate()},attachEvent:function(){return this.activate()},detachEvent:function(){return this.deactivate()},addButton:function(){return this},_onFocusInput:function(e){this.fireEvent("focus")},_onClickLinkedElement:function(e){e.stop(jindo.$Event.CANCEL_DEFAULT);if(this.fireEvent("click",{element:e.element})){var t=this.getDatePickerSet(e.currentElement);if(t){this._htSelectedDatePickerSet=t,this._linkOnly(t),t.nYear||(t.nYear=t.htOption.nYear),t.nMonth||(t.nMonth=t.htOption.nMonth),t.nDate||(t.nDate=t.htOption.nDate);var n=t.nYear,r=t.nMonth;this.getCalendar().draw(n,r),this.getLayerManager().show(),this.option("bUseLayerPosition")&&(typeof t.elLayerPosition!="undefined"?this.getLayerPosition().setElement(t.elLayerPosition).setPosition():this.getLayerPosition().setElement(t.elInput).setPosition())}}},_getTargetDateElement:function(e){var t=this.getCalendar().option("sClassPrefix"),n=jindo.$Element(e).hasClass(t+"date")?e:jindo.$$.getSingle("."+t+"date",e);return!n||n!=e&&n.length!=1?null:n},_getTargetDateContainerElement:function(e){var t=this.getCalendar().option("sClassPrefix"),n=jindo.$$.getSingle("! ."+t+"week",e);if(n){var r=e;while(!jindo.$Element(r.parentNode).hasClass(t+"week"))r=r.parentNode;return jindo.$Element(r).hasClass(t+"unselectable")?null:r}return null},_onMouseOverOutDate:function(e){e.stop(jindo.$Event.CANCEL_DEFAULT);var t=this.getCalendar().option("sClassPrefix"),n=e.element,r=this._getTargetDateContainerElement(n);if(r){var i=this.getCalendar().getDateOfElement(r);if(this._htSelectedDatePickerSet&&this.isSelectable(this._htSelectedDatePickerSet,i)){if(e.type=="mouseover"){this._elSelected||(this._elSelected=jindo.$$.getSingle("."+t+"selected",this.elWeekAppendTarget),this._elSelected&&jindo.$Element(this._elSelected).removeClass(t+"selected")),jindo.$Element(r).addClass(t+"over");return}if(e.type=="mouseout"){jindo.$Element(r).removeClass(t+"over");return}}else this._elSelected&&(jindo.$Element(this._elSelected).addClass(t+"selected"),this._elSelected=null)}else this._elSelected&&(jindo.$Element(this._elSelected).addClass(t+"selected"),this._elSelected=null)},_onClickDate:function(e){e.stop(jindo.$Event.CANCEL_DEFAULT);var t=e.element,n=this._getTargetDateElement(t);if(n){var r=this._getTargetDateContainerElement(n);if(r){var i=this.getCalendar().getDateOfElement(r);this.isSelectable(this._htSelectedDatePickerSet,i)&&this.setDate(this._htSelectedDatePickerSet,i)}}}}).extend(jindo.UIComponent),jindo.StarRating=jindo.$Class({$init:function(e,t){var n={nStep:1,nMaxValue:10,nDefaultValue:0,bSnap:!1,bActivateOnload:!0};this.option(n),this.option(t||{}),this._el=jindo.$(e),this._wel=jindo.$Element(e),this._assignHTMLElements(),this._wfMouseMove=jindo.$Fn(this._onMouseMove,this),this._wfMouseLeave=jindo.$Fn(this._onMouseLeave,this),this._wfClick=jindo.$Fn(this._onClick,this),this.option("bActivateOnload")&&this.activate()},_assignHTMLElements:function(){this._elRatingElement=jindo.$$.getSingle("span",this.getBaseElement()),this._welRatingElement=jindo.$Element(this._elRatingElement)},getBaseElement:function(){return this._el},getRatingElement:function(){return this._elRatingElement},getValue:function(){return this._nValue},getValueByWidth:function(){return this._welRatingElement.width()/this._nBaseWidth*this.option("nMaxValue")},getValueToBeSet:function(e){return e=this._round(e,this.option("nStep")),e=Math.min(e,this.option("nMaxValue")),e=Math.max(e,0),e},setValue:function(e,t){typeof t=="undefined"&&(t=!0);var n=this.option("nMaxValue");e=this.getValueToBeSet(e);var r=this._nBaseWidth*e/n;return r=Math.min(r,this._nBaseWidth),this._welRatingElement.width(r),this._nValue=e,t&&this.fireEvent("set",{nValue:this._nValue}),this},reset:function(){var e=this.option("nDefaultValue")||0;return this.setValue(e,!1),this},_round:function(e,t){var n=e,r=Math.floor(e),i=r+1,s=1,o,u,a;for(u=r;u<=i;u+=t)o=Math.abs(e-u),o<=s&&(s=o,n=u);return n.toFixed(Math.max(t.toString().length-2,0))},_onActivate:function(){var e=this.getBaseElement();this._wfMouseMove.attach(e,"mousemove"),this._wfMouseLeave.attach(e,"mouseleave"),this._wfClick.attach(e,"click"),this._nBaseWidth=this._wel.width(),this.reset()},_onDeactivate:function(){var e=this.getBaseElement();this._wfMouseMove.detach(e,"mousemove"),this._wfMouseLeave.detach(e,"mouseleave"),this._wfClick.detach(e,"click")},_onMouseMove:function(e){var t=e.pos(!0).offsetX+1,n=t>this._nBaseWidth?this._nBaseWidth:t,r;this.option("bSnap")&&(r=t/this._nBaseWidth*this.option("nMaxValue"),n=this._round(r,this.option("nStep"))*this._nBaseWidth/this.option("nMaxValue"),n=Math.min(n,this._nBaseWidth)),this._welRatingElement.css("width",n+"px"),r=this.getValueByWidth(),this.fireEvent("move",{nValue:r,nValueToBeSet:this.getValueToBeSet(r)})},_onMouseLeave:function(e){this.setValue(this._nValue,!1),this.fireEvent("out")},_onClick:function(e){this.setValue(this.getValueByWidth())}}).extend(jindo.UIComponent),jindo.DragArea=jindo.$Class({$init:function(e,t){this.option({sClassName:"draggable",bFlowOut:!0,bSetCapture:!0,nThreshold:0}),this.option(t||{}),this._el=e,this._bIE=jindo.$Agent().navigator().ie,this._htDragInfo={bIsDragging:!1,bPrepared:!1,bHandleDown:!1,bForceDrag:!1},this._wfOnMouseDown=jindo.$Fn(this._onMouseDown,this),this._wfOnMouseMove=jindo.$Fn(this._onMouseMove,this),this._wfOnMouseUp=jindo.$Fn(this._onMouseUp,this),this._wfOnDragStart=jindo.$Fn(this._onDragStart,this),this._wfOnSelectStart=jindo.$Fn(this._onSelectStart,this),this.activate()},_findDraggableElement:function(e){if(e.nodeType===1&&jindo.$$.test(e,"input[type=text], textarea, select"))return null;var t=this,n="."+this.option("sClassName"),r=function(e){return e===null?!1:t._el===document||t._el===e?!0:jindo.$Element(t._el).isParentOf(e)},i=jindo.$$.test(e,n)?e:jindo.$$.getSingle("! "+n,e);return r(i)||(i=null),i},isDragging:function(){var e=this._htDragInfo;return e.bIsDragging&&!e.bPrepared},stopDragging:function(){return this._stopDragging(!0),this},_stopDragging:function(e){this._wfOnMouseMove.detach(document,"mousemove"),this._wfOnMouseUp.detach(document,"mouseup");if(this.isDragging()){var t=this._htDragInfo,n=jindo.$Element(t.elDrag);t.bIsDragging=!1,t.bForceDrag=!1,t.bPrepared=!1,this._bIE&&this._elSetCapture&&(this._elSetCapture.releaseCapture(),this._elSetCapture=null),this.fireEvent("dragEnd",{elArea:this._el,elHandle:t.elHandle,elDrag:t.elDrag,nX:parseInt(n.css("left"),10)||0,nY:parseInt(n.css("top"),10)||0,bInterupted:e})}},_onActivate:function(){this._wfOnMouseDown.attach(this._el,"mousedown"),this._wfOnDragStart.attach(this._el,"dragstart"),this._wfOnSelectStart.attach(this._el,"selectstart")},_onDeactivate:function(){this._wfOnMouseDown.detach(this._el,"mousedown"),this._wfOnDragStart.detach(this._el,"dragstart"),this._wfOnSelectStart.detach(this._el,"selectstart")},attachEvent:function(){this.activate()},detachEvent:function(){this.deactivate()},isEventAttached:function(){return this.isActivating()},startDragging:function(e){var t=this._findDraggableElement(e);return t?(this._htDragInfo.bForceDrag=!0,this._htDragInfo.bPrepared=!0,this._htDragInfo.elHandle=t,this._htDragInfo.elDrag=t,this._wfOnMouseMove.attach(document,"mousemove"),this._wfOnMouseUp.attach(document,"mouseup"),!0):!1},_onMouseDown:function(e){var t=e.mouse(!0);if(!t.left||t.right||t.scrollbar){this._stopDragging(!0);return}var n=this._findDraggableElement(e.element);if(n){var r=e.pos(),i=this._htDragInfo;i.bHandleDown=!0,i.bPrepared=!0,i.nButton=e._event.button,i.elHandle=n,i.elDrag=n,i.nPageX=r.pageX,i.nPageY=r.pageY,this.fireEvent("handleDown",{elHandle:n,elDrag:n,weEvent:e})&&this._wfOnMouseMove.attach(document,"mousemove"),this._wfOnMouseUp.attach(document,"mouseup"),e.stop(jindo.$Event.CANCEL_DEFAULT)}},_onMouseMove:function(e){var t=this._htDragInfo,n,r,i=e.pos(),s={nX:i.pageX-t.nPageX,nY:i.pageY-t.nPageY};if(t.bPrepared){var o=this.option("nThreshold"),u={};if(!t.bForceDrag&&o){u.nPageX=i.pageX-t.nPageX,u.nPageY=i.pageY-t.nPageY;var a=Math.sqrt(u.nPageX*u.nPageX+u.nPageY*u.nPageY);if(o>a)return}this._bIE&&this.option("bSetCapture")&&(this._elSetCapture=this._el===document?document.body:this._findDraggableElement(e.element),this._elSetCapture&&this._elSetCapture.setCapture(!1)),n={elArea:this._el,elHandle:t.elHandle,elDrag:t.elDrag,htDiff:u,weEvent:e},t.bIsDragging=!0,t.bPrepared=!1;if(!this.fireEvent("dragStart",n)){t.bPrepared=!0;return}var f=jindo.$Element(n.elDrag),l=f.offset();t.elHandle=n.elHandle,t.elDrag=n.elDrag,t.nX=parseInt(f.css("left"),10)||0,t.nY=parseInt(f.css("top"),10)||0,t.nClientX=l.left+f.width()/2,t.nClientY=l.top+f.height()/2}t.bForceDrag&&(s.nX=i.clientX-t.nClientX,s.nY=i.clientY-t.nClientY),n={elArea:this._el,elFlowOut:t.elDrag.parentNode,elHandle:t.elHandle,elDrag:t.elDrag,weEvent:e,nX:t.nX+s.nX,nY:t.nY+s.nY,nGapX:s.nX,nGapY:s.nY};if(this.fireEvent("beforeDrag",n)){var c=t.elDrag;if(this.option("bFlowOut")===!1){var h=n.elFlowOut,p=[c.offsetWidth,c.offsetHeight],d=0,v=0;h==document.body&&(h=null);if(h&&p[0]<=h.scrollWidth&&p[1]<=h.scrollHeight)r={nWidth:h.clientWidth,nHeight:h.clientHeight},d=h.scrollLeft,v=h.scrollTop;else{var m=jindo.$Document().clientSize();r={nWidth:m.width,nHeight:m.height}}n.nX!==null&&(n.nX=Math.max(n.nX,d),n.nX=Math.min(n.nX,r.nWidth-p[0]+d)),n.nY!==null&&(n.nY=Math.max(n.nY,v),n.nY=Math.min(n.nY,r.nHeight-p[1]+v))}n.nX!==null&&(c.style.left=n.nX+"px"),n.nY!==null&&(c.style.top=n.nY+"px"),this.fireEvent("drag",n)}else t.bIsDragging=!1},_onMouseUp:function(e){this._stopDragging(!1);var t=this._htDragInfo;t.bHandleDown=!1,this.fireEvent("handleUp",{weEvent:e,elHandle:t.elHandle,elDrag:t.elDrag})},_onDragStart:function(e){this._findDraggableElement(e.element)&&e.stop(jindo.$Event.CANCEL_DEFAULT)},_onSelectStart:function(e){(this.isDragging()||this._findDraggableElement(e.element))&&e.stop(jindo.$Event.CANCEL_DEFAULT)}}).extend(jindo.UIComponent),jindo.DefaultTextValue=jindo.$Class({$init:function(e,t){this.option({sValue:"",bActivateOnload:!0}),this.option(t||{}),this._elBaseTarget=jindo.$(e),this._wfOnFocusAndBlur=jindo.$Fn(this._onFocusAndBlur,this),this.option("bActivateOnload")&&this.activate()},getBaseElement:function(){return this._elBaseTarget},setDefault:function(){return this.getBaseElement().value=this.option("sValue"),this},setDefaultValue:function(e){var t=this.option("sValue");return this.option("sValue",e),this.getBaseElement().value==t&&this.setDefault(),this},getDefaultValue:function(){return this.option("sValue")},paint:function(){return this},_onActivate:function(){var e=this.getBaseElement();e.value==""&&this.setDefault(),this._wfOnFocusAndBlur.attach(e,"focus").attach(e,"blur")},_onDeactivate:function(){var e=this.getBaseElement();this._wfOnFocusAndBlur.detach(e,"focus").detach(e,"blur")},_onFocusAndBlur:function(e){var t=this._elBaseTarget,n=t.value;switch(e.type){case"focus":n==this.getDefaultValue()&&(t.value="",t.select());break;case"blur":jindo.$S(n).trim().$value()==""&&this.setDefault()}}}).extend(jindo.UIComponent),jindo.NumericStepper=jindo.$Class({_bIsOnFocus:!1,$init:function(e,t){this._el=jindo.$(e),this.option({sClassPrefix:"ns-",bActivateOnload:!0,bUseMouseWheel:!1,nStep:1,nDecimalPoint:0,nMin:-Infinity,nMax:Infinity,nDefaultValue:0,bInputReadOnly:!0}),this.option(t||{}),this._assignHTMLElements(),this._initEventHandlers(),this.option("bActivateOnload")&&this.activate()},_assignHTMLElements:function(){var e=this.option("sClassPrefix");this._elInput=jindo.$$.getSingle("."+e+"input",this._el),this._elPlusButton=jindo.$$.getSingle("."+e+"plus",this._el),this._elMinusButton=jindo.$$.getSingle("."+e+"minus",this._el)},_initEventHandlers:function(){this._wfPlusClick=jindo.$Fn(this._onPlusClick,this),this._wfMinusClick=jindo.$Fn(this._onMinusClick,this),this._wfWheel=jindo.$Fn(this._onWheel,this),this._wfFocus=jindo.$Fn(this._onFocus,this),this._wfBlur=jindo.$Fn(this._onBlur,this)},reset:function(){this._elInput.value=this.option("nDefaultValue").toFixed(this.option("nDecimalPoint"))},getValue:function(){return parseFloat(this._elInput.value)},setValue:function(e){e=e.toFixed(this.option("nDecimalPoint"));var t=this.option("nMin"),n=this.option("nMax"),r={nValue:e,nMin:t,nMax:n};if(e>n||e<t){this.fireEvent("overLimit",r);return}if(!this.fireEvent("beforeChange",r))return;this._elInput.value=r.nValue,this.fireEvent("change",r)},getBaseElement:function(){return this._el},getInputElement:function(){return this._elInput},getPlusElement:function(){return this._elPlusButton},getMinusElement:function(){return this._elMinusButton},isFocused:function(){return this._bIsOnFocus},_onActivate:function(){var e=this.getInputElement();this._wfPlusClick.attach(this.getPlusElement(),"click"),this._wfMinusClick.attach(this.getMinusElement(),"click"),this._wfFocus.attach(e,"focus"),this._wfBlur.attach(e,"blur"),this.option("bUseMouseWheel")&&this._wfWheel.attach(e,"mousewheel"),this._elInput.readOnly=this.option("bInputReadOnly"),this.reset()},_onDeactivate:function(){var e=this.getInputElement();this._wfPlusClick.detach(this.getPlusElement(),"click"),this._wfMinusClick.detach(this.getMinusElement(),"click"),this._wfInputClick.detach(e,"click"),this._wfFocus.detach(e,"focus"),this._wfBlur.detach(e,"blur"),this._wfWheel.detach(e,"mousewheel")},_onMinusClick:function(e){this.setValue(this.getValue()-this.option("nStep"))},_onPlusClick:function(e){this.setValue(this.getValue()+this.option("nStep"))},_onWheel:function(e){this.isFocused()&&(e.stop(jindo.$Event.CANCEL_DEFAULT),e.mouse().delta>0?this._onPlusClick():this._onMinusClick())},_onFocus:function(e){this._bIsOnFocus=!0},_onBlur:function(e){this._bIsOnFocus=!1,this.setValue(this.getValue()),this._elInput.readOnly=this.option("bInputReadOnly")}}).extend(jindo.UIComponent),jindo.LazyLoading={_waLoading:jindo.$A([]),_waLoaded:jindo.$A([]),_whtScript:jindo.$H({}),_whtCallback:jindo.$H({})},jindo.LazyLoading.load=function(e,t,n){typeof t!="function"&&(t=function(){}),this._queueCallback(e,t);if(this._checkIsLoading(e))return!1;if(this._checkAlreadyLoaded(e))return this._doCallback(e),!0;this._waLoading.push(e);var r=this,i=document.getElementsByTagName("head")[0],s=document.createElement("script");return s.type="text/javascript",s.charset=n||"utf-8",s.src=e,this._whtScript.add(e,s),"onload"in s?s.onload=function(){r._waLoaded.push(e),r._waLoading=r._waLoading.refuse(e),r._doCallback(e)}:s.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded")r._waLoaded.push(e),r._waLoading=r._waLoading.refuse(e),r._doCallback(e),this.onreadystatechange=null},i.appendChild(s),!0},jindo.LazyLoading._queueCallback=function(e,t){var n=this._whtCallback.$(e);n?n.push(t):this._whtCallback.$(e,[t])},jindo.LazyLoading._doCallback=function(e){var t=this._whtCallback.$(e).concat();for(var n=0;n<t.length;n++)this._whtCallback.$(e).splice(n,1),t[n]()},jindo.LazyLoading.abort=function(e){if(this._checkIsLoading(e)){var t=this.getScriptElement(e);return this._waLoading=this._waLoading.refuse(e),"onload"in t?t.onload=null:t.onreadystatechange=null,jindo.$Element(t).leave(),this._whtScript.remove(e),this._whtCallback.remove(e),!0}return!1},jindo.LazyLoading._checkAlreadyLoaded=function(e){return this._waLoaded.has(e)},jindo.LazyLoading._checkIsLoading=function(e){return this._waLoading.has(e)},jindo.LazyLoading.getLoaded=function(){return this._waLoaded.$value()},jindo.LazyLoading.getLoading=function(){return this._waLoading.$value()},jindo.LazyLoading.getScriptElement=function(e){return this._whtScript.$(e)||null};