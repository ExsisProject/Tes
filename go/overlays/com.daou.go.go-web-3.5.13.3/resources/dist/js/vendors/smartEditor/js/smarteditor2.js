/**
 * SmartEditor2 NAVER_Library:SE2.8.2.O12056
 * Copyright NAVER Corp. Licensed under LGPL v2
 * See license text at http://dev.naver.com/projects/smarteditor/wiki/LICENSE
 */

function fontProperty(e,t,n,r,i){this.fontId=e,this.fontName=t,this.defaultSize=n,this.fontURL=r,this.fontCSSURL=i,this.displayName=t,this.isLoaded=!0,this.fontFamily=this.fontId,this.fontCSSURL!=""?(this.displayName+=""+n,this.fontFamily+="_"+n,this.isLoaded=!1,this.loadCSS=function(e){if(this.isLoaded)return;this._importCSS(e),this.isLoaded=!0},this.loadCSSToMenu=function(){this._importCSS(document)},this._importCSS=function(e){var t=e.styleSheets.length,n=e.styleSheets[t-1];if(t===0||n.imports.length==30)e.createStyleSheet?n=e.createStyleSheet():(n=e.createElement("style"),e.documentElement.firstChild.appendChild(n),n=n.sheet);n.addImport(this.fontCSSURL)}):(this.loadCSS=function(){},this.loadCSSToMenu=function(){}),this.toStruct=function(){return{fontId:this.fontId,fontName:this.fontName,defaultSize:this.defaultSize,fontURL:this.fontURL,fontCSSURL:this.fontCSSURL}}}function Shortcut(e,t){var e=e.replace(/\s+/g,""),n=Shortcut.Store,r=Shortcut.Action;if(typeof t=="undefined"&&e.constructor==String)return n.set("document",e,document),r.init(n.get("document"),e);if(t.constructor==String&&e.constructor==String)return n.set(t,e,jindo.$(t)),r.init(n.get(t),e);if(t.constructor!=String&&e.constructor==String){var i="nonID"+(new Date).getTime();return i=Shortcut.Store.searchId(i,t),n.set(i,e,t),r.init(n.get(i),e)}alert(t+"\ub294 \ubc18\ub4dc\uc2dc string\uc774\uac70\ub098  \uc5c6\uc5b4\uc57c \ub429\ub2c8\ub2e4.")}typeof window.nhn=="undefined"&&(window.nhn={}),nhn.husky||(nhn.husky={}),function(){var e=/^\$(LOCAL|BEFORE|ON|AFTER)_/,t=/^\$(BEFORE|ON|AFTER)_MSG_APP_READY$/,n=[],r={};nhn.husky.HuskyCore=jindo.$Class({name:"HuskyCore",aCallerStack:null,bMobile:jindo.$Agent().navigator().mobile||jindo.$Agent().navigator().msafari,$init:function(e){this.htOptions=e||{},n.push(this),this.htOptions.oDebugger&&(nhn.husky.HuskyCore.getCore=function(){return n},this.htOptions.oDebugger.setApp(this)),this.messageQueue=[],this.oMessageMap={},this.oDisabledMessage={},this.oLazyMessage={},this.aPlugins=[],this.appStatus=nhn.husky.APP_STATUS.NOT_READY,this.aCallerStack=[],this._fnWaitForPluginReady=jindo.$Fn(this._waitForPluginReady,this).bind(),this.registerPlugin(this)},setDebugger:function(e){this.htOptions.oDebugger=e,e.setApp(this)},exec:function(e,t,n){if(this.appStatus==nhn.husky.APP_STATUS.NOT_READY)return this.messageQueue[this.messageQueue.length]={msg:e,args:t,event:n},!0;this.exec=this._exec,this.exec(e,t,n)},delayedExec:function(e,t,n,r){var i=jindo.$Fn(this.exec,this).bind(e,t,r);setTimeout(i,n)},_exec:function(e,t,n){return(this._exec=this.htOptions.oDebugger?this._execWithDebugger:this._execWithoutDebugger).call(this,e,t,n)},_execWithDebugger:function(e,t,n){this.htOptions.oDebugger.log_MessageStart(e,t);var r=this._doExec(e,t,n);return this.htOptions.oDebugger.log_MessageEnd(e,t),r},_execWithoutDebugger:function(e,t,n){return this._doExec(e,t,n)},_doExec:function(e,t,n){var r=!1;if(this.oLazyMessage[e]){var i=this.oLazyMessage[e];return this._loadLazyFiles(e,t,n,i.aFilenames,0),!1}if(!this.oDisabledMessage[e]){var s=[];if(t&&t.length){var o=t.length;for(var u=0;u<o;u++)s[u]=t[u]}n&&(s[s.length]=n),r=this._execMsgStep("BEFORE",e,s),r&&(r=this._execMsgStep("ON",e,s)),r&&(r=this._execMsgStep("AFTER",e,s))}return r},registerPlugin:function(t){if(!t)throw"An error occured in registerPlugin(): invalid plug-in";t.nIdx=this.aPlugins.length,t.oApp=this,this.aPlugins[t.nIdx]=t,t.status!=nhn.husky.PLUGIN_STATUS.NOT_READY&&(t.status=nhn.husky.PLUGIN_STATUS.READY);if(this.appStatus!=nhn.husky.APP_STATUS.NOT_READY)for(var n in t)e.test(n)&&this.addToMessageMap(n,t);return this.exec("MSG_PLUGIN_REGISTERED",[t]),t.nIdx},disableMessage:function(e,t){this.oDisabledMessage[e]=t},registerBrowserEvent:function(e,t,n,r,i){r=r||[];var s=i?jindo.$Fn(this.delayedExec,this).bind(n,r,i):jindo.$Fn(this.exec,this).bind(n,r);return jindo.$Fn(s,this).attach(e,t)},run:function(e){this.htRunOptions=e||{},this._changeAppStatus(nhn.husky.APP_STATUS.WAITING_FOR_PLUGINS_READY);var t=this.messageQueue.length;for(var n=0;n<t;n++){var r=this.messageQueue[n];this.exec(r.msg,r.args,r.event)}this._fnWaitForPluginReady()},acceptLocalBeforeFirstAgain:function(e,t){e._husky_bRun=!t},createMessageMap:function(e){this.oMessageMap[e]=[];var t=this.aPlugins.length;for(var n=0;n<t;n++)this._doAddToMessageMap(e,this.aPlugins[n])},addToMessageMap:function(e,t){if(!this.oMessageMap[e])return;this._doAddToMessageMap(e,t)},_changeAppStatus:function(e){this.appStatus=e,this.appStatus==nhn.husky.APP_STATUS.READY&&this.exec("MSG_APP_READY")},_execMsgStep:function(e,t,n){return(this._execMsgStep=this.htOptions.oDebugger?this._execMsgStepWithDebugger:this._execMsgStepWithoutDebugger).call(this,e,t,n)},_execMsgStepWithDebugger:function(e,t,n){this.htOptions.oDebugger.log_MessageStepStart(e,t,n);var r=this._execMsgHandler("$"+e+"_"+t,n);return this.htOptions.oDebugger.log_MessageStepEnd(e,t,n),r},_execMsgStepWithoutDebugger:function(e,t,n){return this._execMsgHandler("$"+e+"_"+t,n)},_execMsgHandler:function(e,n){var r;this.oMessageMap[e]||this.createMessageMap(e);var i=this.oMessageMap[e],s=i.length;if(s===0)return!0;var o=!0;if(t.test(e)){for(r=0;r<s;r++)if(this._execHandler(i[r],e,n)===!1){o=!1;break}}else for(r=0;r<s;r++){if(!i[r]._husky_bRun){i[r]._husky_bRun=!0;if(typeof i[r].$LOCAL_BEFORE_FIRST=="function"&&this._execHandler(i[r],"$LOCAL_BEFORE_FIRST",[e,n])===!1)continue}if(typeof i[r].$LOCAL_BEFORE_ALL=="function"&&this._execHandler(i[r],"$LOCAL_BEFORE_ALL",[e,n])===!1)continue;if(this._execHandler(i[r],e,n)===!1){o=!1;break}}return o},_execHandler:function(e,t,n){return(this._execHandler=this.htOptions.oDebugger?this._execHandlerWithDebugger:this._execHandlerWithoutDebugger).call(this,e,t,n)},_execHandlerWithDebugger:function(e,t,n){this.htOptions.oDebugger.log_CallHandlerStart(e,t,n);var r;try{this.aCallerStack.push(e),r=e[t].apply(e,n),this.aCallerStack.pop()}catch(i){this.htOptions.oDebugger.handleException(i),r=!1}return this.htOptions.oDebugger.log_CallHandlerEnd(e,t,n),r},_execHandlerWithoutDebugger:function(e,t,n){this.aCallerStack.push(e);var r=e[t].apply(e,n);return this.aCallerStack.pop(),r},_doAddToMessageMap:function(e,t){if(typeof t[e]!="function")return;var n=this.oMessageMap[e];for(var r=0,i=n.length;r<i;r++)if(this.oMessageMap[e][r]==t)return;this.oMessageMap[e][r]=t},_waitForPluginReady:function(){var e=!0;for(var t=0;t<this.aPlugins.length;t++)if(this.aPlugins[t].status==nhn.husky.PLUGIN_STATUS.NOT_READY){e=!1;break}e?this._changeAppStatus(nhn.husky.APP_STATUS.READY):setTimeout(this._fnWaitForPluginReady,100)},_loadLazyFiles:function(e,t,n,i,s){var o=i.length;if(o<=s){this.oLazyMessage[e]=null,this.oApp.exec(e,t,n);return}var u=i[s];r[u]?this._loadLazyFiles(e,t,n,i,s+1):jindo.LazyLoading.load(nhn.husky.SE2M_Configuration.LazyLoad.sJsBaseURI+"/"+u,jindo.$Fn(function(e,t,n,i,s){var o=i[s];r[o]=1,this._loadLazyFiles(e,t,n,i,s+1)},this).bind(e,t,n,i,s),"utf-8")},registerLazyMessage:function(e,t){e=e||[],t=t||[];for(var n=0,r,i;r=e[n];n++)i=this.oLazyMessage[r],i?i.aFilenames=i.aFilenames.concat(t):this.oLazyMessage[r]={sMsg:r,aFilenames:t}}}),nhn.husky.HuskyCore._htLoadedFile={},nhn.husky.HuskyCore.addLoadedFile=function(e){r[e]=1},nhn.husky.HuskyCore.mixin=function(t,r,i,s){var o=[];for(var u=0,a;a=n[u];u++)for(var f=0,l;l=a.aPlugins[f];f++)if(l instanceof t)o.push(l),typeof l["$LOCAL_BEFORE_FIRST"]!="function"&&l.oApp.acceptLocalBeforeFirstAgain(l,!0);else if(l._$superClass===t){typeof l["$LOCAL_BEFORE_FIRST"]!="function"&&l.oApp.acceptLocalBeforeFirstAgain(l,!0);for(var c in r)if(i||!l.hasOwnProperty(c))l[c]=r[c],e.test(c)&&l.oApp.addToMessageMap(c,l)}for(var c in r)if(i||!t.prototype.hasOwnProperty(c)){t.prototype[c]=r[c];if(e.test(c))for(var f=0,l;l=o[f];f++)l.oApp.addToMessageMap(c,l)}},nhn.husky.APP_STATUS={NOT_READY:0,WAITING_FOR_PLUGINS_READY:1,READY:2},nhn.husky.PLUGIN_STATUS={NOT_READY:0,READY:1}}(),typeof window.nhn=="undefined"&&(window.nhn={}),nhn.CurrentSelection_IE=function(){this.getCommonAncestorContainer=function(){try{return this._oSelection=this._document.selection,this._oSelection.type=="Control"?this._oSelection.createRange().item(0):this._oSelection.createRangeCollection().item(0).parentElement()}catch(e){return this._document.body}},this.isCollapsed=function(){return this._oSelection=this._document.selection,this._oSelection.type=="None"}},nhn.CurrentSelection_FF=function(){this.getCommonAncestorContainer=function(){return this._getSelection().commonAncestorContainer},this.isCollapsed=function(){var e=this._window.getSelection();return e.rangeCount<1?!0:e.getRangeAt(0).collapsed},this._getSelection=function(){try{return this._window.getSelection().getRangeAt(0)}catch(e){return this._document.createRange()}}},nhn.CurrentSelection=new(jindo.$Class({$init:function(){var e=jindo.$Agent().navigator();e.ie&&document.selection?nhn.CurrentSelection_IE.apply(this):nhn.CurrentSelection_FF.apply(this)},setWindow:function(e){this._window=e,this._document=e.document}})),nhn.W3CDOMRange=jindo.$Class({$init:function(e){this.reset(e)},reset:function(e){this._window=e,this._document=this._window.document,this.collapsed=!0,this.commonAncestorContainer=this._document.body,this.endContainer=this._document.body,this.endOffset=0,this.startContainer=this._document.body,this.startOffset=0,this.oBrowserSelection=new nhn.BrowserSelection(this._window),this.selectionLoaded=this.oBrowserSelection.selectionLoaded},cloneContents:function(){var e=this._document.createDocumentFragment(),t=this._document.createDocumentFragment(),n=this._getNodesInRange();if(n.length<1)return e;var r=this._constructClonedTree(n,t),i=t.firstChild;if(i){var s=i.firstChild,o;while(s)o=s.nextSibling,e.appendChild(s),s=o}return r=this._splitTextEndNodes({oStartContainer:r.oStartContainer,iStartOffset:this.startOffset,oEndContainer:r.oEndContainer,iEndOffset:this.endOffset}),r.oStartContainer&&r.oStartContainer.previousSibling&&nhn.DOMFix.parentNode(r.oStartContainer).removeChild(r.oStartContainer.previousSibling),r.oEndContainer&&r.oEndContainer.nextSibling&&nhn.DOMFix.parentNode(r.oEndContainer).removeChild(r.oEndContainer.nextSibling),e},_constructClonedTree:function(e,t){var n=null,r=null,i=this.startContainer,s=this.endContainer,o=function(e,t,o){if(t<0)return t;var u=t-1,a=e[t].cloneNode(!1);e[t]==i&&(n=a),e[t]==s&&(r=a);while(u>=0&&nhn.DOMFix.parentNode(e[u])==e[t])u=this._recurConstructClonedTree(e,u,a);return o.insertBefore(a,o.firstChild),u};return this._recurConstructClonedTree=o,e[e.length]=nhn.DOMFix.parentNode(e[e.length-1]),this._recurConstructClonedTree(e,e.length-1,t),{oStartContainer:n,oEndContainer:r}},cloneRange:function(){return this._copyRange(new nhn.W3CDOMRange(this._window))},_copyRange:function(e){return e.collapsed=this.collapsed,e.commonAncestorContainer=this.commonAncestorContainer,e.endContainer=this.endContainer,e.endOffset=this.endOffset,e.startContainer=this.startContainer,e.startOffset=this.startOffset,e._document=this._document,e},collapse:function(e){e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset):(this.startContainer=this.endContainer,this.startOffset=this.endOffset),this._updateRangeInfo()},compareBoundaryPoints:function(e,t){switch(e){case nhn.W3CDOMRange.START_TO_START:return this._compareEndPoint(this.startContainer,this.startOffset,t.startContainer,t.startOffset);case nhn.W3CDOMRange.START_TO_END:return this._compareEndPoint(this.endContainer,this.endOffset,t.startContainer,t.startOffset);case nhn.W3CDOMRange.END_TO_END:return this._compareEndPoint(this.endContainer,this.endOffset,t.endContainer,t.endOffset);case nhn.W3CDOMRange.END_TO_START:return this._compareEndPoint(this.startContainer,this.startOffset,t.endContainer,t.endOffset)}},_findBody:function(e){if(!e)return null;while(e){if(e.tagName=="BODY")return e;e=nhn.DOMFix.parentNode(e)}return null},_compareEndPoint:function(e,t,n,r){return this.oBrowserSelection.compareEndPoints(e,t,n,r);var i,s,o,u,a,f,l},_getCommonAncestorContainer:function(e,t){e=e||this.startContainer,t=t||this.endContainer;var n=t;while(e){while(n){if(e==n)return e;n=nhn.DOMFix.parentNode(n)}n=t,e=nhn.DOMFix.parentNode(e)}return this._document.body},deleteContents:function(){if(this.collapsed)return;this._splitTextEndNodesOfTheRange();var e=this._getNodesInRange();if(e.length<1)return;var t=e[0].previousSibling;while(t&&this._isBlankTextNode(t))t=t.previousSibling;var n,r=-1;t||(n=nhn.DOMFix.parentNode(e[0]),r=0);for(var i=0;i<e.length;i++){var s=e[i];!s.firstChild||this._isAllChildBlankText(s)?(n==s&&(r=this._getPosIdx(n),n=nhn.DOMFix.parentNode(s)),nhn.DOMFix.parentNode(s).removeChild(s)):n==s&&r===0&&(r=this._getPosIdx(n),n=nhn.DOMFix.parentNode(s))}t?t.tagName=="BODY"?this.setStartBefore(t,!0):this.setStartAfter(t,!0):this.setStart(n,r,!0,!0),this.collapse(!0)},extractContents:function(){var e=this.cloneContents();return this.deleteContents(),e},getInsertBeforeNodes:function(){var e=null,t;this.startContainer.nodeType=="3"?(t=nhn.DOMFix.parentNode(this.startContainer),this.startContainer.nodeValue.length<=this.startOffset?e=this.startContainer.nextSibling:e=this.startContainer.splitText(this.startOffset)):(t=this.startContainer,e=nhn.DOMFix.childNodes(this.startContainer)[this.startOffset]);if(!e||!nhn.DOMFix.parentNode(e))e=null;return{elParent:t,elBefore:e}},insertNode:function(e){var t=this.getInsertBeforeNodes();t.elParent.insertBefore(e,t.elBefore),this.setStartBefore(e)},selectNode:function(e){this.reset(this._window),this.setStartBefore(e),this.setEndAfter(e)},selectNodeContents:function(e){this.reset(this._window),this.setStart(e,0,!0),this.setEnd(e,nhn.DOMFix.childNodes(e).length)},_endsNodeValidation:function(e,t){if(!e||this._findBody(e)!=this._document.body)throw new Error("INVALID_NODE_TYPE_ERR oNode is not part of current document");return e.nodeType==3?t>e.nodeValue.length&&(t=e.nodeValue.length):t>nhn.DOMFix.childNodes(e).length&&(t=nhn.DOMFix.childNodes(e).length),t},setEnd:function(e,t,n,r){n||(t=this._endsNodeValidation(e,t)),this.endContainer=e,this.endOffset=t,r||(!this.startContainer||this._compareEndPoint(this.startContainer,this.startOffset,this.endContainer,this.endOffset)!=-1?this.collapse(!1):this._updateRangeInfo())},setEndAfter:function(e,t){if(!e)throw new Error("INVALID_NODE_TYPE_ERR in setEndAfter");if(e.tagName=="BODY"){this.setEnd(e,nhn.DOMFix.childNodes(e).length,!0,t);return}this.setEnd(nhn.DOMFix.parentNode(e),this._getPosIdx(e)+1,!0,t)},setEndBefore:function(e,t){if(!e)throw new Error("INVALID_NODE_TYPE_ERR in setEndBefore");if(e.tagName=="BODY"){this.setEnd(e,0,!0,t);return}this.setEnd(nhn.DOMFix.parentNode(e),this._getPosIdx(e),!0,t)},setStart:function(e,t,n,r){n||(t=this._endsNodeValidation(e,t)),this.startContainer=e,this.startOffset=t,r||(!this.endContainer||this._compareEndPoint(this.startContainer,this.startOffset,this.endContainer,this.endOffset)!=-1?this.collapse(!0):this._updateRangeInfo())},setStartAfter:function(e,t){if(!e)throw new Error("INVALID_NODE_TYPE_ERR in setStartAfter");if(e.tagName=="BODY"){this.setStart(e,nhn.DOMFix.childNodes(e).length,!0,t);return}this.setStart(nhn.DOMFix.parentNode(e),this._getPosIdx(e)+1,!0,t)},setStartBefore:function(e,t){if(!e)throw new Error("INVALID_NODE_TYPE_ERR in setStartBefore");if(e.tagName=="BODY"){this.setStart(e,0,!0,t);return}this.setStart(nhn.DOMFix.parentNode(e),this._getPosIdx(e),!0,t)},surroundContents:function(e){e.appendChild(this.extractContents()),this.insertNode(e),this.selectNode(e)},toString:function(){var e=this._document.createElement("DIV");return e.appendChild(this.cloneContents()),e.textContent||e.innerText||""},fixCommonAncestorContainer:function(){if(!jindo.$Agent().navigator().ie)return;this.commonAncestorContainer=this._getCommonAncestorContainer()},_isBlankTextNode:function(e){return e.nodeType==3&&e.nodeValue==""?!0:!1},_isAllChildBlankText:function(e){for(var t=0,n=e.childNodes.length;t<n;t++)if(!this._isBlankTextNode(e.childNodes[t]))return!1;return!0},_getPosIdx:function(e){var t=0;for(var n=e.previousSibling;n;n=n.previousSibling)t++;return t},_updateRangeInfo:function(){if(!this.startContainer){this.reset(this._window);return}this.collapsed=this.oBrowserSelection.isCollapsed(this)||this.startContainer===this.endContainer&&this.startOffset===this.endOffset,this.commonAncestorContainer=this.oBrowserSelection.getCommonAncestorContainer(this)},_isCollapsed:function(e,t,n,r){var i=!1;if(e==n&&t==r)i=!0;else{var s=this._getActualStartNode(e,t),o=this._getActualEndNode(n,r);s=this._getNextNode(this._getPrevNode(s)),o=this._getPrevNode(this._getNextNode(o)),s&&o&&o.tagName!="BODY"&&(this._getNextNode(o)==s||o==s&&this._isBlankTextNode(o))&&(i=!0)}return i},_splitTextEndNodesOfTheRange:function(){var e=this._splitTextEndNodes({oStartContainer:this.startContainer,iStartOffset:this.startOffset,oEndContainer:this.endContainer,iEndOffset:this.endOffset});this.startContainer=e.oStartContainer,this.startOffset=e.iStartOffset,this.endContainer=e.oEndContainer,this.endOffset=e.iEndOffset},_splitTextEndNodes:function(e){return e=this._splitStartTextNode(e),e=this._splitEndTextNode(e),e},_splitStartTextNode:function(e){var t=e.oStartContainer,n=e.iStartOffset,r=e.oEndContainer,i=e.iEndOffset;if(!t)return e;if(t.nodeType!=3)return e;if(n===0)return e;if(t.nodeValue.length<=n)return e;var s=t.splitText(n);return t==r&&(i-=n,r=s),t=s,n=0,{oStartContainer:t,iStartOffset:n,oEndContainer:r,iEndOffset:i}},_splitEndTextNode:function(e){var t=e.oStartContainer,n=e.iStartOffset,r=e.oEndContainer,i=e.iEndOffset;return r?r.nodeType!=3?e:i>=r.nodeValue.length?e:i===0?e:(r.splitText(i),{oStartContainer:t,iStartOffset:n,oEndContainer:r,iEndOffset:i}):e},_getNodesInRange:function(){if(this.collapsed)return[];var e=this._getActualStartNode(this.startContainer,this.startOffset),t=this._getActualEndNode(this.endContainer,this.endOffset);return this._getNodesBetween(e,t)},_getActualStartNode:function(e,t){var n=e;return e.nodeType==3?t>=e.nodeValue.length?(n=this._getNextNode(e),n.tagName=="BODY"&&(n=null)):n=e:t<nhn.DOMFix.childNodes(e).length?n=nhn.DOMFix.childNodes(e)[t]:(n=this._getNextNode(e),n.tagName=="BODY"&&(n=null)),n},_getActualEndNode:function(e,t){var n=e;return t===0?(n=this._getPrevNode(e),n.tagName=="BODY"&&(n=null)):e.nodeType==3?n=e:n=nhn.DOMFix.childNodes(e)[t-1],n},_getNextNode:function(e){return!e||e.tagName=="BODY"?this._document.body:e.nextSibling?e.nextSibling:this._getNextNode(nhn.DOMFix.parentNode(e))},_getPrevNode:function(e){return!e||e.tagName=="BODY"?this._document.body:e.previousSibling?e.previousSibling:this._getPrevNode(nhn.DOMFix.parentNode(e))},_getNodesBetween:function(e,t){var n=[];this._nNodesBetweenLen=0;if(!e||!t)return n;try{this._recurGetNextNodesUntil(e,t,n)}catch(r){return[]}return n},_recurGetNextNodesUntil:function(e,t,n){if(!e)return!1;if(!this._recurGetChildNodesUntil(e,t,n))return!1;var r=e.nextSibling;while(!r){if(!(e=nhn.DOMFix.parentNode(e)))return!1;n[this._nNodesBetweenLen++]=e;if(e==t)return!1;r=e.nextSibling}return this._recurGetNextNodesUntil(r,t,n)},_recurGetChildNodesUntil:function(e,t,n){if(!e)return!1;var r=!1,i=e;if(i.firstChild){i=i.firstChild;while(i){if(!this._recurGetChildNodesUntil(i,t,n)){r=!0;break}i=i.nextSibling}}return n[this._nNodesBetweenLen++]=e,r?!1:e==t?!1:!0}}),nhn.W3CDOMRange.START_TO_START=0,nhn.W3CDOMRange.START_TO_END=1,nhn.W3CDOMRange.END_TO_END=2,nhn.W3CDOMRange.END_TO_START=3,nhn.HuskyRange=jindo.$Class({_rxCursorHolder:/^(?:\uFEFF|\u00A0|\u200B|<br>)$/i,_rxTextAlign:/text-align:[^"';]*;?/i,setWindow:function(e){this.reset(e||window)},$init:function(e){this.HUSKY_BOOMARK_START_ID_PREFIX="husky_bookmark_start_",this.HUSKY_BOOMARK_END_ID_PREFIX="husky_bookmark_end_",this.sBlockElement="P|DIV|LI|H[1-6]|PRE",this.sBlockContainer="BODY|TABLE|TH|TR|TD|UL|OL|BLOCKQUOTE|FORM",this.rxBlockElement=new RegExp("^("+this.sBlockElement+")$"),this.rxBlockContainer=new RegExp("^("+this.sBlockContainer+")$"),this.rxLineBreaker=new RegExp("^("+this.sBlockElement+"|"+this.sBlockContainer+")$"),this.rxHasBlock=new RegExp("(?:<(?:"+this.sBlockElement+"|"+this.sBlockContainer+").*?>|style=[\"']?[^>]*?(?:displays?:s?block)[^>]*?[\"']?)","gi"),this.setWindow(e)},select:function(){try{this.oBrowserSelection.selectRange(this)}catch(e){}},setFromSelection:function(e){this.setRange(this.oBrowserSelection.getRangeAt(e),!0)},setRange:function(e,t){this.reset(this._window),this.setStart(e.startContainer,e.startOffset,t,!0),this.setEnd(e.endContainer,e.endOffset,t)},setEndNodes:function(e,t){this.reset(this._window),this.setEndAfter(t,!0),this.setStartBefore(e)},splitTextAtBothEnds:function(){this._splitTextEndNodesOfTheRange()},getStartNode:function(){if(this.collapsed)return this.startContainer.nodeType==3?this.startOffset===0?null:this.startContainer.nodeValue.length<=this.startOffset?null:this.startContainer:null;return this.startContainer.nodeType==3?this.startOffset>=this.startContainer.nodeValue.length?this._getNextNode(this.startContainer):this.startContainer:this.startOffset>=nhn.DOMFix.childNodes(this.startContainer).length?this._getNextNode(this.startContainer):nhn.DOMFix.childNodes(this.startContainer)[this.startOffset]},getEndNode:function(){return this.collapsed?this.getStartNode():this.endContainer.nodeType==3?this.endOffset===0?this._getPrevNode(this.endContainer):this.endContainer:this.endOffset===0?this._getPrevNode(this.endContainer):nhn.DOMFix.childNodes(this.endContainer)[this.endOffset-1]},getNodeAroundRange:function(e,t){if(!this.collapsed)return this.getStartNode();if(this.startContainer&&this.startContainer.nodeType==3)return this.startContainer;var n,r,i;return this.startOffset>=nhn.DOMFix.childNodes(this.startContainer).length?r=this._getNextNode(this.startContainer):r=nhn.DOMFix.childNodes(this.startContainer)[this.startOffset],this.endOffset===0?n=this._getPrevNode(this.endContainer):n=nhn.DOMFix.childNodes(this.endContainer)[this.endOffset-1],e?(i=n,!i&&!t&&(i=r)):(i=r,!i&&!t&&(i=n)),i},_getXPath:function(e){var t="";while(e&&e.nodeType==1)t="/"+e.tagName+"["+this._getPosIdx4XPath(e)+"]"+t,e=nhn.DOMFix.parentNode(e);return t},_getPosIdx4XPath:function(e){var t=0;for(var n=e.previousSibling;n;n=n.previousSibling)n.tagName==e.tagName&&t++;return t},_evaluateXPath:function(e,t){e=e.substring(1,e.length-1);var n=e.split(/\//),r=t.body;for(var i=2;i<n.length&&r;i++){n[i].match(/([^\[]+)\[(\d+)/i);var s=RegExp.$1,o=RegExp.$2,u=nhn.DOMFix.childNodes(r),a=[],f=u.length,l=0;for(var c=0;c<f;c++)u[c].tagName==s&&(a[l++]=u[c]);a.length<o?r=null:r=a[o]}return r},_evaluateXPathBookmark:function(e){var t=e.sXPath,n=e.nTextNodeIdx,r=e.nOffset,i=this._evaluateXPath(t,this._document);if(n>-1&&i){var s=nhn.DOMFix.childNodes(i),o=null,u=n,a=r;while((o=s[u])&&o.nodeType==3&&o.nodeValue.length<a)a-=o.nodeValue.length,u++;i=nhn.DOMFix.childNodes(i)[u],r=a}return i||(i=this._document.body,r=0),{elContainer:i,nOffset:r}},getXPathBookmark:function(){var e=-1,t={elContainer:this.startContainer,nOffset:this.startOffset},n=this.startContainer;n.nodeType==3&&(t=this._getFixedStartTextNode(),e=this._getPosIdx(t.elContainer),n=nhn.DOMFix.parentNode(n));var r=this._getXPath(n),i={sXPath:r,nTextNodeIdx:e,nOffset:t.nOffset};if(this.collapsed)var s={sXPath:r,nTextNodeIdx:e,nOffset:t.nOffset};else{var o=-1,u={elContainer:this.endContainer,nOffset:this.endOffset},a=this.endContainer;a.nodeType==3&&(u=this._getFixedEndTextNode(),o=this._getPosIdx(u.elContainer),a=nhn.DOMFix.parentNode(a));var f=this._getXPath(a),s={sXPath:f,nTextNodeIdx:o,nOffset:u.nOffset}}return[i,s]},moveToXPathBookmark:function(e){if(!e)return!1;var t=this._evaluateXPathBookmark(e[0]),n=this._evaluateXPathBookmark(e[1]);if(!t.elContainer||!n.elContainer)return;return this.startContainer=t.elContainer,this.startOffset=t.nOffset,this.endContainer=n.elContainer,this.endOffset=n.nOffset,!0},_getFixedTextContainer:function(e,t){while(e&&e.nodeType==3&&e.previousSibling&&e.previousSibling.nodeType==3)t+=e.previousSibling.nodeValue.length,e=e.previousSibling;return{elContainer:e,nOffset:t}},_getFixedStartTextNode:function(){return this._getFixedTextContainer(this.startContainer,this.startOffset)},_getFixedEndTextNode:function(){return this._getFixedTextContainer(this.endContainer,this.endOffset)},placeStringBookmark:function(){return this.collapsed||jindo.$Agent().navigator().ie||jindo.$Agent().navigator().firefox?this.placeStringBookmark_NonWebkit():this.placeStringBookmark_Webkit()},placeStringBookmark_NonWebkit:function(){var e=(new Date).getTime(),t=this.cloneRange();t.collapseToEnd();var n=this._document.createElement("SPAN");n.id=this.HUSKY_BOOMARK_END_ID_PREFIX+e,t.insertNode(n);var t=this.cloneRange();t.collapseToStart();var r=this._document.createElement("SPAN");r.id=this.HUSKY_BOOMARK_START_ID_PREFIX+e,t.insertNode(r);if(jindo.$Agent().navigator().ie){try{r.innerHTML=unescape("%uFEFF")}catch(i){}try{n.innerHTML=unescape("%uFEFF")}catch(i){}}return this.moveToBookmark(e),e},placeStringBookmark_Webkit:function(){var e=(new Date).getTime(),t,n,r=this.cloneRange();r.collapseToEnd(),t=this._document.createTextNode(""),r.insertNode(t),n=t.parentNode,t.previousSibling&&t.previousSibling.tagName=="TD"&&(n=t.previousSibling,t=null);var i=this._document.createElement("SPAN");i.id=this.HUSKY_BOOMARK_END_ID_PREFIX+e,n.insertBefore(i,t);var r=this.cloneRange();r.collapseToStart(),t=this._document.createTextNode(""),r.insertNode(t),n=t.parentNode,t.nextSibling&&t.nextSibling.tagName=="TD"&&(n=t.nextSibling,t=n.firstChild);var s=this._document.createElement("SPAN");return s.id=this.HUSKY_BOOMARK_START_ID_PREFIX+e,n.insertBefore(s,t),this.moveToBookmark(e),e},cloneRange:function(){return this._copyRange(new nhn.HuskyRange(this._window))},moveToBookmark:function(e){return typeof e!="object"?this.moveToStringBookmark(e):this.moveToXPathBookmark(e)},getStringBookmark:function(e,t){return t?this._document.getElementById(this.HUSKY_BOOMARK_END_ID_PREFIX+e):this._document.getElementById(this.HUSKY_BOOMARK_START_ID_PREFIX+e)},moveToStringBookmark:function(e,t){var n=this.getStringBookmark(e),r=this.getStringBookmark(e,!0);return!n||!r?!1:(this.reset(this._window),t?(this.setEndAfter(r),this.setStartBefore(n)):(this.setEndBefore(r),this.setStartAfter(n)),!0)},removeStringBookmark:function(e){this._removeAll(this.HUSKY_BOOMARK_START_ID_PREFIX+e),this._removeAll(this.HUSKY_BOOMARK_END_ID_PREFIX+e)},_removeAll:function(e){var t;while(t=this._document.getElementById(e))nhn.DOMFix.parentNode(t).removeChild(t)},collapseToStart:function(){this.collapse(!0)},collapseToEnd:function(){this.collapse(!1)},createAndInsertNode:function(e){var t=this._document.createElement(e);return this.insertNode(t),t},getNodes:function(e,t){e&&this._splitTextEndNodesOfTheRange();var n=this._getNodesInRange(),r=[];if(!t)return n;for(var i=0;i<n.length;i++)t(n[i])&&(r[r.length]=n[i]);return r},getTextNodes:function(e){var t=function(e){return e.nodeType==3&&e.nodeValue!="\n"&&e.nodeValue!=""?!0:!1};return this.getNodes(e,t)},surroundContentsWithNewNode:function(e){var t=this._document.createElement(e);return this.surroundContents(t),t},isRangeinRange:function(e,t){var n=this.compareBoundaryPoints(this.W3CDOMRange.START_TO_START,e),r=this.compareBoundaryPoints(this.W3CDOMRange.START_TO_END,e),i=this.compareBoundaryPoints(this.W3CDOMRange.ND_TO_START,e),s=this.compareBoundaryPoints(this.W3CDOMRange.END_TO_END,e);return n<=0&&s>=0?!0:t?r==1?!1:i==-1?!1:!0:!1},isNodeInRange:function(e,t,n){var r=new nhn.HuskyRange(this._window);return n&&e.firstChild?(r.setStartBefore(e.firstChild),r.setEndAfter(e.lastChild)):r.selectNode(e),this.isRangeInRange(r,t)},pasteText:function(e){this.pasteHTML(e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/"/g,"&quot;"))},pasteHTML:function(e){var t=this._document.createElement("DIV");t.innerHTML=e;if(!t.firstChild){this.deleteContents();return}var n=this.cloneRange(),r=n.placeStringBookmark(),i=n.getLineInfo(),s=i.oStart,o=i.oEnd;if(s.oLineBreaker&&s.oLineBreaker.nodeName==="P"&&n.rxHasBlock.test(e)){n.deleteContents();var u=s.oLineBreaker.parentNode,a=s.oLineBreaker.nextSibling;if(s.oLineBreaker===o.oLineBreaker){var f=n.getStringBookmark(r);n.setEndNodes(f,o.oLineBreaker);var l=n.extractContents();a?u.insertBefore(l,a):u.appendChild(l),a=s.oLineBreaker.nextSibling}t.style.cssText=s.oLineBreaker.style.cssText.replace(this._rxTextAlign,""),t.align=s.oLineBreaker.align,a?u.insertBefore(t,a):u.appendChild(t),n.removeStringBookmark(r),this._removeEmptyP(this._getPrevElement(t));var c=this._getNextElement(t);if(c){var h=this._getNextElement(c);h&&(this._removeEmptyP(c),c=h)}else c=this._document.createElement("P"),c.style.cssText=s.oLineBreaker.style.cssText,c.align=s.oLineBreaker.align,c.innerHTML="\ufeff",u.appendChild(c);this.selectNodeContents(c),this.collapseToStart()}else{var p=t.firstChild,d=t.lastChild;this.collapseToStart();while(t.lastChild)this.insertNode(t.lastChild);this.setEndNodes(p,d),n.moveToBookmark(r),n.deleteContents(),n.removeStringBookmark(r)}},_removeEmptyP:function(e){if(e&&e.nodeName==="P"){var t=e.innerHTML;(t===""||this._rxCursorHolder.test(t))&&e.parentNode.removeChild(e)}},_getSiblingElement:function(e,t){if(!e)return null;var n=e[t?"previousSibling":"nextSibling"];return n&&n.nodeType===1?n:arguments.callee(n,t)},_getPrevElement:function(e){return this._getSiblingElement(e,!0)},_getNextElement:function(e){return this._getSiblingElement(e,!1)},toString:function(){return this.toString=nhn.W3CDOMRange.prototype.toString,this.toString()},toHTMLString:function(){var e=this._document.createElement("DIV");return e.appendChild(this.cloneContents()),e.innerHTML},findAncestorByTagName:function(e){var t=this.commonAncestorContainer;while(t&&t.tagName!=e)t=nhn.DOMFix.parentNode(t);return t},selectNodeContents:function(e){if(!e)return;var t=e.firstChild?e.firstChild:e,n=e.lastChild?e.lastChild:e;this.reset(this._window),t.nodeType==3?this.setStart(t,0,!0):this.setStartBefore(t),n.nodeType==3?this.setEnd(n,n.nodeValue.length,!0):this.setEndAfter(n)},_hasTextDecoration:function(e,t){return!e||!e.style?!1:e.style.textDecoration.indexOf(t)>-1?!0:t==="underline"&&e.tagName==="U"?!0:t!=="line-through"||e.tagName!=="S"&&e.tagName!=="STRIKE"?!1:!0},_setTextDecoration:function(e,t){jindo.$Agent().navigator().firefox?e.style.textDecoration=e.style.textDecoration?e.style.textDecoration+" "+t:t:t==="underline"?e.innerHTML="<U>"+e.innerHTML+"</U>":t==="line-through"&&(e.innerHTML="<STRIKE>"+e.innerHTML+"</STRIKE>")},_checkTextDecoration:function(e){if(e.tagName!=="SPAN")return;var t=!1,n=!1,r="",i=null;oChildNode=e.firstChild;while(oChildNode){oChildNode.nodeType===1&&(t=t||oChildNode.tagName==="U",n=n||oChildNode.tagName==="S"||oChildNode.tagName==="STRIKE");if(t&&n)return;oChildNode=oChildNode.nextSibling}i=nhn.DOMFix.parentNode(e);while(i&&i.tagName!=="BODY"){if(i.nodeType!==1){i=nhn.DOMFix.parentNode(i);continue}!t&&this._hasTextDecoration(i,"underline")&&(t=!0,this._setTextDecoration(e,"underline")),!n&&this._hasTextDecoration(i,"line-through")&&(n=!0,this._setTextDecoration(e,"line-through"));if(t&&n)return;i=nhn.DOMFix.parentNode(i)}},styleRange:function(e,t,n,r,i){var s=this.aStyleParents=this._getStyleParentNodes(n,r);if(s.length<1)return;var o,u;for(var a=0;a<s.length;a++){for(var f in e){o=f,u=e[o];if(typeof u!="string")continue;i&&e.color&&this._checkTextDecoration(s[a]),s[a].style[o]=u}if(!t)continue;for(var f in t){o=f,u=t[o];if(typeof u!="string")continue;o=="class"?jindo.$Element(s[a]).addClass(u):s[a].setAttribute(o,u)}}this.reset(this._window),this.setStartBefore(s[0]),this.setEndAfter(s[s.length-1])},expandBothEnds:function(){this.expandStart(),this.expandEnd()},expandStart:function(){if(this.startContainer.nodeType==3&&this.startOffset!==0)return;var e=this._getActualStartNode(this.startContainer,this.startOffset);e=this._getPrevNode(e),e.tagName=="BODY"?this.setStartBefore(e):this.setStartAfter(e)},expandEnd:function(){if(this.endContainer.nodeType==3&&this.endOffset<this.endContainer.nodeValue.length)return;var e=this._getActualEndNode(this.endContainer,this.endOffset);e=this._getNextNode(e),e.tagName=="BODY"?this.setEndAfter(e):this.setEndBefore(e)},_getStyleParentNodes:function(e,t){this._splitTextEndNodesOfTheRange();var n=this.getStartNode(),r=this.getEndNode(),i=this._getNodesInRange(),s=[],o=0,u,a,f,l,c,h=i.length,p=jindo.$A(i).filter(function(e){return!e.firstChild||t&&e.tagName=="LI"}),d=this.commonAncestorContainer;if(t)while(d){if(d.tagName=="LI"){this._isFullyContained(d,p)&&(s[o++]=d);break}d=d.parentNode}for(var v=0;v<h;v++){u=i[v];if(!u)continue;if(t&&u.tagName=="LI"&&this._isFullyContained(u,p)){s[o++]=u;continue}if(u.nodeType!=3)continue;if(u.nodeValue==""||u.nodeValue.match(/^(\r|\n)+$/))continue;var m=nhn.DOMFix.parentNode(u);if(m.tagName=="SPAN"){if(this._isFullyContained(m,p,u)){s[o++]=m;continue}}else{var g=this._findParentSingleSpan(m);if(g){s[o++]=g;continue}}c=this._document.createElement("SPAN"),m.insertBefore(c,u),c.appendChild(u),s[o++]=c,e&&c.setAttribute(e,"true")}return this.setStartBefore(n),this.setEndAfter(r),s},_findParentSingleSpan:function(e){if(!e)return null;for(var t=0,n=0,r,i,s=e.childNodes;i=s[t];t++){r=i.nodeValue;if(this._rxCursorHolder.test(r))continue;n++;if(n>1)return null}return e.nodeName==="SPAN"?e:this._findParentSingleSpan(e.parentNode)},_isFullyContained:function(e,t,n){var r,i,s=this._getVeryFirstRealChild(e);return n&&s==n?r=1:r=t.indexOf(s),r!=-1&&(s=this._getVeryLastRealChild(e),n&&s==n?i=1:i=t.indexOf(s)),r!=-1&&i!=-1},_getVeryFirstChild:function(e){return e.firstChild?this._getVeryFirstChild(e.firstChild):e},_getVeryLastChild:function(e){return e.lastChild?this._getVeryLastChild(e.lastChild):e},_getFirstRealChild:function(e){var t=e.firstChild;while(t&&t.nodeType==3&&t.nodeValue=="")t=t.nextSibling;return t},_getLastRealChild:function(e){var t=e.lastChild;while(t&&t.nodeType==3&&t.nodeValue=="")t=t.previousSibling;return t},_getVeryFirstRealChild:function(e){var t=this._getFirstRealChild(e);return t?this._getVeryFirstRealChild(t):e},_getVeryLastRealChild:function(e){var t=this._getLastRealChild(e);return t?this._getVeryLastChild(t):e},_getLineStartInfo:function(e){function o(e){if(!e)return;if(t)return;if(s.test(e.tagName)){r=e,t=n,i=!0;return}n=e,u(e.previousSibling);if(t)return;o(nhn.DOMFix.parentNode(e))}function u(e){if(!e)return;if(t)return;if(s.test(e.tagName)){r=e,t=n,i=!1;return}if(e.firstChild&&e.tagName!="TABLE"){var o=e.lastChild;while(o&&!t)u(o),o=o.previousSibling}else n=e;t||u(e.previousSibling)}var t=null,n=e,r=e,i=!1,s=this.rxLineBreaker;return s.test(e.tagName)?t=e:o(e),{oNode:t,oLineBreaker:r,bParentBreak:i}},_getLineEndInfo:function(e){function o(e){if(!e)return;if(t)return;if(s.test(e.tagName)){r=e,t=n,i=!0;return}n=e,u(e.nextSibling);if(t)return;o(nhn.DOMFix.parentNode(e))}function u(e){if(!e)return;if(t)return;if(s.test(e.tagName)){r=e,t=n,i=!1;return}if(e.firstChild&&e.tagName!="TABLE"){var o=e.firstChild;while(o&&!t)u(o),o=o.nextSibling}else n=e;t||u(e.nextSibling)}var t=null,n=e,r=e,i=!1,s=this.rxLineBreaker;return s.test(e.tagName)?t=e:o(e),{oNode:t,oLineBreaker:r,bParentBreak:i}},getLineInfo:function(e){var e=e||!1,t=this.getStartNode(),n=this.getEndNode();t||(t=this.getNodeAroundRange(!e,!0)),n||(n=this.getNodeAroundRange(!e,!0));var r=this._getLineStartInfo(t),i=r.oNode,s=this._getLineEndInfo(n),o=s.oNode;if(t!=i||n!=o){var u=this._compareEndPoint(nhn.DOMFix.parentNode(i),this._getPosIdx(i),this.endContainer,this.endOffset),a=this._compareEndPoint(nhn.DOMFix.parentNode(o),this._getPosIdx(o)+1,this.startContainer,this.startOffset);u<=0&&a>=0||(t=this.getNodeAroundRange(!1,!0),n=this.getNodeAroundRange(!1,!0),r=this._getLineStartInfo(t),s=this._getLineEndInfo(n))}return{oStart:r,oEnd:s}},_findSingleChild:function(e){if(!e)return null;var t=null;for(var n=0,r=0,i,s,o=e.childNodes;s=o[n];n++){i=s.nodeValue;if(this._rxCursorHolder.test(i))continue;t=s,r++;if(r>1)return null}return t},_hasCursorHolderOnly:function(e){return!e||e.nodeType!==1?!1:this._rxCursorHolder.test(e.innerHTML)?!0:this._hasCursorHolderOnly(this._findSingleChild(e))}}).extend(nhn.W3CDOMRange),nhn.BrowserSelection=function(e){this.init=function(e){this._window=e||window,this._document=this._window.document},this.init(e),this._document.createRange?nhn.BrowserSelectionImpl_FF.apply(this):nhn.BrowserSelectionImpl_IE.apply(this),this.selectRange=function(e){this.selectNone(),this.addRange(e)},this.selectionLoaded=!0,this._oSelection||(this.selectionLoaded=!1)},nhn.BrowserSelectionImpl_FF=function(){this._oSelection=this._window.getSelection(),this.getRangeAt=function(e){e=e||0;try{var t=this._oSelection.getRangeAt(e)}catch(n){return new nhn.W3CDOMRange(this._window)}return this._FFRange2W3CRange(t)},this.addRange=function(e){var t=this._W3CRange2FFRange(e);this._oSelection.addRange(t)},this.selectNone=function(){this._oSelection.removeAllRanges()},this.getCommonAncestorContainer=function(e){var t=this._W3CRange2FFRange(e);return t.commonAncestorContainer},this.isCollapsed=function(e){var t=this._W3CRange2FFRange(e);return t.collapsed},this.compareEndPoints=function(e,t,n,r){var i=this._document.createRange(),s=this._document.createRange();i.setStart(e,t),s.setStart(n,r),i.collapse(!0),s.collapse(!0);try{return i.compareBoundaryPoints(1,s)}catch(o){return 1}},this._FFRange2W3CRange=function(e){var t=new nhn.W3CDOMRange(this._window);return t.setStart(e.startContainer,e.startOffset,!0),t.setEnd(e.endContainer,e.endOffset,!0),t},this._W3CRange2FFRange=function(e){var t=this._document.createRange();return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),t}},nhn.BrowserSelectionImpl_IE=function(){this._oSelection=this._document.selection,this.oLastRange={oBrowserRange:null,elStartContainer:null,nStartOffset:-1,elEndContainer:null,nEndOffset:-1},this._updateLastRange=function(e,t){this.oLastRange.oBrowserRange=e,this.oLastRange.elStartContainer=t.startContainer,this.oLastRange.nStartOffset=t.startOffset,this.oLastRange.elEndContainer=t.endContainer,this.oLastRange.nEndOffset=t.endOffset},this.getRangeAt=function(e){e=e||0;var t,n;if(this._oSelection.type=="Control"){t=new nhn.W3CDOMRange(this._window);var r=this._oSelection.createRange().item(e);return!r||r.ownerDocument!=this._document?t:(t.selectNode(r),t)}n=this._oSelection.createRange();var r=n.parentElement();return!r||r.ownerDocument!=this._document?(t=new nhn.W3CDOMRange(this._window),t):(t=this._IERange2W3CRange(n),t)},this.addRange=function(e){var t=this._W3CRange2IERange(e);t.select()},this.selectNone=function(){this._oSelection.empty()},this.getCommonAncestorContainer=function(e){return this._W3CRange2IERange(e).parentElement()},this.isCollapsed=function(e){var t=this._W3CRange2IERange(e),n=t.duplicate();return n.collapse(),t.isEqual(n)},this.compareEndPoints=function(e,t,n,r){var i,s;return e===this.oLastRange.elStartContainer&&t===this.oLastRange.nStartOffset?(i=this.oLastRange.oBrowserRange.duplicate(),i.collapse(!0)):e===this.oLastRange.elEndContainer&&t===this.oLastRange.nEndOffset?(i=this.oLastRange.oBrowserRange.duplicate(),i.collapse(!1)):i=this._getIERangeAt(e,t),n===this.oLastRange.elStartContainer&&r===this.oLastRange.nStartOffset?(s=this.oLastRange.oBrowserRange.duplicate(),s.collapse(!0)):n===this.oLastRange.elEndContainer&&r===this.oLastRange.nEndOffset?(s=this.oLastRange.oBrowserRange.duplicate(),s.collapse(!1)):s=this._getIERangeAt(n,r),i.compareEndPoints("StartToStart",s)},this._W3CRange2IERange=function(e){if(this.oLastRange.elStartContainer===e.startContainer&&this.oLastRange.nStartOffset===e.startOffset&&this.oLastRange.elEndContainer===e.endContainer&&this.oLastRange.nEndOffset===e.endOffset)return this.oLastRange.oBrowserRange;var t=this._getIERangeAt(e.startContainer,e.startOffset),n=this._getIERangeAt(e.endContainer,e.endOffset);return t.setEndPoint("EndToEnd",n),this._updateLastRange(t,e),t},this._getIERangeAt=function(e,t){var n=this._document.body.createTextRange(),r=this._getSelectableNodeAndOffsetForIE(e,t),i=r.oSelectableNodeForIE,s=r.iOffsetForIE;return n.moveToElementText(i),n.collapse(r.bCollapseToStart),n.moveStart("character",s),n},this._getSelectableNodeAndOffsetForIE=function(e,t){var n=null,r=null,i=0;e.nodeType==3?(n=nhn.DOMFix.parentNode(e),r=nhn.DOMFix.childNodes(n),i=r.length):(n=e,r=nhn.DOMFix.childNodes(n),i=t<r.length?t:r.length);var s=null,o=0,u=!0;for(var a=0;a<i;a++){s=r[a];if(s.nodeType==3){if(s==e)break;o+=s.nodeValue.length}else n=s,o=0,u=!1}return e.nodeType==3&&(o+=t),{oSelectableNodeForIE:n,iOffsetForIE:o,bCollapseToStart:u}},this._IERange2W3CRange=function(e){var t=new nhn.W3CDOMRange(this._window),n=null,r=null;n=e.duplicate(),n.collapse(!0),r=this._getW3CContainerAndOffset(n,!0),t.setStart(r.oContainer,r.iOffset,!0,!0);var i=e.duplicate();return i.collapse(!0),i.isEqual(e)?t.collapse(!0):(n=e.duplicate(),n.collapse(!1),r=this._getW3CContainerAndOffset(n),t.setEnd(r.oContainer,r.iOffset,!0)),this._updateLastRange(e,t),t},this._getW3CContainerAndOffset=function(e,t){var n=e,r=n.parentElement(),i=-1,s=this._document.body.createTextRange(),o=nhn.DOMFix.childNodes(r),u=null,a=0;for(var f=0;f<o.length;f++){if(o[f].nodeType==3)continue;s.moveToElementText(o[f]);if(s.compareEndPoints("StartToStart",e)>=0)break;u=o[f]}var a=f;if(a!==0&&o[a-1].nodeType==3){var l=this._document.body.createTextRange(),c=null;u?(l.moveToElementText(u),l.collapse(!1),c=u.nextSibling):(l.moveToElementText(r),l.collapse(!0),c=r.firstChild);var h=n.duplicate();h.setEndPoint("StartToStart",l);var p=h.text.replace(/[\r\n]/g,"").length;while(p>c.nodeValue.length&&c.nextSibling)p-=c.nodeValue.length,c=c.nextSibling;var d=c.nodeValue;t&&c.nextSibling&&c.nextSibling.nodeType==3&&p==c.nodeValue.length&&(p-=c.nodeValue.length,c=c.nextSibling),r=c,i=p}else r=n.parentElement(),i=a;return{oContainer:r,iOffset:i}}},nhn.DOMFix=new(jindo.$Class({$init:function(){jindo.$Agent().navigator().ie||jindo.$Agent().navigator().opera?(this.childNodes=this._childNodes_Fix,this.parentNode=this._parentNode_Fix):(this.childNodes=this._childNodes_Native,this.parentNode=this._parentNode_Native)},_parentNode_Native:function(e){return e.parentNode},_parentNode_Fix:function(e){if(!e)return e;while(e.previousSibling)e=e.previousSibling;return e.parentNode},_childNodes_Native:function(e){return e.childNodes},_childNodes_Fix:function(e){var t=null,n=0;if(e){var t=[];e=e.firstChild;while(e)t[n++]=e,e=e.nextSibling}return t}})),nhn.husky.CorePlugin=jindo.$Class({name:"CorePlugin",htLazyLoadRequest_plugins:{},htLazyLoadRequest_allFiles:{},htHTMLLoaded:{},$AFTER_MSG_APP_READY:function(){this.oApp.exec("EXEC_ON_READY_FUNCTION",[])},$ON_ADD_APP_PROPERTY:function(e,t){this.oApp[e]=t},$ON_REGISTER_BROWSER_EVENT:function(e,t,n,r,i){this.oApp.registerBrowserEvent(e,t,n,r,i)},$ON_DISABLE_MESSAGE:function(e){this.oApp.disableMessage(e,!0)},$ON_ENABLE_MESSAGE:function(e){this.oApp.disableMessage(e,!1)},$ON_LOAD_FULL_PLUGIN:function(e,t,n,r,i){var s=r.$this||r,o=e[0];this.htLazyLoadRequest_plugins[o]||(this.htLazyLoadRequest_plugins[o]={nStatus:1,sContents:""}),this.htLazyLoadRequest_plugins[o].nStatus===2?this.oApp.exec("MSG_FULL_PLUGIN_LOADED",[o,t,n,r,i,!1]):this._loadFullPlugin(e,t,n,r,i,0)},_loadFullPlugin:function(e,t,n,r,i,s){jindo.LazyLoading.load(nhn.husky.SE2M_Configuration.LazyLoad.sJsBaseURI+"/"+e[s],jindo.$Fn(function(e,t,n,r,i,s){var o=e[s],u=e[0];if(s==e.length-1){this.htLazyLoadRequest_plugins[u].nStatus=2,this.oApp.exec("MSG_FULL_PLUGIN_LOADED",[e,t,n,r,i]);return}this._loadFullPlugin(e,t,n,r,i,s+1)},this).bind(e,t,n,r,i,s),"utf-8")},$ON_MSG_FULL_PLUGIN_LOADED:function(aFilenames,sClassName,sMsgName,oThisRef,oArguments,oRes){var oPluginRef=oThisRef.$this||oThisRef,sFilename=aFilenames;for(var i=0,nLen=oThisRef._huskyFLT.length;i<nLen;i++){var sLoaderHandlerName="$BEFORE_"+oThisRef._huskyFLT[i],oRemoveFrom=oThisRef.$this&&oThisRef[sLoaderHandlerName]?oThisRef:oPluginRef;oRemoveFrom[sLoaderHandlerName]=null,this.oApp.createMessageMap(sLoaderHandlerName)}var oPlugin=eval(sClassName+".prototype"),bAcceptLocalBeforeFirstAgain=!1;typeof oPluginRef["$LOCAL_BEFORE_FIRST"]!="function"&&this.oApp.acceptLocalBeforeFirstAgain(oPluginRef,!0);for(var x in oPlugin)oThisRef.$this&&(!oThisRef[x]||typeof oPlugin[x]=="function"&&x!="constructor")&&(oThisRef[x]=jindo.$Fn(oPlugin[x],oPluginRef).bind()),oPlugin[x]&&(!oPluginRef[x]||typeof oPlugin[x]=="function"&&x!="constructor")&&(oPluginRef[x]=oPlugin[x],x.match(/^\$(LOCAL|BEFORE|ON|AFTER)_/)&&this.oApp.addToMessageMap(x,oPluginRef));bAcceptLocalBeforeFirstAgain&&this.oApp.acceptLocalBeforeFirstAgain(oPluginRef,!0),oThisRef.$this||this.oApp.exec(sMsgName,oArguments)},$ON_LOAD_HTML:function(e){if(this.htHTMLLoaded[e])return;var t=jindo.$("_llh_"+e);if(!t)return;this.htHTMLLoaded[e]=!0;var n=document.createElement("DIV");n.innerHTML=t.value;while(n.firstChild)t.parentNode.insertBefore(n.firstChild,t)},$ON_EXEC_ON_READY_FUNCTION:function(){typeof this.oApp.htRunOptions.fnOnAppReady=="function"&&this.oApp.htRunOptions.fnOnAppReady()}}),nhn.husky.HuskyRangeManager=jindo.$Class({name:"HuskyRangeManager",oWindow:null,$init:function(e){this.oWindow=e||window},$BEFORE_MSG_APP_READY:function(){this.oWindow&&this.oWindow.tagName=="IFRAME"&&(this.oWindow=this.oWindow.contentWindow,nhn.CurrentSelection.setWindow(this.oWindow)),this.oApp.exec("ADD_APP_PROPERTY",["getSelection",jindo.$Fn(this.getSelection,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getEmptySelection",jindo.$Fn(this.getEmptySelection,this).bind()])},$ON_SET_EDITING_WINDOW:function(e){this.oWindow=e},getEmptySelection:function(e){var t=new nhn.HuskyRange(e||this.oWindow);return t},getSelection:function(e){this.oApp.exec("RESTORE_IE_SELECTION",[]);var t=this.getEmptySelection(e);try{t.setFromSelection()}catch(n){}return t}}),nhn.husky.SE2M_Toolbar=jindo.$Class({name:"SE2M_Toolbar",toolbarArea:null,toolbarButton:null,uiNameTag:"uiName",nUIStatus:1,sUIClassPrefix:"husky_seditor_ui_",aUICmdMap:null,elFirstToolbarItem:null,_assignHTMLElements:function(e){e=jindo.$(e)||document,this.rxUI=new RegExp(this.sUIClassPrefix+"([^ ]+)"),this.toolbarArea=jindo.$$.getSingle(".se2_tool",e),this.aAllUI=jindo.$$("[class*="+this.sUIClassPrefix+"]",this.toolbarArea),this.elTextTool=jindo.$$.getSingle("div.husky_seditor_text_tool",this.toolbarArea),this.welToolbarArea=jindo.$Element(this.toolbarArea);for(var t=0,n=this.aAllUI.length;t<n;t++)if(this.rxUI.test(this.aAllUI[t].className)){var r=RegExp.$1;if(this.htUIList[r]!==undefined)continue;this.htUIList[r]=this.aAllUI[t],this.htWrappedUIList[r]=jindo.$Element(this.htUIList[r])}jindo.$$.getSingle("DIV.se2_icon_tool")!=null&&(this.elFirstToolbarItem=jindo.$$.getSingle("DIV.se2_icon_tool UL.se2_itool1>li>button"))},$LOCAL_BEFORE_FIRST:function(e){var t=jindo.$$(">ul>li[class*="+this.sUIClassPrefix+"]>button",this.elTextTool),n=t.length;this.elFirstToolbarItem=this.elFirstToolbarItem||t[0],this.elLastToolbarItem=t[n-1],this.oApp.registerBrowserEvent(this.toolbarArea,"keydown","NAVIGATE_TOOLBAR",[])},$init:function(e,t){this._htOptions=t||{},this.htUIList={},this.htWrappedUIList={},this.aUICmdMap={},this._assignHTMLElements(e)},$ON_MSG_APP_READY:function(){this.oApp.bMobile?this.oApp.registerBrowserEvent(this.toolbarArea,"touchstart","EVENT_TOOLBAR_TOUCHSTART"):(this.oApp.registerBrowserEvent(this.toolbarArea,"mouseover","EVENT_TOOLBAR_MOUSEOVER"),this.oApp.registerBrowserEvent(this.toolbarArea,"mouseout","EVENT_TOOLBAR_MOUSEOUT")),this.oApp.registerBrowserEvent(this.toolbarArea,"mousedown","EVENT_TOOLBAR_MOUSEDOWN"),this.oApp.exec("ADD_APP_PROPERTY",["getToolbarButtonByUIName",jindo.$Fn(this.getToolbarButtonByUIName,this).bind()]);var e=jindo.$$.getSingle(".se2_tool");this.oApp.exec("REGISTER_HOTKEY",["esc","FOCUS_EDITING_AREA",[],e]),this._htOptions.aDisabled&&(this._htOptions._sDisabled=","+this._htOptions.aDisabled.toString()+",",this.oApp.exec("DISABLE_UI",[this._htOptions.aDisabled]))},$ON_NAVIGATE_TOOLBAR:function(e){var t=9;e.element==this.elLastToolbarItem&&e.key().keyCode==t&&(e.key().shift||(this.elFirstToolbarItem.focus(),e.stopDefault())),e.element==this.elFirstToolbarItem&&e.key().keyCode==t&&e.key().shift&&(e.stopDefault(),this.elLastToolbarItem.focus())},$ON_FOCUS_EDITING_AREA:function(){this.oApp.exec("FOCUS")},$ON_TOGGLE_TOOLBAR_ACTIVE_LAYER:function(e,t,n,r,i,s){this.oApp.exec("TOGGLE_ACTIVE_LAYER",[e,"MSG_TOOLBAR_LAYER_SHOWN",[e,t,n,r],i,s])},$ON_MSG_TOOLBAR_LAYER_SHOWN:function(e,t,n,r){this.oApp.exec("POSITION_TOOLBAR_LAYER",[e,t]),n&&this.oApp.exec(n,r)},$ON_SHOW_TOOLBAR_ACTIVE_LAYER:function(e,t,n,r){this.oApp.exec("SHOW_ACTIVE_LAYER",[e,t,n]),this.oApp.exec("POSITION_TOOLBAR_LAYER",[e,r])},$ON_ENABLE_UI:function(e){this._enableUI(e)},$ON_DISABLE_UI:function(e){if(e instanceof Array)for(var t=0,n;n=e[t];t++)this._disableUI(n);else this._disableUI(e)},$ON_SELECT_UI:function(e){var t=this.htWrappedUIList[e];if(!t)return;t.removeClass("hover"),t.addClass("active")},$ON_DESELECT_UI:function(e){var t=this.htWrappedUIList[e];if(!t)return;t.removeClass("active")},$ON_TOGGLE_UI_SELECTED:function(e){var t=this.htWrappedUIList[e];if(!t)return;t.hasClass("active")?t.removeClass("active"):(t.removeClass("hover"),t.addClass("active"))},$ON_ENABLE_ALL_UI:function(e){if(this.nUIStatus===1)return;var t,n;e=e||{};var r=jindo.$A(e.aExceptions||[]);for(t in this.htUIList)t&&!r.has(t)&&this._enableUI(t);this.nUIStatus=1},$ON_DISABLE_ALL_UI:function(e){if(this.nUIStatus===2)return;var t;e=e||{};var n=jindo.$A(e.aExceptions||[]),r=e.bLeaveActiveLayer||!1;r||this.oApp.exec("HIDE_ACTIVE_LAYER");for(t in this.htUIList)t&&!n.has(t)&&this._disableUI(t);this.nUIStatus=2},$ON_MSG_STYLE_CHANGED:function(e,t){t==="@^"?this.oApp.exec("SELECT_UI",[e]):this.oApp.exec("DESELECT_UI",[e])},$ON_POSITION_TOOLBAR_LAYER:function(e,t){var n,r,i,s;e=jindo.$(e),t=t||{};var o=jindo.$(t.elBtn),u=t.sAlign,a=-1;if(!e)return;o&&o.tagName&&o.tagName=="BUTTON"&&o.parentNode.appendChild(e);var f=jindo.$Element(e);u!="right"?(e.style.left="0",n=f.offset().left,r=n+e.offsetWidth,i=this.welToolbarArea.offset().left,s=i+this.toolbarArea.offsetWidth,r>s&&f.css("left",s-r-a+"px"),n<i&&f.css("left",i-n+a+"px")):(e.style.right="0",n=f.offset().left,r=n+e.offsetWidth,i=this.welToolbarArea.offset().left,s=i+this.toolbarArea.offsetWidth,r>s&&f.css("right",-1*(s-r-a)+"px"),n<i&&f.css("right",-1*(i-n+a)+"px"))},$ON_EVENT_TOOLBAR_MOUSEOVER:function(e){if(this.nUIStatus===2)return;var t=this._getAffectedElements(e.element);for(var n=0;n<t.length;n++)t[n].hasClass("active")||t[n].addClass("hover")},$ON_EVENT_TOOLBAR_MOUSEOUT:function(e){if(this.nUIStatus===2)return;var t=this._getAffectedElements(e.element);for(var n=0;n<t.length;n++)t[n].removeClass("hover")},$ON_EVENT_TOOLBAR_MOUSEDOWN:function(e){var t=e.element;while(t){if(t.className&&t.className.match(/active/)&&(t.childNodes.length>2||t.parentNode.className.match(/se2_pair/)))return;t=t.parentNode}this.oApp.exec("HIDE_ACTIVE_LAYER_IF_NOT_CHILD",[e.element])},_enableUI:function(e){if(this._htOptions._sDisabled&&this._htOptions._sDisabled.indexOf(","+e+",")>-1)return;var t,n;this.nUIStatus=0;var r=this.htWrappedUIList[e],i=this.htUIList[e];if(!r)return;r.removeClass("off");var s=i.getElementsByTagName("BUTTON");for(t=0,n=s.length;t<n;t++)s[t].disabled=!1;var o="";if(this.aUICmdMap[e])for(t=0;t<this.aUICmdMap[e].length;t++)o=this.aUICmdMap[e][t],this.oApp.exec("ENABLE_MESSAGE",[o])},_disableUI:function(e){var t,n;this.nUIStatus=0;var r=this.htWrappedUIList[e],i=this.htUIList[e];if(!r)return;r.addClass("off"),r.removeClass("hover");var s=i.getElementsByTagName("BUTTON");for(t=0,n=s.length;t<n;t++)s[t].disabled=!0;var o="";if(this.aUICmdMap[e])for(t=0;t<this.aUICmdMap[e].length;t++)o=this.aUICmdMap[e][t],this.oApp.exec("DISABLE_MESSAGE",[o])},_getAffectedElements:function(e){var t,n;if(!e.bSE2_MDCancelled){e.bSE2_MDCancelled=!0;var r=e.getElementsByTagName("BUTTON");for(var i=0,s=r.length;i<s;i++)r[i].onmousedown=function(){return!1}}if(!e||!e.tagName)return[];if((t=e).tagName=="BUTTON")return(t=t.parentNode)&&t.tagName=="LI"&&this.rxUI.test(t.className)?[jindo.$Element(t)]:(t=e,(t=t.parentNode.parentNode)&&t.tagName=="LI"&&(n=jindo.$Element(t)).hasClass("se2_pair")?[n,jindo.$Element(e.parentNode)]:[]);if((t=e).tagName=="SPAN"){if((t=t.parentNode.parentNode)&&t.tagName=="LI"&&this.rxUI.test(t.className))return[jindo.$Element(t)];if((t=t.parentNode)&&t.tagName=="LI"&&this.rxUI.test(t.className))return[jindo.$Element(t)]}return[]},$ON_REGISTER_UI_EVENT:function(e,t,n,r){if(!this.htUIList[e])return;var i;this.aUICmdMap[e]||(this.aUICmdMap[e]=[]),this.aUICmdMap[e][this.aUICmdMap[e].length]=n,i=jindo.$$.getSingle("button",this.htUIList[e]);if(!i)return;this.oApp.registerBrowserEvent(i,t,n,r)},getToolbarButtonByUIName:function(e){return jindo.$$.getSingle("BUTTON",this.htUIList[e])}}),nhn.husky.SE_EditingAreaManager=jindo.$Class({name:"SE_EditingAreaManager",oActivePlugin:null,elContentsField:null,bIsDirty:!1,bAutoResize:!1,$init:function(e,t,n,r,i){this.sDefaultEditingMode=e,this.elContentsField=jindo.$(t),this._assignHTMLElements(i),this.fOnBeforeUnload=r,this.oEditingMode={},this.elContentsField.style.display="none",this.nMinWidth=parseInt(n.nMinWidth||60,10),this.nMinHeight=parseInt(n.nMinHeight||60,10);var s=this._getSize([n.nWidth,n.width,this.elEditingAreaContainer.offsetWidth],this.nMinWidth),o=this._getSize([n.nHeight,n.height,this.elEditingAreaContainer.offsetHeight],this.nMinHeight);this.elEditingAreaContainer.style.width=s.nSize+s.sUnit,this.elEditingAreaContainer.style.height=o.nSize+o.sUnit,s.sUnit==="px"?i.style.width=s.nSize+2+"px":s.sUnit==="%"&&(i.style.minWidth=this.nMinWidth+"px")},_getSize:function(e,t){var n,r,i,s,o,u="px";t=parseInt(t,10);for(n=0,r=e.length;n<r;n++){if(!e[n])continue;if(!isNaN(e[n])){s=parseInt(e[n],10),o=u;break}i=/([0-9]+)(.*)/i.exec(e[n]);if(!i||i.length<2||i[1]<=0)continue;s=parseInt(i[1],10),o=i[2],o||(o=u),s<t&&o===u&&(s=t);break}o||(o=u);if(isNaN(s)||s<t&&o===u)s=t;return{nSize:s,sUnit:o}},_assignHTMLElements:function(e){this.elEditingAreaContainer=jindo.$$.getSingle("DIV.husky_seditor_editing_area_container",e),this.toolbarArea=jindo.$$.getSingle(".se2_tool",e)},$BEFORE_MSG_APP_READY:function(e){this.oApp.exec("ADD_APP_PROPERTY",["version",nhn.husky.SE_EditingAreaManager.version]),this.oApp.exec("ADD_APP_PROPERTY",["elEditingAreaContainer",this.elEditingAreaContainer]),this.oApp.exec("ADD_APP_PROPERTY",["welEditingAreaContainer",jindo.$Element(this.elEditingAreaContainer)]),this.oApp.exec("ADD_APP_PROPERTY",["getEditingAreaHeight",jindo.$Fn(this.getEditingAreaHeight,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getEditingAreaWidth",jindo.$Fn(this.getEditingAreaWidth,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getRawContents",jindo.$Fn(this.getRawContents,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getContents",jindo.$Fn(this.getContents,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getIR",jindo.$Fn(this.getIR,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["setContents",this.setContents]),this.oApp.exec("ADD_APP_PROPERTY",["setSignArea",this.setSignArea]),this.oApp.exec("ADD_APP_PROPERTY",["setIR",this.setIR]),this.oApp.exec("ADD_APP_PROPERTY",["getEditingMode",jindo.$Fn(this.getEditingMode,this).bind()])},setSignArea:function(e){var t=this.oApp.getContents();if(t.indexOf("<!--sign Area start-->")!=-1&&t.indexOf("<!--sign Area end-->")!=-1){var n=t.split("<!--sign Area start-->")[0],r=t.split("<!--sign Area end-->")[1];t=n+"<!--sign Area start-->"+e+"<!--sign Area end-->"+r,this.oApp.setContents(t)}else{var i="<!--sign Area start-->"+e+"<!--sign Area end-->";$Agent().navigator().ie?i=["<P>&nbsp;</P><P>&nbsp;</P>",i].join(""):i=["<P><BR></P><P><BR></P>",i].join(""),this.oApp.exec("PASTE_HTML",[i])}},$ON_MSG_APP_READY:function(){this.htOptions=this.oApp.htOptions[this.name]||{},this.sDefaultEditingMode=this.htOptions.sDefaultEditingMode||this.sDefaultEditingMode,this.iframeWindow=this.oApp.getWYSIWYGWindow(),this.oApp.exec("REGISTER_CONVERTERS",[]),this.oApp.exec("CHANGE_EDITING_MODE",[this.sDefaultEditingMode,!0]),this.oApp.exec("LOAD_CONTENTS_FIELD",[!1]),this.oApp.exec("REGISTER_HOTKEY",["esc","CLOSE_LAYER_POPUP",[],document]),this.fOnBeforeUnload?window.onbeforeunload=this.fOnBeforeUnload:window.onbeforeunload=jindo.$Fn(function(){if(this.getRawContents()!=this.sCurrentRawContents||this.bIsDirty)return this.oApp.$MSG("SE_EditingAreaManager.onExit")},this).bind()},$ON_CLOSE_LAYER_POPUP:function(){this.oApp.exec("ENABLE_ALL_UI"),this.oApp.exec("DESELECT_UI",["helpPopup"]),this.oApp.exec("HIDE_ALL_DIALOG_LAYER",[]),this.oApp.exec("HIDE_EDITING_AREA_COVER"),this.oApp.exec("FOCUS")},$AFTER_MSG_APP_READY:function(){this.oApp.exec("UPDATE_RAW_CONTENTS"),!!this.oApp.htOptions[this.name]&&this.oApp.htOptions[this.name].bAutoResize&&(this.bAutoResize=this.oApp.htOptions[this.name].bAutoResize),this.oApp.oNavigator.msafari&&(this.bAutoResize=!0),this.startAutoResize()},$ON_LOAD_CONTENTS_FIELD:function(e){var t=this.elContentsField.value;t||(t=""),t=t.replace(/^\s+/,""),this.oApp.exec("SET_CONTENTS",[t,e])},$ON_UPDATE_CONTENTS_FIELD:function(){this.elContentsField.value=this.oApp.getContents(),this.oApp.exec("UPDATE_RAW_CONTENTS")},$ON_UPDATE_RAW_CONTENTS:function(){this.sCurrentRawContents=this.oApp.getRawContents()},$BEFORE_CHANGE_EDITING_MODE:function(e){if(!this.oEditingMode[e])return!1;this.stopAutoResize(),this._oPrevActivePlugin=this.oActivePlugin,this.oActivePlugin=this.oEditingMode[e]},$AFTER_CHANGE_EDITING_MODE:function(e,t){if(this._oPrevActivePlugin){var n=this._oPrevActivePlugin.getIR();this.oApp.exec("SET_IR",[n]),this._setEditingAreaDimension()}this.startAutoResize(),t||this.oApp.delayedExec("FOCUS",[],0)},$ON_SET_IS_DIRTY:function(e){this.bIsDirty=e},$ON_FOCUS:function(e){if(!this.oActivePlugin||typeof this.oActivePlugin.setIR!="function")return;!!this.iframeWindow&&this.iframeWindow.document.hasFocus&&!this.iframeWindow.document.hasFocus()&&this.oActivePlugin.sMode=="WYSIWYG"?this.iframeWindow.focus():this.oActivePlugin.focus();if(e&&this.oApp.bMobile)return;this.oActivePlugin.focus()},$ON_IE_FOCUS:function(){if(!this.oApp.oNavigator.ie)return;this.oApp.exec("FOCUS")},$ON_SET_CONTENTS:function(e,t){this.setContents(e,t)},$BEFORE_SET_IR:function(e,t){t=t||!1,t||this.oApp.exec("RECORD_UNDO_ACTION",["BEFORE SET CONTENTS",{sSaveTarget:"BODY"}])},$ON_SET_IR:function(e){if(!this.oActivePlugin||typeof this.oActivePlugin.setIR!="function")return;this.oActivePlugin.setIR(e)},$AFTER_SET_IR:function(e,t){t=t||!1,t||this.oApp.exec("RECORD_UNDO_ACTION",["AFTER SET CONTENTS",{sSaveTarget:"BODY"}])},$ON_REGISTER_EDITING_AREA:function(e){this.oEditingMode[e.sMode]=e,e.sMode=="WYSIWYG"&&this.attachDocumentEvents(e.oEditingArea),this._setEditingAreaDimension(e)},$ON_MSG_EDITING_AREA_RESIZE_STARTED:function(){this._isLayerReasonablyShown=!1;var e=jindo.$$.getSingle("ul[class^='se2_itool']>li.active",this.toolbarArea,{oneTimeOffCache:!0});if(e)var t=e.parentNode;t&&(t.className=="se2_itool2"||t.className=="se2_itool4")&&(this._isLayerReasonablyShown=!0),this._fitElementInEditingArea(this.elEditingAreaContainer),this.oApp.exec("STOP_AUTORESIZE_EDITING_AREA"),this.oApp.exec("SHOW_EDITING_AREA_COVER"),this.elEditingAreaContainer.style.overflow="hidden",this.iStartingHeight=parseInt(this.elEditingAreaContainer.style.height,10)},$ON_STOP_AUTORESIZE_EDITING_AREA:function(){if(!this.bAutoResize)return;this.stopAutoResize(),this.bAutoResize=!1},startAutoResize:function(){if(!this.bAutoResize||!this.oActivePlugin||typeof this.oActivePlugin.startAutoResize!="function")return;this.oActivePlugin.startAutoResize()},stopAutoResize:function(){if(!this.bAutoResize||!this.oActivePlugin||typeof this.oActivePlugin.stopAutoResize!="function")return;this.oActivePlugin.stopAutoResize()},$ON_RESIZE_EDITING_AREA:function(e,t){e!==null&&typeof e!="undefined"&&this._resizeWidth(e,"px"),t!==null&&typeof t!="undefined"&&this._resizeHeight(t,"px"),this._fitElementInEditingArea(this.elResizingBoard),this._setEditingAreaDimension()},_resizeWidth:function(e,t){var n=parseInt(e,10);n<this.nMinWidth&&(n=this.nMinWidth),e&&(this.elEditingAreaContainer.style.width=n+t)},_resizeHeight:function(e,t){var n=parseInt(e,10);n<this.nMinHeight&&(n=this.nMinHeight),e&&(this.elEditingAreaContainer.style.height=n+t)},$ON_RESIZE_EDITING_AREA_BY:function(e,t){var n=parseInt(e,10),r=parseInt(t,10),i,s;e!==0&&this.elEditingAreaContainer.style.width.indexOf("%")===-1&&(i=this.elEditingAreaContainer.style.width?parseInt(this.elEditingAreaContainer.style.width,10)+n:null),r!==0&&(s=this.elEditingAreaContainer.style.height?this.iStartingHeight+r:null);if(!e&&!r)return;this.oApp.exec("RESIZE_EDITING_AREA",[i,s])},$ON_MSG_EDITING_AREA_RESIZE_ENDED:function(e,t,n){this._isLayerReasonablyShown||this.oApp.exec("HIDE_EDITING_AREA_COVER"),this.elEditingAreaContainer.style.overflow="",this._setEditingAreaDimension()},$ON_SHOW_EDITING_AREA_COVER:function(){this.elResizingBoard||this.createCoverDiv(),this.elResizingBoard.style.display="block"},$ON_HIDE_EDITING_AREA_COVER:function(){if(!this.elResizingBoard)return;this.elResizingBoard.style.display="none"},$ON_KEEP_WITHIN_EDITINGAREA:function(e,t){var n=parseInt(e.style.top,10);n+e.offsetHeight>this.oApp.elEditingAreaContainer.offsetHeight&&(typeof t=="number"?e.style.top=n-e.offsetHeight-t+"px":e.style.top=this.oApp.elEditingAreaContainer.offsetHeight-e.offsetHeight+"px");var r=parseInt(e.style.left,10);r+e.offsetWidth>this.oApp.elEditingAreaContainer.offsetWidth&&(e.style.left=this.oApp.elEditingAreaContainer.offsetWidth-e.offsetWidth+"px")},$ON_EVENT_EDITING_AREA_KEYDOWN:function(){this.oApp.exec("HIDE_ACTIVE_LAYER",[])},$ON_EVENT_EDITING_AREA_MOUSEDOWN:function(){this.oApp.exec("HIDE_ACTIVE_LAYER",[])},$ON_EVENT_EDITING_AREA_SCROLL:function(){this.oApp.exec("HIDE_ACTIVE_LAYER",[])},_setEditingAreaDimension:function(e){e=e||this.oActivePlugin,this._fitElementInEditingArea(e.elEditingArea)},_fitElementInEditingArea:function(e){e.style.height=this.elEditingAreaContainer.offsetHeight+"px"},attachDocumentEvents:function(e){this.oApp.registerBrowserEvent(e,"click","EVENT_EDITING_AREA_CLICK"),this.oApp.registerBrowserEvent(e,"dblclick","EVENT_EDITING_AREA_DBLCLICK"),this.oApp.registerBrowserEvent(e,"mousedown","EVENT_EDITING_AREA_MOUSEDOWN"),this.oApp.registerBrowserEvent(e,"mousemove","EVENT_EDITING_AREA_MOUSEMOVE"),this.oApp.registerBrowserEvent(e,"mouseup","EVENT_EDITING_AREA_MOUSEUP"),this.oApp.registerBrowserEvent(e,"mouseout","EVENT_EDITING_AREA_MOUSEOUT"),this.oApp.registerBrowserEvent(e,"mousewheel","EVENT_EDITING_AREA_MOUSEWHEEL"),this.oApp.registerBrowserEvent(e,"keydown","EVENT_EDITING_AREA_KEYDOWN"),this.oApp.registerBrowserEvent(e,"keypress","EVENT_EDITING_AREA_KEYPRESS"),this.oApp.registerBrowserEvent(e,"keyup","EVENT_EDITING_AREA_KEYUP"),this.oApp.registerBrowserEvent(e,"scroll","EVENT_EDITING_AREA_SCROLL")},createCoverDiv:function(){this.elResizingBoard=document.createElement("DIV"),this.elEditingAreaContainer.insertBefore(this.elResizingBoard,this.elEditingAreaContainer.firstChild),this.elResizingBoard.style.position="absolute",this.elResizingBoard.style.background="#000000",this.elResizingBoard.style.zIndex=100,this.elResizingBoard.style.border=1,this.elResizingBoard.style.opacity=0,this.elResizingBoard.style.filter="alpha(opacity=0.0)",this.elResizingBoard.style.MozOpacity=0,this.elResizingBoard.style["-moz-opacity"]=0,this.elResizingBoard.style["-khtml-opacity"]=0,this._fitElementInEditingArea(this.elResizingBoard),this.elResizingBoard.style.width=this.elEditingAreaContainer.offsetWidth+"px",this.elResizingBoard.style.display="none"},$ON_GET_COVER_DIV:function(e,t){!this.elResizingBoard||(t[e]=this.elResizingBoard)},getIR:function(){return this.oActivePlugin?this.oActivePlugin.getIR():""},setIR:function(e,t){this.oApp.exec("SET_IR",[e,t])},getRawContents:function(){return this.oActivePlugin?this.oActivePlugin.getRawContents():""},getContents:function(){var e=this.oApp.getIR(),t,n=this.oApp.getWYSIWYGDocument().body.style.fontFamily,r=this.oApp.getWYSIWYGDocument().body.style.fontSize;this.oApp.applyConverter?t=this.oApp.applyConverter("IR_TO_DB",e,this.oApp.getWYSIWYGDocument()):t=e,t=this._cleanContents(t);if(n!=""||r!="")t="<div style='font-family:"+n+";font-size:"+r+";'>"+t+"</div>";return t},_cleanContents:function(e){return e.replace(new RegExp("(<img [^>]*>)"+unescape("%uFEFF")+"","ig"),"$1")},setContents:function(e,t){var n;this.oApp.applyConverter?n=this.oApp.applyConverter("DB_TO_IR",e,this.oApp.getWYSIWYGDocument()):n=e,this.oApp.exec("SET_IR",[n,t])},getEditingMode:function(){return this.oActivePlugin.sMode},getEditingAreaWidth:function(){return this.elEditingAreaContainer.offsetWidth},getEditingAreaHeight:function(){return this.elEditingAreaContainer.offsetHeight}});var nSE2Version="12056";nhn.husky.SE_EditingAreaManager.version={revision:"12056",type:"open",number:"2.8.2"},nhn.husky.SE_EditingArea_WYSIWYG=jindo.$Class({name:"SE_EditingArea_WYSIWYG",status:nhn.husky.PLUGIN_STATUS.NOT_READY,sMode:"WYSIWYG",iframe:null,doc:null,bStopCheckingBodyHeight:!1,bAutoResize:!1,nBodyMinHeight:0,nScrollbarWidth:0,iLastUndoRecorded:0,_nIFrameReadyCount:50,bWYSIWYGEnabled:!1,$init:function(e){this.iframe=jindo.$(e);var t=jindo.$Agent().navigator();t.ie&&(this.iframe.style.display="none"),this.sBlankPageURL="smart_editor2_inputarea.html",this.sBlankPageURL_EmulateIE7="smart_editor2_inputarea_ie8.html",this.aAddtionalEmulateIE7=[],this.htOptions=nhn.husky.SE2M_Configuration.SE_EditingAreaManager,this.htOptions&&(this.sBlankPageURL=this.htOptions.sBlankPageURL||this.sBlankPageURL,this.sBlankPageURL_EmulateIE7=this.htOptions.sBlankPageURL_EmulateIE7||this.sBlankPageURL_EmulateIE7,this.aAddtionalEmulateIE7=this.htOptions.aAddtionalEmulateIE7||this.aAddtionalEmulateIE7),this.aAddtionalEmulateIE7.push(8),this.sIFrameSrc=this.sBlankPageURL,t.ie&&jindo.$A(this.aAddtionalEmulateIE7).has(t.nativeVersion)&&(this.sIFrameSrc=this.sBlankPageURL_EmulateIE7);var n=this.sIFrameSrc,e=this.iframe,r=jindo.$Fn(this.initIframe,this).bind(),i=jindo.$Fn(function(){this.iframe.src=n},this).bind();!t.ie||t.version>=9&&!!document.addEventListener?(e.addEventListener("load",r,!1),e.addEventListener("error",i,!1)):(e.attachEvent("onload",r),e.attachEvent("onerror",i)),e.src=n,this.elEditingArea=e},$BEFORE_MSG_APP_READY:function(){this.oEditingArea=this.iframe.contentWindow.document,this.oApp.exec("REGISTER_EDITING_AREA",[this]),this.oApp.exec("ADD_APP_PROPERTY",["getWYSIWYGWindow",jindo.$Fn(this.getWindow,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getWYSIWYGDocument",jindo.$Fn(this.getDocument,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["isWYSIWYGEnabled",jindo.$Fn(this.isWYSIWYGEnabled,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getRawHTMLContents",jindo.$Fn(this.getRawHTMLContents,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["setRawHTMLContents",jindo.$Fn(this.setRawHTMLContents,this).bind()]),!this.isWYSIWYGEnabled()||this.oApp.exec("ENABLE_WYSIWYG_RULER"),this.oApp.registerBrowserEvent(this.getDocument().body,"paste","EVENT_EDITING_AREA_PASTE")},$ON_MSG_APP_READY:function(){this.oApp.hasOwnProperty("saveSnapShot")||(this.$ON_EVENT_EDITING_AREA_MOUSEUP=function(){},this._recordUndo=function(){}),this._bIERangeReset=!0,this.oApp.oNavigator.ie?(jindo.$Fn(function(e){var t=this.iframe.contentWindow.document.selection;t&&t.type.toLowerCase()==="control"&&e.key().keyCode===8&&(this.oApp.exec("EXECCOMMAND",["delete",!1,!1]),e.stop()),this._bIERangeReset=!1},this).attach(this.iframe.contentWindow.document,"keydown"),jindo.$Fn(function(e){this._oIERange=null,this._bIERangeReset=!0},this).attach(this.iframe.contentWindow.document.body,"mousedown"),this.getDocument().createRange||jindo.$Fn(this._onIEBeforeDeactivate,this).attach(this.iframe.contentWindow.document.body,"beforedeactivate"),jindo.$Fn(function(e){this._bIERangeReset=!1},this).attach(this.iframe.contentWindow.document.body,"mouseup")):this.oApp.oNavigator.bGPadBrowser&&(this.$ON_EVENT_TOOLBAR_TOUCHSTART=function(){this._oIERange=this.oApp.getSelection().cloneRange()}),this.fnSetBodyHeight=jindo.$Fn(this._setBodyHeight,this).bind(),this.fnCheckBodyChange=jindo.$Fn(this._checkBodyChange,this).bind(),this.fnSetBodyHeight(),this._setScrollbarWidth()},_setScrollbarWidth:function(){var e=this.getDocument(),t=e.createElement("div");t.style.width="100px",t.style.height="100px",t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",e.body.appendChild(t),this.nScrollbarWidth=t.offsetWidth-t.clientWidth,e.body.removeChild(t)},$AFTER_EVENT_EDITING_AREA_KEYUP:function(e){if(!this.bAutoResize)return;var t=e.key();if(t.keyCode>=33&&t.keyCode<=40||t.alt||t.ctrl||t.keyCode===16)return;this._setAutoResize()},$AFTER_PASTE_HTML:function(){if(!this.bAutoResize)return;this._setAutoResize()},startAutoResize:function(){this.oApp.exec("STOP_CHECKING_BODY_HEIGHT"),this.bAutoResize=!0;var e=this.oApp.oNavigator;e.ie&&e.version<9?jindo.$Element(this.getDocument().body).css({overflow:"visible"}):jindo.$Element(this.getDocument().body).css({overflowX:"visible",overflowY:"hidden"}),this._setAutoResize(),this.nCheckBodyInterval=setInterval(this.fnCheckBodyChange,500),this.oApp.exec("START_FLOAT_TOOLBAR")},stopAutoResize:function(){this.bAutoResize=!1,clearInterval(this.nCheckBodyInterval),this.oApp.exec("STOP_FLOAT_TOOLBAR"),jindo.$Element(this.getDocument().body).css({overflow:"visible",overflowY:"visible"}),this.oApp.exec("START_CHECKING_BODY_HEIGHT")},_checkBodyChange:function(){if(!this.bAutoResize)return;var e=this.getDocument().body.innerHTML.length;e!==this.nBodyLength&&(this.nBodyLength=e,this._setAutoResize())},_getResizeHeight:function(){var e=this.getDocument().body,t,n,r=["width","fontFamily","fontSize","fontWeight","fontStyle","lineHeight","letterSpacing","textTransform","wordSpacing"],i,s;if(this.oApp.oNavigator.msafari||!this.oApp.oNavigator.firefox&&!this.oApp.oNavigator.safari)return this.oApp.oNavigator.ie&&this.oApp.oNavigator.version===8&&document.documentMode===8&&jindo.$Element(e).css("height","0px"),n=parseInt(e.scrollHeight,10),n<this.nBodyMinHeight&&(n=this.nBodyMinHeight),n;this.elDummy||(this.elDummy=document.createElement("div"),this.elDummy.className="se2_input_wysiwyg",this.oApp.elEditingAreaContainer.appendChild(this.elDummy),this.elDummy.style.cssText="position:absolute !important; left:-9999px !important; top:-9999px !important; z-index: -9999 !important; overflow: auto !important;",this.elDummy.style.height=this.nBodyMinHeight+"px"),t=jindo.$Element(e),s=r.length,i={};while(s--)i[r[s]]=t.css(r[s]);return i.lineHeight.indexOf("px")>-1&&(i.lineHeight=parseInt(i.lineHeight,10)/parseInt(i.fontSize,10)),jindo.$Element(this.elDummy).css(i),this.elDummy.innerHTML=e.innerHTML,n=this.elDummy.scrollHeight,n},_setAutoResize:function(){var e=this.getDocument().body,t=jindo.$Element(e),n,r,i,s,o=!1,u=this.oApp.oNavigator;this.nTopBottomMargin=this.nTopBottomMargin||parseInt(t.css("marginTop"),10)+parseInt(t.css("marginBottom"),10),this.nBodyMinHeight=this.nBodyMinHeight||this.oApp.getEditingAreaHeight()-this.nTopBottomMargin;if(u.ie&&u.nativeVersion>=9||u.chrome||this.oApp.oNavigator.msafari)t.css("height","0px"),this.iframe.style.height="0px";n=this._getResizeHeight(),u.ie?n>this.nBodyMinHeight?(i=this.oApp.getCurrentStyle(),s=this._getStyleSize(i),s<this.nTopBottomMargin&&(s=this.nTopBottomMargin),r=n+s,r+=18,o=!0):(n=this.nBodyMinHeight,r=this.nBodyMinHeight+this.nTopBottomMargin):n>this.nBodyMinHeight?(i=this.oApp.getCurrentStyle(),s=this._getStyleSize(i),s<this.nTopBottomMargin&&(s=this.nTopBottomMargin),r=n+s,o=!0):(n=this.nBodyMinHeight,r=this.nBodyMinHeight+this.nTopBottomMargin),u.firefox||t.css("height",n+"px"),this.iframe.style.height=r+"px",this.oApp.welEditingAreaContainer.height(r),this.oApp.oNavigator.msafari||this.oApp.checkResizeGripPosition(o)},_getStyleSize:function(e){var t;if(e){var n=e.lineHeight;if(n&&/[^\d\.]/.test(n))if(/\d/.test(n)&&/[A-Za-z]/.test(n)){if(/px$/.test(n))return parseFloat(n,10);if(/pt$/.test(n))return parseFloat(n,10)*4/3;if(/em$/.test(n))return parseFloat(n,10)*16;if(/cm$/.test(n))return parseFloat(n,10)*96/2.54}else/\d/.test(n)&&/%/.test(n)?n=parseFloat(n,10)*100:/[^A-Za-z]/.test(n)||(n=1.2);var r=e.fontSize;r&&!/px$/.test(r)&&(/pt$/.test(r)?r=parseFloat(r,10)*4/3+"px":/em$/.test(r)?r=parseFloat(r,10)*16+"px":/cm$/.test(r)?r=parseFloat(r,10)*96/2.54+"px":r=="medium"?r="16px":r="16px"),t=parseFloat(r,10)*n}else t=18;return t},_setBodyHeight:function(){if(this.bStopCheckingBodyHeight)return;var e=this.getDocument().body,t=jindo.$Element(e),n=parseInt(t.css("marginTop"),10)+parseInt(t.css("marginBottom"),10),r=this.oApp.getEditingAreaHeight(),i=r-n,s=t.height(),o,u;this.nTopBottomMargin=n;if(s===0){t.css("height",i+"px"),setTimeout(this.fnSetBodyHeight,500);return}var a=jindo.$Agent().navigator(),f=a.ie&&a.nativeVersion===11,l=this.nBodyHeight_last===s;(!f||!l)&&t.css("height","0px"),o=parseInt(e.scrollHeight,10),u=o>r?o-n:i,this._isHorizontalScrollbarVisible()&&(u-=this.nScrollbarWidth),(!f||!l)&&t.css("height",u+"px"),this.nBodyHeight_last=u,setTimeout(this.fnSetBodyHeight,500)},_isHorizontalScrollbarVisible:function(){var e=this.getDocument();return e.documentElement.clientWidth<e.documentElement.scrollWidth?!0:!1},$ON_STOP_CHECKING_BODY_HEIGHT:function(){this.bStopCheckingBodyHeight||(this.bStopCheckingBodyHeight=!0)},$ON_START_CHECKING_BODY_HEIGHT:function(){this.bStopCheckingBodyHeight&&(this.bStopCheckingBodyHeight=!1,this.fnSetBodyHeight())},$ON_IE_CHECK_EXCEPTION_FOR_SELECTION_PRESERVATION:function(){var e=this.getDocument().selection;e&&e.type==="Control"&&(this._oIERange=null)},_onIEBeforeDeactivate:function(e){this.oApp.delayedExec("IE_CHECK_EXCEPTION_FOR_SELECTION_PRESERVATION",null,0);if(this._oIERange)return;if(this._bIERangeReset)return;this._oIERange=this.oApp.getSelection().cloneRange()},$ON_CHANGE_EDITING_MODE:function(e,t){if(e===this.sMode){var n=jindo.$Agent().navigator();if(n.ie&&n.nativeVersion>8){var r=jindo.$$.getSingle("DIV.husky_seditor_editing_area_container").childNodes[0];r.tagName=="DIV"&&r.style.zIndex==1e3&&r.parentNode.removeChild(r)}this.iframe.style.visibility="visible",this.iframe.style.display!="block"&&(this.iframe.style.display="block"),this.oApp.exec("REFRESH_WYSIWYG"),this.oApp.exec("SET_EDITING_WINDOW",[this.getWindow()]),this.oApp.exec("START_CHECKING_BODY_HEIGHT")}else this.iframe.style.visibility="hidden",this.oApp.exec("STOP_CHECKING_BODY_HEIGHT")},$AFTER_CHANGE_EDITING_MODE:function(e,t){this._oIERange=null},$ON_REFRESH_WYSIWYG:function(){if(!jindo.$Agent().navigator().firefox)return;this._disableWYSIWYG(),this._enableWYSIWYG()},$ON_ENABLE_WYSIWYG:function(){this._enableWYSIWYG()},$ON_DISABLE_WYSIWYG:function(){this._disableWYSIWYG()},$ON_IE_HIDE_CURSOR:function(){if(!this.oApp.oNavigator.ie)return;this._onIEBeforeDeactivate();var e=this.oApp.getWYSIWYGDocument().selection;if(e&&e.createRange)try{e.empty()}catch(t){e=this.oApp.getSelection(),e.select(),e.oBrowserSelection.selectNone()}else this.oApp.getEmptySelection().oBrowserSelection.selectNone()},$AFTER_SHOW_ACTIVE_LAYER:function(){this.oApp.exec("IE_HIDE_CURSOR"),this.bActiveLayerShown=!0},$BEFORE_EVENT_EDITING_AREA_KEYDOWN:function(e){this._bKeyDown=!0},$ON_EVENT_EDITING_AREA_KEYDOWN:function(e){if(this.oApp.getEditingMode()!==this.sMode)return;var t=e.key();if(this.oApp.oNavigator.ie)switch(t.keyCode){case 33:this._pageUp(e);break;case 34:this._pageDown(e);break;case 8:this._backspace(e);break;default:}else this.oApp.oNavigator.firefox&&t.keyCode===8&&this._backspace(e);this._recordUndo(t)},_backspace:function(e){var t=this.oApp.getSelection(),n=null;if(!t.collapsed)return;n=t.getNodeAroundRange(!0,!1);if(n&&n.nodeType===3)if(/^[\n]*$/.test(n.nodeValue))n=n.previousSibling;else if(n.nodeValue==="\u200b"||n.nodeValue==="\ufeff")n.nodeValue="";!!n&&n.nodeType===1&&n.tagName==="TABLE"&&(jindo.$Element(n).leave(),e.stop(jindo.$Event.CANCEL_ALL))},$BEFORE_EVENT_EDITING_AREA_KEYUP:function(e){if(!this._bKeyDown)return!1;this._bKeyDown=!1},$ON_EVENT_EDITING_AREA_MOUSEUP:function(e){this.oApp.saveSnapShot()},$BEFORE_PASTE_HTML:function(){this.oApp.getEditingMode()!==this.sMode&&this.oApp.exec("CHANGE_EDITING_MODE",[this.sMode])},$ON_PASTE_HTML:function(e,t,n){var r,i,s,o,u,a,f,l;if(this.oApp.getEditingMode()!==this.sMode)return;n||this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["PASTE HTML"]),i=jindo.$Agent().navigator(),r=t||this.oApp.getSelection(),i.ie&&i.nativeVersion==8&&document.documentMode==8&&(e+=unescape("%uFEFF")),r.pasteHTML(e),i.ie?(r.collapseToEnd(),r.select(),this._oIERange=null,this._bIERangeReset=!1):(s=r.placeStringBookmark(),this.oApp.getWYSIWYGDocument().body.innerHTML=this.oApp.getWYSIWYGDocument().body.innerHTML,r.moveToBookmark(s),r.collapseToEnd(),r.select(),r.removeStringBookmark(s),r=this.oApp.getSelection(),!t||t.setRange(r));if(e.indexOf("<img")>-1){o=r.startContainer;if(o.nodeType===1&&o.tagName==="P"){u=jindo.$Element(o).child(function(e){return e.$value().nodeType===1&&e.$value().tagName==="IMG"},1);if(u.length>0){a=u[u.length-1].$value(),f=a.nextSibling;while(f)l=f.nextSibling,f.nodeType===3&&(f.nodeValue==="&nbsp;"||f.nodeValue===unescape("%u00A0"))&&o.removeChild(f),f=l}}}n||this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["PASTE HTML"])},$ON_FOCUS_N_CURSOR:function(e,t){var n,r;if(t&&(n=jindo.$(t,this.getDocument()))){clearTimeout(this._nTimerFocus),this._nTimerFocus=setTimeout(jindo.$Fn(function(e){this._scrollIntoView(e),this.oApp.exec("FOCUS")},this).bind(n),300);return}r=this.oApp.getSelection(),r.collapsed?e?(this.oApp.exec("FOCUS"),n=this.getDocument().body,r.selectNode(n),r.collapseToEnd(),r.select(),this._scrollIntoView(n)):this.oApp.exec("FOCUS"):(e?r.collapseToEnd():r.collapseToStart(),r.select())},_getElementVerticalPosition:function(e){var t=0,n=e,r={nTop:0,nBottom:0};if(!e)return r;try{while(n)t+=n.offsetTop,n=n.offsetParent}catch(i){}return r.nTop=t,r.nBottom=t+jindo.$Element(e).height(),r},_getVisibleVerticalPosition:function(){var e,t,n,r={nTop:0,nBottom:0};return e=this.getWindow(),t=this.getDocument(),n=e.innerHeight?e.innerHeight:t.documentElement.clientHeight||t.body.clientHeight,r.nTop=e.pageYOffset||t.documentElement.scrollTop,r.nBottom=r.nTop+n,r},_isElementVisible:function(e,t){return e.nTop>=t.nTop&&e.nBottom<=t.nBottom},_scrollIntoView:function(e){var t=this._getElementVerticalPosition(e),n=this._getVisibleVerticalPosition(),r=0;if(this._isElementVisible(t,n))return;if((r=t.nBottom-n.nBottom)>0){this.getWindow().scrollTo(0,n.nTop+r);return}this.getWindow().scrollTo(0,t.nTop)},$BEFORE_MSG_EDITING_AREA_RESIZE_STARTED:function(){if(!jindo.$Agent().navigator().ie){var e=null;e=this.oApp.getSelection(),this.sBM=e.placeStringBookmark()}},$AFTER_MSG_EDITING_AREA_RESIZE_ENDED:function(e,t,n){if(this.oApp.getEditingMode()!==this.sMode)return;this.oApp.exec("REFRESH_WYSIWYG");if(!jindo.$Agent().navigator().ie){var r=this.oApp.getEmptySelection();r.moveToBookmark(this.sBM),r.select(),r.removeStringBookmark(this.sBM)}},$ON_CLEAR_IE_BACKUP_SELECTION:function(){this._oIERange=null},$ON_RESTORE_IE_SELECTION:function(){if(this._oIERange)try{this._oIERange.select(),this._oPrevIERange=this._oIERange,this._oIERange=null}catch(e){}},$ON_EVENT_EDITING_AREA_PASTE:function(e){this.oApp.delayedExec("EVENT_EDITING_AREA_PASTE_DELAY",[e],0)},$ON_EVENT_EDITING_AREA_PASTE_DELAY:function(e){this._replaceBlankToNbsp(e.element),this._DAOUOFFICE_IE_TABLE_CLASS_CONVERTER()},_DAOUOFFICE_IE_TABLE_CLASS_CONVERTER:function(){var e=this.oApp.oNavigator;if(!e.ie)return;var t=jindo.$$('table[class!="__se_tbl"]',this.oApp.getWYSIWYGDocument().body,{oneTimeOffCache:!0});jindo.$A(t).forEach(function(e){jindo.$Element(e).addClass("__se_tbl")})},_replaceBlankToNbsp:function(e){var t=this.oApp.oNavigator;if(!t.ie)return;if(t.nativeVersion!==9||document.documentMode!==7)return;if(e.nodeType!==1)return;if(e.tagName==="BR")return;var n=jindo.$$("p:empty()",this.oApp.getWYSIWYGDocument().body,{oneTimeOffCache:!0});jindo.$A(n).forEach(function(e,t,n){e.innerHTML="&nbsp;"})},_pageUp:function(e){var t=this._getEditorHeight(),n=jindo.$Document(this.oApp.getWYSIWYGDocument()).scrollPosition(),r;n.top<=t?r=0:r=n.top-t,this.oApp.getWYSIWYGWindow().scrollTo(0,r),e.stop()},_pageDown:function(e){var t=this._getEditorHeight(),n=jindo.$Document(this.oApp.getWYSIWYGDocument()).scrollPosition(),r=this._getBodyHeight(),i;n.top+t>=r?i=r-t:i=n.top+t,this.oApp.getWYSIWYGWindow().scrollTo(0,i),e.stop()},_getEditorHeight:function(){return this.oApp.elEditingAreaContainer.offsetHeight-this.nTopBottomMargin},_getBodyHeight:function(){return parseInt(this.getDocument().body.scrollHeight,10)},initIframe:function(){try{if(!this.iframe.contentWindow.document||!this.iframe.contentWindow.document.body||this.iframe.contentWindow.document.location.href==="about:blank")throw new Error("Access denied");var e=!!nhn.husky.SE2M_Configuration.SE2M_CSSLoader&&nhn.husky.SE2M_Configuration.SE2M_CSSLoader.sCSSBaseURI?nhn.husky.SE2M_Configuration.SE2M_CSSLoader.sCSSBaseURI:"";!nhn.husky.SE2M_Configuration.SE_EditingAreaManager.sCSSBaseURI||(e=nhn.husky.SE2M_Configuration.SE_EditingAreaManager.sCSSBaseURI);if(e){var t=this.getDocument(),n=t.getElementsByTagName("head")[0],r=t.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e+"/smart_editor2_in.css",r.onload=jindo.$Fn(function(){this.oApp&&this.oApp.getEditingMode&&this.oApp.getEditingMode()===this.sMode&&this.oApp.exec("RESET_STYLE_STATUS")},this).bind(),n.appendChild(r)}this._enableWYSIWYG(),this.status=nhn.husky.PLUGIN_STATUS.READY}catch(i){if(!(this._nIFrameReadyCount-->0))throw"iframe for WYSIWYG editing mode can't be initialized. Please check if the iframe document exists and is also accessable(cross-domain issues). ";setTimeout(jindo.$Fn(this.initIframe,this).bind(),100)}},getIR:function(){var e=this.iframe.contentWindow.document.body.innerHTML,t;return this.oApp.applyConverter?t=this.oApp.applyConverter(this.sMode+"_TO_IR",e,this.oApp.getWYSIWYGDocument()):t=e,t},setIR:function(e){var t,n=this.oApp.oNavigator,r=n.ie&&document.documentMode<11,i=r?"":"<br>";this.oApp.applyConverter?t=this.oApp.applyConverter("IR_TO_"+this.sMode,e,this.oApp.getWYSIWYGDocument()):t=e,t.replace(/[\r\n\t\s]*/,"")===""&&(this.oApp.sLineBreaker!=="BR"&&(i="<p>"+i+"</p>"),t=i),this.iframe.contentWindow.document.body.innerHTML=t;if(r&&this.oApp.getEditingMode()===this.sMode){var s=this.oApp.getWYSIWYGDocument().body.getElementsByTagName("P");for(var o=0,u=s.length;o<u;o++)s[o].childNodes.length===1&&s[o].innerHTML==="&nbsp;"&&(s[o].innerHTML="")}},getRawContents:function(){return this.iframe.contentWindow.document.body.innerHTML},getRawHTMLContents:function(){return this.getRawContents()},setRawHTMLContents:function(e){this.iframe.contentWindow.document.body.innerHTML=e},getWindow:function(){return this.iframe.contentWindow},getDocument:function(){return this.iframe.contentWindow.document},focus:function(){this.getDocument().body.focus(),this.oApp.exec("RESTORE_IE_SELECTION")},_recordUndo:function(e){if(e.keyCode>=33&&e.keyCode<=40){this.oApp.saveSnapShot();return}if(e.alt||e.ctrl||e.keyCode===16)return;if(this.oApp.getLastKey()===e.keyCode)return;this.oApp.setLastKey(e.keyCode);if(!e.enter&&e.keyCode!==46&&e.keyCode!==8)return;this.oApp.exec("RECORD_UNDO_ACTION",["KEYPRESS("+e.keyCode+")",{bMustBlockContainer:!0}])},_enableWYSIWYG:function(){this.iframe.contentWindow.document.body.contentEditable!==null?this.iframe.contentWindow.document.body.contentEditable=!0:this.iframe.contentWindow.document.designMode="on",this.bWYSIWYGEnabled=!0,jindo.$Agent().navigator().firefox&&setTimeout(jindo.$Fn(function(){this.iframe.contentWindow.document.execCommand("enableInlineTableEditing",!1,!1)},this).bind(),0)},_disableWYSIWYG:function(){this.iframe.contentWindow.document.body.contentEditable!==null?this.iframe.contentWindow.document.body.contentEditable=!1:this.iframe.contentWindow.document.designMode="off",this.bWYSIWYGEnabled=!1},isWYSIWYGEnabled:function(){return this.bWYSIWYGEnabled}}),nhn.husky.SE_EditingArea_HTMLSrc=jindo.$Class({name:"SE_EditingArea_HTMLSrc",sMode:"HTMLSrc",bAutoResize:!1,nMinHeight:null,$init:function(e){this.elEditingArea=jindo.$(e)},$BEFORE_MSG_APP_READY:function(){this.oNavigator=jindo.$Agent().navigator(),this.oApp.exec("REGISTER_EDITING_AREA",[this])},$ON_MSG_APP_READY:function(){!this.oApp.getEditingAreaHeight||(this.nMinHeight=this.oApp.getEditingAreaHeight())},$ON_CHANGE_EDITING_MODE:function(e){e==this.sMode?(this.elEditingArea.style.display="block",this.elEditingArea.style.position="absolute",this.elEditingArea.style.top="0px"):(this.elEditingArea.style.display="none",this.elEditingArea.style.position="",this.elEditingArea.style.top="")},$AFTER_CHANGE_EDITING_MODE:function(e,t){if(e==this.sMode&&!t){var n=new TextRange(this.elEditingArea);n.setSelection(0,0)}},startAutoResize:function(){var e={nMinHeight:this.nMinHeight,wfnCallback:jindo.$Fn(this.oApp.checkResizeGripPosition,this).bind()};this.oNavigator.msafari&&(e.wfnCallback=function(){}),this.bAutoResize=!0,this.AutoResizer=new nhn.husky.AutoResizer(this.elEditingArea,e),this.AutoResizer.bind()},stopAutoResize:function(){this.AutoResizer.unbind()},getIR:function(){var e=this.getRawContents();return this.oApp.applyConverter&&(e=this.oApp.applyConverter(this.sMode+"_TO_IR",e,this.oApp.getWYSIWYGDocument())),e},setIR:function(e){if(e.toLowerCase()==="<br>"||e.toLowerCase()==="<p>&nbsp;</p>"||e.toLowerCase()==="<p><br></p>"||e.toLowerCase()==="<p></p>")e="";var t=jindo.$Agent().navigator();t.ie&&t.nativeVersion==11&&document.documentMode==11&&(e=e.replace(/(<br><br>$)/,""));var n=e;this.oApp.applyConverter&&(n=this.oApp.applyConverter("IR_TO_"+this.sMode,n,this.oApp.getWYSIWYGDocument())),this.setRawContents(n)},setRawContents:function(e){typeof e!="undefined"&&(this.elEditingArea.value=e)},getRawContents:function(){return this.elEditingArea.value},focus:function(){this.elEditingArea.focus()}}),typeof window.TextRange=="undefined"&&(window.TextRange={}),TextRange=function(e,t){this._o=e,this._oDoc=t||document},TextRange.prototype.getSelection=function(){var e=this._o,t=[-1,-1];if(isNaN(this._o.selectionStart)){e.focus();var n=this._oDoc.body.createTextRange(),r=null;r=this._oDoc.selection.createRange().duplicate(),n.moveToElementText(e),r.collapse(!0),n.setEndPoint("EndToEnd",r),t[0]=n.text.length,r=this._oDoc.selection.createRange().duplicate(),n.moveToElementText(e),r.collapse(!1),n.setEndPoint("EndToEnd",r),t[1]=n.text.length,e.blur()}else t[0]=e.selectionStart,t[1]=e.selectionEnd;return t},TextRange.prototype.setSelection=function(e,t){var n=this._o;typeof t=="undefined"&&(t=e);if(n.setSelectionRange)n.setSelectionRange(e,t);else if(n.createTextRange){var r=n.createTextRange();r.collapse(!0),r.moveStart("character",e),r.moveEnd("character",t-e),r.select(),n.blur()}},TextRange.prototype.copy=function(){var e=this.getSelection();return this._o.value.substring(e[0],e[1])},TextRange.prototype.paste=function(e){var t=this._o,n=this.getSelection(),r=t.value,i=r.substr(0,n[0]),s=r.substr(n[1]);r=i+e+s,t.value=r;var o=0;if(typeof this._oDoc.body.style.maxHeight=="undefined"){var u=i.match(/\n/gi);o=u!==null?u.length:0}this.setSelection(n[0]+e.length-o)},TextRange.prototype.cut=function(){var e=this.copy();return this.paste(""),e},nhn.husky.SE_EditingArea_TEXT=jindo.$Class({name:"SE_EditingArea_TEXT",sMode:"TEXT",sRxConverter:"@[0-9]+@",bAutoResize:!1,nMinHeight:null,$init:function(e){this.elEditingArea=jindo.$(e)},$BEFORE_MSG_APP_READY:function(){this.oNavigator=jindo.$Agent().navigator(),this.oApp.exec("REGISTER_EDITING_AREA",[this]),this.oApp.exec("ADD_APP_PROPERTY",["getTextAreaContents",jindo.$Fn(this.getRawContents,this).bind()])},$ON_MSG_APP_READY:function(){!this.oApp.getEditingAreaHeight||(this.nMinHeight=this.oApp.getEditingAreaHeight())},$ON_REGISTER_CONVERTERS:function(){this.oApp.exec("ADD_CONVERTER",["IR_TO_TEXT",jindo.$Fn(this.irToText,this).bind()]),this.oApp.exec("ADD_CONVERTER",["TEXT_TO_IR",jindo.$Fn(this.textToIr,this).bind()])},$ON_CHANGE_EDITING_MODE:function(e){e==this.sMode?(this.elEditingArea.style.display="block",this.elEditingArea.style.position="absolute",this.elEditingArea.style.top="0px"):(this.elEditingArea.style.display="none",this.elEditingArea.style.position="",this.elEditingArea.style.top="")},$AFTER_CHANGE_EDITING_MODE:function(e,t){if(e==this.sMode&&!t){var n=new TextRange(this.elEditingArea);n.setSelection(0,0)}},irToText:function(e){var t=e,n=0,r=t.match(new RegExp(this.sRxConverter));return r!==null&&(t=t.replace(new RegExp(this.sRxConverter),"")),t=t.replace(/\r/g,""),t=t.replace(/[\n|\t]/g,""),t=t.replace(/[\v|\f]/g,""),t=t.replace(/<p><br><\/p>/gi,"\n"),t=t.replace(/<P>&nbsp;<\/P>/gi,"\n"),t=t.replace(/<br(\s)*\/?>/gi,"\n"),t=t.replace(/<br(\s[^\/]*)?>/gi,"\n"),t=t.replace(/<\/p(\s[^\/]*)?>/gi,"\n"),t=t.replace(/<\/li(\s[^\/]*)?>/gi,"\n"),t=t.replace(/<\/tr(\s[^\/]*)?>/gi,"\n"),n=t.lastIndexOf("\n"),n>-1&&t.substring(n)=="\n"&&(t=t.substring(0,n)),t=jindo.$S(t).stripTags().toString(),t=this.unhtmlSpecialChars(t),r!==null&&(t=r[0]+t),t},textToIr:function(e){if(!e)return;var t=e,n=null;return n=t.match(new RegExp(this.sRxConverter)),n!==null&&(t=t.replace(n[0],"")),t=this.htmlSpecialChars(t),t=this._addLineBreaker(t),n!==null&&(t=n[0]+t),t},_addLineBreaker:function(e){if(this.oApp.sLineBreaker==="BR")return e.replace(/\r?\n/g,"<BR>");var t=new StringBuffer,n=e.split("\n"),r=n.length,i="";for(var s=0;s<r;s++){i=jindo.$S(n[s]).trim().$value();if(s===r-1&&i==="")break;i!==null&&i!==""?(t.append("<P>"),t.append(n[s]),t.append("</P>")):jindo.$Agent().navigator().ie?t.append("<P>&nbsp;</P>"):t.append("<P><BR></P>")}return t.toString()},startAutoResize:function(){var e={nMinHeight:this.nMinHeight,wfnCallback:jindo.$Fn(this.oApp.checkResizeGripPosition,this).bind()};this.oNavigator.msafari&&(e.wfnCallback=function(){}),this.bAutoResize=!0,this.AutoResizer=new nhn.husky.AutoResizer(this.elEditingArea,e),this.AutoResizer.bind()},stopAutoResize:function(){this.AutoResizer.unbind()},getIR:function(){var e=this.getRawContents();return this.oApp.applyConverter&&(e=this.oApp.applyConverter(this.sMode+"_TO_IR",e,this.oApp.getWYSIWYGDocument())),e},setIR:function(e){var t=e;this.oApp.applyConverter&&(t=this.oApp.applyConverter("IR_TO_"+this.sMode,t,this.oApp.getWYSIWYGDocument())),this.setRawContents(t)},setRawContents:function(e){typeof e!="undefined"&&(this.elEditingArea.value=e)},getRawContents:function(){return this.elEditingArea.value},focus:function(){this.elEditingArea.focus()},htmlSpecialChars:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;")},unhtmlSpecialChars:function(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&amp;/g,"&")}}),nhn.husky.SE2M_EditingAreaRuler=jindo.$Class({name:"SE2M_EditingAreaRuler",$init:function(e){this._assignHTMLElements(e),this.htConfig=nhn.husky.SE2M_Configuration.SE2M_EditingAreaRuler||{}},_assignHTMLElements:function(e){this.elEditingAreaRuler=jindo.$$.getSingle("DIV.se2_editor_mark",e)},_adjustWysiwygWidth:function(){var e=jindo.$Element(this.oApp.getWYSIWYGDocument().body);if(!e||!this.htConfig[this.nRulerWidth])return;var t="{"+this.htConfig[this.nRulerWidth].sStyle.replace(/;/ig,",").replace(/\"/ig,"")+"}",n=jindo.$Json(t.replace(/(\w+)\s?:\s?([\w\s]*[^,}])/ig,'$1:"$2"'));e.css(n.toObject());var r=jindo.$Element(this.elEditingAreaRuler),i={width:e.css("width"),marginLeft:e.css("marginLeft"),top:e.css("marginTop")};r.css(i),this.bUse?r.show():r.hide()},$ON_ENABLE_WYSIWYG_RULER:function(){!this.oApp.htOptions[this.name]||(this.bUse=this.oApp.htOptions[this.name].bUse||!1,this.nRulerWidth=this.oApp.htOptions[this.name].nRulerWidth||0);if(!this.elEditingAreaRuler||0>=this.nRulerWidth)return;this._adjustWysiwygWidth()},$ON_CHANGE_EDITING_MODE:function(e){if(!this.elEditingAreaRuler)return;"WYSIWYG"!==e||!this.bUse||!this.htConfig[this.nRulerWidth]?jindo.$Element(this.elEditingAreaRuler).hide():jindo.$Element(this.elEditingAreaRuler).show()}}),nhn.husky.SE_EditingAreaVerticalResizer=jindo.$Class({name:"SE_EditingAreaVerticalResizer",oResizeGrip:null,sCookieNotice:"bHideResizeNotice",nEditingAreaMinHeight:null,htConversionMode:null,$init:function(e,t){this.htConversionMode=t,this._assignHTMLElements(e)},$BEFORE_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["isUseVerticalResizer",jindo.$Fn(this.isUseVerticalResizer,this).bind()])},$ON_MSG_APP_READY:function(){this.oApp.bMobile?(this.oResizeGrip.disabled=!0,this.oResizeGrip.style.height="0"):(this.oApp.exec("REGISTER_HOTKEY",["shift+esc","FOCUS_RESIZER"]),this.isUseVerticalResizer()?(this.oResizeGrip.style.display="block",!!this.welNoticeLayer&&!Number(jindo.$Cookie().get(this.sCookieNotice))&&(this.welNoticeLayer.delegate("click","BUTTON.bt_clse",jindo.$Fn(this._closeNotice,this).bind()),this.welNoticeLayer.show()),this.$FnMouseDown=jindo.$Fn(this._mousedown,this),this.$FnMouseMove=jindo.$Fn(this._mousemove,this),this.$FnMouseUp=jindo.$Fn(this._mouseup,this),this.$FnMouseOver=jindo.$Fn(this._mouseover,this),this.$FnMouseOut=jindo.$Fn(this._mouseout,this),this.$FnMouseDown.attach(this.oResizeGrip,"mousedown"),this.$FnMouseOver.attach(this.oResizeGrip,"mouseover"),this.$FnMouseOut.attach(this.oResizeGrip,"mouseout")):(this.oResizeGrip.style.display="none",this.oApp.isUseModeChanger()||(this.elModeToolbar.style.display="none"))),this.oApp.exec("ADD_APP_PROPERTY",["checkResizeGripPosition",jindo.$Fn(this.checkResizeGripPosition,this).bind()]),!!this.welNoticeLayer&&!Number(jindo.$Cookie().get(this.sCookieNotice))&&this.isUseVerticalResizer()&&(this.welNoticeLayer.delegate("click","BUTTON.bt_clse",jindo.$Fn(this._closeNotice,this).bind()),this.welNoticeLayer.show()),!this.oApp.getEditingAreaHeight||(this.nEditingAreaMinHeight=this.oApp.getEditingAreaHeight())},isUseVerticalResizer:function(){return typeof this.htConversionMode=="undefined"||typeof this.htConversionMode.bUseVerticalResizer=="undefined"||this.htConversionMode.bUseVerticalResizer===!0?!0:!1},checkResizeGripPosition:function(e){var t=jindo.$Document(),n=jindo.$Element(this.oResizeGrip).offset().top-t.scrollPosition().top+25-t.clientSize().height;if(n<=0)return;e&&(this.nEditingAreaMinHeight>this.oApp.getEditingAreaHeight()-n&&(n=-1*(this.nEditingAreaMinHeight-this.oApp.getEditingAreaHeight())),this.oApp.exec("MSG_EDITING_AREA_RESIZE_STARTED"),this.oApp.exec("RESIZE_EDITING_AREA_BY",[0,-1*n]),this.oApp.exec("MSG_EDITING_AREA_RESIZE_ENDED")),this.oApp.exec("STOP_AUTORESIZE_EDITING_AREA")},$ON_FOCUS_RESIZER:function(){this.oApp.exec("IE_HIDE_CURSOR"),this.oResizeGrip.focus()},_assignHTMLElements:function(e,t){this.oResizeGrip=jindo.$$.getSingle("BUTTON.husky_seditor_editingArea_verticalResizer",e),this.elModeToolbar=jindo.$$.getSingle("DIV.se2_conversion_mode",e),this.welNoticeLayer=jindo.$Element(jindo.$$.getSingle("DIV.husky_seditor_resize_notice",e)),this.welConversionMode=jindo.$Element(this.oResizeGrip.parentNode)},_mouseover:function(e){e.stopBubble(),this.welConversionMode.addClass("controller_on")},_mouseout:function(e){e.stopBubble(),this.welConversionMode.removeClass("controller_on")},_mousedown:function(e){this.iStartHeight=e.pos().clientY,this.iStartHeightOffset=e.pos().layerY,this.$FnMouseMove.attach(document,"mousemove"),this.$FnMouseUp.attach(document,"mouseup"),this.iStartHeight=e.pos().clientY,this.oApp.exec("HIDE_ACTIVE_LAYER"),this.oApp.exec("HIDE_ALL_DIALOG_LAYER"),this.oApp.exec("MSG_EDITING_AREA_RESIZE_STARTED",[this.$FnMouseDown,this.$FnMouseMove,this.$FnMouseUp])},_mousemove:function(e){var t=e.pos().clientY-this.iStartHeight;this.oApp.exec("RESIZE_EDITING_AREA_BY",[0,t])},_mouseup:function(e){this.$FnMouseMove.detach(document,"mousemove"),this.$FnMouseUp.detach(document,"mouseup"),this.oApp.exec("MSG_EDITING_AREA_RESIZE_ENDED",[this.$FnMouseDown,this.$FnMouseMove,this.$FnMouseUp])},_closeNotice:function(){this.welNoticeLayer.hide(),jindo.$Cookie().set(this.sCookieNotice,1,3650)}}),nhn.husky.SE_WYSIWYGEnterKey=jindo.$Class({name:"SE_WYSIWYGEnterKey",$init:function(e){e=="BR"?this.sLineBreaker="BR":this.sLineBreaker="P",this.htBrowser=jindo.$Agent().navigator(),this.htBrowser.opera&&this.sLineBreaker=="P"&&(this.$ON_MSG_APP_READY=function(){}),this.htBrowser.ie?this._addCursorHolder=this._addCursorHolderSpace:(this._addExtraCursorHolder=function(){},this._addBlankText=function(){})},$ON_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["sLineBreaker",this.sLineBreaker]),this.oSelection=this.oApp.getEmptySelection(),this.tmpTextNode=this.oSelection._document.createTextNode(unescape("%u00A0")),jindo.$Fn(this._onKeyDown,this).attach(this.oApp.getWYSIWYGDocument(),"keydown")},_onKeyDown:function(e){var t=e.key();if(t.shift)return;t.enter&&(this.sLineBreaker=="BR"?this._insertBR(e):this._wrapBlock(e))},$ON_REGISTER_CONVERTERS:function(){this.oApp.exec("ADD_CONVERTER",["IR_TO_DB",jindo.$Fn(this.onIrToDB,this).bind()])},onIrToDB:function(e){var t=e,n=/<br(\s[^>]*)?\/?>((?:<\/span>)?<\/p>)/gi,r=/(<p[^>]*>)(?:[\s^>]*)(<\/p>)/gi;return t=t.replace(n,"&nbsp;$2"),t=t.replace(r,"$1&nbsp;$2"),t},_addBlankText:function(e){var t=e.getNodes(),n,r,i,s,o;for(n=0,r=t.length;n<r;n++){i=t[n];if(i.nodeType!==1||i.tagName!=="SPAN")continue;if(i.id.indexOf(e.HUSKY_BOOMARK_START_ID_PREFIX)>-1||i.id.indexOf(e.HUSKY_BOOMARK_END_ID_PREFIX)>-1)continue;s=i.firstChild;if(!s||s.nodeType==3&&nhn.husky.SE2M_Utils.isBlankTextNode(s)||s.nodeType==1&&i.childNodes.length==1&&(s.id.indexOf(e.HUSKY_BOOMARK_START_ID_PREFIX)>-1||s.id.indexOf(e.HUSKY_BOOMARK_END_ID_PREFIX)>-1))o=e._document.createTextNode(unescape("%uFEFF")),i.appendChild(o)}},_addCursorHolder:function(e){var t=e;if(e.innerHTML==""||(t=this._getStyleOnlyNode(e)))t.innerHTML="<br>";return t||(t=this._getStyleNode(e)),t},_addCursorHolderSpace:function(e){var t;this._addSpace(e),t=this._getStyleNode(e);if(t.innerHTML==""&&t.nodeName.toLowerCase()!="param")try{t.innerHTML=unescape("%uFEFF")}catch(n){}return t},_getBlockEndNode:function(e,t){return e?e.nodeName==="BR"?e:e===t?t:this._getBlockEndNode(e.nextSibling,t):t},_convertHeadSpace:function(e){var t;if(e&&(t=e.nextSibling)&&t.nodeType===3){var n=t.nodeValue,r="";for(var i=0,s;s=n[i];i++){if(s!==" ")break;r+="\u00a0"}i>0&&(t.nodeValue=r+n.substring(i))}},_wrapBlock:function(e,t){var n=this.oApp.getSelection(),r=n.placeStringBookmark(),i=n.getLineInfo(),s=i.oStart,o=i.oEnd,u,a,f;if(!s.bParentBreak||n.rxBlockContainer.test(s.oLineBreaker.tagName)){e.stop(),n.deleteContents();if(!!s.oNode.parentNode&&s.oNode.parentNode.nodeType!==11){u=this.oApp.getWYSIWYGDocument().createElement(this.sLineBreaker),n.moveToBookmark(r),n.setStartBefore(s.oNode),this._addBlankText(n),n.surroundContents(u),n.collapseToEnd(),a=this.oApp.getWYSIWYGDocument().createElement(this.sLineBreaker);var l=this._getBlockEndNode(s.oNode,o.oNode);l===s.oNode&&(l=o.oNode),n.setEndAfter(l),this._addBlankText(n),n.surroundContents(a),n.moveToStringBookmark(r,!0),n.collapseToEnd(),n.removeStringBookmark(r),n.select(),a.lastChild!==null&&a.lastChild.tagName=="BR"&&a.removeChild(a.lastChild),f=this._addCursorHolder(a),a.nextSibling&&a.nextSibling.tagName=="BR"&&a.parentNode.removeChild(a.nextSibling),n.selectNodeContents(f),n.collapseToStart(),n.select(),this.oApp.exec("CHECK_STYLE_CHANGE"),r=n.placeStringBookmark(),setTimeout(jindo.$Fn(function(e){var t=n.getStringBookmark(e);if(!t)return;n.moveToStringBookmark(e),n.select(),n.removeStringBookmark(e)},this).bind(r),0);return}}var c=n.getStringBookmark(r,!0);if(this.htBrowser.firefox)c&&c.nextSibling&&c.nextSibling.tagName=="IFRAME"?setTimeout(jindo.$Fn(function(e){var t=n.getStringBookmark(e);if(!t)return;n.moveToStringBookmark(e),n.select(),n.removeStringBookmark(e)},this).bind(r),0):setTimeout(jindo.$Fn(function(e){var t=n.getStringBookmark
(e,!0);if(!t)return;this._convertHeadSpace(t),n.removeStringBookmark(e)},this).bind(r),0);else if(this.htBrowser.ie){var h=c.parentNode,p=!1,d=!1;if(!c||!h){n.removeStringBookmark(r);return}n.removeStringBookmark(r),p=h.tagName==="U"||nhn.husky.SE2M_Utils.findAncestorByTagName("U",h)!==null,d=h.tagName==="S"||h.tagName==="STRIKE"||nhn.husky.SE2M_Utils.findAncestorByTagName("S",h)!==null&&nhn.husky.SE2M_Utils.findAncestorByTagName("STRIKE",h)!==null;if(p||d){setTimeout(jindo.$Fn(this._addTextDecorationTag,this).bind(p,d),0);return}setTimeout(jindo.$Fn(this._addExtraCursorHolder,this).bind(h),0)}else this._convertHeadSpace(c),n.removeStringBookmark(r)},_addExtraCursorHolder:function(e){var t,n,r;e=this._getStyleOnlyNode(e);if(!!e&&e.tagName==="SPAN"){t=e.lastChild;while(!!t){n=t.previousSibling;if(t.nodeType!==3){t=n;continue}nhn.husky.SE2M_Utils.isBlankTextNode(t)&&t.parentNode.removeChild(t),t=n}r=e.innerHTML,r.replace("\u200b","").replace("\ufeff","")===""&&(e.innerHTML="\u200b")}var i=this.oApp.getSelection(),s,o,u;if(!i.collapsed)return;i.fixCommonAncestorContainer(),o=i.commonAncestorContainer;if(!o)return;o=i._getVeryFirstRealChild(o),o.nodeType===3&&(o=o.parentNode);if(!o||o.tagName!=="SPAN")return;r=o.innerHTML,r.replace("\u200b","").replace("\ufeff","")===""&&(o.innerHTML="\u200b"),i.selectNodeContents(o),i.collapseToStart(),i.select()},_addSpace:function(e){var t,n,r,i,s,o;if(!e)return;if(e.nodeType===3)return e.parentNode;if(e.tagName!=="P")return e;s=jindo.$Element(e).child(function(e){return e.$value().nodeType===1&&e.$value().tagName==="IMG"},1);if(s.length>0){o=s[s.length-1].$value(),n=o.nextSibling;while(n)r=n.nextSibling,n.nodeType===3&&(n.nodeValue==="&nbsp;"||n.nodeValue===unescape("%u00A0")||n.nodeValue==="\u200b")&&e.removeChild(n),n=r;return e}n=e.firstChild,r=n,i=!1;while(n)r=n.nextSibling,n.nodeType===3&&(n.nodeValue===unescape("%uFEFF")&&e.removeChild(n),!i&&(n.nodeValue==="&nbsp;"||n.nodeValue===unescape("%u00A0")||n.nodeValue==="\u200b")&&(i=!0)),n=r;return i||(t=this.tmpTextNode.cloneNode(),e.appendChild(t)),e},_addTextDecorationTag:function(e,t){var n,r,i=this.oApp.getSelection();if(!i.collapsed)return;n=i.startContainer;while(n){if(n.nodeType===3){n=nhn.DOMFix.parentNode(n);break}if(!n.childNodes||n.childNodes.length===0)break;n=n.firstChild}if(!n)return;if(n.tagName==="U"||n.tagName==="S"||n.tagName==="STRIKE")return;e&&(r=i._document.createElement("U"),n.appendChild(r),n=r),t&&(r=i._document.createElement("STRIKE"),n.appendChild(r)),r.innerHTML="\u200b",i.selectNodeContents(r),i.collapseToEnd(),i.select()},_getStyleNode:function(e){while(e.firstChild&&this.oSelection._isBlankTextNode(e.firstChild))e.removeChild(e.firstChild);var t=e.firstChild;return t?t.nodeType===3||t.nodeType===1&&(t.tagName=="IMG"||t.tagName=="BR"||t.tagName=="HR"||t.tagName=="IFRAME")?e:this._getStyleNode(e.firstChild):e},_getStyleOnlyNode:function(e){if(!e)return null;if(!e.insertBefore)return null;if(e.tagName=="IMG"||e.tagName=="BR"||e.tagName=="HR"||e.tagName=="IFRAME")return null;while(e.firstChild&&this.oSelection._isBlankTextNode(e.firstChild))e.removeChild(e.firstChild);return e.childNodes.length>1?null:e.firstChild?e.firstChild.nodeType===3?nhn.husky.SE2M_Utils.isBlankTextNode(e.firstChild)?e:null:this._getStyleOnlyNode(e.firstChild):e},_insertBR:function(e){e.stop();var t=this.oApp.getSelection(),n=this.oApp.getWYSIWYGDocument().createElement("BR");t.insertNode(n),t.selectNode(n),t.collapseToEnd();if(!this.htBrowser.ie){var r=t.getLineInfo(),i=r.oEnd;if(i.bParentBreak){while(i.oNode&&i.oNode.nodeType==3&&i.oNode.nodeValue=="")i.oNode=i.oNode.previousSibling;var s=1;if(i.oNode==n||i.oNode.nextSibling==n)s=0;s===0&&(t.pasteHTML("<br type='_moz'/>"),t.collapseToEnd())}}t.insertNode(this.oApp.getWYSIWYGDocument().createTextNode("")),t.select()}}),nhn.husky.SE2M_EditingModeChanger=jindo.$Class({name:"SE2M_EditingModeChanger",htConversionMode:null,$init:function(e,t){this.htConversionMode=t,this._assignHTMLElements(e)},_assignHTMLElements:function(e){e=jindo.$(e)||document,this.elWYSIWYGButton=jindo.$$.getSingle("BUTTON.se2_to_editor",e),this.elHTMLSrcButton=jindo.$$.getSingle("BUTTON.se2_to_html",e),this.elTEXTButton=jindo.$$.getSingle("BUTTON.se2_to_text",e),this.elModeToolbar=jindo.$$.getSingle("DIV.se2_conversion_mode",e),this.welWYSIWYGButtonLi=jindo.$Element(this.elWYSIWYGButton.parentNode),this.welHTMLSrcButtonLi=jindo.$Element(this.elHTMLSrcButton.parentNode),this.welTEXTButtonLi=jindo.$Element(this.elTEXTButton.parentNode)},$BEFORE_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["isUseModeChanger",jindo.$Fn(this.isUseModeChanger,this).bind()])},$ON_MSG_APP_READY:function(){this.oApp.htOptions.bOnlyTextMode?(this.elWYSIWYGButton.style.display="none",this.elHTMLSrcButton.style.display="none",this.elTEXTButton.style.display="block",this.oApp.exec("CHANGE_EDITING_MODE",["TEXT"])):(this.oApp.registerBrowserEvent(this.elWYSIWYGButton,"click","EVENT_CHANGE_EDITING_MODE_CLICKED",["WYSIWYG"]),this.oApp.registerBrowserEvent(this.elHTMLSrcButton,"click","EVENT_CHANGE_EDITING_MODE_CLICKED",["HTMLSrc"]),this.oApp.registerBrowserEvent(this.elTEXTButton,"click","EVENT_CHANGE_EDITING_MODE_CLICKED",["TEXT",!1]),this.showModeChanger(),this.isUseModeChanger()===!1&&this.oApp.isUseVerticalResizer()===!1&&(this.elModeToolbar.style.display="none"))},showModeChanger:function(){this.isUseModeChanger()?(this.elWYSIWYGButton.style.display="block",this.elHTMLSrcButton.style.display="block",this.elTEXTButton.style.display="block"):(this.elWYSIWYGButton.style.display="none",this.elHTMLSrcButton.style.display="none",this.elTEXTButton.style.display="none")},isUseModeChanger:function(){return typeof this.htConversionMode=="undefined"||typeof this.htConversionMode.bUseModeChanger=="undefined"||this.htConversionMode.bUseModeChanger===!0?!0:!1},$ON_EVENT_CHANGE_EDITING_MODE_CLICKED:function(e,t){if(e=="TEXT"){var n=this.oApp.getIR();if(n.length>0&&!t&&!confirm(this.oApp.$MSG("SE2M_EditingModeChanger.confirmTextMode")))return!1;this.oApp.exec("CHANGE_EDITING_MODE",[e])}else this.oApp.exec("CHANGE_EDITING_MODE",[e]);"HTMLSrc"==e?this.oApp.exec("MSG_NOTIFY_CLICKCR",["htmlmode"]):"TEXT"==e?this.oApp.exec("MSG_NOTIFY_CLICKCR",["textmode"]):this.oApp.exec("MSG_NOTIFY_CLICKCR",["editormode"])},$ON_DISABLE_ALL_UI:function(e){e=e||{};var t=jindo.$A(e.aExceptions||[]);if(t.has("mode_switcher"))return;this.oApp.getEditingMode()=="WYSIWYG"?(this.welWYSIWYGButtonLi.removeClass("active"),this.elHTMLSrcButton.disabled=!0,this.elTEXTButton.disabled=!0):this.oApp.getEditingMode()=="TEXT"?(this.welTEXTButtonLi.removeClass("active"),this.elWYSIWYGButton.disabled=!0,this.elHTMLSrcButton.disabled=!0):(this.welHTMLSrcButtonLi.removeClass("active"),this.elWYSIWYGButton.disabled=!0,this.elTEXTButton.disabled=!0)},$ON_ENABLE_ALL_UI:function(){this.oApp.getEditingMode()=="WYSIWYG"?(this.welWYSIWYGButtonLi.addClass("active"),this.elHTMLSrcButton.disabled=!1,this.elTEXTButton.disabled=!1):this.oApp.getEditingMode()=="TEXT"?(this.welTEXTButtonLi.addClass("active"),this.elWYSIWYGButton.disabled=!1,this.elHTMLSrcButton.disabled=!1):(this.welHTMLSrcButtonLi.addClass("active"),this.elWYSIWYGButton.disabled=!1,this.elTEXTButton.disabled=!1)},$ON_CHANGE_EDITING_MODE:function(e){e=="HTMLSrc"?(this.welWYSIWYGButtonLi.removeClass("active"),this.welHTMLSrcButtonLi.addClass("active"),this.welTEXTButtonLi.removeClass("active"),this.elWYSIWYGButton.disabled=!1,this.elHTMLSrcButton.disabled=!0,this.elTEXTButton.disabled=!1,this.oApp.exec("HIDE_ALL_DIALOG_LAYER"),this.oApp.exec("DISABLE_ALL_UI",[{aExceptions:["mode_switcher"]}])):e=="TEXT"?(this.welWYSIWYGButtonLi.removeClass("active"),this.welHTMLSrcButtonLi.removeClass("active"),this.welTEXTButtonLi.addClass("active"),this.elWYSIWYGButton.disabled=!1,this.elHTMLSrcButton.disabled=!1,this.elTEXTButton.disabled=!0,this.oApp.exec("HIDE_ALL_DIALOG_LAYER"),this.oApp.exec("DISABLE_ALL_UI",[{aExceptions:["mode_switcher"]}])):(this.welWYSIWYGButtonLi.addClass("active"),this.welHTMLSrcButtonLi.removeClass("active"),this.welTEXTButtonLi.removeClass("active"),this.elWYSIWYGButton.disabled=!0,this.elHTMLSrcButton.disabled=!1,this.elTEXTButton.disabled=!1,this.oApp.exec("RESET_STYLE_STATUS"),this.oApp.exec("ENABLE_ALL_UI",[]))}}),nhn.husky.SE_PasteHandler=jindo.$Class({name:"SE_PasteHandler",$init:function(e){this.sParagraphContainer=e||"P",this.aConversionTarget=["TABLE"],this.htBrowser=jindo.$Agent().navigator()},$ON_REGISTER_CONVERTERS:function(){this.htBrowser.ie&&this.oApp.exec("ADD_CONVERTER",["IR_TO_DB",jindo.$Fn(this.irToDb,this).bind()])},irToDb:function(e){if("undefined"==typeof e||!e)return e;var t=this._filterPastedContents(e,!0);return t},$ON_MSG_APP_READY:function(){this.elEditingAreaContainer=jindo.$$.getSingle("DIV.husky_seditor_editing_area_container",null,{oneTimeOffCache:!0}),this.oApp.exec("ADD_APP_PROPERTY",["filterPastedContents",jindo.$Fn(this._filterPastedContents,this).bind()]);if(this.htBrowser.chrome||this.htBrowser.safari&&this.htBrowser.version>=6)this.$ON_EVENT_EDITING_AREA_PASTE=this._handlePaste},_handlePaste:function(e){var t,n,r,i,s=!1;t=e.$value().clipboardData.getData("text/html"),n=document.createElement("DIV"),n.innerHTML=t,r=jindo.$$.getSingle("style",n,{oneTimeOffCache:!0}),r&&(i=r.innerHTML,i=i.replace(/"/g,"'"),this._sStyleFromClipboard=i),s=this._hasConversionTarget(t),s&&(this._preparePaste(),setTimeout(jindo.$Fn(function(){var e=new RegExp("^[\u200b]");this.zwspStart&&(typeof this.zwspStart.nodeValue=="unknown"?typeof this.zwspStart.parentNode!="unknown"&&this.zwspStart.parentNode&&this.zwspStart.parentNode.removeChild(this.zwspStart):(this.zwspStart.nodeValue&&(this.zwspStart.nodeValue=this.zwspStart.nodeValue.replace(e,"")),this.zwspStart.nodeValue==""&&this.zwspStart.parentNode&&this.zwspStart.parentNode.removeChild(this.zwspStart)));var t=new RegExp("[\u200b]$");this.zwspEnd&&(typeof this.zwspEnd.nodeValue=="unknown"?typeof this.zwspEnd.parentNode!="unknown"&&this.zwspEnd.parentNode&&this.zwspEnd.parentNode.removeChild(this.zwspEnd):(this.zwspEnd.nodeValue&&(this.zwspEnd.nodeValue=this.zwspEnd.nodeValue.replace(t,"")),this.zwspEnd.nodeValue==""&&this.zwspEnd.parentNode&&this.zwspEnd.parentNode.removeChild(this.zwspEnd)));var n=this.oApp.getSelection();this.oSelectionClone=null;try{this._processPaste()}catch(r){if(typeof JEagleEyeClient!="undefined"){var i="http://blog.naver.com/hp_SE_PasteHandler.js/_handlePaste",s=r.lineNumber;s||(s=0),JEagleEyeClient.sendError(r,i,s)}}n.moveToStringBookmark(this._sBM),n.collapseToEnd(),n.select(),n.removeStringBookmark(this._sBM)},this).bind(),0))},_hasConversionTarget:function(e){var t=!1,n=new RegExp("<("+this.aConversionTarget.join("|")+")[^>]*>","i");return e&&n.test(e)&&(t=!0),t},_preparePaste:function(){this._securePasteArea()},_securePasteArea:function(){var e=this.oApp.getSelection();this._sBM=e.placeStringBookmark();var t=e.getStringBookmark(this._sBM,!0),n=e.getStringBookmark(this._sBM),r=document.createTextNode("");this.zwspStart=r.cloneNode(!0),this.zwspStart.nodeValue="\u200b",this.zwspEnd=this.zwspStart.cloneNode(!0);var i=n.nextSibling;i?(this._isEmptyTextNode(i)&&(i=i.nextSibling),n.parentNode.insertBefore(this.zwspStart,i)):n.parentNode.appendChild(this.zwspStart),t.parentNode.insertBefore(this.zwspEnd,t),n.innerHTML="\u200b",e.setStartAfter(n),e.setEndBefore(this.zwspEnd),e.select()},_processPaste:function(){this._savePastedContents();if(this._sTarget)try{this.elPasteHelper?(this._clearPasteHelper(),this._showPasteHelper()):this._createPasteHelper(),this._loadToPasteHelper(),this._loadToBody(),this._hidePasteHelper()}catch(e){throw this._hidePasteHelper(),e}},_savePastedContents:function(){var e=this.oApp.getSelection();e.moveToStringBookmark(this._sBM),e.select(),this.oSelectionClone=e.cloneContents(),e.collapseToEnd(),e.select();var t=this._outerHTML(this.oSelectionClone);this._isPastedContentsEmpty=!0;if(t!=""){this._isPastedContentsEmpty=!1;if(this.htBrowser.firefox||this.htBrowser.safari&&this.htBrowser.version>=6){var n=t.match(/<style>([^<>]+)<\/style>/i);if(n){var r=n[1];r=r.replace(/"/g,"'"),this._sStyleFromClipboard?this._sStyleFromClipboard+=r:this._sStyleFromClipboard=r}}this._sTarget=this._filterPastedContents(t,!0)}},_outerHTML:function(e){var t="";if(e.outerHTML)t=e.outerHTML;else{var n=document.createElement("DIV");n.appendChild(e.cloneNode(!0)),t=n.innerHTML}return t},_filterPastedContents:function(e,t){this._isPastedMultiParagraph=!1,this._aGoesPreviousParagraph=[];var n=!1,r=!1,i=0,s=0,o=!1,u,a,f=[],l=-1,c,h="",p=["BLOCKQUOTE","DD","DIV","DL","FORM","H1","H2","H3","H4","H5","H6","HR","OL","P","TABLE","UL","IFRAME"],d=new RegExp("^("+p.join("|")+")$","i"),v=!1,m=0,g=0,y=[],b=0,w=0,E=[],S=/^<[^!?\/\s>]+(([\s]{0})|([\s]+[^>]+))>/,x=/^<[\/]?([^\s]+)(([\s]{0})|([\s]+[^>]+))>/,T=/^<\/[A-Za-z]+>/,N=/^<[^>]+\/>/,C=/^<!--[^<>]+-->/,k=/^<!--[^->]+>/,L=/^<![^->]+-->/,A=/^[\s]+/,O=/^[^<\n]+/,M=/^<[^<>]+>/,_=/<!--[^*]*-->/,D=/(mso-[^:]+[\s]*:[\s]*)([^;"]*)([;]?)/gi,P=/(style[\s]*=[\s]*)(["'])([^"']*)(["'])/i,H=/class[\s]*=[\s]*(?:(?:["']([^"']*)["'])|([^\s>]+))/i,B=/(^<table)/gi,j,F=/&quot;/gi,I="",q=[],R,U,z,W="",X="",V=/(class[\s]*=[\s]*["'])([^"']*)(["'])/i,$=/(class[\s]*=[\s]*)([^"'\s>]+)/i,J=0,K,Q=/(border)([-]?[^:]*)(:[\s]*)([^;'"]+)/gi,G=/([^:\d])([0]?.[0-5][0-9]*pt)/gi,Y=/(:)([\s]*([0]?.[0-5][0-9]*pt))/gi,Z="",et="",tt="",nt="",rt="",it="",st=!1,ot=!1,ut=/([^\w-])(width[\s]*=[\s]*)(["']?)([A-Za-z0-9.]+[%]?)([;]?["']?)/i,at=/([^\w-])(height[\s]*=[\s]*)(["']?)([A-Za-z0-9.]+[%]?)([;]?["']?)/i,ft=/(["';\s])(width[\s]*:[\s]*)([A-Za-z0-9.]+[%]?)([;]?)/i,lt=/(["';\s])(height[\s]*:[\s]*)([A-Za-z0-9.]+[%]?)([;]?)/i,ct=/([\s]*)(>)/g,ht=/span[\s]*=[\s]*"([\d]+)"/i,pt=/colspan[\s]*=[\s]*"([\d]+)"/i,dt=/rowspan[\s]*=[\s]*"([\d]+)"/i;this._doFilter=jindo.$Fn(function(e){this._isPastedMultiParagraph=!1,this._aGoesPreviousParagraph=[];var t=!1,n=!1,r=0,i=0,s=!1;u,a,f=[],l=-1,c,h="",v=!1,m=0,g=0,y=[],b=0,w=0,E=[],j,I="",q=[],R,U,z,W="",X="",J=0,K,Z="",et="",tt="",nt="",rt="",it="",st=!1,ot=!1;while(e!=""){a="",u="";if(N.test(e))u=e.match(N)[0],a=u,j=N;else if(S.test(e)){u=e.match(S)[0],c=u.match(x)[1].toUpperCase(),I="",H.test(u)&&(I=u.match(H)[1]||u.match(H)[2]),u=u.replace(F,"'");if(this.htBrowser.chrome||this.htBrowser.firefox||this.htBrowser.safari&&this.htBrowser.version>=6){q=[],I&&I.indexOf("mso")===-1&&(q=I.split(" "));if(q&&q.length>0)for(var o=0,p=q.length;o<p;o++)R="",U="",z=null,W="",R=q[o],U=R+"[\\n\\r\\t\\s]*{([^}]*)}",z=new RegExp(U),z.test(this._sStyleFromClipboard)&&(W=this._sStyleFromClipboard.match(z)[1]),W&&(P.test(u)?u=u.replace(P,"$1$2"+W+" $3$4"):u=u.replace(ct,' style="'+W+'"$2'))}c=u.match(x)[1].toUpperCase();if(c==="TABLE")w===0&&(I?I.indexOf("__se_tbl")===-1&&(V.test(u)?u=u.replace(V,"$1$2 __se_tbl$3"):$.test(u)&&(u=u.replace($,'$1"$2 __se_tbl"'))):u=u.replace(B,'$1 class="__se_tbl"'),u=u.replace(P,"$1$2word-break:break-all; $3$4")),v=!0,w++;else if(!this.htBrowser.ie&&c==="COL"){ft.test(u)?tt=u.match(ft)[3]:tt="",J=0,ht.test(u)&&(J=u.match(ht)[1]),!E[w]||typeof E[w].length!="number"?y=[]:y=E[w];if(J){J=parseInt(J,10);for(var o=0;o<J;o++)y.push(tt),g++}else g++,y.push(tt);E[w]=y}else if(!this.htBrowser.ie&&c==="TR")lt.test(u)?(nt=u.match(lt)[3],b=nt):b=null;else if(c==="TD"||c==="TH")u=u.replace(Q,function(){return arguments[0].replace(Y,"$11px").replace(G," 1px")}),K=undefined,y=undefined,J=undefined,this.htBrowser.ie||(y=E[w],!!y&&y.length>0&&(pt.test(u)&&(J=u.match(pt)[1],J=parseInt(J,10)),K=y[m],!ft.test(u)&&K&&(J&&(K.indexOf("pt")!=-1?K=parseFloat(K,10)*J+"pt":K.indexOf("px")!=-1&&(K=parseFloat(K,10)*J+"px")),P.test(u)?u=u.replace(P,"$1$2width:"+K+"; $3$4"):u=u.replace(ct,' style="width:'+K+';"$2'))),!lt.test(u)&&!!b&&(P.test(u)?u=u.replace(P,"$1$2height:"+b+"; $3$4"):u=u.replace(ct,' style="height:'+b+';"$2'))),c==="TD"&&(u=u.replace(P,"$1$2word-break:break-all; $3$4")),J?m+=J:m++;d.test(c)&&(this._isPastedMultiParagraph=!0,t=!0),a+=u,j=S}else if(A.test(e))u=e.match(A)[0],a=u,j=A;else if(O.test(e))u=e.match(O)[0],a=u,j=O;else if(T.test(e))u=e.match(T)[0],c=u.match(x)[1].toUpperCase(),c==="TABLE"?(E[w]=null,w--,v=!1,g=0,m=0):c==="TR"&&(m=0),d.test(c)&&(n=!0),a+=u,j=T;else if(M.test(e))u=e.match(M)[0],a=u,j=M;else{if(!_.test(e))throw new Error("Unknown Node : If the content isn't invalid, please let us know.");u=e.match(_)[0],a=u,j=_}if(a!=""){h=a,l++;var C="";this._isPastedMultiParagraph||(C=a),t?(s&&(this.htBrowser.ie||(a="</"+this.sParagraphContainer+">"+a),s=!1),i++,r++):!s&&r==0&&(this.htBrowser.ie||(a="<"+this.sParagraphContainer+">"+a),s=!0),n&&(t=!1,n=!1,r--),this._isPastedMultiParagraph||this._aGoesPreviousParagraph.push(C),f.push(a)}e=e.replace(j,"")}if(!this.htBrowser.ie&&i==0){var k=new RegExp("^<"+this.sParagraphContainer+">");f[0]&&(f[0]=f[0].replace(k,""))}return f.join("")},this).bind();var vt=t?this._filterTableContents(e):this._doFilter(e);return vt},_filterTableContents:function(e){function d(){f=n.lastIndex,l=r.lastIndex;var e=n.exec(t),i=r.exec(t),s=n.lastIndex,o=r.lastIndex;n.lastIndex=f,r.lastIndex=l,e===null?i!==null&&m():i===null?e!==null&&v():s<o?v():s>o&&m()}function v(){i=n.exec(t),r.lastIndex=n.lastIndex,i!==null&&h++,h==1&&(s=i.index,u.push(s)),d()}function m(){i=r.exec(t),n.lastIndex=r.lastIndex,i!==null&&p++,h!==0&&p!==0&&h==p&&(o=i.index,a.push(o+8),c.push(g()),y()),d()}var t=e,n=new RegExp("<table(([\\s]{0})|([\\s]+[^>]+))>","ig"),r=new RegExp("</table>","ig"),i,s,o,u=[],a=[],f,l,c=[],h=0,p=0,g=function(){return t.slice(s,o+8)},y=function(){s=undefined,o=undefined,h=0,p=0};d();for(var b=0,w=c.length;b<w;b++){var E=c[b];E=this._doFilter(E),c[b]=E}if(this.htBrowser.ie){var S=[],x="",T=u.length,N=a.length,C,k;if(T>0&&T==N){C=u[0],S.push(t.slice(0,C));for(var b=0,w=u.length;b<w;b++)T>1&&b>0&&(C=a[b-1],k=u[b],S.push(t.slice(C,k))),C=u[b],k=a[b],S.push(c[b]);return k=a[N-1],S.push(t.slice(k,t.length+1)),S.join("")}return t}return c.join("")},_createPasteHelper:function(){this.elPasteHelper||(this.elPasteHelper=document.createElement("DIV"),this.elPasteHelper.className="husky_seditor_paste_helper",this.elPasteHelper.style.width="0px",this.elPasteHelper.style.height="0px",this.elPasteHelper.style.overflow="hidden",this.elPasteHelper.contentEditable="true",this.elPasteHelper.style.position="absolute",this.elPasteHelper.style.top="9999px",this.elPasteHelper.style.left="9999px",this.elEditingAreaContainer.appendChild(this.elPasteHelper))},_showPasteHelper:function(){!!this.elPasteHelper&&this.elPasteHelper.style.display=="none"&&(this.elPasteHelper.style.display="block")},_hidePasteHelper:function(){!!this.elPasteHelper&&this.elPasteHelper.style.display!="none"&&(this.elPasteHelper.style.display="none")},_clearPasteHelper:function(){!this.elPasteHelper||(this.elPasteHelper.innerHTML="")},_loadToPasteHelper:function(){var e=[],t,n,r,i;this._isPastedMultiParagraph&&(t=document.createElement("DIV"),t.innerHTML=this._sTarget,e=t.childNodes);if(this._aGoesPreviousParagraph&&this._aGoesPreviousParagraph.length>0){n=this._aGoesPreviousParagraph.join(""),t=document.createElement("DIV"),t.innerHTML=n,r=t.childNodes;for(var s=0,o=r.length;s<o;s++)this.elPasteHelper.appendChild(r[s].cloneNode(!0));e.length>0&&(e.splice?e.splice(0,1):(i=jindo.$A(e),i.splice(0,1),e=i.$value()))}if(e.length>0)for(var s=0,o=e.length;s<o;s++)this.elPasteHelper.appendChild(e[s].cloneNode(!0));return},_loadToBody:function(){var e=this.oApp.getSelection();try{e.moveToStringBookmark(this._sBM),e.select();var t=e.getNodes(),n=this._markMatchedElementIndex(t,this.aConversionTarget),r=this.oApp.getSelection(this.oApp.getWYSIWYGWindow().parent);r.setStartBefore(this.elPasteHelper.firstChild),r.setEndAfter(this.elPasteHelper.lastChild),r.select();var i=r.getNodes(),s=this._markMatchedElementIndex(i,this.aConversionTarget),o=n.length-s.length;if(n.length>0&&n.length==s.length){var u,a,f,l;for(var c=0,h=s.length;c<h;c++)u=n[c+o],a=s[c],f=t[u],l=i[a],/__se_tbl/.test(f.className)||f.parentNode.replaceChild(l.cloneNode(!0),f)}}catch(p){e.moveToStringBookmark(this._sBM),e.select(),e.deleteContents();var d=e.getStringBookmark(this._sBM,!0);throw d.parentNode.insertBefore(this.oSelectionClone.cloneNode(!0),d),p}},_markMatchedElementIndex:function(e,t,n,r){var i=[],s=t.join("|"),o=new RegExp("^("+s+")$","i"),u,a,f;n&&(r=r||"OR",r.toUpperCase()==="AND"?f=!0:r.toUpperCase()==="OR"&&(f=!1));for(var l=0,c=e.length;l<c;l++){u=e[l];if(o.test(u.nodeName))if(n){for(var h=n.length;h--;){a=n[h];if(r.toUpperCase()==="AND"){if(!a.apply(u)){f=!1;break}}else if(r.toUpperCase()==="OR"&&a.apply(u)){f=!0;break}}f&&i.push(l)}else i.push(l)}return i},_isEmptyTextNode:function(e){return e.nodeType==3&&!/\S/.test(e.nodeValue)}}),nhn.husky.SE2M_ExecCommand=jindo.$Class({name:"SE2M_ExecCommand",oEditingArea:null,oUndoOption:null,_rxTable:/^(?:TBODY|TR|TD)$/i,_rxCmdInline:/^(?:bold|underline|italic|strikethrough|superscript|subscript)$/i,$init:function(e){this.oEditingArea=e,this.nIndentSpacing=40,this.rxClickCr=new RegExp("^bold|underline|italic|strikethrough|justifyleft|justifycenter|justifyright|justifyfull|insertorderedlist|insertunorderedlist|outdent|indent$","i")},$BEFORE_MSG_APP_READY:function(){this.oEditingArea&&this.oEditingArea.tagName=="IFRAME"&&(this.oEditingArea=this.oEditingArea.contentWindow.document)},$ON_MSG_APP_READY:function(){this.oApp.exec("REGISTER_HOTKEY",["ctrl+b","EXECCOMMAND",["bold",!1,!1]]),this.oApp.exec("REGISTER_HOTKEY",["ctrl+u","EXECCOMMAND",["underline",!1,!1]]),this.oApp.exec("REGISTER_HOTKEY",["ctrl+i","EXECCOMMAND",["italic",!1,!1]]),this.oApp.exec("REGISTER_HOTKEY",["ctrl+d","EXECCOMMAND",["strikethrough",!1,!1]]),this.oApp.exec("REGISTER_HOTKEY",["meta+b","EXECCOMMAND",["bold",!1,!1]]),this.oApp.exec("REGISTER_HOTKEY",["meta+u","EXECCOMMAND",["underline",!1,!1]]),this.oApp.exec("REGISTER_HOTKEY",["meta+i","EXECCOMMAND",["italic",!1,!1]]),this.oApp.exec("REGISTER_HOTKEY",["meta+d","EXECCOMMAND",["strikethrough",!1,!1]]),this.oApp.exec("REGISTER_HOTKEY",["tab","INDENT"]),this.oApp.exec("REGISTER_HOTKEY",["shift+tab","OUTDENT"]),this.oApp.exec("REGISTER_UI_EVENT",["bold","click","EXECCOMMAND",["bold",!1,!1]]),this.oApp.exec("REGISTER_UI_EVENT",["underline","click","EXECCOMMAND",["underline",!1,!1]]),this.oApp.exec("REGISTER_UI_EVENT",["italic","click","EXECCOMMAND",["italic",!1,!1]]),this.oApp.exec("REGISTER_UI_EVENT",["lineThrough","click","EXECCOMMAND",["strikethrough",!1,!1]]),this.oApp.exec("REGISTER_UI_EVENT",["superscript","click","EXECCOMMAND",["superscript",!1,!1]]),this.oApp.exec("REGISTER_UI_EVENT",["subscript","click","EXECCOMMAND",["subscript",!1,!1]]),this.oApp.exec("REGISTER_UI_EVENT",["justifyleft","click","EXECCOMMAND",["justifyleft",!1,!1]]),this.oApp.exec("REGISTER_UI_EVENT",["justifycenter","click","EXECCOMMAND",["justifycenter",!1,!1]]),this.oApp.exec("REGISTER_UI_EVENT",["justifyright","click","EXECCOMMAND",["justifyright",!1,!1]]),this.oApp.exec("REGISTER_UI_EVENT",["justifyfull","click","EXECCOMMAND",["justifyfull",!1,!1]]),this.oApp.exec("REGISTER_UI_EVENT",["orderedlist","click","EXECCOMMAND",["insertorderedlist",!1,!1]]),this.oApp.exec("REGISTER_UI_EVENT",["unorderedlist","click","EXECCOMMAND",["insertunorderedlist",!1,!1]]),this.oApp.exec("REGISTER_UI_EVENT",["outdent","click","EXECCOMMAND",["outdent",!1,!1]]),this.oApp.exec("REGISTER_UI_EVENT",["indent","click","EXECCOMMAND",["indent",!1,!1]]),this.oNavigator=jindo.$Agent().navigator(),!this.oNavigator.safari&&!this.oNavigator.chrome&&(this._getDocumentBR=function(){},this._fixDocumentBR=function(){}),this.oNavigator.ie||(this._fixCorruptedBlockQuote=function(){},!this.oNavigator.safari&&!this.oNavigator.chrome&&(this._insertBlankLine=function(){})),this.oNavigator.firefox||(this._extendBlock=function(){})},$ON_INDENT:function(){this.oApp.delayedExec("EXECCOMMAND",["indent",!1,!1],0)},$ON_OUTDENT:function(){this.oApp.delayedExec("EXECCOMMAND",["outdent",!1,!1],0)},_isTextBetweenTable:function(e){var t;if(e&&e.nodeType===3){if((t=e.previousSibling)&&this._rxTable.test(t.nodeName))return!0;if((t=e.nextSibling)&&this._rxTable.test(t.nodeName))return!0}return!1},$BEFORE_EXECCOMMAND:function(e,t,n,r){var i,s;this.oApp.exec("FOCUS"),this._bOnlyCursorChanged=!1,s=this.oApp.getSelection();for(var o=0,u=s.getNodes(),a;a=u[o];o++)this._isTextBetweenTable(a)&&a.parentNode.removeChild(a);/^insertorderedlist|insertunorderedlist$/i.test(e)&&(this._getDocumentBR(),this._checkBlockQuoteCondition_IE()),/^justify*/i.test(e)&&this._removeSpanAlign(),this._rxCmdInline.test(e)&&(this.oUndoOption={bMustBlockElement:!0},nhn.CurrentSelection.isCollapsed()&&(this._bOnlyCursorChanged=!0));if(e=="indent"||e=="outdent")r||(r={}),r.bDontAddUndoHistory=!0;if((!r||!r.bDontAddUndoHistory)&&!this._bOnlyCursorChanged){if(/^justify*/i.test(e))this.oUndoOption={sSaveTarget:"BODY"};else if(e==="insertorderedlist"||e==="insertunorderedlist")this.oUndoOption={bMustBlockContainer:!0};this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",[e,this.oUndoOption])}this.oNavigator.ie&&this.oApp.getWYSIWYGDocument().selection&&this.oApp.getWYSIWYGDocument().selection.type==="Control"&&(s=this.oApp.getSelection(),s.select()),(e=="insertorderedlist"||e=="insertunorderedlist")&&this._insertBlankLine()},_checkBlockQuoteCondition_IE:function(){var e=jindo.$Agent().navigator(),t=!1,n;if(e.ie&&e.nativeVersion>=9&&e.nativeVersion<=11&&e.version>=9&&e.version<=11||this.oApp.oAgent.os().winxp&&e.ie&&e.nativeVersion<=8){var r=this.oApp.getSelection(),i=r.commonAncestorContainer,s=nhn.husky.SE2M_Utils.findAncestorByTagNameWithCount("BLOCKQUOTE",i);n=s.elNode;if(n){var o=nhn.husky.SE2M_Utils.findClosestAncestorAmongTagNamesWithCount(["td","th"],i);o.elNode?o.nRecursiveCount>s.nRecursiveCount&&(t=!0):t=!0}}t&&this._insertDummyParagraph_IE(n)},_insertDummyParagraph_IE:function(e){this._elDummyParagraph=document.createElement("P"),e.appendChild(this._elDummyParagraph)},_removeDummyParagraph_IE:function(){this._elDummyParagraph&&this._elDummyParagraph.parentNode&&this._elDummyParagraph.parentNode.removeChild(this._elDummyParagraph)},$ON_EXECCOMMAND:function(e,t,n){var r=!1,i={},s=this.oApp.getSelection();t=t==""||t?t:!1,n=n==""||n?n:!1,this.oApp.exec("IS_SELECTED_TD_BLOCK",["bIsSelectedTd",i]),r=i.bIsSelectedTd;if(r)e=="indent"?this.oApp.exec("SET_LINE_BLOCK_STYLE",[null,jindo.$Fn(this._indentMargin,this).bind()]):e=="outdent"?this.oApp.exec("SET_LINE_BLOCK_STYLE",[null,jindo.$Fn(this._outdentMargin,this).bind()]):this._setBlockExecCommand(e,t,n);else switch(e){case"indent":case"outdent":this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",[e]);var o=s.placeStringBookmark();e==="indent"?this.oApp.exec("SET_LINE_STYLE",[null,jindo.$Fn(this._indentMargin,this).bind(),{bDoNotSelect:!0,bDontAddUndoHistory:!0}]):this.oApp.exec("SET_LINE_STYLE",[null,jindo.$Fn(this._outdentMargin,this).bind(),{bDoNotSelect:!0,bDontAddUndoHistory:!0}]),s.moveToStringBookmark(o),s.select(),s.removeStringBookmark(o),setTimeout(jindo.$Fn(function(e){this.oApp.exec("RECORD_UNDO_AFTER_ACTION",[e])},this).bind(e),25);break;case"justifyleft":case"justifycenter":case"justifyright":case"justifyfull":var u=this._extendBlock();this.oEditingArea.execCommand(e,t,n),!u||u.select();break;default:if(s.collapsed&&this._rxCmdInline.test(e)){var a=s.placeStringBookmark(),f=s.getStringBookmark(a),l=f.previousSibling;if(!l||l.nodeValue!=="\u200b")l=this.oApp.getWYSIWYGDocument().createTextNode("\u200b"),s.insertNode(l);s.removeStringBookmark(a),s.selectNodeContents(l),s.select(),this.oEditingArea.execCommand(e,t,n),s.collapseToEnd(),s.select();var c=this._findSingleNode(l);c&&s._hasCursorHolderOnly(c.nextSibling)&&c.parentNode.removeChild(c.nextSibling)}else this.oEditingArea.execCommand(e,t,n)}this._countClickCr(e)},_findSingleNode:function(e){return e?e.parentNode.childNodes.length===1?this._findSingleNode(e.parentNode):e:null},$AFTER_EXECCOMMAND:function(e,t,n,r){this.elP1&&this.elP1.parentNode&&this.elP1.parentNode.removeChild(this.elP1),this.elP2&&this.elP2.parentNode&&this.elP2.parentNode.removeChild(this.elP2),/^insertorderedlist|insertunorderedlist$/i.test(e)&&(this._removeDummyParagraph_IE(),this._fixCorruptedBlockQuote(e==="insertorderedlist"?"OL":"UL"),this.oNavigator.bGalaxyBrowser&&this._removeBlockQuote()),/^justify*/i.test(e)&&this._fixAlign(e==="justifyfull"?"justify":e.substring(7));if(e=="indent"||e=="outdent")r||(r={}),r.bDontAddUndoHistory=!0;(!r||!r.bDontAddUndoHistory)&&!this._bOnlyCursorChanged&&this.oApp.exec("RECORD_UNDO_AFTER_ACTION",[e,this.oUndoOption]),this.oApp.exec("CHECK_STYLE_CHANGE",[])},_removeSpanAlign:function(){var e=this.oApp.getSelection(),t=e.getNodes(),n=null;for(var r=0,i=t.length;r<i;r++)n=t[r],n.tagName&&n.tagName==="SPAN"&&(n.style.textAlign="",n.removeAttribute("align"))},_getAlignNode:function(e){if(!(!e.tagName||e.tagName!=="P"&&e.tagName!=="DIV"))return e;e=e.parentNode;while(e&&e.tagName){if(e.tagName==="P"||e.tagName==="DIV")return e;e=e.parentNode}},_fixAlign:function(e){var t=this.oApp.getSelection(),n=[],r=null,i=null,s=this.oNavigator.ie?function(e){return e.tagName&&e.tagName==="TABLE"?(e.removeAttribute("align"),!0):!1}:function(){};t.collapsed?n[0]=t.startContainer:n=t.getNodes();for(var o=0,u=n.length;o<u;o++){r=n[o],r.nodeType===3&&(r=r.parentNode);if(i&&(r===i||jindo.$Element(r).isChildOf(i)))continue;i=this._getAlignNode(r),i&&i.align!==i.style.textAlign&&(i.style.textAlign=e,i.setAttribute("align",e))}},_getDocumentBR:function(){var e,t;this.aBRs=this.oApp.getWYSIWYGDocument().getElementsByTagName("BR"),this.aBeforeBRs=[];for(e=0,t=this.aBRs.length;e<t;e++)this.aBeforeBRs[e]=this.aBRs[e]},_fixDocumentBR:function(){if(this.aBeforeBRs.length===this.aBRs.length)return;var e=jindo.$A(this.aBeforeBRs),t,n=this.aBRs.length;for(t=n-1;t>=0;t--)e.indexOf(this.aBRs[t])<0&&this.aBRs[t].parentNode.removeChild(this.aBRs[t])},_setBlockExecCommand:function(e,t,n){var r,i,s={};this.oSelection=this.oApp.getSelection(),this.oApp.exec("GET_SELECTED_TD_BLOCK",["aTdCells",s]),r=s.aTdCells;for(var o=0;o<r.length;o++){this.oSelection.selectNodeContents(r[o]),this.oSelection.select(),this.oNavigator.firefox&&this.oEditingArea.execCommand("styleWithCSS",t,!1),i=this.oSelection.getNodes();for(var u=0;u<i.length;u++)(i[u].tagName=="UL"||i[u].tagName=="OL")&&jindo.$Element(i[u]).css("color",n);this.oEditingArea.execCommand(e,t,n)}},_indentMargin:function(e){var t=e,n,r,i,s,o,u;while(t){if(t.tagName&&t.tagName==="LI"){e=t;break}t=t.parentNode}if(e.tagName==="LI"){if(e.previousSibling&&e.previousSibling.tagName&&e.previousSibling.tagName===e.parentNode.tagName){if(e.nextSibling&&e.nextSibling.tagName&&e.nextSibling.tagName===e.parentNode.tagName){n=[e];for(r=0,i=e.nextSibling.childNodes.length;r<i;r++)n.push(e.nextSibling.childNodes[r]);s=e.previousSibling,o=e.nextSibling;for(r=0,i=n.length;r<i;r++)s.insertBefore(n[r],null);o.parentNode.removeChild(o)}else e.previousSibling.insertBefore(e,null);return}if(e.nextSibling&&e.nextSibling.tagName&&e.nextSibling.tagName===e.parentNode.tagName){e.nextSibling.insertBefore(e,e.nextSibling.firstChild);return}t=e.parentNode.cloneNode(!1),e.parentNode.insertBefore(t,e),t.appendChild(e);return}u=parseInt(e.style.marginLeft,10),u||(u=0),u+=this.nIndentSpacing,e.style.marginLeft=u+"px"},_outdentMargin:function(e){var t=e,n,r,i,s,o,u;while(t){if(t.tagName&&t.tagName==="LI"){e=t;break}t=t.parentNode}if(e.tagName==="LI"){n=e.parentNode,r=e.parentNode;if(e.previousSibling&&e.previousSibling.tagName&&e.previousSibling.tagName.match(/LI|UL|OL/))if(e.nextSibling&&e.nextSibling.tagName&&e.nextSibling.tagName.match(/LI|UL|OL/)){i=n.cloneNode(!1);while(e.nextSibling)i.insertBefore(e.nextSibling,null);n.parentNode.insertBefore(i,n.nextSibling),r=i}else r=n.nextSibling;n.parentNode.insertBefore(e,r),n.innerHTML.match(/LI/i)||n.parentNode.removeChild(n);if(!e.parentNode.tagName.match(/OL|UL/)){s=e.parentNode,r=e,o=this.oApp.getWYSIWYGDocument(),s=o.createElement("P"),r=null,e.parentNode.insertBefore(s,e);while(e.firstChild)s.insertBefore(e.firstChild,r);e.parentNode.removeChild(e)}return}u=parseInt(e.style.marginLeft,10),u||(u=0),u-=this.nIndentSpacing,u<0&&(u=0),e.style.marginLeft=u+"px"},_insertBlankLine:function(){var e=this.oApp.getSelection(),t=e.commonAncestorContainer;this.elP1=null,this.elP2=null;while(t){if(t.tagName=="BLOCKQUOTE"){this.elP1=jindo.$("<p>&nbsp;</p>",this.oApp.getWYSIWYGDocument()),t.parentNode.insertBefore(this.elP1,t),this.elP2=jindo.$("<p>&nbsp;</p>",this.oApp.getWYSIWYGDocument()),t.parentNode.insertBefore(this.elP2,t.nextSibling);break}t=t.parentNode}if(!this.elP1&&!this.elP2){t=e.commonAncestorContainer,t=t.nodeType!==1?t.parentNode:t;var n=t.previousSibling,r=t.nextSibling;n&&n.tagName==="BLOCKQUOTE"&&(this.elP1=jindo.$("<p>&nbsp;</p>",this.oApp.getWYSIWYGDocument()),n.parentNode.insertBefore(this.elP1,n.nextSibling)),r&&r.tagName==="BLOCKQUOTE"&&(this.elP1=jindo.$("<p>&nbsp;</p>",this.oApp.getWYSIWYGDocument()),r.parentNode.insertBefore(this.elP1,r))}},_fixCorruptedBlockQuote:function(e){var t=this.oApp.getWYSIWYGDocument().getElementsByTagName(e),n,r,i,s,o,u,a,f,l;for(o=0,u=t.length;o<u;o++)if(t[o].firstChild&&t[o].firstChild.tagName==e){n=t[o];break}if(!n)return;r=n.parentNode,a=this._getPosIdx(n),f=this.oApp.getWYSIWYGDocument().createElement("DIV"),f.innerHTML=n.outerHTML.replace("<"+e,"<BLOCKQUOTE"),n.parentNode.insertBefore(f.firstChild,n),n.parentNode.removeChild(n),i=r.childNodes[a],s=i.getElementsByTagName(e);for(o=0,u=s.length;o<u;o++)s[o].childNodes.length<1&&s[o].parentNode.removeChild(s[o]);l=this.oApp.getEmptySelection(),l.selectNodeContents(i),l.collapseToEnd(),l.select()},_removeBlockQuote:function(){var e="Apple-style-span",t,n,r=this.oApp.getSelection(),i=r.commonAncestorContainer,s=i,o;while(i)i.tagName==="LI"?(o=i,i=i.style.cssText==="display: inline !important; "?i.parentNode:null):i.tagName==="SPAN"&&i.className===e?(t=i,i=o?null:i.parentNode):i=i.parentNode;o&&t&&(i=t.parentNode,i.replaceChild(s,t),r.selectNodeContents(i),r.collapseToEnd(),r.select());while(i)if(i.tagName==="BLOCKQUOTE"){n=i.getElementsByClassName(e);for(var u=0;t=n[u];u++)t.parentNode.removeChild(t);i=null}else i=i.parentNode},_getPosIdx:function(e){var t=0;for(var n=e.previousSibling;n;n=n.previousSibling)t++;return t},_countClickCr:function(e){if(!e.match(this.rxClickCr))return;this.oApp.exec("MSG_NOTIFY_CLICKCR",[e.replace(/^insert/i,"")])},_extendBlock:function(){var e=this.oApp.getSelection(),t=e.startContainer,n=e.endContainer,r=[],i=[],s=e.cloneRange();if(t!==n||t.nodeType!==1||t.tagName!=="P")return;r=jindo.$A(t.childNodes).filter(function(e,t,n){return e.nodeType===1&&e.tagName==="IMG"}).$value(),i=jindo.$A(e.getNodes()).filter(function(e,t,n){return e.nodeType===1&&e.tagName==="IMG"}).$value();if(r.length<=i.length)return;return e.selectNode(t),e.select(),s}}),nhn.husky.SE_WYSIWYGStyler=jindo.$Class({name:"SE_WYSIWYGStyler",_sCursorHolder:"\ufeff",$init:function(){var e=jindo.$Agent().navigator();e.ie&&e.version>8&&(this._sCursorHolder="\u2060",this.$ON_REGISTER_CONVERTERS=function(){var e=/\u2060/g;this.oApp.exec("ADD_CONVERTER",["WYSIWYG_TO_IR",jindo.$Fn(function(t){return t.replace(e,"\ufeff")},this).bind()])})},$PRECONDITION:function(e,t){return this.oApp.getEditingMode()=="WYSIWYG"},$ON_SET_WYSIWYG_STYLE:function(e){var t=this.oApp.getSelection(),n={};this.oApp.exec("IS_SELECTED_TD_BLOCK",["bIsSelectedTd",n]);var r=n.bIsSelectedTd;if(t.collapsed&&!r){this.oApp.exec("RECORD_UNDO_ACTION",["FONT STYLE",{bMustBlockElement:!0}]);var i,s=!1,o=t.commonAncestorContainer;o.nodeType==3&&(o=o.parentNode),o&&t._rxCursorHolder.test(o.innerHTML)&&(i=t._findParentSingleSpan(o)),i?i.innerHTML==""&&(i.innerHTML=this._sCursorHolder):(i=this.oApp.getWYSIWYGDocument().createElement("SPAN"),i.innerHTML=this._sCursorHolder,s=!0);var u;for(var a in e){u=e[a];if(typeof u!="string")continue;i.style[a]=u}if(s)if(t.startContainer.tagName=="BODY"&&t.startOffset===0){var f=t._getVeryFirstRealChild(this.oApp.getWYSIWYGDocument().body),l=!0,c=f.cloneNode(!1);try{c.innerHTML="test",c.innerHTML!="test"&&(l=!1)}catch(h){l=!1}l&&c.nodeType==1&&c.tagName=="BR"?(t.selectNode(f),t.collapseToStart(),t.insertNode(i)):l&&f.tagName!="IFRAME"&&f.appendChild&&typeof f.innerHTML=="string"?f.appendChild(i):(t.selectNode(f),t.collapseToStart(),t.insertNode(i))}else t.collapseToStart(),t.insertNode(i);else t=this.oApp.getEmptySelection();!e.color||t._checkTextDecoration(i),t.selectNodeContents(s?i:o),t.collapseToEnd(),t._window.focus(),t._window.document.body.focus(),t.select();return}this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["FONT STYLE",{bMustBlockElement:!0}]);if(r){var p;this.oApp.exec("GET_SELECTED_TD_BLOCK",["aTdCells",n]),p=n.aTdCells;for(var d=0;d<p.length;d++)t.selectNodeContents(p[d]),t.styleRange(e),t.select()}else{var v=!!e.color,m=e.fontSize||e.fontFamily;t.styleRange(e,null,null,m,v);if(jindo.$Agent().navigator().firefox){var g=t.aStyleParents;for(var y=0,b=g.length;y<b;y++){var w=g[y];w.nextSibling&&w.nextSibling.tagName=="BR"&&!w.nextSibling.nextSibling&&w.parentNode.removeChild(w.nextSibling)}}t._window.focus(),t.select()}this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["FONT STYLE",{bMustBlockElement:!0}])}}),nhn.husky.SE_WYSIWYGStyleGetter=jindo.$Class({name:"SE_WYSIWYGStyleGetter",hKeyUp:null,getStyleInterval:200,oStyleMap:{fontFamily:{type:"Value",css:"fontFamily"},fontSize:{type:"Value",css:"fontSize"},lineHeight:{type:"Value",css:"lineHeight",converter:function(e,t){return e.match(/px$/)?Math.ceil(parseInt(e,10)/parseInt(t.fontSize,10)*10)/10:e}},bold:{command:"bold"},underline:{command:"underline"},italic:{command:"italic"},lineThrough:{command:"strikethrough"},superscript:{command:"superscript"},subscript:{command:"subscript"},justifyleft:{command:"justifyleft"},justifycenter:{command:"justifycenter"},justifyright:{command:"justifyright"},justifyfull:{command:"justifyfull"},orderedlist:{command:"insertorderedlist"},unorderedlist:{command:"insertunorderedlist"}},$init:function(){this.oStyle=this._getBlankStyle()},$LOCAL_BEFORE_ALL:function(){return this.oApp.getEditingMode()=="WYSIWYG"},$ON_MSG_APP_READY:function(){this.oDocument=this.oApp.getWYSIWYGDocument(),this.oApp.exec("ADD_APP_PROPERTY",["getCurrentStyle",jindo.$Fn(this.getCurrentStyle,this).bind()]);if(jindo.$Agent().navigator().safari||jindo.$Agent().navigator().chrome||jindo.$Agent().navigator().ie)this.oStyleMap.textAlign={type:"Value",css:"textAlign"}},$ON_EVENT_EDITING_AREA_MOUSEUP:function(e){this.oApp.exec("CHECK_STYLE_CHANGE")},$ON_EVENT_EDITING_AREA_KEYPRESS:function(e){var t;if(this.oApp.oNavigator.firefox){t=e.key();if(t.ctrl&&t.keyCode==97)return}if(this.bAllSelected){this.bAllSelected=!1;return}this.oApp.exec("CHECK_STYLE_CHANGE")},$ON_EVENT_EDITING_AREA_KEYDOWN:function(e){var t=e.key();if((this.oApp.oNavigator.ie||this.oApp.oNavigator.firefox)&&t.ctrl&&t.keyCode==65){this.oApp.exec("RESET_STYLE_STATUS"),this.bAllSelected=!0;return}if(!(t.keyCode==8||t.keyCode>=33&&t.keyCode<=40||t.keyCode==45||t.keyCode==46))return;if(t.shift&&t.keyCode===35){this.oApp.exec("RESET_STYLE_STATUS"),this.bAllSelected=!0;return}if(this.bAllSelected){if(this.oApp.oNavigator.firefox)return;this.bAllSelected=!1;return}this.oApp.exec("CHECK_STYLE_CHANGE")},$ON_CHECK_STYLE_CHANGE:function(){this._getStyle()},$ON_RESET_STYLE_STATUS:function(){this.oStyle=this._getBlankStyle();var e=this._getStyleOf(this.oApp.getWYSIWYGDocument().body);this.oStyle.fontFamily=e.fontFamily,this.oStyle.fontSize=e.fontSize,this.oStyle.justifyleft="@^";for(var t in this.oStyle)this.oApp.exec("MSG_STYLE_CHANGED",[t,this.oStyle[t]])},getCurrentStyle:function(){return this.oStyle},_check_style_change:function(){this.oApp.exec("CHECK_STYLE_CHANGE",[])},_getBlankStyle:function(){var e={};for(var t in this.oStyleMap)this.oStyleMap[t].type=="Value"?e[t]="":e[t]=0;return e},_getStyle:function(){var e;if(nhn.CurrentSelection.isCollapsed())e=this._getStyleOf(nhn.CurrentSelection.getCommonAncestorContainer());else{var t=this.oApp.getSelection(),n=function(e){return!e.childNodes||e.childNodes.length==0?!0:!1},r=t.getNodes(!1,n);r.length==0?e=this._getStyleOf(t.commonAncestorContainer):e=this._getStyleOf(r[0])}for(attributeName in e){this.oStyleMap[attributeName].converter&&(e[attributeName]=this.oStyleMap[attributeName].converter(e[attributeName],e));if(this.oStyle[attributeName]!=e[attributeName]){if(typeof document.body.currentStyle!="object"&&typeof getComputedStyle=="function"&&attributeName=="fontSize"&&this.oStyle["fontFamily"]!=e["fontFamily"])continue;this.oApp.exec("MSG_STYLE_CHANGED",[attributeName,e[attributeName]])}}this.oStyle=e},_getStyleOf:function(e){var t=this._getBlankStyle();if(!e)return t;e.nodeType==3?e=e.parentNode:e.nodeType==9&&(e=e.body);var n=jindo.$Element(e),r,i;for(var s in this.oStyle){r=this.oStyleMap[s];if(r.type&&r.type=="Value")try{if(r.css){var o=n.css(r.css);s=="fontFamily"&&(o=o.split(/,/)[0]),t[s]=o}else r.command&&(t[s]=this.oDocument.queryCommandState(r.command))}catch(u){}else if(r.command)try{this.oDocument.queryCommandState(r.command)?t[s]="@^":t[s]="@-"}catch(u){}}switch(t.textAlign){case"left":t.justifyleft="@^";break;case"center":t.justifycenter="@^";break;case"right":t.justifyright="@^";break;case"justify":t.justifyfull="@^"}return t["justifyleft"]=="@-"&&t["justifycenter"]=="@-"&&t["justifyright"]=="@-"&&t["justifyfull"]=="@-"&&(t.justifyleft="@^"),t}}),nhn.husky.SE2M_FontSizeWithLayerUI=jindo.$Class({name:"SE2M_FontSizeWithLayerUI",$init:function(e){this._assignHTMLElements(e)},_assignHTMLElements:function(e){this.oDropdownLayer=jindo.$$.getSingle("DIV.husky_se_fontSize_layer",e),this.elFontSizeLabel=jindo.$$.getSingle("SPAN.husky_se2m_current_fontSize",e),this.aLIFontSizes=jindo.$A(jindo.$$("LI",this.oDropdownLayer)).filter(function(e,t,n){return e.firstChild!=null})._array,this.sDefaultText=this.elFontSizeLabel.innerHTML},$ON_MSG_APP_READY:function(){this.oApp.exec("REGISTER_UI_EVENT",["fontSize","click","SE2M_TOGGLE_FONTSIZE_LAYER"]),this.oApp.exec("SE2_ATTACH_HOVER_EVENTS",[this.aLIFontSizes]);for(var e=0;e<this.aLIFontSizes.length;e++)this.oApp.registerBrowserEvent(this.aLIFontSizes[e],"click","SET_FONTSIZE",[this._getFontSizeFromLI(this.aLIFontSizes[e])])},$ON_SE2M_TOGGLE_FONTSIZE_LAYER:function(){this.oApp.exec("TOGGLE_TOOLBAR_ACTIVE_LAYER",[this.oDropdownLayer,null,"SELECT_UI",["fontSize"],"DESELECT_UI",["fontSize"]]),this.oApp.exec("MSG_NOTIFY_CLICKCR",["size"])},_rxPX:/px$/i,_rxPT:/pt$/i,$ON_MSG_STYLE_CHANGED:function(e,t){if(e=="fontSize"){if(this._rxPX.test(t)){var n=parseFloat(t.replace(this._rxPX,""));n>0?t=n*72/96+"pt":t=this.sDefaultText}if(this._rxPT.test(t)){var n=parseFloat(t.replace(this._rxPT,"")),r=Math.floor(n),i=n-r;i>=0&&i<.25?n=r+0:i>=.25&&i<.75?n=r+.5:n=r+1,t=n+"pt"}t||(t=this.sDefaultText);var s=this._getMatchingLI(t);this._clearFontSizeSelection(),s?(this.elFontSizeLabel.innerHTML=t,jindo.$Element(s).addClass("active")):this.elFontSizeLabel.innerHTML=t}},$ON_SET_FONTSIZE:function(e){if(!e)return;this.oApp.exec("SET_WYSIWYG_STYLE",[{fontSize:e}]),this.oApp.exec("HIDE_ACTIVE_LAYER",[]),this.oApp.exec("CHECK_STYLE_CHANGE",[])},_getMatchingLI:function(e){var t;e=e.toLowerCase();for(var n=0;n<this.aLIFontSizes.length;n++){t=this.aLIFontSizes[n];if(this._getFontSizeFromLI(t).toLowerCase()==e)return t}return null},_getFontSizeFromLI:function(e){return e.firstChild.firstChild.style.fontSize},_clearFontSizeSelection:function(e){for(var t=0;t<this.aLIFontSizes.length;t++)jindo.$Element(this.aLIFontSizes[t]).removeClass("active")}}),nhn.husky.SE2M_LineStyler=jindo.$Class({name:"SE2M_LineStyler",$BEFORE_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["getLineStyle",jindo.$Fn(this.getLineStyle,this).bind()])},$ON_SET_LINE_STYLE:function(e,t,n){this.oSelection=this.oApp.getSelection();var r=this._getSelectedNodes(!1);this.setLineStyle(e,t,n,r),this.oApp.exec("CHECK_STYLE_CHANGE",[])},$ON_SET_LINE_BLOCK_STYLE:function(e,t,n){this.oSelection=this.oApp.getSelection(),this.setLineBlockStyle(e,t,n),this.oApp.exec("CHECK_STYLE_CHANGE",[])},_getSelectedTDs:function(){var e={};return this.oApp.exec("GET_SELECTED_TD_BLOCK",["aTdCells",e]),e.aTdCells||[]},getLineStyle:function(e){var t=this._getSelectedNodes(!1),n,r,i,s;if(t.length===0)return null;var o=t.length;o===0?s=null:(r=this._getLineWrapper(t[0]),s=this._getWrapperLineStyle(e,r));var u=this.oSelection.getStartNode();if(s!=null)for(var a=1;a<o;a++){if(this._isChildOf(t[a],n))continue;if(!t[a])continue;n=this._getLineWrapper(t[a]);if(n==r)continue;i=this._getWrapperLineStyle(e,n);if(i!=s){s=null;break}r=n}n=this._getLineWrapper(t[o-1]);var f=this.oSelection.getEndNode();return setTimeout(jindo.$Fn(function(e,t){var n=this._getSelectedTDs();if(n.length>0){var r=nhn.husky.SE2M_Utils.findAncestorByTagName("TD",e),i=nhn.husky.SE2M_Utils.findAncestorByTagName("TD",t);e=r||!e?n[0].firstChild:e,t=i||!t?n[n.length-1].lastChild:t}this.oSelection.setEndNodes(e,t),this.oSelection.select(),this.oApp.exec("CHECK_STYLE_CHANGE",[])},this).bind(u,f),0),s},setLineStyle:function(e,t,n,r){function s(e,t,n){if(!e){i=!0;try{e=thisRef.oSelection.surroundContentsWithNewNode("P")}catch(r){e=thisRef.oSelection.surroundContentsWithNewNode("DIV")}}return typeof n=="function"?n(e):e.style[t]=n,e.childNodes.length===0&&(e.innerHTML="&nbsp;"),e}function o(e){while(e&&e.tagName!="BODY")e=nhn.DOMFix.parentNode(e);return e?!0:!1}thisRef=this;var i=!1;if(r.length===0)return;var u,a,f=r.length;(!n||!n.bDontAddUndoHistory)&&this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["LINE STYLE"]),a=this._getLineWrapper(r[0]),a=s(a,e,t);var l=a,c=a;for(var h=1;h<f;h++){try{if(!o(nhn.DOMFix.parentNode(r[h])))continue}catch(p){continue}if(this._isChildOf(r[h],u))continue;u=this._getLineWrapper(r[h]);if(u==a)continue;u=s(u,e,t),a=u}c=u||l,i&&(!n||!n.bDoNotSelect)&&setTimeout(jindo.$Fn(function(e,t,n){e==t?(this.oSelection.selectNodeContents(e),e.childNodes.length==1&&e.firstChild.tagName=="BR"&&this.oSelection.collapseToStart()):this.oSelection.setEndNodes(e,t),this.oSelection.select(),(!n||!n.bDontAddUndoHistory)&&this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["LINE STYLE"])},this).bind(l,c,n),0)},setLineBlockStyle:function(e,t,n){var r=[],i=[],s=this._getSelectedTDs();for(var o=0;o<s.length;o++){this.oSelection.selectNode(s[o]),r=this.oSelection.getNodes();for(var u=0,a=0;u<r.length;u++)if(r[u].nodeType==3||r[u].tagName=="BR"&&u==0)i[a]=r[u],a++;this.setLineStyle(e,t,n,i),r=i=[]}},getTextNodes:function(e,t){var n=function(e){return e.nodeType==3&&e.nodeValue!="\n"&&e.nodeValue!=""&&e.nodeValue!="\ufeff"||e.tagName=="LI"&&e.innerHTML==""||e.tagName=="P"&&e.innerHTML==""?!0:!1};return t.getNodes(e,n)},_getSelectedNodes:function(e){e||(this.oSelection=this.oApp.getSelection()),this.oSelection.endContainer.tagName=="LI"&&this.oSelection.endOffset==0&&this.oSelection.endContainer.innerHTML==""&&this.oSelection.setEndAfter(this.oSelection.endContainer);if(this.oSelection.collapsed){var t=this._getSelectedTDs();if(t.length>0)return[t[0].firstChild,t[t.length-1].lastChild];this.oSelection.selectNode(this.oSelection.commonAncestorContainer)}var n=this.getTextNodes(!1,this.oSelection);if(n.length===0){var r=this.oSelection.getStartNode();if(r)n[0]=r;else{var i=this.oSelection._document.createTextNode("\u00a0");this.oSelection.insertNode(i),n=[i]}}return n},_getWrapperLineStyle:function(e,t){var n=null;if(t&&t.style[e])n=t.style[e];else{t=this.oSelection.commonAncesterContainer;while(t&&!this.oSelection.rxLineBreaker.test(t.tagName)){if(t&&t.style[e]){n=t.style[e];break}t=nhn.DOMFix.parentNode(t)}}return n},_isChildOf:function(e,t){while(e&&e.tagName!="BODY"){if(e==t)return!0;e=nhn.DOMFix.parentNode(e)}return!1},_getLineWrapper:function(e){var t=this.oApp.getEmptySelection();t.selectNode(e);var n=t.getLineInfo(),r=n.oStart,i=n.oEnd,s,o,u,a,f=null;return s=r.oNode,u=r.oLineBreaker,o=i.oNode,a=i.oLineBreaker,this.oSelection.setEndNodes(s,o),u==a&&(u.tagName=="P"||u.tagName=="DIV"||u.tagName=="LI"?f=u:this.oSelection.setEndNodes(u.firstChild,u.lastChild)),f}}),nhn.husky.SE2M_LineHeightWithLayerUI=jindo.$Class({name:"SE2M_LineHeightWithLayerUI",MIN_LINE_HEIGHT:50,$ON_MSG_APP_READY:function(){this.oApp.exec("REGISTER_UI_EVENT",["lineHeight","click","SE2M_TOGGLE_LINEHEIGHT_LAYER"]),this.oApp.registerLazyMessage(["SE2M_TOGGLE_LINEHEIGHT_LAYER"],["hp_SE2M_LineHeightWithLayerUI$Lazy.js"])}}),nhn.husky.SE2M_ColorPalette=jindo.$Class({name:"SE2M_ColorPalette",elAppContainer:null,bUseRecentColor:!1,nLimitRecentColor:17,rxRGBColorPattern:/rgb\((\d+), ?(\d+), ?(\d+)\)/i,rxColorPattern:/^#?[0-9a-fA-F]{6}$|^rgb\(\d+, ?\d+, ?\d+\)$/i,aRecentColor:[],URL_COLOR_LIST:"",URL_COLOR_ADD:"",URL_COLOR_UPDATE:"",sRecentColorTemp:'<li><button type="button" title="{RGB_CODE}" style="background:{RGB_CODE}"><span><span>{RGB_CODE}</span></span></button></li>',$init:function(e){this.elAppContainer=e},$ON_MSG_APP_READY:function(){},_assignHTMLElements:function(e){var t=nhn.husky.SE2M_Configuration.SE2M_ColorPalette;t&&(this.bUseRecentColor=t.bUseRecentColor||!1,this.URL_COLOR_ADD=t.addColorURL||"http://api.se2.naver.com/1/colortable/TextAdd.nhn",this.URL_COLOR_UPDATE=t.updateColorURL||"http://api.se2.naver.com/1/colortable/TextUpdate.nhn",this.URL_COLOR_LIST=t.colorListURL||"http://api.se2.naver.com/1/colortable/TextList.nhn"),this.elColorPaletteLayer=jindo.$$.getSingle("DIV.husky_se2m_color_palette",e),this.elColorPaletteLayerColorPicker=jindo.$$.getSingle("DIV.husky_se2m_color_palette_colorpicker",this.elColorPaletteLayer),this.elRecentColorForm=jindo.$$.getSingle("form",this.elColorPaletteLayerColorPicker),this.elBackgroundColor=jindo.$$.getSingle("ul.husky_se2m_bgcolor_list",e),this.elInputColorCode=jindo.$$.getSingle("INPUT.husky_se2m_cp_colorcode",this.elColorPaletteLayerColorPicker),this.elPreview=jindo.$$.getSingle("SPAN.husky_se2m_cp_preview",this.elColorPaletteLayerColorPicker),this.elCP_ColPanel=jindo.$$.getSingle("DIV.husky_se2m_cp_colpanel",this.elColorPaletteLayerColorPicker),this.elCP_HuePanel=jindo.$$.getSingle("DIV.husky_se2m_cp_huepanel",this.elColorPaletteLayerColorPicker),this.elCP_ColPanel.style.position="relative",this.elCP_HuePanel.style.position="relative",this.elColorPaletteLayerColorPicker.style.display="none",this.elMoreBtn=jindo.$$.getSingle("BUTTON.husky_se2m_color_palette_more_btn",this.elColorPaletteLayer),this.welMoreBtn=jindo.$Element(this.elMoreBtn),this.elOkBtn=jindo.$$.getSingle("BUTTON.husky_se2m_color_palette_ok_btn",this.elColorPaletteLayer),this.bUseRecentColor&&(this.elColorPaletteLayerRecent=jindo.$$.getSingle("DIV.husky_se2m_color_palette_recent",this.elColorPaletteLayer),this.elRecentColor=jindo.$$.getSingle("ul.se2_pick_color",this.elColorPaletteLayerRecent),this.elDummyNode=jindo.$$.getSingle("ul.se2_pick_color > li",this.elColorPaletteLayerRecent)||null,this.elColorPaletteLayerRecent.style.display="none")},$LOCAL_BEFORE_FIRST:function(){this._assignHTMLElements(this.elAppContainer),this.elDummyNode&&jindo.$Element(jindo.$$.getSingle("ul.se2_pick_color > li",this.elColorPaletteLayerRecent)).leave(),this.bUseRecentColor&&this._ajaxRecentColor(this._ajaxRecentColorCallback),this.oApp.registerBrowserEvent(this.elColorPaletteLayer,"click","EVENT_CLICK_COLOR_PALETTE"),this.oApp.bMobile||(this.oApp.registerBrowserEvent(this.elBackgroundColor,"mouseover","EVENT_MOUSEOVER_COLOR_PALETTE"),this.oApp.registerBrowserEvent(this.elColorPaletteLayer,"mouseover","EVENT_MOUSEOVER_COLOR_PALETTE"),this.oApp.registerBrowserEvent(this.elBackgroundColor,"mouseout","EVENT_MOUSEOUT_COLOR_PALETTE"),this.oApp.registerBrowserEvent(this.elColorPaletteLayer,"mouseout","EVENT_MOUSEOUT_COLOR_PALETTE"))},$ON_EVENT_MOUSEOVER_COLOR_PALETTE:function(e){var t=e.element;while(t&&t.tagName&&t.tagName.toLowerCase()!="li")t=t.parentNode;if(!t||!t.nodeType||t.nodeType==9)return;(t.className==""||!t.className||typeof t.className=="undefined")&&jindo.$Element(t).addClass("hover")},$ON_EVENT_MOUSEOUT_COLOR_PALETTE:function(e){var t=e.element;while(t&&t.tagName&&t.tagName.toLowerCase()!="li")t=t.parentNode;if(!t)return;t.className=="hover"&&jindo.$Element(t).removeClass("hover")},$ON_EVENT_CLICK_COLOR_PALETTE:function(e){var t=e.element;while(t.tagName=="SPAN")t=t.parentNode;if(t.tagName&&t.tagName=="BUTTON"){if(t==this.elMoreBtn){this.oApp.exec("TOGGLE_COLOR_PICKER");return}this.oApp.exec("APPLY_COLOR",[t])}},$ON_APPLY_COLOR:function(e){var t=this.elInputColorCode.value,n=null;t.indexOf("#")==-1&&(t="#"+t,this.elInputColorCode.value=t);if(e==this.elOkBtn){if(!this._verifyColorCode(t)){this.elInputColorCode.value="",alert(this.oApp.$MSG("SE_Color.invalidColorCode")),this.elInputColorCode.focus();return}this.oApp.exec("COLOR_PALETTE_APPLY_COLOR",[t,!0]);return}n=jindo.$Element(e.parentNode.parentNode.parentNode),t=e.title,n.hasClass("husky_se2m_color_palette")?this.oApp.exec("COLOR_PALETTE_APPLY_COLOR",[t,nhn.husky.SE2M_Configuration.SE2M_ColorPalette.bAddRecentColorFromDefault]):n.hasClass("husky_se2m_color_palette_recent")&&this.oApp.exec("COLOR_PALETTE_APPLY_COLOR",[t,!0])},$ON_RESET_COLOR_PALETTE:function(){this._initColor()},$ON_TOGGLE_COLOR_PICKER:function(){this.elColorPaletteLayerColorPicker.style.display=="none"?this.oApp.exec("SHOW_COLOR_PICKER"):this.oApp.exec("HIDE_COLOR_PICKER")},$ON_SHOW_COLOR_PICKER:function(){this.elColorPaletteLayerColorPicker.style.display="",this.cpp=new nhn.ColorPicker(this.elCP_ColPanel,{huePanel:this.elCP_HuePanel});var e=jindo.$Fn(function(e){this.elPreview.style.backgroundColor=e.hexColor,this.elInputColorCode.value=e.hexColor},this).bind();this.cpp.attach("colorchange",e),this.$ON_SHOW_COLOR_PICKER=this._showColorPickerMain,this.$ON_SHOW_COLOR_PICKER()},$ON_HIDE_COLOR_PICKER:function(){this.elColorPaletteLayerColorPicker.style.display="none",this.welMoreBtn.addClass("se2_view_more"),this.welMoreBtn.removeClass("se2_view_more2")},$ON_SHOW_COLOR_PALETTE:function(e,t){this.sCallbackCmd=e,this.oLayerContainer=t,this.oLayerContainer.insertBefore(this.elColorPaletteLayer,null),this.elColorPaletteLayer.style.display="block",this.oApp.delayedExec("POSITION_TOOLBAR_LAYER",[this.elColorPaletteLayer.parentNode.parentNode],0)},$ON_HIDE_COLOR_PALETTE:function(){this.elColorPaletteLayer.style.display="none"},$ON_COLOR_PALETTE_APPLY_COLOR:function(e,t){t=t?t:!1,e=this._getHexColorCode(e),this.bUseRecentColor&&!!t&&this.oApp.exec("ADD_RECENT_COLOR",[e]),this.oApp.exec(this.sCallbackCmd,[e])},$ON_EVENT_MOUSEUP_COLOR_PALETTE:function(e){var t=e.element;if(!t.style.backgroundColor)return;this.oApp.exec("COLOR_PALETTE_APPLY_COLOR",[t.style.backgroundColor,!1])},$ON_ADD_RECENT_COLOR:function(e){var t=this.aRecentColor.length===0;this._addRecentColor(e),t?this._ajaxAddColor():this._ajaxUpdateColor(),this._redrawRecentColorElement()},_verifyColorCode:function(e){return this.rxColorPattern.test(e)},_getHexColorCode:function(e){if(this.rxRGBColorPattern.test(e)){var t=function(e){var t=parseInt(e,10).toString(16);return t.length<2&&(t="0"+t),t.toUpperCase()},n=t(RegExp.$1),r=t(RegExp.$2),i=t(RegExp.$3);e="#"+n+r+i}return e},_addRecentColor:function(e){var t=jindo.$A(this.aRecentColor);t=t.refuse(e),t.unshift(e),t.length()>this.nLimitRecentColor&&t.length(this.nLimitRecentColor),this.aRecentColor=t.$value()},_redrawRecentColorElement:function(){var e=[],t=this.aRecentColor.length,n;if(t===0)return;for(n=0;n<t;n++)e.push(this.sRecentColorTemp.replace(/\{RGB_CODE\}/gi,this.aRecentColor[n]));this.elRecentColor.innerHTML=e.join(""),this.elColorPaletteLayerRecent.style.display="block"},_ajaxAddColor:function(){jindo.$Ajax(this.URL_COLOR_ADD,{type:"jsonp",onload:function(){}}).request({text_key:"colortable",text_data:this.aRecentColor.join(",")})},_ajaxUpdateColor:function(){jindo.$Ajax(this.URL_COLOR_UPDATE,{type:"jsonp",onload:function(){}}).request({text_key:"colortable",text_data:this.aRecentColor.join(",")})},_showColorPickerMain:function(){this._initColor(),this.elColorPaletteLayerColorPicker.style.display="",this.welMoreBtn.removeClass("se2_view_more"),this.welMoreBtn.addClass("se2_view_more2")},_initColor:function(){this.cpp&&this.cpp.rgb({r:0,g:0,b:0}),this.elPreview.style.backgroundColor="#000000",this.elInputColorCode.value="#000000",this.oApp.exec("HIDE_COLOR_PICKER")},_ajaxRecentColor:function(e){jindo.$Ajax(this.URL_COLOR_LIST,{type:"jsonp",onload:jindo.$Fn(e,this).bind()}).request()},_ajaxRecentColorCallback:function(e){var t=e.json().result,n,r,i;if(!t||!!t.error)return;n=jindo.$A(t).filter(this._verifyColorCode,this),n.length()>this.nLimitRecentColor&&n.length(this.nLimitRecentColor),t=n.reverse().$value();for(r=0,i=t.length;r<i;r++)this._addRecentColor(this._getHexColorCode(t[r]));this._redrawRecentColorElement()}}).extend(jindo.Component),nhn.husky.SE2M_FontColor=jindo.$Class({name:"SE2M_FontColor",rxColorPattern:/^#?[0-9a-fA-F]{6}$|^rgb\(\d+, ?\d+, ?\d+\)$/i,$init:function(e){this._assignHTMLElements(e)},_assignHTMLElements:function(e){this.elLastUsed=jindo.$$.getSingle("SPAN.husky_se2m_fontColor_lastUsed",e),this.elDropdownLayer=jindo.$$.getSingle("DIV.husky_se2m_fontcolor_layer",e),this.elPaletteHolder=jindo.$$.getSingle("DIV.husky_se2m_fontcolor_paletteHolder",this.elDropdownLayer),this._setLastUsedFontColor("#000000")},$BEFORE_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["getLastUsedFontColor",jindo.$Fn(this.getLastUsedFontColor,this).bind()])},$ON_MSG_APP_READY:function(){this.oApp.exec("REGISTER_UI_EVENT",["fontColorA","click","APPLY_LAST_USED_FONTCOLOR"]),this.oApp.exec("REGISTER_UI_EVENT",["fontColorB","click","TOGGLE_FONTCOLOR_LAYER"]),this.oApp.registerLazyMessage(["APPLY_LAST_USED_FONTCOLOR","TOGGLE_FONTCOLOR_LAYER"],["hp_SE2M_FontColor$Lazy.js"])},_setLastUsedFontColor:function(e){this.sLastUsedColor=e,this.elLastUsed.style.backgroundColor=this.sLastUsedColor},getLastUsedFontColor:function(){return this.sLastUsedColor?this.sLastUsedColor:"#000000"}}),nhn.husky.SE2M_BGColor=jindo.$Class({name:"SE2M_BGColor",rxColorPattern:/^#?[0-9a-fA-F]{6}$|^rgb\(\d+, ?\d+, ?\d+\)$/i,$init:function(e){this._assignHTMLElements(e)},_assignHTMLElements:function(e){this.elLastUsed=jindo.$$.getSingle("SPAN.husky_se2m_BGColor_lastUsed",e),this.elDropdownLayer=jindo.$$.getSingle("DIV.husky_se2m_BGColor_layer",e),this.elBGColorList=jindo.$$.getSingle("UL.husky_se2m_bgcolor_list",e),this.elPaletteHolder=jindo.$$.getSingle("DIV.husky_se2m_BGColor_paletteHolder",this.elDropdownLayer),this._setLastUsedBGColor("#777777")},$BEFORE_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["getLastUsedBackgroundColor",jindo.$Fn(this.getLastUsedBGColor,this).bind()])},$ON_MSG_APP_READY:function(){this.oApp.exec("REGISTER_UI_EVENT",["BGColorA","click","APPLY_LAST_USED_BGCOLOR"]),this.oApp.exec("REGISTER_UI_EVENT",["BGColorB","click","TOGGLE_BGCOLOR_LAYER"]),this.oApp.registerBrowserEvent(this.elBGColorList,"click","EVENT_APPLY_BGCOLOR",[]),this.oApp.registerLazyMessage(["APPLY_LAST_USED_BGCOLOR","TOGGLE_BGCOLOR_LAYER"],["hp_SE2M_BGColor$Lazy.js"])},_setLastUsedBGColor:function(e){this.sLastUsedColor=e,this.elLastUsed.style.backgroundColor=this.sLastUsedColor},getLastUsedBGColor:function(){return this.sLastUsedColor?this.sLastUsedColor:"#777777"}}),nhn.husky.SE2M_Hyperlink=jindo.$Class({name:"SE2M_Hyperlink",sATagMarker:"HTTP://HUSKY_TMP.MARKER/",_assignHTMLElements:function(e){this.oHyperlinkButton=jindo.$$.getSingle("li.husky_seditor_ui_hyperlink",e),this.oHyperlinkLayer=jindo.$$.getSingle("div.se2_layer",this.oHyperlinkButton),this.oLinkInput=jindo.$$.getSingle("INPUT[type=text]",this.oHyperlinkLayer),this.oBtnConfirm=jindo.$$.getSingle("button.se2_apply",this.oHyperlinkLayer),this.oBtnCancel=jindo.$$.getSingle("button.se2_cancel",this.oHyperlinkLayer)},_generateAutoLink:function(e,t,n,r,i){t=t||"";var s;return r?s='<a href="http://'+r+'">'+n+"</a>":s='<a href="'+i+'">'+n+"</a>",t+s},$BEFORE_MSG_APP_READY:function(){var e=nhn.husky.SE2M_Configuration.SE2M_Hyperlink;if(e&&e.bAutolink===!1){this.$ON_REGISTER_CONVERTERS=null,this.$ON_DISABLE_MESSAGE=null,this.$ON_ENABLE_MESSAGE=null;try{this.oApp.getWYSIWYGDocument().execCommand("AutoUrlDetect",!1,!1)}catch(t){}}},$ON_MSG_APP_READY:function(){this.bLayerShown=!1,this.oApp.exec("REGISTER_UI_EVENT",["hyperlink","click","TOGGLE_HYPERLINK_LAYER"]),this.oApp.exec("REGISTER_HOTKEY",["ctrl+k","TOGGLE_HYPERLINK_LAYER",[]]),this.oApp.registerLazyMessage(["TOGGLE_HYPERLINK_LAYER","APPLY_HYPERLINK"],["hp_SE2M_Hyperlink$Lazy.js"])},$ON_REGISTER_CONVERTERS:function(){this.oApp.exec("ADD_CONVERTER_DOM",["IR_TO_DB",jindo.$Fn(this.irToDb,this).bind()])},$LOCAL_BEFORE_FIRST:function(e){if(!!e.match(/(REGISTER_CONVERTERS)/))return this.oApp.acceptLocalBeforeFirstAgain(this,!0),!0;this._assignHTMLElements(this.oApp.htOptions.elAppContainer),this.sRXATagMarker=this.sATagMarker.replace(/\//g,"\\/").replace(/\./g,"\\."),this.oApp.registerBrowserEvent(this.oBtnConfirm,"click","APPLY_HYPERLINK"),this.oApp.registerBrowserEvent(this.oBtnCancel,"click","HIDE_ACTIVE_LAYER"),this.oApp.registerBrowserEvent(this.oLinkInput,"keydown","EVENT_HYPERLINK_KEYDOWN")},$ON_EVENT_HYPERLINK_KEYDOWN:function(e){e.key().enter&&(this.oApp.exec("APPLY_HYPERLINK"),e.stop())},$ON_DISABLE_MESSAGE:function(e){if(e!=="TOGGLE_HYPERLINK_LAYER")return;try{this.oApp.getWYSIWYGDocument().execCommand("AutoUrlDetect",!1,!1)}catch(t){}this._bDisabled=!0},$ON_ENABLE_MESSAGE:function(e){if(e!=="TOGGLE_HYPERLINK_LAYER")return;try{this.oApp.getWYSIWYGDocument().execCommand("AutoUrlDetect",!1,!0)}catch(t){}this._bDisabled=!1},irToDb:function(e){if(this._bDisabled)return;var t=e.cloneNode(!0);try{t.innerHTML}catch(n){t=jindo.$(e.outerHTML)}var r=this.oApp.getEmptySelection(),i=r._getFirstRealChild(t),s=r._getLastRealChild(t),o=jindo.$A(r._getNodesBetween(i,s)),u=o.filter(function(e){return e&&e.nodeType===3}).$value(),a=u,f=u,l=this.oApp.getWYSIWYGDocument().createElement("DIV"),c,h,p="@"+(new Date).getTime()+"@",d=new RegExp(p,"g");for(var v=0,m=u.length;v<m;v++){c=a[v].parentNode,h=!1;while(c){if(c.tagName==="A"||c.tagName==="PRE"){h=!0;break}c=c.parentNode}if(h)continue;l.innerHTML="";try{l.appendChild(a[v].cloneNode(!0)),l.innerHTML=(p+l.innerHTML).replace(/(&nbsp|\s)?(((?!http[s]?:\/\/)www\.(?:(?!\&nbsp;|\s|"|').)+)|(http[s]?:\/\/(?:(?!&nbsp;|\s|"|').)+))/ig,this._generateAutoLink),a[v].parentNode.insertBefore(l,a[v]),a[v].parentNode.removeChild(a[v])}catch(g){}while(l.firstChild)l.parentNode.insertBefore(l.firstChild,l);l.parentNode.removeChild(l)}l=r=i=s=o=u=a=f=c=null,t.innerHTML=t.innerHTML.replace(d,""),e.innerHTML=t.innerHTML,t=null}}),nhn.husky.SE2M_FontNameWithLayerUI=jindo.$Class({name:"SE2M_FontNameWithLayerUI",FONT_SEPARATOR:"husky_seditor_font_separator",_rxQuote:/['"]/g,_rxComma:/\s*,\s*/g,$init:function(e,t){this.elLastHover=null,this._assignHTMLElements(e),this.htBrowser=jindo.$Agent().navigator(),this.aAdditionalFontList=t||[]},addAllFonts:function(){var e,t,n,r,i;this.htFamilyName2DisplayName={},this.htAllFonts={},this.aBaseFontList=[],this.aDefaultFontList=[],this.aTempSavedFontList=[],this.htOptions=this.oApp.htOptions.SE2M_FontName;if(this.htOptions){e=this.htOptions.aDefaultFontList||[],t=this.htOptions.aFontList,n=this.htOptions.htMainFont,r=this.htOptions.aFontInUse;if(this.htBrowser.ie&&t)for(i=0;i<t.length;i++)this.addFont(t[i].id,t[i].name,t[i].size,t[i].url,t[i].cssUrl);for(i=0;i<e.length;i++)this.addFont(e[i][0],e[i][1],0,"","",1);n&&n.id&&this.setMainFont(n.id,n.name,n.size,n.url,n.cssUrl);if(this.htBrowser.ie&&r)for(i=0;i<r.length;i++)this.addFontInUse(r[i].id,r[i].name,r[i].size,r[i].url,r[i].cssUrl)}if(!this.htOptions||!this.htOptions.aDefaultFontList||this.htOptions.aDefaultFontList.length===0)this.addFont("\ub3cb\uc6c0,Dotum","\ub3cb\uc6c0",0,"","",1,null,!0),this.addFont("\ub3cb\uc6c0\uccb4,DotumChe,AppleGothic","\ub3cb\uc6c0\uccb4",0,"","",1,null,!0),this.addFont("\uad74\ub9bc,Gulim","\uad74\ub9bc",0,"","",1,null,!0),this.addFont("\uad74\ub9bc\uccb4,GulimChe","\uad74\ub9bc\uccb4",0,"","",1,null,!0),this.addFont("\ubc14\ud0d5,Batang,AppleMyungjo","\ubc14\ud0d5",0,"","",1,null,!0),this.addFont("\ubc14\ud0d5\uccb4,BatangChe","\ubc14\ud0d5\uccb4",0,"","",1,null,!0),this.addFont("\uad81\uc11c,Gungsuh,GungSeo","\uad81\uc11c",0,"","",1,null,!0),this.addFont("Arial","Arial",0,"","",1,"abcd",!0),this.addFont("Tahoma","Tahoma",0,"","",1,"abcd",!0),this.addFont("Times New Roman","Times New Roman",0,"","",1,"abcd",!0),this.addFont("Verdana","Verdana",0,"","",1,"abcd",!0),this.addFont("Courier New","Courier New",0,"","",1,"abcd",!0);if(!!this.aAdditionalFontList&&this.aAdditionalFontList.length>0)for(i=0,nLen=this.aAdditionalFontList.length;i<nLen;i++)this.addFont(this.aAdditionalFontList[i][0],this.aAdditionalFontList[i][1],0,"","",1)},$ON_MSG_APP_READY:function(){this.bDoNotRecordUndo=!1,this.oApp.exec("ADD_APP_PROPERTY",["addFont",jindo.$Fn(this.addFont,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["addFontInUse",jindo.$Fn(this.addFontInUse,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["setMainFont",jindo.$Fn(this.setMainFont,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["setDefaultFont",jindo.$Fn(this.setDefaultFont,this).bind()]),this.oApp.exec("REGISTER_UI_EVENT",["fontName","click","SE2M_TOGGLE_FONTNAME_LAYER"])},$AFTER_MSG_APP_READY:function(){this._initFontName(),this._attachIEEvent()},_assignHTMLElements:function(e){this.oDropdownLayer=jindo.$$.getSingle("DIV.husky_se_fontName_layer",e),this.elFontNameLabel=jindo.$$.getSingle("SPAN.husky_se2m_current_fontName",e),this.elFontNameList=jindo.$$.getSingle("UL",this.oDropdownLayer),this.elInnerLayer=this.elFontNameList.parentNode,this.aelFontInMarkup=jindo.$$("LI",this.oDropdownLayer),this.elFontItemTemplate=this.aelFontInMarkup.shift(),this.aLIFontNames=jindo.$A(jindo.$$("LI",this.oDropdownLayer)).filter(function(e,t,n){return e.firstChild!==null})._array,this.sDefaultText=this.elFontNameLabel.innerHTML},_initFontName:function(){this._addFontInMarkup(),this.addAllFonts();var e;this.oApp.getCurrentStyle&&(e=this.oApp.getCurrentStyle())&&this.$ON_MSG_STYLE_CHANGED("fontFamily",e.fontFamily),this.oApp.registerBrowserEvent(this.oDropdownLayer,"mouseover","EVENT_FONTNAME_LAYER_MOUSEOVER",[]),this.oApp.registerBrowserEvent(this.oDropdownLayer,"click","EVENT_FONTNAME_LAYER_CLICKED",[])},_checkFontLI:function(e,t){if(!e)return!1;var n=IsInstalledFont(t);return e.style.display=n?"block":"none",n},_addFontInMarkup:function(){for(var e=0,t,n,r,i;t=this.aelFontInMarkup[e];e++)t.firstChild?(n=this._getFontFamilyFromLI(t).replace(this._rxQuote,"").replace(this._rxComma,","),i|=this._checkFontLI(t,n)):t.className.indexOf(this.FONT_SEPARATOR)>-1?(r&&(r.style.display=i?"block":"none"),r=t,i=!1):t.style.display="none";r&&(r.style.display=i?"block":"none")},_attachIEEvent:function(){if(!this.htBrowser.ie)return;if(this.htBrowser.nativeVersion<9){this._wfOnPasteWYSIWYGBody=jindo.$Fn(this._onPasteWYSIWYGBody,this),this._wfOnPasteWYSIWYGBody.attach(this.oApp.getWYSIWYGDocument().body,"paste");return}if(document.documentMode<9){this._wfOnFocusWYSIWYGBody=jindo.$Fn(this._onFocusWYSIWYGBody,this),this._wfOnFocusWYSIWYGBody.attach(this.oApp.getWYSIWYGDocument().body,"focus");return}this.welEditingAreaCover=jindo.$Element('<DIV style="width:100%; height:100%; position:absolute; top:0px; left:0px; z-index:1000;"></DIV>'),this.oApp.welEditingAreaContainer.prepend(this.welEditingAreaCover),jindo.$Fn(this._onMouseupCover,this).attach(this.welEditingAreaCover.$value(),"mouseup")},_onFocusWYSIWYGBody:function(e){this._wfOnFocusWYSIWYGBody.detach(this.oApp.getWYSIWYGDocument().body,"focus"),this._loadAllBaseFont()},_onPasteWYSIWYGBody:function(e){this._wfOnPasteWYSIWYGBody.detach(this.oApp.getWYSIWYGDocument().body,"paste"),this._loadAllBaseFont()},_onMouseupCover:function(e){e.stop(),this.welEditingAreaCover&&this.welEditingAreaCover.leave();var t=e.mouse(),n=this.oApp.getWYSIWYGDocument().body,r=jindo.$Element(n),i=this.oApp.getEmptySelection();i.selectNode(n),i.collapseToStart(),i.select(),r.fireEvent("mousedown",{left:t.left,middle:t.middle,right:t.right}),r.fireEvent("mouseup",{left:t.left,middle:t.middle,right:t.right});if(this.oApp.oNavigator.ie&&document.documentMode<11&&this.oApp.getEditingMode()==="WYSIWYG"){if(this.oApp.getWYSIWYGDocument().body.innerHTML=="<p></p>"){this.oApp.getWYSIWYGDocument().body.innerHTML='<p><span id="husky_bookmark_start_INIT"></span><span id="husky_bookmark_end_INIT"></span></p>';var i=this.oApp.getSelection();i.moveToStringBookmark("INIT"),i.select(),i.removeStringBookmark("INIT")}}else if(this.oApp.oNavigator.ie&&this.oApp.oNavigator.nativeVersion==11&&document.documentMode==11&&this.oApp.getEditingMode()==="WYSIWYG"&&this.oApp.getWYSIWYGDocument().body.innerHTML=="<p><br></p>"){var s=jindo.$$.getSingle("br",n);i.setStartBefore(s),i.setEndBefore(s),i.select()}},$ON_EVENT_TOOLBAR_MOUSEDOWN:function(){if(this.htBrowser.nativeVersion<9||document.documentMode<9)return;this.welEditingAreaCover&&this.welEditingAreaCover.leave()},_loadAllBaseFont:function(){var e,t;if(!this.htBrowser.ie)return;if(this.htBrowser.nativeVersion<9)for(e=0,t=this.aBaseFontList.length;e<t;e++)this.aBaseFontList[e].loadCSS(this.oApp.getWYSIWYGDocument());else if(document.documentMode<9)for(e=0,t=this.aBaseFontList.length;e<t;e++)this.aBaseFontList[e].loadCSSToMenu();this._loadAllBaseFont=function(){}},_addFontToMenu:function(e,t,n){var r=document.createElement("LI");r.innerHTML=this.elFontItemTemplate.innerHTML.replace("@DisplayName@",e).replace("FontFamily",t).replace("@SampleText@",n),this.elFontNameList.insertBefore(r,this.elFontItemTemplate),this.aLIFontNames[this.aLIFontNames.length]=r,this.aLIFontNames.length>20&&(this.oDropdownLayer.style.overflowX="hidden",this.oDropdownLayer.style.overflowY="auto",this.oDropdownLayer.style.height="400px",this.oDropdownLayer.style.width="204px")},$ON_EVENT_FONTNAME_LAYER_MOUSEOVER:function(e){var t=this._findLI(e.element);if(!t)return;this._clearLastHover(),t.className="hover",this.elLastHover=t},$ON_EVENT_FONTNAME_LAYER_CLICKED:function(e){var t=this._findLI(e.element);if(!t)return;var n=this._getFontFamilyFromLI(t),r=this.htAllFonts[n.replace(/\"/g,nhn.husky.SE2M_FontNameWithLayerUI.CUSTOM_FONT_MARKS)],i;r?i=r.defaultSize+"pt":i=0,this.oApp.exec("SET_FONTFAMILY",[n,i])},_findLI:function(e){while(e.tagName!="LI"){if(!e||e===this.oDropdownLayer)return null;e=e.parentNode}return e.className.indexOf(this.FONT_SEPARATOR)>-1?null:e},_clearLastHover:function(){this.elLastHover&&(this.elLastHover.className="")},$ON_SE2M_TOGGLE_FONTNAME_LAYER:function(){this.oApp.exec("TOGGLE_TOOLBAR_ACTIVE_LAYER",[this.oDropdownLayer,null,"MSG_FONTNAME_LAYER_OPENED",[],"MSG_FONTNAME_LAYER_CLOSED",[]]),this.oApp.exec("MSG_NOTIFY_CLICKCR",["font"])},$ON_MSG_FONTNAME_LAYER_OPENED:function(){this.oApp.exec("SELECT_UI",["fontName"])},$ON_MSG_FONTNAME_LAYER_CLOSED:function(){this._clearLastHover(),this.oApp.exec("DESELECT_UI",["fontName"])},$ON_MSG_STYLE_CHANGED:function(e,t){if(e=="fontFamily"){t=t.replace(/["']/g,"");var n=this._getMatchingLI(t);this._clearFontNameSelection();if(n)this.elFontNameLabel.innerHTML=this._getFontNameLabelFromLI(n),jindo.$Element(n).addClass("active");else{var r=this.sDefaultText;this.elFontNameLabel.innerHTML=r}}},$BEFORE_RECORD_UNDO_BEFORE_ACTION:function(){return!this.bDoNotRecordUndo},$BEFORE_RECORD_UNDO_AFTER_ACTION:function(){return!this.bDoNotRecordUndo},$BEFORE_RECORD_UNDO_ACTION:function(){return!this.bDoNotRecordUndo},$ON_SET_FONTFAMILY:function(e,t){if(!e)return;var n=this.htAllFonts[e.replace(/\"/g,nhn.husky.SE2M_FontNameWithLayerUI.CUSTOM_FONT_MARKS)];!n||n.loadCSS(this.oApp.getWYSIWYGDocument()),this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["SET FONTFAMILY",{bMustBlockElement:!0}]),this.bDoNotRecordUndo=!0,parseInt(t,10)>0&&this.oApp.exec("SET_WYSIWYG_STYLE",[{fontSize:t}]),this.oApp.exec("SET_WYSIWYG_STYLE",[{fontFamily:e}]),this.bDoNotRecordUndo=!1,this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["SET FONTFAMILY",{bMustBlockElement:!0}]),this.oApp.exec("HIDE_ACTIVE_LAYER",[]),this.oApp.exec("CHECK_STYLE_CHANGE",[])},_getMatchingLI:function(e){e=e.toLowerCase();var t,n;for(var r=0;r<this.aLIFontNames.length;r++){t=this.aLIFontNames[r],n=this._getFontFamilyFromLI(t).toLowerCase().split(",");for(var i=0;i<n.length;i++)if(!!n[i]&&jindo.$S(n[i].replace(/['"]/ig,"")).trim().$value()==e)return t}return null},_getFontFamilyFromLI:function(e){return e.getElementsByTagName("EM").length==0?"":e.getElementsByTagName("EM")[0].style.fontFamily},_getFontNameLabelFromLI:function(e){return e.firstChild.firstChild.firstChild.nodeValue},_clearFontNameSelection:function(e){for(var t=0;t<this.aLIFontNames.length;t++)jindo.$Element(this.aLIFontNames[t]).removeClass("active")},addFont:function(e,t,n,r,i,s,o,u){if(!this.htBrowser.ie&&i)return null;if(u&&!IsInstalledFont(e))return null;e=e.toLowerCase();var a=new fontProperty(e,t,n,r,i),f,l;return n>0?(f=e+"_"+n,l=t+"_"+n):(f=e,l=t),s||(f=nhn.husky.SE2M_FontNameWithLayerUI.CUSTOM_FONT_MARKS+f+nhn.husky.SE2M_FontNameWithLayerUI.CUSTOM_FONT_MARKS),this.htAllFonts[f]?this.htAllFonts[f]:(this.htAllFonts[f]=a,this.htBrowser.ie&&this.htBrowser.nativeVersion>=9&&document.documentMode>=9&&a.loadCSSToMenu(),this.htFamilyName2DisplayName[f]=t,o=o||this.oApp.$MSG("SE2M_FontNameWithLayerUI.sSampleText"),this._addFontToMenu(l,f,o),s?s==1?this.aDefaultFontList[this.aDefaultFontList.length]=a:this.aTempSavedFontList[this.aTempSavedFontList.length]=a:this.aBaseFontList[this.aBaseFontList.length]=a,a)},addFontInUse:function(e,t,n,r,i,s){var o=this.addFont(e,t,n,r,i,s);return o?(o.loadCSS(this.oApp.getWYSIWYGDocument()),o):null},setMainFont:function(e,t,n,r,i,s){var o=this.addFontInUse(e,t,n,r,i,s);return o?(this.setDefaultFont(o.fontFamily,n),o):null},setDefaultFont:function(e,t){var n=this.oApp.getWYSIWYGDocument().body;n.style.fontFamily=e,t>0&&(n.style.fontSize=t+"pt")}}),nhn.husky.SE2M_FontNameWithLayerUI.CUSTOM_FONT_MARKS="'",nhn.ColorPicker=jindo.$Class({elem:null,huePanel:null,canvasType:"Canvas",_hsvColor:null,$init:function(e,t){this.elem=jindo.$Element(e).empty(),this.huePanel=null,this.cursor=jindo.$Element("<div>").css("overflow","hidden"),this.canvasType=jindo.$(e).filters?"Filter":jindo.$("<canvas>").getContext?"Canvas":null;if(!this.canvasType)return!1;this.option({huePanel:null,huePanelType:"horizontal"}),this.option(t),this.option("huePanel")&&(this.huePanel=jindo.$Element(this.option("huePanel")).empty()),this._hsvColor=this._hsv(0,100,100);for(var n in this)/^_on[A-Z][a-z]+[A-Z][a-z]+$/.test(n)&&(this[n+"Fn"]=jindo.$Fn(this[n],this));this._onDownColorFn.attach(this.elem,"mousedown"),this.huePanel&&this._onDownHueFn.attach(this.huePanel,"mousedown"),this.paint()},rgb:function(e){this.hsv(this._rgb2hsv(e.r,e.g,e.b))},hsv:function(e){if(typeof e=="undefined")return this._hsvColor;var t=null,n=this.elem.width(),r=this.elem.height(),i=this.cursor.width(),s=this.cursor.height(),o=0,u=0;if(this.huePanel)t=this._hsv2rgb(e.h,100,100),this.elem.css("background","#"+this._rgb2hex(t.r,t.g,t.b)),o=e.s/100*n,u=(100-e.v)/100*r;else{var a=n/2;e.v>e.s?(e.v=100,o=e.s/100*a):(e.s=100,o=(100-e.v)/100*a+a),u=e.h/360*r}o=Math.max(Math.min(o-1,n-i),1),u=Math.max(Math.min(u-1,r-s),1),this.cursor.css({left:o+"px",top:u+"px"}),this._hsvColor=e,t=this._hsv2rgb(e.h,e.s,e.v),this.fireEvent("colorchange",{type:"colorchange",element:this,currentElement:this,rgbColor:t,hexColor:"#"+this._rgb2hex(t.r,t.g,t.b),hsvColor:e})},paint:function(){this.huePanel?(this["_paintColWith"+this.canvasType](),this["_paintHueWith"+this.canvasType]()):this["_paintOneWith"+this.canvasType](),this.cursor.appendTo(this.elem),this.cursor.css({position:"absolute",top:"1px",left:"1px",background:"white",border:"1px solid black"}).width(3).height(3),this.hsv(this._hsvColor)},_paintColWithFilter:function(){jindo.$Element("<div>").css({position:"absolute",top:0,left:0,width:"100%",height:"100%",filter:"progid:DXImageTransform.Microsoft.Gradient(GradientType=1,StartColorStr='#FFFFFFFF',EndColorStr='#00FFFFFF')"}).appendTo(this.elem),jindo.$Element("<div>").css({position:"absolute",top:0,left:0,width:"100%",height:"100%",filter:"progid:DXImageTransform.Microsoft.Gradient(GradientType=0,StartColorStr='#00000000',EndColorStr='#FF000000')"}).appendTo(this.elem)},_paintColWithCanvas:function(){var e=jindo.$Element("<canvas>").css({width:"100%",height:"100%"});e.appendTo(this.elem.empty());var t=e.attr("width",e.width()).attr("height",e.height()).$value().getContext("2d"),n=null,r=e.width(),i=e.height();n=t.createLinearGradient(0,0,r,0),n.addColorStop(0,"rgba(255,255,255,1)"),n.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=n,t.fillRect(0,0,r,i),n=t.createLinearGradient(0,0,0,i),n.addColorStop(0,"rgba(0,0,0,0)"),n.addColorStop(1,"rgba(0,0,0,1)"),t.fillStyle=n,t.fillRect(0,0,r,i)},_paintOneWithFilter:function(){var e,t,n,r,i,s,o=this.elem.height();for(var u=1;u<7;u++)e=Math.floor((u-1)/6*o),t=Math.floor(u/6*o),n=this._hsv2rgb((u-1)/6*360,100,100),r=this._hsv2rgb(u/6*360,100,100),i="#FF"+this._rgb2hex(n.r,n.g,n.b),s="#FF"+this._rgb2hex(r.r,r.g,r.b),jindo.$Element("<div>").css({position:"absolute",left:0,width:"100%",top:e+"px",height:t-e+"px",filter:"progid:DXImageTransform.Microsoft.Gradient(GradientType=0,StartColorStr='"+i+"',EndColorStr='"+s+"')"}).appendTo(this.elem);jindo.$Element("<div>").css({position:"absolute",top:0,left:0,width:"50%",height:"100%",filter:"progid:DXImageTransform.Microsoft.Gradient(GradientType=1,StartColorStr='#FFFFFFFF',EndColorStr='#00FFFFFF')"}).appendTo(this.elem),jindo.$Element("<div>").css({position:"absolute",top:0,right:0,width:"50%",height:"100%",filter:"progid:DXImageTransform.Microsoft.Gradient(GradientType=1,StartColorStr='#00000000',EndColorStr='#FF000000')"}).appendTo(this.elem)},_paintOneWithCanvas:function(){var e={r:0,g:0,b:0},t=jindo.$Element("<canvas>").css({width:"100%",height:"100%"});t.appendTo(this.elem.empty());var n=t.attr("width",t.width()).attr("height",t.height()).$value().getContext("2d"),r=t.width(),i=t.height(),s=n.createLinearGradient(0,0,0,i);for(var o=0;o<7;o++)e=this._hsv2rgb(o/6*360,100,100),s.addColorStop(o/6,"rgb("+e.join(",")+")");n.fillStyle=s,n.fillRect(0,0,r,i),s=n.createLinearGradient(0,0,r,0),s.addColorStop(0,"rgba(255,255,255,1)"),s.addColorStop(.5,"rgba(255,255,255,0)"),s.addColorStop(.5,"rgba(0,0,0,0)"),s.addColorStop(1,"rgba(0,0,0,1)"),n.fillStyle=s,n.fillRect(0,0,r,i)},_paintHueWithFilter:function(){var e,t,n,r,i,s,o=this.option().huePanelType=="vertical",u=this.huePanel.width(),a=this.huePanel.height(),f=null,l=parseInt(this.huePanel.css("borderWidth"),10);!isNaN(l)||(l=0),u-=l*2;for(var c=1;c<7;c++){e=Math.floor((c-1)/6*(o?a:u)),t=Math.floor(c/6*(o?a:u)),n=this._hsv2rgb((c-1)/6*360,100,100),r=this._hsv2rgb(c/6*360,100,100),i="#FF"+this._rgb2hex(n.r,n.g,n.b),s="#FF"+this._rgb2hex(r.r,r.g,r.b),f=jindo.$Element("<div>").css({position:"absolute",filter:"progid:DXImageTransform.Microsoft.Gradient(GradientType="+(o?0:1)+",StartColorStr='"+i+"',EndColorStr='"+s+"')"});var h=t-e+1;f.appendTo(this.huePanel),f.css(o?"left":"top",0).css(o?"width":"height","100%"),f.css(o?"top":"left",e+"px").css(o?"height":"width",h+"px")}},_paintHueWithCanvas:function(){var e=this.option(),t,n=e.huePanelType=="vertical",r=jindo.$Element("<canvas>").css({width:"100%",height:"100%"});r.appendTo(this.huePanel.empty());var i=r.attr("width",r.width()).attr("height",r.height()).$value().getContext("2d"),s=i.createLinearGradient(0,0,n?0:r.width(),n?r.height():0);for(var o=0;o<7;o++)t=this._hsv2rgb(o/6*360,100,100),s.addColorStop(o/6,"rgb("+t.join(",")+")");i.fillStyle=s,i.fillRect(0,0,r.width(),r.height())},_rgb2hsv:function(e,t,n){var r=0,i=0,s=Math.max(e,t,n),o=Math.min(e,t,n),u=s-o;return i=s?u/s:0,i&&(e==s?r=60*(t-n)/u:t==s?r=120+60*(n-e)/u:n==s&&(r=240+60*(e-t)/u),r<0&&(r+=360)),r=Math.floor(r),i=Math.floor(i*100),s=Math.floor(s/255*100),this._hsv(r,i,s)},_hsv2rgb:function(e,t,n){e=e%360/60,t/=100,n/=100;var r=0,i=0,s=0,o=Math.floor(e),u=e-o,a=n*(1-t),f=n*(1-t*u),l=n*(1-t*(1-u));switch(o){case 0:r=n,i=l,s=a;break;case 1:r=f,i=n,s=a;break;case 2:r=a,i=n,s=l;break;case 3:r=a,i=f,s=n;break;case 4:r=l,i=a,s=n;break;case 5:r=n,i=a,s=f;break;case 6:}return r=Math.floor(r*255),i=Math.floor(i*255),s=Math.floor(s*255),this._rgb(r,i,s)},_rgb2hex:function(e,t,n){return e=e.toString(16),e.length==1&&(e="0"+e),t=t.toString(16),t.length==1&&(t="0"+t),n=n.toString(16),n.length==1&&(n="0"+n),e+t+n},_hex2rgb:function(e){var t=e.match(/#?([0-9a-f]{6}|[0-9a-f]{3})/i);return t[1].length==3?t=t[1].match(/./g).filter(function(e){return e+e}):t=t[1].match(/../g),{r:Number("0x"+t[0]),g:Number("0x"+t[1]),b:Number("0x"+t[2])}},_rgb:function(e,t,n){var r=[e,t,n];return r.r=e,r.g=t,r.b=n,r},_hsv:function(e,t,n){var r=[e,t,n];return r.h=e,r.s=t,r.v=n,r},_onDownColor:function(e){if(!e.mouse().left)return!1;var t=e.pos();this._colPagePos=[t.pageX,t.pageY],this._colLayerPos=[t.layerX,t.layerY],this._onUpColorFn.attach(document,"mouseup"),this._onMoveColorFn.attach(document,"mousemove"),this._onMoveColor(e)},_onUpColor:function(e){this._onUpColorFn.detach(document,"mouseup"),this._onMoveColorFn.detach(document,"mousemove")},_onMoveColor:function(e){var t=this._hsvColor,n=e.pos(),r=this._colLayerPos[0]+(n.pageX-this._colPagePos[0]),i=this._colLayerPos[1]+(n.pageY-this._colPagePos[1]),s=this.elem.width(),o=this.elem.height();r=Math.max(Math.min(r,s),0),i=Math.max(Math.min(i,o),0);if(this.huePanel)t.s=t[1]=r/s*100,t.v=t[2]=(o-i)/o*100;else{t.h=i/o*360;var u=s/2;r<u?(t.s=r/u*100,t.v=100):(t.s=100,t.v=(s-r)/u*100)}this.hsv(t),e.stop()},_onDownHue:function(e){if(!e.mouse().left)return!1;var t=e.pos();this._huePagePos=[t.pageX,t.pageY],this._hueLayerPos=[t.layerX,t.layerY],this._onUpHueFn.attach(document,"mouseup"),this._onMoveHueFn.attach(document,"mousemove"),this._onMoveHue(e)},_onUpHue:function(e){this._onUpHueFn.detach(document,"mouseup"),this._onMoveHueFn.detach(document,"mousemove")},_onMoveHue:function(e){var t=this._hsvColor,n=e.pos(),r=0,i=0,s=this._hueLayerPos[0]+(n.pageX-this._huePagePos[0]),o=this._hueLayerPos[1]+(n.pageY-this._huePagePos[1]);this.option().huePanelType=="vertical"?(r=o,i=this.huePanel.height()):(r=s,i=this.huePanel.width()),t.h=t[0]=Math.min(Math.max(r,0),i)/i*360%360,this.hsv(t),e.stop()}}).extend(jindo.Component),nhn.husky.SE2M_Accessibility=jindo.$Class({name:"SE2M_Accessibility",$init:function(e,t,n){this._assignHTMLElements(e),!t||(this.sLang=t),!n||(this.sType=n)},_assignHTMLElements:function(e){this.elHelpPopupLayer=jindo.$$.getSingle("DIV.se2_accessibility",e),this.welHelpPopupLayer=jindo.$Element(this.elHelpPopupLayer),this.oCloseButton=jindo.$$.getSingle("BUTTON.se2_close",this.elHelpPopupLayer),this.oCloseButton2=jindo.$$.getSingle("BUTTON.se2_close2",this.elHelpPopupLayer),this.nDefaultTop=150,this.elAppContainer=e},$ON_MSG_APP_READY:function(){this.htAccessOption=nhn.husky.SE2M_Configuration.SE2M_Accessibility||{},this.oApp.exec("REGISTER_HOTKEY",["alt+F10","FOCUS_TOOLBAR_AREA",[]]),this.oApp.exec("REGISTER_HOTKEY",["alt+COMMA","FOCUS_BEFORE_ELEMENT",[]]),this.oApp.exec("REGISTER_HOTKEY",["alt+PERIOD","FOCUS_NEXT_ELEMENT",[]]);if((this.sType=="basic"||this.sType=="light")&&this.sLang!="ko_KR")return;this.oApp.exec("REGISTER_HOTKEY",["alt+0","OPEN_HELP_POPUP",[]]),this.oApp.exec("REGISTER_HOTKEY",["esc","CLOSE_HELP_POPUP",[],document]),this.htAccessOption.sTitleElementId&&this.oApp.registerBrowserEvent(document.getElementById(this.htAccessOption.sTitleElementId),"keydown","MOVE_TO_EDITAREA",[])},$ON_MOVE_TO_EDITAREA:function(e){var t=9;if(e.key().keyCode==t){if(e.key().shift)return;this.oApp.delayedExec("FOCUS",[],0)}},$LOCAL_BEFORE_FIRST:function(e){jindo.$Fn(jindo.$Fn(this.oApp.exec,this.oApp).bind("CLOSE_HELP_POPUP",[this.oCloseButton]),this).attach(this.oCloseButton,"click"),jindo.$Fn(jindo.$Fn(this.oApp.exec,this.oApp).bind("CLOSE_HELP_POPUP",[this.oCloseButton2]),this).attach(this.oCloseButton2,"click");var t=this.oApp.getWYSIWYGWindow().frameElement;this.htOffsetPos=jindo.$Element(t).offset(),this.nEditorWidth=t.offsetWidth,this.htInitialPos=this.welHelpPopupLayer.offset();var n=this.oApp.oUtils.getScrollXY();this.nLayerWidth=590,this.nLayerHeight=480,this.htTopLeftCorner={x:parseInt(this.htOffsetPos.left,10),y:parseInt(this.htOffsetPos.top,10)}},$ON_FOCUS_NEXT_ELEMENT:function(){this._currentNextFocusElement=null,this.htAccessOption.sNextElementId?this._currentNextFocusElement=document.getElementById(this.htAccessOption.sNextElementId):this._currentNextFocusElement=this._findNextFocusElement(this.elAppContainer),this._currentNextFocusElement?(window.focus(),this._currentNextFocusElement.focus()):parent&&parent.nhn&&parent.nhn.husky&&parent.nhn.husky.EZCreator&&parent.nhn.husky.EZCreator.elIFrame&&(parent.focus(),(this._currentNextFocusElement=this._findNextFocusElement(parent.nhn.husky.EZCreator.elIFrame))&&this._currentNextFocusElement.focus())},_findNextFocusElement:function(e){var t=null,n=e.nextSibling;while(n){if(n.nodeType!==1){n=this._switchToSiblingOrNothing(n);if(!n)break;continue}this._recursivePreorderTraversalFilter(n,this._isFocusTag);if(this._nextFocusElement){t=this._nextFocusElement,this._bStopFindingNextElement=!1,this._nextFocusElement=null;break}n=this._switchToSiblingOrNothing(n);if(!n)break}return t},_switchToSiblingOrNothing:function(e,t){var n=e;if(t)if(n.previousSibling)n=n.previousSibling;else{while(n.nodeName.toUpperCase()!="BODY"&&!n.previousSibling)n=n.parentNode;n.nodeName.toUpperCase()=="BODY"?n=null:n=n.previousSibling}else if(n.nextSibling)n=n.nextSibling;else{while(n.nodeName.toUpperCase()!="BODY"&&!n.nextSibling)n=n.parentNode;n.nodeName.toUpperCase()=="BODY"?n=null:n=n.nextSibling}return n},_recursivePreorderTraversalFilter:function(e,t,n){var r=this,i=t.apply(e);if(i){r._bStopFindingNextElement=!0,n?r._previousFocusElement=e:r._nextFocusElement=e;return}if(n)for(var s=e.childNodes.length,o=s-1;o>=0;o--){r._recursivePreorderTraversalFilter(e.childNodes[o],t,!0);if(!!this._bStopFindingNextElement)break}else for(var o=0,s=e.childNodes.length;o<s;o++){r._recursivePreorderTraversalFilter(e.childNodes[o],t);if(!!this._bStopFindingNextElement)break}},_isFocusTag:function(){var e=this,t=["A","BUTTON","INPUT","TEXTAREA"],n=!1;for(var r=0,i=t.length;r<i;r++)if(e.nodeType===1&&e.nodeName&&e.nodeName.toUpperCase()==t[r]&&!e.disabled&&jindo.$Element(e).visible()){n=!0;break}return n},$ON_FOCUS_BEFORE_ELEMENT:function(){this._currentPreviousFocusElement=null,this.htAccessOption.sBeforeElementId?this._currentPreviousFocusElement=document.getElementById(this.htAccessOption.sBeforeElementId):this._currentPreviousFocusElement=this._findPreviousFocusElement(this.elAppContainer),this._currentPreviousFocusElement?(window.focus(),this._currentPreviousFocusElement.focus()):parent&&parent.nhn&&parent.nhn.husky&&parent.nhn.husky.EZCreator&&parent.nhn.husky.EZCreator.elIFrame&&(parent.focus(),(this._currentPreviousFocusElement=this._findPreviousFocusElement(parent.nhn.husky.EZCreator.elIFrame))&&this._currentPreviousFocusElement.focus())},_findPreviousFocusElement:function(e){var t=null,n=e.previousSibling;while(n){if(n.nodeType!==1){n=this._switchToSiblingOrNothing(n,!0);if(!n)break;continue}this._recursivePreorderTraversalFilter(n,this._isFocusTag,!0);if(this._previousFocusElement){t=this._previousFocusElement,this._bStopFindingNextElement=!1,this._previousFocusElement=null;break}n=this._switchToSiblingOrNothing(n,!0);if(!n)break}return t},$ON_FOCUS_TOOLBAR_AREA:function(){this.oButton=jindo.$$.getSingle("BUTTON.se2_font_family",this.elAppContainer),this.oButton&&!this.oButton.disabled&&(window.focus(),this.oButton.focus())},$ON_OPEN_HELP_POPUP:function(){this.oApp.exec("DISABLE_ALL_UI",[{aExceptions:["se2_accessibility"]}]),this.oApp.exec("SHOW_EDITING_AREA_COVER"),this.oApp.exec("SELECT_UI",["se2_accessibility"]),this.nCalcX=this.htTopLeftCorner.x+this.oApp.getEditingAreaWidth()-this.nLayerWidth,this.nCalcY=this.htTopLeftCorner.y-30,this.oApp.exec("SHOW_DIALOG_LAYER",[this.elHelpPopupLayer,{elHandle:this.elTitle,nMinX:this.htTopLeftCorner.x+0,nMinY:this.nDefaultTop+77,nMaxX:this.nCalcX,nMaxY:this.nCalcY}]),this.welHelpPopupLayer.offset(this.nCalcY,this.nCalcX/2),jindo.$Agent().navigator().ie&&window.focus();var e=this;setTimeout(function(){try{e.oCloseButton2.focus()}catch(t){}},200)},$ON_CLOSE_HELP_POPUP:function(){this.oApp.exec("ENABLE_ALL_UI"),this.oApp.exec("DESELECT_UI",["helpPopup"]),this.oApp.exec("HIDE_ALL_DIALOG_LAYER",[]),this.oApp.exec("HIDE_EDITING_AREA_COVER"),this.oApp.exec("FOCUS")}}),nhn.husky.SE2M_SCharacter=jindo.$Class({name:"SE2M_SCharacter",$ON_MSG_APP_READY:function(){this.oApp.exec("REGISTER_UI_EVENT",["sCharacter","click","TOGGLE_SCHARACTER_LAYER"]),this.oApp.registerLazyMessage(["TOGGLE_SCHARACTER_LAYER"],["hp_SE2M_SCharacter$Lazy.js"])}}),nhn.husky.SE2M_FindReplacePlugin=jindo.$Class({name:"SE2M_FindReplacePlugin",oEditingWindow:null,oFindReplace:null,bFindMode:!0,bLayerShown:!1,$init:function(){this.nDefaultTop=20},$ON_MSG_APP_READY:function(){this.oEditingWindow=this.oApp.getWYSIWYGWindow(),this.oApp.exec("REGISTER_HOTKEY",["ctrl+f","SHOW_FIND_LAYER",[]]),this.oApp.exec("REGISTER_HOTKEY",["ctrl+h","SHOW_REPLACE_LAYER",[]]),this.oApp.exec("REGISTER_UI_EVENT",["findAndReplace","click","TOGGLE_FIND_REPLACE_LAYER"]),this.oApp.registerLazyMessage(["TOGGLE_FIND_REPLACE_LAYER","SHOW_FIND_LAYER","SHOW_REPLACE_LAYER","SHOW_FIND_REPLACE_LAYER"],["hp_SE2M_FindReplacePlugin$Lazy.js","N_FindReplace.js"])},$ON_SHOW_ACTIVE_LAYER:function(){this.oApp.exec("HIDE_DIALOG_LAYER",[this.elDropdownLayer])}}),nhn.husky.SE2M_Quote=jindo.$Class({name:"SE2M_Quote",htQuoteStyles_view:null,$init:function(){var e=nhn.husky.SE2M_Configuration.Quote||{},t=e.sImageBaseURL;this.nMaxLevel=e.nMaxLevel||14,this.htQuoteStyles_view={},this.htQuoteStyles_view.se2_quote1="_zoom:1;padding:0 8px; margin:0 0 30px 20px; margin-right:15px; border-left:2px solid #cccccc;color:#888888;",this.htQuoteStyles_view.se2_quote2="_zoom:1;margin:0 0 30px 13px;padding:0 8px 0 16px;background:url("+t+"/bg_quote2.gif) 0 3px no-repeat;color:#888888;",this.htQuoteStyles_view.se2_quote3="_zoom:1;margin:0 0 30px 0;padding:10px;border:1px dashed #cccccc;color:#888888;",this.htQuoteStyles_view.se2_quote4="_zoom:1;margin:0 0 30px 0;padding:10px;border:1px dashed #66b246;color:#888888;",this.htQuoteStyles_view.se2_quote5="_zoom:1;margin:0 0 30px 0;padding:10px;border:1px dashed #cccccc;background:url("+t+"/bg_b1.png) repeat;_background:none;_filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"/bg_b1.png',sizingMethod='scale');color:#888888;",this.htQuoteStyles_view.se2_quote6="_zoom:1;margin:0 0 30px 0;padding:10px;border:1px solid #e5e5e5;color:#888888;",this.htQuoteStyles_view.se2_quote7="_zoom:1;margin:0 0 30px 0;padding:10px;border:1px solid #66b246;color:#888888;",this.htQuoteStyles_view.se2_quote8="_zoom:1;margin:0 0 30px 0;padding:10px;border:1px solid #e5e5e5;background:url("+t+"/bg_b1.png) repeat;_background:none;_filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"/bg_b1.png',sizingMethod='scale');color:#888888;",this.htQuoteStyles_view.se2_quote9="_zoom:1;margin:0 0 30px 0;padding:10px;border:2px solid #e5e5e5;color:#888888;",this.htQuoteStyles_view.se2_quote10="_zoom:1;margin:0 0 30px 0;padding:10px;border:2px solid #e5e5e5;background:url("+t+"/bg_b1.png) repeat;_background:none;_filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"/bg_b1.png',sizingMethod='scale');color:#888888;"},_assignHTMLElements:function(){this.elDropdownLayer=jindo.$$.getSingle("DIV.husky_seditor_blockquote_layer",this.oApp.htOptions.elAppContainer),this.aLI=jindo.$$("LI",this.elDropdownLayer)},$ON_REGISTER_CONVERTERS:function(){this.oApp.exec("ADD_CONVERTER",["DB_TO_IR",jindo.$Fn(function(e){return e=e.replace(/<(blockquote)[^>]*class=['"]?(se2_quote[0-9]+)['"]?[^>]*>/gi,"<$1 class=$2>"),e},this).bind()]),this.oApp.exec("ADD_CONVERTER",["IR_TO_DB",jindo.$Fn(function(e){var t=this.htQuoteStyles_view;return e=e.replace(/<(blockquote)[^>]*class=['"]?(se2_quote[0-9]+)['"]?[^>]*>/gi,function(e,n,r){return"<"+n+" class="+r+' style="'+t[r]+'">'}),e},this).bind()]),this.htSE1toSE2Map={"01":"1","02":"2","03":"6","04":"8","05":"9","07":"3","08":"5"}},$LOCAL_BEFORE_FIRST:function(){this._assignHTMLElements(),this.oApp.registerBrowserEvent(this.elDropdownLayer,"click","EVENT_SE2_BLOCKQUOTE_LAYER_CLICK",[]),this.oApp.delayedExec("SE2_ATTACH_HOVER_EVENTS",[this.aLI],0)},$ON_MSG_APP_READY:function(){this.oApp.exec("REGISTER_UI_EVENT",["quote","click","TOGGLE_BLOCKQUOTE_LAYER"]),this.oApp.registerLazyMessage(["TOGGLE_BLOCKQUOTE_LAYER"],["hp_SE2M_Quote$Lazy.js"])},$ON_EVENT_EDITING_AREA_KEYDOWN:function(e){var t,n;if("WYSIWYG"!==this.oApp.getEditingMode())return;if(8!==e.key().keyCode)return;t=this.oApp.getSelection(),t.fixCommonAncestorContainer(),n=this._findParentQuote(t.commonAncestorContainer);if(!n)return;this._isBlankQuote(n)&&(e.stop(jindo.$Event.CANCEL_DEFAULT),t.selectNode(n),t.collapseToStart(),jindo.$Element(n).leave(),t.select())},$ON_EVENT_EDITING_AREA_KEYUP:function(e){var t,n,r;if("WYSIWYG"!==this.oApp.getEditingMode())return;if(46!==e.key().keyCode)return;t=this.oApp.getSelection(),t.fixCommonAncestorContainer(),n=this._findParentQuote(t.commonAncestorContainer);if(!n)return!1;n.nextSibling||(e.stop(jindo.$Event.CANCEL_DEFAULT),r=t._document.createElement("P"),r.innerHTML="&nbsp;",jindo.$Element(n).after(r),setTimeout(jindo.$Fn(function(e){var t=e.placeStringBookmark();e.select(),e.removeStringBookmark(t)},this).bind(t),0))},_isBlankQuote:function(e){var t,n,r,i,s=this.oApp.oNavigator.chrome,o=this.oApp.oNavigator.safari,u=function(e){return e=e.replace(/[\r\n]/ig,"").replace(unescape("%uFEFF"),""),e===""?!0:e==="&nbsp;"||e===" "?!0:!1},a=function(e){return e.nodeType===3&&u(e.nodeValue)?!0:e.tagName!=="P"&&e.tagName!=="SPAN"||!u(e.innerHTML)&&e.innerHTML!=="<br>"?!1:!0},f=function(e){return jindo.$$("tr",e).length===0?!0:!1};if(u(e.innerHTML)||e.innerHTML==="<br>")return!0;if(s||o){var l=jindo.$$("TABLE",e),c=l.length,h;for(r=0;r<c;r++)h=l[r],f(h)&&jindo.$Element(h).leave()}n=e.childNodes;for(r=0,i=n.length;r<i;r++){t=n[r];if(!a(t))return!1}return!0},_findParentQuote:function(e){return this._findAncestor(jindo.$Fn(function(e){if(!e)return!1;if(e.tagName!=="BLOCKQUOTE")return!1;if(!e.className)return!1;var t=e.className;return this.htQuoteStyles_view[t]?!0:!1},this).bind(),e)},_findAncestor:function(e,t){while(t&&!e(t))t=t.parentNode;return t}}),nhn.husky.SE2M_TableCreator=jindo.$Class({name:"SE2M_TableCreator",_sSETblClass:"__se_tbl",nRows:3,nColumns:4,nBorderSize:1,sBorderColor:"#000000",sBGColor:"#000000",nBorderStyleIdx:3,nTableStyleIdx:1,nMinRows:1,nMaxRows:20,nMinColumns:1,nMaxColumns:20,nMinBorderWidth:1,nMaxBorderWidth:10,rxLastDigits:null,sReEditGuideMsg_table:null,oSelection:null,$ON_MSG_APP_READY:function(){this.sReEditGuideMsg_table=this.oApp.$MSG("SE2M_ReEditAction.reEditGuideMsg.table"),this.oApp.exec("REGISTER_UI_EVENT",["table","click","TOGGLE_TABLE_LAYER"]),this.oApp.registerLazyMessage(["TOGGLE_TABLE_LAYER"],["hp_SE2M_TableCreator$Lazy.js"])},$ON_REGISTER_CONVERTERS:function(){this.oApp.exec("ADD_CONVERTER_DOM",["IR_TO_DB",jindo.$Fn(this.irToDbDOM,this).bind()]),this.oApp.exec("ADD_CONVERTER_DOM",["DB_TO_IR",jindo.$Fn(this.dbToIrDOM,this).bind()])},irToDbDOM:function(e){var t=[],n=jindo.$$("table[class=__se_tbl]",e,{oneTimeOffCache:!0});jindo.$A(n).forEach(function(e,n,r){jindo.$Element(e).attr("attr_no_border_tbl")&&t.push(e)},this);if(t.length<1)return;var r=[],i;for(var s=0,o=t.length;s<o;s++)i=t[s],jindo.$Element(i).css({border:"",borderLeft:"",borderBottom:""}),jindo.$Element(i).attr({border:0,cellpadding:1}),r=jindo.$$("tbody>tr>td",i),jindo.$A(r).forEach(function(e,t,n){jindo.$Element(e).css({border:"",borderTop:"",borderRight:""})})},dbToIrDOM:function(e){var t=[],n=jindo.$$("table[class=__se_tbl]",e,{oneTimeOffCache:!0});jindo.$A(n).forEach(function(e,n,r){jindo.$Element(e).attr("attr_no_border_tbl")&&t.push(e)},this);if(t.length<1)return;var r=[],i;for(var s=0,o=t.length;s<o;s++)i=t[s],jindo.$Element(i).css({border:"1px dashed #c7c7c7",borderLeft:0,borderBottom:0}),jindo.$Element(i).attr({border:1,cellpadding:0}),r=jindo.$$("tbody>tr>td",i),jindo.$A(r).forEach(function(e,t,n){jindo.$Element(e).css({border:"1px dashed #c7c7c7",borderTop:0,borderRight:0})})}}),nhn.husky.SE2M_TableBlockStyler=jindo.$Class({name:"SE2M_TableBlockStyler",nSelectedTD:0,htSelectedTD:{},aTdRange:[],$init:function(){},$LOCAL_BEFORE_ALL:function(){return this.oApp.getEditingMode()=="WYSIWYG"},$ON_MSG_APP_READY:function(){this.oDocument=this.oApp.getWYSIWYGDocument()},$ON_EVENT_EDITING_AREA_MOUSEUP:function(e){if(this.oApp.getEditingMode()!="WYSIWYG")return;this.setTdBlock()},$ON_IS_SELECTED_TD_BLOCK:function(e,t){return this.nSelectedTD>0?(t[e]=!0,t[e]):(t[e]=!1,t[e])},$ON_GET_SELECTED_TD_BLOCK:function(e,t){t[e]=this.htSelectedTD.aTdCells},setTdBlock:function(){this.oApp.exec("GET_SELECTED_CELLS",["aTdCells",this.htSelectedTD]);var e=this.htSelectedTD.aTdCells;e&&(this.nSelectedTD=e.length)},$ON_DELETE_BLOCK_CONTENTS:function(){var e=this,t,n,r;this.setTdBlock();for(var i=0;i<this.nSelectedTD;i++)jindo.$Element(this.htSelectedTD.aTdCells[i]).child(function(i){t=jindo.$Element(i._element.parentNode),t.remove(i),n=e.oDocument.createElement("P"),jindo.$Agent().navigator().firefox?r=e.oDocument.createElement("BR"):r=e.oDocument.createTextNode("\u00a0"),n.appendChild(r),t.append(n)},1)}}),nhn.husky.SE2M_StyleRemover=jindo.$Class({name:"SE2M_StyleRemover",$ON_MSG_APP_READY:function(){this.oApp.exec("REGISTER_UI_EVENT",["styleRemover","click","CHOOSE_REMOVE_STYLE",[]])},$LOCAL_BEFORE_FIRST:function(){this.oHuskyRange=this.oApp.getEmptySelection(),this._document=this.oHuskyRange._document},$ON_CHOOSE_REMOVE_STYLE:function(e){var t=!1,n={};this.oApp.exec("IS_SELECTED_TD_BLOCK",["bIsSelectedTd",n]),t=n.bIsSelectedTd,this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["REMOVE STYLE",{bMustBlockElement:!0}]),t?this.oApp.exec("REMOVE_STYLE_IN_BLOCK",[]):this.oApp.exec("REMOVE_STYLE",[]),this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["REMOVE STYLE",{bMustBlockElement:!0}]),this.oApp.exec("MSG_NOTIFY_CLICKCR",["noeffect"])},$ON_REMOVE_STYLE_IN_BLOCK:function(e){var t={};this.oSelection=this.oApp.getSelection(),this.oApp.exec("GET_SELECTED_TD_BLOCK",["aTdCells",t]);var n=t.aTdCells;for(var r=0;r<n.length;r++)this.oSelection.selectNodeContents(n[r]),this.oSelection.select(),this.oApp.exec("REMOVE_STYLE",[])},$ON_REMOVE_STYLE:function(e){if(!e||!e.commonAncestorContainer)e=this.oApp.getSelection();if(e.collapsed)return;e.expandBothEnds();var t=e.placeStringBookmark(),n=e.getNodes(!0);this._removeStyle(n),e.moveToBookmark(t);var n=e.getNodes(!0);for(var r=0;r<n.length;r++){var i=n[r];i.style&&i.tagName!="BR"&&i.tagName!="TD"&&i.tagName!="TR"&&i.tagName!="TBODY"&&i.tagName!="TABLE"&&(i.removeAttribute("align"),i.removeAttribute("style"),jindo.$Element(i).css("display")=="inline"&&i.tagName!="IMG"&&i.tagName!="IFRAME"&&(!i.firstChild||e._isBlankTextNode(i.firstChild))&&i.parentNode.removeChild(i))}e.moveToBookmark(t),e.commonAncestorContainer.tagName==="TBODY"&&(e=this.oApp.getSelection()),e.select();var s=this._document.getElementById(e.HUSKY_BOOMARK_START_ID_PREFIX+t);while(s){oParent=nhn.DOMFix.parentNode(s),oParent.removeChild(s);while(oParent&&(!oParent.firstChild||!oParent.firstChild.nextSibling&&e._isBlankTextNode(oParent.firstChild))){var o=oParent.parentNode;oParent.parentNode.removeChild(oParent),oParent=o}s=this._document.getElementById(e.HUSKY_BOOMARK_START_ID_PREFIX+t)}var s=this._document.getElementById(e.HUSKY_BOOMARK_END_ID_PREFIX+t);while(s){oParent=nhn.DOMFix.parentNode(s),oParent.removeChild(s);while(oParent&&(!oParent.firstChild||!oParent.firstChild.nextSibling&&e._isBlankTextNode(oParent.firstChild))){var o=oParent.parentNode;oParent.parentNode.removeChild(oParent),oParent=o}s=this._document.getElementById(e.HUSKY_BOOMARK_END_ID_PREFIX+t)}this.oApp.exec("CHECK_STYLE_CHANGE")},$ON_REMOVE_STYLE2:function(e){this._removeStyle(e)},$ON_REMOVE_STYLE_AND_PASTE_HTML:function(e,t){var n,r,i,s,o;n=jindo.$Agent().navigator();if(!e)return!1;this.oApp.getEditingMode
()!="WYSIWYG"&&this.oApp.exec("CHANGE_EDITING_MODE",["WYSIWYG"]),t||this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["REMOVE STYLE AND PASTE HTML"]),o=this.oApp.getSelection(),o.deleteContents(),r=this.oApp.getWYSIWYGDocument().createElement("DIV"),o.insertNode(r),!n.webkit||(r.innerHTML="&nbsp;"),o.selectNode(r),this.oApp.exec("REMOVE_STYLE",[o]),n.ie?e+="<p>&nbsp;</p>":n.firefox&&(e+="<p>\ufeff<br></p>"),o.selectNode(r),o.pasteHTML(e),s=o.getNodes()||[];for(var u=0;u<s.length;u++)if(!!s[u].tagName&&s[u].tagName.toLowerCase()=="td"){i=s[u],o.selectNodeContents(i.firstChild||i),o.collapseToStart(),o.select();break}o.collapseToEnd(),o.select(),this.oApp.exec("FOCUS"),r||r.parentNode.removeChild(r),t||this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["REMOVE STYLE AND PASTE HTML"])},_removeStyle:function(e){var t=jindo.$A(e);for(var n=0;n<e.length;n++){var r=e[n];if(!r||!r.parentNode||!r.parentNode.tagName)continue;var i=!1;if(jindo.$Element(r.parentNode).css("display")!="inline")continue;var s=r.parentNode;if(r.firstChild){if(t.indexOf(this.oHuskyRange._getVeryLastRealChild(r))==-1)continue;if(t.indexOf(this.oHuskyRange._getVeryFirstRealChild(r))==-1)continue}if(!r.nextSibling){n--;var o=r;while(o){var u=o.previousSibling;s.parentNode.insertBefore(o,s.nextSibling);if(!u)break;if(t.indexOf(this._getVeryFirst(u))==-1)break;o=u}s.childNodes.length===0&&s.parentNode.removeChild(s);continue}if(t.indexOf(this._getVeryLast(r.nextSibling))!=-1)continue;n--;if(t.indexOf(this._getVeryFirst(r.parentNode))!=-1){var o=r,a=s;while(o){var u=o.previousSibling;s.parentNode.insertBefore(o,a),a=o;if(!u)break;o=u}s.childNodes.length===0&&s.parentNode.removeChild(s)}else{if(i){n++;continue}var f=this._document.createElement("SPAN"),o=r;s.insertBefore(f,o.nextSibling);while(o){var u=o.previousSibling;f.insertBefore(o,f.firstChild);if(!u)break;if(t.indexOf(this._getVeryFirst(u))==-1)break;o=u}this._splitAndAppendAtTop(f);while(f.firstChild)f.parentNode.insertBefore(f.firstChild,f);f.parentNode.removeChild(f)}}},_splitAndAppendAtTop:function(e){var t=e,n=t,r=n;while(jindo.$Element(n.parentNode).css("display")=="inline"){var i=n.parentNode.cloneNode(!1);while(n.nextSibling)i.appendChild(n.nextSibling);n=n.parentNode,i.insertBefore(r,i.firstChild),r=i}oTop=n.parentNode,oTop.insertBefore(t,n.nextSibling),oTop.insertBefore(r,t.nextSibling)},_getVeryFirst:function(e){return e?e.firstChild?this.oHuskyRange._getVeryFirstRealChild(e):e:null},_getVeryLast:function(e){return e?e.lastChild?this.oHuskyRange._getVeryLastRealChild(e):e:null}}),nhn.husky.SE2M_TableEditor=jindo.$Class({name:"SE2M_TableEditor",_sSETblClass:"__se_tbl",_sSEReviewTblClass:"__se_tbl_review",STATUS:{S_0:1,MOUSEDOWN_CELL:2,CELL_SELECTING:3,CELL_SELECTED:4,MOUSEOVER_BORDER:5,MOUSEDOWN_BORDER:6},CELL_SELECTION_CLASS:"se2_te_selection",MIN_CELL_WIDTH:5,MIN_CELL_HEIGHT:5,TMP_BGC_ATTR:"_se2_tmp_te_bgc",TMP_BGIMG_ATTR:"_se2_tmp_te_bg_img",ATTR_TBL_TEMPLATE:"_se2_tbl_template",nStatus:1,nMouseEventsStatus:0,aSelectedCells:[],$ON_REGISTER_CONVERTERS:function(){this.oApp.exec("ADD_CONVERTER_DOM",["WYSIWYG_TO_IR",jindo.$Fn(function(e){if(this.aSelectedCells.length<1)return;var t,n=["TD","TH"];for(var r=0;r<n.length;r++){t=e.getElementsByTagName(n[r]);for(var i=0,s=t.length;i<s;i++)t[i].className&&(t[i].className=t[i].className.replace(this.CELL_SELECTION_CLASS,""),t[i].getAttribute(this.TMP_BGC_ATTR)?(t[i].style.backgroundColor=t[i].getAttribute(this.TMP_BGC_ATTR),t[i].removeAttribute(this.TMP_BGC_ATTR)):t[i].getAttribute(this.TMP_BGIMG_ATTR)&&(jindo.$Element(this.aCells[i]).css("backgroundImage",t[i].getAttribute(this.TMP_BGIMG_ATTR)),t[i].removeAttribute(this.TMP_BGIMG_ATTR)))}},this).bind()])},$ON_MSG_APP_READY:function(){this.oApp.registerLazyMessage(["EVENT_EDITING_AREA_MOUSEMOVE","STYLE_TABLE"],["hp_SE2M_TableEditor$Lazy.js","SE2M_TableTemplate.js"])}}),nhn.husky.SE2M_QuickEditor_Common=jindo.$Class({name:"SE2M_QuickEditor_Common",_environmentData:"",_currentType:"",_in_event:!1,_bUseConfig:!1,_sBaseAjaxUrl:"",_sAddTextAjaxUrl:"",$init:function(){this.waHotkeys=new jindo.$A([]),this.waHotkeyLayers=new jindo.$A([])},$ON_MSG_APP_READY:function(){var e=nhn.husky.SE2M_Configuration.QuickEditor;e&&(this._bUseConfig=!e.common||typeof e.common.bUseConfig=="undefined"?!0:e.common.bUseConfig),this._bUseConfig?(this._sBaseAjaxUrl=e.common.sBaseAjaxUrl,this._sAddTextAjaxUrl=e.common.sAddTextAjaxUrl,this.getData()):this.setData("{table:'full',img:'full',review:'full'}"),this.oApp.registerLazyMessage(["OPEN_QE_LAYER"],["hp_SE2M_QuickEditor_Common$Lazy.js"])},$ON_EVENT_EDITING_AREA_KEYDOWN:function(e){var t=e.key();if(t.keyCode==8||t.keyCode==46){var n=jindo.$Agent().navigator();if(n.ie&&n.nativeVersion>8){var r=jindo.$$.getSingle("DIV.husky_seditor_editing_area_container").childNodes[0];r.tagName=="DIV"&&r.style.zIndex==1e3&&r.parentNode.removeChild(r)}this.oApp.exec("CLOSE_QE_LAYER",[e])}},getData:function(){var e=this;jindo.$Ajax(e._sBaseAjaxUrl,{type:"jsonp",timeout:1,onload:function(t){var n=t.json().result;!n||!n.text_data?e.setData("{table:'full',img:'full',review:'full'}"):e.setData(n.text_data)},onerror:function(){e.setData("{table:'full',img:'full',review:'full'}")},ontimeout:function(){e.setData("{table:'full',img:'full',review:'full'}")}}).request({text_key:"qeditor_fold"})},setData:function(sResult){var oResult={table:"full",img:"full",review:"full"};sResult&&(oResult=eval("("+sResult+")")),this._environmentData={table:{isOpen:!1,type:oResult.table,isFixed:!1,position:[]},img:{isOpen:!1,type:oResult.img,isFixed:!1},review:{isOpen:!1,type:oResult.review,isFixed:!1,position:[]}},this.waTableTagNames=jindo.$A(["table","tbody","td","tfoot","th","thead","tr"])},$ON_REGISTER_HOTKEY:function(e,t,n){e!="tab"&&e!="shift+tab"&&this.waHotkeys.push([e,t,n])}}),Shortcut.Store={anthorKeyHash:{},datas:{},currentId:"",currentKey:"",searchId:function(e,t){return jindo.$H(this.datas).forEach(function(n,r){t==n.element&&(e=r,jindo.$H.Break())}),e},set:function(e,t,n){this.currentId=e,this.currentKey=t;var r=this.get(e);this.datas[e]=r?r.createKey(t):new Shortcut.Data(e,t,n)},get:function(e,t){return t?this.datas[e].keys[t]:this.datas[e]},reset:function(e){var t=this.datas[e];Shortcut.Helper.bind(t.func,t.element,"detach"),delete this.datas[e]},allReset:function(){jindo.$H(this.datas).forEach(jindo.$Fn(function(e,t){this.reset(t)},this).bind())}},Shortcut.Data=jindo.$Class({$init:function(e,t,n){this.id=e,this.element=n,this.func=jindo.$Fn(this.fire,this).bind(),Shortcut.Helper.bind(this.func,n,"attach"),this.keys={},this.keyStemp={},this.createKey(t)},createKey:function(e){this.keyStemp[Shortcut.Helper.keyInterpretor(e)]=e,this.keys[e]={};var t=this.keys[e];return t.key=e,t.events=[],t.commonExceptions=[],t.stopDefalutBehavior=!0,this},getKeyStamp:function(e){var t=e.keyCode||e.charCode,n="";return n+=e.altKey?"1":"0",n+=e.ctrlKey?"1":"0",n+=e.metaKey?"1":"0",n+=e.shiftKey?"1":"0",n+=t,n},fire:function(e){e=e||window.eEvent;var t=this.keyStemp[this.getKeyStamp(e)];t&&this.excute(new jindo.$Event(e),t)},excute:function(e,t){var n=!0,r=Shortcut.Helper,i=this.keys[t];r.notCommonException(e,i.commonExceptions)&&jindo.$A(i.events).forEach(function(t){if(i.stopDefalutBehavior){var r=t.exceptions.length;if(r){for(var s=0;s<r;s++)if(!t.exception[s](e)){n=!1;break}if(n){t.event(e);if(jindo.$Agent().navigator().ie){var o=e._event;o.keyCode="",o.charCode=""}e.stop()}else jindo.$A.Break()}else{t.event(e);if(jindo.$Agent().navigator().ie){var o=e._event;o.keyCode="",o.charCode=""}e.stop()}}})},addEvent:function(e,t){var n=this.keys[t].events;Shortcut.Helper.hasEvent(e,n)||n.push({event:e,exceptions:[]})},addException:function(e,t){var n=this.keys[t].commonExceptions;Shortcut.Helper.hasException(e,n)||n.push(e)},removeException:function(e,t){var n=this.keys[t].commonExceptions;n=jindo.$A(n).filter(function(t){return t!=e}).$value()},removeEvent:function(e,t){var n=this.keys[t].events;n=jindo.$A(n).filter(function(t){return t!=e}).$value(),this.unRegister(t)},unRegister:function(e){var t=this.keys[e].events;t.length&&delete this.keys[e];var n=!0;for(var r in this.keys){n=!1;break}n&&(Shortcut.Helper.bind(this.func,this.element,"detach"),delete Shortcut.Store.datas[this.id])},startDefalutBehavior:function(e){this._setDefalutBehavior(e,!1)},stopDefalutBehavior:function(e){this._setDefalutBehavior(e,!0)},_setDefalutBehavior:function(e,t){this.keys[e].stopDefalutBehavior=t}}),Shortcut.Helper={keyInterpretor:function(e){var t=e.split("+"),n=jindo.$A(t),r="";r+=n.has("alt")?"1":"0",r+=n.has("ctrl")?"1":"0",r+=n.has("meta")?"1":"0",r+=n.has("shift")?"1":"0";var n=n.filter(function(e){return e!="alt"&&e!="ctrl"&&e!="meta"&&e!="shift"}),i=n.$value()[0];if(i){var e=Shortcut.Store.anthorKeyHash[i.toUpperCase()]||i.toUpperCase().charCodeAt(0);r+=e}return r},notCommonException:function(e,t){var n=t.length;for(var r=0;r<n;r++)if(!t[r](e))return!1;return!0},hasEvent:function(e,t){var n=t.length;for(var r=0;r<n;++r)if(t.event==e)return!0;return!1},hasException:function(e,t){var n=t.length;for(var r=0;r<n;++r)if(t[r]==e)return!0;return!1},bind:function(e,t,n){n=="attach"?domAttach(t,"keydown",e):domDetach(t,"keydown",e)}},function(){document.addEventListener?window.domAttach=function(e,t,n){e.addEventListener(t,n,!1)}:window.domAttach=function(e,t,n){e.attachEvent("on"+t,n)}}(),function(){document.removeEventListener?window.domDetach=function(e,t,n){e.removeEventListener(t,n,!1)}:window.domDetach=function(e,t,n){e.detachEvent("on"+t,n)}}(),Shortcut.Action={init:function(e,t){return this.dataInstance=e,this.rawKey=t,this},addEvent:function(e){return this.dataInstance.addEvent(e,this.rawKey),this},removeEvent:function(e){return this.dataInstance.removeEvent(e,this.rawKey),this},addException:function(e){return this.dataInstance.addException(e,this.rawKey),this},removeException:function(e){return this.dataInstance.removeException(e,this.rawKey),this},startDefalutBehavior:function(){return this.dataInstance.startDefalutBehavior(this.rawKey),this},stopDefalutBehavior:function(){return this.dataInstance.stopDefalutBehavior(this.rawKey),this},resetElement:function(){return Shortcut.Store.reset(this.dataInstance.id),this},resetAll:function(){return Shortcut.Store.allReset(),this}},function(){Shortcut.Store.anthorKeyHash={BACKSPACE:8,TAB:9,ENTER:13,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:46,COMMA:188,PERIOD:190,SLASH:191};var e=Shortcut.Store.anthorKeyHash;for(var t=1;t<13;t++)Shortcut.Store.anthorKeyHash["F"+t]=t+111;var n=jindo.$Agent().navigator();n.ie||n.safari||n.chrome?(e.HYPHEN=189,e.EQUAL=187):(e.HYPHEN=109,e.EQUAL=61)}();var shortcut=Shortcut;nhn.husky.Hotkey=jindo.$Class({name:"Hotkey",$init:function(){this.oShortcut=shortcut},$ON_ADD_HOTKEY:function(e,t,n,r){n||(n=[]);var i=jindo.$Fn(this.oApp.exec,this.oApp).bind(t,n);this.oShortcut(e,r).addEvent(i)}}),nhn.husky.SE_UndoRedo=jindo.$Class({name:"SE_UndoRedo",oCurStateIdx:null,iMinimumSizeChange:1,nMaxUndoCount:20,nAfterMaxDeleteBuffer:100,sBlankContentsForFF:"<br>",sDefaultXPath:"/HTML[0]/BODY[0]",$init:function(){this.aUndoHistory=[],this.oCurStateIdx={nIdx:0,nStep:0},this.nHardLimit=this.nMaxUndoCount+this.nAfterMaxDeleteBuffer},$LOCAL_BEFORE_ALL:function(e){if(e.match(/_DO_RECORD_UNDO_HISTORY_AT$/))return!0;try{if(this.oApp.getEditingMode()!="WYSIWYG")return!1}catch(t){return!1}return!0},$BEFORE_MSG_APP_READY:function(){this._historyLength=0,this.oApp.exec("ADD_APP_PROPERTY",["getUndoHistory",jindo.$Fn(this._getUndoHistory,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getUndoStateIdx",jindo.$Fn(this._getUndoStateIdx,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["saveSnapShot",jindo.$Fn(this._saveSnapShot,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["getLastKey",jindo.$Fn(this._getLastKey,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["setLastKey",jindo.$Fn(this._setLastKey,this).bind()]),this._saveSnapShot(),this.oApp.exec("DO_RECORD_UNDO_HISTORY_AT",[this.oCurStateIdx,"","","",null,this.sDefaultXPath])},_getLastKey:function(){return this.sLastKey},_setLastKey:function(e){this.sLastKey=e},$ON_MSG_APP_READY:function(){var e=jindo.$Agent().navigator();this.bIE=e.ie,this.bFF=e.firefox,this.oApp.exec("REGISTER_UI_EVENT",["undo","click","UNDO"]),this.oApp.exec("REGISTER_UI_EVENT",["redo","click","REDO"]),this.oApp.exec("REGISTER_HOTKEY",["ctrl+z","UNDO"]),this.oApp.exec("REGISTER_HOTKEY",["ctrl+y","REDO"])},$ON_UNDO:function(){this._doRecordUndoHistory("UNDO",{nStep:0,bSkipIfEqual:!0,bMustBlockContainer:!0});if(this.oCurStateIdx.nIdx<=0)return;var e=this.aUndoHistory[this.oCurStateIdx.nIdx].oUndoCallback[this.oCurStateIdx.nStep],t=this.aUndoHistory[this.oCurStateIdx.nIdx].sParentXPath[this.oCurStateIdx.nStep];e&&this.oApp.exec(e.sMsg,e.aParams);if(this.oCurStateIdx.nStep>0)this.oCurStateIdx.nStep--;else{var n=this.aUndoHistory[this.oCurStateIdx.nIdx];this.oCurStateIdx.nIdx--,n.nTotalSteps>1?this.oCurStateIdx.nStep=0:(n=this.aUndoHistory[this.oCurStateIdx.nIdx],this.oCurStateIdx.nStep=n.nTotalSteps-1)}var r=this.aUndoHistory[this.oCurStateIdx.nIdx].sParentXPath[this.oCurStateIdx.nStep],i=!1;r!==t&&r.indexOf(t)===0&&(i=!0),this.oApp.exec("RESTORE_UNDO_HISTORY",[this.oCurStateIdx.nIdx,this.oCurStateIdx.nStep,i]),this.oApp.exec("CHECK_STYLE_CHANGE",[]),this.sLastKey=null},$ON_REDO:function(){if(this.oCurStateIdx.nIdx>=this.aUndoHistory.length)return;var e=this.aUndoHistory[this.oCurStateIdx.nIdx];if(this.oCurStateIdx.nIdx==this.aUndoHistory.length-1&&this.oCurStateIdx.nStep>=e.nTotalSteps-1)return;this.oCurStateIdx.nStep<e.nTotalSteps-1?this.oCurStateIdx.nStep++:(this.oCurStateIdx.nIdx++,e=this.aUndoHistory[this.oCurStateIdx.nIdx],this.oCurStateIdx.nStep=e.nTotalSteps-1);var t=this.aUndoHistory[this.oCurStateIdx.nIdx].oRedoCallback[this.oCurStateIdx.nStep];t&&this.oApp.exec(t.sMsg,t.aParams),this.oApp.exec("RESTORE_UNDO_HISTORY",[this.oCurStateIdx.nIdx,this.oCurStateIdx.nStep]),this.oApp.exec("CHECK_STYLE_CHANGE",[]),this.sLastKey=null},$ON_RECORD_UNDO_ACTION:function(e,t){t=t||{sSaveTarget:null,elSaveTarget:null,bMustBlockElement:!1,bMustBlockContainer:!1,bDontSaveSelection:!1},t.nStep=0,t.bSkipIfEqual=!1,t.bTwoStepAction=!1,this._doRecordUndoHistory(e,t)},$ON_RECORD_UNDO_BEFORE_ACTION:function(e,t){t=t||{sSaveTarget:null,elSaveTarget:null,bMustBlockElement:!1,bMustBlockContainer:!1,bDontSaveSelection:!1},t.nStep=0,t.bSkipIfEqual=!1,t.bTwoStepAction=!0,this._doRecordUndoHistory(e,t)},$ON_RECORD_UNDO_AFTER_ACTION:function(e,t){t=t||{sSaveTarget:null,elSaveTarget:null,bMustBlockElement:!1,bMustBlockContainer:!1,bDontSaveSelection:!1},t.nStep=1,t.bSkipIfEqual=!1,t.bTwoStepAction=!0,this._doRecordUndoHistory(e,t)},$ON_RESTORE_UNDO_HISTORY:function(e,t,n){this.oApp.exec("HIDE_ACTIVE_LAYER"),this.oCurStateIdx.nIdx=e,this.oCurStateIdx.nStep=t;var r=this.aUndoHistory[this.oCurStateIdx.nIdx],i=r.sContent[this.oCurStateIdx.nStep],s=r.sFullContents[this.oCurStateIdx.nStep],o=r.oBookmark[this.oCurStateIdx.nStep],u=r.sParentXPath[this.oCurStateIdx.nStep],a=null,f="",l=this.oApp.getEmptySelection();this.oApp.exec("RESTORE_IE_SELECTION");if(n)this.oApp.getWYSIWYGDocument().body.innerHTML=s,s=this.oApp.getWYSIWYGDocument().body.innerHTML,f=s,u=this.sDefaultXPath;else{a=l._evaluateXPath(u,l._document);try{a.innerHTML=i,f=a.innerHTML}catch(c){this.oApp.getWYSIWYGDocument().body.innerHTML=s,s=this.oApp.getWYSIWYGDocument().body.innerHTML,f=s,u=this.sDefaultXPath}}this.bFF&&f==this.sBlankContentsForFF&&(f=""),r.sFullContents[this.oCurStateIdx.nStep]=s,r.sContent[this.oCurStateIdx.nStep]=f,r.sParentXPath[this.oCurStateIdx.nStep]=u,o&&o.sType=="scroll"?setTimeout(jindo.$Fn(function(){this.oApp.getWYSIWYGDocument().documentElement.scrollTop=o.nScrollTop},this).bind(),0):(l=this.oApp.getEmptySelection(),l.selectionLoaded&&(o?l.moveToXPathBookmark(o):l=this.oApp.getEmptySelection(),l.select()))},_doRecordUndoHistory:function(e,t){t=t||{};var n=t.nStep||0,r=t.bSkipIfEqual||!1,i=t.bTwoStepAction||!1,s=t.sSaveTarget||null,o=t.elSaveTarget||null,u=t.bDontSaveSelection||!1,a=t.bMustBlockElement||!1,f=t.bMustBlockContainer||!1,l=t.oUndoCallback,c=t.oRedoCallback;this._historyLength=this.aUndoHistory.length,this.oCurStateIdx.nIdx!==this._historyLength-1&&(r=!0);var h=this.aUndoHistory[this.oCurStateIdx.nIdx],p=h.sFullContents[this.oCurStateIdx.nStep],d="",v="",m="",g=null,y=null,b={nIdx:this.oCurStateIdx.nIdx,nStep:this.oCurStateIdx.nStep};y=this.oApp.getSelection(),y.selectionLoaded&&(g=y.getXPathBookmark()),o?m=y._getXPath(o):s?m=this._getTargetXPath(g,s):m=this._getParentXPath(g,a,f),v=this.oApp.getWYSIWYGDocument().body.innerHTML,m===this.sDefaultXPath?d=v:d=y._evaluateXPath(m,y._document).innerHTML,this.bFF&&d==this.sBlankContentsForFF&&(d="");if(!i&&r){if(p.length===v.length)return;var w=document.createElement("div"),E=document.createElement("div");w.innerHTML=v,E.innerHTML=p;var S=document.createDocumentFragment();S.appendChild(w),S.appendChild(E),v=w.innerHTML,p=E.innerHTML,w=null,E=null,S=null;if(p.length===v.length)return}u&&(g={sType:"scroll",nScrollTop:this.oApp.getWYSIWYGDocument().documentElement.scrollTop}),b.nStep=n,b.nStep===0&&this.oCurStateIdx.nStep===h.nTotalSteps-1&&(b.nIdx=this.oCurStateIdx.nIdx+1),this._doRecordUndoHistoryAt(b,e,d,v,g,m,l,c)},$ON_DO_RECORD_UNDO_HISTORY_AT:function(e,t,n,r,i,s){this._doRecordUndoHistoryAt(e,t,n,r,i,s)},_doRecordUndoHistoryAt:function(e,t,n,r,i,s,o,u){if(e.nStep!==0)this.aUndoHistory[e.nIdx].nTotalSteps=e.nStep+1,this.aUndoHistory[e.nIdx].sContent[e.nStep]=n,this.aUndoHistory[e.nIdx].sFullContents[e.nStep]=r,this.aUndoHistory[e.nIdx].oBookmark[e.nStep]=i,this.aUndoHistory[e.nIdx].sParentXPath[e.nStep]=s,this.aUndoHistory[e.nIdx].oUndoCallback[e.nStep]=o,this.aUndoHistory[e.nIdx].oRedoCallback[e.nStep]=u;else{var a={sAction:t,nTotalSteps:1};a.sContent=[],a.sContent[0]=n,a.sFullContents=[],a.sFullContents[0]=r,a.oBookmark=[],a.oBookmark[0]=i,a.sParentXPath=[],a.sParentXPath[0]=s,a.oUndoCallback=[],a.oUndoCallback[0]=o,a.oRedoCallback=[],a.oRedoCallback[0]=u,this.aUndoHistory.splice(e.nIdx,this._historyLength-e.nIdx,a),this._historyLength=this.aUndoHistory.length}this._historyLength>this.nHardLimit&&(this.aUndoHistory.splice(0,this.nAfterMaxDeleteBuffer),e.nIdx-=this.nAfterMaxDeleteBuffer),this.oCurStateIdx.nIdx=e.nIdx,this.oCurStateIdx.nStep=e.nStep},_saveSnapShot:function(){this.oSnapShot={oBookmark:this.oApp.getSelection().getXPathBookmark()}},_getTargetXPath:function(e,t){var n=this.sDefaultXPath,r=e[0].sXPath.split("/"),i=e[1].sXPath.split("/"),s=[],o=r.length<i.length?r.length:i.length,u=0,a=-1;if(t==="BODY")return n;for(u=0;u<o;u++){if(r[u]!==i[u])break;s.push(r[u]);if(r[u]===""||r[u]==="HTML"||r[u]==="BODY")continue;r[u].indexOf(t)>-1&&(a=u)}return a>-1&&(s.length=a),n=s.join("/"),n.length<this.sDefaultXPath.length&&(n=this.sDefaultXPath),n},_getParentXPath:function(e,t,n){var r=this.sDefaultXPath,i,s,o,u,a,f,l=["","HTML[0]","BODY[0]"],c=0,h=-1,p,d;if(!e)return r;if(e[0].sXPath===r||e[1].sXPath===r)return r;i=e[0].sXPath.split("/"),s=e[1].sXPath.split("/"),o=this.oSnapShot.oBookmark[0].sXPath.split("/"),u=this.oSnapShot.oBookmark[1].sXPath.split("/"),a=o.length<u.length?o.length:u.length,f=i.length<s.length?i.length:s.length,f=f<a?f:a;if(f<3)return r;t=t||!1,n=n||!1;for(c=3;c<f;c++){p=i[c];if(p!==s[c]||p!==o[c]||p!==u[c]||s[c]!==o[c]||s[c]!==u[c]||o[c]!==u[c])break;l.push(p),d=p.substring(0,p.indexOf("["));if(!t||d!=="P"&&d!=="LI"&&d!=="DIV"){if(d==="UL"||d==="OL"||d==="TD"||d==="TR"||d==="TABLE"||d==="BLOCKQUOTE")h=c}else h=c}if(h>-1)l.length=h+1;else if(t||n)return r;return l.join("/")},_getUndoHistory:function(){return this.aUndoHistory},_getUndoStateIdx:function(){return this.oCurStateIdx}}),nhn.husky.Utils=jindo.$Class({name:"Utils",$init:function(){var e=jindo.$Agent(),t=e.navigator();if(t.ie&&t.version==6)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(n){}},$BEFORE_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["htBrowser",jindo.$Agent().navigator()])},$ON_ATTACH_HOVER_EVENTS:function(e,t){t=t||[];var n=t.sHoverClass||"hover",r=t.fnElmToSrc||function(e){return e},i=t.fnElmToTarget||function(e){return e};if(!e)return;var s=jindo.$Fn(function(e){jindo.$Element(i(e.currentElement)).addClass(n)},this),o=jindo.$Fn(function(e){jindo.$Element(i(e.currentElement)).removeClass(n)},this);for(var u=0,a=e.length;u<a;u++){var f=r(e[u]);s.attach(f,"mouseover"),o.attach(f,"mouseout"),s.attach(f,"focus"),o.attach(f,"blur")}}}),nhn.husky.DialogLayerManager=jindo.$Class({name:"DialogLayerManager",aMadeDraggable:null,aOpenedLayers:null,$init:function(){this.aMadeDraggable=[],this.aDraggableLayer=[],this.aOpenedLayers=[]},$BEFORE_MSG_APP_READY:function(){this.oNavigator=jindo.$Agent().navigator()},$ON_MSG_APP_READY:function(){this.oApp.registerLazyMessage(["SHOW_DIALOG_LAYER","TOGGLE_DIALOG_LAYER"],["hp_DialogLayerManager$Lazy.js","N_DraggableLayer.js"])}}),nhn.husky.ActiveLayerManager=jindo.$Class({name:"ActiveLayerManager",oCurrentLayer:null,$BEFORE_MSG_APP_READY:function(){this.oNavigator=jindo.$Agent().navigator()},$ON_TOGGLE_ACTIVE_LAYER:function(e,t,n,r,i){e==this.oCurrentLayer?this.oApp.exec("HIDE_ACTIVE_LAYER",[]):(this.oApp.exec("SHOW_ACTIVE_LAYER",[e,r,i]),t&&this.oApp.exec(t,n))},$ON_SHOW_ACTIVE_LAYER:function(e,t,n){e=jindo.$(e);var r=this.oCurrentLayer;if(e==r)return;this.oApp.exec("HIDE_ACTIVE_LAYER",[]),this.sOnCloseCmd=t,this.aOnCloseParam=n,e.style.display="block",this.oCurrentLayer=e,this.oApp.exec("ADD_APP_PROPERTY",["oToolBarLayer",this.oCurrentLayer])},$ON_HIDE_ACTIVE_LAYER:function(){var e=this.oCurrentLayer;if(!e)return;e.style.display="none",this.oCurrentLayer=null,this.sOnCloseCmd&&this.oApp.exec(this.sOnCloseCmd,this.aOnCloseParam)},$ON_HIDE_ACTIVE_LAYER_IF_NOT_CHILD:function(e){var t=e;while(t){if(t==this.oCurrentLayer)return;t=t.parentNode}this.oApp.exec("HIDE_ACTIVE_LAYER")},$ON_HIDE_CURRENT_ACTIVE_LAYER:function(){this.oApp.exec("HIDE_ACTIVE_LAYER",[])}}),nhn.husky.StringConverterManager=jindo.$Class({name:"StringConverterManager",oConverters:null,$init:function(){this.oConverters={},this.oConverters_DOM={},this.oAgent=jindo.$Agent().navigator()},$BEFORE_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["applyConverter",jindo.$Fn(this.applyConverter,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["addConverter",jindo.$Fn(this.addConverter,this).bind()]),this.oApp.exec("ADD_APP_PROPERTY",["addConverter_DOM",jindo.$Fn(this.addConverter_DOM,this).bind()])},applyConverter:function(e,t,n){var r="@"+(new Date).getTime()+"@",i=new RegExp(r,"g"),s={sContents:r+t};n=n||document,this.oApp.exec("MSG_STRING_CONVERTER_STARTED",[e,s]);var o;t=s.sContents,o=this.oConverters_DOM[e];if(o){var u=n.createElement("DIV");u.innerHTML=t;for(var a=0;a<o.length;a++)o[a](u);t=u.innerHTML,!u.parentNode||u.parentNode.removeChild(u),u=null,jindo.$Agent().navigator().ie&&(r+="(\r\n)?",i=new RegExp(r,"g"))}o=this.oConverters[e];if(o)for(var a=0;a<o.length;a++){var f=o[a](t);typeof f!="undefined"&&(t=f)}return s={sContents:t},this.oApp.exec("MSG_STRING_CONVERTER_ENDED",[e,s]),s.sContents=s.sContents.replace(i,""),s.sContents},$ON_ADD_CONVERTER:function(e,t){var n=this.oApp.aCallerStack;t.sPluginName=n[n.length-2].name,this.addConverter(e,t)},$ON_ADD_CONVERTER_DOM:function(e,t){var n=this.oApp.aCallerStack;t.sPluginName=n[n.length-2].name,this.addConverter_DOM(e,t)},addConverter:function(e,t){var n=this.oConverters[e];n||(this.oConverters[e]=[]),this.oConverters[e][this.oConverters[e].length]=t},addConverter_DOM:function(e,t){var n=this.oConverters_DOM[e];n||(this.oConverters_DOM[e]=[]),this.oConverters_DOM[e][this.oConverters_DOM[e].length]=t}}),nhn.husky.MessageManager=jindo.$Class({name:"MessageManager",oMessageMap:null,sLocale:"ko_KR",$init:function(e,t){switch(t){case"ja_JP":this.oMessageMap=oMessageMap_ja_JP;break;case"en_US":this.oMessageMap=oMessageMap_en_US;break;case"zh_CN":this.oMessageMap=oMessageMap_zh_CN;break;case"vi":this.oMessageMap=oMessageMap_vi;break;default:this.oMessageMap=e}},$BEFORE_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["$MSG",jindo.$Fn(this.getMessage,this).bind()])},getMessage:function(e){return this.oMessageMap[e]?unescape(this.oMessageMap[e]):e}}),nhn.husky.LazyLoader=jindo.$Class({name:"LazyLoader",htMsgInfo:null,aLoadingInfo:null,$init:function(e){this.htMsgInfo={},this.aLoadingInfo=[],this.aToDo=e},$ON_MSG_APP_READY:function(){for(var e=0;e<this.aToDo.length;e++){var t=this.aToDo[e];this._createBeforeHandlersAndSaveURLInfo(t.oMsgs,t.sURL,t.elTarget,t.htOptions)}},$LOCAL_BEFORE_ALL:function(e,t){var n=e.replace("$BEFORE_",""),r=this.htMsgInfo[n];return r.nLoadingStatus==1?!0:r.nLoadingStatus==2?(this[e]=function(){return this._removeHandler(e),this.oApp.delayedExec(n,t,0),!1},!0):(r.bLoadingStatus=1,(new jindo.$Ajax(r.sURL,{onload:jindo.$Fn(this._onload,this).bind(n,t)})).request(),!0)},_onload:function(e,t,n){n._response.readyState==4?(this.htMsgInfo[e].elTarget.innerHTML=n.text(),this.htMsgInfo[e].nLoadingStatus=2,this._removeHandler("$BEFORE_"+e),this.oApp.exec("sMsg",t)):this.oApp.exec(this.htMsgInfo[e].sFailureCallback,[])},_removeHandler:function(e){delete this[e],this.oApp.createMessageMap(e)},_createBeforeHandlersAndSaveURLInfo:function(e,t,n,r){r=r||{};var i={sURL:t,elTarget:n,sSuccessCallback:r.sSuccessCallback,sFailureCallback:r.sFailureCallback,nLoadingStatus:0};this.aLoadingInfo[this.aLoadingInfo.legnth]=i;if(!(e instanceof Array)){var s=e;e=[];var o={};for(var u in s)if(u.match(/^\$(BEFORE|ON|AFTER)_(.+)$/)){var a=RegExp.$2;if(a=="MSG_APP_READY")continue;o[a]||(e[e.length]=RegExp.$2,o[a]=!0)}}for(var f=0;f<e.length;f++){var l="$BEFORE_"+e[f];this[l]=function(){return!1},this.oApp.createMessageMap(l),this.htMsgInfo[e[f]]=i}}}),nhn.husky.PopUpManager={},nhn.husky.PopUpManager._instance=null,nhn.husky.PopUpManager._pluginKeyCnt=0,nhn.husky.PopUpManager.getInstance=function(e){return this._instance==null&&(this._instance=new function(){this._whtPluginWin=new jindo.$H,this._whtPlugin=new jindo.$H,this.addPlugin=function(e,t){this._whtPlugin.add(e,t)},this.getPlugin=function(){return this._whtPlugin},this.getPluginWin=function(){return this._whtPluginWin},this.openWindow=function(e){var t={oApp:null,sUrl:"",sName:"popup",sLeft:null,sTop:null,nWidth:400,nHeight:400,sProperties:null,bScroll:!0};for(var n in e)t[n]=e[n];t.oApp==null&&alert("\ud31d\uc5c5 \uc694\uccad\uc2dc \uc635\uc158\uc73c\ub85c oApp(\ud5c8\uc2a4\ud0a4 reference) \uac12\uc744 \uc124\uc815\ud558\uc154\uc57c \ud569\ub2c8\ub2e4.");var r=t.sLeft||(screen.availWidth-t.nWidth)/2,i=t.sTop||(screen.availHeight-t.nHeight)/2,s=t.sProperties!=null?t.sProperties:"top="+i+",left="+r+",width="+t.nWidth+",height="+t.nHeight+",scrollbars="+(t.bScroll?"yes":"no")+",status=yes",o=window.open(t.sUrl,t.sName,s);return!o||setTimeout(function(){try{o.focus()}catch(e){}},100),this.removePluginWin(o),this._whtPluginWin.add(this.getCorrectKey(this._whtPlugin,t.oApp),o),o},this.getCorrectKey=function(e,t){var n=null;return e.forEach(function(e,r){if(e==t){n=r;return}}),n},this.removePluginWin=function(e){var t=this._whtPluginWin.search(e);t&&(this._whtPluginWin.remove(t),this.removePluginWin(e))}}),this._instance.addPlugin("plugin_"+this._pluginKeyCnt++,e),nhn.husky.PopUpManager._instance},nhn.husky.PopUpManager.setCallback=function(e,t,n){if(this._instance.getPluginWin().hasValue(e)){var r=this._instance.getCorrectKey(this._instance.getPluginWin(),e);r&&this._instance.getPlugin().$(r).exec(t,n)}},nhn.husky.PopUpManager.getFunc=function(e,t){if(this._instance.getPluginWin().hasValue(e)){var n=this._instance.getCorrectKey(this._instance.getPluginWin(),e);if(n)return this._instance.getPlugin().$(n)[t]()}},typeof window.nhn=="undefined"&&(window.nhn={}),nhn.husky||(nhn.husky={}),function(){var e=navigator.userAgent,t=jindo.$Agent(),n=t.navigator(),r=t.os(),i=e.match(/(SHW-|Chrome|Safari)/gi)||"";i.length===2&&i[0]==="SHW-"&&i[1]==="Safari"?n.bGalaxyBrowser=!0:e.indexOf("LG-V500")>-1&&e.indexOf("Version/4.0")>-1&&(n.bGPadBrowser=!0),typeof r.ios=="undefined"&&(r.ios=e.indexOf("iPad")>-1||e.indexOf("iPhone")>-1,r.ios&&(i=e.match(/(iPhone )?OS ([\d|_]+)/),i!=null&&i[2]!=undefined&&(r.version=String(i[2]).split("_").join("."))))}(),nhn.husky.SE2M_UtilPlugin=jindo.$Class({name:"SE2M_UtilPlugin",$BEFORE_MSG_APP_READY:function(){this.oApp.exec("ADD_APP_PROPERTY",["oAgent",jindo.$Agent()]),this.oApp.exec("ADD_APP_PROPERTY",["oNavigator",jindo.$Agent().navigator()]),this.oApp.exec("ADD_APP_PROPERTY",["oUtils",this])},$ON_REGISTER_HOTKEY:function(e,t,n,r){this.oApp.exec("ADD_HOTKEY",[e,t,n,r||this.oApp.getWYSIWYGDocument()])},$ON_SE2_ATTACH_HOVER_EVENTS:function(e){this.oApp.exec("ATTACH_HOVER_EVENTS",[e,{fnElmToSrc:this._elm2Src,fnElmToTarget:this._elm2Target}])},_elm2Src:function(e){return e.tagName=="LI"&&e.firstChild&&e.firstChild.tagName=="BUTTON"?e.firstChild:e},_elm2Target:function(e){return e.tagName=="BUTTON"&&e.parentNode.tagName=="LI"?e.parentNode:e},getScrollXY:function(){var e,t,n=this.oApp.getWYSIWYGWindow();return typeof n.scrollX=="undefined"?(e=n.document.documentElement.scrollLeft,t=n.document.documentElement.scrollTop):(e=n.scrollX,t=n.scrollY),{x:e,y:t}}}),nhn.husky.SE2M_Utils={sURLPattern:"(http|https|ftp|mailto):(?:\\/\\/)?((:?\\w|-)+(:?\\.(:?\\w|-)+)+)([^ <>]+)?",getCustomCSS:function(e,t,n){var r=[];if("undefined"==typeof e||"undefined"==typeof t||!e||!t)return r;var i=e.match(t);return i&&i[0]&&i[1]&&(n?r=i[1].split(n):r[0]=i[1]),r},toStringSamePropertiesOfArray:function(e,t,n){if(e instanceof Array){var r=[];for(var i=0;i<e.length;i++)r.push(e[i][t]);return r.join(",").replace(/,/g,n)}if(typeof e[t]=="undefined")return"";if(typeof e[t]=="string")return e[t]},makeArray:function(e){if(e===null||typeof e=="undefined")return[];if(e instanceof Array)return e;var t=[];return t.push(e),t},ellipsis:function(e,t,n,r){n=n||"...",typeof r=="undefined"&&(r=1);var i=jindo.$Element(e),s=jindo.$Element(t),o=i.html(),u=o.length,a=s.height(),f=0;i.html("A");var l=s.height();if(a<l*(r+.5))return i.html(o);a=l;while(a<l*(r+.5))f+=Math.max(Math.ceil((u-f)/2),1),i.html(o.substring(0,f)+n),a=s.height();while(a>l*(r+.5))f--,i.html(o.substring(0,f)+n),a=s.height()},ellipsisByPixel:function(e,t,n,r){t=t||"...";var i=jindo.$Element(e),s=i.width();if(s<n)return;var o=i.html(),u=o.length,a=0;if(typeof r=="undefined"){var f=i.html("A").width();s=f;while(s<n)a+=Math.max(Math.ceil((u-a)/2),1),i.html(o.substring(0,a)+t),s=i.width();r=function(){return!0}}a=i.html().length-t.length;while(s>n){if(!r())break;a--,i.html(o.substring(0,a)+t),s=i.width()}},ellipsisElementsToDesinatedWidth:function(e,t,n,r){jindo.$A(e).forEach(function(e,i){e||jindo.$A.Continue(),nhn.husky.SE2M_Utils.ellipsisByPixel(e,t,n[i],r)})},paddingZero:function(e,t){var n=e.toString();while(n.length<t)n="0"+n;return n},cutStringToByte:function(e,t,n){if(e===null||e.length===0)return e;e=e.replace(/  +/g," "),!n&&n!=""&&(n="...");var r=t,i=0,s=e.length;for(var o=0;o<s;o++){i+=this.getCharByte(e.charAt(o));if(i==r)return o==s-1?e:e.substring(0,o)+n;if(i>r)return e.substring(0,o)+n}return e},getCharByte:function(e){if(e===null||e.length<1)return 0;var t=0,n=escape(e);return n.length==1?t++:n.indexOf("%u")!=-1?t+=2:n.indexOf("%")!=-1&&(t+=n.length/3),t},getFilteredHashTable:function(e,t){if(t instanceof Array){var n=jindo.$A(t);return jindo.$H(e).filter(function(e,t){return n.has(t)&&e?!0:!1}).$value()}return arguments.callee.call(this,e,[t])},isBlankNode:function(e){var t=this.isBlankTextNode,n=function(e){return e?t(e)?!0:e.tagName=="BR"?!0:e.innerHTML=="&nbsp;"||e.innerHTML==""?!0:!1:!0},r=function(e){if(e.tagName=="IMG"||e.tagName=="IFRAME")return!1;if(n(e))return!0;if(e.tagName=="P"){for(var r=e.childNodes.length-1;r>=0;r--){var i=e.childNodes[r];t(i)&&i.parentNode.removeChild(i)}if(e.childNodes.length==1){if(e.firstChild.tagName=="IMG"||e.firstChild.tagName=="IFRAME")return!1;if(n(e.firstChild))return!0}}return!1};if(r(e))return!0;for(var i=0,s=e.childNodes.length;i<s;i++){var o=e.childNodes[i];if(!r(o))return!1}return!0},isBlankTextNode:function(e){var t;if(e.nodeType==3){t=e.nodeValue,t=t.replace(unescape("%uFEFF"),"");if(t=="")return!0}return!1},isFirstChildOfNode:function(e,t,n){return n?n.tagName==t&&n.firstChild.tagName==e?!0:!1:!1},findAncestorByTagName:function(e,t){while(t&&t.tagName!=e)t=t.parentNode;return t},findAncestorByTagNameWithCount:function(e,t){var n=0,r={};while(t&&t.tagName!=e)t=t.parentNode,n+=1;return r={elNode:t,nRecursiveCount:n},r},findClosestAncestorAmongTagNames:function(e,t){var n=new RegExp("^("+e.join("|")+")$","i");while(t&&!n.test(t.tagName))t=t.parentNode;return t},findClosestAncestorAmongTagNamesWithCount:function(e,t){var n=0,r={},i=new RegExp("^("+e.join("|")+")$","i");while(t&&!i.test(t.tagName))t=t.parentNode,n+=1;return r={elNode:t,nRecursiveCount:n},r},loadCSS:function(e,t){var n=document,r=n.getElementsByTagName("HEAD")[0],i=n.createElement("LINK");i.setAttribute("type","text/css"),i.setAttribute("rel","stylesheet"),i.setAttribute("href",e),t&&("onload"in i?i.onload=function(){t()}:i.onreadystatechange=function(){if(i.readyState!="complete")return;if(i.getAttribute("_complete"))return;i.setAttribute("_complete",!0),t()}),r.appendChild(i)},getUniqueId:function(e){return(e||"")+jindo.$Date().time()+(Math.random()*1e5).toFixed()},clone:function(e,t){if("undefined"==typeof e||!e||e.constructor!=Array&&e.constructor!=Object)return e;var n=e.constructor==Array?[]:{};for(var r in e)"undefined"==typeof t||!t[r]?n[r]=arguments.callee(e[r]):n[r]=arguments.callee(t[r]);return n},getHtmlTagAttr:function(e,t){var n=new RegExp("\\s"+t+"=('([^']*)'|\"([^\"]*)\"|([^\"' >]*))","i"),r=n.exec(e);if(!r)return"";var i=r[1]||r[2]||r[3];return!i||(i=i.replace(/[\"]/g,"")),i},iframeAlignConverter:function(e,t){var n=e.tagName.toUpperCase();if(n=="DIV"||n=="P"){if(e.parentNode===null)return;var r=t,i=jindo.$Element(e),s=i.html(),o=jindo.$Element(e).attr("align")||jindo.$Element(e).css("text-align"),u=jindo.$Element(jindo.$("<div></div>",r));u.html(s).attr("align",o),i.replace(u)}},getJsonDatafromXML:function(e){var t={},n=/\s*<(\/?[\w:\-]+)((?:\s+[\w:\-]+\s*=\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'))*)\s*((?:\/>)|(?:><\/\1>|\s*))|\s*<!\[CDATA\[([\w\W]*?)\]\]>\s*|\s*>?([^<]*)/ig,r=/^[0-9]+(?:\.[0-9]+)?$/,i=/^\s+$/g,s={"&amp;":"&","&nbsp;":" ","&quot;":'"',"&lt;":"<","&gt;":">"},o={tags:["/"],stack:[t]},u=function(e){return typeof e=="undefined"?"":e.replace(/&[a-z]+;/g,function(e){return typeof s[e]=="string"?s[e]:e})},a=function(e,t){e.replace(/([\w\:\-]+)\s*=\s*(?:"((?:\\"|[^"])*)"|'((?:\\'|[^'])*)')/g,function(e,n,r,i){t[n]=u((r?r.replace(/\\"/g,'"'):undefined)||(i?i.replace(/\\'/g,"'"):undefined))})},f=function(e){for(var t in e)if(e.hasOwnProperty(t)){if(Object.prototype[t])continue;return!1}return!0},l=function(e,t,n,s,l,c){var h,p="",d=o.stack.length-1;if(typeof t=="string"&&t)if(t.substr(0,1)!="/"){var v=typeof n=="string"&&n,m=typeof s=="string"&&s,g=!v&&m?"":{};h=o.stack[d];if(typeof h[t]=="undefined")h[t]=g,h=o.stack[d+1]=h[t];else if(h[t]instanceof Array){var y=h[t].length;h[t][y]=g,h=o.stack[d+1]=h[t][y]}else h[t]=[h[t],g],h=o.stack[d+1]=h[t][1];v&&a(n,h),o.tags[d+1]=t,m&&(o.tags.length--,o.stack.length--)}else o.tags.length--,o.stack.length--;else typeof l=="string"&&l?p=l:typeof c=="string"&&c.replace(i,"")&&(p=u(c));if(p.length>0){var b=o.stack[d-1],w=o.tags[d];!r.test(p)&&(p=="true"||p=="false")&&(p=new Boolean(p));if(typeof b=="undefined")return;if(b[w]instanceof Array){var E=b[w];typeof E[E.length-1]=="object"&&!f(E[E.length-1])?(E[E.length-1].$cdata=p,E[E.length-1].toString=function(){return p}):E[E.length-1]=p}else typeof b[w]=="object"&&!f(b[w])?(b[w].$cdata=p,b[w].toString=function(){return p}):b[w]=p}};return e=e.replace(/<(\?|\!-)[^>]*>/g,""),e.replace(n,l),jindo.$Json(t)},replaceSpecialChar:function(e){return typeof e=="string"?e.replace(/\&/g,"&amp;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/</g,"&lt;").replace(/\>/g,"&gt;"):""},restoreSpecialChar:function(e){return typeof e=="string"?e.replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"):""}},nhn.husky.AutoResizer=jindo.$Class({welHiddenDiv:null,welCloneDiv:null,elContainer:null,$init:function(e,t){var n=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","paddingTop","paddingLeft","paddingBottom","paddingRight","width"],r=n.length,i={position:"absolute",top:-9999,left:-9999,opacity:0,overflow:"hidden",wordWrap:"break-word"};this.nMinHeight=t.nMinHeight,this.wfnCallback=t.wfnCallback,this.elContainer=e.parentNode,this.welTextArea=jindo.$Element(e),this.welHiddenDiv=jindo.$Element("<div>"),this.wfnResize=jindo.$Fn(this._resize,this),this.sOverflow=this.welTextArea.css("overflow"),this.welTextArea.css("overflow","hidden");while(r--)i[n[r]]=this.welTextArea.css(n[r]);this.welHiddenDiv.css(i),this.nLastHeight=this.welTextArea.height()},bind:function(){this.welCloneDiv=jindo.$Element(this.welHiddenDiv.$value().cloneNode(!1)),this.wfnResize.attach(this.welTextArea,"keyup"),this.welCloneDiv.appendTo(this.elContainer),this._resize()},unbind:function(){this.wfnResize.detach(this.welTextArea,"keyup"),this.welTextArea.css("overflow",this.sOverflow),this.welCloneDiv&&this.welCloneDiv.leave()},_resize:function(){var e=this.welTextArea.$value().value,t=!1,n;if(e===this.sContents)return;this.sContents=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\n/g,"<br>"),this.sContents+="<br>",this.welCloneDiv.html(this.sContents),n=this.welCloneDiv.height(),n<this.nMinHeight&&(n=this.nMinHeight),this.welTextArea.css("height",n+"px"),this.elContainer.style.height=n+"px",this.nLastHeight<n&&(t=!0),this.wfnCallback(t)}}),"undefined"!=typeof StringBuffer&&(StringBuffer={}),StringBuffer=function(e){this._aString=[],"undefined"!=typeof e&&this.append(e)},StringBuffer.prototype.append=function(e){return this._aString.push(e),this},StringBuffer.prototype.toString=function(){return this._aString.join("")},StringBuffer.prototype.setLength=function(e){"undefined"==typeof e||0>=e?this._aString.length=0:this._aString.length=e},function(){var e=null,t=/,/gi;IsInstalledFont=function(n){var r=n=="Comic Sans MS"?"Courier New":"Comic Sans MS";e||(e=document.createElement("div"));var i="position:absolute !important; font-size:200px !important; left:-9999px !important; top:-9999px !important;";e.innerHTML="mmmmiiiii"+unescape("%uD55C%uAE00"),e.style.cssText=i+'font-family:"'+r+'" !important';var s=document.body||document.documentElement;s.firstChild?s.insertBefore(e,s.firstChild):document.body.appendChild(e);var o=e.offsetWidth+"-"+e.offsetHeight;e.style.cssText=i+'font-family:"'+n.replace(t,'","')+'", "'+r+'" !important';var u=o!=e.offsetWidth+"-"+e.offsetHeight;return document.body.removeChild(e),u}}(),nhn.husky.SE2B_CSSLoader=jindo.$Class({name:"SE2B_CSSLoader",bCssLoaded:!1,aInstantLoadTrigger:["OPEN_QE_LAYER","SHOW_ACTIVE_LAYER","SHOW_DIALOG_LAYER","START_SPELLCHECK"],aDelayedLoadTrigger:["MSG_SE_OBJECT_EDIT_REQUESTED","OBJECT_MODIFY","MSG_SE_DUMMY_OBJECT_EDIT_REQUESTED","TOGGLE_TOOLBAR_ACTIVE_LAYER","SHOW_TOOLBAR_ACTIVE_LAYER"],$init:function(){this.htOptions=nhn.husky.SE2M_Configuration.SE2B_CSSLoader;if(!jindo.$Agent().navigator().ie)this.loadSE2CSS();else{for(var e=0,t=this.aInstantLoadTrigger.length;e<t;e++)this["$BEFORE_"+this.aInstantLoadTrigger[e]]=jindo.$Fn(function(){this.loadSE2CSS()},this).bind();for(var e=0,t=this.aDelayedLoadTrigger.length;e<t;e++){var n=this.aDelayedLoadTrigger[e];this["$BEFORE_"+this.aDelayedLoadTrigger[e]]=jindo.$Fn(function(e){var t=jindo.$A(arguments).$value();return t=t.splice(1,t.length-1),this.loadSE2CSS(e,t)},this).bind(n)}}},loadSE2CSS:function(e,t){if(this.bCssLoaded)return!0;this.bCssLoaded=!0;var n=null;return e&&(n=jindo.$Fn(this.oApp.exec,this.oApp).bind(e,t)),!1}}),typeof window.nhn=="undefined"&&(window.nhn={});var oMessageMap={"SE_EditingAreaManager.onExit":"\ub0b4\uc6a9\uc774 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","SE_Color.invalidColorCode":"\uc0c9\uc0c1 \ucf54\ub4dc\ub97c \uc62c\ubc14\ub974\uac8c \uc785\ub825\ud574 \uc8fc\uc138\uc694. \n\n \uc608) #000000, #FF0000, #FFFFFF, #ffffff, ffffff","SE_Hyperlink.invalidURL":"\uc785\ub825\ud558\uc2e0 URL\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.","SE_FindReplace.keywordMissing":"\ucc3e\uc73c\uc2e4 \ub2e8\uc5b4\ub97c \uc785\ub825\ud574 \uc8fc\uc138\uc694.","SE_FindReplace.keywordNotFound":"\ucc3e\uc73c\uc2e4 \ub2e8\uc5b4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.","SE_FindReplace.replaceAllResultP1":"\uc77c\uce58\ud558\ub294 \ub0b4\uc6a9\uc774 \ucd1d ","SE_FindReplace.replaceAllResultP2":"\uac74 \ubc14\ub00c\uc5c8\uc2b5\ub2c8\ub2e4.","SE_FindReplace.notSupportedBrowser":"\ud604\uc7ac \uc0ac\uc6a9\ud558\uace0 \uacc4\uc2e0 \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c\ub294 \uc0ac\uc6a9\ud558\uc2e4\uc218 \uc5c6\ub294 \uae30\ub2a5\uc785\ub2c8\ub2e4.\n\n\uc774\uc6a9\uc5d0 \ubd88\ud3b8\uc744 \ub4dc\ub824 \uc8c4\uc1a1\ud569\ub2c8\ub2e4.","SE_FindReplace.replaceKeywordNotFound":"\ubc14\ub014 \ub2e8\uc5b4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4","SE_LineHeight.invalidLineHeight":"\uc798\ubabb\ub41c \uac12\uc785\ub2c8\ub2e4.","SE_Footnote.defaultText":"\uac01\uc8fc\ub0b4\uc6a9\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694","SE.failedToLoadFlash":"\ud50c\ub798\uc2dc\uac00 \ucc28\ub2e8\ub418\uc5b4 \uc788\uc5b4 \ud574\ub2f9 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","SE2M_EditingModeChanger.confirmTextMode":"\ud14d\uc2a4\ud2b8 \ubaa8\ub4dc\ub85c \uc804\ud658\ud558\uba74 \uc791\uc131\ub41c \ub0b4\uc6a9\uc740 \uc720\uc9c0\ub418\ub098, \n\n\uae00\uaf34 \ub4f1\uc758 \ud3b8\uc9d1\ud6a8\uacfc\uc640 \uc774\ubbf8\uc9c0 \ub4f1\uc758 \ucca8\ubd80\ub0b4\uc6a9\uc774 \ubaa8\ub450 \uc0ac\ub77c\uc9c0\uac8c \ub429\ub2c8\ub2e4.\n\n\uc804\ud658\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","SE2M_FontNameWithLayerUI.sSampleText":"\uac00\ub098\ub2e4\ub77c"};nhn.husky.SE_OuterIFrameControl=$Class({name:"SE_OuterIFrameControl",oResizeGrip:null,$init:function(e){this.aHeightChangeKeyMap=[-100,100,500,-500,-1,-10,1,10],this._assignHTMLObjects(e),this.$FnKeyDown=$Fn(this._keydown,this),this.oResizeGrip&&this.$FnKeyDown.attach(this.oResizeGrip,"keydown"),!jindo.$Agent().navigator().ie||(this.$FnMouseDown=$Fn(this._mousedown,this),this.$FnMouseMove=$Fn(this._mousemove,this),this.$FnMouseMove_Parent=$Fn(this._mousemove_parent,this),this.$FnMouseUp=$Fn(this._mouseup,this),this.oResizeGrip&&this.$FnMouseDown.attach(this.oResizeGrip,"mousedown"))},_assignHTMLObjects:function(e){e=jindo.$(e)||document,this.oResizeGrip=cssquery.getSingle(".husky_seditor_editingArea_verticalResizer",e),this.elIFrame=window.frameElement,this.welIFrame=$Element(this.elIFrame)},$ON_MSG_APP_READY:function(){this.oApp.exec("SE_FIT_IFRAME",[])},$ON_MSG_EDITING_AREA_SIZE_CHANGED:function(){this.oApp.exec("SE_FIT_IFRAME",[])},$ON_SE_FIT_IFRAME:function(){this.elIFrame.style.height=document.body.offsetHeight+"px"},$AFTER_RESIZE_EDITING_AREA_BY:function(e,t){this.oApp.exec("SE_FIT_IFRAME",[])},_keydown:function(e){var t=e.key();t.keyCode>=33&&t.keyCode<=40&&(this.oApp.exec("MSG_EDITING_AREA_RESIZE_STARTED",[]),this.oApp.exec("RESIZE_EDITING_AREA_BY",[0,this.aHeightChangeKeyMap[t.keyCode-33]]),this.oApp.exec("MSG_EDITING_AREA_RESIZE_ENDED",[]),e.stop())},_mousedown:function(e){this.iStartHeight=e.pos().clientY,this.iStartHeightOffset=e.pos().layerY,this.$FnMouseMove.attach(document,"mousemove"),this.$FnMouseMove_Parent.attach(parent.document,"mousemove"),this.$FnMouseUp.attach(document,"mouseup"),this.$FnMouseUp.attach(parent.document,"mouseup"),this.iStartHeight=e.pos().clientY,this.oApp.exec("MSG_EDITING_AREA_RESIZE_STARTED",[this.$FnMouseDown,this.$FnMouseMove,this.$FnMouseUp])},_mousemove:function(e){var t=e.pos().clientY-this.iStartHeight;this.oApp.exec("RESIZE_EDITING_AREA_BY",[0,t])},_mousemove_parent:function(e){var t=e.pos().pageY-(this.welIFrame.offset().top+this.iStartHeight);this.oApp.exec("RESIZE_EDITING_AREA_BY",[0,t])},_mouseup:function(e){this.$FnMouseMove.detach(document,"mousemove"),this.$FnMouseMove_Parent.detach(parent.document,"mousemove"),this.$FnMouseUp.detach(document,"mouseup"),this.$FnMouseUp.detach(parent.document,"mouseup"),this.oApp.exec("MSG_EDITING_AREA_RESIZE_ENDED",[this.$FnMouseDown,this.$FnMouseMove,this.$FnMouseUp])}}),nhn.husky.SE_ToolbarToggler=$Class({name:"SE_ToolbarToggler",bUseToolbar:!0,$init:function(e,t){this._assignHTMLObjects(e,t)},_assignHTMLObjects:function(e,t){e=jindo.$(e)||document,this.toolbarArea=cssquery.getSingle(".se2_tool",e),typeof t=="undefined"||t===!0?this.toolbarArea.style.display="block":this.toolbarArea.style.display="none"},$ON_MSG_APP_READY:function(){this.oApp.exec("REGISTER_HOTKEY",["ctrl+t","SE_TOGGLE_TOOLBAR",[]])},$ON_SE_TOGGLE_TOOLBAR:function(){this.toolbarArea.style.display=this.toolbarArea.style.display=="none"?"block":"none",this.oApp.exec("MSG_EDITING_AREA_SIZE_CHANGED",[])}}),nhn.husky.HuskyCore.addLoadedFile("hp_SE2M_FindReplacePlugin$Lazy.js"),nhn.husky.HuskyCore.mixin(nhn.husky.SE2M_FindReplacePlugin,{_assignHTMLElements:function(){var e=this.oApp.htOptions.elAppContainer;this.oApp.exec("LOAD_HTML",["find_and_replace"]),this.elDropdownLayer=jindo.$$.getSingle("DIV.husky_se2m_findAndReplace_layer",e),this.welDropdownLayer=jindo.$Element(this.elDropdownLayer);var t=jindo.$$("LI",this.elDropdownLayer);this.oFindTab=t[0],this.oReplaceTab=t[1],t=jindo.$$(".container > .bx",this.elDropdownLayer),this.oFindInputSet=jindo.$$.getSingle(".husky_se2m_find_ui",this.elDropdownLayer),this.oReplaceInputSet=jindo.$$.getSingle(".husky_se2m_replace_ui",this.elDropdownLayer),this.elTitle=jindo.$$.getSingle("H3",this.elDropdownLayer),this.oFindInput_Keyword=jindo.$$.getSingle("INPUT",this.oFindInputSet),t=jindo.$$("INPUT",this.oReplaceInputSet),this.oReplaceInput_Original=t[0],this.oReplaceInput_Replacement=t[1],this.oFindNextButton=jindo.$$.getSingle("BUTTON.husky_se2m_find_next",this.elDropdownLayer),this.oReplaceFindNextButton=jindo.$$.getSingle("BUTTON.husky_se2m_replace_find_next",this.elDropdownLayer),this.oReplaceButton=jindo.$$.getSingle("BUTTON.husky_se2m_replace",this.elDropdownLayer),this.oReplaceAllButton=jindo.$$.getSingle("BUTTON.husky_se2m_replace_all",this.elDropdownLayer),this.aCloseButtons=jindo.$$("BUTTON.husky_se2m_cancel",this.elDropdownLayer)},$LOCAL_BEFORE_FIRST:function(e){this._assignHTMLElements(),this.oFindReplace=new nhn.FindReplace(this.oEditingWindow);for(var t=0;t<this.aCloseButtons.length;t++){var n=jindo.$Fn(this.oApp.exec,this.oApp).bind("HIDE_FIND_REPLACE_LAYER",[this.elDropdownLayer]);jindo.$Fn(n,this).attach(this.aCloseButtons[t],"click")}jindo.$Fn(jindo.$Fn(this.oApp.exec,this.oApp).bind("SHOW_FIND",[]),this).attach(this.oFindTab,"click"),jindo.$Fn(jindo.$Fn(this.oApp.exec,this.oApp).bind("SHOW_REPLACE",[]),this).attach(this.oReplaceTab,"click"),jindo.$Fn(jindo.$Fn(this.oApp.exec,this.oApp).bind("FIND",[]),this).attach(this.oFindNextButton,"click"),jindo.$Fn(jindo.$Fn(this.oApp.exec,this.oApp).bind("FIND",[]),this).attach(this.oReplaceFindNextButton,"click"),jindo.$Fn(jindo.$Fn(this.oApp.exec,this.oApp).bind("REPLACE",[]),this).attach(this.oReplaceButton,"click"),jindo.$Fn(jindo.$Fn(this.oApp.exec,this.oApp).bind("REPLACE_ALL",[]),this).attach(this.oReplaceAllButton,"click"),this.oFindInput_Keyword.value="",this.oReplaceInput_Original.value="",this.oReplaceInput_Replacement.value="";var r=this.oApp.getWYSIWYGWindow().frameElement;this.htOffsetPos=jindo.$Element(r).offset(),this.nEditorWidth=r.offsetWidth,this.elDropdownLayer.style.display="block",this.htInitialPos=this.welDropdownLayer.offset();var i=this.oApp.oUtils.getScrollXY();this.welDropdownLayer.offset(this.htOffsetPos.top,this.htOffsetPos.left),this.htTopLeftCorner={x:parseInt(this.elDropdownLayer.style.left,10),y:parseInt(this.elDropdownLayer.style.top,10)},this.nLayerWidth=258,this.nLayerHeight=160,this.elDropdownLayer.style.display="none"},$ON_TOGGLE_FIND_REPLACE_LAYER:function(){this.bLayerShown?this.oApp.exec("HIDE_FIND_REPLACE_LAYER"):this.oApp.exec("SHOW_FIND_REPLACE_LAYER")},$ON_SHOW_FIND_REPLACE_LAYER:function(){this.bLayerShown=!0,this.oApp.exec("DISABLE_ALL_UI",[{aExceptions:["findAndReplace"]}]),this.oApp.exec("SELECT_UI",["findAndReplace"]),this.oApp.exec("HIDE_ALL_DIALOG_LAYER",[]),this.elDropdownLayer.style.top=this.nDefaultTop+"px",this.oApp.exec("SHOW_DIALOG_LAYER",[this.elDropdownLayer,{elHandle:this.elTitle,fnOnDragStart:jindo.$Fn(this.oApp.exec,this.oApp).bind("SHOW_EDITING_AREA_COVER"),fnOnDragEnd:jindo.$Fn(this.oApp.exec,this.oApp).bind("HIDE_EDITING_AREA_COVER"),nMinX:this.htTopLeftCorner.x,nMinY:this.nDefaultTop,nMaxX:this.htTopLeftCorner.x+this.oApp.getEditingAreaWidth()-this.nLayerWidth,nMaxY:this.htTopLeftCorner.y+this.oApp.getEditingAreaHeight()-this.nLayerHeight,sOnShowMsg:"FIND_REPLACE_LAYER_SHOWN"}]),this.oApp.exec("MSG_NOTIFY_CLICKCR",["findreplace"])},$ON_HIDE_FIND_REPLACE_LAYER:function(){this.oApp.exec("ENABLE_ALL_UI"),this.oApp.exec("DESELECT_UI",["findAndReplace"]),this.oApp.exec("HIDE_ALL_DIALOG_LAYER",[]),this.bLayerShown=!1},$ON_FIND_REPLACE_LAYER_SHOWN:function(){this.oApp.exec("POSITION_TOOLBAR_LAYER",[this.elDropdownLayer]),this.bFindMode?(this.oFindInput_Keyword.value="_clear_",this.oFindInput_Keyword.value="",this.oFindInput_Keyword.focus()):(this.oReplaceInput_Original.value="_clear_",this.oReplaceInput_Original.value="",this.oReplaceInput_Replacement.value="",this.oReplaceInput_Original.focus()),this.oApp.exec("HIDE_CURRENT_ACTIVE_LAYER",[])},$ON_SHOW_FIND_LAYER:function(){this.oApp.exec("SHOW_FIND"),this.oApp.exec("SHOW_FIND_REPLACE_LAYER")},$ON_SHOW_REPLACE_LAYER:function(){this.oApp.exec("SHOW_REPLACE"),this.oApp.exec("SHOW_FIND_REPLACE_LAYER")},$ON_SHOW_FIND:function(){this.bFindMode=!0,this.oFindInput_Keyword.value=this.oReplaceInput_Original.value,jindo.$Element(this.oFindTab).addClass("active"),jindo.$Element(this.oReplaceTab).removeClass("active"),jindo.$Element(this.oFindNextButton).removeClass("normal"),jindo.$Element(this.oFindNextButton).addClass("strong"),this.oFindInputSet.style.display="block",this.oReplaceInputSet.style.display="none",this.oReplaceButton.style.display="none",this.oReplaceAllButton.style.display="none",jindo.$Element(this.elDropdownLayer).removeClass("replace"),jindo.$Element(this.elDropdownLayer).addClass("find")},$ON_SHOW_REPLACE:function(){this.bFindMode=!1,this.oReplaceInput_Original.value=this.oFindInput_Keyword.value,jindo.$Element(this.oFindTab).removeClass("active"),jindo.$Element(this.oReplaceTab).addClass("active"),jindo.$Element(this.oFindNextButton).removeClass("strong"),jindo.$Element(this.oFindNextButton).addClass("normal"),this.oFindInputSet.style.display="none",this.oReplaceInputSet.style.display="block",this.oReplaceButton.style.display="inline",this.oReplaceAllButton.style.display="inline",jindo.$Element(this.elDropdownLayer).removeClass("find"),jindo.$Element(this.elDropdownLayer).addClass("replace")},$ON_FIND:function(){var e;this.bFindMode?e=this.oFindInput_Keyword.value:e=this.oReplaceInput_Original.value;var t=this.oApp.getSelection();t.select();switch(this.oFindReplace.find(e,!1)){case 1:alert(this.oApp.$MSG("SE_FindReplace.keywordNotFound")),t.select();break;case 2:alert(this.oApp.$MSG("SE_FindReplace.keywordMissing"))}},$ON_REPLACE:function(){var e=this.oReplaceInput_Original.value,t=this.oReplaceInput_Replacement.value,n=this.oApp.getSelection();this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["REPLACE"]);var r=this.oFindReplace.replace(e,t,!1);this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["REPLACE"]);switch(r){case 1:case 3:alert(this.oApp.$MSG("SE_FindReplace.keywordNotFound")),n.select();break;case 4:alert(this.oApp.$MSG("SE_FindReplace.keywordMissing"))}},$ON_REPLACE_ALL:function(){var e=this.oReplaceInput_Original.value,t=this.oReplaceInput_Replacement.value,n=this.oApp.getSelection();this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["REPLACE ALL",{sSaveTarget:"BODY"}]);var r=this.oFindReplace.replaceAll(e,t,!1);this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["REPLACE ALL",{sSaveTarget:"BODY"}]),r===0?(alert(this.oApp.$MSG("SE_FindReplace.replaceKeywordNotFound")),n.select(),this.oApp.exec("FOCUS")):r<0?(alert(this.oApp.$MSG("SE_FindReplace.keywordMissing")),n.select()):(alert(this.oApp.$MSG("SE_FindReplace.replaceAllResultP1")+r+this.oApp.$MSG("SE_FindReplace.replaceAllResultP2")),n=this.oApp.getEmptySelection(),n.select(),this.oApp.exec("FOCUS"))}}),nhn.husky.HuskyCore.addLoadedFile("hp_SE2M_Quote$Lazy.js"),nhn.husky.HuskyCore.mixin(nhn.husky.SE2M_Quote,{$ON_TOGGLE_BLOCKQUOTE_LAYER:function(){this.oApp.exec("TOGGLE_TOOLBAR_ACTIVE_LAYER",[this.elDropdownLayer,null,"SELECT_UI",["quote"],"DESELECT_UI",["quote"]]),this.oApp.exec("MSG_NOTIFY_CLICKCR",["quote"])},$ON_EVENT_SE2_BLOCKQUOTE_LAYER_CLICK:function(e){var t=nhn.husky.SE2M_Utils.findAncestorByTagName("BUTTON",e.element);if(!t||t.tagName!="BUTTON")return;var n=t.className;this.oApp.exec("APPLY_BLOCKQUOTE",[n])},$ON_APPLY_BLOCKQUOTE:function(e){e.match(/(se2_quote[0-9]+)/)?this._wrapBlock("BLOCKQUOTE",RegExp.$1):this._unwrapBlock("BLOCKQUOTE"),this.oApp.exec("HIDE_ACTIVE_LAYER",[])},_isExceedMaxDepth:function(e){var t=function(e){var n=e.firstChild,r=0,i=0;if(!n)return e.tagName&&e.tagName==="BLOCKQUOTE"?1:0;while(n){if(n.nodeType===1){r=t(n),n.tagName==="BLOCKQUOTE"&&(r+=1),i<r&&(i=r);if(i>=this.nMaxLevel)return i}n=n.nextSibling}return i};return t(e)>=this.nMaxLevel},_unwrapBlock:function(e){var t=this.oApp.getSelection(),n=t.commonAncestorContainer;while(n&&n.tagName!=e)n=n.parentNode;if(!n)return;this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["CANCEL BLOCK QUOTE",{sSaveTarget:"BODY"}]);var r=t.commonAncestorContainer;if(r.nodeType!==3){var i=t.getTextNodes()||"",s=i.length-1;r=s>-1?i[s]:null}while(n.firstChild)n.parentNode.insertBefore(n.firstChild,n);n.parentNode.removeChild(n),r&&(t.selectNodeContents(r),t.collapseToEnd(),t.select()),this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["CANCEL BLOCK QUOTE",{sSaveTarget:"BODY"}])},_wrapBlock:function(e,t){var n,r,i,s,o=/BODY|TD|LI/i,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S;this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["BLOCK QUOTE",{sSaveTarget:"BODY"}]),n=this.oApp.getSelection(),n.startContainer===n.endContainer&&n.startContainer.nodeType===1&&n.startContainer.tagName==="P"?nhn.husky.SE2M_Utils.isBlankNode(n.startContainer)||nhn.husky.SE2M_Utils.isFirstChildOfNode("IMG",n.startContainer.tagName,n.startContainer)||nhn.husky.SE2M_Utils.isFirstChildOfNode("IFRAME",n.startContainer.tagName,n.startContainer)?r=n.getLineInfo(!0):r=n.getLineInfo(!1):r=n.getLineInfo(!1),i=r.oStart,s=r.oEnd,i.bParentBreak&&!o.test(i.oLineBreaker.tagName)?u=i.oNode.parentNode:u=i.oNode,s.bParentBreak&&!o.test(s.oLineBreaker.tagName)?a=s.oNode.parentNode:a=s.oNode,n.setStartBefore(u),n.setEndAfter(a),f=this._expandToTableStart(n,a),f&&(a=f,n.setEndAfter(f)),f=this._expandToTableStart(n,u),f&&(u=f,n.setStartBefore(f)),f=u,n.fixCommonAncestorContainer(),l=n.commonAncestorContainer,n.startContainer==n.endContainer&&n.endOffset-n.startOffset==1?c=n.startContainer.childNodes[n.startOffset]:c=n.commonAncestorContainer,h=this._findParentQuote(c);if(h){h.className=t,this._setStyle(h,this.htQuoteStyles_view[t]);return}while(!l.tagName||l.tagName&&l.tagName.match(/UL|OL|LI|IMG|IFRAME/))l=l.parentNode;while(f&&f!=l&&f.parentNode!=l)f=f.parentNode;f==l?p=l.firstChild:p=f,d=n._document.createElement(e),t&&(d.className=t,this._setStyle(d,this.htQuoteStyles_view[t])),l.insertBefore(d,p),n.setStartAfter(d),n.setEndAfter(a),n.surroundContents(d);if(this._isExceedMaxDepth(d)){alert(this.oApp.$MSG("SE2M_Quote.exceedMaxCount").replace("#MaxCount#",this.nMaxLevel+1)),this.oApp.exec("HIDE_ACTIVE_LAYER",[]),v=d.nextSibling,m=d.parentNode,g=d.childNodes,y=[],jindo.$Element(d).leave();for(b=0,w=g.length;b<w;b++)y[b]=g[b];for(b=0,w=y.length;b<w;b++)v?jindo.$Element(v).before(y[b]):jindo.$Element(m).append(y[b]);return}return n.selectNodeContents(d),d&&d.parentNode&&d.parentNode.tagName=="BODY"&&!d.nextSibling&&(E=n._document.createElement("P"),E.innerHTML="&nbsp;",d.parentNode.insertBefore(E,d.nextSibling)),nhn.husky.SE2M_Utils.isBlankNode(d)&&(d.innerHTML="&nbsp;",n.selectNodeContents(d.firstChild),n.collapseToStart(),n.select()),this.oApp.exec("REFRESH_WYSIWYG"),setTimeout(jindo.$Fn(function(e){S=e.placeStringBookmark(),e.select(),e.removeStringBookmark(S),this.oApp.exec("FOCUS")},this).bind(n),0),this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["BLOCK QUOTE",{sSaveTarget:"BODY"}]),d},_expandToTableStart:function(e,t){var n=e.commonAncestorContainer,r=null,i=!1;while(t&&!i){t==n&&(i=!0);if(/TBODY|TFOOT|THEAD|TR/i.test(t.tagName)){r=this._getTableRoot(t);break}t=t.parentNode}return r},_getTableRoot:function(e){while(e&&e.tagName!="TABLE")e=e.parentNode;return e},_setStyle:function(e,t){e.setAttribute("style",t),e.style.cssText=t}}),nhn.husky.HuskyCore.addLoadedFile("hp_SE2M_SCharacter$Lazy.js"),nhn.husky.HuskyCore.mixin(nhn.husky.SE2M_SCharacter,{_assignHTMLObjects:function(e){e=jindo.$(e)||document,this.elDropdownLayer=jindo.$$.getSingle("DIV.husky_seditor_sCharacter_layer",e),this.oTextField=jindo.$$.getSingle("INPUT",this.elDropdownLayer),this.oInsertButton=jindo.$$.getSingle("BUTTON.se2_confirm",this.elDropdownLayer),this.aCloseButton=jindo.$$("BUTTON.husky_se2m_sCharacter_close",this.elDropdownLayer),this.aSCharList=jindo.$$("UL.husky_se2m_sCharacter_list",this.elDropdownLayer);var t=jindo.$$.getSingle("UL.se2_char_tab",this.elDropdownLayer);this.aLabel=jindo.$$(">LI",t)},$LOCAL_BEFORE_FIRST:function(e){this.bIE=jindo.$Agent().navigator().ie,this._assignHTMLObjects(this.oApp.htOptions.elAppContainer),this.charSet=[],this.charSet[0]=unescape("FF5B FF5D 3014 3015 3008 3009 300A 300B 300C 300D 300E 300F 3010 3011 2018 2019 201C 201D 3001 3002 %B7 2025 2026 %A7 203B 2606 2605 25CB 25CF 25CE 25C7 25C6 25A1 25A0 25B3 25B2 25BD 25BC 25C1 25C0 25B7 25B6 2664 2660 2661 2665 2667 2663 2299 25C8 25A3 25D0 25D1 2592 25A4 25A5 25A8 25A7 25A6 25A9 %B1 %D7 %F7 2260 2264 2265 221E 2234 %B0 2032 2033 2220 22A5 2312 2202 2261 2252 226A 226B 221A 223D 221D 2235 222B 222C 2208 220B 2286 2287 2282 2283 222A 2229 2227 2228 FFE2 21D2 21D4 2200 2203 %B4 FF5E 02C7 02D8 02DD 02DA 02D9 %B8 02DB %A1 %BF 02D0 222E 2211 220F 266D 2669 266A 266C 327F 2192 2190 2191 2193 2194 2195 2197 2199 2196 2198 2116 33C7 2122 33C2 33D8 2121 2668 260F 260E 261C 261E %B6 2020 2021 %AE %AA %BA 2642 2640").replace(/(\S{4})/g,function(e){return"%u"+e}).split(" "),this.charSet[1]=unescape("%BD 2153 2154 %BC %BE 215B 215C 215D 215E %B9 %B2 %B3 2074 207F 2081 2082 2083 2084 2160 2161 2162 2163 2164 2165 2166 2167 2168 2169 2170 2171 2172 2173 2174 2175 2176 2177 2178 2179 FFE6 %24 FFE5 FFE1 20AC 2103 212B 2109 FFE0 %A4 2030 3395 3396 3397 2113 3398 33C4 33A3 33A4 33A5 33A6 3399 339A 339B 339C 339D 339E 339F 33A0 33A1 33A2 33CA 338D 338E 338F 33CF 3388 3389 33C8 33A7 33A8 33B0 33B1 33B2 33B3 33B4 33B5 33B6 33B7 33B8 33B9 3380 3381 3382 3383 3384 33BA 33BB 33BC 33BD 33BE 33BF 3390 3391 3392 3393 3394 2126 33C0 33C1 338A 338B 338C 33D6 33C5 33AD 33AE 33AF 33DB 33A9 33AA 33AB 33AC 33DD 33D0 33D3 33C3 33C9 33DC 33C6").replace(/(\S{4})/g,function(e){return"%u"+e}).split(" "),this.charSet[2]=unescape("3260 3261 3262 3263 3264 3265 3266 3267 3268 3269 326A 326B 326C 326D 326E 326F 3270 3271 3272 3273 3274 3275 3276 3277 3278 3279 327A 327B 24D0 24D1 24D2 24D3 24D4 24D5 24D6 24D7 24D8 24D9 24DA 24DB 24DC 24DD 24DE 24DF 24E0 24E1 24E2 24E3 24E4 24E5 24E6 24E7 24E8 24E9 2460 2461 2462 2463 2464 2465 2466 2467 2468 2469 246A 246B 246C 246D 246E 3200 3201 3202 3203 3204 3205 3206 3207 3208 3209 320A 320B 320C 320D 320E 320F 3210 3211 3212 3213 3214 3215 3216 3217 3218 3219 321A 321B 249C 249D 249E 249F 24A0 24A1 24A2 24A3 24A4 24A5 24A6 24A7 24A8 24A9 24AA 24AB 24AC 24AD 24AE 24AF 24B0 24B1 24B2 24B3 24B4 24B5 2474 2475 2476 2477 2478 2479 247A 247B 247C 247D 247E 247F 2480 2481 2482").replace(/(\S{4})/g,function(e){return"%u"+e}).split(" "),this.charSet[3]=unescape("3131 3132 3133 3134 3135 3136 3137 3138 3139 313A 313B 313C 313D 313E 313F 3140 3141 3142 3143 3144 3145 3146 3147 3148 3149 314A 314B 314C 314D 314E 314F 3150 3151 3152 3153 3154 3155 3156 3157 3158 3159 315A 315B 315C 315D 315E 315F 3160 3161 3162 3163 3165 3166 3167 3168 3169 316A 316B 316C 316D 316E 316F 3170 3171 3172 3173 3174 3175 3176 3177 3178 3179 317A 317B 317C 317D 317E 317F 3180 3181 3182 3183 3184 3185 3186 3187 3188 3189 318A 318B 318C 318D 318E").replace(/(\S{4})/g,function(e){return"%u"+e}).split(" "),this.charSet[4]=unescape("0391 0392 0393 0394 0395 0396 0397 0398 0399 039A 039B 039C 039D 039E 039F 03A0 03A1 03A3 03A4 03A5 03A6 03A7 03A8 03A9 03B1 03B2 03B3 03B4 03B5 03B6 03B7 03B8 03B9 03BA 03BB 03BC 03BD 03BE 03BF 03C0 03C1 03C3 03C4 03C5 03C6 03C7 03C8 03C9 %C6 %D0 0126 0132 013F 0141 %D8 0152 %DE 0166 014A %E6 0111 %F0 0127 I 0133 0138 0140 0142 0142 0153 %DF %FE 0167 014B 0149 0411 0413 0414 0401 0416 0417 0418 0419 041B 041F 0426 0427 0428 0429 042A 042B 042C 042D 042E 042F 0431 0432 0433 0434 0451 0436 0437 0438 0439 043B 043F 0444 0446 0447 0448 0449 044A 044B 044C 044D 044E 044F").replace(/(\S{4})/g,function(e){return"%u"+e}).split(" "),this.charSet[5]=unescape("3041 3042 3043 3044 3045 3046 3047 3048 3049 304A 304B 304C 304D 304E 304F 3050 3051 3052 3053 3054 3055 3056 3057 3058 3059 305A 305B 305C 305D 305E 305F 3060 3061 3062 3063 3064 3065 3066 3067 3068 3069 306A 306B 306C 306D 306E 306F 3070 3071 3072 3073 3074 3075 3076 3077 3078 3079 307A 307B 307C 307D 307E 307F 3080 3081 3082 3083 3084 3085 3086 3087 3088 3089 308A 308B 308C 308D 308E 308F 3090 3091 3092 3093 30A1 30A2 30A3 30A4 30A5 30A6 30A7 30A8 30A9 30AA 30AB 30AC 30AD 30AE 30AF 30B0 30B1 30B2 30B3 30B4 30B5 30B6 30B7 30B8 30B9 30BA 30BB 30BC 30BD 30BE 30BF 30C0 30C1 30C2 30C3 30C4 30C5 30C6 30C7 30C8 30C9 30CA 30CB 30CC 30CD 30CE 30CF 30D0 30D1 30D2 30D3 30D4 30D5 30D6 30D7 30D8 30D9 30DA 30DB 30DC 30DD 30DE 30DF 30E0 30E1 30E2 30E3 30E4 30E5 30E6 30E7 30E8 30E9 30EA 30EB 30EC 30ED 30EE 30EF 30F0 30F1 30F2 30F3 30F4 30F5 30F6").replace(/(\S{4})/g,function(e){return"%u"+e}).split(" ");var t=jindo.$Fn(this.oApp.exec,this.oApp).bind("INSERT_SCHARACTERS",[this.oTextField.value]);jindo.$Fn(t,this).attach(this.oInsertButton,"click"),this.oApp.exec("SET_SCHARACTER_LIST",[this.charSet]);for(var n=0;n<this.aLabel.length;n++){var r=jindo.$Fn(this.oApp.exec,this.oApp).bind("CHANGE_SCHARACTER_SET",[n]);jindo.$Fn(r,this).attach(this.aLabel[n].firstChild,"mousedown")}for(var n=0;n<this.aCloseButton.length;n++)this.oApp.registerBrowserEvent(this.aCloseButton[n],"click","HIDE_ACTIVE_LAYER",[]);this.oApp.registerBrowserEvent(this.elDropdownLayer,"click","EVENT_SCHARACTER_CLICKED",[]),this.oApp.registerBrowserEvent(this.oTextField,"keydown","EVENT_SCHARACTER_KEYDOWN")},$ON_EVENT_SCHARACTER_KEYDOWN:function(e){e.key().enter&&(this.oApp.exec("INSERT_SCHARACTERS"),e.stop())},$ON_TOGGLE_SCHARACTER_LAYER:function(){this.oTextField.value="",this.oSelection=this.oApp.getSelection(),this.oApp.exec("TOGGLE_TOOLBAR_ACTIVE_LAYER",[this.elDropdownLayer,null,"MSG_SCHARACTER_LAYER_SHOWN",[],"MSG_SCHARACTER_LAYER_HIDDEN",[""]]),this.oApp.exec("MSG_NOTIFY_CLICKCR",["symbol"])},$ON_MSG_SCHARACTER_LAYER_SHOWN:function(){this.oTextField.focus(),this.oApp.exec("SELECT_UI",["sCharacter"])},$ON_MSG_SCHARACTER_LAYER_HIDDEN:function(){this.oApp.exec("DESELECT_UI",["sCharacter"])},$ON_EVENT_SCHARACTER_CLICKED:function(e){var t=nhn.husky.SE2M_Utils.findAncestorByTagName("BUTTON",e.element);if(!t||t.tagName!="BUTTON")return;if(t.parentNode.tagName!="LI")return;var n=t.firstChild.innerHTML;if(n.length>1)return;this.oApp.exec("SELECT_SCHARACTER",[n]),e.stop()},$ON_SELECT_SCHARACTER:function(e){this.oTextField.value+=e;if(this.oTextField.createTextRange){var t=this.oTextField.createTextRange();t.collapse(!1),t.select()}else this.oTextField.selectionEnd&&(this.oTextField.selectionEnd=this.oTextField.value.length,this.oTextField.focus())},$ON_INSERT_SCHARACTERS:function(){this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["INSERT SCHARACTER"]),this.oApp.exec("PASTE_HTML",[this.oTextField.value]),this.oApp.exec("FOCUS"),this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["INSERT SCHARACTER"]),this.oApp.exec("HIDE_ACTIVE_LAYER",[])},$ON_CHANGE_SCHARACTER_SET:function(e){for(var t=0;t<this.aSCharList.length;t++)if(jindo.$Element(this.aLabel[t]).hasClass("active")){if(t==e)return;jindo.$Element(this.aLabel[t]).removeClass("active")}this._drawSCharList(e),jindo.$Element(this.aLabel[e]).addClass("active")},$ON_SET_SCHARACTER_LIST:function(e){this.charSet=e,this.bSCharSetDrawn=new Array(this.charSet.length),this._drawSCharList(0)},_drawSCharList:function(e){if(this.bSCharSetDrawn[e])return;this.bSCharSetDrawn[e]=!0;var t=this.charSet[e].length,n=new Array(t);this.aSCharList[e].innerHTML="";var r,i;for(var s=0;s<t;s++)n[s]=jindo.$("<LI>"),this.bIE?(r=jindo.$("<BUTTON>"),r.setAttribute("type","button")):(r=jindo.$("<BUTTON>"),r.type="button"),i=jindo.$("<SPAN>"),i.innerHTML=unescape(this.charSet[e][s]),r.appendChild(i),n[s].appendChild(r),n[s].onmouseover=function(){this.className="hover"},n[s].onmouseout=function(){this.className=""},this.aSCharList[e].appendChild(n[s])}}),nhn.husky.HuskyCore.addLoadedFile("hp_SE2M_TableCreator$Lazy.js"),nhn.husky.HuskyCore.mixin(nhn.husky.SE2M_TableCreator,{_assignHTMLObjects:function(e){this.oApp.exec("LOAD_HTML",["create_table"]);var t=null;this.elDropdownLayer=jindo.$$.getSingle("DIV.husky_se2m_table_layer",e),this.welDropdownLayer=jindo.$Element(this.elDropdownLayer),t=jindo.$$("INPUT",this.elDropdownLayer),this.elText_row=t[0],this.elText_col=t[1],this.elRadio_manualStyle=t[2],this.elText_borderSize=t[3],this.elText_borderColor=t[4],this.elText_BGColor=t[5],this.elRadio_templateStyle=t[6],t=jindo.$$("BUTTON",this.elDropdownLayer),this.elBtn_rowInc=t[0],this.elBtn_rowDec=t[1],this.elBtn_colInc=t[2],this.elBtn_colDec=t[3],this.elBtn_borderStyle=t[4],this.elBtn_incBorderSize=jindo.$$.getSingle("BUTTON.se2m_incBorder",this.elDropdownLayer),this.elBtn_decBorderSize=jindo.$$.getSingle("BUTTON.se2m_decBorder",this.elDropdownLayer),this.elLayer_Dim1=jindo.$$.getSingle("DIV.se2_t_dim0",this.elDropdownLayer),this.elLayer_Dim2=jindo.$$.getSingle("DIV.se2_t_dim3",this.elDropdownLayer),t=jindo.$$("SPAN.se2_pre_color>BUTTON",this.elDropdownLayer),this.elBtn_borderColor=t[0],this.elBtn_BGColor=t[1],this.elBtn_tableStyle=jindo.$$.getSingle("DIV.se2_select_ty2>BUTTON",this.elDropdownLayer),t=jindo.$$("P.se2_btn_area>BUTTON",this.elDropdownLayer),this.elBtn_apply=t[0],this.elBtn_cancel=t[1],this.elTable_preview=jindo.$$.getSingle("TABLE.husky_se2m_table_preview",this.elDropdownLayer),this.elLayer_borderStyle=jindo.$$.getSingle("DIV.husky_se2m_table_border_style_layer",this.elDropdownLayer),this.elPanel_borderStylePreview=jindo.$$.getSingle("SPAN.husky_se2m_table_border_style_preview",this.elDropdownLayer),this.elPanel_borderColorPallet=jindo.$$.getSingle("DIV.husky_se2m_table_border_color_pallet",this.elDropdownLayer),this.elPanel_bgColorPallet=jindo.$$.getSingle("DIV.husky_se2m_table_bgcolor_pallet",this.elDropdownLayer),this.elLayer_tableStyle=jindo.$$.getSingle("DIV.husky_se2m_table_style_layer",this.elDropdownLayer),this.elPanel_tableStylePreview=jindo.$$.getSingle("SPAN.husky_se2m_table_style_preview",this.elDropdownLayer),this.aElBtn_borderStyle=jindo.$$("BUTTON",this.elLayer_borderStyle),this.aElBtn_tableStyle=jindo.$$("BUTTON",this.elLayer_tableStyle),this.sNoBorderText=jindo.$$.getSingle("SPAN.se2m_no_border",this.elDropdownLayer).innerHTML,this.rxLastDigits=RegExp("([0-9]+)$")},$LOCAL_BEFORE_FIRST:function(){this._assignHTMLObjects(this.oApp.htOptions.elAppContainer),this.oApp.registerBrowserEvent(this.elText_row,"change","TABLE_SET_ROW_NUM",[null,0]),this.oApp.registerBrowserEvent(this.elText_col,"change","TABLE_SET_COLUMN_NUM",[null,0]),this.oApp.registerBrowserEvent(this.elText_borderSize,"change","TABLE_SET_BORDER_SIZE",[null,0]),this.oApp.registerBrowserEvent(this.elBtn_rowInc,"click","TABLE_INC_ROW"),this.oApp.registerBrowserEvent(this.elBtn_rowDec,"click","TABLE_DEC_ROW"),jindo.$Fn(this._numRowKeydown,this).attach(this.elText_row.parentNode,"keydown"),this.oApp.registerBrowserEvent(this.elBtn_colInc,"click","TABLE_INC_COLUMN"),this.oApp.registerBrowserEvent(this.elBtn_colDec,"click","TABLE_DEC_COLUMN"),jindo.$Fn(this._numColKeydown,this).attach(this.elText_col.parentNode,"keydown"),this.oApp.registerBrowserEvent(this.elBtn_incBorderSize,"click","TABLE_INC_BORDER_SIZE"),this.oApp.registerBrowserEvent(this.elBtn_decBorderSize,"click","TABLE_DEC_BORDER_SIZE"),jindo.$Fn(this._borderSizeKeydown,this).attach(this.elText_borderSize.parentNode,"keydown"),this.oApp.registerBrowserEvent(this.elBtn_borderStyle,"click","TABLE_TOGGLE_BORDER_STYLE_LAYER"),this.oApp.registerBrowserEvent(this.elBtn_tableStyle,"click","TABLE_TOGGLE_STYLE_LAYER"),this.oApp.registerBrowserEvent(this.elBtn_borderColor,"click","TABLE_TOGGLE_BORDER_COLOR_PALLET"),this.oApp.registerBrowserEvent(this.elBtn_BGColor,"click","TABLE_TOGGLE_BGCOLOR_PALLET"),this.oApp.registerBrowserEvent(this.elRadio_manualStyle,"click","TABLE_ENABLE_MANUAL_STYLE"),this.oApp.registerBrowserEvent(this.elRadio_templateStyle,"click","TABLE_ENABLE_TEMPLATE_STYLE"),this.oApp.exec("SE2_ATTACH_HOVER_EVENTS",[this.aElBtn_borderStyle]),this.oApp.exec("SE2_ATTACH_HOVER_EVENTS",[this.aElBtn_tableStyle]);var e;for(e=0;e<this.aElBtn_borderStyle.length;e++)this.oApp.registerBrowserEvent(this.aElBtn_borderStyle[e],"click","TABLE_SELECT_BORDER_STYLE");for(e=0;e<this.aElBtn_tableStyle.length;e++)this.oApp.registerBrowserEvent(this.aElBtn_tableStyle[e],"click","TABLE_SELECT_STYLE");this.oApp.registerBrowserEvent(this.elBtn_apply,"click","TABLE_INSERT"),this.oApp.registerBrowserEvent(this.elBtn_cancel,"click","HIDE_ACTIVE_LAYER"),this.oApp.exec("TABLE_SET_BORDER_COLOR",[/#[0-9A-Fa-f]{6}/.test(this.elText_borderColor.value)?this.elText_borderColor.value:"#cccccc"]),this.oApp.exec("TABLE_SET_BGCOLOR",[/#[0-9A-Fa-f]{6}/.test(this.elText_BGColor.value)?this.elText_BGColor.value:"#ffffff"]),this.nStyleMode=1,this.aTableStyleByBorder=["",'border="1" cellpadding="0" cellspacing="0" style="border:1px dashed #c7c7c7; border-left:0; border-bottom:0;"','border="1" cellpadding="0" cellspacing="0" style="border:#BorderSize#px dashed #BorderColor#; border-left:0; border-bottom:0;"','border="0" cellpadding="0" cellspacing="0" style="border:#BorderSize#px solid #BorderColor#; border-left:0; border-bottom:0;"','border="0" cellpadding="0" cellspacing="1" style="border:#BorderSize#px solid #BorderColor#;"','border="0" cellpadding="0" cellspacing="1" style="border:#BorderSize#px double #BorderColor#;"','border="0" cellpadding="0" cellspacing="1" style="border-width:#BorderSize*2#px #BorderSize#px #BorderSize#px #BorderSize*2#px; border-style:solid;border-color:#BorderColor#;"','border="0" cellpadding="0" cellspacing="1" style="border-width:#BorderSize#px #BorderSize*2#px #BorderSize*2#px #BorderSize#px; border-style:solid;border-color:#BorderColor#;"'],this.aTDStyleByBorder=["",'style="border:1px dashed #c7c7c7; border-top:0; border-right:0; background-color:#BGColor#"','style="border:#BorderSize#px dashed #BorderColor#; border-top:0; border-right:0; background-color:#BGColor#"','style="border:#BorderSize#px solid #BorderColor#; border-top:0; border-right:0; background-color:#BGColor#"','style="border:#BorderSize#px solid #BorderColor#; background-color:#BGColor#"','style="border:#BorderSize+2#px double #BorderColor#; background-color:#BGColor#"','style="border-width:#BorderSize#px #BorderSize*2#px #BorderSize*2#px #BorderSize#px; border-style:solid;border-color:#BorderColor#; background-color:#BGColor#"','style="border-width:#BorderSize*2#px #BorderSize#px #BorderSize#px #BorderSize*2#px; border-style:solid;border-color:#BorderColor#; background-color:#BGColor#"'],this.oApp.registerBrowserEvent(this.elDropdownLayer,"keydown","EVENT_TABLE_CREATE_KEYDOWN"),this._drawTableDropdownLayer()},$ON_TABLE_SELECT_BORDER_STYLE:function(e){var t=e.currentElement,n=this.rxLastDigits.exec(t.className);this._selectBorderStyle(n[1])},$ON_TABLE_SELECT_STYLE:function(e){var t=this.rxLastDigits.exec(e.element.className);this._selectTableStyle(t[1])},$ON_TOGGLE_TABLE_LAYER:function(){this._showNewTable(),this.oApp.exec("TOGGLE_TOOLBAR_ACTIVE_LAYER",[this.elDropdownLayer,null,"SELECT_UI",["table"],"TABLE_CLOSE",[]]),this.oApp.exec("MSG_NOTIFY_CLICKCR",["table"])},$ON_TABLE_CLOSE_ALL:function(){this.oApp.exec("TABLE_HIDE_BORDER_COLOR_PALLET",[]),this.oApp.exec("TABLE_HIDE_BGCOLOR_PALLET",[]),this.oApp.exec("TABLE_HIDE_BORDER_STYLE_LAYER",[]),this.oApp.exec("TABLE_HIDE_STYLE_LAYER",[])},$ON_TABLE_INC_ROW:function(){this.oApp.exec("TABLE_SET_ROW_NUM",[null,1])},$ON_TABLE_DEC_ROW:function(){this.oApp.exec("TABLE_SET_ROW_NUM",[null,-1])},$ON_TABLE_INC_COLUMN:function(){this.oApp.exec("TABLE_SET_COLUMN_NUM",[null,1])},$ON_TABLE_DEC_COLUMN:function(){this.oApp.exec("TABLE_SET_COLUMN_NUM",[null,-1])},$ON_TABLE_SET_ROW_NUM:function(e,t){e=e||parseInt(this.elText_row.value,10)||0,t=t||0,e+=t,e<this.nMinRows&&(e=this.nMinRows),e>this.nMaxRows&&(e=this.nMaxRows),this.elText_row.value=e,this._showNewTable()},$ON_TABLE_SET_COLUMN_NUM:function(e,t){e=e||parseInt(this.elText_col.value,10)||0,t=t||0,e+=t,e<this.nMinColumns&&(e=this.nMinColumns),e>this.nMaxColumns&&(e=this.nMaxColumns),this.elText_col.value=e,this._showNewTable()},_getTableString:function(){var e;return this.nStyleMode==1?e=this._doGetTableString(this.nColumns,this.nRows,this.nBorderSize,this.sBorderColor,this.sBGColor,this.nBorderStyleIdx):e=this._doGetTableString(this.nColumns,this.nRows,this.nBorderSize,this.sBorderColor,this.sBGColor,0),e},$ON_TABLE_INSERT:function(){this.oApp.exec("IE_FOCUS",[]),this.oApp.exec("TABLE_SET_COLUMN_NUM"),this.oApp.exec("TABLE_SET_ROW_NUM"),this._loadValuesFromHTML();var e,t,n,r,i,s,o,u,a,f;n=this.oApp.getWYSIWYGDocument().body,r=jindo.$Element(n),f=jindo.$Agent().navigator(),this.nTableWidth=n.offsetWidth,e=this._getTableString(),i=this.oApp.getWYSIWYGDocument().createElement("DIV"),i.innerHTML=e,s=i.firstChild,s.className=this._sSETblClass,u=this.oApp.getSelection(),u=this._divideParagraph(u),this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["INSERT TABLE",{sSaveTarget:"BODY"}]),a=this.oApp.getWYSIWYGDocument().createElement("DIV"),u.deleteContents(),u.insertNode(a),u.selectNode(a),this.oApp.exec("REMOVE_STYLE",[u]),f.ie&&this.oApp.getWYSIWYGDocument().body.childNodes.length===1&&this.oApp.getWYSIWYGDocument().body.firstChild===a?a.insertBefore(s,null):(a.parentNode.insertBefore(s,a),a.parentNode.removeChild(a)),f.firefox?(t=this.oApp.getWYSIWYGDocument().createElement("BR"),s.parentNode.insertBefore(t,s.nextSibling)):f.ie&&(t=this.oApp.getWYSIWYGDocument().createElement("p"),s.parentNode.insertBefore(t,s.nextSibling)),this.nStyleMode==2&&this.oApp.exec("STYLE_TABLE",[s,this.nTableStyleIdx]),o=s.getElementsByTagName("TD")[0],u.selectNodeContents(o.firstChild||o),u.collapseToEnd(),u.select(),this.oApp.exec("FOCUS"),this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["INSERT TABLE",{sSaveTarget:"BODY"}]),this.oApp.exec("HIDE_ACTIVE_LAYER",[]),this.oApp.exec("MSG_DISPLAY_REEDIT_MESSAGE_SHOW",[this.name,this.sReEditGuideMsg_table])},_divideParagraph:function(e){var t,n,r,i,s,o;e.fixCommonAncestorContainer();var u=e.commonAncestorContainer,a=nhn.husky.SE2M_Utils.findAncestorByTagNameWithCount("P",u),f=a.elNode;if(f){var l=nhn.husky.SE2M_Utils.findClosestAncestorAmongTagNamesWithCount(["TD","TH"],u),c=l.elNode;if(c){var h=a.nRecursiveCount,p=l.nRecursiveCount;h<p&&(t=f)}else t=f}return t?!t.firstChild||nhn.husky.SE2M_Utils.isBlankNode(t)?(e.selectNode(t),e.select(),e):(i=e.placeStringBookmark(),e.moveToBookmark(i),s=this.oApp.getWYSIWYGDocument().createElement("P"),e.setStartBefore(t.firstChild),e.surroundContents(s),e.collapseToEnd(),o=this.oApp.getWYSIWYGDocument().createElement("P"),e.setEndAfter(t.lastChild),e.surroundContents(o),e.collapseToStart(),e.removeStringBookmark(i),n=jindo.$Element(t),n.after(o),n.after(s),n.leave(),e=this.oApp.getEmptySelection(),e.setEndAfter(s),e.setStartBefore(o),e.select(),e):e},$ON_TABLE_CLOSE:function(){this.oApp.exec("TABLE_CLOSE_ALL",[]),this.oApp.exec("DESELECT_UI",["table"])},$ON_TABLE_SET_BORDER_SIZE:function(e,t){e=e||parseInt(this.elText_borderSize.value,10)||0,t=t||0,e+=t,e<this.nMinBorderWidth&&(e=this.nMinBorderWidth),e>this.nMaxBorderWidth&&(e=this.nMaxBorderWidth),this.elText_borderSize.value=e},$ON_TABLE_INC_BORDER_SIZE:function(){this.oApp.exec("TABLE_SET_BORDER_SIZE",[null,1])},$ON_TABLE_DEC_BORDER_SIZE:function(){this.oApp.exec("TABLE_SET_BORDER_SIZE",[null,-1])},$ON_TABLE_TOGGLE_BORDER_STYLE_LAYER:function(){this.elLayer_borderStyle.style.display=="block"?this.oApp.exec("TABLE_HIDE_BORDER_STYLE_LAYER",[]):this.oApp.exec("TABLE_SHOW_BORDER_STYLE_LAYER",[])},$ON_TABLE_SHOW_BORDER_STYLE_LAYER:function(){this.oApp.exec("TABLE_CLOSE_ALL",[]),this.elBtn_borderStyle.className="se2_view_more2",this.elLayer_borderStyle.style.display="block",this._refresh()},$ON_TABLE_HIDE_BORDER_STYLE_LAYER:function(){this.elBtn_borderStyle.className="se2_view_more",this.elLayer_borderStyle.style.display="none",this._refresh()},$ON_TABLE_TOGGLE_STYLE_LAYER:function(){this.elLayer_tableStyle.style.display=="block"?this.oApp.exec("TABLE_HIDE_STYLE_LAYER",[]):this.oApp.exec("TABLE_SHOW_STYLE_LAYER",[])},$ON_TABLE_SHOW_STYLE_LAYER:function(){this.oApp.exec("TABLE_CLOSE_ALL",[]),this.elBtn_tableStyle.className="se2_view_more2",this.elLayer_tableStyle.style.display="block",this._refresh()},$ON_TABLE_HIDE_STYLE_LAYER:function(){this.elBtn_tableStyle.className="se2_view_more",this.elLayer_tableStyle.style.display="none",this._refresh()},$ON_TABLE_TOGGLE_BORDER_COLOR_PALLET:function(){this.welDropdownLayer.hasClass("p1")?this.oApp.exec("TABLE_HIDE_BORDER_COLOR_PALLET",[]):this.oApp.exec("TABLE_SHOW_BORDER_COLOR_PALLET",[])},$ON_TABLE_SHOW_BORDER_COLOR_PALLET:function(){this.oApp.exec("TABLE_CLOSE_ALL",[]),this.welDropdownLayer.addClass("p1"),this.welDropdownLayer.removeClass("p2"),this.oApp.exec("SHOW_COLOR_PALETTE",["TABLE_SET_BORDER_COLOR_FROM_PALETTE",this.elPanel_borderColorPallet]),this.elPanel_borderColorPallet.parentNode.style.display="block"},$ON_TABLE_HIDE_BORDER_COLOR_PALLET:function(){this.welDropdownLayer.removeClass("p1"),this.oApp.exec("HIDE_COLOR_PALETTE",[]),this.elPanel_borderColorPallet.parentNode.style.display="none"},$ON_TABLE_TOGGLE_BGCOLOR_PALLET:function(){this.welDropdownLayer.hasClass("p2")?this.oApp.exec("TABLE_HIDE_BGCOLOR_PALLET",[]):this.oApp.exec("TABLE_SHOW_BGCOLOR_PALLET",[])},$ON_TABLE_SHOW_BGCOLOR_PALLET:function(){this.oApp.exec("TABLE_CLOSE_ALL",[]),this.welDropdownLayer.removeClass("p1"),this.welDropdownLayer.addClass("p2"),this.oApp.exec("SHOW_COLOR_PALETTE",["TABLE_SET_BGCOLOR_FROM_PALETTE",this.elPanel_bgColorPallet]),this.elPanel_bgColorPallet.parentNode.style.display="block"},$ON_TABLE_HIDE_BGCOLOR_PALLET:function(){this.welDropdownLayer.removeClass("p2"),this.oApp.exec("HIDE_COLOR_PALETTE",[]),this.elPanel_bgColorPallet.parentNode.style.display="none"},$ON_TABLE_SET_BORDER_COLOR_FROM_PALETTE:function(e){this.oApp.exec("TABLE_SET_BORDER_COLOR",[e]),this.oApp.exec("TABLE_HIDE_BORDER_COLOR_PALLET",[])},$ON_TABLE_SET_BORDER_COLOR:function(e){this.elText_borderColor.value=e,this.elBtn_borderColor.style.backgroundColor=e},$ON_TABLE_SET_BGCOLOR_FROM_PALETTE:function(e){this.oApp.exec("TABLE_SET_BGCOLOR",[e]),this.oApp.exec("TABLE_HIDE_BGCOLOR_PALLET",[])},$ON_TABLE_SET_BGCOLOR:function(e){this.elText_BGColor.value=e,this.elBtn_BGColor.style.backgroundColor=e},$ON_TABLE_ENABLE_MANUAL_STYLE:function(){this.nStyleMode=1,this._drawTableDropdownLayer()},$ON_TABLE_ENABLE_TEMPLATE_STYLE:function(){this.nStyleMode=2,this._drawTableDropdownLayer()},$ON_EVENT_TABLE_CREATE_KEYDOWN:function(e){e.key().enter&&(this.elBtn_apply.focus(),this.oApp.exec("TABLE_INSERT"),e.stop())},_drawTableDropdownLayer:function(){this.nBorderStyleIdx==1?(this.elPanel_borderStylePreview.innerHTML=this.sNoBorderText,this.elLayer_Dim1.className="se2_t_dim2"):(this.elPanel_borderStylePreview.innerHTML="",this.elLayer_Dim1.className="se2_t_dim0"),this.nStyleMode==1?(this.elRadio_manualStyle.checked=!0,this.elLayer_Dim2.className="se2_t_dim3",this.elText_borderSize.disabled=!1,this.elText_borderColor.disabled=!1,this.elText_BGColor.disabled=!1):(this.elRadio_templateStyle.checked=!0,this.elLayer_Dim2.className="se2_t_dim1",this.elText_borderSize.disabled=!0,this.elText_borderColor.disabled=!0,this.elText_BGColor.disabled=!0),this.oApp.exec("TABLE_CLOSE_ALL",[])},_selectBorderStyle:function(e){this.elPanel_borderStylePreview.className="se2_b_style"+e,this.nBorderStyleIdx=e,this._drawTableDropdownLayer()},_selectTableStyle:function(e){this.elPanel_tableStylePreview.className="se2_t_style"+e,this.nTableStyleIdx=e,this._drawTableDropdownLayer()},_showNewTable:function(){var e=document.createElement("DIV");this._loadValuesFromHTML(),e.innerHTML=this._getPreviewTableString(this.nColumns,this.nRows);var t=e.firstChild;this.elTable_preview.parentNode.insertBefore(t,this.elTable_preview),this.elTable_preview.parentNode.removeChild(this.elTable_preview),this.elTable_preview=t,this._refresh()},_getPreviewTableString:function(e,t){var n='<table border="0" cellspacing="1" class="se2_pre_table husky_se2m_table_preview">',r="<tr>";for(var i=0;i<e;i++)r+="<td><p>&nbsp;</p></td>\n";r+="</tr>\n",n+="<tbody>";for(var i=0;i<t;i++)n+=r;return n+="</tbody>\n",n+="</table>\n",n},_loadValuesFromHTML:function(){this.nColumns=parseInt(this.elText_col.value,10)||1,this.nRows=parseInt(this.elText_row.value,10)||1,this.nBorderSize=parseInt(this.elText_borderSize.value,10)||1,this.sBorderColor=this.elText_borderColor.value,this.sBGColor=this.elText_BGColor.value},_doGetTableString:function(e,t,n,r,i,s){var o=parseInt(this.nTableWidth/e,10),n=this.nBorderSize,u=this.aTableStyleByBorder[s].replace(/#BorderSize#/g,this.nBorderSize).replace(/#BorderSize\*([0-9]+)#/g,function(e,t){return n*parseInt(t,10)}).replace(/#BorderSize\+([0-9]+)#/g,function(e,t){return n+parseInt(t,10)}).replace("#BorderColor#",this.sBorderColor).replace("#BGColor#",this.sBGColor),a=this.aTDStyleByBorder[s].replace(/#BorderSize#/g,this.nBorderSize).replace(/#BorderSize\*([0-9]+)#/g,function(e,t){return n*parseInt(t,10)}).replace(/#BorderSize\+([0-9]+)#/g,function(e,t){return n+parseInt(t,10)}).replace("#BorderColor#",this.sBorderColor).replace("#BGColor#",this.sBGColor);o?a+=" width="+o:u+="class=se2_pre_table";var f=s==1?'attr_no_border_tbl="1"':"",l="<table "+u+" "+f+">",c="<tr>";for(var h=0;h<e;h++)c+="<td "+a+"><p>&nbsp;</p></td>\n";c+="</tr>\n",l+="<tbody>\n";for(var h=0;h<t;h++)l+=c;return l+="</tbody>\n",l+="</table>\n<br>",l},_numRowKeydown:function(e){var t=e.key();t.keyCode==38&&this.oApp.exec("TABLE_INC_ROW",[]),t.keyCode==40&&this.oApp.exec("TABLE_DEC_ROW",[])},_numColKeydown:function(e){var t=e.key();t.keyCode==38&&this.oApp.exec("TABLE_INC_COLUMN",[]),t.keyCode==40&&this.oApp.exec("TABLE_DEC_COLUMN",[])},_borderSizeKeydown:function(e){var t=e.key();t.keyCode==38&&this.oApp.exec("TABLE_INC_BORDER_SIZE",[]),t.keyCode==40&&this.oApp.exec("TABLE_DEC_BORDER_SIZE",[])},_refresh:function(){this.elDropdownLayer.style.zoom=0,this.elDropdownLayer.style.zoom=""}}),nhn.husky.HuskyCore.addLoadedFile("hp_SE2M_TableEditor$Lazy.js"),nhn.husky.HuskyCore.mixin(nhn.husky.SE2M_TableEditor,{_aCellName:["TD","TH"],_assignHTMLObjects:function(){this.oApp.exec("LOAD_HTML",["qe_table"]),this.elQELayer=jindo.$$.getSingle("DIV.q_table_wrap",this.oApp.htOptions.elAppContainer),this.elQELayer.style.zIndex=150,this.elBtnAddRowBelow=jindo.$$.getSingle("BUTTON.se2_addrow",this.elQELayer),this.elBtnAddColumnRight=jindo.$$.getSingle("BUTTON.se2_addcol",this.elQELayer),this.elBtnSplitRow=jindo.$$.getSingle("BUTTON.se2_seprow",this.elQELayer),this.elBtnSplitColumn=jindo.$$.getSingle("BUTTON.se2_sepcol",this.elQELayer),this.elBtnDeleteRow=jindo.$$.getSingle("BUTTON.se2_delrow",this.elQELayer),this.elBtnDeleteColumn=jindo.$$.getSingle("BUTTON.se2_delcol",this.elQELayer),this.elBtnMergeCell=jindo.$$.getSingle("BUTTON.se2_merrow",this.elQELayer),this.elBtnBGPalette=jindo.$$.getSingle("BUTTON.husky_se2m_table_qe_bgcolor_btn",this.elQELayer),this.elBtnBGIMGPalette=jindo.$$.getSingle("BUTTON.husky_se2m_table_qe_bgimage_btn",this.elQELayer),this.elPanelBGPaletteHolder=jindo.$$.getSingle("DIV.husky_se2m_tbl_qe_bg_paletteHolder",this.elQELayer),this.elPanelBGIMGPaletteHolder=jindo.$$.getSingle("DIV.husky_se2m_tbl_qe_bg_img_paletteHolder",this.elQELayer),this.elPanelTableBGArea=jindo.$$.getSingle("DIV.se2_qe2",this.elQELayer),this.elPanelTableTemplateArea=jindo.$$.getSingle("DL.se2_qe3",this.elQELayer),this.elPanelReviewBGArea=jindo.$$.getSingle("DL.husky_se2m_tbl_qe_review_bg",this.elQELayer),this.elPanelBGImg=jindo.$$.getSingle("DD",this.elPanelReviewBGArea),this.welPanelTableBGArea=jindo.$Element(this.elPanelTableBGArea),this.welPanelTableTemplateArea=jindo.$Element(this.elPanelTableTemplateArea),this.welPanelReviewBGArea=jindo.$Element(this.elPanelReviewBGArea),this.elPanelDim1=jindo.$$.getSingle("DIV.husky_se2m_tbl_qe_dim1",this.elQELayer),this.elPanelDim2=jindo.$$.getSingle("DIV.husky_se2m_tbl_qe_dim2",this.elQELayer),this.elPanelDimDelCol=jindo.$$.getSingle("DIV.husky_se2m_tbl_qe_dim_del_col",this.elQELayer),this.elPanelDimDelRow=jindo.$$.getSingle("DIV.husky_se2m_tbl_qe_dim_del_row",this.elQELayer),this.elInputRadioBGColor=jindo.$$.getSingle("INPUT.husky_se2m_radio_bgc",this.elQELayer),this.elInputRadioBGImg=jindo.$$.getSingle("INPUT.husky_se2m_radio_bgimg",this.elQELayer),this.elSelectBoxTemplate=jindo.$$.getSingle("DIV.se2_select_ty2",this.elQELayer),this.elInputRadioTemplate=jindo.$$.getSingle("INPUT.husky_se2m_radio_template",this.elQELayer),this.elPanelQETemplate=jindo.$$.getSingle("DIV.se2_layer_t_style",this.elQELayer),this.elBtnQETemplate=jindo.$$.getSingle("BUTTON.husky_se2m_template_more",this.elQELayer),this.elPanelQETemplatePreview=jindo.$$.getSingle("SPAN.se2_t_style1",this.elQELayer),this.aElBtn_tableStyle=jindo.$$("BUTTON",this.elPanelQETemplate);for(i=0;i<this.aElBtn_tableStyle.length;i++)this.oApp.registerBrowserEvent(this.aElBtn_tableStyle[i],"click","TABLE_QE_SELECT_TEMPLATE")},$LOCAL_BEFORE_FIRST:function(e){if(e.indexOf("REGISTER_CONVERTERS")>-1)return this.oApp.acceptLocalBeforeFirstAgain(this,!0),!0;this.htResizing={},this.nDraggableCellEdge=2;var t=jindo.$Element(document.body);this.nPageLeftRightMargin=parseInt(t.css("marginLeft"),10)+parseInt(t.css("marginRight"),10),this.nPageTopBottomMargin=parseInt(t.css("marginTop"),10)+parseInt(t.css("marginBottom"),10),this.QE_DIM_MERGE_BTN=1,this.QE_DIM_BG_COLOR=2,this.QE_DIM_REVIEW_BG_IMG=3,this.QE_DIM_TABLE_TEMPLATE=4,this.rxLastDigits=RegExp("([0-9]+)$"),this._assignHTMLObjects(),this.oApp.exec("SE2_ATTACH_HOVER_EVENTS",[this.aElBtn_tableStyle]),this.addCSSClass(this.CELL_SELECTION_CLASS,"background-color:#B4C9E9;"),this._createCellResizeGrip(),this.elIFrame=this.oApp.getWYSIWYGWindow().frameElement;var n;this.sEmptyTDSrc="",this.oApp.oNavigator.firefox?this.sEmptyTDSrc="<p><br/></p>":this.sEmptyTDSrc="<p>&nbsp;</p>",n=this.oApp.getWYSIWYGDocument(),n=this.elResizeCover,this.wfnMousedown_ResizeCover=jindo.$Fn(this._mousedown_ResizeCover,this),this.wfnMousemove_ResizeCover=jindo.$Fn(this._mousemove_ResizeCover,this),this.wfnMouseup_ResizeCover=jindo.$Fn(this._mouseup_ResizeCover,this),this.wfnMousedown_ResizeCover.attach(n,"mousedown"),this._changeTableEditorStatus(this.STATUS.S_0),this.oApp.registerBrowserEvent(this.elBtnMergeCell,"click","TE_MERGE_CELLS"),this.oApp.registerBrowserEvent(this.elBtnSplitColumn,"click","TE_SPLIT_COLUMN"),this.oApp.registerBrowserEvent(this.elBtnSplitRow,"click","TE_SPLIT_ROW"),this.oApp.registerBrowserEvent(this.elBtnAddColumnRight,"click","TE_INSERT_COLUMN_RIGHT"),this.oApp.registerBrowserEvent(this.elBtnAddRowBelow,"click","TE_INSERT_ROW_BELOW"),this.oApp.registerBrowserEvent(this.elBtnDeleteColumn,"click","TE_DELETE_COLUMN"),this.oApp.registerBrowserEvent(this.elBtnDeleteRow,"click","TE_DELETE_ROW"),this.oApp.registerBrowserEvent(this.elInputRadioBGColor,"click","DRAW_QE_RADIO_OPTION",[2]),this.oApp.registerBrowserEvent(this.elInputRadioBGImg,"click","DRAW_QE_RADIO_OPTION",[3]),this.oApp.registerBrowserEvent(this.elInputRadioTemplate,"click","DRAW_QE_RADIO_OPTION",[4]),this.oApp.registerBrowserEvent(this.elBtnBGPalette,"click","TABLE_QE_TOGGLE_BGC_PALETTE"),this.oApp.registerBrowserEvent(this.elBtnBGIMGPalette,"click","TABLE_QE_TOGGLE_IMG_PALETTE"),this.oApp.registerBrowserEvent(this.elPanelBGIMGPaletteHolder,"click","TABLE_QE_SET_IMG_FROM_PALETTE"),this.oApp.registerBrowserEvent(this.elBtnQETemplate,"click","TABLE_QE_TOGGLE_TEMPLATE"),this.oApp.registerBrowserEvent(document.body,"mouseup","EVENT_OUTER_DOC_MOUSEUP"),this.oApp.registerBrowserEvent(document.body,"mousemove","EVENT_OUTER_DOC_MOUSEMOVE"),this._rxCellNames=new RegExp("^("+this._aCellName.join("|")+")$","i")},$ON_EVENT_EDITING_AREA_KEYUP:function(e){var t=e.key();if(t.keyCode==229||t.alt||t.ctrl||t.keyCode==16)return;if(t.keyCode==8||t.keyCode==46)this.oApp.exec("DELETE_BLOCK_CONTENTS"),e.stop();switch(this.nStatus){case this.STATUS.CELL_SELECTED:this._changeTableEditorStatus(this.STATUS.S_0)}},$ON_TABLE_QE_SELECT_TEMPLATE:function(e){var t=this.rxLastDigits.exec(e.element.className),n=this.elSelectionStartTable;this._changeTableEditorStatus(this.STATUS.S_0),this.oApp.exec("STYLE_TABLE",[n,t[1]]);var r=!!n&&n.parentNode?n.parentNode:null,i=n?null:"BODY";this.oApp.exec("RECORD_UNDO_ACTION",["CHANGE_TABLE_STYLE",{elSaveTarget:r,sSaveTarget:i,bDontSaveSelection:!0}])},$BEFORE_CHANGE_EDITING_MODE:function(e,t){e!=="WYSIWYG"&&this.nStatus!==this.STATUS.S_0&&this._changeTableEditorStatus(this.STATUS.S_0)},$ON_TABLE_QE_TOGGLE_BGC_PALETTE:function(){this.elPanelBGPaletteHolder.parentNode.style.display=="block"?this.oApp.exec("HIDE_TABLE_QE_BGC_PALETTE",[]):this.oApp.exec("SHOW_TABLE_QE_BGC_PALETTE",[])},$ON_SHOW_TABLE_QE_BGC_PALETTE:function(){this.elPanelBGPaletteHolder.parentNode.style.display="block",this.oApp.exec("SHOW_COLOR_PALETTE",["TABLE_QE_SET_BGC_FROM_PALETTE",this.elPanelBGPaletteHolder])},$ON_HIDE_TABLE_QE_BGC_PALETTE:function(){this.elPanelBGPaletteHolder.parentNode.style.display="none",this.oApp.exec("HIDE_COLOR_PALETTE",[])},$ON_TABLE_QE_SET_BGC_FROM_PALETTE:function(e){this.oApp.exec("TABLE_QE_SET_BGC",[e]),this.oSelection&&this.oSelection.select(),this._changeTableEditorStatus(this.STATUS.S_0)},$ON_TABLE_QE_SET_BGC:function(e){this.elBtnBGPalette.style.backgroundColor=e;for(var t=0,n=this.aSelectedCells.length;t<n;t++)this.aSelectedCells[t].setAttribute(this.TMP_BGC_ATTR,e),this.aSelectedCells[t].removeAttribute(this.TMP_BGIMG_ATTR);this.sQEAction="TABLE_SET_BGCOLOR"},$ON_TABLE_QE_TOGGLE_IMG_PALETTE:function(){this.elPanelBGIMGPaletteHolder.parentNode.style.display=="block"?this.oApp.exec("HIDE_TABLE_QE_IMG_PALETTE",[]):this.oApp.exec("SHOW_TABLE_QE_IMG_PALETTE",[])},$ON_SHOW_TABLE_QE_IMG_PALETTE:function(){this.elPanelBGIMGPaletteHolder.parentNode.style.display="block"},$ON_HIDE_TABLE_QE_IMG_PALETTE:function(){this.elPanelBGIMGPaletteHolder.parentNode.style.display="none"},$ON_TABLE_QE_SET_IMG_FROM_PALETTE:function(e){this.oApp.exec("TABLE_QE_SET_IMG",[e.element]),this.oSelection&&this.oSelection.select(),this._changeTableEditorStatus(this.STATUS.S_0)},$ON_TABLE_QE_SET_IMG:function(e){var t=jindo.$Element(e).className(),n=jindo.$Element(this.elBtnBGIMGPalette),r=n.className().split(" ");for(var i=0,s=r.length;i<s;i++)r[i].indexOf("cellimg")>0&&n.removeClass(r[i]);jindo.$Element(this.elBtnBGIMGPalette).addClass(t);var o=t.substring(11,t.length),u="pattern_";if(o==="0")for(var i=0,s=this.aSelectedCells.length;i<s;i++)jindo.$Element(this.aSelectedCells[i]).css("backgroundImage",""),this.aSelectedCells[i].removeAttribute(this.TMP_BGC_ATTR),this.aSelectedCells[i].removeAttribute(this.TMP_BGIMG_ATTR);else{o==19||o==20||o==21||o==22||o==25||o==26?u=u+o+".jpg":u=u+o+".gif";for(var a=0,s=this.aSelectedCells.length;a<s;a++)jindo.$Element(this.aSelectedCells[a]).css("backgroundImage","url(http://static.se2.naver.com/static/img/"+u+")"),this.aSelectedCells[a].removeAttribute(this.TMP_BGC_ATTR),this.aSelectedCells[a].setAttribute(this.TMP_BGIMG_ATTR,"url(http://static.se2.naver.com/static/img/"+u+")")}this.sQEAction="TABLE_SET_BGIMAGE"},$ON_SAVE_QE_MY_REVIEW_ITEM:function(){this.oApp.exec("SAVE_MY_REVIEW_ITEM"),this.oApp.exec("CLOSE_QE_LAYER")},$ON_SHOW_COMMON_QE:function(){jindo.$Element(this.elSelectionStartTable).hasClass(this._sSETblClass)?this.oApp.exec("SHOW_TABLE_QE"):jindo.$Element(this.elSelectionStartTable).hasClass(this._sSEReviewTblClass)&&this.oApp.exec("SHOW_REVIEW_QE")},$ON_SHOW_TABLE_QE:function(){this.oApp.exec("HIDE_TABLE_QE_BGC_PALETTE",[]),this.oApp.exec("TABLE_QE_HIDE_TEMPLATE",[]),this.oApp.exec("SETUP_TABLE_QE_MODE",[0]),this.oApp.exec("OPEN_QE_LAYER",[this.htMap[this.htSelectionEPos.x][this.htSelectionEPos.y],this.elQELayer,"table"])},$ON_SHOW_REVIEW_QE:function(){this.oApp.exec("SETUP_TABLE_QE_MODE",[1]),this.oApp.exec("OPEN_QE_LAYER",[this.htMap[this.htSelectionEPos.x][this.htSelectionEPos.y],this.elQELayer,"review"])},$ON_CLOSE_SUB_LAYER_QE:function(){typeof this.elPanelBGPaletteHolder!="undefined"&&(this.elPanelBGPaletteHolder.parentNode.style.display="none"),typeof this.elPanelBGIMGPaletteHolder!="undefined"&&(this.elPanelBGIMGPaletteHolder.parentNode.style.display="none")},$ON_SETUP_TABLE_QE_MODE:function(e){var t=!0;typeof e=="number"&&(this.nQEMode=e),this.aSelectedCells.length<2&&(t=!1),this.oApp.exec("TABLE_QE_DIM",[this.QE_DIM_MERGE_BTN,t]);var n=this.aSelectedCells[0].getAttribute(this.TMP_BGC_ATTR)||"rgb(255,255,255)",r=!0;for(var i=1,s=this.aSelectedCells.length;i<s;i++)if(this.aSelectedCells[i]&&n!=this.aSelectedCells[i].getAttribute(this.TMP_BGC_ATTR)){r=!1;break}r?this.elBtnBGPalette.style.backgroundColor=n:this.elBtnBGPalette.style.backgroundColor="#FFFFFF";var o=this.aSelectedCells[0].getAttribute(this.TMP_BGIMG_ATTR)||"",u=!0,a,f=0,l=jindo.$Element(this.elBtnBGIMGPalette);if(!!o){var c=o.match(/\_[0-9]*/);a=c?c[0]:"_0",f=a.substring(1,a.length);for(var i=1,s=this.aSelectedCells.length;i<s;i++)if(o!=this.aSelectedCells[i].getAttribute(this.TMP_BGIMG_ATTR)){u=!1;break}}var h=l.className().split(/\s/);for(var p=0,s=h.length;p<s;p++)h[p].indexOf("cellimg")>0&&l.removeClass(h[p]);u&&f>0?l.addClass("se2_cellimg"+f):l.addClass("se2_cellimg0");if(this.nQEMode===0){this.elPanelTableTemplateArea.style.display="block",this.elPanelReviewBGArea.style.display="none",jindo.$Element(this.elPanelTableBGArea).className("se2_qe2");var d=this.parseIntOr0(this.elSelectionStartTable.getAttribute(this.ATTR_TBL_TEMPLATE));d||(this.elInputRadioBGColor.checked="true",d=1),this.elPanelQETemplatePreview.className="se2_t_style"+d,this.elPanelBGImg.style.position=""}else if(this.nQEMode==1){this.elPanelTableTemplateArea.style.display="none",this.elPanelReviewBGArea.style.display="block";var d=this.parseIntOr0(this.elSelectionStartTable.getAttribute(this.ATTR_REVIEW_TEMPLATE));this.elPanelBGImg.style.position="relative"}else this.elPanelTableTemplateArea.style.display="none",this.elPanelReviewBGArea.style.display="none";this.oApp.exec("DRAW_QE_RADIO_OPTION",[0])},$ON_DRAW_QE_RADIO_OPTION:function(e){e!==0&&e!=2&&this.oApp.exec("HIDE_TABLE_QE_BGC_PALETTE",[]),e!==0&&e!=3&&this.oApp.exec("HIDE_TABLE_QE_IMG_PALETTE",[]),e!==0&&e!=4&&this.oApp.exec("TABLE_QE_HIDE_TEMPLATE",[]),this.nQEMode===0?(this.elInputRadioBGImg.checked&&(this.elInputRadioBGColor.checked="true"),this.elInputRadioBGColor.checked?this.oApp.exec("TABLE_QE_DIM",[this.QE_DIM_TABLE_TEMPLATE,!1]):this.oApp.exec("TABLE_QE_DIM",[this.QE_DIM_BG_COLOR,!1])):(this.elInputRadioTemplate.checked&&(this.elInputRadioBGColor.checked="true"),this.elInputRadioBGColor.checked?this.oApp.exec("TABLE_QE_DIM",[this.QE_DIM_REVIEW_BG_IMG,!1]):this.oApp.exec("TABLE_QE_DIM",[this.QE_DIM_BG_COLOR,!1]))},$ON_TABLE_QE_DIM:function(e,t){var n,r="se2_qdim";e==1?n=this.elPanelDim1:n=this.elPanelDim2,t&&(e=0),n.className=r+e},$ON_TE_SELECT_TABLE:function(e){this.elSelectionStartTable=e,this.htMap=this._getCellMapping(this.elSelectionStartTable)},$ON_TE_SELECT_CELLS:function(e,t){this._selectCells(e,t)},$ON_TE_MERGE_CELLS:function(){if(this.aSelectedCells.length===0||this.aSelectedCells.length==1)return;this._removeClassFromSelection();var e,t,n;t=this.aSelectedCells[0];var r=nhn.husky.SE2M_Utils.findAncestorByTagName("TABLE",t),i,s,o,u=this.aSelectedCells[0];i=parseInt(u.style.height||u.getAttribute("height"),10),s=parseInt(u.style.width||u.getAttribute("width"),10);for(e=this.htSelectionSPos.x+1;e<this.htSelectionEPos.x+1;e++){curTD=this.htMap[e][this.htSelectionSPos.y];if(curTD==u)continue;u=curTD,s+=parseInt(curTD.style.width||curTD.getAttribute("width"),10)}u=this.aSelectedCells[0];for(e=this.htSelectionSPos.y+1;e<this.htSelectionEPos.y+1;e++){curTD=this.htMap[this.htSelectionSPos.x][e];if(curTD==u)continue;u=curTD,i+=parseInt(curTD.style.height||curTD.getAttribute("height"),10)}s&&(t.style.width=s+"px"),i&&(t.style.height=i+"px"),t.setAttribute("colSpan",this.htSelectionEPos.x-this.htSelectionSPos.x+1),t.setAttribute("rowSpan",this.htSelectionEPos.y-this.htSelectionSPos.y+1);for(e=1;e<this.aSelectedCells.length;e++){n=this.aSelectedCells[e];if(n.parentNode){nhn.husky.SE2M_Utils.isBlankNode(n)||(t.innerHTML+=n.innerHTML);var a=jindo.$Agent().navigator();a.ie&&(a.nativeVersion==9||a.nativeVersion==10)&&(a.version==9||a.version==10)&&this._removeEmptyTextNode_IE(n),n.parentNode.removeChild(n)}}this.htMap=this._getCellMapping(this.elSelectionStartTable),this._selectCells(this.htSelectionSPos,this.htSelectionEPos),this._showTableTemplate(this.elSelectionStartTable),this._addClassToSelection(),this.sQEAction="TABLE_CELL_MERGE",this.oApp.exec("SHOW_COMMON_QE")},$ON_TABLE_QE_TOGGLE_TEMPLATE:function(){this.elPanelQETemplate.style.display=="block"?this.oApp.exec("TABLE_QE_HIDE_TEMPLATE"):this.oApp.exec("TABLE_QE_SHOW_TEMPLATE")},$ON_TABLE_QE_SHOW_TEMPLATE:function(){this.elPanelQETemplate.style.display="block",this.oApp.exec("POSITION_TOOLBAR_LAYER",[this.elPanelQETemplate])},$ON_TABLE_QE_HIDE_TEMPLATE:function(){this.elPanelQETemplate.style.display="none"},$ON_STYLE_TABLE:function(e,t){e||(this._t||(this._t=1),e=this.elSelectionStartTable,t=this._t++%20+1),this.oSelection&&this.oSelection.select(),this._applyTableTemplate(e,t)},$ON_TE_DELETE_COLUMN:function(){if(this.aSelectedCells.length===0)return;this._selectAll_Column(),this._deleteSelectedCells(),this.sQEAction="DELETE_TABLE_COLUMN",this._changeTableEditorStatus(this.STATUS.S_0)},$ON_TE_DELETE_ROW:function(){if(this.aSelectedCells.length===0)return;this._selectAll_Row(),this._deleteSelectedCells(),this.sQEAction="DELETE_TABLE_ROW",this._changeTableEditorStatus(this.STATUS.S_0)},$ON_TE_INSERT_COLUMN_RIGHT:function(){if(this.aSelectedCells.length===0)return;this._selectAll_Column(),this._insertColumnAfter(this.htSelectionEPos.x)},$ON_TE_INSERT_COLUMN_LEFT:function(){this._selectAll_Column(),this._insertColumnAfter(this.htSelectionSPos.x-1)},$ON_TE_INSERT_ROW_BELOW:function(){if(this.aSelectedCells.length===0)return;this._insertRowBelow(this.htSelectionEPos.y)},$ON_TE_INSERT_ROW_ABOVE:function(){this._insertRowBelow(this.htSelectionSPos.y-1)},$ON_TE_SPLIT_COLUMN:function(){var e,t,n,r,i,s;if(this.aSelectedCells.length===0)return;this._removeClassFromSelection();var o=this.aSelectedCells[0];for(var u=0,a=this.aSelectedCells.length;u<a;u++){i=this.aSelectedCells[u],e=parseInt(i.getAttribute("colSpan"),10)||1;if(e>1)continue;var f=this._getBasisCellPosition(i);for(var l=0;l<this.htMap[0].length;)i=this.htMap[f.x][l],e=parseInt(i.getAttribute("colSpan"),10)||1,i.setAttribute("colSpan",e+1),l+=parseInt(i.getAttribute("rowSpan"),10)||1}for(var u=0,a=this.aSelectedCells.length;u<a;u++){i=this.aSelectedCells[u],e=parseInt(i.getAttribute("colSpan"),10)||1,t=(e/2).toFixed(0),i.setAttribute("colSpan"
,t),s=this._shallowCloneTD(i),s.setAttribute("colSpan",e-t),o=s,e=parseInt(i.getAttribute("rowSpan"),10)||1,s.setAttribute("rowSpan",e),s.innerHTML="&nbsp;",n=i.width||i.style.width,n&&(n=this.parseIntOr0(n),i.removeAttribute("width"),r=(n/2).toFixed(),i.style.width=r+"px",s.style.width=n-r+"px"),i.parentNode.insertBefore(s,i.nextSibling);var c=jindo.$Agent().navigator();c.ie&&(c.nativeVersion>=9||c.nativeVersion<=11)&&(c.version>=9||c.version<=11)&&(s.style.cssText=i.style.cssText)}this._reassignCellSizes(this.elSelectionStartTable),this.htMap=this._getCellMapping(this.elSelectionStartTable);var f=this._getBasisCellPosition(o);this.htSelectionEPos.x=f.x,this._selectCells(this.htSelectionSPos,this.htSelectionEPos),this.sQEAction="SPLIT_TABLE_COLUMN",this.oApp.exec("SHOW_COMMON_QE")},$ON_TE_SPLIT_ROW:function(){var e,t,n,n,r,i,s,o;if(this.aSelectedCells.length===0)return;var u=jindo.$$(">TBODY>TR",this.elSelectionStartTable,{oneTimeOffCache:!0});this._removeClassFromSelection();var a=0,f;for(var l=0,c=this.aSelectedCells.length;l<c;l++){r=this.aSelectedCells[l],e=parseInt(r.getAttribute("rowSpan"),10)||1;if(e>1)continue;s=this._getBasisCellPosition(r),f=u[s.y],o=this.oApp.getWYSIWYGDocument().createElement("TR"),f.parentNode.insertBefore(o,f.nextSibling),a++;for(var h=0;h<this.htMap.length;)r=this.htMap[h][s.y],e=parseInt(r.getAttribute("rowSpan"),10)||1,r.setAttribute("rowSpan",e+1),h+=parseInt(r.getAttribute("colSpan"),10)||1}u=jindo.$$(">TBODY>TR",this.elSelectionStartTable,{oneTimeOffCache:!0});var p,d;for(var l=0,c=this.aSelectedCells.length;l<c;l++){r=this.aSelectedCells[l],e=parseInt(r.getAttribute("rowSpan"),10)||1,t=(e/2).toFixed(0),r.setAttribute("rowSpan",t),i=this._shallowCloneTD(r),i.setAttribute("rowSpan",e-t),e=parseInt(r.getAttribute("colSpan"),10)||1,i.setAttribute("colSpan",e),i.innerHTML="&nbsp;",n=r.height||r.style.height,n&&(n=this.parseIntOr0(n),r.removeAttribute("height"),nNewHeight=(n/2).toFixed(),r.style.height=nNewHeight+"px",i.style.height=n-nNewHeight+"px");var v=jindo.$A(u).indexOf(r.parentNode),m=parseInt(v,10)+parseInt(t,10),g=u[m],y=g.childNodes,b=null,w;p=this._getBasisCellPosition(r);for(var E=0,S=y.length;E<S;E++){w=y[E];if(!w.tagName||!this._rxCellNames.test(w.tagName))continue;d=this._getBasisCellPosition(w);if(p.x<d.x){b=w;break}}g.insertBefore(i,b);var x=jindo.$Agent().navigator();x.ie&&(x.nativeVersion>=9||x.nativeVersion<=11)&&(x.version>=9||x.version<=11)&&(i.style.cssText=i.style.cssText)}this._reassignCellSizes(this.elSelectionStartTable),this.htMap=this._getCellMapping(this.elSelectionStartTable),this.htSelectionEPos.y+=a,this._selectCells(this.htSelectionSPos,this.htSelectionEPos),this.sQEAction="SPLIT_TABLE_ROW",this.oApp.exec("SHOW_COMMON_QE")},$ON_MSG_CELL_SELECTED:function(){this.elPanelDimDelCol.className="se2_qdim6r",this.elPanelDimDelRow.className="se2_qdim6c",this.htSelectionSPos.x===0&&this.htSelectionEPos.x===this.htMap.length-1&&this.oApp.exec("MSG_ROW_SELECTED"),this.htSelectionSPos.y===0&&this.htSelectionEPos.y===this.htMap[0].length-1&&this.oApp.exec("MSG_COL_SELECTED"),this.oApp.exec("SHOW_COMMON_QE")},$ON_MSG_ROW_SELECTED:function(){this.elPanelDimDelRow.className=""},$ON_MSG_COL_SELECTED:function(){this.elPanelDimDelCol.className=""},$ON_EVENT_EDITING_AREA_MOUSEDOWN:function(e){if(!this.oApp.isWYSIWYGEnabled())return;switch(this.nStatus){case this.STATUS.S_0:if(!e.element)return;if(e.element.tagName=="IMG")return;if(this.oApp.getEditingMode()!=="WYSIWYG")return;var t=nhn.husky.SE2M_Utils.findClosestAncestorAmongTagNames(this._aCellName,e.element);if(t&&this._rxCellNames.test(t.tagName)){var n=nhn.husky.SE2M_Utils.findAncestorByTagName("TABLE",t);if(!jindo.$Element(n).hasClass(this._sSETblClass)&&!jindo.$Element(n).hasClass(this._sSEReviewTblClass))return;if(!this._isValidTable(n)){jindo.$Element(n).removeClass(this._sSETblClass),jindo.$Element(n).removeClass(this._sSEReviewTblClass);return}n&&(this.elSelectionStartTD=t,this.elSelectionStartTable=n,this._changeTableEditorStatus(this.STATUS.MOUSEDOWN_CELL))}break;case this.STATUS.MOUSEDOWN_CELL:break;case this.STATUS.CELL_SELECTING:break;case this.STATUS.CELL_SELECTED:this._changeTableEditorStatus(this.STATUS.S_0)}},$ON_EVENT_EDITING_AREA_MOUSEMOVE:function(e){if(this.oApp.getEditingMode()!="WYSIWYG")return;switch(this.nStatus){case this.STATUS.S_0:this._isOnBorder(e)?this._showCellResizeGrip(e):this._hideResizer();break;case this.STATUS.MOUSEDOWN_CELL:var t=nhn.husky.SE2M_Utils.findClosestAncestorAmongTagNames(this._aCellName,e.element);if(t&&t!==this.elSelectionStartTD||!t)t||(t=this.elSelectionStartTD),this._reassignCellSizes(this.elSelectionStartTable),this._startCellSelection(),this._selectBetweenCells(this.elSelectionStartTD,t);break;case this.STATUS.CELL_SELECTING:var t=nhn.husky.SE2M_Utils.findClosestAncestorAmongTagNames(this._aCellName,e.element);if(!t||t===this.elLastSelectedTD)return;var n=nhn.husky.SE2M_Utils.findAncestorByTagName("TABLE",t);if(n!==this.elSelectionStartTable)return;this.elLastSelectedTD=t,this._selectBetweenCells(this.elSelectionStartTD,t);break;case this.STATUS.CELL_SELECTED:}},$ON_EVENT_OUTER_DOC_MOUSEMOVE:function(e){switch(this.nStatus){case this.STATUS.CELL_SELECTING:var t=e.pos(),n=t.pageY,r=t.pageX;if(n<this.htEditingAreaPos.top){var i=this.htSelectionSPos.y;if(i>0){this.htSelectionSPos.y--,this._selectCells(this.htSelectionSPos,this.htSelectionEPos);var s=this.oApp.getSelection();s.selectNodeContents(this.aSelectedCells[0]),s.select(),s.oBrowserSelection.selectNone()}}else if(n>this.htEditingAreaPos.bottom){var i=this.htSelectionEPos.y;if(i<this.htMap[0].length-1){this.htSelectionEPos.y++,this._selectCells(this.htSelectionSPos,this.htSelectionEPos);var s=this.oApp.getSelection();s.selectNodeContents(this.htMap[this.htSelectionEPos.x][this.htSelectionEPos.y]),s.select(),s.oBrowserSelection.selectNone()}}if(r<this.htEditingAreaPos.left){var o=this.htSelectionSPos.x;if(o>0){this.htSelectionSPos.x--,this._selectCells(this.htSelectionSPos,this.htSelectionEPos);var s=this.oApp.getSelection();s.selectNodeContents(this.aSelectedCells[0]),s.select(),s.oBrowserSelection.selectNone()}}else if(r>this.htEditingAreaPos.right){var o=this.htSelectionEPos.x;if(o<this.htMap.length-1){this.htSelectionEPos.x++,this._selectCells(this.htSelectionSPos,this.htSelectionEPos);var s=this.oApp.getSelection();s.selectNodeContents(this.htMap[this.htSelectionEPos.x][this.htSelectionEPos.y]),s.select(),s.oBrowserSelection.selectNone()}}}},$ON_EVENT_OUTER_DOC_MOUSEUP:function(e){this._eventEditingAreaMouseup(e)},$ON_EVENT_EDITING_AREA_MOUSEUP:function(e){this._eventEditingAreaMouseup(e)},_eventEditingAreaMouseup:function(e){if(this.oApp.getEditingMode()!="WYSIWYG")return;switch(this.nStatus){case this.STATUS.S_0:break;case this.STATUS.MOUSEDOWN_CELL:this._changeTableEditorStatus(this.STATUS.S_0);break;case this.STATUS.CELL_SELECTING:this._changeTableEditorStatus(this.STATUS.CELL_SELECTED);break;case this.STATUS.CELL_SELECTED:}},$ON_GET_SELECTED_CELLS:function(e,t){!this.aSelectedCells||(t[e]=this.aSelectedCells)},_coverResizeLayer:function(){this.elResizeCover.style.position="fixed";var e=jindo.$Document().clientSize();this.elResizeCover.style.width=e.width-this.nPageLeftRightMargin+"px",this.elResizeCover.style.height=e.height-this.nPageTopBottomMargin+"px",document.body.appendChild(this.elResizeCover)},_uncoverResizeLayer:function(){this.elResizeGrid.appendChild(this.elResizeCover),this.elResizeCover.style.position="",this.elResizeCover.style.width="100%",this.elResizeCover.style.height="100%"},_reassignCellSizes:function(e){var t=new Array(2);t[0]=jindo.$$(">TBODY>TR>TD",e,{oneTimeOffCache:!0}),t[1]=jindo.$$(">TBODY>TR>TH",e,{oneTimeOffCache:!0});var n=new Array(t[0].length+t[1].length),r=0,i=this.parseIntOr0(e.border),s=this.parseIntOr0(e.cellPadding);for(var o=0;o<2;o++)for(var u=0;u<t[o].length;u++){var a=t[o][u],f=jindo.$Element(a),l=jindo.$Agent().navigator(),c,h,p,d,v,m,g,y,b,w;a.getComputedStyle?(c=parseFloat(getComputedStyle(a).paddingLeft,10),h=parseFloat(getComputedStyle(a).paddingRight,10),p=parseFloat(getComputedStyle(a).paddingTop,10),d=parseFloat(getComputedStyle(a).paddingBottom,10),v=parseFloat(getComputedStyle(a).borderLeftWidth,10),m=parseFloat(getComputedStyle(a).borderRightWidth,10),g=parseFloat(getComputedStyle(a).borderTopWidth,10),y=parseFloat(getComputedStyle(a).borderBottomWidth,10)):(c=this.parseIntOr0(a.style.paddingLeft),h=this.parseIntOr0(a.style.paddingRight),p=this.parseIntOr0(a.style.paddingTop),d=this.parseIntOr0(a.style.paddingBottom),v=this.parseBorder(f.css("borderLeftWidth"),f.css("borderLeftStyle")),m=this.parseBorder(f.css("borderRightWidth"),f.css("borderRightStyle")),g=this.parseBorder(f.css("borderTopWidth"),f.css("borderTopStyle")),y=this.parseBorder(f.css("borderBottomWidth"),f.css("borderBottomStyle")));var E=jindo.$Element(a).attr("width"),S=jindo.$Element(a).attr("height");!E&&!S?(b=a.style.width,w=a.style.height):(b=a.offsetWidth-(c+h+v+m)+"px",w=a.offsetHeight-(p+d+g+y)+"px"),n[r++]=[a,b,w]}for(var u=0;u<r;u++){var x=n[u];x[0].removeAttribute("width"),x[0].removeAttribute("height"),x[0].style.width=x[1],x[0].style.height=x[2]}e.removeAttribute("width"),e.removeAttribute("height"),e.style.width="",e.style.height=""},_mousedown_ResizeCover:function(e){this.bResizing=!0,this.nStartHeight=e.pos().clientY,this.bResizingCover=!0,this.wfnMousemove_ResizeCover.attach(this.elResizeCover,"mousemove"),this.wfnMouseup_ResizeCover.attach(document,"mouseup"),this._coverResizeLayer(),this.elResizeGrid.style.border="1px dotted black",this.nStartHeight=e.pos().clientY,this.nStartWidth=e.pos().clientX,this.nClientXDiff=this.nStartWidth-this.htResizing.htEPos.clientX,this.nClientYDiff=this.nStartHeight-this.htResizing.htEPos.clientY,this._reassignCellSizes(this.htResizing.elTable),this.htMap=this._getCellMapping(this.htResizing.elTable);var t=this._getBasisCellPosition(this.htResizing.elCell),n=(parseInt(this.htResizing.elCell.getAttribute("colspan"))||1)-1,r=(parseInt(this.htResizing.elCell.getAttribute("rowspan"))||1)-1,i=t.x+n+this.htResizing.nHA,s=t.y+r+this.htResizing.nVA;if(i<0||s<0)return;this.htAllAffectedCells=this._getAllAffectedCells(i,s,this.htResizing.nResizeMode,this.htResizing.elTable)},_mousemove_ResizeCover:function(e){(jindo.$Agent().navigator().chrome||jindo.$Agent().navigator().safari)&&this.htResizing.nPreviousResizeMode!=undefined&&this.htResizing.nPreviousResizeMode!=0&&this.htResizing.nResizeMode!=this.htResizing.nPreviousResizeMode&&(this.htResizing.nResizeMode=this.htResizing.nPreviousResizeMode,this._showResizer());var t=e.pos().clientY-this.nStartHeight,n=e.pos().clientX-this.nStartWidth,r=e.pos();this.htResizing.nResizeMode==1?this.elResizeGrid.style.left=e.pos().clientX-this.nClientXDiff-this.parseIntOr0(this.elResizeGrid.style.width)/2+"px":this.elResizeGrid.style.top=e.pos().clientY-this.nClientYDiff-this.parseIntOr0(this.elResizeGrid.style.height)/2+"px"},_mouseup_ResizeCover:function(e){this.bResizing=!1,this._hideResizer(),this._uncoverResizeLayer(),this.elResizeGrid.style.border="",this.wfnMousemove_ResizeCover.detach(this.elResizeCover,"mousemove"),this.wfnMouseup_ResizeCover.detach(document,"mouseup");var t=0,n=0;this.htResizing.nResizeMode==2&&(t=e.pos().clientY-this.nStartHeight),this.htResizing.nResizeMode==1&&(n=e.pos().clientX-this.nStartWidth,this.htAllAffectedCells.nMinBefore!=-1&&n<-1*this.htAllAffectedCells.nMinBefore&&(n=-1*this.htAllAffectedCells.nMinBefore+this.MIN_CELL_WIDTH),this.htAllAffectedCells.nMinAfter!=-1&&n>this.htAllAffectedCells.nMinAfter&&(n=this.htAllAffectedCells.nMinAfter-this.MIN_CELL_WIDTH));var r,i,s=this.htAllAffectedCells.aCellsBefore;for(var o=0;o<s.length;o++){var u=s[o];r=0,i=0,r=u.style.width,isNaN(parseFloat(r,10))?r=0:r=parseFloat(r,10),r+=n,i=u.style.height,isNaN(parseFloat(i,10))?i=0:i=parseFloat(i,10),i+=t,u.style.width=Math.max(r,this.MIN_CELL_WIDTH)+"px",u.style.height=Math.max(i,this.MIN_CELL_HEIGHT)+"px"}var a=this.htAllAffectedCells.aCellsAfter;for(var o=0;o<a.length;o++){var u=a[o];r=0,i=0,r=u.style.width,isNaN(parseFloat(r,10))?r=0:r=parseFloat(r,10),r-=n,i=u.style.height,isNaN(parseFloat(i,10))?i=0:i=parseFloat(i,10),i-=t,u.style.width=Math.max(r,this.MIN_CELL_WIDTH)+"px",u.style.height=Math.max(i,this.MIN_CELL_HEIGHT)+"px"}this.bResizingCover=!1},$ON_CLOSE_QE_LAYER:function(){this._changeTableEditorStatus(this.STATUS.S_0)},_changeTableEditorStatus:function(e){if(this.nStatus==e)return;this.nStatus=e;switch(e){case this.STATUS.S_0:if(this.nStatus==this.STATUS.MOUSEDOWN_CELL)break;this._deselectCells(),!this.sQEAction||(this.oApp.exec("RECORD_UNDO_ACTION",[this.sQEAction,{elSaveTarget:this.elSelectionStartTable,bDontSaveSelection:!0}]),this.sQEAction="");if(this.oApp.oNavigator.safari||this.oApp.oNavigator.chrome)this.oApp.getWYSIWYGDocument().onselectstart=null;this.oApp.exec("ENABLE_WYSIWYG",[]),this.oApp.exec("CLOSE_QE_LAYER"),this.elSelectionStartTable=null;break;case this.STATUS.CELL_SELECTING:this.oApp.oNavigator.ie&&document.body.setCapture(!1);break;case this.STATUS.CELL_SELECTED:this.oApp.delayedExec("MSG_CELL_SELECTED",[],0),this.oApp.oNavigator.ie&&document.body.releaseCapture()}this.oApp.exec("TABLE_EDITOR_STATUS_CHANGED",[this.nStatus])},_isOnBorder:function(e){this.htResizing.nResizeMode=0,this.htResizing.elCell=e.element;if(!this._rxCellNames.test(e.element.tagName))return!1;this.htResizing.elTable=nhn.husky.SE2M_Utils.findAncestorByTagName("TABLE",this.htResizing.elCell);if(!this.htResizing.elTable)return;if(!jindo.$Element(this.htResizing.elTable).hasClass(this._sSETblClass)&&!jindo.$Element(this.htResizing.elTable).hasClass(this._sSEReviewTblClass))return;this.htResizing.nVA=0,this.htResizing.nHA=0,this.htResizing.nBorderLeftPos=0,this.htResizing.nBorderTopPos=-1,this.htResizing.htEPos=e.pos(!0),this.htResizing.nBorderSize=this.parseIntOr0(this.htResizing.elTable.border);var t,n;jindo.$Agent().navigator().ie||jindo.$Agent().navigator().safari?(t=this.htResizing.nBorderSize+this.nDraggableCellEdge,n=this.nDraggableCellEdge):(t=this.nDraggableCellEdge,n=this.htResizing.nBorderSize+this.nDraggableCellEdge);var r=this.htResizing.elCell.clientWidth,i=this.htResizing.elCell.clientHeight;nRightBorderCriteria=r-this.htResizing.htEPos.offsetX,nBottomBorderCriteria=i-this.htResizing.htEPos.offsetY,this.htResizing.htEPos.offsetY<=t&&this.htResizing.elCell.parentNode.previousSibling&&(this.htResizing.nVA=-1,this.htResizing.nResizeMode=4),nBottomBorderCriteria<=n&&(this.htResizing.nBorderTopPos=this.htResizing.elCell.offsetHeight+t-1,this.htResizing.nResizeMode=2),this.htResizing.htEPos.offsetX<=t&&this.htResizing.elTable.scrollLeft!=this.htResizing.elCell.offsetLeft&&(this.htResizing.nHA=-1,this.htResizing.nResizeMode=3),nRightBorderCriteria<=t&&(this.htResizing.nBorderLeftPos=this.htResizing.elCell.offsetWidth+t-1,this.htResizing.nResizeMode=1);if(jindo.$Agent().navigator().chrome||jindo.$Agent().navigator().safari)this.htResizing.elPreviousCell?this.htResizing.elCell!=this.htResizing.elPreviousCell&&(this.htResizing.elPreviousCell=this.htResizing.elCell):this.htResizing.elPreviousCell=this.htResizing.elCell;return this.htResizing.nResizeMode===0?!1:!0},_showCellResizeGrip:function(){if(this.htResizing.nResizeMode==1||this.htResizing.nResizeMode==3)this.elResizeCover.style.cursor="col-resize";else if(this.htResizing.nResizeMode==2||this.htResizing.nResizeMode==4)this.elResizeCover.style.cursor="row-resize";this._showResizer();if(this.htResizing.nResizeMode==1)this._setResizerSize((this.htResizing.nBorderSize+this.nDraggableCellEdge)*2,this.parseIntOr0(jindo.$Element(this.elIFrame).css("height"))),this.elResizeGrid.style.top="0px",this.elResizeGrid.style.left=this.htResizing.elCell.clientWidth+this.htResizing.htEPos.clientX-this.htResizing.htEPos.offsetX-this.parseIntOr0(this.elResizeGrid.style.width)/2+"px";else if(this.htResizing.nResizeMode==2){var e=this.oApp.elEditingAreaContainer.offsetWidth+"px";this._setResizerSize(this.parseIntOr0(e),(this.htResizing.nBorderSize+this.nDraggableCellEdge)*2),this.elResizeGrid.style.top=this.htResizing.elCell.clientHeight+this.htResizing.htEPos.clientY-this.htResizing.htEPos.offsetY-this.parseIntOr0(this.elResizeGrid.style.height)/2+"px",this.elResizeGrid.style.left="0px"}else if(this.htResizing.nResizeMode==3)this._setResizerSize((this.htResizing.nBorderSize+this.nDraggableCellEdge)*2,this.parseIntOr0(jindo.$Element(this.elIFrame).css("height"))),this.elResizeGrid.style.top="0px",this.elResizeGrid.style.left=+this.htResizing.htEPos.clientX-this.htResizing.htEPos.offsetX-this.parseIntOr0(this.elResizeGrid.style.width)/2+"px",this.htResizing.nResizeMode=1;else if(this.htResizing.nResizeMode==4){var e=this.oApp.elEditingAreaContainer.offsetWidth+"px";this._setResizerSize(this.parseIntOr0(e),(this.htResizing.nBorderSize+this.nDraggableCellEdge)*2),this.elResizeGrid.style.top=this.htResizing.htEPos.clientY-this.htResizing.htEPos.offsetY-this.parseIntOr0(this.elResizeGrid.style.height)/2+"px",this.elResizeGrid.style.left="0px",this.htResizing.nResizeMode=2}},_getAllAffectedCells:function(e,t,n,r){if(!r)return[];var i=this._getCellMapping(r),s=i.length,o=i[0].length,u=[],a=[],f,l=-1,c=-1;if(n==1){for(var h=0;h<o;h++){if(u.length>0&&u[u.length-1]==i[e][h])continue;u[u.length]=i[e][h];var p=parseInt(i[e][h].style.width);if(l==-1||l>p)l=p}if(i.length>e+1)for(var h=0;h<o;h++){if(a.length>0&&a[a.length-1]==i[e+1][h])continue;a[a.length]=i[e+1][h];var p=parseInt(i[e+1][h].style.width);if(c==-1||c>p)c=p}f={aCellsBefore:u,aCellsAfter:a,nMinBefore:l,nMinAfter:c}}else{for(var d=0;d<s;d++){if(u.length>0&&u[u.length-1]==i[d][t])continue;u[u.length]=i[d][t];if(l==-1||l>i[d][t].style.height)l=i[d][t].style.height}f={aCellsBefore:u,aCellsAfter:a,nMinBefore:l,nMinAfter:c}}return f},_createCellResizeGrip:function(){this.elTmp=document.createElement("DIV");try{this.elTmp.innerHTML='<div style="position:absolute; overflow:hidden; z-index: 99; "><div onmousedown="return false" style="background-color:#000000;filter:alpha(opacity=0);opacity:0.0;-moz-opacity:0.0;-khtml-opacity:0.0;cursor: col-resize; left: 0px; top: 0px; width: 100%; height: 100%;font-size:1px;z-index: 999; "></div></div>',this.elResizeGrid=this.elTmp.firstChild,this.elResizeCover=this.elResizeGrid.firstChild}catch(e){}var t=jindo.$$.getSingle(".husky_seditor_editing_area_container");t.appendChild(this.elResizeGrid)},_selectAll_Row:function(){this.htSelectionSPos.x=0,this.htSelectionEPos.x=this.htMap.length-1,this._selectCells(this.htSelectionSPos,this.htSelectionEPos)},_selectAll_Column:function(){this.htSelectionSPos.y=0,this.htSelectionEPos.y=this.htMap[0].length-1,this._selectCells(this.htSelectionSPos,this.htSelectionEPos)},_deleteSelectedCells:function(){var e;for(var t=0,n=this.aSelectedCells.length;t<n;t++){e=this.aSelectedCells[t];var r=jindo.$Agent().navigator();r.ie&&(r.nativeVersion==9||r.nativeVersion==10)&&(r.version==9||r.version==10)&&this._removeEmptyTextNode_IE(e),e.parentNode.removeChild(e)}var i=jindo.$$(">TBODY>TR",this.elSelectionStartTable,{oneTimeOffCache:!0}),s=this.htSelectionEPos.x-this.htSelectionSPos.x+1,o=this.htMap.length;if(s==o){for(var t=0,n=i.length;t<n;t++){e=i[t];if(!this.htMap[0][t]||!this.htMap[0][t].parentNode||this.htMap[0][t].parentNode.tagName!=="TR"){var r=jindo.$Agent().navigator();r.ie&&(r.nativeVersion==9||r.nativeVersion==10)&&(r.version==9||r.version==10)&&this._removeEmptyTextNode_IE(e),e.parentNode.removeChild(e)}}i=jindo.$$(">TBODY>TR",this.elSelectionStartTable,{oneTimeOffCache:!0})}i.length<1&&this.elSelectionStartTable.parentNode.removeChild(this.elSelectionStartTable),this._updateSelection()},_insertColumnAfter:function(){this._removeClassFromSelection(),this._hideTableTemplate(this.elSelectionStartTable);var e=jindo.$$(">TBODY>TR",this.elSelectionStartTable,{oneTimeOffCache:!0}),t,n="_tmp_inserted",r,i,s,o,u=jindo.$Agent().navigator();for(var a=0,f=this.htMap[0].length;a<f;a++){s=e[a];for(var l=this.htSelectionEPos.x;l>=this.htSelectionSPos.x;l--){r=this.htMap[l][a],i=this._shallowCloneTD(r);var c=parseInt(r.getAttribute("rowSpan"));c>1&&(i.setAttribute("rowSpan",1),i.style.height=""),c=parseInt(r.getAttribute("colSpan")),c>1&&(i.setAttribute("colSpan",1),i.style.width=""),o=null;for(var h=this.htSelectionEPos.x;h>=this.htSelectionSPos.x;h--)if(this.htMap[h][a].parentNode==s){o=this.htMap[h][a].nextSibling;break}s.insertBefore(i,o),u.ie&&(u.nativeVersion>=9||u.nativeVersion<=11)&&(u.version>=9||u.version<=11)&&(i.style.cssText=i.style.cssText)}}for(var p=0,d=this.aSelectedCells.length;p<d;p++)this.aSelectedCells[p].removeAttribute(n);var v=this.htSelectionEPos.x-this.htSelectionSPos.x+1,m=this.htSelectionEPos.y-this.htSelectionSPos.y+1;this.htSelectionSPos.x+=v,this.htSelectionEPos.x+=v,this.htMap=this._getCellMapping(this.elSelectionStartTable),this._selectCells(this.htSelectionSPos,this.htSelectionEPos),this._showTableTemplate(this.elSelectionStartTable),this._addClassToSelection(),this.sQEAction="INSERT_TABLE_COLUMN",this.oApp.exec("SHOW_COMMON_QE")},_insertRowBelow:function(){this._selectAll_Row(),this._removeClassFromSelection(),this._hideTableTemplate(this.elSelectionStartTable);var e,t=this.htMap[0][0].parentNode.parentNode,n=jindo.$$(">TR",t,{oneTimeOffCache:!0}),r=n[this.htSelectionEPos.y+1]||null,i=jindo.$Agent().navigator();for(var s=this.htSelectionSPos.y;s<=this.htSelectionEPos.y;s++){e=this._getTRCloneWithAllTD(s),t.insertBefore(e,r);if(i.ie&&(i.nativeVersion>=9||i.nativeVersion<=11)&&(i.version>=9||i.version<=11)){var o=this.htMap[0][s].parentNode,u=o.childNodes,a=[];for(var f=0,l=u.length;f<l;f++)this._rxCellNames.test(u[f].nodeName)&&a.push(u[f].cloneNode());var c=e.childNodes;for(var f=0,l=c.length;f<l;f++){var h=c[f],p=a[f];this._rxCellNames.test(h.nodeName)&&p&&this._rxCellNames.test(p.nodeName)&&(h.style.cssText=p.style.cssText)}}}var d=this.htSelectionEPos.x-this.htSelectionSPos.x+1,v=this.htSelectionEPos.y-this.htSelectionSPos.y+1;this.htSelectionSPos.y+=v,this.htSelectionEPos.y+=v,this.htMap=this._getCellMapping(this.elSelectionStartTable),this._selectCells(this.htSelectionSPos,this.htSelectionEPos),this._showTableTemplate(this.elSelectionStartTable),this._addClassToSelection(),this.sQEAction="INSERT_TABLE_ROW",this.oApp.exec("SHOW_COMMON_QE")},_updateSelection:function(){this.aSelectedCells=jindo.$A(this.aSelectedCells).filter(function(e){return e.parentNode!==null&&e.parentNode.parentNode!==null}).$value()},_startCellSelection:function(){this.htMap=this._getCellMapping(this.elSelectionStartTable),this.oApp.getEmptySelection().oBrowserSelection.selectNone();if(this.oApp.oNavigator.safari||this.oApp.oNavigator.chrome)this.oApp.getWYSIWYGDocument().onselectstart=function(){return!1};var e=this.oApp.getWYSIWYGWindow().frameElement;this.htEditingAreaPos=jindo.$Element(e).offset(),this.htEditingAreaPos.height=e.offsetHeight,this.htEditingAreaPos.bottom=this.htEditingAreaPos.top+this.htEditingAreaPos.height,this.htEditingAreaPos.width=e.offsetWidth,this.htEditingAreaPos.right=this.htEditingAreaPos.left+this.htEditingAreaPos.width,this._changeTableEditorStatus(this.STATUS.CELL_SELECTING)},_selectBetweenCells:function(e,t){this._deselectCells();var n=this._getBasisCellPosition(e),r=this._getBasisCellPosition(t);this._setEndPos(n),this._setEndPos(r);var i={},s={};i.x=Math.min(n.x,n.ex,r.x,r.ex),i.y=Math.min(n.y,n.ey,r.y,r.ey),s.x=Math.max(n.x,n.ex,r.x,r.ex),s.y=Math.max(n.y,n.ey,r.y,r.ey),this._selectCells(i,s)},_getNextCell:function(e){while(e){e=e.nextSibling;if(e&&e.tagName&&e.tagName.match(/^TD|TH$/))return e}return null},_getCellMapping:function(e){var t=jindo.$$(">TBODY>TR",e,{oneTimeOffCache:!0}),n=0,r=t[0].childNodes;for(var i=0;i<r.length;i++){var s=r[i];if(!s.tagName||!s.tagName.match(/^TD|TH$/))continue;s.getAttribute("colSpan")?n+=this.parseIntOr0(s.getAttribute("colSpan")):n++}var o=n,u=t.length,a=new Array(o);for(var f=0;f<o;f++)a[f]=new Array(u);for(var l=0;l<u;l++){var c=t[l].childNodes[0];if(!c)continue;if(!c.tagName||!c.tagName.match(/^TD|TH$/))c=this._getNextCell(c);var f=-1;while(c){f++,a[f]||(a[f]=[]);if(a[f][l])continue;var h=parseInt(c.getAttribute("colSpan"),10)||1,p=parseInt(c.getAttribute("rowSpan"),10)||1;for(var d=0;d<p;d++)for(var v=0;v<h;v++)a[f+v]||(a[f+v]=[]),a[f+v][l+d]=c;c=this._getNextCell(c)}}var m=!1,g=null;for(var l=0,y=0,b=a[0].length;l<b;l++,y++){g=null;if(!t[l].innerHTML.match(/TD|TH/i)){for(var f=0,w=a.length;f<w;f++){c=a[f][l];if(!c||c===g)continue;g=c;var p=parseInt(c.getAttribute("rowSpan"),10)||1;p>1&&c.setAttribute("rowSpan",p-1)}var E=jindo.$Agent().navigator();E.ie&&(E.nativeVersion==9||E.nativeVersion==10)&&(E.version==9||E.version==10)&&this._removeEmptyTextNode_IE(t[l]),t[l].parentNode.removeChild(t[l]),this.htSelectionEPos.y>=y&&(y--,this.htSelectionEPos.y--),m=!0}}return m?this._getCellMapping(e):a},_selectCells:function(e,t){this.aSelectedCells=this._getSelectedCells(e,t),this._addClassToSelection()},_deselectCells:function(){this._removeClassFromSelection(),this.aSelectedCells=[],this.htSelectionSPos={x:-1,y:-1},this.htSelectionEPos={x:-1,y:-1}},_addClassToSelection:function(){var e,t;for(var n=0;n<this.aSelectedCells.length;n++)t=this.aSelectedCells[n],t&&(t.ondragstart==null&&(t.ondragstart=function(){return!1}),e=jindo.$Element(t),e.addClass(this.CELL_SELECTION_CLASS),e.addClass("undraggable"),t.style.backgroundColor&&(t.setAttribute(this.TMP_BGC_ATTR,t.style.backgroundColor),e.css("backgroundColor","")),t.style.backgroundImage&&(t.setAttribute(this.TMP_BGIMG_ATTR,t.style.backgroundImage),e.css("backgroundImage","")))},_removeClassFromSelection:function(){var e,t;for(var n=0;n<this.aSelectedCells.length;n++)t=this.aSelectedCells[n],t&&(e=jindo.$Element(t),e.removeClass(this.CELL_SELECTION_CLASS),e.removeClass("undraggable"),t.getAttribute(this.TMP_BGC_ATTR)&&(t.style.backgroundColor=t.getAttribute(this.TMP_BGC_ATTR),t.removeAttribute(this.TMP_BGC_ATTR)),t.getAttribute(this.TMP_BGIMG_ATTR)&&(e.css("backgroundImage",t.getAttribute(this.TMP_BGIMG_ATTR)),t.removeAttribute(this.TMP_BGIMG_ATTR)))},_expandAndSelect:function(e,t){var n,r,i,s,o;if(e.y>0)for(n=e.x;n<=t.x;n++){i=this.htMap[n][e.y];if(this.htMap[n][e.y-1]==i){s=e.y-2;while(s>=0&&this.htMap[n][s]==i)s--;e.y=s+1,this._expandAndSelect(e,t);return}}if(e.x>0)for(r=e.y;r<=t.y;r++){i=this.htMap[e.x][r];if(this.htMap[e.x-1][r]==i){s=e.x-2;while(s>=0&&this.htMap[s][r]==i)s--;e.x=s+1,this._expandAndSelect(e,t);return}}if(t.y<this.htMap[0].length-1)for(n=e.x;n<=t.x;n++){i=this.htMap[n][t.y];if(this.htMap[n][t.y+1]==i){s=t.y+2;while(s<this.htMap[0].length&&this.htMap[n][s]==i)s++;t.y=s-1,this._expandAndSelect(e,t);return}}if(t.x<this.htMap.length-1)for(r=e.y;r<=t.y;r++){i=this.htMap[t.x][r];if(this.htMap[t.x+1][r]==i){s=t.x+2;while(s<this.htMap.length&&this.htMap[s][r]==i)s++;t.x=s-1,this._expandAndSelect(e,t);return}}},_getSelectedCells:function(e,t){this._expandAndSelect(e,t);var n=e.x,r=e.y,i=t.x,s=t.y;this.htSelectionSPos=e,this.htSelectionEPos=t;var o=[];for(var u=r;u<=s;u++)for(var a=n;a<=i;a++){if(jindo.$A(o).has(this.htMap[a][u]))continue;o[o.length]=this.htMap[a][u]}return o},_setEndPos:function(e){var t,n;t=parseInt(e.elCell.getAttribute("colSpan"),10)||1,n=parseInt(e.elCell.getAttribute("rowSpan"),10)||1,e.ex=e.x+t-1,e.ey=e.y+n-1},_getBasisCellPosition:function(e){var t=0,n=0;for(t=0;t<this.htMap.length;t++)for(n=0;n<this.htMap[t].length;n++)if(this.htMap[t][n]==e)return{x:t,y:n,elCell:e};return{x:0,y:0,elCell:e}},_applyTableTemplate:function(e,t){if(!e)return;this._clearAllTableStyles(e),this._doApplyTableTemplate(e,nhn.husky.SE2M_TableTemplate[t],!1),e.setAttribute(this.ATTR_TBL_TEMPLATE,t)},_clearAllTableStyles:function(e){e.removeAttribute("border"),e.removeAttribute("cellPadding"),e.removeAttribute("cellSpacing"),e.style.padding="",e.style.border="",e.style.backgroundColor="",e.style.color="";var t=jindo.$$(">TBODY>TR>TD",e,{oneTimeOffCache:!0});for(var n=0,r=t.length;n<r;n++)t[n].style.padding="",t[n].style.border="",t[n].style.backgroundColor="",t[n].style.color="";var i=jindo.$$(">TBODY>TR>TH",e,{oneTimeOffCache:!0});for(var n=0,r=i.length;n<r;n++)i[n].style.padding="",i[n].style.border="",i[n].style.backgroundColor="",i[n].style.color=""},_hideTableTemplate:function(e){e.getAttribute(this.ATTR_TBL_TEMPLATE)&&this._doApplyTableTemplate(e,nhn.husky.SE2M_TableTemplate[this.parseIntOr0(e.getAttribute(this.ATTR_TBL_TEMPLATE))],!0)},_showTableTemplate:function(e){e.getAttribute(this.ATTR_TBL_TEMPLATE)&&this._doApplyTableTemplate(e,nhn.husky.SE2M_TableTemplate[this.parseIntOr0(e.getAttribute(this.ATTR_TBL_TEMPLATE))],!1)},_doApplyTableTemplate:function(e,t,n){var r=t.htTableProperty,i=t.htTableStyle,s=t.ht1stRowStyle,o=t.ht1stColumnStyle,u=t.aRowStyle,a;r&&this._copyAttributesTo(e,r,n),i&&this._copyStylesTo(e,i,n);var f=jindo.$$(">TBODY>TR",e,{oneTimeOffCache:!0}),l=0;if(s){var l=1;for(var c=0,h=f[0].childNodes.length;c<h;c++){a=f[0].childNodes[c];if(!a.tagName||!a.tagName.match(/^TD|TH$/))continue;this._copyStylesTo(a,s,n)}}var p,d;if(o){var v=s?1:0;for(var m=v,g=f.length;m<g;)d=f[m].firstChild,p=1,d&&d.tagName.match(/^TD|TH$/)&&(p=parseInt(d.getAttribute("rowSpan"),10)||1,this._copyStylesTo(d,o,n)),m+=p}if(u){var y=u.length;for(var m=l,g=f.length;m<g;m++)for(var c=0,h=f[m].childNodes.length;c<h;c++){var a=f[m].childNodes[c];if(!a.tagName||!a.tagName.match(/^TD|TH$/))continue;this._copyStylesTo(a,u[(m+l)%y],n)}}},_copyAttributesTo:function(e,t,n){var r;for(var i in t)t.hasOwnProperty(i)&&(n?e[i]&&(r=document.createElement(e.tagName),r[i]=t[i],r[i]==e[i]&&e.removeAttribute(i)):(r=document.createElement(e.tagName),r.style[i]="",(!e[i]||e.style[i]==r.style[i])&&e.setAttribute(i,t[i])))},_copyStylesTo:function(e,t,n){var r;for(var i in t)if(t.hasOwnProperty(i))if(n)e.style[i]&&(r=document.createElement(e.tagName),r.style[i]=t[i],r.style[i]==e.style[i]&&(e.style[i]=""));else{r=document.createElement(e.tagName),r.style[i]="";if(!e.style[i]||e.style[i]==r.style[i]||i.match(/^border/))e.style[i]=t[i]}},_hideResizer:function(){this.elResizeGrid.style.display="none"},_showResizer:function(){this.elResizeGrid.style.display="block"},_setResizerSize:function(e,t){this.elResizeGrid.style.width=e+"px",this.elResizeGrid.style.height=t+"px"},parseBorder:function(e,t){if(t=="none")return 0;var n=parseInt(e,10);return isNaN(n)&&typeof e=="string"?1:n},parseIntOr0:function(e){return e=parseInt(e,10),isNaN(e)?0:e},_getTRCloneWithAllTD:function(e){var t=this.htMap[0][e].parentNode.cloneNode(!1),n,r;for(var i=0,s=this.htMap.length;i<s;i++)n=this.htMap[i][e],this._rxCellNames.test(n.tagName)&&(r=this._shallowCloneTD(n),r.setAttribute("rowSpan",1),r.setAttribute("colSpan",1),r.style.width="",r.style.height="",t.insertBefore(r,null));return t},_shallowCloneTD:function(e){var t=e.cloneNode(!1);return t.innerHTML=this.sEmptyTDSrc,t},_isValidTable:function(e){if(!e||!e.tagName||e.tagName!="TABLE")return!1;this.htMap=this._getCellMapping(e);var t=this.htMap.length;if(t<1)return!1;var n=this.htMap[0].length;if(n<1)return!1;for(var r=1;r<t;r++){if(this.htMap[r].length!=n||!this.htMap[r][n-1])return!1;for(var i=0;i<n;i++)if(!this.htMap[r]||!this.htMap[r][i])return!1}return!0},addCSSClass:function(e,t){var n=this.oApp.getWYSIWYGDocument();if(n.styleSheets[0]&&n.styleSheets[0].addRule)n.styleSheets[0].addRule("."+e,t);else{var r=n.getElementsByTagName("HEAD")[0],i=n.createElement("STYLE");r.appendChild(i),i.sheet.insertRule("."+e+" { "+t+" }",0)}},_removeEmptyTextNode_IE:function(e){var t=e.nextSibling;t&&t.nodeType==3&&!/\S/.test(t.nodeValue)&&e.parentNode.removeChild(t)}}),nhn.husky.HuskyCore.addLoadedFile("hp_SE2M_BGColor$Lazy.js"),nhn.husky.HuskyCore.mixin(nhn.husky.SE2M_BGColor,{$ON_TOGGLE_BGCOLOR_LAYER:function(){this.oApp.exec("TOGGLE_TOOLBAR_ACTIVE_LAYER",[this.elDropdownLayer,null,"BGCOLOR_LAYER_SHOWN",[],"BGCOLOR_LAYER_HIDDEN",[]]),this.oApp.exec("MSG_NOTIFY_CLICKCR",["bgcolor"])},$ON_BGCOLOR_LAYER_SHOWN:function(){this.oApp.exec("SELECT_UI",["BGColorB"]),this.oApp.exec("SHOW_COLOR_PALETTE",["APPLY_BGCOLOR",this.elPaletteHolder])},$ON_BGCOLOR_LAYER_HIDDEN:function(){this.oApp.exec("DESELECT_UI",["BGColorB"]),this.oApp.exec("RESET_COLOR_PALETTE",[])},$ON_EVENT_APPLY_BGCOLOR:function(e){var t=e.element;while(t.tagName=="SPAN")t=t.parentNode;if(t.tagName!="BUTTON")return;var n,r;n=t.style.backgroundColor,r=t.style.color,this.oApp.exec("APPLY_BGCOLOR",[n,r])},$ON_APPLY_LAST_USED_BGCOLOR:function(){this.oApp.exec("APPLY_BGCOLOR",[this.sLastUsedColor]),this.oApp.exec("MSG_NOTIFY_CLICKCR",["bgcolor"])},$ON_APPLY_BGCOLOR:function(e,t){if(!this.rxColorPattern.test(e)){alert(this.oApp.$MSG("SE_Color.invalidColorCode"));return}this._setLastUsedBGColor(e);var n={backgroundColor:e};t&&(n.color=t),this.oApp.exec("SET_WYSIWYG_STYLE",[n]),this.oApp.exec("HIDE_ACTIVE_LAYER")}}),nhn.husky.HuskyCore.addLoadedFile("hp_SE2M_FontColor$Lazy.js"),nhn.husky.HuskyCore.mixin(nhn.husky.SE2M_FontColor,{$ON_TOGGLE_FONTCOLOR_LAYER:function(){this.oApp.exec("TOGGLE_TOOLBAR_ACTIVE_LAYER",[this.elDropdownLayer,null,"FONTCOLOR_LAYER_SHOWN",[],"FONTCOLOR_LAYER_HIDDEN",[]]),this.oApp.exec("MSG_NOTIFY_CLICKCR",["fontcolor"])},$ON_FONTCOLOR_LAYER_SHOWN:function(){this.oApp.exec("SELECT_UI",["fontColorB"]),this.oApp.exec("SHOW_COLOR_PALETTE",["APPLY_FONTCOLOR",this.elPaletteHolder])},$ON_FONTCOLOR_LAYER_HIDDEN:function(){this.oApp.exec("DESELECT_UI",["fontColorB"]),this.oApp.exec("RESET_COLOR_PALETTE",[])},$ON_APPLY_LAST_USED_FONTCOLOR:function(){this.oApp.exec("APPLY_FONTCOLOR",[this.sLastUsedColor]),this.oApp.exec("MSG_NOTIFY_CLICKCR",["fontcolor"])},$ON_APPLY_FONTCOLOR:function(e){if(!this.rxColorPattern.test(e)){alert(this.oApp.$MSG("SE_FontColor.invalidColorCode"));return}this._setLastUsedFontColor(e),this.oApp.exec("SET_WYSIWYG_STYLE",[{color:e}]),this.oApp.exec("HIDE_ACTIVE_LAYER")}}),nhn.husky.HuskyCore.addLoadedFile("hp_SE2M_Hyperlink$Lazy.js"),nhn.husky.HuskyCore.mixin(nhn.husky.SE2M_Hyperlink,{$ON_TOGGLE_HYPERLINK_LAYER:function(){this.bLayerShown||(this.oApp.exec("IE_FOCUS",[]),this.oSelection=this.oApp.getSelection()),this.oApp.delayedExec("TOGGLE_TOOLBAR_ACTIVE_LAYER",[this.oHyperlinkLayer,null,"MSG_HYPERLINK_LAYER_SHOWN",[],"MSG_HYPERLINK_LAYER_HIDDEN",[""]],0),this.oApp.exec("MSG_NOTIFY_CLICKCR",["hyperlink"])},$ON_MSG_HYPERLINK_LAYER_SHOWN:function(){this.bLayerShown=!0;var e=this.oSelection.findAncestorByTagName("A");e||(e=this._getSelectedNode());if(e&&!this.oSelection.collapsed){this.oSelection.selectNode(e),this.oSelection.select();var t=e.target;try{var n=e.getAttribute("href");this.oLinkInput.value=n&&n.indexOf("#")==-1?n:"http://"}catch(r){this.oLinkInput.value="http://"}this.bModify=!0}else this.oLinkInput.value="http://",this.bModify=!1;this.oApp.delayedExec("SELECT_UI",["hyperlink"],0),this.oLinkInput.focus(),this.oLinkInput.value=this.oLinkInput.value,this.oLinkInput.select()},$ON_MSG_HYPERLINK_LAYER_HIDDEN:function(){this.bLayerShown=!1,this.oApp.exec("DESELECT_UI",["hyperlink"])},_validateTarget:function(){var e=jindo.$Agent().navigator(),t=!0;return e.ie&&jindo.$A(this.oSelection.getNodes(!0)).forEach(function(e,n,r){!!e&&e.nodeType==1&&e.tagName.toLowerCase()=="iframe"&&e.getAttribute("s_type").toLowerCase()=="db"&&(t=!1,jindo.$A.Break()),jindo.$A.Continue()},this),t},$ON_APPLY_HYPERLINK:function(){if(!this._validateTarget()){alert(this.oApp.$MSG("SE_Hyperlink.invalidTarget"));return}var e=this.oLinkInput.value;/^((http|https|ftp|mailto):(?:\/\/)?)/.test(e)||(e="http://"+e),e=e.replace(/\s+$/,"");var t=jindo.$Agent().navigator(),n="";this.oApp.exec("IE_FOCUS",[]),t.ie&&(n='<span style="text-decoration:none;">&nbsp;</span>');if(this._validateURL(e)){sTarget="_blank",this.oApp.exec("RECORD_UNDO_BEFORE_ACTION",["HYPERLINK",{sSaveTarget:this.bModify?"A":null}]);var r;if(this.oSelection.collapsed){var i="<a href='"+e+"' target="+sTarget+">"+e+"</a>"+n;this.oSelection.pasteHTML(i),r=this.oSelection.placeStringBookmark()}else{r=this.oSelection.placeStringBookmark(),this.oSelection.select(),t.ie&&(t.version===8||t.nativeVersion===8)&&(this.oApp.exec("IE_FOCUS",[]),this.oSelection.moveToBookmark(r),this.oSelection.select());var s=Math.ceil(Math.random()*1e4);if(e=="")this.oApp.exec("EXECCOMMAND",["unlink"]);else if(this._isExceptional()){this.oApp.exec("EXECCOMMAND",["unlink",!1,"",{bDontAddUndoHistory:!0}]);var o="<a href='"+e+"' target="+sTarget+">";jindo.$A(this.oSelection.getNodes(!0)).forEach(function(e,t,n){var r=this.oApp.getEmptySelection();e.nodeType===3?(r.selectNode(e),r.pasteHTML(o+e.nodeValue+"</a>")):e.nodeType===1&&e.tagName==="IMG"&&(r.selectNode(e),r.pasteHTML(o+jindo.$Element(e).outerHTML()+"</a>"))},this)}else this.oApp.exec("EXECCOMMAND",["createLink",!1,this.sATagMarker+s+encodeURIComponent(e),{bDontAddUndoHistory:!0}]);var u=this.oApp.getWYSIWYGDocument(),a=u.body.getElementsByTagName("A"),f=a.length,l=new RegExp(this.sRXATagMarker+s,"gi"),c;for(var h=0;h<f;h++){c=a[h];var p="";try{p=c.getAttribute("href")}catch(d){}if(p&&p.match(l)){var v=p.replace(l,""),m=decodeURIComponent(v);if(t.ie)jindo.$Element(c).attr({href:m,target:sTarget});else{var g=jindo.$Element(c).html();jindo.$Element(c).attr({href:m,target:sTarget}),this._validateURL(g)&&jindo.$Element(c).html(jindo.$Element(c).attr("href"))}}}}this.oApp.exec("HIDE_ACTIVE_LAYER"),setTimeout(jindo.$Fn(function(){var e=this.oApp.getEmptySelection();e.moveToBookmark(r),e.collapseToEnd(),e.select(),e.removeStringBookmark(r),this.oApp.exec("FOCUS"),this.oApp.exec("RECORD_UNDO_AFTER_ACTION",["HYPERLINK",{sSaveTarget:this.bModify?"A":null}])},this).bind(),17)}else alert(this.oApp.$MSG("SE_Hyperlink.invalidURL")),this.oLinkInput.focus()},_isExceptional:function(){var e=jindo.$Agent().navigator(),t=!1,n=!1;if(!e.ie)return!1;if(this.oApp.getWYSIWYGDocument().selection&&this.oApp.getWYSIWYGDocument().selection.type==="None"){t=jindo.$A(this.oSelection.getNodes()).some(function(e,t,n){if(e.nodeType===1&&e.tagName==="IMG")return!0},this);if(t)return!0}return e.nativeVersion>8?!1:(n=jindo.$A(this.oSelection.getTextNodes()).some(function(e,t,n){if(e.nodeValue.indexOf("@")>=1)return!0},this),n?!0:!1)},_getSelectedNode:function(){var e=this.oSelection.getNodes();for(var t=0;t<e.length;t++)if(e[t].tagName&&e[t].tagName=="A")return e[t]},_validateURL:function(e){if(!e)return!1;try{var t=e.split("?");t[0]=t[0].replace(/%[a-z0-9]{2}/gi,"U"),decodeURIComponent(t[0])}catch(n){return!1}return/^(http|https|ftp|mailto):(\/\/)?(([-\uac00-\ud7a3]|\w)+(?:[\/\.:@]([-\uac00-\ud7a3]|\w)+)+)\/?(.*)?\s*$/i.test(e)}}),nhn.husky.HuskyCore.addLoadedFile("hp_SE2M_LineHeightWithLayerUI$Lazy.js"),nhn.husky.HuskyCore.mixin(nhn.husky.SE2M_LineHeightWithLayerUI,{_assignHTMLObjects:function(e){this.oDropdownLayer=jindo.$$.getSingle("DIV.husky_se2m_lineHeight_layer",e),this.aLIOptions=jindo.$A(jindo.$$("LI",this.oDropdownLayer)).filter(function(e,t,n){return e.firstChild!==null})._array,this.oInput=jindo.$$.getSingle("INPUT",this.oDropdownLayer);var t=jindo.$$.getSingle(".husky_se2m_lineHeight_direct_input",this.oDropdownLayer);t=jindo.$$("BUTTON",t),this.oBtn_up=t[0],this.oBtn_down=t[1],this.oBtn_ok=t[2],this.oBtn_cancel=t[3]},$LOCAL_BEFORE_FIRST:function(){this._assignHTMLObjects(this.oApp.htOptions.elAppContainer),this.oApp.exec("SE2_ATTACH_HOVER_EVENTS",[this.aLIOptions]);for(var e=0;e<this.aLIOptions.length;e++)this.oApp.registerBrowserEvent(this.aLIOptions[e],"click","SET_LINEHEIGHT_FROM_LAYER_UI",[this._getLineHeightFromLI(this.aLIOptions[e])]);this.oApp.registerBrowserEvent(this.oBtn_up,"click","SE2M_INC_LINEHEIGHT",[]),this.oApp.registerBrowserEvent(this.oBtn_down,"click","SE2M_DEC_LINEHEIGHT",[]),this.oApp.registerBrowserEvent(this.oBtn_ok,"click","SE2M_SET_LINEHEIGHT_FROM_DIRECT_INPUT",[]),this.oApp.registerBrowserEvent(this.oBtn_cancel,"click","SE2M_CANCEL_LINEHEIGHT",[]),this.oApp.registerBrowserEvent(this.oInput,"keydown","EVENT_SE2M_LINEHEIGHT_KEYDOWN")},$ON_EVENT_SE2M_LINEHEIGHT_KEYDOWN:function(e){e.key().enter&&(this.oApp.exec("SE2M_SET_LINEHEIGHT_FROM_DIRECT_INPUT"),e.stop())},$ON_SE2M_TOGGLE_LINEHEIGHT_LAYER:function(){this.oApp.exec("TOGGLE_TOOLBAR_ACTIVE_LAYER",[this.oDropdownLayer,null,"LINEHEIGHT_LAYER_SHOWN",[],"LINEHEIGHT_LAYER_HIDDEN",[]]),this.oApp.exec("MSG_NOTIFY_CLICKCR",["lineheight"])},$ON_SE2M_INC_LINEHEIGHT:function(){this.oInput.value=parseInt(this.oInput.value,10)||this.MIN_LINE_HEIGHT,this.oInput.value++},$ON_SE2M_DEC_LINEHEIGHT:function(){this.oInput.value=parseInt(this.oInput.value,10)||this.MIN_LINE_HEIGHT,this.oInput.value>this.MIN_LINE_HEIGHT&&this.oInput.value--},$ON_LINEHEIGHT_LAYER_SHOWN:function(){this.oApp.exec("SELECT_UI",["lineHeight"]),this.oInitialSelection=this.oApp.getSelection();var e=this.oApp.getLineStyle("lineHeight");if(e!=null&&e!==0){this.oInput.value=(e*100).toFixed(0);var t=this._getMatchingLI(this.oInput.value+"%");t&&jindo.$Element(t.firstChild).addClass("active")}else this.oInput.value=""},$ON_LINEHEIGHT_LAYER_HIDDEN:function(){this.oApp.exec("DESELECT_UI",["lineHeight"]),this._clearOptionSelection()},$ON_SE2M_SET_LINEHEIGHT_FROM_DIRECT_INPUT:function(){var e=parseInt(this.oInput.value,10),t=e<this.MIN_LINE_HEIGHT?this.MIN_LINE_HEIGHT:e;this._setLineHeightAndCloseLayer(t)},$ON_SET_LINEHEIGHT_FROM_LAYER_UI:function(e){this._setLineHeightAndCloseLayer(e)},$ON_SE2M_CANCEL_LINEHEIGHT:function(){this.oInitialSelection.select(),this.oApp.exec("HIDE_ACTIVE_LAYER")},_setLineHeightAndCloseLayer:function(e){var t=parseInt(e,10)/100;t>0?this.oApp.exec("SET_LINE_STYLE",["lineHeight",t]):alert(this.oApp.$MSG("SE_LineHeight.invalidLineHeight")),this.oApp.exec("SE2M_TOGGLE_LINEHEIGHT_LAYER",[]);var n=jindo.$Agent().navigator();(n.chrome||n.safari)&&this.oApp.exec("FOCUS")},_getMatchingLI:function(e){var t;e=e.toLowerCase();for(var n=0;n<this.aLIOptions.length;n++){t=this.aLIOptions[n];if(this._getLineHeightFromLI(t).toLowerCase()==e)return t}return null},_getLineHeightFromLI:function(e){return e.firstChild.firstChild.innerHTML},_clearOptionSelection:function(e){for(var t=0;t<this.aLIOptions.length;t++)jindo.$Element(this.aLIOptions[t].firstChild).removeClass("active")}}),nhn.husky.HuskyCore.addLoadedFile("hp_SE2M_QuickEditor_Common$Lazy.js"),nhn.husky.HuskyCore.mixin(nhn.husky.SE2M_QuickEditor_Common,{setOpenType:function(e,t){if(typeof this._environmentData=="undefined"||this._environmentData==null)this._environmentData={};if(typeof this._environmentData[e]=="undefined"||this._environmentData[e]==null)this._environmentData[e]={};if(typeof this._environmentData[e].isOpen=="undefined"||this._environmentData[e].isOpen==null)this._environmentData[e].isOpen=!0;this._environmentData[e].isOpen=t},$ON_OPEN_QE_LAYER:function(e,t,n){if(this.waHotkeys.length()>0&&!this.waHotkeyLayers.has(t)){this.waHotkeyLayers.push(t);var r;for(var i=0,s=this.waHotkeys.length();i<s;i++)r=this.waHotkeys.get(i),this.oApp.exec("ADD_HOTKEY",[r[0],r[1],r[2],t])}var o=n;o&&(this.targetEle=e,this.currentEle=t,this.layer_show(o,e))},$ON_CLOSE_QE_LAYER:function(e){if(!this.currentEle)return;this.oApp.exec("CLOSE_SUB_LAYER_QE"),this.layer_hide(e)},$LOCAL_BEFORE_FIRST:function(e){if(!e.match(/OPEN_QE_LAYER/))return this.oApp.acceptLocalBeforeFirstAgain(this,!0),e.match(/REGISTER_HOTKEY/)?!0:!1;this.woEditor=jindo.$Element(this.oApp.elEditingAreaContainer),this.woStandard=jindo.$Element(this.oApp.htOptions.elAppContainer).offset(),this._qe_wrap=jindo.$$.getSingle("DIV.quick_wrap",this.oApp.htOptions.elAppContainer);var t=this;(new jindo.DragArea(this._qe_wrap,{sClassName:"q_dragable",bFlowOut:!1,nThreshold:1})).attach({beforeDrag:function(e){e.elFlowOut=e.elArea.parentNode},dragStart:function(e){jindo.$Element(e.elDrag).hasClass("se2_qmax")||(e.elDrag=e.elDrag.parentNode),t.oApp.exec("SHOW_EDITING_AREA_COVER")},dragEnd:function(e){t.changeFixedMode(),t._in_event=!1;var n=jindo.$Element(e.elDrag);t._environmentData[t._currentType].position=[n.css("top"),n.css("left")],t.oApp.exec("HIDE_EDITING_AREA_COVER")}});var n=jindo.$Fn(this.toggle,this).bind("img"),r=jindo.$Fn(this.toggle,this).bind("table");jindo.$Fn(n,this).attach(jindo.$$.getSingle(".q_open_img_fold",this.oApp.htOptions.elAppContainer),"click"),jindo.$Fn(n,this).attach(jindo.$$.getSingle(".q_open_img_full",this.oApp.htOptions.elAppContainer),"click"),jindo.$Fn(r,this).attach(jindo.$$.getSingle(".q_open_table_fold",this.oApp.htOptions.elAppContainer),"click"),jindo.$Fn(r,this).attach(jindo.$$.getSingle(".q_open_table_full",this.oApp.htOptions.elAppContainer),"click")},toggle:function(e,t){e=this._currentType,this.oApp.exec("CLOSE_QE_LAYER",[t]),this._environmentData[e].type=="full"?this._environmentData[e].type="fold":this._environmentData[e].type="full",this._environmentData&&this._bUseConfig&&jindo.$Ajax(this._sAddTextAjaxUrl,{type:"jsonp",onload:function(){}}).request({text_key:"qeditor_fold",text_data:"{table:'"+this._environmentData.table.type+"',img:'"+this._environmentData.img.type+"',review:'"+this._environmentData.review.type+"'}"}),this.oApp.exec("OPEN_QE_LAYER",[this.targetEle,this.currentEle,e]),this._in_event=!1,t.stop(jindo.$Event.CANCEL_DEFAULT)},positionCopy:function(e,t,n){jindo.$Element(jindo.$$.getSingle("._"+n,this.currentEle)).css({top:t,left:e})},changeFixedMode:function(){this._environmentData[this._currentType].isFixed=!0},$ON_HIDE_ACTIVE_LAYER:function(){this.oApp.exec("CLOSE_QE_LAYER")},$ON_EVENT_EDITING_AREA_MOUSEDOWN:function(e){this._currentType&&!this._in_event&&this._environmentData[this._currentType].isOpen&&this.oApp.exec("CLOSE_QE_LAYER",[e]),this._in_event=!1},$ON_EVENT_EDITING_AREA_MOUSEWHEEL:function(e){this._currentType&&!this._in_event&&this._environmentData[this._currentType].isOpen&&this.oApp.exec("CLOSE_QE_LAYER",[e]),this._in_event=!1},get_type:function(e){var t=e.tagName.toLowerCase();if(this.waTableTagNames.has(t))return"table";if(t=="img")return"img"},$ON_QE_IN_KEYUP:function(){this._in_event=!0},$ON_QE_IN_MOUSEDOWN:function(){this._in_event=!0},$ON_QE_IN_MOUSEWHEEL:function(){this._in_event=!0},layer_hide:function(e){this.setOpenType(this._currentType,!1),jindo.$Element(jindo.$$.getSingle("._"+this._environmentData[this._currentType].type,this.currentEle)).hide()},lazy_common:function(){this.oApp.registerBrowserEvent(jindo.$(this._qe_wrap),"keyup","QE_IN_KEYUP"),this.oApp.registerBrowserEvent(jindo.$(this._qe_wrap),"mousedown","QE_IN_MOUSEDOWN"),this.oApp.registerBrowserEvent(jindo.$(this._qe_wrap),"mousewheel","QE_IN_MOUSEWHEEL"),this.lazy_common=function(){}},layer_show:function(e,t){this._currentType=e,this.setOpenType(this._currentType,!0);var n=jindo.$$.getSingle("._"+this._environmentData[this._currentType].type,this.currentEle);jindo.$Element(n).show().css(this.get_position_layer(t,n)),this.lazy_common()},get_position_layer:function(e,t){if(!this.isCurrentFixed()||this._environmentData[this._currentType].type=="fold")return this.calculateLayer(e,t);var n=this._environmentData[this._currentType].position,r=parseInt(n[0],10),i=this.getAppPosition().h,s=jindo.$Element(t).height();return r+s+this.nYGap>i&&(r=i-s,this._environmentData[this._currentType].position[0]=r),{top:r+"px",left:n[1]}},isCurrentFixed:function(){return this._environmentData[this._currentType].isFixed},calculateLayer:function(e,t){var n=this.getPositionInfo(e,t);return{top:n.y+"px",left:n.x+"px"}},getPositionInfo:function(e,t){this.nYGap=jindo.$Agent().navigator().ie?-16:-18,this.nXGap=1;var n={},r=this.getElementPosition(e,t),i=this.getAppPosition(),s={w:jindo.$Element(t).width(),h:jindo.$Element(t).height()};return r.x+s.w+this.nXGap>i.w?n.x=i.w-s.w:n.x=r.x+this.nXGap,r.y+s.h+this.nYGap>i.h?n.y=i.h-s.h-2:n.y=r.y+this.nYGap,{x:n.x,y:n.y}},getElementPosition:function(e,t){var n,r,i,s,o,u;e?(n=jindo.$Element(e),r=n.offset(),i=n.width(),s=n.height()):(r={top:parseInt(t.style.top,10)-this.nYGap,left:parseInt(t.style.left,10)-this.nXGap},i=0,s=0);var a=this.oApp.getWYSIWYGWindow();typeof a.scrollX=="undefined"?(o=a.document.documentElement.scrollLeft,u=a.document.documentElement.scrollTop):(o=a.scrollX,u=a.scrollY);var f=this.woEditor.offset();return{x:r.left-o+i,y:r.top-u+s}},getAppPosition:function(){return{w:this.woEditor.width(),h:this.woEditor.height()}}}),nhn.husky.HuskyCore.addLoadedFile("hp_DialogLayerManager$Lazy.js"),nhn.husky.HuskyCore.mixin(nhn.husky.DialogLayerManager,{$ON_SHOW_DIALOG_LAYER:function(e,t){e=jindo.$(e),t=t||{};if(!e)return;if(jindo.$A(this.aOpenedLayers).has(e))return;this.oApp.exec("POSITION_DIALOG_LAYER",[e]),this.aOpenedLayers[this.aOpenedLayers.length]=e;var n,r=jindo.$A(this.aMadeDraggable).indexOf(e);r==-1?(n=new nhn.DraggableLayer(e,t),this.aMadeDraggable[this.aMadeDraggable.length]=e,this.aDraggableLayer[this.aDraggableLayer.length]=n):(t&&(n=this.aDraggableLayer[r],n.setOptions(t)),e.style.display="block"),t.sOnShowMsg&&this.oApp.exec(t.sOnShowMsg,t.sOnShowParam)},$ON_HIDE_LAST_DIALOG_LAYER:function(){this.oApp.exec("HIDE_DIALOG_LAYER",[this.aOpenedLayers[this.aOpenedLayers.length-1]])},$ON_HIDE_ALL_DIALOG_LAYER:function(){for(var e=this.aOpenedLayers.length-1;e>=0;e--)this.oApp.exec("HIDE_DIALOG_LAYER",[this.aOpenedLayers[e]])},$ON_HIDE_DIALOG_LAYER:function(e){e=jindo.$(e),e&&(e.style.display="none"),this.aOpenedLayers=jindo.$A(this.aOpenedLayers).refuse(e).$value()},$ON_TOGGLE_DIALOG_LAYER:function(e,t){jindo.$A(this.aOpenedLayers).indexOf(e)?this.oApp.exec("SHOW_DIALOG_LAYER",[e,t]):this.oApp.exec("HIDE_DIALOG_LAYER",[e])},$ON_SET_DIALOG_LAYER_POSITION:function(e,t,n){e.style.top=t,e.style.left=n}}),nhn.husky.HuskyCore.addLoadedFile("N_FindReplace.js"),nhn.FindReplace=jindo.$Class({sKeyword:"",window:null,document:null,bBrowserSupported:!1,_bLGDevice:!1,bEOC:!1,$init:function(e){this.sInlineContainer="SPAN|B|U|I|S|STRIKE",this.rxInlineContainer=new RegExp("^("+this.sInlineContainer+")$"),this.window=e,this.document=this.window.document;if(this.document.domain!=this.document.location.hostname){var t=jindo.$Agent(),n=t.navigator();if(n.firefox&&n.version<3){this.bBrowserSupported=!1,this.find=function(){return 3};return}}this._bLGDevice=navigator.userAgent.indexOf("LG-")>-1,this.bBrowserSupported=!0},find:function(e,t,n,r){var i,s;return this._bLGDevice||this.window.focus(),e?(this.bEOC=!1,i=this.findNext(e,t,n,r),i?0:(this.bEOC=!0,i=this.findNew(e,t,n,r),i?0:1)):2},findNew:function(e,t,n,r){return this.findReset(),this.findNext(e,t,n,r)},findNext:function(e,t,n,r){var i;t=t||!1,r=r||!1,n=n||!1;if(this.window.find){var s=!1;return this.window.find(e,t,n,s,r)}if(this.document.body.createTextRange)try{var o=0;return n&&(o+=1),r&&(o+=2),t&&(o+=4),this.window.focus(),this.document.selection?(this._range=this.document.selection.createRangeCollection().item(0),this._range.collapse(!1)):this._range?this._range.collapse(!1):this._range=this.document.body.createTextRange(),i=this._range.findText(e,1,o),this._range.select(),i}catch(u){return!1}return!1},findReset:function(){if(this.window.find){this.window.getSelection().removeAllRanges();return}this.document.body.createTextRange&&(this._range=this.document.body.createTextRange(),this._range.collapse(!0),this._range.select())},replace:function(e,t,n,r,i){return this._replace(e,t,n,r,i)},_replace:function(e,t,n,r,i,s){if(!e)return 4;s=s||new nhn.HuskyRange(this.window),s.setFromSelection(),n=n||!1;var o,u=s.toString();return n?o=u==e:o=u.toLowerCase()==e.toLowerCase(),o?(typeof t=="function"?s=t(s):s.pasteText(t),s.select(),this.find(e,n,r,i)):this.find(e,n,r,i)+2},replaceAll:function(e,t,n,r){if(!e)return-1;var i=!1,s,o=0,u=this.window;if(this.find(e,n,i,r)!==0)return o;var a=new nhn.HuskyRange(this.window);a.setFromSelection(),a.collapseToStart();var f=this.window.document.createElement("SPAN");f.innerHTML=unescape("%uFEFF"),a.insertNode(f),a.select();var l=a.placeStringBookmark();this.bEOC=!1;while(!this.bEOC)s=this._replace(e,t,n,i,r,a),(s==0||s==1)&&o++;var c=function(){var e=new nhn.HuskyRange(u);e.setFromSelection(),a.moveToBookmark(l);var t=a.compareBoundaryPoints(nhn.W3CDOMRange.START_TO_END,e);return t==1?!1:!0};s=0,this.bEOC=!1;while(!c()&&s==0&&!this.bEOC)s=this._replace(e,t,n,i,r,a),(s==0||s==1)&&o++;return a.moveToBookmark(l),a.deleteContents(),a.removeStringBookmark(l),setTimeout(function(){f.parentNode.removeChild(f)},0),o},_isBlankTextNode:function(e){return e.nodeType==3&&e.nodeValue==""?!0:!1},_getNextNode:function(e,t){if(!e||e.tagName=="BODY")return{elNextNode:null,bDisconnected:!1};if(e.nextSibling){e=e.nextSibling;while(e.firstChild)e.tagName&&!this.rxInlineContainer.test(e.tagName)&&(t=!0),e=e.firstChild;return{elNextNode:e,bDisconnected:t}}return this._getNextNode(nhn.DOMFix.parentNode(e),t)},_getNextTextNode:function(e,t){var n,e;for(;;){n=this._getNextNode(e,t),e=n.elNextNode,t=n.bDisconnected,e&&e.nodeType!=3&&!this.rxInlineContainer.test(e.tagName)&&(t=!0);if(!e||e.nodeType==3&&!this._isBlankTextNode(e))break}return{elNextText:e,bDisconnected:t}},_getFirstTextNode:function(){var e=this.document.body.firstChild;while(!!e&&e.firstChild)e=e.firstChild;if(!e)return null;if(e.nodeType!=3||this._isBlankTextNode(e)){var t=this._getNextTextNode(e,!1);e=t.elNextText}return e},_addToTextMap:function(e,t,n,r){var i=t[r].length;for(var s=0,o=e.nodeValue.length;s<o;s++)n[r][i+s]=[e,s];t[r]+=e.nodeValue},_createTextMap:function(){var e=[],t=[],n=-1,r=this._getFirstTextNode(),i={elNextText:r,bDisconnected:!0};while(r)i.bDisconnected&&(n++,e[n]="",t[n]=[]),this._addToTextMap(i.elNextText,e,t,n),i=this._getNextTextNode(r,!1),r=i.elNextText;return{aTexts:e,aElTexts:t}},replaceAll_js:function(e,t,n,r){try{var i=new Date,s=this._createTextMap(),o=new Date,u=s.aTexts,a=s.aElTexts,f=0,l=e.length;for(var c=0,h=u.length;c<h;c++){var p=u[c];for(var d=p.length-l;d>=0;d--){var v=p.substring(d,d+l);if(r&&d>0&&p.charAt(d-1).match(/[a-zA-Z\uac00-\ud7a3]/))continue;if(v==e){f++;var m=new nhn.HuskyRange(this.window),g,y;d+l<a[c].length?(g=a[c][d+l][0],y=a[c][d+l][1]):(g=a[c][d+l-1][0],y=a[c][d+l-1][1]+1),m.setEnd(g,y,!0,!0),m.setStart(a[c][d][0],a[c][d][1],!0),typeof t=="function"?m=t(m):m.pasteText(t),d-=l}continue}}return f}catch(b){return f}}}),nhn.husky.HuskyCore.addLoadedFile("SE2M_TableTemplate.js"),nhn.husky.SE2M_TableTemplate=[{},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"1"},htTableStyle:{backgroundColor:"#c7c7c7"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#ffffff",color:"#666666"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"1"},htTableStyle:{backgroundColor:"#c7c7c7"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#ffffff",color:"#666666"},{padding:"3px 4px 2px",backgroundColor:"#f3f3f3",color:"#666666"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"0"},htTableStyle:{backgroundColor:"#ffffff",borderTop:"1px solid #c7c7c7"},aRowStyle:[{padding:"3px 4px 2px",borderBottom:"1px solid #c7c7c7",backgroundColor:"#ffffff",color:"#666666"},{padding:"3px 4px 2px",borderBottom:"1px solid #c7c7c7",backgroundColor:"#f3f3f3",color:"#666666"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"0"},htTableStyle:{border:"1px solid #c7c7c7"},ht1stRowStyle:{padding:"3px 4px 2px",backgroundColor:"#f3f3f3",color:"#666666",borderRight:"1px solid #e7e7e7",textAlign:"left",fontWeight:"normal"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#ffffff",borderTop:"1px solid #e7e7e7",borderRight:"1px solid #e7e7e7",color:"#666666"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"1"},htTableStyle:{backgroundColor:"#c7c7c7"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#f8f8f8",color:"#666666"},{padding:"3px 4px 2px",backgroundColor:"#ebebeb",color:"#666666"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"0"},ht1stRowStyle:{padding:"3px 4px 2px",borderTop:"1px solid #000000",borderBottom:"1px solid #000000",backgroundColor:"#333333",color:"#ffffff",textAlign:"left",fontWeight:"normal"},aRowStyle:[{padding:"3px 4px 2px",borderBottom:"1px solid #ebebeb",backgroundColor:"#ffffff",color:"#666666"},{padding:"3px 4px 2px",borderBottom:"1px solid #ebebeb",backgroundColor:"#f8f8f8",color:"#666666"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"1"},htTableStyle:{backgroundColor:"#c7c7c7"},ht1stRowStyle:{padding:"3px 4px 2px",backgroundColor:"#333333",color:"#ffffff",textAlign:"left",fontWeight:"normal"},ht1stColumnStyle:{padding:"3px 4px 2px",backgroundColor:"#f8f8f8",color:"#666666",textAlign:"left",fontWeight:"normal"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#ffffff",color:"#666666"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"1"},htTableStyle:{backgroundColor:"#c7c7c7"},ht1stColumnStyle:{padding:"3px 4px 2px",backgroundColor:"#333333",color:"#ffffff",textAlign:"left",fontWeight:"normal"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#ffffff",color:"#666666"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"1"},htTableStyle:{backgroundColor:"#a6bcd1"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#ffffff",color:"#3d76ab"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"1"},htTableStyle:{backgroundColor:"#a6bcd1"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#ffffff",color:"#3d76ab"},{padding:"3px 4px 2px",backgroundColor:"#f6f8fa",color:"#3d76ab"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"0"},htTableStyle:{backgroundColor:"#ffffff",borderTop:"1px solid #a6bcd1"},aRowStyle:[{padding:"3px 4px 2px",borderBottom:"1px solid #a6bcd1",backgroundColor:"#ffffff",color:"#3d76ab"},{padding:"3px 4px 2px",borderBottom:"1px solid #a6bcd1",backgroundColor:"#f6f8fa",color:"#3d76ab"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"0"},htTableStyle:{border:"1px solid #a6bcd1"},ht1stRowStyle:{padding:"3px 4px 2px",backgroundColor:"#f6f8fa",color:"#3d76ab",borderRight:"1px solid #e1eef7",textAlign:"left",fontWeight:"normal"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#ffffff",borderTop:"1px solid #e1eef7",borderRight:"1px solid #e1eef7",color:"#3d76ab"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"1"},htTableStyle:{backgroundColor:"#a6bcd1"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#fafbfc",color:"#3d76ab"},{padding:"3px 4px 2px",backgroundColor:"#e6ecf2",color:"#3d76ab"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"0"},ht1stRowStyle:{padding:"3px 4px 2px",borderTop:"1px solid #466997",borderBottom:"1px solid #466997",backgroundColor:"#6284ab",color:"#ffffff",textAlign:"left",fontWeight:"normal"},aRowStyle:[{padding:"3px 4px 2px",borderBottom:"1px solid #ebebeb",backgroundColor:"#ffffff",color:"#3d76ab"},{padding:"3px 4px 2px",borderBottom:"1px solid #ebebeb",backgroundColor:"#f6f8fa",color:"#3d76ab"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"1"},htTableStyle:{backgroundColor:"#a6bcd1"},ht1stRowStyle:{padding:"3px 4px 2px",backgroundColor:"#6284ab",color:"#ffffff",textAlign:"left",fontWeight:"normal"},ht1stColumnStyle:{padding:"3px 4px 2px",backgroundColor:"#f6f8fa",color:"#3d76ab",textAlign:"left",fontWeight:"normal"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#ffffff",color:"#3d76ab"}]},{htTableProperty:{border:"0",cellPadding:"0",cellSpacing:"1"},htTableStyle:{backgroundColor:"#a6bcd1"},ht1stColumnStyle:{padding:"3px 4px 2px",backgroundColor:"#6284ab",color:"#ffffff",textAlign:"left",fontWeight:"normal"},aRowStyle:[{padding:"3px 4px 2px",backgroundColor:"#ffffff",color:"#3d76ab"}]}],nhn.husky.HuskyCore.addLoadedFile("N_DraggableLayer.js"),nhn.DraggableLayer=jindo.$Class({$init:function(e,t){this.elLayer=e,this.setOptions(t),this.elHandle=this.oOptions.elHandle,e.style.display="block",e.style.position="absolute",e.style.zIndex="9999",this.aBasePosition=this.getBaseOffset(e);var n=this.toInt(jindo.$Element(e).offset().top)-this.aBasePosition.top,r=this.toInt(jindo.$Element(e).offset().left)-this.aBasePosition.left,i=this._correctXY({x:r,y:n});e.style.top=i.y+"px",e.style.left=i.x+"px",this.$FnMouseDown=jindo.$Fn(jindo.$Fn(this._mousedown,this).bind(e),this),this.$FnMouseMove=jindo.$Fn(jindo.$Fn(this._mousemove,this).bind(e),this),this.$FnMouseUp=jindo.$Fn(jindo.$Fn(this._mouseup,this).bind(e),this),this.$FnMouseDown.attach(this.elHandle,"mousedown"),this.elHandle.ondragstart=new Function("return false"),this.elHandle.onselectstart=new Function("return false")},_mousedown:function(e,t){if(t.element.tagName=="INPUT")return;this.oOptions.fnOnDragStart(),this.MouseOffsetY=t.pos().clientY-this.toInt(e.style.top)-this.aBasePosition.top,this.MouseOffsetX=t.pos().clientX-this.toInt(e.style.left)-this.aBasePosition.left,this.$FnMouseMove.attach(e.ownerDocument,"mousemove"),this.$FnMouseUp.attach(e.ownerDocument,"mouseup"),this.elHandle.style.cursor="move"},_mousemove:function(e,t){var n=t.pos().clientY-this.MouseOffsetY-this.aBasePosition.top,r=t.pos().clientX-this.MouseOffsetX-this.aBasePosition.left,i=this._correctXY({x:r,y:n});e.style.top=i.y+"px",e.style.left=i.x+"px"},_mouseup:function(e,t){this.oOptions.fnOnDragEnd(),this.$FnMouseMove.detach(e.ownerDocument,"mousemove"),this.$FnMouseUp.detach(e.ownerDocument,"mouseup"),this.elHandle.style.cursor=""},_correctXY:function(e){var t=e.x,n=e.y;return n<this.oOptions.nMinY&&(n=this.oOptions.nMinY),n>this.oOptions.nMaxY&&(n=this.oOptions.nMaxY),t<this.oOptions.nMinX&&(t=this.oOptions.nMinX),t>this.oOptions.nMaxX&&(t=this.oOptions.nMaxX),{x:t,y:n}},toInt:function(e){var t=parseInt(e);return t||0},findNonStatic:function(e){return e?e.tagName=="BODY"?e:jindo.$Element(e).css("position").match(/absolute|relative/i)?e:this.findNonStatic(e.offsetParent):null},getBaseOffset:function(e){var t=this.findNonStatic(e.offsetParent)||e.ownerDocument.body,n=jindo.$Element(t).offset();return{top:n.top,left:n.left}},setOptions:function(e){this.oOptions=e||{},this.oOptions.bModal=this.oOptions.bModal||!1,this.oOptions.elHandle=this.oOptions.elHandle||this.elLayer,this.oOptions.nMinX=this.oOptions.nMinX||-999999,this.oOptions.nMinY=this.oOptions.nMinY||-999999,this.oOptions.nMaxX=this.oOptions.nMaxX||999999,this.oOptions.nMaxY=this.oOptions.nMaxY||999999,this.oOptions.fnOnDragStart=this.oOptions.fnOnDragStart||function(){},this.oOptions.fnOnDragEnd=this.oOptions.fnOnDragEnd||function(){}}});var oMessageMap={"SE_EditingAreaManager.onExit":"\ub0b4\uc6a9\uc774 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.","SE_Color.invalidColorCode":"\uc0c9\uc0c1 \ucf54\ub4dc\ub97c \uc62c\ubc14\ub974\uac8c \uc785\ub825\ud574 \uc8fc\uc138\uc694. \n\n \uc608) #000000, #FF0000, #FFFFFF, #ffffff, ffffff","SE_Hyperlink.invalidURL":"\uc785\ub825\ud558\uc2e0 URL\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.","SE_FindReplace.keywordMissing":"\ucc3e\uc73c\uc2e4 \ub2e8\uc5b4\ub97c \uc785\ub825\ud574 \uc8fc\uc138\uc694.","SE_FindReplace.keywordNotFound":"\ucc3e\uc73c\uc2e4 \ub2e8\uc5b4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.","SE_FindReplace.replaceAllResultP1":"\uc77c\uce58\ud558\ub294 \ub0b4\uc6a9\uc774 \ucd1d ","SE_FindReplace.replaceAllResultP2":"\uac74 \ubc14\ub00c\uc5c8\uc2b5\ub2c8\ub2e4.","SE_FindReplace.notSupportedBrowser":"\ud604\uc7ac \uc0ac\uc6a9\ud558\uace0 \uacc4\uc2e0 \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c\ub294 \uc0ac\uc6a9\ud558\uc2e4\uc218 \uc5c6\ub294 \uae30\ub2a5\uc785\ub2c8\ub2e4.\n\n\uc774\uc6a9\uc5d0 \ubd88\ud3b8\uc744 \ub4dc\ub824 \uc8c4\uc1a1\ud569\ub2c8\ub2e4.","SE_FindReplace.replaceKeywordNotFound":"\ubc14\ub014 \ub2e8\uc5b4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4","SE_LineHeight.invalidLineHeight":"\uc798\ubabb\ub41c \uac12\uc785\ub2c8\ub2e4.","SE_Footnote.defaultText":"\uac01\uc8fc\ub0b4\uc6a9\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694","SE.failedToLoadFlash":"\ud50c\ub798\uc2dc\uac00 \ucc28\ub2e8\ub418\uc5b4 \uc788\uc5b4 \ud574\ub2f9 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","SE2M_EditingModeChanger.confirmTextMode":"\ud14d\uc2a4\ud2b8 \ubaa8\ub4dc\ub85c \uc804\ud658\ud558\uba74 \uc791\uc131\ub41c \ub0b4\uc6a9\uc740 \uc720\uc9c0\ub418\ub098, \n\n\uae00\uaf34 \ub4f1\uc758 \ud3b8\uc9d1\ud6a8\uacfc\uc640 \uc774\ubbf8\uc9c0 \ub4f1\uc758 \ucca8\ubd80\ub0b4\uc6a9\uc774 \ubaa8\ub450 \uc0ac\ub77c\uc9c0\uac8c \ub429\ub2c8\ub2e4.\n\n\uc804\ud658\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?","SE2M_FontNameWithLayerUI.sSampleText":"\uac00\ub098\ub2e4\ub77c","SE_Approval.DupError":"\ud574\ub2f9\ucef4\ud3ec\ub10c\ud2b8\ub294 \ud15c\ud50c\ub9bf\ub2f9 \ud55c\uac1c\uc529\ub9cc \uc0ac\uc6a9\uac00\ub2a5\ud569\ub2c8\ub2e4.","SE_Approval.OfficialError":"\ud574\ub2f9\ucef4\ud3ec\ub10c\ud2b8\ub97c \uc0ac\uc6a9\ud560\uc218 \uc5c6\uc2b5\ub2c8\ub2e4."},oMessageMap_ja_JP={"SE_EditingAreaManager.onExit":"\u5185\u5bb9\u304c\u5909\u66f4\u3055\u308c\u307e\u3057\u305f\u3002","SE_Color.invalidColorCode":"\u30ab\u30e9\u30fc\u30b3\u30fc\u30c9\u3092\u6b63\u3057\u304f\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \n\n \u4f8b\uff09#000000\u3001#FF0000\u3001#FFFFFF\u3001#ffffff\u3001ffffff","SE_Hyperlink.invalidURL":"\u5165\u529b\u3055\u308c\u305fURL\u304c\u6b63\u3057\u304f\u3042\u308a\u307e\u305b\u3093\u3002","SE_FindReplace.keywordMissing":"\u691c\u7d22\u3059\u308b\u6587\u5b57\u4f8b\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002","SE_FindReplace.keywordNotFound":"\u691c\u7d22\u7d50\u679c\u304c\u3042\u308a\u307e\u305b\u3093\u3002","SE_FindReplace.replaceAllResultP1":"\u4e00\u81f4\u3059\u308b\u6587\u5b57\u5217 ","SE_FindReplace.replaceAllResultP2":"\u4ef6\u304c\u7f6e\u63db\u3055\u308c\u307e\u3057\u305f\u3002","SE_FindReplace.notSupportedBrowser":"\u73fe\u5728\u4f7f\u7528\u3057\u3066\u3044\u308b\u30d6\u30e9\u30a6\u30b6\u3067\u306f\u3054\u5229\u7528\u3067\u304d\u306a\u3044\u6a5f\u80fd\u3067\u3059\u3002","SE_FindReplace.replaceKeywordNotFound":"\u7f6e\u63db\u3059\u308b\u9805\u76ee\u304c\u3042\u308a\u307e\u305b\u3093\u3002","SE_LineHeight.invalidLineHeight":"\u7121\u52b9\u306a\u5024\u3067\u3059\u3002","SE_Footnote.defaultText":"\u811a\u6ce8\u306e\u5185\u5bb9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044","SE.failedToLoadFlash":"\u30d5\u30e9\u30c3\u30b7\u30e5\u304c\u7981\u6b62\u3055\u308c\u3066\u304a\u308a\u3001\u3053\u306e\u6a5f\u80fd\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002","SE2M_EditingModeChanger.confirmTextMode":"TEXT\u30e2\u30fc\u30c9\u306b\u5207\u308a\u66ff\u3048\u308b\u3068\u3001\u4f5c\u6210\u3057\u305f\u5185\u5bb9\u306f\u4fdd\u6301\u3055\u308c\u307e\u3059\u304c\u3001\n\n \u30d5\u30a9\u30f3\u30c8\u306e\u52b9\u679c\u3084\u633f\u5165\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u306a\u3069\u306f\u6d88\u3048\u307e\u3059\u3002\n\n \u7de8\u96c6\u30e2\u30fc\u30c9\u3092\u5909\u66f4\u3057\u307e\u3059\u304b\uff1f","SE2M_FontNameWithLayerUI.sSampleText":"ABCD","SE_Approval.DupError":"\u3053\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3054\u3068\u306b\u4e00\u3064\u305a\u3064\u3057\u304b\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002","SE_Approval.OfficialError":"\ud574\ub2f9\ucef4\ud3ec\ub10c\ud2b8\ub97c \uc0ac\uc6a9\ud560\uc218 \uc5c6\uc2b5\ub2c8\ub2e4."},oMessageMap_en_US={"SE_EditingAreaManager.onExit":"Successfully changed.","SE_Color.invalidColorCode":"Please enter the color code correctly. \n\n eg. #000000, #FF0000, #FFFFFF, #ffffff, ffffff","SE_Hyperlink.invalidURL":"The URL you've entered is not correct.","SE_FindReplace.keywordMissing":"Please enter a word to find.","SE_FindReplace.keywordNotFound":"No words found.","SE_FindReplace.replaceAllResultP1":"In total ","SE_FindReplace.replaceAllResultP2":"matches were changed.","SE_FindReplace.notSupportedBrowser":"You cannot use the feature on the browser you're using.\n\nSorry for the inconvenience.","SE_FindReplace.replaceKeywordNotFound":"No words changed.","SE_LineHeight.invalidLineHeight":"The value is invalid.","SE_Footnote.defaultText":"Please enter a footnote.","SE.failedToLoadFlash":"You cannot use this feature because Flash is not enabled.","SE2M_EditingModeChanger.confirmTextMode":"If you switch the edit mode to Text Mode, contents will remain but font effects and attachments like images will discarded.\n\nAre you sure to continue?","SE2M_FontNameWithLayerUI.sSampleText":"ABCD","SE_Approval.DupError":"The component can be used one at a time.","SE_Approval.OfficialError":"\ud574\ub2f9\ucef4\ud3ec\ub10c\ud2b8\ub97c \uc0ac\uc6a9\ud560\uc218 \uc5c6\uc2b5\ub2c8\ub2e4."},oMessageMap_zh_CN={"SE_EditingAreaManager.onExit":"\u5185\u5bb9\u5df2\u66f4\u6539\u3002","SE_Color.invalidColorCode":"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u989c\u8272\u4ee3\u7801\u3002  n  n\u4f8b\uff09\uff03000000\uff0c\uff03000000\uff0c\uff03FFFFFF\uff0c\uff03FFFFFF FFFFFF","SE_Hyperlink.invalidURL":"\u8f93\u5165\u7684\u7f51\u5740\u4e0d\u6b63\u786e\u3002","SE_FindReplace.keywordMissing":"\u8bf7\u8f93\u5165\u641c\u7d22\u5355\u8bcd\u3002","SE_FindReplace.keywordNotFound":"\u6ca1\u6709\u641c\u7d22\u7ed3\u679c\u3002","SE_FindReplace.replaceAllResultP1":"\u5339\u914d\u7684\u5b57\u7b26\u4e32 ","SE_FindReplace.replaceAllResultP2":"\u4ef6\u5df2\u5207\u6362\u3002","SE_FindReplace.notSupportedBrowser":"\u76ee\u524d\u6b63\u5728\u4f7f\u7528\u7684\u6d4f\u89c8\u5668\uff0c\u65e0\u6cd5\u4f7f\u7528\u8be5\u529f\u80fd\u3002","SE_FindReplace.replaceKeywordNotFound":"\u6ca1\u6709\u66ff\u6362\u7684\u5355\u8bcd","SE_LineHeight.invalidLineHeight":"\u8be5\u503c\u662f\u65e0\u6548\u7684\u3002","SE_Footnote.defaultText":"\u8bf7\u8f93\u5165\u6ce8\u811a\u5185\u5bb9\u3002","SE.failedToLoadFlash":"\u56e0\u4e3aFlash\u5df2\u88ab\u7981\u6b62\uff0c\u6240\u4ee5\u65e0\u6cd5\u4f7f\u7528\u6b64\u529f\u80fd\u3002","SE2M_EditingModeChanger.confirmTextMode":"\u5982\u679c\u5207\u6362\u5230TEXT\u6a21\u5f0f\uff0c\u521b\u5efa\u7684\u5185\u5bb9\u867d\u7136\u80fd\u4fdd\u7559\uff0c\n \n\u4f46\u5b57\u4f53\u548c\u63d2\u5165\u7684\u56fe\u50cf\u5c06\u6d88\u5931\u3002\n \n\u786e\u5b9a\u8981\u5207\u6362\u6a21\u5f0f\u5417\uff1f","SE2M_FontNameWithLayerUI.sSampleText":"ABCD","SE_Approval.DupError":"\u7ec4\u4ef6\u4e0a\u7684\u5404\u6a21\u677f\u53ea\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u3002","SE_Approval.OfficialError":"\ud574\ub2f9\ucef4\ud3ec\ub10c\ud2b8\ub97c \uc0ac\uc6a9\ud560\uc218 \uc5c6\uc2b5\ub2c8\ub2e4."},oMessageMap_zh_TW={"SE_EditingAreaManager.onExit":"\u5185\u5bb9\u5df2\u66f4\u6539\u3002","SE_Color.invalidColorCode":"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u989c\u8272\u4ee3\u7801\u3002  n  n\u4f8b\uff09\uff03000000\uff0c\uff03000000\uff0c\uff03FFFFFF\uff0c\uff03FFFFFF FFFFFF","SE_Hyperlink.invalidURL":"\u8f93\u5165\u7684\u7f51\u5740\u4e0d\u6b63\u786e\u3002","SE_FindReplace.keywordMissing":"\u8bf7\u8f93\u5165\u641c\u7d22\u5355\u8bcd\u3002","SE_FindReplace.keywordNotFound":"\u6ca1\u6709\u641c\u7d22\u7ed3\u679c\u3002","SE_FindReplace.replaceAllResultP1":"\u5339\u914d\u7684\u5b57\u7b26\u4e32 ","SE_FindReplace.replaceAllResultP2":"\u4ef6\u5df2\u5207\u6362\u3002","SE_FindReplace.notSupportedBrowser":"\u76ee\u524d\u6b63\u5728\u4f7f\u7528\u7684\u700f\u89bd\u5668\uff0c\u7121\u6cd5\u4f7f\u7528\u8a72\u529f\u80fd\u3002","SE_FindReplace.replaceKeywordNotFound":"\u6ca1\u6709\u66ff\u6362\u7684\u5355\u8bcd","SE_LineHeight.invalidLineHeight":"\u8be5\u503c\u662f\u65e0\u6548\u7684\u3002","SE_Footnote.defaultText":"\u8bf7\u8f93\u5165\u6ce8\u811a\u5185\u5bb9\u3002","SE.failedToLoadFlash":"\u56e0\u4e3aFlash\u5df2\u88ab\u7981\u6b62\uff0c\u6240\u4ee5\u65e0\u6cd5\u4f7f\u7528\u6b64\u529f\u80fd\u3002","SE2M_EditingModeChanger.confirmTextMode":"\u5982\u679c\u5207\u63db\u5230TEXT\u6a21\u5f0f\uff0c\u5275\u5efa\u7684\u5167\u5bb9\u96d6\u7136\u80fd\u4fdd\u7559\uff0c\n \n\u4f46\u5b57\u9ad4\u548c\u63d2\u5165\u7684\u5716\u50cf\u5c07\u6d88\u5931\u3002 \n \n\u78ba\u5b9a\u8981\u5207\u63db\u6a21\u5f0f\u55ce\uff1f","SE2M_FontNameWithLayerUI.sSampleText":"ABCD","SE_Approval.DupError":"\u7d44\u4ef6\u4e0a\u7684\u5404\u6a21\u677f\u53ea\u53ef\u4ee5\u4f7f\u7528\u4e00\u500b\u3002","SE_Approval.OfficialError":"\ud574\ub2f9\ucef4\ud3ec\ub10c\ud2b8\ub97c \uc0ac\uc6a9\ud560\uc218 \uc5c6\uc2b5\ub2c8\ub2e4."},oMessageMap_vi={"SE_EditingAreaManager.onExit":"N\u1ed9i dung \u0111\u00e3 \u0111\u01b0\u1ee3c thay \u0111\u1ed5i.","SE_Color.invalidColorCode":"Vui l\u00f2ng nh\u1eadp m\u00e3 m\u00e0u \u0111\u00fang. \n\n V\u00ed d\u1ee5) #000000, #FF0000, #FFFFFF, #ffffff, ffffff","SE_Hyperlink.invalidURL":"Nh\u1eadp URL kh\u00f4ng \u0111\u00fang.","SE_FindReplace.keywordMissing":"Vui l\u00f2ng nh\u1eadp t\u1eeb mu\u1ed1n t\u00ecm.","SE_FindReplace.keywordNotFound":"Kh\u00f4ng c\u00f3 t\u1eeb mu\u1ed1n t\u00ecm.","SE_FindReplace.replaceAllResultP1":"T\u1ed5ng s\u1ed1 n\u1ed9i dung \u0111\u1ed3ng nh\u1ea5t ","SE_FindReplace.replaceAllResultP2":"n\u1ed9i dung \u0111\u00e3 \u0111\u01b0\u1ee3c \u0111\u1ed5i.","SE_FindReplace.notSupportedBrowser":"Ch\u1ee9c n\u0103ng kh\u00f4ng th\u1ec3 s\u1eed d\u1ee5ng trong tr\u00ecnh duy\u1ec7t hi\u1ec7n t\u1ea1i.\n\nXin l\u1ed7i qu\u00fd kh\u00e1ch.","SE_FindReplace.replaceKeywordNotFound":"Kh\u00f4ng c\u00f3 t\u1eeb mu\u1ed1n \u0111\u1ed5i","SE_LineHeight.invalidLineHeight":"Gi\u00e1 tr\u1ecb l\u1ed7i.","SE_Footnote.defaultText":"Vui l\u00f2ng nh\u1eadp n\u1ed9i dung ch\u00fa th\u00edch","SE.failedToLoadFlash":"Flash b\u1ecb ch\u1eb7n n\u00ean kh\u00f4ng th\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\u00e0y.","SE2M_EditingModeChanger.confirmTextMode":"N\u1ebfu chuy\u1ec3n ch\u1ebf \u0111\u1ed9 v\u0103n b\u1ea3n th\u00ec c\u00e1c n\u1ed9i dung \u0111\u00e3so\u1ea1n th\u1ea3os\u1ebd gi\u1eef nguy\u00ean,\n\n nh\u01b0ng c\u00e1c n\u1ed9i dung \u0111\u00ednh k\u00e8m nh\u01b0 hi\u1ec7u \u1ee9ngph\u00f4ngch\u1eef s\u1ebd m\u1ea5th\u1ebft.\n\nB\u1ea1n c\u00f3 mu\u1ed1n chuy\u1ec3n \u0111\u1ed5i kh\u00f4ng?","SE2M_FontNameWithLayerUI.sSampleText":"ABCD","SE_Approval.DupError":"M\u1ed9t component (b\u1ed9 ph\u1eadn) ch\u1ec9 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng cho m\u1ed9t template (b\u1ea3n m\u1eabu).","SE_Approval.OfficialError":"\ud574\ub2f9\ucef4\ud3ec\ub10c\ud2b8\ub97c \uc0ac\uc6a9\ud560\uc218 \uc5c6\uc2b5\ub2c8\ub2e4."};