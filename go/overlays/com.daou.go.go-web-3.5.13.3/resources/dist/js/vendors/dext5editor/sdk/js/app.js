function setDextPageInfo(){var e=window.location.href.split("#!");dext_sdk_curr_page=e[0],dext_sdk_curr_section=e[1];if(dext_sdk_curr_page.indexOf("?")>-1){var t=dext_sdk_curr_page.split("?");dext_sdk_curr_page_without_param=t[0],dext_sdk_curr_page_param=t[1]}else dext_sdk_curr_page_without_param=dext_sdk_curr_page,dext_sdk_curr_page_param=""}function getDextPageQueryString(){if(dext_sdk_curr_page_param=="")return{};var e=dext_sdk_curr_page_param.split("&"),t={};for(var n=0;n<e.length;++n){var r=e[n].split("=",2);r.length==1?t[r[0]]="":t[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}return t}Ext.define("Docs.History",{singleton:!0,init:function(){Ext.util.History.useTopWindow=!1,Ext.util.History.init(function(){this.historyLoaded=!0,this.initialNavigate()},this),Ext.util.History.on("change",function(e){this.navigate(e,!0)},this)},notifyTabsLoaded:function(){this.tabsLoaded=!0,this.initialNavigate()},initialNavigate:function(){this.tabsLoaded&&this.historyLoaded&&this.navigate(Ext.util.History.getToken(),!0)},navigate:function(e,t){var n=this.parseToken(e);if(n.url=="#!/javascriptapi")Docs.App.getController("Classes").loadIndex(t);else if(n.type==="javascriptapi")Docs.App.getController("Classes").loadClass(n.url,t);else if(n.url==="#!/guide")Docs.App.getController("Guides").loadIndex(t);else if(n.type==="guide")Docs.App.getController("Guides").loadGuide(n.url,t);else if(n.url==="#!/video")Docs.App.getController("Videos").loadIndex(t);else if(n.type==="video")Docs.App.getController("Videos").loadVideo(n.url,t);else if(n.url==="#!/example")Docs.App.getController("Examples").loadIndex();else if(n.type==="example")Docs.App.getController("Examples").loadExample(n.url,t);else if(n.url==="#!/comment")Docs.App.getController("Comments").loadIndex();else if(n.url==="#!/tests")Docs.App.getController("Tests").loadIndex();else if(Docs.App.getController("Welcome").isActive())Docs.App.getController("Welcome").loadIndex(t);else if(!this.noRepeatNav){this.noRepeatNav=!0;var r=Ext.getCmp("doctabs").staticTabs[0];r&&this.navigate(r.href,t)}},parseToken:function(e){var t=e&&e.match(/!?(\/(javascriptapi|guide|example|video|comment|tests)(\/(.*))?)/);return t?{type:t[2],url:"#!"+t[1]}:{}},push:function(e,t){e=this.cleanUrl(e),/^#!?/.test(e)||(e="#!"+e);var n=Ext.util.History.getToken()||"";"#"+n.replace(/^%21/,"!")!==e&&Ext.util.History.add(e)},cleanUrl:function(e){return e.replace(/^[^#]*#/,"#")}}),Ext.define("Docs.Auth",{singleton:!0,requires:["Ext.Ajax","Ext.util.Cookies"],init:function(e,t){Ext.Ajax.request({url:Docs.data.commentsUrl+"/session",params:{sid:this.getSid()},method:"GET",cors:!0,callback:function(n,r,i){if(i&&i.responseText){var s=Ext.JSON.decode(i.responseText);s&&s.sessionID&&this.setSid(s.sessionID),s&&s.userName&&(this.currentUser=s),e.call(t,!0)}else e.call(t,!1)},scope:this})},login:function(e){Ext.Ajax.request({url:Docs.data.commentsUrl+"/login",method:"POST",cors:!0,params:{username:e.username,password:e.password},callback:function(t,n,r){var i=Ext.JSON.decode(r.responseText);i.success?(this.currentUser=i,this.setSid(i.sessionID,e.remember),e.success&&e.success.call(e.scope)):e.failure&&e.failure.call(e.scope,i.reason)},scope:this})},logout:function(e,t){Ext.Ajax.request({url:Docs.data.commentsUrl+"/logout?sid="+this.getSid(),method:"POST",cors:!0,callback:function(){this.currentUser=undefined,e&&e.call(t)},scope:this})},setSid:function(e,t){this.sid=e;if(e){var n=null;t&&(n=new Date,n.setTime(n.getTime()+2592e6)),Ext.util.Cookies.set("sid",e,n)}else Ext.util.Cookies.clear("sid")},getSid:function(){return this.sid||(this.sid=Ext.util.Cookies.get("sid")),this.sid},getUser:function(){return this.currentUser},isLoggedIn:function(){return!!this.getUser()},isModerator:function(){return this.getUser()&&this.getUser().mod},getRegistrationUrl:function(){return Docs.data.commentsUrl+"/register"}}),Ext.define("Docs.CommentCounts",{constructor:function(e){this.counts={},Ext.Array.each(e,function(e){this.counts[e._id]=e.value},this)},get:function(e){return this.counts[e.join("__")]||0},change:function(e,t){return delete this.totals,this.counts[e.join("__")]=this.get(e)+t},getClassTotal:function(e){return this.totals||(this.totals={},Ext.Object.each(this.counts,function(e,t){var n=e.split("__");n[0]==="class"&&(this.totals[n[1]]=(this.totals[n[1]]||0)+t)},this)),this.totals[e]}}),Ext.define("Docs.CommentSubscriptions",{constructor:function(e){this.subscriptions={},Ext.Array.each(e,function(e){this.subscriptions[e.join("__")]=!0},this)},has:function(e){return this.subscriptions[e.join("__")]},set:function(e,t){this.subscriptions[e.join("__")]=t}}),Ext.define("Docs.LocalStore",{storeName:"",init:function(){this.localStorage=!!window.localStorage,this.store=Ext.create(this.storeName),this.localStorage&&(this.cleanup(),this.store.load(),window.addEventListener?window.addEventListener("storage",Ext.Function.bind(this.onStorageChange,this),!1):window.attachEvent("onstorage",Ext.Function.bind(this.onStorageChange,this)))},onStorageChange:function(e){e=e||window.event,e.key===this.store.getProxy().id&&this.store.load()},syncStore:function(){this.localStorage&&this.store.sync()},cleanup:function(){var e=/-settings/;for(var t=0;t<window.localStorage.length;t++){var n=window.localStorage.key(t);e.test(n)||window.localStorage.removeItem(n)}}}),Ext.define("Docs.view.Header",{extend:"Ext.container.Container",alias:"widget.docheader",contentEl:"header-content",initComponent:function(){Docs.otherProducts&&(this.style="cursor: pointer;",this.cls="dropdown",this.menu=Ext.create("Ext.menu.Menu",{renderTo:Ext.getBody(),plain:!0,items:Docs.otherProducts})),this.callParent()},listeners:{afterrender:function(e){this.menu&&e.el.addListener("click",function(e,t){this.menu.showBy(this.el,"bl",[120,0])},this)}}}),Ext.define("Docs.view.examples.Container",{extend:"Ext.panel.Panel",alias:"widget.examplecontainer",layout:"fit",initComponent:function(){this.dockedItems=[{xtype:"container",dock:"top",html:['<div class="cls-grouping example-toolbar">',"<div>",'<button class="new-window">Open in new window</button>',"</div>","</div>"].join("")}],this.tpl=new Ext.XTemplate('<iframe style="width: 100%; height: 100%; border: 0;" src="{url}" title="Software Development Kit"></iframe>'),this.callParent(arguments)},load:function(e){this.update(this.tpl.apply(e))},clear:function(){this.update("")}}),Ext.define("Docs.controller.Content",{extend:"Ext.app.Controller",MIDDLE:1,title:"",loadIndex:function(e){e||Docs.History.push(this.baseUrl),this.getViewport().setPageTitle(this.title),Ext.getCmp("doctabs").activateTab(this.baseUrl),Ext.getCmp("card-panel").layout.setActiveItem(this.getIndex()),this.getIndex().restoreScrollState()},opensNewWindow:function(e){return e.button===this.MIDDLE||e.shiftKey||e.ctrlKey},getBaseUrl:function(){return document.location.href.replace(/\/?(index.html|template.html)?(\?[^#]*)?#.*/,"")}}),Ext.define("Docs.Syntax",{singleton:!0,highlight:function(e){Ext.Array.forEach(Ext.query("pre",e.dom||e),function(e){e=Ext.get(e),e.child("code")?(!e.hasCls("inline-example")||!e.hasCls("preview"))&&e.addCls("prettyprint"):!e.parent(".CodeMirror")&&!e.hasCls("hierarchy")&&e.addCls("notpretty")}),prettyPrint()}}),Ext.define("Docs.ClassRegistry",{singleton:!0,canonicalName:function(e){return this.altNames||(this.altNames={},Ext.each(Docs.data.search,function(e){e.type==="class"&&!/:/.test(e.cls)&&(this.altNames[e.cls]=e.id)},this)),this.altNames[e]||e},shortName:function(e){return e.split(/\./).pop()},packageName:function(e){return e.slice(0,-this.shortName(e).length-1)||""},search:function(e,t){var n=5,r=4,i=3,s=new Array(n*r*i);for(var o=0;o<s.length;o++)s[o]=[];var u=n*r*0,a=n*r*1,f=n*r*2,l=n*0,c=n*1,h=n*2,p=n*3;if(t){var d=4;for(var o=0;o<t.length;o++){var v=t[o];v.score>5?s[d+l+u].push(v):v.score>1?s[d+l+a].push(v):s[d+l+f].push(v)}}var m=/[.:]/.test(e),g=Ext.escapeRe(e),y=new RegExp("^"+g+"$","i"),b=new RegExp("^"+g,"i"),w=new RegExp(g,"i"),E=Docs.data.search;for(var o=0,S=E.length;o<S;o++){var x=E[o],T=m?x.fullName:x.name,N=x.meta.removed?p:x.meta["private"]?h:x.meta.deprecated?c:l;y.test(T)?s[x.sort+N+u].push(this.highlightMatch(x,y)):b.test(T)?s[x.sort+N+a].push(this.highlightMatch(x,b)):w.test(T)&&s[x.sort+N+f].push(this.highlightMatch(x,w))}return Ext.Array.flatten(s)},highlightMatch:function(e,t){return e=Ext.apply({},e),e.name=e.name.replace(t,"<strong>$&</strong>"),e.fullName=e.fullName.replace(t,"<strong>$&</strong>"),e}}),Ext.define("Docs.GuideSearch",{singleton:!0,isEnabled:function(){return!!Docs.data.guideSearch.url},deferredSearch:function(e,t,n,r){clearTimeout(this.timeout);var i=this.timeout=Ext.Function.defer(function(){this.search(e,function(e){i===this.timeout&&t.call(n,e)},this)},r,this)},search:function(e,t,n){var r=this.currentRequest=Ext.data.JsonP.request({url:Docs.data.guideSearch.url,params:{fragsize:32,max_fragments:1,q:e,product:Docs.data.guideSearch.product,version:Docs.data.guideSearch.version,start:0,limit:100},callback:function(e,i){e&&i.success&&this.currentRequest===r&&t.call(n,Ext.Array.map(i.docs,this.adaptJson,this))},scope:this})},adaptJson:function(e){return{icon:"icon-guide",name:this.format(e.title),fullName:this.format(e.body),url:e.url,meta:{},score:e.score}},format:function(e){var t=e.replace(/\s+/g," ");return t.replace(/<em class="match">(.*?)<\/em>/g,"<strong>$1</strong>")}}),Ext.define("Docs.store.Search",{extend:"Ext.data.Store",fields:["name","fullName","icon","url","meta","sort"],proxy:{type:"memory",reader:{type:"json"}}}),Ext.define("Docs.model.Setting",{fields:["id","key","value"],extend:"Ext.data.Model",requires:["Ext.data.proxy.LocalStorage"],proxy:{type:window.localStorage?"localstorage":"memory",id:Docs.data.localStorageDb+"-settings"}}),Ext.define("Docs.view.TabMenu",{extend:"Ext.menu.Menu",plain:!0,componentCls:"tab-menu",initComponent:function(){this.addEvents("tabItemClick","closeAllTabs"),this.items=[{text:"Close other tabs",iconCls:"close",cls:"close-all",handler:function(){this.fireEvent("closeAllTabs")},scope:this}],this.callParent()},addTab:function(e,t){this.insert(this.items.length-1,{text:e.text,iconCls:e.iconCls,origIcon:e.iconCls,href:e.href,cls:t,handler:this.onTabItemClick,scope:this})},onTabItemClick:function(e){this.fireEvent("tabItemClick",e)},addTabCls:function(e,t){this.items.each(function(n){n.href===e.href&&n.addCls(t)})}}),Ext.define("Docs.view.Scrolling",{onClassMixedIn:function(e){Ext.Function.interceptBefore(e.prototype,"initComponent",this.prototype.initScrolling)},initScrolling:function(){this.scrollContext="index",this.scrollState={},this.on("afterrender",function(){this.getScrollEl().addListener("scroll",this.saveScrollState,this)},this)},setScrollContext:function(e){this.scrollContext=e},eraseScrollContext:function(e){delete this.scrollState[e]},saveScrollState:function(){this.scrollState[this.scrollContext]=this.getScrollTop()},restoreScrollState:function(){this.setScrollTop(this.scrollState[this.scrollContext]||0)},scrollToView:function(e,t){e=Ext.get(e),t=t||{},e&&(this.setScrollTop(this.getScrollTop()+e.getY()+(t.offset||0)),this.setScrollLeft(0),t.highlight&&e.highlight())},getScrollTop:function(){return this.getScrollEl().getScroll().top},setScrollTop:function(e){return this.getScrollEl().scrollTo("top",e)},setScrollLeft:function(e){return this.getScrollEl().scrollTo("left",e)},scrollToTop:function(){this.getScrollEl().scrollTo("top")},getScrollEl:function(){return this.body||this.el}}),Ext.define("Docs.ContentGrabber",{singleton:!0,get:function(e){var t,n=Ext.get(e);return n&&(t=n.dom.innerHTML,n.remove()),t}}),Ext.define("Docs.view.comments.HeaderMenu",{extend:"Ext.container.Container",alias:"widget.commentsHeaderMenu",componentCls:"comments-header-menu",html:["<h1>",'  <a href="#" class="users selected">Users</a>','  <a href="#" class="targets">Topics</a>','  <a href="#" class="tags">Tags</a>',"</h1>"].join(""),afterRender:function(){this.callParent(arguments),Ext.Array.forEach(["users","targets","tags"],function(e){var t=this.getEl().down("a."+e);t.on("click",function(n,r){this.getEl().select("a",!0).removeCls("selected"),t.addCls("selected"),this.fireEvent("select",e)},this,{preventDefault:!0})},this)}}),Ext.define("Docs.view.examples.Device",{config:{url:"",id:undefined,device:"phone",orientation:"landscape"},constructor:function(e){this.initConfig(e),Ext.apply(this,this.getIframeSize()),this.id=this.id||Ext.id(),this.tpl=new Ext.XTemplate('<div class="touchExample {device} {orientation}">','<iframe id={id} style="width: {width}; height: {height}; border: 0;" ','src="{[this.deviceUrl(values)]}" title="Software Development Kit"></iframe>',"</div>",{deviceUrl:function(e){return e.url+"?deviceType="+(e.device==="tablet"?"Tablet":"Phone")}})},toHtml:function(){return this.tpl.apply(this)},setDevice:function(e){this.device=e,Ext.apply(this,this.getIframeSize())},setOrientation:function(e){this.orientation=e,Ext.apply(this,this.getIframeSize())},getIframeSize:function(){var e={phone:{width:"481px",height:"320px"},miniphone:{width:"320px",height:"219px"},tablet:{width:"717px",height:"538px"}}[this.device];return this.orientation==="landscape"?e:{width:e.height,height:e.width}}}),Ext.define("Docs.model.Test",{extend:"Ext.data.Model",fields:["id","name","href","code","options",{name:"status",defaultValue:"ready"},"message"]}),Ext.define("Docs.view.examples.InlineToolbar",{extend:"Ext.toolbar.Toolbar",componentCls:"inline-example-tb",height:30,initComponent:function(){this.addEvents("buttonclick"),this.items=[{iconCls:"code",padding:"0 2 0 0",margin:"0 3 0 0",text:"Code Editor",handler:this.createEventFirerer("code")},{padding:0,margin:"0 3 0 0",iconCls:"preview",text:"Live Preview",handler:this.createEventFirerer("preview")},"->",{padding:0,margin:0,iconCls:"copy",text:"Select Code",handler:this.createEventFirerer("copy")}],this.callParent(arguments)},createEventFirerer:function(e){return Ext.Function.bind(function(){this.fireEvent("buttonclick",e)},this)},activateButton:function(e){Ext.Array.each(this.query("button"),function(e){e.removeCls("active")}),Ext.Array.each(this.query("button[iconCls="+e+"]"),function(e){e.addCls("active")})}}),Ext.define("Docs.view.Signature",{singleton:!0,render:function(e,t){t=t||"short";var n=Ext.Array.map(Docs.data.signatures,function(n){return e[n.tagname]?'<span class="'+n.tagname+'">'+n[t]+"</span>":""}).join(" ");return'<span class="signature">'+n+"</span>"}}),Ext.define("Docs.view.DocTree",{extend:"Ext.tree.Panel",alias:"widget.doctree",cls:"doc-tree iScroll",useArrows:!0,rootVisible:!1,border:!1,bodyBorder:!1,initComponent:function(){this.addEvents("urlclick"),this.root.expanded=!0,this.on("itemclick",this.onItemClick,this),this.on("beforeitemcollapse",this.handleBeforeExpandCollapse,this),this.on("beforeitemexpand",this.handleBeforeExpandCollapse,this),this.callParent(),this.nodeTpl=new Ext.XTemplate('<a href="{url}" rel="{url}">{text}</a>'),this.initNodeLinks()},initNodeLinks:function(){this.getRootNode().cascadeBy(this.applyNodeTpl,this)},applyNodeTpl:function(e){e.get("leaf")&&(e.set("text",this.nodeTpl.apply({text:e.get("text"),url:e.raw.url})),e.commit())},onItemClick:function(e,t,n,r,i){var s=t.raw?t.raw.url:t.data.url;s?this.fireEvent("urlclick",s,i):t.isLeaf()||(t.isExpanded()?t.collapse(!1):t.expand(!1))},selectUrl:function(e){var t=this.findNodeByUrl(e);t?(t.bubble(function(e){e.expand()}),this.getSelectionModel().select(t)):this.getSelectionModel().deselectAll()},findNodeByUrl:function(e){return this.getRootNode().findChildBy(function(t){return e===t.raw.url},this,!0)},findRecordByUrl:function(e){var t=this.findNodeByUrl(e);return t?t.raw:undefined},handleBeforeExpandCollapse:function(e){if(this.getView().isAnimating(e))return!1}}),Ext.define("Docs.Tip",{singleton:!0,show:function(e,t,n){n=n||"right",this.tips=this.tips||{};if(this.tips[n]){var r=this.tips[n];r.update(e),r.setTarget(t),r.show()}else{var r=this.tips[n]=Ext.create("Ext.tip.ToolTip",{anchor:n,target:t,html:e});r.show()}}}),Ext.define("Docs.view.comments.Pager",{extend:"Ext.Component",alias:"widget.commentsPager",componentCls:"recent-comments-pager",afterRender:function(){this.callParent(arguments),this.getEl().on("click",function(){this.fireEvent("loadMore",this.offset+this.limit)},this,{preventDefault:!0,delegate:"a.fetchMoreComments"})},configure:function(e){Ext.apply(this,e),this.update(this.getPagerHtml())},reset:function(){this.update("<span></span>No comments found.")},getPagerHtml:function(){var e=this.total_rows||0,t=this.offset+this.limit,n=Math.min(this.limit,e-t);return e>t?["<span></span>",'<a href="#" class="fetchMoreComments" rel="'+t+'">',"Showing comments 1-"+t+" of "+e+". ","Click to load "+n+" more...","</a>"].join(""):"<span></span>That's all. Total "+e+" comments."}}),Ext.define("Docs.view.SimpleSelectBehavior",{mixins:{observable:"Ext.util.Observable"},constructor:function(e,t){this.mixins.observable.constructor.call(this,{listeners:t}),e.on({select:this.onSelect,deselect:this.onDeselect,scope:this})},onSelect:function(e,t){this.selectedItem=t,this.fireEvent("select",t)},onDeselect:function(e,t){this.selectedItem=undefined,Ext.Function.defer(function(){this.selectedItem||this.fireEvent("deselect",t)},10,this)}}),Ext.define("Docs.view.comments.FilterField",{extend:"Ext.form.field.Trigger",alias:"widget.commentsFilterField",triggerCls:"reset",componentCls:"comments-filter-field",hideTrigger:!0,enableKeyEvents:!0,initComponent:function(){this.callParent(arguments),this.on({keyup:this.onKeyUp,specialkey:this.onSpecialKey,scope:this})},onKeyUp:function(){this.fireEvent("filter",this.getValue()),this.setHideTrigger(this.getValue().length===0)},onSpecialKey:function(e,t){t.keyCode===Ext.EventObject.ESC&&(this.reset(),this.fireEvent("filter",""))},onTriggerClick:function(){this.reset(),this.focus(),this.fireEvent("filter",""),this.setHideTrigger(!0)}}),Ext.define("Docs.view.comments.TopList",{extend:"Ext.panel.Panel",componentCls:"comments-toplist",requires:["Docs.view.SimpleSelectBehavior","Docs.view.comments.FilterField"],layout:"border",displayField:"text",scoreField:"score",filterEmptyText:"Filter by name...",initComponent:function(){this.items=[this.tabpanel=Ext.widget("tabpanel",{plain:!0,region:"north",height:50,items:[{title:"By comment count"}],dockedItems:[{dock:"bottom",items:[{xtype:"commentsFilterField",emptyText:this.filterEmptyText,width:320,height:20,listeners:{filter:this.onFilter,scope:this}}]}]}),this.list=Ext.widget("dataview",{region:"center",cls:"iScroll top-list",autoScroll:!0,store:new Ext.data.Store({model:this.model}),allowDeselect:!0,tpl:["<ul>",'<tpl for=".">',"<li>",'<span class="score">{'+this.scoreField+"}</span>",'<span class="text">{'+this.displayField+"}</span>","</li>","</tpl>","</ul>"],itemSelector:"li"})],new Docs.view.SimpleSelectBehavior(this.list,{select:this.onSelect,deselect:this.onDeselect,scope:this}),this.callParent(arguments)},afterRender:function(){this.callParent(arguments),this.list.getStore().load()},onFilter:function(e){this.list.getSelectionModel().deselectAll(),this.list.getStore().clearFilter(!0),this.list.getStore().filter({property:this.displayField,value:e,anyMatch:!0})},deselectAll:function(){this.list.getSelectionModel().deselectAll()},onSelect:function(e){this.fireEvent("select",e)},onDeselect:function(){this.fireEvent("select",undefined)}}),Ext.define("Docs.view.cls.MemberWrap",{constructor:function(e){Ext.apply(this,e),this.el=Ext.get(e.el)},setExpanded:function(e){e?this.isExpanded()||this.el.addCls("open"):this.el.removeCls("open")},isExpanded:function(){return this.el.hasCls("open")},getDefinedIn:function(){return this.el.down(".meta .defined-in").getAttribute("rel")},getMemberId:function(){return this.el.getAttribute("id")}}),Ext.define("Docs.view.examples.InlineEditor",{extend:"Ext.Panel",bodyPadding:2,autoScroll:!0,componentCls:"inline-example-editor",initComponent:function(){this.addEvents("init","change"),this.on("afterlayout",this.initCodeMirror,this),this.callParent(arguments)},initCodeMirror:function(e){this.codemirror||(this.codemirror=CodeMirror(this.body,{mode:"javascript",indentUnit:4,value:this.value,extraKeys:{Tab:"indentMore","Shift-Tab":"indentLess"},onChange:Ext.Function.bind(function(e){this.fireEvent("change")},this)}),this.fireEvent("init"))},refresh:function(){this.codemirror.refresh()},getValue:function(){return this.codemirror?this.codemirror.getValue():this.value},getHeight:function(){var e=this.el.down(".CodeMirror-lines");return e?e.getHeight():undefined},selectAll:function(){var e=this.codemirror.lineCount()-1,t=this.codemirror.getLine(e).length;this.codemirror.setSelection({line:0,ch:0},{line:e,ch:t})}}),Ext.define("Docs.view.examples.InlinePreview",{extend:"Ext.Panel",requires:["Docs.view.examples.Device"],bodyPadding:"0 10",statics:{iframeCounter:0,getNextIframeId:function(){return this.iframeCounter++,this.iframeCounter.toString()}},options:{},constructor:function(e){e=e||{},e.iframeId=this.self.getNextIframeId(),e.id="inline-preview-"+e.iframeId,this.callParent([e]),this.addEvents(["previewsuccess","previewfailure"])},initComponent:function(){this.html=this.getHtml(),this.callParent(arguments)},getHtml:function(){if(Docs.data.touchExamplesUi)return Ext.create("Docs.view.examples.Device",{url:"eg-iframe.html",id:this.iframeId,device:this.options.device,orientation:this.options.orientation}).toHtml();var e=new Ext.XTemplate('<iframe id="{id}" style="width: 100%; height: 100%; border: 0" frameBorder="0" title="Software Development Kit"></iframe>');return e.apply({id:this.iframeId})},update:function(e){var t=this.options,n=Ext.get(this.iframeId),r=Ext.Function.bind(this.iframeCallback,this);n&&(n.on("load",function(){Ext.Function.defer(function(){n.dom.contentWindow.loadInlineExample(e+"\n",t,r)},100)},this,{single:!0}),n.dom.src="eg-iframe.html")},iframeCallback:function(e,t){e?this.fireEvent("previewsuccess",this):this.fireEvent("previewfailure",this,t)},getHeight:function(){return document.getElementById(this.iframeId).parentNode.clientHeight}}),Ext.define("Docs.view.cls.Logic",{showPrivateClasses:!1,constructor:function(e){Ext.apply(this,e)}}),Ext.define("Docs.view.comments.Form",{extend:"Ext.Component",alias:"widget.commentsForm",requires:["Docs.Tip"],tpl:['<form class="commentForm <tpl if="!updateComment">newComment</tpl>">','<tpl if="title">',"<p>{title}</p>","</tpl>","<textarea>{content}</textarea>",'<div class="com-meta">',"{[Docs.Comments.avatar(values.user.emailHash)]}",'<div class="form-author">Logged in as {user.userName}</div>','<tpl if="!updateComment">','<label class="subscribe">','Email updates? <input type="checkbox" class="subscriptionCheckbox" <tpl if="userSubscribed">checked="checked"</tpl> />','<span class="sep"> | </span>',"</label>","</tpl>",'<a href="#" class="toggleCommentGuide">Show help &#8595;</a>','<input type="submit" class="sub submitComment" value="{[values.updateComment ? "Update" : "Post"]} comment" />','<tpl if="updateComment">',' or <a href="#" class="cancelUpdateComment">cancel</a>',"</tpl>","</div>",'<div class="commentGuideTxt" style="display: none;">',"<ul>",'<li>Use <strong><a href="http://daringfireball.net/projects/markdown/syntax" target="_blank">Markdown</a></strong>'," for formatting:</li>","</ul>",'<div class="markdown preview">',"<h4>Markdown</h4>","<pre>","**Bold**, _italic_\n","and `monospaced font`.\n","\n","    Indent with 4 spaces\n","    for a code block.\n","\n","1. numbered lists\n","2. are cool\n","\n","- bulleted lists\n","- make your point\n","\n","[External link](http//example.com)\n","\n","Leave a blank line\n","between paragraphs.\n","</pre>","</div>",'<div class="markdown result">',"<h4>Result</h4>","<strong>Bold</strong>, <em>italic</em> and<br/>","<code>monospaced font</code>.<br/>",'<pre class="prettyprint">',"Indent with 4 spaces\n","for a code block.","</pre>","<ol>","<li>numbered lists</li>","<li>are cool</li>","</ol>","<ul>","<li>bulleted lists</li>","<li>make your point</li>","</ul>",'<a href="http://example.com">External link</a><br/>',"<br/>","Leave a blank line between paragraphs.<br/><br/>","</div>","<ul>","<li>Use comments to:","<ul>","<li>Inform us about <strong>bugs in documentation.</strong></li>","<li>Give <strong>useful tips</strong> to other developers.</li>","<li><strong>Warn about bugs</strong> and problems that might bite.</li>","</ul>","</li>","<li>Don't post comments for:","<ul>","<li><strong>Questions about code or usage</strong>",' - use the <a href="http://www.sencha.com/forum" target="_blank">Sencha Forum</a>.</li>',"<li><strong>SDK bugs</strong>",' - use the <a href="http://www.sencha.com/forum" target="_blank">Sencha Forum</a>.</li>',"<li><strong>Docs App bugs</strong>",' - use the <a href="https://github.com/senchalabs/jsduck/issues" target="_blank">GitHub Issue tracker</a>.</li>',"</ul></li>","<li>Comments may be edited or deleted at any time by a moderator.</li>",'<li>Avatars can be managed at <a href="http://www.gravatar.com" target="_blank">Gravatar</a> (use your forum email address).</li>',"<li>To write a reply use <strong><code>@username</code></strong> syntax &ndash; the user will get notified.</li>","</ul>","</div>","</form>"],initComponent:function(){this.data={title:this.title,updateComment:this.content!==undefined,content:this.content,userSubscribed:this.userSubscribed,user:this.user},this.callParent(arguments)},setValue:function(e){this.codeMirror.setValue(e)},afterRender:function(){this.callParent(arguments),this.makeCodeMirror(this.getEl().down("textarea").dom),this.bindEvents()},makeCodeMirror:function(e){var t=!0;this.codeMirror=CodeMirror.fromTextArea(e,{mode:"markdown",lineWrapping:!0,indentUnit:4,extraKeys:{Tab:"indentMore","Shift-Tab":"indentLess"},onFocus:Ext.Function.bind(function(){t&&this.codeMirror.getValue()===""&&this.toggleGuide(!0),t=!1},this)})},bindEvents:function(){this.getEl().on("click",function(){this.toggleGuide()},this,{preventDefault:!0,delegate:"a.toggleCommentGuide"}),this.getEl().on("click",function(){this.fireEvent("cancel")},this,{preventDefault:!0,delegate:"a.cancelUpdateComment"}),this.getEl().on("click",function(){this.fireEvent("submit",this.codeMirror.getValue())},this,{preventDefault:!0,delegate:"input.submitComment"}),this.getEl().on("click",function(e,t){this.fireEvent("subscriptionChange",Ext.get(t).dom.checked)},this,{delegate:"input.subscriptionCheckbox"})},toggleGuide:function(e){var t=this.getEl().down(".commentGuideTxt");t.setVisibilityMode(Ext.dom.Element.DISPLAY);var n=this.getEl().down(".toggleCommentGuide");!t.isVisible()||e===!0?(t.show(!0),n.update("Hide help &#8593;")):(t.hide(!0),n.update("Show help &#8595;"))},showSubscriptionMessage:function(e){var t=this.getEl().down("input.subscriptionCheckbox"),n=e?"Updates to this thread will be e-mailed to you":"You have unsubscribed from this thread";Docs.Tip.show(n,t,"bottom")}}),Ext.define("Docs.view.comments.DragZone",{extend:"Ext.dd.DragZone",constructor:function(e,t){this.view=e,this.callParent([e.getEl(),t])},getDragData:function(e){var t=e.getTarget("img.drag-handle",10);if(t){var n=Ext.fly(t).up(this.view.itemSelector).dom;return{sourceEl:n,repairXY:Ext.fly(n).getXY(),ddel:this.cloneCommentEl(n),comment:this.view.getRecord(n)}}return!1},cloneCommentEl:function(e){var t=e.cloneNode(!0),n=Ext.fly(t).down(".comments-list-with-form");return n&&n.remove(),t.id=Ext.id(),t},getRepairXY:function(){return this.dragData.repairXY}}),Ext.define("Docs.view.comments.DropZone",{extend:"Ext.dd.DropZone",constructor:function(e,t){this.view=e,this.callParent([e.getEl(),t])},getTargetFromEvent:function(e){return e.getTarget(this.view.itemSelector,10)},onNodeEnter:function(e,t,n,r){this.isValidDropTarget(e,r)&&Ext.fly(e).addCls("drop-target-hover")},onNodeOut:function(e,t,n,r){Ext.fly(e).removeCls("drop-target-hover")},onNodeOver:function(e,t,n,r){return this.isValidDropTarget(e,r)?this.dropAllowed:!1},isValidDropTarget:function(e,t){var n=this.view.getRecord(e);return n&&n.get("id")!==t.comment.get("id")},onNodeDrop:function(e,t,n,r){return this.isValidDropTarget(e,r)?(this.onValidDrop(r.comment,this.view.getRecord(e)),!0):!1},onValidDrop:Ext.emptyFn}),Ext.define("Docs.view.comments.TopLevelDropZone",{extend:"Ext.dd.DropZone",getTargetFromEvent:function(e){return e.getTarget("a.side.toggleComments",10)},onNodeEnter:function(e,t,n,r){this.isValidDropTarget(r)&&Ext.fly(e).addCls("drop-target-hover")},onNodeOut:function(e,t,n,r){Ext.fly(e).removeCls("drop-target-hover")},onNodeOver:function(e,t,n,r){return this.isValidDropTarget(r)?this.dropAllowed:!1},isValidDropTarget:function(e){return!!e.comment.get("parentId")},onNodeDrop:function(e,t,n,r){return this.isValidDropTarget(r)?(this.onValidDrop(r.comment,undefined),!0):!1},onValidDrop:Ext.emptyFn}),Ext.define("Docs.Comments",{extend:"Ext.util.Observable",singleton:!0,requires:["Docs.Auth","Docs.CommentCounts","Docs.CommentSubscriptions","Ext.data.JsonP","Ext.Ajax"],init:function(e,t){if(!(Docs.data.commentsUrl&&Docs.data.commentsDomain&&this.isBrowserSupported())){e.call(t);return}Docs.Auth.init(function(n){n?(this.enabled=!0,this.fetchCountsAndSubscriptions(function(n,r){this.counts=new Docs.CommentCounts(n),this.subscriptions=new Docs.CommentSubscriptions(r),e.call(t)},this)):e.call(t)},this)},isBrowserSupported:function(){return"withCredentials"in new XMLHttpRequest||Ext.ieVersion>=8},fetchCountsAndSubscriptions:function(e,t){this.request("jsonp",{url:"/comments_meta",method:"GET",success:function(n){e.call(t,n.comments,n.subscriptions)},scope:this})},loadSubscriptions:function(e,t){this.fetchSubscriptions(function(n){this.subscriptions=new Docs.CommentSubscriptions(n),e.call(t)},this)},clearSubscriptions:function(){this.subscriptions=new Docs.CommentSubscriptions([])},fetchSubscriptions:function(e,t){this.request("jsonp",{url:"/subscriptions",method:"GET",success:function(n){e.call(t,n.subscriptions)},scope:this})},isEnabled:function(){return this.enabled},getCount:function(e){return this.enabled?this.counts.get(e):0},changeCount:function(e,t){var n=this.counts.change(e,t);this.fireEvent("countChange",e,n)},hasSubscription:function(e){return this.subscriptions.has(e)},getClassTotalCount:function(e){return this.counts.getClassTotal(e)},load:function(e,t,n){this.request("jsonp",{url:"/comments",method:"GET",params:{startkey:Ext.JSON.encode(e)},success:t,scope:n})},loadReplies:function(e,t,n){this.request("jsonp",{url:"/replies",method:"GET",params:{parentId:e},success:t,scope:n})},post:function(e){this.request("ajax",{url:"/comments",method:"POST",params:{target:Ext.JSON.encode(e.target),parentId:e.parentId,comment:e.content,url:this.buildPostUrl(e.target)},callback:function(t,n,r){var i=Ext.JSON.decode(r.responseText);n&&i.success&&(this.changeCount(e.target,1),e.callback&&e.callback.call(e.scope,i.comment))},scope:this})},buildPostUrl:function(e){var t=e[0],n=e[1],r=e[2];if(t=="video")var i="#!/video/"+n;else if(t=="guide")var i="#!/guide/"+n;else var i="#!/javascriptapi/"+n+(r?"-"+r:"");return"http://"+window.location.host+window.location.pathname+i},subscribe:function(e,t,n,r){this.request("ajax",{url:"/subscribe",method:"POST",params:{target:Ext.JSON.encode(e),subscribed:t},callback:function(i,s,o){var u=Ext.JSON.decode(o.responseText);s&&u.success&&(this.subscriptions.set(e,t),n&&n.call(r))},scope:this})},request:function(e,t){t.url=this.buildRequestUrl(t.url),e==="jsonp"?Ext.data.JsonP.request(t):(t.cors=!0,Ext.Ajax.request(t))},buildRequestUrl:function(e){return e=Docs.data.commentsUrl+"/"+Docs.data.commentsDomain+e,e+(e.match(/\?/)?"&":"?")+"sid="+Docs.Auth.getSid()},avatar:function(e,t){return'<img class="avatar '+(t||"")+'" width="25" height="25" src="http://www.gravatar.com/avatar/'+e+'?s=25&amp;r=PG&amp;d=identicon">'},counterHtml:function(e){return e>0?'<span class="comment-counter-small">'+e+"</span>":""}}),Ext.define("Docs.controller.Auth",{extend:"Ext.app.Controller",requires:["Docs.Auth","Docs.Comments"],refs:[{ref:"authHeaderForm",selector:"authHeaderForm"}],init:function(){this.control({"authHeaderForm, authForm":{login:this.login,logout:this.logout}});var e=this.getController("Tabs");e.onLaunch=Ext.Function.createSequence(e.onLaunch,this.afterTabsLaunch,this)},afterTabsLaunch:function(){Docs.Comments.isEnabled()&&(Docs.Auth.isLoggedIn()?this.setLoggedIn():this.setLoggedOut())},login:function(e,t,n,r){Docs.Auth.login({username:t,password:n,remember:r,success:this.setLoggedIn,failure:function(t){e.showMessage(t)},scope:this})},logout:function(e){Docs.Auth.logout(this.setLoggedOut,this)},setLoggedIn:function(){Docs.Comments.loadSubscriptions(function(){this.getAuthHeaderForm().showLoggedIn(Docs.Auth.getUser()),this.eachCmp("commentsListWithForm",function(e){e.showCommentingForm()}),this.eachCmp("commentsList",function(e){e.refresh()}),this.getController("Tabs").showCommentsTab()},this)},setLoggedOut:function(){Docs.Comments.clearSubscriptions(),this.getAuthHeaderForm().showLoggedOut(),this.eachCmp("commentsListWithForm",function(e){e.showAuthForm()}),this.eachCmp("commentsList",function(e){e.refresh()}),this.getController("Tabs").hideCommentsTab()},eachCmp:function(e,t,n){Ext.Array.forEach(Ext.ComponentQuery.query(e),t,n)}}),Ext.define("Docs.controller.Welcome",{extend:"Docs.controller.Content",baseUrl:"#",refs:[{ref:"viewport",selector:"#viewport"},{ref:"index",selector:"#welcomeindex"}],init:function(){this.addEvents("loadIndex")},loadIndex:function(){this.fireEvent("loadIndex"),Ext.getCmp("treecontainer").hide(),this.callParent([!0])},isActive:function(){return!!this.getIndex().getTab()}}),Ext.define("Docs.controller.Failure",{extend:"Docs.controller.Content",baseUrl:"#",refs:[{ref:"viewport",selector:"#viewport"},{ref:"index",selector:"#failure"}],show404:function(e){var t=new Ext.XTemplate("<h1>Sorry...</h1>","<p>{msg}</p>");Ext.getCmp("failure").update(t.apply({msg:e})),Ext.getCmp("card-panel").layout.setActiveItem("failure")}}),Ext.define("Docs.controller.Classes",{extend:"Docs.controller.Content",baseUrl:"#!/javascriptapi",title:"DEXT5 API Documentation",requires:["Docs.History","Docs.Syntax","Docs.ClassRegistry"],refs:[{ref:"viewport",selector:"#viewport"},{ref:"index",selector:"#classindex"},{ref:"header",selector:"classheader"},{ref:"overview",selector:"classoverview"},{ref:"tabPanel",selector:"classtabpanel"},{ref:"tree",selector:"#classtree"},{ref:"favoritesGrid",selector:"#favorites-grid"}],cache:{},init:function(){this.addEvents("showIndex","showClass","showMember"),Ext.getBody().addListener("click",function(e,t){this.handleUrlClick(decodeURI(t.href),e)},this,{preventDefault:!0,delegate:".docClass"}),this.control({classtree:{urlclick:function(e,t){this.handleUrlClick(e,t,this.getTree())}},toolbar:{toggleExpanded:function(e){this.getOverview().setAllMembersExpanded(e)}},classoverview:{afterrender:function(e){e.el.addListener("click",function(e,t){var n=Ext.get(t).up(".member"),r=n.down(".meta .defined-in"),i=r.getAttribute("rel"),s=n.getAttribute("id");this.getOverview().isMemberExpanded(s)?this.setExpanded(s,!1):(this.setExpanded(s,!0),this.fireEvent("showMember",i,s))},this,{preventDefault:!0,delegate:".expandable"}),e.el.addListener("click",Ext.emptyFn,this,{preventDefault:!0,delegate:".not-expandable"})}},treecontainer:{afterrender:function(e){e.el.addListener("dblclick",function(){e.getWidth()<30?e.setWidth(e.expandedWidth):(e.expandedWidth=e.getWidth(),e.setWidth(20))},this,{delegate:".x-resizable-handle"})}},doctabs:{tabClose:function(e){this.getOverview().eraseScrollContext(e)}}})},setExpanded:function(e,t){var n=this.currentCls;n.expanded||(n.expanded={}),this.getOverview().setMemberExpanded(e,t),t?n.expanded[e]=t:delete n.expanded[e]},applyExpanded:function(e){Ext.Object.each(e.expanded||{},function(e){Ext.get(e).addCls("open")},this)},handleUrlClick:function(e,t,n){e=Docs.History.cleanUrl(e),this.opensNewWindow(t)?(window.open(e),n&&n.selectUrl(this.currentCls?"#!/javascriptapi/"+this.currentCls.name:"")):this.loadClass(e)},loadIndex:function(e){Ext.getCmp("treecontainer").showTree("classtree"),this.callParent(arguments),this.fireEvent("showIndex")},loadClass:function(e,t){Ext.getCmp("card-panel").layout.setActiveItem("classcontainer"),Ext.getCmp("treecontainer").showTree("classtree"),t||Docs.History.push(e);var n=e.match(/^#!\/javascriptapi\/(.*?)(?:-(.*))?$/),r=Docs.ClassRegistry.canonicalName(n[1]),i=n[2];this.getOverview()&&this.getOverview().setLoading(!0),this.cache[r]?this.showClass(this.cache[r],i):(this.cache[r]="in-progress",Ext.data.JsonP.request({url:this.getBaseUrl()+"/api/"+r+".js",callbackName:r.replace(/\./g,"_"),success:function(e,t){this.cache[r]=e,this.showClass(e,i)},failure:function(e,t){this.cache[r]=!1,this.getOverview().setLoading(!1),this.getController("Failure").show404("Class <b>"+Ext.String.htmlEncode(r)+"</b> was not found.")},scope:this}))},showClass:function(e,t){var n=!1;if(e==="in-progress")return;this.getOverview().setLoading(!1),this.getViewport().setPageTitle(e.name),this.currentCls!==e&&(this.currentCls=e,this.getHeader().load(e),this.getOverview().load(e),this.applyExpanded(e),n=!0),this.currentCls=e,this.getOverview().setScrollContext("#!/javascriptapi/"+e.name),t?(this.getOverview().scrollToEl("#"+t),this.fireEvent("showMember",e.name,t)):this.getOverview().restoreScrollState(),this.getTree().selectUrl("#!/javascriptapi/"+e.name),this.fireEvent("showClass",e.name,{reRendered:n})}}),Ext.define("Docs.controller.Search",{extend:"Ext.app.Controller",requires:["Docs.ClassRegistry","Docs.GuideSearch","Docs.store.Search","Docs.History"],stores:["Search"],refs:[{ref:"field",selector:"#search-field"}],pageIndex:0,pageSize:10,basicSearchDelay:50,guideSearchDelay:500,dropdownHideDelay:500,init:function(){this.control({"#search-dropdown":{itemclick:function(e,t){this.loadRecord(t)},changePage:function(e,t){this.pageIndex+=t,this.displayResults(),this.keepDropdown()},footerClick:function(e){this.keepDropdown()}},"#search-field":{keyup:function(e,t){var n=this.getDropdown();e.setHideTrigger(e.getValue().length===0);if(t.keyCode===Ext.EventObject.ESC||!e.value){n.hide(),e.setValue("");return}n.show();var r=n.getSelectionModel(),i=r.getLastSelected(),s=n.store.indexOf(i),o=n.store.getCount()-1;t.keyCode===Ext.EventObject.UP?s===undefined?r.select(0):r.select(s===0?o:s-1):t.keyCode===Ext.EventObject.DOWN?s===undefined?r.select(0):r.select(s===o?0:s+1):t.keyCode===Ext.EventObject.ENTER?(t.preventDefault(),i&&this.loadRecord(i)):(this.pageIndex=0,clearTimeout(this.searchTimeout),this.searchTimeout=Ext.Function.defer(function(){this.search(e.value)},this.basicSearchDelay,this))},focus:function(e){e.value&&this.getDropdown().store.getCount()>0&&this.getDropdown().show()},blur:function(){var e=this.getDropdown();this.hideTimeout=Ext.Function.defer(e.hide,this.dropdownHideDelay,e)}}})},getDropdown:function(){return this.dropdown||(this.dropdown=Ext.getCmp("search-dropdown"))},keepDropdown:function(){clearTimeout(this.hideTimeout),this.getField().focus()},loadRecord:function(e){Docs.History.navigate(e.get("url")),this.getDropdown().hide()},search:function(e){if(e===this.previousTerm)return;this.previousTerm=e,this.basicSearch(e),Docs.GuideSearch.isEnabled()&&this.guideSearch(e)},guideSearch:function(e){Docs.GuideSearch.deferredSearch(e,function(t){this.basicSearch(e,t)},this,this.guideSearchDelay)},basicSearch:function(e,t){this.displayResults(Docs.ClassRegistry.search(e,t))},displayResults:function(e){e=e||this.previousResults,this.pageIndex<0?this.pageIndex=0:this.pageIndex>Math.floor(e.length/this.pageSize)&&(this.pageIndex=Math.floor(e.length/this.pageSize));var t=this.pageIndex*this.pageSize,n=t+this.pageSize;this.getDropdown().setTotal(e.length),this.getDropdown().setStart(t),this.getDropdown().getStore().loadData(e.slice(t,n)),this.getDropdown().alignTo("search-field","bl",[-12,-2]),e.length>0&&this.getDropdown().getSelectionModel().select(0),this.previousResults=e}}),Ext.define("Docs.controller.Examples",{extend:"Docs.controller.Content",baseUrl:"#!/example",title:"Examples",refs:[{ref:"viewport",selector:"#viewport"},{ref:"index",selector:"#exampleindex"},{ref:"tree",selector:"#exampletree"},{ref:"page",selector:"#example"}],init:function(){this.addEvents("showExample"),this.control({"#exampletree":{urlclick:function(e,t){this.loadExample(e)}},"exampleindex > thumblist":{urlclick:function(e){this.loadExample(e)}},"touchexamplecontainer, examplecontainer":{afterrender:function(e){e.el.addListener("click",function(e,t){this.openInNewWindow()},this,{delegate:"button.new-window"})}},touchexamplecontainer:{afterrender:function(e){e.el.addListener("click",function(e,t){this.changeDevice("tablet")},this,{delegate:"button.tablet"}),e.el.addListener("click",function(e,t){this.changeDevice("phone")},this,{delegate:"button.phone"}),e.el.addListener("click",function(e,t){this.changeOrientation("portrait")},this,{delegate:"button.portrait"}),e.el.addListener("click",function(e,t){this.changeOrientation("landscape")},this,{delegate:"button.landscape"})}}})},loadIndex:function(){Ext.getCmp("treecontainer").showTree("exampletree"),this.callParent()},loadExample:function(e,t){var n=this.getExample(e);if(!n){this.getController("Failure").show404("Example <b>"+Ext.String.htmlEncode(e)+"</b> was not found.");return}this.getViewport().setPageTitle(n.text),this.activeUrl!==e?(this.getPage().clear(),this.activateExampleCard(),this.getPage().load(n)):this.activateExampleCard(),t||Docs.History.push(e),this.fireEvent("showExample",e),this.getTree().selectUrl(e),this.activeUrl=e},activateExampleCard:function(){Ext.getCmp("card-panel").layout.setActiveItem("example"),Ext.getCmp("treecontainer").showTree("exampletree")},getExample:function(e){return this.map||(this.map={},Ext.Array.forEach(Docs.data.examples,function(e){Ext.Array.forEach(e.items,function(e){this.map["#!/example/"+e.name]=e},this)},this)),this.map[e]},changeOrientation:function(e){this.getPage().setOrientation(e)},changeDevice:function(e){this.getPage().setDevice(e)},openInNewWindow:function(){window.open(this.getExample(this.activeUrl).url)}}),Ext.define("Docs.controller.Guides",{extend:"Docs.controller.Content",baseUrl:"#!/guide",title:"Guides",refs:[{ref:"viewport",selector:"#viewport"},{ref:"index",selector:"#guideindex"},{ref:"tree",selector:"#guidetree"},{ref:"guide",selector:"#guide"}],cache:{},init:function(){this.addEvents("showGuide"),this.control({"#guidetree":{urlclick:function(e,t){this.handleUrlClick(e,t,this.getTree())}},"guideindex > thumblist":{urlclick:function(e){this.loadGuide(e)}},indexcontainer:{afterrender:function(e){e.el.addListener("click",function(e,t){this.handleUrlClick(t.href,e)},this,{preventDefault:!0,delegate:".guide"})}},doctabs:{tabClose:function(e){this.getGuide().eraseScrollContext(e)}}})},handleUrlClick:function(e,t,n){e=e.replace(/.*#!?/,"#!"),this.opensNewWindow(t)?(window.open(e),n&&n.selectUrl(this.activeUrl?this.activeUrl:"")):this.loadGuide(e)},loadIndex:function(){Ext.getCmp("treecontainer").showTree("guidetree"),this.callParent()},loadGuide:function(e,t){Ext.getCmp("card-panel").layout.setActiveItem("guide"),Ext.getCmp("treecontainer").showTree("guidetree");var n=e.match(/^#!\/guide\/(.*?)(-section-.*)?$/),r=n[1],i=n[2];e="#!/guide/"+r,t||Docs.History.push(e),!this.cache[r]||this.cache[r].embededScript!=null&&this.cache[r].runScript!=null?(this.cache[r]="in-progress",Ext.data.JsonP.request({url:this.getBaseUrl()+"/guides/"+r+"/README.js",callbackName:r,success:function(t){this.cache[r]=t,this.showGuide(t,e,r,i)},failure:function(e,t){this.cache[r]=!1,this.getController("Failure").show404("Guide <b>"+Ext.String.htmlEncode(r)+"</b> was not found.")},scope:this})):this.showGuide(this.cache[r],e,r,i)},showGuide:function(i,j,f,h){var g=!1;if(i==="in-progress")return;this.getViewport().setPageTitle(i.title),this.activeUrl!==j&&(Ext.getCmp("guide").load({name:f,content:i.guide}),g=!0);if(i.embededScript!=null){var embededScriptBlock=document.getElementById("embededScriptBlock");embededScriptBlock&&(embededScriptBlock.innerHTML=i.embededScript)}i.runScript!=null&&eval(i.runScript),this.activeUrl=j,this.getGuide().setScrollContext(this.activeUrl),h?this.getGuide().scrollToEl(f+h):this.getGuide().restoreScrollState(),this.fireEvent("showGuide",f,{reRendered:g}),this.getTree().selectUrl(j)}}),Ext.define("Docs.controller.Videos",{extend:"Docs.controller.Content",baseUrl:"#!/video",title:"Videos",refs:[{ref:"viewport",selector:"#viewport"},{ref:"index",selector:"#videoindex"},{ref:"tree",selector:"#videotree"}],init:function(){this.addEvents("showVideo"),this.control({"#videotree":{urlclick:function(e){this.loadVideo(e)}},"videoindex > thumblist":{urlclick:function(e){this.loadVideo(e)}}})},loadIndex:function(){Ext.getCmp("treecontainer").showTree("videotree"),this.callParent()},loadVideo:function(e,t){var n=!1;Ext.getCmp("card-panel").layout.setActiveItem("video"),Ext.getCmp("treecontainer").showTree("videotree");var r=e.match(/^#!\/video\/(.*)$/)[1],i=this.getVideo(r);if(!i){this.getController("Failure").show404("Video <b>"+Ext.String.htmlEncode(r)+"</b> was not found.");return}this.getViewport().setPageTitle(i.title),this.activeUrl!==e&&(Ext.getCmp("video").load(i),n=!0),t||Docs.History.push(e),this.fireEvent("showVideo",r,{reRendered:n}),this.getTree().selectUrl(e),this.activeUrl=e},getVideo:function(e){return this.map||(this.map={},Ext.Array.forEach(Docs.data.videos,function(e){Ext.Array.forEach(e.items,function(e){this.map[e.name]=e},this)},this)),this.map[e]}}),Ext.define("Docs.controller.CommentCounts",{extend:"Ext.app.Controller",requires:["Docs.Comments"],refs:[{ref:"class",selector:"classoverview"},{ref:"classIndex",selector:"#classindex"},{ref:"guide",selector:"#guide"},{ref:"guideIndex",selector:"#guideindex"},{ref:"video",selector:"#video"},{ref:"videoIndex",selector:"#videoindex"}],init:function(){Docs.Comments.on("countChange",this.updateCounts,this)},updateCounts:function(e,t){this.getClass().updateCommentCounts(),this.getClassIndex().updateCommentCounts(),this.getGuide().updateCommentCounts(),this.getGuideIndex().updateCommentCounts(),this.getVideo().updateCommentCounts(),this.getVideoIndex().updateCommentCounts()}}),Ext.define("Docs.controller.Tests",{extend:"Docs.controller.Content",baseUrl:"#!/tests",refs:[{ref:"viewport",selector:"#viewport"},{ref:"index",selector:"#testsindex"}],init:function(){this.addEvents("loadIndex"),this.control({"#testsgrid":{afterrender:this.loadExamples}})},loadIndex:function(){this.fireEvent("loadIndex"),Ext.getCmp("treecontainer").hide(),this.callParent([!0])},isActive:function(){return!!this.getIndex().getTab()},loadExamples:function(){this.getIndex().disable(),Ext.data.JsonP.request({url:this.getBaseUrl()+"/inline-examples.js",callbackName:"__inline_examples__",success:function(e){this.getIndex().addExamples(e),this.getIndex().enable()},scope:this})}}),Ext.define("Docs.store.Settings",{extend:"Ext.data.Store",requires:["Docs.model.Setting"],model:"Docs.model.Setting"}),Ext.define("Docs.Settings",{extend:"Docs.LocalStore",singleton:!0,requires:"Docs.store.Settings",storeName:"Docs.store.Settings",defaults:{show:{"public":!0,"protected":!1,"private":!1,deprecated:!1,removed:!1,inherited:!0,accessor:!0},comments:{hideRead:!1},showPrivateClasses:!1,classTreeLogic:"PackageLogic"},set:function(e,t){var n=this.store.findExact("key",e);n>-1&&this.store.removeAt(n),this.store.add({key:e,value:t}),this.syncStore()},get:function(e){var t=this.store.findExact("key",e);return t>-1?this.store.getAt(t).get("value"):this.defaults[e]}}),Ext.define("Docs.controller.Tabs",{extend:"Ext.app.Controller",requires:["Docs.History","Docs.Settings"],refs:[{ref:"welcomeIndex",selector:"#welcomeindex"},{ref:"classIndex",selector:"#classindex"},{ref:"guideIndex",selector:"#guideindex"},{ref:"videoIndex",selector:"#videoindex"},{ref:"exampleIndex",selector:"#exampleindex"},{ref:"testsIndex",selector:"#testsindex"},{ref:"commentIndex",selector:"#commentindex"},{ref:"classTree",selector:"#classtree"},{ref:"guideTree",selector:"#guidetree"},{ref:"exampleTree",selector:"#exampletree"},{ref:"videoTree",selector:"#videotree"},{ref:"doctabs",selector:"#doctabs"}],init:function(){this.getController("Classes").addListener({showClass:function(e){this.addTabFromTree("#!/javascriptapi/"+e)},scope:this}),this.getController("Guides").addListener({showGuide:function(e){this.addTabFromTree("#!/guide/"+e)},scope:this}),this.getController("Examples").addListener({showExample:function(e){this.addTabFromTree(e)},scope:this}),this.getController("Videos").addListener({showVideo:function(e){this.addTabFromTree("#!/video/"+e)},scope:this}),this.control({"[componentCls=doctabs]":{tabActivate:function(e,t){Docs.History.push(e,t)},scope:this}})},onLaunch:function(){this.getDoctabs().setStaticTabs(Ext.Array.filter([this.getWelcomeIndex().getTab(),this.getGuideIndex().getTab(),this.getExampleIndex().getTab(),this.getClassIndex().getTab(),this.getVideoIndex().getTab(),this.getTestsIndex().getTab()],function(e){return e})),this.commentsTab=this.getCommentIndex().getTab();var e=Docs.Settings.get("tabs");e&&Ext.Array.forEach(e,function(e){this.addTabFromTree(e,{animate:!1})},this),Docs.History.notifyTabsLoaded()},showCommentsTab:function(){var e=this.getDoctabs().getStaticTabs();this.getDoctabs().setStaticTabs(e.concat(this.commentsTab))},hideCommentsTab:function(){var e=this.getDoctabs().getStaticTabs();this.getDoctabs().setStaticTabs(Ext.Array.remove(e,this.commentsTab))},addTabFromTree:function(e,t){var n=this.getTree(e),r=n.findRecordByUrl(e);r&&this.addTab(r,t)},addTab:function(e,t){t=t||{animate:!0,activate:!0},this.getDoctabs().addTab({href:e.url,text:e.text,iconCls:e.iconCls},t)},getTree:function(e){return/#!?\/javascriptapi/.test(e)?this.getClassTree():/#!?\/guide/.test(e)?this.getGuideTree():/#!?\/video/.test(e)?this.getVideoTree():/#!?\/example/.test(e)?this.getExampleTree():this.getClassTree()}}),Ext.define("Docs.controller.Comments",{extend:"Docs.controller.Content",baseUrl:"#!/comment",title:"Comments",requires:["Docs.Settings","Docs.Comments"],refs:[{ref:"viewport",selector:"#viewport"},{ref:"index",selector:"#commentindex"},{ref:"commentsFullList",selector:"commentsFullList"}],recentCommentsSettings:{},init:function(){this.control({commentsFullList:{hideReadChange:function(){this.fetchRecentComments()},sortOrderChange:function(e){this.recentCommentsSettings.sortByScore=e==="votes",this.fetchRecentComments()}},commentsPager:{loadMore:function(e){this.fetchRecentComments(e)}},commentsUsers:{select:function(e){this.recentCommentsSettings.username=e,this.fetchRecentComments()}},commentsTargets:{select:function(e){this.recentCommentsSettings.targetId=e&&e.get("id"),this.fetchRecentComments()}},commentsTags:{select:function(e){this.recentCommentsSettings.tagname=e&&e.get("tagname"),this.fetchRecentComments()}}})},loadIndex:function(){this.fireEvent("loadIndex"),Ext.getCmp("treecontainer").hide(),this.recentComments||(this.fetchRecentComments(),this.recentComments=!0),this.callParent([!0])},fetchRecentComments:function(e){var t=Docs.Settings.get("comments"),n={offset:e||0,limit:100,hideRead:t.hideRead?1:undefined,sortByScore:this.recentCommentsSettings.sortByScore?1:undefined,username:this.recentCommentsSettings.username,targetId:this.recentCommentsSettings.targetId,tagname:this.recentCommentsSettings.tagname};this.getCommentsFullList().setMasked(!0),Docs.Comments.request("jsonp",{url:"/comments_recent",method:"GET",params:n,success:function(t){this.getCommentsFullList().setMasked(!1);var n=e>0;this.getCommentsFullList().load(t,n)},scope:this})}}),Ext.define("Docs.view.Tabs",{extend:"Ext.container.Container",alias:"widget.doctabs",id:"doctabs",componentCls:"doctabs",requires:["Docs.History","Docs.ClassRegistry","Docs.view.TabMenu"],minTabWidth:80,maxTabWidth:160,animDuration:150,tabs:[],tabsInBar:[],tabCache:{},staticTabs:[],initComponent:function(){this.addEvents("tabActivate","tabClose"),this.tpl=Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="doctab overview {cls}{active}">','<div class="l"></div>','<div class="m">','<tpl if="text">','<a class="tabUrl ov-tab-text" href="{href}">{text}</a>',"<tpl else>",'<a class="tabUrl ov-tab" href="{href}">&nbsp;</a>',"</tpl>","</div>",'<div class="r"></div>',"</div>","</tpl>",'<div style="float: left; width: 8px">&nbsp;</div>','<div class="tab-overflow"></div>'),this.html=this.tpl.applyTemplate(this.staticTabs),this.tabTpl=Ext.create("Ext.XTemplate",'<div class="doctab','{[values.active ? (" active") : ""]}','" style="','{[values.width ? ("width: " + values.width + "px;") : ""]}','{[values.visible ? "" : "visibility: hidden;"]}">','<div class="l"></div>','<div class="m">','<span class="icn {iconCls}">&nbsp;</span>','<a class="tabUrl main-tab" href="{href}">{text}</a>',"</div>",'<div class="r"><a class="close" href="#">&nbsp;</a></div>',"</div>"),this.on("afterrender",this.initListeners,this),this.on("resize",this.refresh,this),this.callParent()},initListeners:function(){this.el.on("mouseover",function(e,t){Ext.get(t).addCls("ovr")},this,{delegate:".close"}),this.el.on("mouseout",function(e,t){Ext.get(t).removeCls("ovr")},this,{delegate:".close"}),this.el.on("click",function(e,t){var n=Ext.get(t).up(".doctab").down(".tabUrl").getAttribute("href");n=Docs.History.cleanUrl(n),this.removeTab(n),this.fireEvent("tabClose",n)},this,{delegate:".close",preventDefault:!0}),this.el.on("click",function(e,t){if(Ext.fly(e.getTarget()).hasCls("close"))return;var n=Ext.get(t).down(".tabUrl").getAttribute("href");this.fireEvent("tabActivate",n,{navigate:!0})},this,{delegate:".doctab"}),this.el.on("contextmenu",function(e,t){Ext.get(t).hasCls("overview")||this.createMenu().showBy(t)},this,{delegate:".doctab",preventDefault:!0}),this.el.on("click",Ext.emptyFn,this,{delegate:".tabUrl",preventDefault:!0}),this.el.on("mouseleave",function(){this.shouldResize&&this.resizeTabs({animate:!0})},this)},setStaticTabs:function(e){this.staticTabs=e,this.refresh()},getStaticTabs:function(e){return this.staticTabs},addTab:function(e,t){e=this.formatTabTexts(e),this.tabCache[e.href]=e,this.hasTab(e.href)||(this.tabs.push(e.href),this.roomForNewTab()&&this.addTabToBar(e,t),this.addTabToMenu(this.overflowButton.menu,e)),t.activate&&this.activateTab(e.href),this.saveTabs()},formatTabTexts:function(e){if(/#!?\/javascriptapi\//.test(e.href)){var t=e.href.replace(/^.*#!?\/javascriptapi\//,"");e.text=Docs.ClassRegistry.shortName(t),e.tooltip=t}else e.tooltip=e.text;return e},removeTab:function(e){if(!this.hasTab(e))return;this.removeFromArray(this.tabs,e);var t=this.removeFromArray(this.tabsInBar,e),n=this.tabs[this.tabsInBar.length];n&&this.tabsInBar.push(n),this.activeTab===e&&(this.tabs.length===0?Docs.App.getController(this.getControllerName(e)).loadIndex():(t===this.tabs.length&&(t-=1),this.activateTab(this.tabs[t]),this.fireEvent("tabActivate",this.tabs[t]))),this.tabs.length>=this.maxTabsInBar()?this.refresh():this.removeTabFromBar(e),this.saveTabs()},removeFromArray:function(e,t){var n=Ext.Array.indexOf(e,t);return n!==-1&&Ext.Array.erase(e,n,1),n},activateTab:function(e){this.activeTab=e,this.inTabs(e)||this.swapLastTabWith(e),Ext.Array.each(Ext.query(".doctab a.tabUrl"),function(e){Ext.get(e).up(".doctab").removeCls(["active","highlight"])});var t=Ext.query('.doctab a[href="'+e+'"]')[0];if(t){var n=Ext.get(t).up(".doctab");n.addCls("active")}this.highlightOverviewTab(e)},refresh:function(){var e=this.tpl.applyTemplate(this.staticTabs),t=this.maxTabsInBar()<this.tabs.length?this.maxTabsInBar():this.tabs.length;this.tabsInBar=this.tabs.slice(0,t);for(var n=0;n<t;n++){var r=this.tabCache[this.tabs[n]],i=Ext.apply(r,{visible:!0,active:this.activeTab===r.href,width:this.tabWidth()});e+=this.tabTpl.applyTemplate(i)}this.el.dom.innerHTML=e,this.activeTab&&this.activeTab!==this.tabs[t-1]&&(this.activateTab(this.activeTab),this.fireEvent("tabActivate",this.activeTab)),this.highlightOverviewTab(this.activeTab),this.createOverflowButton(),this.addToolTips()},closeAllTabs:function(){this.inTabBar(this.activeTab)?this.tabs=this.tabsInBar=[this.activeTab]:this.tabs=this.tabsInBar=[],this.refresh(),this.saveTabs()},tabData:function(){return Ext.Array.map(this.tabs,function(e){return this.tabCache[e]},this)},roomForNewTab:function(){return this.tabsInBar.length<this.maxTabsInBar()},hasTab:function(e){return Ext.Array.contains(this.tabs,e)},addTabToBar:function(e,t){this.tabsInBar.push(e.href);var n=Ext.get(this.tabTpl.append(this.el.dom,e));this.addMainTabTooltip(n,e),t.animate&&!Ext.isIE?(n.setStyle("width","10px"),n.setStyle({visibility:"visible"}),n.animate({to:{width:this.tabWidth()}})):n.setStyle({visibility:"visible"}),this.resizeTabs(t)},inTabBar:function(e){return Ext.Array.contains(this.tabsInBar,e)},inTabs:function(e){var t=Ext.Array.pluck(this.staticTabs,"href").concat(this.tabsInBar);return Ext.Array.contains(t,e)},removeTabFromBar:function(e){var t=this.getTabEl(e);t.dom.removed=!0,Ext.isIE?(t.remove(),this.createOverflowButton()):t.animate({to:{top:30},duration:this.animDuration}).animate({to:{width:10},duration:this.animDuration,listeners:{afteranimate:function(){t.remove(),this.shouldResize=!0,this.createOverflowButton()},scope:this}})},swapLastTabWith:function(e){var t=this.getTabEl(this.tabsInBar[this.tabsInBar.length-1]);if(t){var n=this.tabTpl.append(document.body,this.tabCache[e]);t.dom.parentNode.replaceChild(n,t.dom),this.tabsInBar[this.tabsInBar.length-1]=e,Ext.get(n).setStyle({visibility:"visible",width:String(this.tabWidth())+"px"}),this.addMainTabTooltip(n,this.tabCache[e])}},highlightOverviewTab:function(e){var t=Ext.query(".doctab."+this.getControllerName(e).toLowerCase());t&&t[0]&&Ext.get(t[0]).addCls("highlight")},maxTabsInBar:function(){return Math.floor(this.tabBarWidth()/this.minTabWidth)},tabWidth:function(){var e=Math.floor(this.tabBarWidth()/this.tabsInBar.length)+6;return e>this.maxTabWidth?this.maxTabWidth:e<this.minTabWidth?this.minTabWidth:e},tabBarWidth:function(){return this.getWidth()-this.staticTabs.length*50-15},resizeTabs:function(e){this.shouldResize=!1,Ext.Array.each(Ext.query(".doctab"),function(t){var n=Ext.get(t);!n.dom.removed&&!n.hasCls("overview")&&(e&&e.animate&&!Ext.isIE?n.animate({to:{width:this.tabWidth()}}):n.setWidth(this.tabWidth()))},this)},getTabEl:function(e){var t=Ext.query('.doctab a[href="'+e+'"]');if(t&&t[0])return Ext.get(t[0]).up(".doctab")},createOverflowButton:function(){this.overflowButton&&this.overflowButton.destroy(),this.overflowButton=Ext.create("Ext.button.Button",{baseCls:"",renderTo:this.getEl().down(".tab-overflow"),menu:this.createMenu()})},createMenu:function(){var e=new Docs.view.TabMenu({listeners:{closeAllTabs:this.closeAllTabs,tabItemClick:function(e){this.fireEvent("tabActivate",e.href,{navigate:!0})},scope:this}});return Ext.Array.each(this.tabs,function(t){this.addTabToMenu(e,this.tabCache[t])},this),e},addTabToMenu:function(e,t){var n=Ext.Array.indexOf(this.tabs,t.href);this.tabs.length>this.tabsInBar.length&&n===this.maxTabsInBar()&&e.addTabCls(t,"overflow");var r=this.inTabBar(t.href);e.addTab(t,r?"":"overflow")},addToolTips:function(){Ext.Array.each(this.staticTabs,function(e){var t=Ext.get(Ext.query(".doctab."+e.cls)[0]);t&&Ext.create("Ext.tip.ToolTip",{target:t,html:e.tooltip})}),Ext.Array.each(this.tabsInBar,function(e){var t=Ext.get(Ext.query('a.main-tab[href="'+e+'"]')[0]),n=this.tabCache[e];t&&this.addMainTabTooltip(t.up(".doctab"),n)},this)},addMainTabTooltip:function(e,t){t.tooltip&&Ext.create("Ext.tip.ToolTip",{target:e,html:t.tooltip})},saveTabs:function(){Docs.Settings.set("tabs",this.tabs)},getControllerName:function(e){return/#!?\/javascriptapi/.test(e)?"Classes":/#!?\/guide/.test(e)?"Guides":/#!?\/video/.test(e)?"Videos":/#!?\/example/.test(e)?"Examples":/#!?\/tests/.test(e)?"Tests":/#!?\/comment/.test(e)?"Comments":"Index"}}),Ext.define("Docs.view.welcome.Index",{extend:"Ext.container.Container",alias:"widget.welcomeindex",mixins:["Docs.view.Scrolling"],requires:["Docs.ContentGrabber"],cls:"welcome iScroll",initComponent:function(){this.html=Docs.ContentGrabber.get("welcome-content"),this.hasContent=!!this.html,this.callParent(arguments)},getTab:function(){return this.hasContent?{cls:"index",href:"#",tooltip:"Home"}:!1}}),Ext.define("Docs.view.cls.Index",{extend:"Ext.container.Container",alias:"widget.classindex",requires:["Docs.ContentGrabber","Docs.Comments"],mixins:["Docs.view.Scrolling"],cls:"class-categories iScroll",margin:"15 10",autoScroll:!0,initComponent:function(){this.tpl=new Ext.XTemplate('<h1 class="top" style="padding-bottom: 10px">DEXT5 API Documentation</h1>','<tpl if="notice">','<div class="notice">{notice}</div>',"</tpl>","{categories}","{news}"),this.data={notice:Docs.data.message||Docs.ContentGrabber.get("notice-text"),categories:Docs.ContentGrabber.get("categories-content"),news:Docs.ContentGrabber.get("news-content")},this.callParent(arguments)},afterRender:function(){this.callParent(arguments);if(!Docs.Comments.isEnabled())return;this.initComments()},initComments:function(){this.getEl().select("a.docClass").each(function(e){var t=e.getHTML(),n=Docs.Comments.getClassTotalCount(t);n&&Ext.DomHelper.append(e,Docs.Comments.counterHtml(n))},this)},updateCommentCounts:function(){if(!this.getEl())return;this.getEl().select(".comment-counter-small").remove(),this.initComments()},getTab:function(){var e=(Docs.data.classes||[]).length>0;return e?{cls:"classes",href:"#!/javascriptapi",tooltip:"DEXT5 API Documentation"}:!1}}),Ext.define("Docs.view.examples.TouchContainer",{extend:"Ext.panel.Panel",alias:"widget.touchexamplecontainer",requires:["Docs.view.examples.Device"],layout:"fit",cls:"example-container iScroll",autoScroll:!0,bodyPadding:"10 0 5 0",initComponent:function(){this.dockedItems=[{xtype:"container",dock:"top",html:['<h1 class="example-title">Example</h1>','<div class="cls-grouping example-toolbar">','<div class="devices">','<button class="phone selected">Phone</button>','<button class="tablet">Tablet</button>',"</div>",'<span class="separator">&nbsp;</span>','<div class="orientations">','<button class="landscape selected">Landscape</button>','<button class="portrait">Portrait</button>',"</div>","<div>",'<button class="new-window">Open in new window</button>',"</div>","</div>"].join("")}],this.callParent(arguments)},load:function(e){this.title=e.title+" Example",this.device=Ext.create("Docs.view.examples.Device",{url:e.url,device:e.device||"phone",orientation:e.orientation||"landscape"}),this.refresh()},refresh:function(){this.update(this.device.toHtml()),this.updateScale(),this.updateTitle(),this.updateButtons()},setDevice:function(e){this.device.setDevice(e),this.refresh()},setOrientation:function(e){this.device.setOrientation(e),this.refresh()},updateScale:function(){var e=Ext.query("iframe",this.el.dom)[0];e&&(e.onload=Ext.Function.bind(function(){var t=document.createElement("style"),n="html { overflow: hidden }";this.device.getDevice()==="tablet"&&(n+="body { font-size: 79.8% !important; }"),t.innerHTML=n,e.contentWindow.document.body.appendChild(t)},this))},updateTitle:function(){Ext.get(Ext.query(".example-title")).update(this.title)},updateButtons:function(){Ext.Array.each(Ext.query(".example-toolbar .orientations button"),function(e){Ext.get(e).removeCls("selected")}),Ext.get(Ext.query(".example-toolbar .orientations button."+this.device.getOrientation())).addCls("selected"),Ext.Array.each(Ext.query(".example-toolbar .devices button"),function(e){Ext.get(e).removeCls("selected")}),Ext.get(Ext.query(".example-toolbar .devices button."+this.device.getDevice())).addCls("selected")},clear:function(){this.update("")}}),Ext.define("Docs.view.search.Dropdown",{extend:"Ext.view.View",alias:"widget.searchdropdown",requires:["Docs.view.Signature"],floating:!0,autoShow:!1,autoRender:!0,toFrontOnShow:!0,focusOnToFront:!1,store:"Search",id:"search-dropdown",overItemCls:"x-view-over",trackOver:!0,itemSelector:"div.item",singleSelect:!0,pageStart:0,pageSize:10,initComponent:function(){this.addEvents("changePage","footerClick"),this.tpl=new Ext.XTemplate('<tpl for=".">','<div class="item">','<div class="icon {icon}"></div>','<div class="meta">{[this.getMetaTags(values.meta)]}</div>','<div class="title {[this.getCls(values.meta)]}">{name}</div>','<div class="class">{fullName}</div>',"</div>","</tpl>",'<div class="footer">','<tpl if="this.getTotal()">','<a href="#" class="prev">&lt;</a>','<span class="total">{[this.getStart()+1]}-{[this.getEnd()]} of {[this.getTotal()]}</span>','<a href="#" class="next">&gt;</a>',"<tpl else>",'<span class="total">Nothing found</span>',"</tpl>","</div>",{getCls:function(e){return e["private"]?"private":e.removed?"removed":""},getMetaTags:function(e){return Docs.view.Signature.render(e)},getTotal:Ext.bind(this.getTotal,this),getStart:Ext.bind(this.getStart,this),getEnd:Ext.bind(this.getEnd,this)}),this.on("afterrender",function(){this.el.addListener("click",function(){this.fireEvent("changePage",this,-1)},this,{preventDefault:!0,delegate:".prev"}),this.el.addListener("click",function(){this.fireEvent("changePage",this,1)},this,{preventDefault:!0,delegate:".next"}),this.el.addListener("click",function(){this.fireEvent("footerClick",this)},this,{delegate:".footer"})},this),this.callParent(arguments)},setTotal:function(e){this.total=e},getTotal:function(){return this.total},setStart:function(e){this.pageStart=e},getStart:function(e){return this.pageStart},getEnd:function(e){var t=this.pageStart+this.pageSize;return t>this.total?this.total:t}}),Ext.define("Docs.view.search.Container",{extend:"Ext.container.Container",alias:"widget.searchcontainer",requires:"Docs.view.search.Dropdown",initComponent:function(){Docs.data.search.length&&(this.cls="search",this.items=[{xtype:"triggerfield",triggerCls:"reset",emptyText:"Search",width:170,id:"search-field",enableKeyEvents:!0,hideTrigger:!0,onTriggerClick:function(){this.reset(),this.focus(),this.setHideTrigger(!0),Ext.getCmp("search-dropdown").hide()}},{xtype:"searchdropdown"}]),this.callParent()}}),Ext.define("Docs.view.GroupTree",{extend:"Docs.view.DocTree",alias:"widget.grouptree",initComponent:function(){this.root={text:"Root",children:this.buildTree(this.data)},this.callParent()},buildTree:function(e){return Ext.Array.map(e,function(e){return e.items?{text:e.title,iconCls:"icon-pkg",expanded:!!e.expanded,children:this.buildTree(e.items)}:this.convert(e)},this)}}),Ext.define("Docs.view.auth.BaseForm",{extend:"Ext.Component",requires:["Docs.Tip","Docs.Auth"],createLoginFormHtml:function(){return['<form class="loginForm">','<input class="username" type="text" name="username" placeholder="Username" />','<input class="password" type="password" name="password" placeholder="Password" />','<label><input type="checkbox" name="remember" /> Remember Me</label>','<input class="submit" type="submit" value="Sign in" />'," or ",'<a class="register" href="'+Docs.Auth.getRegistrationUrl()+'" target="_blank">Register</a>',"</form>"].join("")},bindFormSubmitEvent:function(){this.getEl().down("form").on("submit",this.submitLogin,this,{preventDefault:!0})},submitLogin:function(e,t){var n=Ext.get(t),r=n.down("input[name=username]").getValue(),i=n.down("input[name=password]").getValue(),s=n.down("input[name=remember]"),o=s?!!s.getAttribute("checked"):!1;this.fireEvent("login",this,r,i,o)},showMessage:function(e){var t=this.getEl().down("input[type=submit]");Docs.Tip.show(e,t,"bottom")}}),Ext.define("Docs.view.auth.HeaderForm",{extend:"Docs.view.auth.BaseForm",alias:"widget.authHeaderForm",requires:["Docs.Comments"],afterRender:function(){this.callParent(arguments),this.getEl().addListener("click",this.showLoginForm,this,{preventDefault:!0,delegate:".login"}),this.getEl().addListener("click",function(){this.fireEvent("logout",this)},this,{preventDefault:!0,delegate:".logout"})},showLoginForm:function(){this.update(this.createLoginFormHtml()),this.bindFormSubmitEvent()},showLoggedIn:function(e){var t=Docs.Comments.avatar(e.emailHash);this.update(t+"<div><span>"+e.userName+'</span> | <a href="#" class="logout">Logout</a></div>')},showLoggedOut:function(){this.update('<a href="#" class="login">Sign in / Register</a>')}}),Ext.define("Docs.view.comments.Users",{alias:"widget.commentsUsers",extend:"Ext.panel.Panel",componentCls:"comments-users",requires:["Docs.Comments","Docs.view.SimpleSelectBehavior","Docs.view.comments.FilterField"],layout:"border",initComponent:function(){this.items=[this.tabpanel=Ext.widget("tabpanel",{plain:!0,region:"north",height:50,items:[{title:"Votes"},{title:"Comments"}],dockedItems:[{dock:"bottom",items:[{xtype:"commentsFilterField",emptyText:"Filter users by name...",width:320,height:20,listeners:{filter:this.onFilter,scope:this}}]}],listeners:{tabchange:this.onTabChange,scope:this}}),this.list=Ext.widget("dataview",{region:"center",cls:"iScroll users-list",autoScroll:!0,store:Ext.create("Ext.data.Store",{fields:["userName","score","emailHash","mod"]}),allowDeselect:!0,tpl:["<ul>",'<tpl for=".">',"<li>",'<span class="score">{score}</span>',"{[Docs.Comments.avatar(values.emailHash)]}",'<span class="username <tpl if="mod">moderator</tpl>">{userName}</span>',"</li>","</tpl>","</ul>"],itemSelector:"li"})],new Docs.view.SimpleSelectBehavior(this.list,{select:this.onSelect,deselect:this.onDeselect,scope:this}),this.callParent(arguments)},afterRender:function(){this.callParent(arguments),this.fetchUsers("votes")},onTabChange:function(e,t){t.title==="Votes"?this.fetchUsers("votes"):this.fetchUsers("comments")},onFilter:function(e){this.list.getSelectionModel().deselectAll(),this.list.getStore().clearFilter(!0),this.list.getStore().filter({property:"userName",value:e,anyMatch:!0})},deselectAll:function(){this.list.getSelectionModel().deselectAll()},onSelect:function(e){this.selectedUser=e,this.fireEvent("select",e.get("userName"))},onDeselect:function(){this.selectedUser=undefined,this.fireEvent("select",undefined)},fetchUsers:function(e){Docs.Comments.request("jsonp",{url:"/users",method:"GET",params:{sortBy:e},success:this.loadUsers,scope:this})},loadUsers:function(e){this.list.getStore().loadData(e.data);if(this.selectedUser){var t=this.list.getStore().findExact("userName",this.selectedUser.get("userName"));this.list.getSelectionModel().select(t,!1,!0)}}}),Ext.define("Docs.view.cls.Header",{extend:"Ext.container.Container",requires:["Docs.view.Signature"],alias:"widget.classheader",cls:"classheader",padding:"10 0 17 0",height:55,initComponent:function(){this.tpl=Ext.create("Ext.XTemplate",'<h1 class="{[this.getClass(values)]}">','<tpl if="Docs.data.source">','<a href="#" class="class-source-link">{name}','<span class="class-source-tip"></span>',"</a>","<tpl else>",'<strong class="class-source-link">{name}</strong>',"</tpl>",'<tpl if="singleton">','<span class="singleton"></span>',"</tpl>","<tpl if=\"values['enum']\">",'<span class="enum">enum of <b>{[values["enum"].type]}</b></span>',"</tpl>","{[this.renderAliases(values.aliases)]}","{[this.renderMetaTags(values.meta)]}","</h1>",'<tpl if="Docs.data.showPrintButton">','<a class="print" href="?print=/javascriptapi/{name}" target="_blank">Print</a>',"</tpl>",{getClass:function(e){return e.singleton?"singleton":e.component?"component":"class"},renderAliases:function(e){var t={widget:"xtype",plugin:"ptype",feature:"ftype"},n=[];return e&&Ext.Object.each(e,function(e,r){n.push((t[e]||e)+": "+r.join(", "))}),n.length>0?"<span class='xtype'>"+n.join(", ")+"</span>":""},renderMetaTags:function(e){return" "+Docs.view.Signature.render(e,"long")}}),Docs.data.source&&this.on("render",this.initSourceLink,this),this.callParent()},initSourceLink:function(){this.classLinkEvent("click",function(){},this),this.classLinkEvent("mouseover",function(){this.el.down(".class-source-tip").addCls("hover")},this),this.classLinkEvent("mouseout",function(){this.el.down(".class-source-tip").removeCls("hover")},this)},classLinkEvent:function(e,t,n){this.el.on(e,t,n,{preventDefault:!0,delegate:"a.class-source-link"})},createFileMenu:function(e){return new Ext.menu.Menu({items:Ext.Array.map(e,function(e){return{text:e.filename,handler:function(){window.open("source/"+e.href)}}},this)})},load:function(e){this.loadedCls=e,this.update(this.tpl.apply(e))}}),Ext.override(Ext.dom.Element,{getAttribute:Ext.isIE6||Ext.isIE7||Ext.isIE8?function(e,t){var n=this.dom,r;return t?(r=typeof n[t+":"+e],r!="undefined"&&r!="unknown"?n[t+":"+e]||null:null):(e==="for"&&(e="htmlFor"),n[e]||null)}:function(e,t){var n=this.dom;return t?n.getAttributeNS(t,e)||n.getAttribute(t+":"+e):n.getAttribute(e)||n[e]||null}}),Ext.define("Docs.view.ThumbList",{extend:"Ext.view.View",alias:"widget.thumblist",requires:["Docs.Comments"],cls:"thumb-list",itemSelector:"dl",urlField:"url",commentType:"",itemTpl:[],initComponent:function(){this.addEvents("urlclick"),Ext.Array.forEach(this.data,function(e,t){e.id="sample-"+t}),this.store=Ext.create("Ext.data.JsonStore",{fields:["id","title","items"]}),this.store.loadData(this.flattenSubgroups(this.data)),this.tpl=new Ext.XTemplate(Ext.Array.flatten(["<div>",'<tpl for=".">','<div><a name="{id}"></a><h2><div>{title}</div></h2>',"<dl>",'<tpl for="items">',this.itemTpl,"</tpl>",'<div style="clear:left"></div></dl></div>',"</tpl>","</div>"])),this.itemTpl=undefined,this.data=undefined,this.on("viewready",function(){this.initHover(),Docs.Comments.isEnabled()&&this.initComments()},this),this.callParent(arguments)},initHover:function(){this.getEl().on("mouseover",function(e,t){Ext.get(t).addCls("over")},this,{delegate:"dd"}),this.getEl().on("mouseout",function(e,t){Ext.get(t).removeCls("over")},this,{delegate:"dd"})},initComments:function(){this.getEl().select("dd").each(function(e){var t=e.getAttributeNS("ext",this.urlField).replace(/^.*\//,""),n=Docs.Comments.getCount([this.commentType,t,""]);n&&Ext.DomHelper.append(e.down("p"),Docs.Comments.counterHtml(n))},this)},updateCommentCounts:function(){if(!this.getEl())return;this.getEl().select(".comment-counter-small").remove(),this.initComments()},flattenSubgroups:function(e){function t(e){return e.items?Ext.Array.map(e.items,t):e}return Ext.Array.map(e,function(e){return{id:e.id,title:e.title,items:Ext.Array.map(e.items,function(e){if(e.items){var n=Ext.apply({},t(e)[0]);return n.title=e.title,n}return e})}})},onContainerClick:function(e){var t=e.getTarget("h2",3,!0);t&&t.up("div").toggleCls("collapsed")},onItemClick:function(e,t,n,r){var i=r.getTarget("dd",5,!0);if(i&&!r.getTarget("a",2)){var s=i.getAttributeNS("ext",this.urlField);this.fireEvent("urlclick",s)}return this.callParent(arguments)}}),Ext.define("Docs.view.guides.Index",{extend:"Ext.container.Container",alias:"widget.guideindex",requires:["Docs.view.ThumbList"],mixins:["Docs.view.Scrolling"],cls:"iScroll",margin:"10 0 0 0",autoScroll:!0,initComponent:function(){this.items=[{xtype:"container",html:'<h1 class="eg">Guides</h1>'},Ext.create("Docs.view.ThumbList",{commentType:"guide",itemTpl:['<dd ext:url="#!/guide/{name}"><div class="thumb"><img src="guides/{name}/icon.png"/></div>',"<div><h4>{title}</h4><p>{description}</p></div>","</dd>"],data:Docs.data.guides})],this.callParent(arguments)},getTab:function(){var e=(Docs.data.guides||[]).length>0;return e?{cls:"guides",href:"#!/guide",tooltip:"Guides"}:!1},updateCommentCounts:function(){this.down("thumblist").updateCommentCounts()}}),Ext.define("Docs.view.videos.Index",{extend:"Ext.container.Container",alias:"widget.videoindex",requires:["Docs.view.ThumbList"],mixins:["Docs.view.Scrolling"],cls:"iScroll",margin:"10 0 0 0",autoScroll:!0,initComponent:function(){this.items=[{xtype:"container",html:'<h1 class="eg">Videos</h1>'},Ext.create("Docs.view.ThumbList",{commentType:"video",itemTpl:['<dd ext:url="#!/video/{name}"><div class="thumb"><img src="{thumb}"/></div>',"<div><h4>{title}","</h4><p>{[values.description.substr(0,80)]}...</p></div>","</dd>"],data:Docs.data.videos})],this.callParent(arguments)},getTab:function(){var e=(Docs.data.videos||[]).length>0;return e?{cls:"videos",href:"#!/video",tooltip:"Videos"}:!1},updateCommentCounts:function(){this.down("thumblist").updateCommentCounts()}}),Ext.define("Docs.view.examples.Index",{extend:"Ext.container.Container",alias:"widget.exampleindex",requires:["Docs.view.ThumbList"],mixins:["Docs.view.Scrolling"],cls:"iScroll",margin:"10 0 0 0",autoScroll:!0,initComponent:function(){this.cls+=Docs.data.touchExamplesUi?" touch-examples-ui":"",this.items=[{xtype:"container",html:'<h1 class="eg">Examples</h1>'},Ext.create("Docs.view.ThumbList",{itemTpl:['<dd ext:url="#!/example/{name}">','<div class="thumb"><img src="{icon}"/></div>',"<div><h4>{title}","<tpl if=\"status === 'new'\">",'<span class="new-sample"> (New)</span>',"</tpl>","<tpl if=\"status === 'updated'\">",'<span class="updated-sample"> (Updated)</span>',"</tpl>","<tpl if=\"status === 'experimental'\">",'<span class="new-sample"> (Experimental)</span>',"</tpl>","</h4><p>{description}</p></div>","</dd>"],data:Docs.data.examples})],this.callParent(arguments)},getTab:function(){var e=(Docs.data.examples||[]).length>0;return e?{cls:"examples",href:"#!/example",tooltip:"Examples"}:!1}}),Ext.define("Docs.view.examples.Inline",{extend:"Ext.Panel",alias:"widget.inlineexample",requires:["Docs.view.examples.InlineEditor","Docs.view.examples.InlinePreview"],componentCls:"inline-example-cmp",layout:"card",border:0,resizable:{transparent:!0,handles:"s",constrainTo:!1},maxCodeHeight:400,options:{},constructor:function(){this.callParent(arguments),this.addEvents("previewsuccess","previewfailure")},initComponent:function(){this.options=Ext.apply({device:"phone",orientation:"landscape"},this.options),this.items=[this.editor=Ext.create("Docs.view.examples.InlineEditor",{cmpName:"code",value:this.value,listeners:{init:this.updateHeight,change:this.updateHeight,scope:this}}),this.preview=Ext.create("Docs.view.examples.InlinePreview",{cmpName:"preview",options:this.options})],this.relayEvents(this.preview,["previewsuccess","previewfailure"]),this.options.preview?(this.activeItem=1,this.toolbar&&this.toolbar.activateButton("preview")):(this.activeItem=0,this.toolbar&&this.toolbar.activateButton("code")),this.on("afterrender",this.init,this),this.callParent(arguments)},init:function(){var e=this.layout.getActiveItem();e.cmpName==="preview"&&this.showPreview(),this.updateHeight(),this.toolbar&&this.initToolbarEvents()},initToolbarEvents:function(){this.toolbar.on("buttonclick",function(e){e==="code"?this.showCode():e==="preview"?this.showPreview():e==="copy"&&(this.showCode(),this.editor.selectAll())},this)},showCode:function(){this.layout.setActiveItem(0),this.updateHeight(),this.toolbar&&this.toolbar.activateButton("code")},showPreview:function(){this.preview.update(this.editor.getValue()),this.layout.setActiveItem(1),this.updateHeight(),this.toolbar&&this.toolbar.activateButton("preview")},updateHeight:function(){var e=this.preview.getHeight(),t=this.editor.getHeight(),n=30;Docs.data.touchExamplesUi&&e>0?this.setHeight(e+n):t>0&&this.setHeight(Ext.Number.constrain(t+n,0,this.maxCodeHeight))}}),Ext.define("Docs.view.examples.InlineWrap",{requires:["Docs.view.examples.Inline","Docs.view.examples.InlineToolbar"],constructor:function(e){this.pre=e;var t=this.parseOptions(e.className);this.initToolbar(),t.preview?this.replacePre(t):this.tb.on("buttonclick",function(e){t.preview=e==="preview",this.replacePre(t)},this,{single:!0})},parseOptions:function(e){var t={};return Ext.Array.forEach(e.split(/ +/),function(e){e==="phone"||e==="miniphone"||e==="tablet"?t.device=e:e==="ladscape"||e==="portrait"?t.orientation=e:t[e]=!0}),t},initToolbar:function(){var e=document.createElement("div");this.pre.parentNode.insertBefore(e,this.pre),this.tb=Ext.create("Docs.view.examples.InlineToolbar",{renderTo:e})},replacePre:function(e){var t=document.createElement("div");this.pre.parentNode.replaceChild(t,this.pre),Ext.create("Docs.view.examples.Inline",{height:200,renderTo:t,value:Ext.String.htmlDecode(Ext.util.Format.stripTags(this.pre.innerHTML)),options:e,toolbar:this.tb})}}),Ext.define("Docs.controller.InlineExamples",{extend:"Ext.app.Controller",requires:["Docs.view.examples.InlineWrap"],init:function(){this.control({classoverview:{resize:this.createResizer(".class-overview"),afterload:this.replaceExampleDivs},guidecontainer:{resize:this.createResizer(".guide-container"),afterload:this.replaceExampleDivs}})},createResizer:function(e){return function(){Ext.Array.each(Ext.ComponentQuery.query(e+" .inlineexample"),function(e){e.editor&&e.isVisible()&&e.doLayout()})}},replaceExampleDivs:function(){Ext.Array.each(Ext.query(".inline-example"),function(e){Ext.create("Docs.view.examples.InlineWrap",e)},this)}}),Ext.define("Docs.view.tests.BatchRunner",{extend:"Ext.container.Container",requires:["Docs.view.examples.Inline"],initComponent:function(){this.addEvents("start","finish","statuschange"),this.callParent(arguments)},run:function(e){this.fireEvent("start"),this.runNext({pass:0,fail:0,total:e.length,remaining:e})},runNext:function(e){this.fireEvent("statuschange",e);if(!e.remaining||e.remaining.length<1){this.fireEvent("finish");return}var t=e.remaining.shift(),n=t.get("options");n.preview=!1;var r="var alert = function(){};\n",i=Ext.create("Docs.view.examples.Inline",{cls:"doc-test-preview",height:0,value:r+t.get("code"),options:n,listeners:{previewsuccess:function(n){this.onSuccess(t,e)},previewfailure:function(n,r){this.onFailure(t,e,r)},scope:this}});this.removeAll(),this.add(i),i.showPreview()},onSuccess:function(e,t){e.set("status","success"),e.commit(),t.pass++,this.runNext(t)},onFailure:function(e,t,n){e.set("status","failure"),e.set("message",n.toString()),e.commit(),t.fail++,this.runNext(t)}}),Ext.define("Docs.view.tests.Index",{extend:"Ext.container.Container",requires:["Docs.model.Test","Docs.view.tests.BatchRunner"],mixins:["Docs.view.Scrolling"],alias:"widget.testsindex",layout:{type:"vbox",align:"stretch",shrinkToFit:!0},padding:10,initComponent:function(){this.store=Ext.create("Ext.data.Store",{model:"Docs.model.Test",data:[]}),this.grid=Ext.create("Ext.grid.Panel",{itemId:"testsgrid",padding:"5 0 5 0",autoScroll:!0,flex:1,store:this.store,selModel:{mode:"MULTI"},columns:[{xtype:"templatecolumn",text:"Name",width:300,tpl:'<a href="{href}">{name}</a>'},{xtype:"templatecolumn",text:"Status",width:80,tpl:'<span class="doc-test-{status}">{status}</span>'},{text:"Message",flex:1,dataIndex:"message"}],listeners:{itemdblclick:function(e,t){this.batchRunner.run([t])},scope:this}}),this.batchRunner=Ext.create("Docs.view.tests.BatchRunner",{height:0,listeners:{start:this.disable,finish:this.enable,statuschange:this.updateTestStatus,scope:this}}),this.items=[{html:"<h1>Inline examples test page</h1>",height:30},{itemId:"testcontainer",layout:{type:"vbox",align:"stretch",shrinkToFit:!0},flex:1,items:[{itemId:"testcontrols",layout:"hbox",items:[{html:"<b>Double-click</b> to run an example, or",margin:"5 5 5 0"},{xtype:"button",itemId:"run-selected-button",text:"Run Selected",margin:5,handler:function(){this.batchRunner.run(this.grid.getSelectionModel().getSelection())},scope:this},{html:"or",margin:5},{xtype:"button",itemId:"run-all-button",text:"Run All Examples",margin:5,handler:function(){this.batchRunner.run(this.store.getRange())},scope:this},{itemId:"testStatus",margin:"5 5 5 15"}]},this.grid]},this.batchRunner],this.callParent(arguments)},getTab:function(){return Docs.data.tests?{cls:"tests",href:"#!/tests",tooltip:"Tests",text:"Tests"}:!1},addExamples:function(e){this.store.add(e),this.setStatus(!0,this.store.getCount()+" examples loaded.")},updateTestStatus:function(e){var t=e.pass+e.fail;this.setStatus(e.fail===0,t+"/"+e.total+" examples tested, "+e.fail+" failures")},setStatus:function(e,t){var n=e?"doc-test-success":"doc-test-failure";this.down("#testStatus").update('<span class="'+n+'">'+t+"</span>")}}),Ext.define("Docs.view.cls.PackageLogic",{extend:"Docs.view.cls.Logic",requires:"Docs.ClassRegistry",create:function(){return this.root={children:[],text:"Root"},this.packages={"":this.root},this.privates=[],Ext.Array.forEach(this.classes,this.addClass,this),this.sortTree(this.root),{root:this.root,privates:this.privates}},sortTree:function(e){e.children.sort(this.compare),Ext.Array.forEach(e.children,this.sortTree,this)},compare:function(e,t){if(e.leaf===t.leaf){var n=e.text.toLowerCase(),r=t.text.toLowerCase();return n>r?1:n<r?-1:0}return e.leaf?1:-1},addClass:function(e){if(e["private"]&&!this.showPrivateClasses){this.privates.push(this.classNode(e));return}if(this.packages[e.name]){var t=this.packages[e.name],n=this.classNode(e);t.iconCls=n.iconCls,t.url=n.url}else{var r=Docs.ClassRegistry.packageName(e.name),i=this.packages[r]||this.addPackage(r),n=this.classNode(e);this.addChild(i,n),this.packages[e.name]=n}},addPackage:function(e){var t=Docs.ClassRegistry.packageName(e),n=this.packages[t]||this.addPackage(t),r=this.packageNode(e);return this.addChild(n,r),this.packages[e]=r,r},addChild:function(e,t){e.children.push(t),e.leaf&&(e.leaf=!1)},classNode:function(e){return{text:Docs.ClassRegistry.shortName(e.name),url:"#!/javascriptapi/"+e.name,iconCls:e.icon,cls:e["private"]?"private":"",leaf:!0,children:[]}},packageNode:function(e){return{text:Docs.ClassRegistry.shortName(e),iconCls:"icon-pkg",leaf:!1,children:[]}}}),Ext.define("Docs.view.cls.InheritanceLogic",{extend:"Docs.view.cls.Logic",create:function(){return this.root={children:[],text:"Root"},this.privates=[],this.subclasses=this.buildLookupTable(this.classes),Ext.Array.forEach(this.classes,this.addClass,this),this.showPrivateClasses||this.stripPrivateClasses(this.root),this.sortTree(this.root),{root:this.root,privates:this.privates}},sortTree:function(e){e.children.sort(Ext.bind(this.compare,this)),Ext.Array.forEach(e.children,this.sortTree,this)},compare:function(e,t){var n=e.text.toLowerCase(),r=t.text.toLowerCase();return n>r?1:n<r?-1:0},buildLookupTable:function(e){var t={};return Ext.Array.forEach(e,function(e){var n=e["extends"];n&&n!=="Object"&&(t[n]||(t[n]=[]),t[n].push(e))},this),t},classNode:function(e){return{text:e.name,url:"#!/javascriptapi/"+e.name,iconCls:e.icon,cls:e["private"]?"private":""}},addClass:function(e){var t=e["extends"];if(!t||t==="Object"){var n=this.classNode(e);this.root.children.push(n),n.children=this.getSubclasses(e.name),n.leaf=n.children.length===0}},getSubclasses:function(e){return this.subclasses[e]?Ext.Array.map(this.subclasses[e],function(e){var t=this.classNode(e);return t.children=this.getSubclasses(e.name),t.leaf=t.children.length===0,t},this):[]},stripPrivateClasses:function(e){e.children=Ext.Array.filter(e.children,function(e){return this.stripPrivateClasses(e),e.cls==="private"&&e.children.length===0?(this.privates.push(e),!1):!0},this)}}),Ext.define("Docs.view.cls.Tree",{extend:"Docs.view.DocTree",alias:"widget.classtree",requires:["Docs.view.cls.PackageLogic","Docs.view.cls.InheritanceLogic","Docs.Settings"],initComponent:function(){this.setLogic(Docs.Settings.get("classTreeLogic"),Docs.Settings.get("showPrivateClasses")),this.on("afterrender",this.setupButtonClickHandler,this),this.callParent()},makeButtonHtml:function(e,t){return Ext.String.format('<button class="{0} {1}">{2}</button>',e,Docs.Settings.get("classTreeLogic")===e?"selected":"",t)},setupButtonClickHandler:function(){this.el.addListener("click",function(e,t){var n=Ext.get(t),r=Ext.get(Ext.query(".cls-grouping button.selected")[0]);if(r.dom===n.dom)return;r.removeCls("selected"),n.addCls("selected"),n.hasCls("PackageLogic")?this.setLogic("PackageLogic",Docs.Settings.get("showPrivateClasses")):this.setLogic("InheritanceLogic",Docs.Settings.get("showPrivateClasses"))},this,{delegate:"button"})},setLogic:function(e,t){Docs.Settings.set("classTreeLogic",e),Docs.Settings.set("showPrivateClasses",t);var n=new Docs.view.cls[e]({classes:this.data,showPrivateClasses:t});if(this.root){var r=this.getSelectionModel().getLastSelected(),i=n.create();this.expandLonelyNode(i.root),this.setRootNode(i.root),this.initNodeLinks(),r&&this.selectUrl(r.raw.url)}else{var i=n.create();this.root=i.root,this.expandLonelyNode(this.root)}this.privates=i.privates},expandLonelyNode:function(e){var t=Ext.Array.filter(e.children,function(e){return e.children.length>0});t.length==1&&(t[0].expanded=!0)},findRecordByUrl:function(e){return this.callParent([e])||this.findPrivateRecordByUrl(e)},findPrivateRecordByUrl:function(e){var t=this.privates;for(var n=0;n<t.length;n++)if(t[n].url===e)return t[n];return undefined}}),Ext.define("Docs.view.TreeContainer",{extend:"Ext.panel.Panel",alias:"widget.treecontainer",requires:["Docs.view.cls.Tree","Docs.view.GroupTree"],cls:"iScroll",layout:"card",resizable:!0,resizeHandles:"e",collapsible:!0,hideCollapseTool:!0,animCollapse:!0,header:!1,initComponent:function(){this.items=[{},{xtype:"classtree",id:"classtree",data:Docs.data.classes},{xtype:"grouptree",id:"exampletree",data:Docs.data.examples,convert:function(e){return{leaf:!0,text:e.title,url:"#!/example/"+e.name,iconCls:"icon-example"}}},{xtype:"grouptree",id:"guidetree",data:Docs.data.guides,convert:function(e){return{leaf:!0,text:e.title,url:"#!/guide/"+e.name,iconCls:"icon-guide"}}},{xtype:"grouptree",id:"videotree",data:Docs.data.videos,convert:function(e){return{leaf:!0,text:e.title,url:"#!/video/"+e.name,iconCls:"icon-video"}}}],this.callParent()},showTree:function(e){this.show(),this.layout.setActiveItem(e)}}),Ext.define("Docs.view.comments.Expander",{alias:"widget.commentsExpander",extend:"Ext.Component",requires:["Docs.Comments","Docs.view.comments.TopLevelDropZone"],uses:["Docs.view.comments.ListWithForm"],componentCls:"comments-expander",initComponent:function(){this.tpl=new Ext.XTemplate('<a href="#" class="side toggleComments"><span></span></a>','<a href="#" class="name toggleComments">',"{[this.renderCount(values.count)]}","</a>",{renderCount:this.renderCount}),this.data={count:this.count},this.callParent(arguments)},renderCount:function(e){return e===1?"View 1 comment.":e>1?"View "+e+" comments.":"No comments. Click to add."},afterRender:function(){this.callParent(arguments),this.getEl().select(".toggleComments").each(function(e){e.on("click",this.toggle,this,{preventDefault:!0})},this),new Docs.view.comments.TopLevelDropZone(this.getEl().down(".side.toggleComments"),{onValidDrop:Ext.Function.bind(this.setParent,this)})},setParent:function(e,t){e.setParent(t,this.reload,this)},toggle:function(){this.expanded?this.collapse():this.expand()},expand:function(){this.expanded=!0,this.getEl().addCls("open"),this.getEl().down(".name").setStyle("display","none"),this.list?this.list.show():this.loadComments()},collapse:function(){this.expanded=!1,this.getEl().removeCls("open"),this.getEl().down(".name").setStyle("display","block"),this.list&&this.list.hide()},loadComments:function(){this.list=new Docs.view.comments.ListWithForm({target:this.target,newCommentTitle:this.newCommentTitle,renderTo:this.getEl(),listeners:{reorder:this.reload,scope:this}}),this.reload()},reload:function(){Docs.Comments.load(this.target,function(e){this.list.load(e)},this)},setCount:function(e){this.getEl().down(".name").update(this.renderCount(e))}}),Ext.define("Docs.view.comments.LargeExpander",{requires:["Docs.Comments","Docs.view.comments.Expander"],html:['<div class="comments-large-expander">','<h3 class="icon-comment">Comments</h3>',"<div></div>","</div>"].join(""),type:"class",constructor:function(e){Ext.apply(this,e),this.el=Ext.get(e.el);var t=Ext.DomHelper.append(this.el,this.html,!0).down("div"),n=[this.type,this.name,""];this.expander=new Docs.view.comments.Expander({count:Docs.Comments.getCount(n),target:n,renderTo:t,onCountUpdated:this.onCountUpdated})},getExpander:function(){return this.expander}}),Ext.define("Docs.view.guides.Container",{extend:"Ext.panel.Panel",alias:"widget.guidecontainer",componentCls:"guide-container",mixins:["Docs.view.Scrolling"],requires:["Docs.Comments","Docs.view.comments.LargeExpander"],initComponent:function(){this.addEvents("afterload"),this.callParent(arguments)},scrollToEl:function(e){var t=Ext.get(e);t||(t=Ext.get(Ext.query("a[name='"+e+"']")[0])),this.scrollToView(t,{highlight:!0,offset:-100})},load:function(e){this.guide=e,this.tpl=this.tpl||new Ext.XTemplate(Docs.data.showPrintButton?'<a class="print guide" href="?print=/guide/{name}" target="_blank">Print</a>':"","{content}"),this.update(this.tpl.apply(e)),Docs.Syntax.highlight(this.getEl()),Docs.Comments.isEnabled()&&this.initComments(),this.fireEvent("afterload")},initComments:function(){this.expander=new Docs.view.comments.LargeExpander({type:"guide",name:this.guide.name,el:this.getEl().down(".x-panel-body")})},updateCommentCounts:function(){if(!this.expander)return;this.expander.getExpander().setCount(Docs.Comments.getCount(["guide",this.guide.name,""]))}}),Ext.define("Docs.view.videos.Container",{extend:"Ext.panel.Panel",alias:"widget.videocontainer",componentCls:"video-container",requires:["Docs.Comments","Docs.view.comments.LargeExpander"],initComponent:function(){this.callParent(arguments),this.on("hide",this.pauseVideo,this)},pauseVideo:function(){var e=document.getElementById("video_player");e&&e.api_pause&&e.api_pause()},load:function(e){this.video=e,this.tpl=this.tpl||new Ext.XTemplate('<iframe src="http://player.vimeo.com/video/{id}" width="640" height="360" frameborder="0" title="Software Development Kit"',"webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>","<h1>{title}</h1>","<p>{[this.linkify(values.description)]}</p>",{linkify:function(e){return e.replace(/(\bhttps?:\/\/\S+)/ig,"<a href='$1'>$1</a>")}}),this.update(this.tpl.apply(e)),Docs.Comments.isEnabled()&&this.initComments()},initComments:function(){this.expander=new Docs.view.comments.LargeExpander({type:"video",name:this.video.name,el:this.getEl().down(".x-panel-body")})},updateCommentCounts:function(){if(!this.expander)return;this.expander.getExpander().setCount(Docs.Comments.getCount(["video",this.video.name,""]))}}),Ext.define("Docs.view.comments.MemberWrap",{extend:"Docs.view.cls.MemberWrap",requires:["Docs.Comments","Docs.view.comments.Expander"],constructor:function(e){this.callParent([e]);var t=Docs.Comments.getCount(this.getTarget());t>0&&this.updateSignatureCommentCount(t)},getTarget:function(){return this.target||(this.target=["class",this.getDefinedIn(),this.getMemberId()]),this.target},getExpander:function(){if(!this.expander){var e=Ext.DomHelper.append(this.el.down(".long"),"<div></div>");this.expander=new Docs.view.comments.Expander({count:Docs.Comments.getCount(this.getTarget()),target:this.getTarget(),newCommentTitle:this.getNewCommentTitle(),renderTo:e})}return this.expander},setCount:function(e){this.getExpander().setCount(e),this.updateSignatureCommentCount(e)},updateSignatureCommentCount:function(e){var t=this.el.down(".title"),n=t.down(".comment-counter-small");if(e>0)if(n)n.update(""+e);else{var r=Ext.DomHelper.append(t,Docs.Comments.counterHtml(e),!0);r.on("click",function(){this.el.addCls("open"),this.getExpander().expand(),this.parent.scrollToEl(this.getExpander().getEl())},this)}else n&&n.remove()},getNewCommentTitle:function(){return this.getDefinedIn()!==this.className?["<b>Be aware.</b> This member is inherited from <b>"+this.getDefinedIn()+"</b>; ","comments posted here will also be posted to that page."].join(""):undefined},setExpanded:function(e){this.callParent([e]),e&&this.getExpander().show()}}),Ext.define("Docs.view.comments.Template",{extend:"Ext.XTemplate",requires:["Docs.Auth","Docs.Comments"],statics:{create:function(e){var t="tpl-"+Ext.JSON.encode(e);return this[t]||(this[t]=new this,Ext.apply(this[t],e)),this[t]}},constructor:function(){this.callParent(["<div>",'<tpl for=".">','<div class="comment" id="{id}">','<tpl if="deleted">','<div class="deleted-comment">Comment was deleted. <a href="#" class="undoDeleteComment">Undo</a>.</div>',"<tpl else>",'<div class="com-meta">',"{[this.avatar(values.emailHash)]}",'<div class="author<tpl if="moderator"> moderator" title="Sencha Engineer</tpl>">',"{author}",'<tpl if="this.isTargetVisible()">','<span class="target"> on {[this.target(values.target)]}</span>',"</tpl>","</div>",'<div class="top-right">','<tpl for="tags">','<span href="#" class="command tag">',"<b>{.}</b>",'<tpl if="this.isMod()"><a href="#" class="remove-tag" title="Delete tag">&ndash;</a></tpl>',"</span>","</tpl>",'<tpl if="this.isMod()">','<a href="#" class="command add-tag" title="Add new tag">+</a>',"</tpl>",'<tpl if="this.isMod()">','<a href="#" class="command readComment <tpl if="read">read</tpl>">Read</a>',"</tpl>",'<tpl if="this.isMod() || this.isAuthor(values.author)">','<a href="#" class="command editComment">Edit</a>','<a href="#" class="command deleteComment">Delete</a>',"</tpl>",'<span class="time" title="{[this.date(values.createdAt)]}">{[this.dateStr(values.createdAt)]}</span>',"</div>",'<div class="vote">','<a href="#" class="voteCommentUp{[values.upVote ? " selected" : ""]}" ','title="Vote Up">&nbsp;</a>','<span class="score">{score}</span>','<a href="#" class="voteCommentDown{[values.downVote ? " selected" : ""]}" ','title="Vote Down">&nbsp;</a>',"</div>","</div>",'<div class="content">{contentHtml}</div>',"</tpl>","</div>","</tpl>","</div>",this])},avatar:function(e){return Docs.Comments.avatar(e,this.isMod()&&this.enableDragDrop?"drag-handle":"")},isTargetVisible:function(){return this.showTarget},dateStr:function(e){try{var t=Math.ceil(Number(new Date)/1e3),n=Math.ceil(Number(new Date(e))/1e3),r=t-n;if(r<60)return"just now";if(r<3600){var i=String(Math.round(r/60));return i+(i=="1"?" minute":" minutes")+" ago"}if(r<86400){var i=String(Math.round(r/3600));return i+(i=="1"?" hour":" hours")+" ago"}if(r<2678400){var i=String(Math.round(r/86400));return i+(i=="1"?" day":" days")+" ago"}return Ext.Date.format(new Date(e),"jS M 'y")}catch(s){return""}},date:function(e){try{return Ext.Date.format(new Date(e),"jS F Y g:ia")}catch(t){return""}},isMod:function(){return Docs.Auth.isModerator()},isAuthor:function(e){return Docs.Auth.getUser().userName==e},target:function(e){var t=e[1],n=e[1],r="#!/javascriptapi/";return e[0]=="video"?(n="Video "+n,r="#!/video/"):e[0]=="guide"?(n="Guide "+n,r="#!/guide/"):e[2]!=""&&(t+="-"+e[2],e[0]=="class"?n+="#"+e[2].replace(/^.*-/,""):n+=" "+e[2]),'<a href="'+r+t+'">'+n+"</a>"}}),Ext.define("Docs.view.comments.RepliesExpander",{alias:"widget.commentsRepliesExpander",extend:"Ext.Component",requires:["Docs.Comments"],uses:["Docs.view.comments.ListWithForm"],componentCls:"comments-replies-expander",initComponent:function(){this.tpl=new Ext.XTemplate('<a href="#" class="replies-button {[this.getCountCls(values.count)]}">',"{[this.renderCount(values.count)]}","</a>",{renderCount:this.renderCount,getCountCls:this.getCountCls}),this.data={count:this.count},this.callParent(arguments)},renderCount:function(e){return e===1?"1 reply...":e>1?e+" replies...":"Write reply..."},getCountCls:function(e){return e>0?"with-replies":""},afterRender:function(){this.callParent(arguments),this.getEl().down(".replies-button").on("click",this.toggle,this,{preventDefault:!0})},toggle:function(){this.expanded?this.collapse():this.expand()},expand:function(){this.expanded=!0,this.getEl().down(".replies-button").update("Hide replies."),this.list?this.list.show():this.loadComments()},collapse:function(){this.expanded=!1,this.refreshRepliesButton(),this.list&&this.list.hide()},refreshRepliesButton:function(){var e=this.getEl().down(".replies-button");e.update(this.renderCount(this.count)),e.removeCls("with-replies"),e.addCls(this.getCountCls(this.count))},loadComments:function(){this.list=new Docs.view.comments.ListWithForm({target:this.target,parentId:this.parentId,newCommentTitle:"<b>Reply to comment</b>",renderTo:this.getEl(),listeners:{countChange:this.setCount,scope:this}}),Docs.Comments.loadReplies(this.parentId,function(e){this.list.load(e)},this)},setCount:function(e){this.count=e,this.expanded||this.refreshRepliesButton()}}),Ext.define("Docs.model.Comment",{extend:"Ext.data.Model",requires
:["Docs.Comments"],fields:[{name:"id",mapping:"_id"},"author","emailHash","moderator","createdAt","target","score","upVote","downVote","contentHtml","read","tags","deleted","parentId","replyCount"],proxy:{type:"ajax",reader:"json"},vote:function(e,t){this.request({method:"POST",url:"/comments/"+this.get("id"),params:{vote:e},success:function(e){this.set("upVote",e.direction==="up"),this.set("downVote",e.direction==="down"),this.set("score",e.total),this.commit()},failure:Ext.Function.bind(t.failure,t.scope),scope:this})},loadContent:function(e,t){this.request({url:"/comments/"+this.get("id"),method:"GET",success:function(n){e.call(t,n.content)},scope:this})},saveContent:function(e){this.request({url:"/comments/"+this.get("id"),method:"POST",params:{content:e},success:function(e){this.set("contentHtml",e.content),this.commit()},scope:this})},setDeleted:function(e){this.request({url:"/comments/"+this.get("id")+(e?"/delete":"/undo_delete"),method:"POST",success:function(){this.set("deleted",e),this.commit(),Docs.Comments.changeCount(this.get("target"),e?-1:1)},scope:this})},markRead:function(){this.request({url:"/comments/"+this.get("id")+"/read",method:"POST",success:function(){this.set("read",!0),this.commit()},scope:this})},setParent:function(e,t,n){this.request({url:"/comments/"+this.get("id")+"/set_parent",method:"POST",params:e?{parentId:e.get("id")}:undefined,success:t,scope:n})},addTag:function(e){this.changeTag("add_tag",e,function(){this.get("tags").push(e)},this)},removeTag:function(e){this.changeTag("remove_tag",e,function(){Ext.Array.remove(this.get("tags"),e)},this)},changeTag:function(e,t,n,r){this.request({url:"/comments/"+this.get("id")+"/"+e,method:"POST",params:{tagname:t},success:function(){n.call(r),this.commit()},scope:this})},request:function(e){Docs.Comments.request("ajax",{url:e.url,method:e.method,params:e.params,callback:function(t,n,r){var i=Ext.JSON.decode(r.responseText);n&&i.success?e.success&&e.success.call(e.scope,i):e.failure&&e.failure.call(e.scope,i.reason)},scope:this})}}),Ext.define("Docs.CommentsProxy",{extend:"Ext.data.proxy.JsonP",alias:"proxy.comments",requires:["Docs.Comments"],constructor:function(e){e.url=Docs.Comments.buildRequestUrl(e.url),this.callParent([e])}}),Ext.define("Docs.model.Target",{extend:"Ext.data.Model",requires:["Docs.CommentsProxy"],fields:["id","type","cls","member","score",{name:"text",convert:function(e,t){var n=t.data;return n.type==="class"?n.cls+(n.member?"#"+n.member.replace(/^.*-/,""):""):n.type+" "+n.cls}}],proxy:{type:"comments",url:"/targets",reader:{type:"json",root:"data"}}}),Ext.define("Docs.view.comments.Targets",{extend:"Docs.view.comments.TopList",alias:"widget.commentsTargets",requires:["Docs.model.Target"],model:"Docs.model.Target",displayField:"text",filterEmptyText:"Filter topics by name..."}),Ext.define("Docs.model.Tag",{extend:"Ext.data.Model",requires:["Docs.CommentsProxy"],fields:["tagname","score"],proxy:{type:"comments",url:"/tags",reader:{type:"json",root:"data"}}}),Ext.define("Docs.view.comments.Tags",{extend:"Docs.view.comments.TopList",alias:"widget.commentsTags",requires:["Docs.model.Tag"],model:"Docs.model.Tag",displayField:"tagname",filterEmptyText:"Filter tags by name..."}),Ext.define("Docs.view.comments.TagEditor",{extend:"Ext.container.Container",requires:["Docs.model.Tag"],floating:!0,hidden:!0,componentCls:"comments-tageditor",statics:{cachedStore:undefined,getStore:function(){return this.cachedStore||(this.cachedStore=Ext.create("Ext.data.Store",{model:"Docs.model.Tag",listeners:{load:function(){this.cachedStore.sort("tagname","ASC")},scope:this}}),this.cachedStore.load()),this.cachedStore}},initComponent:function(){this.items=[{xtype:"combobox",listConfig:{cls:"comments-tageditor-boundlist"},store:this.statics().getStore(),queryMode:"local",displayField:"tagname",valueField:"tagname",enableKeyEvents:!0,emptyText:"New tag name...",listeners:{select:this.handleSelect,blur:this.destroy,keyup:this.onKeyUp,scope:this}}],this.callParent(arguments)},popup:function(e){this.show(),this.alignTo(e,"bl",[-12,-2]),this.down("combobox").focus(!0,100)},onKeyUp:function(e,t){t.keyCode===Ext.EventObject.ENTER?this.handleSelect():t.keyCode===Ext.EventObject.ESC&&this.destroy()},handleSelect:function(){var e=Ext.String.trim(this.down("combobox").getValue()||"");if(e){var t=this.rememberNewTag(e);this.fireEvent("select",t)}this.destroy()},rememberNewTag:function(e){var t=this.statics().getStore(),n=new RegExp("^"+Ext.String.escapeRegex(e)+"$","i"),r=t.query("tagname",n);return r.getCount()===0?(t.add({tagname:e}),t.sort("tagname","ASC"),e):r.get(0).get("tagname")}}),Ext.define("Docs.view.comments.List",{extend:"Ext.view.View",alias:"widget.commentsList",requires:["Docs.Auth","Docs.Syntax","Docs.Comments","Docs.view.comments.Template","Docs.view.comments.Form","Docs.view.comments.TagEditor","Docs.view.comments.RepliesExpander","Docs.view.comments.DragZone","Docs.view.comments.DropZone","Docs.model.Comment","Docs.Tip"],componentCls:"comments-list",itemSelector:"div.comment",emptyText:'<div class="loading">Loading...</div>',deferEmptyText:!1,initComponent:function(){this.store=Ext.create("Ext.data.Store",{model:"Docs.model.Comment",listeners:{update:this.fireChangeEvent,scope:this}}),this.tpl=Docs.view.comments.Template.create({showTarget:this.showTarget,enableDragDrop:this.enableDragDrop}),this.callParent(arguments),this.on("refresh",function(){Docs.Syntax.highlight(this.getEl()),this.renderExpanders(this.store.getRange())},this),this.on("itemupdate",function(e,t,n){Docs.Syntax.highlight(n),this.renderExpanders([e])},this)},renderExpanders:function(e){if(e[0]&&e[0].get("parentId"))return;Ext.Array.forEach(e,function(e){if(e.get("deleted"))return;new Docs.view.comments.RepliesExpander({count:e.get("replyCount"),target:e.get("target"),parentId:e.get("id"),renderTo:this.getNode(e)})},this)},afterRender:function(){this.callParent(arguments),this.mun(this.getTargetEl(),"keydown"),this.delegateClick("a.voteCommentUp",function(e,t){this.vote(e,t,"up")},this),this.delegateClick("a.voteCommentDown",function(e,t){this.vote(e,t,"down")},this),this.delegateClick("a.editComment",function(e,t){this.edit(e,t)},this),this.delegateClick("a.deleteComment",function(e,t){this.setDeleted(e,t,!0)},this),this.delegateClick("a.undoDeleteComment",function(e,t){this.setDeleted(e,t,!1)},this),this.delegateClick("a.readComment",this.markRead,this),this.delegateClick("a.add-tag",this.addTag,this),this.delegateClick("a.remove-tag",this.removeTag,this),this.enableDragDrop&&(new Docs.view.comments.DragZone(this),new Docs.view.comments.DropZone(this,{onValidDrop:Ext.Function.bind(this.setParent,this)}))},delegateClick:function(e,t,n){this.getEl().on("click",function(e,r){var i=this.getRecord(this.findItemByChild(r));i&&t.call(n,r,i)},this,{preventDefault:!0,delegate:e})},vote:function(e,t,n){if(!Docs.Auth.isLoggedIn()){Docs.Tip.show("Please login to vote on this comment",e);return}if(t.get("upVote")&&n==="up"||t.get("downVote")&&n==="down"){Docs.Tip.show("You have already voted on this comment",e);return}t.vote(n,{failure:function(t){Docs.Tip.show(t,e)}})},edit:function(e,t){t.loadContent(function(n){var r=Ext.get(e).up(".comment").down(".content");r.update(""),new Docs.view.comments.Form({renderTo:r,title:"<b>Edit comment</b>",user:Docs.Auth.getUser(),content:n,listeners:{submit:function(e){t.saveContent(e)},cancel:function(){this.refreshComment(t)},scope:this}})},this)},refreshComment:function(e){this.refreshNode(this.getStore().findExact("id",e.get("id")))},setDeleted:function(e,t,n){t.setDeleted(n)},markRead:function(e,t){t.markRead()},addTag:function(e,t){var n=new Docs.view.comments.TagEditor;n.on("select",t.addTag,t),n.popup(e)},removeTag:function(e,t){var n=Ext.get(e).up(".tag").down("b").getHTML();t.removeTag(n)},setParent:function(e,t){e.setParent(t,function(){this.fireEvent("reorder")},this)},load:function(e,t){e.length===0&&(this.emptyText="");var n=this.store.getProxy().getReader().readRecords(e).records;this.store.loadData(n,t),this.fireChangeEvent()},fireChangeEvent:function(){var e=function(e){return!e.get("deleted")};this.fireEvent("countChange",this.getStore().queryBy(e).getCount())}}),Ext.define("Docs.view.comments.FullList",{extend:"Ext.panel.Panel",alias:"widget.commentsFullList",requires:["Docs.Settings","Docs.Auth","Docs.Comments","Docs.view.comments.List","Docs.view.comments.Pager"],componentCls:"comments-full-list",dockedItems:[{xtype:"container",dock:"top",height:35,html:['<h1 style="float:left;">Comments</h1>','<p style="float:left; margin: 5px 0 0 25px">','<label style="padding-right: 10px;"><input type="checkbox" name="hideRead" id="hideRead" /> Hide read</label>',"</p>"].join(" ")}],layout:"border",items:[{xtype:"tabpanel",cls:"comments-tabpanel",plain:!0,region:"north",height:25,items:[{title:"Recent"},{title:"Votes"}]},{region:"center",xtype:"container",autoScroll:!0,cls:"iScroll",items:[{xtype:"commentsList",id:"recentcomments",showTarget:!0},{xtype:"commentsPager"}]}],afterRender:function(){this.callParent(arguments),this.initCheckboxes(),this.initTabs(),this.setMasked(!0)},load:function(e,t){this.down("commentsList").load(e,t);var n=e[e.length-1];n?this.down("commentsPager").configure(n):this.down("commentsPager").reset()},setMasked:function(e){var t=this.getEl();t&&t[e?"mask":"unmask"]()},initCheckboxes:function(){var e=Docs.Settings.get("comments"),t=Ext.get("hideRead");t&&(t.dom.checked=e.hideRead,t.on("change",function(){this.saveSetting("hideRead",t.dom.checked),this.fireEvent("hideReadChange")},this)),this.setHideReadVisibility();var n=Docs.App.getController("Auth");n.on("available",this.setHideReadVisibility,this),n.on("loggedIn",this.setHideReadVisibility,this),n.on("loggedOut",this.setHideReadVisibility,this)},setHideReadVisibility:function(){var e=Docs.Auth.isModerator();Ext.get("hideRead").up("label").setStyle("display",e?"inline":"none")},initTabs:function(){this.down("tabpanel[cls=comments-tabpanel]").on("tabchange",function(e,t){t.title==="Recent"?this.fireEvent("sortOrderChange","recent"):this.fireEvent("sortOrderChange","votes")},this)},saveSetting:function(e,t){var n=Docs.Settings.get("comments");n[e]=t,Docs.Settings.set("comments",n)},getTab:function(){return Docs.Comments.isEnabled()?{cls:"comments",href:"#!/comment",tooltip:"Comments"}:!1}}),Ext.define("Docs.view.comments.Index",{extend:"Ext.panel.Panel",alias:"widget.commentindex",mixins:["Docs.view.Scrolling"],requires:["Docs.Comments","Docs.view.comments.FullList","Docs.view.comments.HeaderMenu","Docs.view.comments.Users","Docs.view.comments.Targets","Docs.view.comments.Tags"],componentCls:"comments-index",margin:"10 0 0 0",layout:"border",items:[{region:"center",xtype:"commentsFullList"},{region:"east",itemId:"cardPanel",layout:"border",width:300,margin:"0 0 0 20",layout:"card",dockedItems:[{xtype:"commentsHeaderMenu",dock:"top",height:35}],items:[{xtype:"commentsUsers"},{xtype:"commentsTargets"},{xtype:"commentsTags"}]}],initComponent:function(){this.callParent(arguments);var e=this.down("#cardPanel"),t={users:this.down("commentsUsers"),targets:this.down("commentsTargets"),tags:this.down("commentsTags")};this.down("commentsHeaderMenu").on("select",function(n){Ext.Object.each(t,function(e,t){e!==n&&t.deselectAll()}),e.getLayout().setActiveItem(t[n])},this)},getTab:function(){return Docs.Comments.isEnabled()?{cls:"comments",href:"#!/comment",tooltip:"Comments"}:!1}}),Ext.define("Docs.view.HoverMenu",{extend:"Ext.view.View",requires:["Docs.Comments","Docs.view.Signature"],alias:"widget.hovermenu",componentCls:"hover-menu",itemSelector:"div.item",deferEmptyText:!1,columnHeight:25,initComponent:function(){this.renderTo=Ext.getBody(),this.tpl=new Ext.XTemplate("<table>","<tr>","<td>",'<tpl for=".">','<div class="item">',"{[this.renderLink(values)]}","</div>",'<tpl if="xindex % this.columnHeight === 0 && xcount &gt; xindex">',"</td><td>","</tpl>","</tpl>","</td>","</tr>","</table>",{columnHeight:this.columnHeight,renderLink:function(e){var t=Docs.view.Signature.render(e.meta),n=Docs.Comments.counterHtml(e.commentCount);return Ext.String.format('<a href="#!/javascriptapi/{0}" rel="{0}" class="docClass">{1} {2} {3}</a>',e.url,e.label,t,n)}}),this.callParent()}}),Ext.define("Docs.view.HoverMenuButton",{extend:"Ext.toolbar.TextItem",alias:"widget.hovermenubutton",componentCls:"hover-menu-button",requires:["Docs.view.HoverMenu"],showCount:!1,statics:{menus:[]},initComponent:function(){this.addEvents("click"),this.showCount&&(this.initialText=this.text,this.text+=" <sup>"+this.store.getCount()+"</sup>",this.store.on("datachanged",function(){this.setText(this.initialText+" <sup>"+this.store.getCount()+"</sup>")},this)),this.callParent(arguments)},getColumnHeight:function(){var e=200,t=18;return Math.floor((Ext.Element.getViewportHeight()-e)/t)},onRender:function(){this.callParent(arguments),this.getEl().on({click:function(){this.fireEvent("click")},mouseover:this.deferShowMenu,mouseout:this.deferHideMenu,scope:this})},onDestroy:function(){this.menu&&(this.menu.destroy(),Ext.Array.remove(Docs.view.HoverMenuButton.menus,this.menu)),this.callParent(arguments)},renderMenu:function(){this.menu=Ext.create("Docs.view.HoverMenu",{store:this.store,columnHeight:this.getColumnHeight()}),this.menu.getEl().on({click:function(e){this.menu.hide(),e.preventDefault()},mouseover:function(){clearTimeout(this.hideTimeout)},mouseout:this.deferHideMenu,scope:this}),Docs.view.HoverMenuButton.menus.push(this.menu)},deferHideMenu:function(){clearTimeout(Docs.view.HoverMenuButton.showTimeout);if(!this.menu)return;this.hideTimeout=Ext.Function.defer(function(){this.menu.hide()},200,this)},deferShowMenu:function(){clearTimeout(Docs.view.HoverMenuButton.showTimeout),Docs.view.HoverMenuButton.showTimeout=Ext.Function.defer(function(){this.menu||this.renderMenu(),Ext.Array.forEach(Docs.view.HoverMenuButton.menus,function(e){e!==this.menu&&e.hide()},this),clearTimeout(this.hideTimeout),this.menu.show();var e=this.getEl().getXY(),t=Ext.ComponentQuery.query("classoverview toolbar")[0],n=e[0]-10,r=t.getEl().getXY(),i=t.getWidth(),s=this.menu.getEl().getWidth(),o=Ext.getCmp("doctabs").getWidth();s>o?n=0:n+s>o&&(n=o-s-30),n<r[0]&&(n=r[0]),this.menu.getEl().setStyle({left:n+"px",top:e[1]+25+"px"})},200,this)},getStore:function(){return this.store}}),Ext.define("Docs.view.cls.Toolbar",{extend:"Ext.toolbar.Toolbar",requires:["Docs.view.HoverMenuButton","Docs.Settings","Docs.Comments","Ext.form.field.Checkbox"],dock:"top",cls:"member-links",docClass:{},accessors:{},initComponent:function(){this.addEvents("menubuttonclick","commentcountclick","filter","toggleExpanded"),this.items=[],this.memberButtons={},Ext.Array.forEach(Docs.data.memberTypes,function(e){var t=Ext.Array.filter(this.docClass.members,function(t){return t.tagname===e.name});t.sort(function(e,t){return e.name==="constructor"&&e.tagname==="method"?-1:e.name<t.name?-1:e.name>t.name?1:0});if(t.length>0){var n=this.createMemberButton({text:e.toolbar_title||e.title,type:e.name,members:t});this.memberButtons[e.name]=n,this.items.push(n)}},this),this.checkItems={"public":this.createCb("Public","public"),"protected":this.createCb("Protected","protected"),"private":this.createCb("Private","private"),inherited:this.createCb("Inherited","inherited"),accessor:this.createCb("Accessor","accessor"),deprecated:this.createCb("Deprecated","deprecated"),removed:this.createCb("Removed","removed")};var e=this;this.items=this.items.concat([{xtype:"tbfill"},this.filterField=Ext.widget("triggerfield",{triggerCls:"reset",cls:"member-filter",hideTrigger:!0,emptyText:"Filter string",enableKeyEvents:!0,width:150,listeners:{keyup:function(e){this.fireEvent("filter",e.getValue(),this.getShowFlags()),e.setHideTrigger(e.getValue().length===0)},specialkey:function(e,t){t.keyCode===Ext.EventObject.ESC&&(e.reset(),this.fireEvent("filter","",this.getShowFlags()))},scope:this},onTriggerClick:function(){this.reset(),this.focus(),e.fireEvent("filter","",e.getShowFlags()),this.setHideTrigger(!0)}}),{xtype:"tbspacer",width:0},this.commentCount=this.createCommentCount(),{xtype:"button",text:"",menu:null},{xtype:"button",iconCls:"expand-all-members",tooltip:"Expand all",enableToggle:!0,toggleHandler:function(e,t){e.setIconCls(t?"collapse-all-members":"expand-all-members"),this.fireEvent("toggleExpanded",t)},scope:this}]),this.callParent(arguments)},getShowFlags:function(){var e={};for(var t in this.checkItems)e[t]=this.checkItems[t].checked;return e},createCb:function(e,t){return Ext.widget("menucheckitem",{text:e,checked:Docs.Settings.get("show")[t],listeners:{checkchange:function(){this.fireEvent("filter",this.filterField.getValue(),this.getShowFlags())},scope:this}})},createMemberButton:function(e){var t=Ext.Array.map(e.members,function(e){return this.createLinkRecord(this.docClass.name,e)},this);return Ext.create("Docs.view.HoverMenuButton",{text:e.text,cls:"icon-"+e.type,store:this.createStore(t),showCount:!0,listeners:{click:function(){this.fireEvent("menubuttonclick",e.type)},scope:this}})},createStore:function(e){var t=Ext.create("Ext.data.Store",{fields:["id","url","label","inherited","accessor","meta","commentCount"]});return t.add(e),t},createLinkRecord:function(e,t){return{id:t.id,url:e+"-"+t.id,label:t.tagname==="method"&&t.name==="constructor"?"new "+e:t.name,inherited:t.owner!==e,accessor:t.tagname==="method"&&this.accessors.hasOwnProperty(t.name),meta:t.meta,commentCount:Docs.Comments.getCount(["class",e,t.id])}},showMenuItems:function(e,t,n){Ext.Array.forEach(Docs.data.memberTypes,function(r){var i=this.memberButtons[r.name];if(i){i.getStore().filterBy(function(r){return!(!e["public"]&&!r.get("meta")["private"]&&!r.get("meta")["protected"]||!e["protected"]&&r.get("meta")["protected"]||!e["private"]&&r.get("meta")["private"]||!e.inherited&&r.get("inherited")||!e.accessor&&r.get("accessor")||!e.deprecated&&r.get("meta").deprecated||!e.removed&&r.get("meta").removed||t&&!n.test(r.get("label")))});var s=i.menu;s&&Ext.getVersion().version>="4.1.0"&&(s.show(),s.hide())}},this)},getFilterValue:function(){return this.filterField.getValue()},createCommentCount:function(){return Ext.create("Ext.container.Container",{width:24,margin:"0 4 0 0",cls:"comment-btn",html:"0",hidden:!0,listeners:{afterrender:function(e){e.el.addListener("click",function(){this.fireEvent("commentcountclick")},this)},scope:this}})},showCommentCount:function(){this.commentCount.show()},setCommentCount:function(e){this.commentCount.update(""+(e||0)),this.refreshMenuCommentCounts()},refreshMenuCommentCounts:function(){Ext.Object.each(this.memberButtons,function(e,t){t.getStore().each(function(e){e.set("commentCount",Docs.Comments.getCount(["class",this.docClass.name,e.get("id")]))},this)},this)}}),Ext.define("Docs.view.cls.Overview",{extend:"Ext.panel.Panel",alias:"widget.classoverview",requires:["Docs.view.cls.Toolbar","Docs.view.examples.Inline","Docs.view.comments.LargeExpander","Docs.view.cls.MemberWrap","Docs.view.comments.MemberWrap","Docs.Syntax","Docs.Settings","Docs.Comments"],mixins:["Docs.view.Scrolling"],cls:"class-overview iScroll",autoScroll:!0,border:!1,bodyPadding:"20 8 20 5",initComponent:function(){this.addEvents("afterload"),this.callParent(arguments)},scrollToEl:function(e,t){var n=typeof e=="string"?Ext.get(Ext.query(e)[0]):e;if(n){var r=n.hasCls("member");n.show(),n.isVisible(!0)||(n.up(".subsection").show(),n.up(".members-section").show()),r&&n.down(".expandable")&&this.setMemberExpanded(e.replace(/#/,""),!0);var i=this.body.getBox().y;this.scrollToView(n,{highlight:!0,offset:(t||0)-(r?i:i-10)})}},load:function(e){this.docClass=e,this.accessors=this.buildAccessorsMap(),this.toolbar&&(this.removeDocked(this.toolbar,!1),this.toolbar.destroy()),this.toolbar=Ext.create("Docs.view.cls.Toolbar",{docClass:this.docClass,accessors:this.accessors,listeners:{filter:function(e,t){this.filterMembers(e,t)},menubuttonclick:function(e){this.scrollToEl("h3.members-title.icon-"+e,-20)},commentcountclick:this.expandClassComments,scope:this}}),this.addDocked(this.toolbar),this.update(e.html),Docs.Syntax.highlight(this.getEl()),this.filterMembers("",Docs.Settings.get("show")),Docs.Comments.isEnabled()?this.initComments():this.initBasicMemberWrappers(),this.fireEvent("afterload")},initComments:function(){this.toolbar.showCommentCount(),this.toolbar.setCommentCount(Docs.Comments.getCount(["class",this.docClass.name,""])),this.clsExpander=new Docs.view.comments.LargeExpander({name:this.docClass.name,el:Ext.query(".doc-contents")[0]}),this.memberWrappers={},Ext.Array.forEach(Ext.query(".member"),function(e){var t=new Docs.view.comments.MemberWrap({parent:this,className:this.docClass.name,el:e});this.memberWrappers[t.getMemberId()]=t},this)},initBasicMemberWrappers:function(){this.memberWrappers={},Ext.Array.forEach(Ext.query(".member"),function(e){var t=new Docs.view.cls.MemberWrap({el:e});this.memberWrappers[t.getMemberId()]=t},this)},updateCommentCounts:function(){if(!this.docClass)return;var e=Docs.Comments.getCount(["class",this.docClass.name,""]);this.toolbar.setCommentCount(e),this.clsExpander.getExpander().setCount(e),Ext.Object.each(this.memberWrappers,function(e,t){t.setCount(Docs.Comments.getCount(t.getTarget()))},this)},expandClassComments:function(){var e=this.clsExpander.getExpander();e.expand(),this.scrollToEl(e.getEl(),-40)},setMemberExpanded:function(e,t){this.memberWrappers[e].setExpanded(t)},isMemberExpanded:function(e){return this.memberWrappers[e].isExpanded()},setAllMembersExpanded:function(e){Docs.Comments.isEnabled()&&Ext.Object.each(this.memberWrappers,function(e,t){t.getExpander().show()},this),Ext.Object.each(this.memberWrappers,function(t,n){n.setExpanded(e)},this)},filterMembers:function(e,t){Docs.Settings.set("show",t);var n=e.length>0;Ext.Array.forEach(Ext.query(".doc-contents, .hierarchy"),function(e){Ext.get(e).setStyle({display:n?"none":"block"})});var r=new RegExp(Ext.String.escapeRegex(e),"i");this.eachMember(function(e){var i=Ext.get(e.id),s=!(!t["public"]&&!e.meta["private"]&&!e.meta["protected"]||!t["protected"]&&e.meta["protected"]||!t["private"]&&e.meta["private"]||!t.inherited&&e.owner!==this.docClass.name||!t.accessor&&e.tagname==="method"&&this.accessors.hasOwnProperty(e.name)||!t.deprecated&&e.meta.deprecated||!t.removed&&e.meta.removed||n&&!r.test(e.name));s?i.setStyle({display:"block"}):i.setStyle({display:"none"})},this),Ext.Array.forEach(Ext.query(".member.first-child"),function(e){Ext.get(e).removeCls("first-child")}),Ext.Array.forEach(Ext.query(".members-section"),function(e){var t=this.getVisibleElements(".member",e);Ext.get(e).setStyle({display:t.length>0?"block":"none"}),Ext.Array.forEach(Ext.query(".subsection",e),function(e){var t=this.getVisibleElements(".member",e);t.length>0?(t[0].addCls("first-child"),Ext.get(e).setStyle({display:"block"})):Ext.get(e).setStyle({display:"none"})},this)},this),this.toolbar.showMenuItems(t,n,r)},buildAccessorsMap:function(e){var t={};return Ext.Array.forEach(this.docClass.members,function(e){if(e.tagname==="cfg"){var n=Ext.String.capitalize(e.name);t["get"+n]=!0,t["set"+n]=!0}}),t},getVisibleElements:function(e,t){var n=Ext.Array.map(Ext.query(e,t),function(e){return Ext.get(e)});return Ext.Array.filter(n,function(e){return e.isVisible()})},eachMember:function(e,t){Ext.Array.forEach(this.docClass.members,e,t)}}),Ext.define("Docs.view.cls.Container",{extend:"Ext.container.Container",alias:"widget.classcontainer",requires:["Docs.view.cls.Header","Docs.view.cls.Overview"],layout:"border",padding:"5 10 0 10",initComponent:function(){this.items=[Ext.create("Docs.view.cls.Header",{region:"north"}),Ext.create("Docs.view.cls.Overview",{region:"center"})],this.callParent(arguments)}}),Ext.define("Docs.view.Viewport",{extend:"Ext.container.Viewport",requires:["Docs.view.search.Container","Docs.view.Header","Docs.view.Tabs","Docs.view.TreeContainer","Docs.view.welcome.Index","Docs.view.auth.HeaderForm","Docs.view.comments.Index","Docs.view.cls.Index","Docs.view.cls.Container","Docs.view.guides.Index","Docs.view.guides.Container","Docs.view.videos.Index","Docs.view.videos.Container","Docs.view.examples.Index","Docs.view.examples.Container","Docs.view.examples.TouchContainer","Docs.view.tests.Index"],id:"viewport",layout:"border",defaults:{xtype:"container"},initComponent:function(){this.items=[{region:"north",id:"north-region",height:65,layout:{type:"vbox",align:"stretch"},items:[{height:37,xtype:"container",layout:"hbox",items:[{xtype:"docheader"},{xtype:"container",flex:1},{id:"loginContainer",xtype:"authHeaderForm",padding:"10 20 0 0"},{xtype:"searchcontainer",id:"search-container",width:230,margin:"4 0 0 0"}]},{xtype:"doctabs"}]},{region:"center",layout:"border",items:[{region:"west",xtype:"treecontainer",id:"treecontainer",border:1,bodyPadding:"10 9 4 9",width:280},{region:"center",id:"center-container",layout:"fit",border:!1,padding:"5 10",items:{id:"card-panel",cls:"card-panel",xtype:"container",layout:{type:"card",deferredRender:!0},items:[{autoScroll:!0,xtype:"welcomeindex",id:"welcomeindex"},{xtype:"container",id:"failure"},{autoScroll:!0,xtype:"classindex",id:"classindex"},{xtype:"classcontainer",id:"classcontainer"},{autoScroll:!0,xtype:"guideindex",id:"guideindex"},{autoScroll:!0,xtype:"guidecontainer",id:"guide",cls:"iScroll"},{xtype:"videoindex",id:"videoindex"},{autoScroll:!0,xtype:"videocontainer",id:"video",cls:"iScroll"},{xtype:"exampleindex",id:"exampleindex"},{xtype:Docs.data.touchExamplesUi?"touchexamplecontainer":"examplecontainer",id:"example"},{xtype:"testsindex",id:"testsindex"},{xtype:"commentindex",id:"commentindex"}]}}]},{region:"south",id:"footer",height:20,contentEl:"footer-content"}],this.callParent(arguments)},setPageTitle:function(e){e=Ext.util.Format.stripTags(e),this.origTitle||(this.origTitle=document.title),document.title=e?e+" - "+this.origTitle:this.origTitle}}),Ext.define("Docs.Application",{requires:["Ext.app.Application","Docs.History","Docs.Comments","Docs.Settings","Docs.view.Viewport","Docs.controller.Auth","Docs.controller.Welcome","Docs.controller.Failure","Docs.controller.Classes","Docs.controller.Search","Docs.controller.InlineExamples","Docs.controller.Examples","Docs.controller.Guides","Docs.controller.Videos","Docs.controller.Tabs","Docs.controller.Comments","Docs.controller.CommentCounts","Docs.controller.Tests"],constructor:function(){Docs.Comments.init(this.createApp,this)},createApp:function(){new Ext.app.Application({name:"Docs",controllers:["Auth","Welcome","Failure","Classes","Search","InlineExamples","Examples","Guides","Videos","Tabs","Comments","CommentCounts","Tests"],launch:this.launch})},launch:function(){Docs.App=this,Docs.Settings.init(),Ext.create("Docs.view.Viewport"),Docs.History.init(),Docs.initEventTracking&&Docs.initEventTracking(),Ext.get("loading").remove()}}),Ext.define("Docs.view.auth.Form",{extend:"Docs.view.auth.BaseForm",alias:"widget.authForm",componentCls:"auth-form",initComponent:function(){this.html=['<span class="before-text">Sign in to post a comment:</span>',this.createLoginFormHtml()],this.callParent(arguments)},afterRender:function(){this.callParent(arguments),this.bindFormSubmitEvent()}}),Ext.define("Docs.view.comments.ListWithForm",{extend:"Ext.container.Container",alias:"widget.commentsListWithForm",requires:["Docs.view.comments.List","Docs.view.comments.Form","Docs.view.auth.Form","Docs.Comments","Docs.Auth"],componentCls:"comments-list-with-form",initComponent:function(){this.items=[this.list=new Docs.view.comments.List({enableDragDrop:!0})],this.relayEvents(this.list,["countChange","reorder"]),this.callParent(arguments)},load:function(e,t){this.list.load(e,t),Docs.Auth.isLoggedIn()?this.showCommentingForm():this.showAuthForm()},showAuthForm:function(){this.commentingForm&&(this.remove(this.commentingForm),delete this.commentingForm),this.authForm||(this.authForm=new Docs.view.auth.Form,this.add(this.authForm))},showCommentingForm:function(){this.authForm&&(this.remove(this.authForm),delete this.authForm),this.commentingForm||(this.commentingForm=new Docs.view.comments.Form({title:this.newCommentTitle,user:Docs.Auth.getUser(),userSubscribed:Docs.Comments.hasSubscription(this.target),listeners:{submit:this.postComment,subscriptionChange:this.subscribe,scope:this}}),this.add(this.commentingForm))},postComment:function(e){Docs.Comments.post({target:this.target,parentId:this.parentId,content:e,callback:function(e){this.commentingForm.setValue(""),this.list.load([e],!0)},scope:this})},subscribe:function(e){Docs.Comments.subscribe(this.target,e,function(){this.commentingForm.showSubscriptionMessage(e)},this)}}),Ext.ns("Docs"),Ext.Loader.setConfig({enabled:!0,paths:{Docs:"app"}}),Ext.require("Ext.form.field.Trigger"),Ext.require("Ext.tab.Panel"),Ext.require("Ext.grid.column.Action"),Ext.require("Ext.grid.plugin.DragDrop"),Ext.require("Ext.layout.container.Border"),Ext.require("Ext.data.TreeStore"),Ext.require("Ext.toolbar.Spacer"),Ext.require("Docs.Application"),Ext.onReady(function(){Ext.create("Docs.Application")});var dext_sdk_curr_page,dext_sdk_curr_page_without_param,dext_sdk_curr_page_param,dext_sdk_curr_section;