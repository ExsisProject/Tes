if(!window.DEXT5Solution){window.DEXT5Solution=function(){Array.prototype.shift||(Array.prototype.shift=function(){if(0<this.length){for(var e=this[0],t=0,n=this.length-1;t<n;t++)this[t]=this[t+1];return this.length--,e}});var e={log4javascript:null,logType:"console",consoleLog:null,initConsoleLog:function(){this.consoleLog=window.console||{log:function(){}}},writeLog:function(e,t,n,r){t=t.toLowerCase(),null!=r&&0<r.length?n+=", param: "+Array.prototype.slice.call(r,0).join(", "):null==r&&(n+=", param: null");switch(t){case"info":dext5SolutionLog.info(e+" "+n);break;case"trace":dext5SolutionLog.trace(e+" "+n);break;case"debug":dext5SolutionLog.debug(e+" "+n);break;case"warn":dext5SolutionLog.warn(e+" "+n);break;case"error":dext5SolutionLog.error(e+" "+n);break;case"fatal":dext5SolutionLog.fatal(e+" "+n)}},InitializationLog:function(){function t(){function t(e){try{return Boolean(e.loaded)}catch(t){return!1}}function n(){var e=setInterval(function(){a?clearInterval(e):Boolean(o)&&t(o)&&(clearInterval(e),a=!0,s())},100)}function r(){try{if("console"==e.logType)return!0;if(!u){if(o.closed)return u=!0,!1;!a&&o.loaded&&(a=!0)}return a&&!u}catch(t){return u=!0,!1}}function i(e,t){for(var n=""+e;n.length<t;)n="0"+n;return n}function s(){if(r())for(;0<l.length;){for(var t=l.shift(),n=t.timeStamp,n=i(n.getHours(),2)+":"+i(n.getMinutes(),2)+":"+i(n.getSeconds(),2)+" ",s=t.level.name;5>s.length;)s+=" ";n=n+s+" - "+t.getCombinedMessages(),(s=t.getThrowableStrRep())&&(n+="\r\n"+s),-1<n.indexOf("#separator#")&&(n=n.replace("#separator#","")),"html"==e.logType?o.log(t.level,n):e.consoleLog&&e.consoleLog.log(n)}}var o=null,u=!1,a=!1,f=!1,l=[];this.append=function(i){if(!f)if("html"==e.logType){var p="log4javascriptLitePopUp"+location.host.replace(/[^a-z0-9]/gi,"_");o=window.open("",p,"width=600,height=400,status,resizable"),u=!1;if(o)if(t(o))o.mainPageReloaded(),a=!0,s();else{var p=o.document,v=['<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">','<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">',"	<head>","		<title>DEXT5 Solution Log</title>",'		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />',"		<!-- Make IE8 behave like IE7, having gone to all the trouble of making IE work -->",'		<meta http-equiv="X-UA-Compatible" content="IE=7" />','		<script type="text/javascript">',"			//<![CDATA[","			var loggingEnabled = true;","			var messagesBeforeDocLoaded = [];","","			function toggleLoggingEnabled() {",'				setLoggingEnabled($("enableLogging").checked);',"			}","","			function setLoggingEnabled(enable) {","				loggingEnabled = enable;","			}","","			function scrollToLatestEntry() {","				var l = getLogContainer();",'				if (typeof l.scrollTop != "undefined") {',"					var latestLogEntry = l.lastChild;","					if (latestLogEntry) {","						l.scrollTop = l.scrollHeight;","					}","				}","			}","","			function log(logLevel, formattedMessage) {","				if (loggingEnabled) {","					if (loaded) {","						doLog(logLevel, formattedMessage);","					} else {","						messagesBeforeDocLoaded.push([logLevel, formattedMessage]);","					}","				}","			}","","			function doLog(logLevel, formattedMessage) {",'				var logEntry = document.createElement("div");',"				logEntry.appendChild(document.createTextNode(formattedMessage));",'				logEntry.className = "logentry " + logLevel.name;',"				getLogContainer().appendChild(logEntry);","				scrollToLatestEntry();","			}","","			function mainPageReloaded() {",'				var separator = document.createElement("div");','				separator.className = "separator";','				separator.innerHTML = "&nbsp;";',"				getLogContainer().appendChild(separator);","			}","","			var loaded = false;",'			var logLevels = ["DEBUG", "INFO", "WARN", "ERROR", "FATAL"];',"","			window.onload = function() {","				setLogContainerHeight();","				toggleLoggingEnabled();","				for (var i = 0; i < messagesBeforeDocLoaded.length; i++) {","					doLog(messagesBeforeDocLoaded[i][0], messagesBeforeDocLoaded[i][1]);","				}","				messagesBeforeDocLoaded = [];","				loaded = true;","","				// Workaround to make sure log div starts at the correct size","				setTimeout(setLogContainerHeight, 20);","			};","","			function getLogContainer() {",'				return $("log");',"			}","","			function clearLog() {",'				getLogContainer().innerHTML = "";',"			}","","			/* ------------------------------------------------------------------------- */","","			// Other utility functions","","			// Syntax borrowed from Prototype library","			function $(id) {","				return document.getElementById(id);","			}","","			function getWindowHeight() {","				if (window.innerHeight) {","					return window.innerHeight;","				} else if (document.documentElement && document.documentElement.clientHeight) {","					return document.documentElement.clientHeight;","				} else if (document.body) {","					return document.body.clientHeight;","				}","				return 0;","			}","","			function getChromeHeight() {",'				return $("toolbar").offsetHeight;',"			}","","			function setLogContainerHeight() {","				var windowHeight = getWindowHeight();",'				$("body").style.height = getWindowHeight() + "px";','				getLogContainer().style.height = "" +','					Math.max(0, windowHeight - getChromeHeight()) + "px";',"			}","","			window.onresize = function() {","				setLogContainerHeight();","			};","","			//]]>","		</script>",'		<style type="text/css">',"			body {","				background-color: white;","				color: black;","				padding: 0;","				margin: 0;","				font-family: tahoma, verdana, arial, helvetica, sans-serif;","				overflow: hidden;","			}","","			div#toolbar {","				border-top: solid #ffffff 1px;","				border-bottom: solid #aca899 1px;","				background-color: #f1efe7;","				padding: 3px 5px;","				font-size: 68.75%;","			}","","			div#toolbar input.button {","				padding: 0 5px;","				font-size: 100%;","			}","","			div#log {","				font-family: Courier New, Courier;","				font-size: 75%;","				width: 100%;","				overflow: auto;","				clear: both;","			}","","			*.logentry {","				overflow: visible;","				white-space: pre;","			}","","			*.TRACE {","				color: #666666;","			}","","			*.DEBUG {","				color: green;","			}","","			*.INFO {","				color: #000099;","			}","","			*.WARN {","				color: #999900;","			}","","			*.ERROR {","				color: red;","			}","","			*.FATAL {","				color: #660066;","			}","","			div#log div.separator {","				background-color: #cccccc;","				margin: 5px 0;","				line-height: 1px;","			}","		</style>","	</head>","",'	<body id="body">','		<div id="toolbar">',"			Options:",'			<input type="checkbox" id="enableLogging" onclick="toggleLoggingEnabled()" class="stateful" checked="checked" title="Enable/disable logging" /><label for="enableLogging" id="enableLoggingLabel">Enable logging</label>','			<input type="button" id="clearButton" value="Clear" onclick="clearLog()" class="stateful button" title="Clear all log messages"  />','			<input type="button" id="closeButton" value="Close" onclick="window.close()" class="stateful button" title="Close the window" />',"		</div>",'		<div id="log" class="TRACE DEBUG INFO WARN ERROR FATAL"></div>',"	</body>","</html>"];p.open();for(var g=0,y=v.length;g<y;g++)p.writeln(v[g]);p.close(),t(o)?(a=!0,s()):n()}else alert("log4javascript: pop-up windows appear to be blocked. Please unblock them to use pop-up logging.");f=!0}else e.initConsoleLog();l.push(i),r()&&s()}}function n(){var e=new t,n=s.ALL;this.log=function(t,n){var i=this.getLevel();if(0<n.length){var i=n[0],o="all";-1<i.toLowerCase().indexOf("[dext5 editor]")?o=DEXT5.logLevel.toLowerCase():-1<i.toLowerCase().indexOf("[dext5 upload]")?o=DEXT5UPLOAD.logLevel.toLowerCase():-1<i.toLowerCase().indexOf("[dext5 photo]")&&(o=DEXT5PHOTO.logLevel.toLowerCase());switch(o){case"all":i=s.ALL;break;case"trace":i=s.TRACE;break;case"debug":i=s.DEBUG;break;case"info":i=s.INFO;break;case"warn":i=s.WARN;break;case"error":i=s.ERROR;break;case"fatal":i=s.FATAL;break;default:i=s.DEBUG}}if(r&&t.isGreaterOrEqual(i)){var u,i=n.length-1,o=n[n.length-1];1<n.length&&o instanceof Error&&(u=o,i--);for(var o=[],c=0;c<=i;c++)o[c]=n[c];u=new a(this,new Date,t,o,u),e.append(u)}},this.setLevel=function(e){n=e},this.getLevel=function(){return n}}this.log4javascript=new function(){},this.log4javascript.version="1.4.13",this.log4javascript.edition="log4javascript_lite";var r="undefined"!=typeof log4javascript_disabled&&log4javascript_disabled?!1:!0;this.log4javascript.setEnabled=function(e){r=Boolean(e)},this.log4javascript.isEnabled=function(){return r};var i=!1;this.log4javascript.setShowStackTraces=function(e){i=Boolean(e)};var s=function(e,t){this.level=e,this.name=t};s.prototype={toString:function(){return this.name},equals:function(e){return this.level==e.level},isGreaterOrEqual:function(e){return this.level>=e.level}},s.ALL=new s(Number.MIN_VALUE,"ALL"),s.TRACE=new s(1e4,"TRACE"),s.DEBUG=new s(2e4,"DEBUG"),s.INFO=new s(3e4,"INFO"),s.WARN=new s(4e4,"WARN"),s.ERROR=new s(5e4,"ERROR"),s.FATAL=new s(6e4,"FATAL"),s.OFF=new s(Number.MAX_VALUE,"OFF"),this.log4javascript.Level=s,this.log4javascript.Appender=t,n.prototype={trace:function(){this.log(s.TRACE,arguments)},debug:function(){this.log(s.DEBUG,arguments)},info:function(){this.log(s.INFO,arguments)},warn:function(){this.log(s.WARN,arguments)},error:function(){this.log(s.ERROR,arguments)},fatal:function(){this.log(s.FATAL,arguments)},isEnabledFor:function(e){return e.isGreaterOrEqual(this.getLevel())},isTraceEnabled:function(){return this.isEnabledFor(s.TRACE)},isDebugEnabled:function(){return this.isEnabledFor(s.DEBUG)},isInfoEnabled:function(){return this.isEnabledFor(s.INFO)},isWarnEnabled:function(){return this.isEnabledFor(s.WARN)},isErrorEnabled:function(){return this.isEnabledFor(s.ERROR)},isFatalEnabled:function(){return this.isEnabledFor(s.FATAL)}};var o=null;this.log4javascript.getDefaultLogger=function(){return o||(o=new n),o},this.log4javascript.getLogger=this.log4javascript.getDefaultLogger;var u=null;this.log4javascript.getNullLogger=function(){return u||(u=new n,u.setLevel(s.OFF)),u};var a=function(e,t,n,r,i){this.logger=e,this.timeStamp=t,this.level=n,this.messages=r,this.exception=i};a.prototype={getThrowableStrRep:function(){var e;if(this.exception)if(e=this.exception){var t="Exception: "+(e.message?e.message:e.description?e.description:String(e));try{if(e.lineNumber&&(t+=" on line number "+e.lineNumber),e.fileName){var n=t,r,s=e.fileName,o=Math.max(s.lastIndexOf("/"),s.lastIndexOf("\\"));r=s.substr(o+1),t=n+(" in file "+r)}}catch(u){}i&&e.stack&&(t+="\r\nStack trace:\r\n"+e.stack),e=t}else e=null;else e="";return e},getCombinedMessages:function(){return 1===this.messages.length?this.messages[0]:this.messages.join("\r\n")}},this.log4javascript.LoggingEvent=a}};return e}();if("undefined"==typeof dext5SolutionLog){"undefined"!=typeof DEXT5LogType&&(DEXT5Solution.logType=DEXT5LogType.toLowerCase()),DEXT5Solution.InitializationLog();var dext5SolutionLog=DEXT5Solution.log4javascript.getDefaultLogger()}("undefined"!=typeof DEXT5EditorLogMode&&DEXT5EditorLogMode||"undefined"!=typeof DEXT5UploadLogMode&&DEXT5UploadLogMode||"undefined"!=typeof DEXT5PhotoLogMode&&DEXT5PhotoLogMode)&&dext5SolutionLog.info("DEXT5Solution Log Initialization.")};