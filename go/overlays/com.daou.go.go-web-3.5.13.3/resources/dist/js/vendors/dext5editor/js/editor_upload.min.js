function uploadAjaxOnprogressStart(e,t){var n={};DEXTTOP.G_CURREDITOR.xhr_onprogress=new XMLHttpRequest;var r=DEXTTOP.G_CURREDITOR.xhr_onprogress;DEXTTOP.DEXT5.ajax.xhrWithCredentials&&"withCredentials"in r&&(r.withCredentials=!0),r.upload.onprogress=function(e){try{var t=DEXTTOP.DEXT5.util.parseIntOr0(e.loaded/e.total*100),n=document.getElementById("dext_loading");n&&n.childNodes&&(n.childNodes[1].nodeValue=" Uploading... "+t+"%")}catch(r){loading_image_show(!1)}},r.onload=function(){if(r){var e;200==r.status?(n.response=DEXTTOP.G_CURREDITOR._FRAMEWIN.getXhrResponseData(),e=r.responseText):(n.response=DEXTTOP.G_CURREDITOR._FRAMEWIN.getXhrResponseData(r),e="[FAIL]File Upload Error"),r=null,loading_image_show(!1),t(e,n)}},r.onerror=function(){n.response=DEXTTOP.G_CURREDITOR._FRAMEWIN.getXhrResponseData(r),r=null,loading_image_show(!1),t("[FAIL]File Upload Error",n)};var i=new FormData;e.formData&&0<e.formData.length&&e.formData.each(function(e,t){"proxy_url"==e&&(t="0"!=DEXTTOP.G_CURREDITOR._config.security.encryptParam?DEXTTOP.DEXT5.util.makeEncryptParamFinal(""):""),i.append(e,t)}),e.fileObj&&i.append(e.fileID,e.fileObj[0]),r.open("POST",e.handlerUrl,!0),DEXTTOP.DEXT5.util.setAddHttpHeader(r,DEXTTOP.G_CURREDITOR._config.addHttpHeader),r.send(i)}function uploadAjaxOnprogressCancel(){if(DEXTTOP.G_CURREDITOR.xhr_onprogress)try{DEXTTOP.G_CURREDITOR.xhr_onprogress.abort(),DEXTTOP.G_CURREDITOR.xhr_onprogress=null}catch(e){}}function setDragAndDropEvent(e){e=document.getElementById(e),DEXTTOP.DEXT5.util.addEvent(e,"dragenter",upload_DragEnter),DEXTTOP.DEXT5.util.addEvent(e,"dragover",upload_DragOver),DEXTTOP.DEXT5.util.addEvent(e,"drop",upload_Drop),DEXTTOP.DEXT5.util.addEvent(e,"click",upload_Drop_zone_click),DEXTTOP.DEXT5.util.addEvent(e,"dragleave",upload_DragLeave)}function upload_DragEnter(e){e.stopPropagation(),e.preventDefault()}function upload_DragOver(e){document.getElementById("drop_zone").style.border="solid 1px gray",document.getElementById("drop_zone").style.backgroundColor="#EDEDED",e.stopPropagation(),e.preventDefault()}function upload_DragLeave(e){document.getElementById("drop_zone").style.border="dashed 1px gray",document.getElementById("drop_zone").style.backgroundColor="#FFFFFF",e.stopPropagation(),e.preventDefault()}function upload_Drop(e){document.getElementById("drop_zone").style.border="dashed 1px gray",document.getElementById("drop_zone").style.backgroundColor="#FFFFFF";var t=document.getElementById("drop_zone_uploadtype").value;G_dragDropFileObj=e.dataTransfer.files;if(!fileOnchange(G_dragDropFileObj,t)){switch(t){default:document.getElementById("file_text").value=e.dataTransfer.files[0].name,document.getElementById("file_text").setAttribute("value",e.dataTransfer.files[0].name),document.getElementById("file_text_view")&&(document.getElementById("file_text_view").value=e.dataTransfer.files[0].name,document.getElementById("file_text_view").setAttribute("value",e.dataTransfer.files[0].name))}DEXTTOP.DEXT5.util.cancelEvent(e)}}function upload_Drop_zone_click(){document.getElementById(DEXTTOP.G_CURREDITOR._config.fileFieldID).click()};