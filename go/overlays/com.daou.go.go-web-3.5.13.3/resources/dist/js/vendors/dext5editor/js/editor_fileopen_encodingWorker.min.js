self.addEventListener("message",function(e){e=e.data;if(e.init){var t=!1;FileReaderSync&&(t=!0),postMessage({result:t})}else try{var n;n=e.mozSlice?e.mozSlice(0,4):e.webkitSlice?e.webkitSlice(0,4):e.slice(0,4);var r=new FileReaderSync,i=r.readAsArrayBuffer(n),s=new Uint8Array(i),r=i=void 0,o=!1;n="";if(239==(s[0]&255)&&187==(s[1]&255)&&191==(s[2]&255))n="UTF-8",o=!0;else if(254==(s[0]&255)&&255==(s[1]&255))n="UTF-16BE",o=!0;else if(255==(s[0]&255)&&254==(s[1]&255))n="UTF-16LE",o=!0;else if(0==(s[0]&255)&&0==(s[1]&255)&&254==(s[0]&255)&&255==(s[1]&255))n="UTF-32BE",o=!0;else if(255==(s[0]&255)&&254==(s[1]&255)&&0==(s[0]&255)&&0==(s[1]&255))n="UTF-32LE",o=!0;else{s=!0;if(5242880>=e.size){for(var u=new FileReaderSync,a=u.readAsArrayBuffer(e),t=new Uint8Array(a),u=a=void 0,f,l,u=!0,a=f=0;a<t.length;a++)if(l=t[a]&255,0!=(l&128)&&(u=!1),0==f){if(128<=l){do l=l<<1&255,f++;while(0!=(l&128));f--;if(0==f){s=!1;break}}}else{if(128!=(l&192)){s=!1;break}f--}t=void 0,0<f&&(s=!1),u&&(s=!1)}n=s?"UTF-8":"EUC-KR"}var c=new FileReader;c.onload=function(e){postMessage({result:this.result,hasBom:o}),c=void 0},c.readAsText(e,n)}catch(h){postMessage({result:"[DEXT5Error] "+h.message,hasBom:!1})}},!1);