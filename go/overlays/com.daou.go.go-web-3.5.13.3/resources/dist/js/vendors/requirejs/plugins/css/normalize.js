define(["require","module"],function(require,e){function t(e,t,i){return e.match(/^\/|([^\:\/]*:)/)?e:r(n(e,t),i)}function n(e,t){e.substr(0,2)=="./"&&(e=e.substr(2)),baseParts=t.split("/"),uriParts=e.split("/"),baseParts.pop();while(curPart=uriParts.shift())curPart==".."?baseParts.pop():baseParts.push(curPart);return baseParts.join("/")}function r(e,t){baseParts=t.split("/"),baseParts.pop(),t=baseParts.join("/")+"/",i=0;while(t.substr(i,1)==e.substr(i,1))i++;while(t.substr(i,1)!="/")i--;t=t.substr(i+1),e=e.substr(i+1),baseParts=t.split("/"),uriParts=e.split("/"),out="";while(baseParts.shift())out+="../";while(curPart=uriParts.shift())out+=curPart+"/";return out.substr(0,out.length-1)}var s=function(e,n,r){urlRegEx=/(url\(\s*"(.*)"\s*\))|(url\(\s*'(.*)'\s*\))|(url\(\s*(.*)\s*\))/g;while(result=urlRegEx.exec(e))url=t(result[2]||result[4]||result[6],n,r),e=e.replace(result[2]||result[4]||result[6],url);importRegEx=/(@import\s*'(.*)')|(@import\s*"(.*)")/g;while(result=importRegEx.exec(e))url=t(result[2]||result[4],n,r),e=e.replace(result[2]||result[4],url);return e};return s.convertURIBase=t,s});