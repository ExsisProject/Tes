/*
* Print Element Plugin 2.0
*
* Copyright (c) 2012 Erik Zaadi
*
*  Home Page : http://projects.erikzaadi/jQuery.printElement
*  Issues (bug reporting) : http://github.com/erikzaadi/jQuery.printElement/issues
*  jQuery plugin page : http://plugins.jquery.com/project/printElement
*
* Dual licensed under the MIT and GPL licenses:
*   http://www.opensource.org/licenses/mit-license.php
*   http://www.gnu.org/licenses/gpl.html
*
*/

(function(e,t){function i(t,i){var o=a(t,i),u=null,f=null;if(i.printMode.toLowerCase()==="popup")u=e.open("about:blank","printElementWindow","width=720,height=440,scrollbars=yes"),f=u.document;else{var l="printElement_"+Math.round(Math.random()*99999).toString(),c=n.createElement("IFRAME");r(c).attr({style:i.iframeElementOptions.styleToAdd,id:l,className:i.iframeElementOptions.classNameToAdd,frameBorder:0,scrolling:"no",src:"about:blank"}),n.body.appendChild(c),f=c.contentWindow||c.contentDocument,f.document&&(f=f.document),c=n.frames?n.frames[l]:n.getElementById(l),u=c.contentWindow||c}focus(),f.open(),f.write(o),f.close(),s(u)}function s(e){var t=navigator.userAgent.toLowerCase();e&&e.printPage?setTimeout(function(){e.printPage()},50):setTimeout(function(){s(e)},50)}function o(e){var t=r(e),n=t.clone();r(":checked",n).each(function(){this.setAttribute("checked","checked")}),r("input[type='text'],input[type='number']",n).each(function(){this.setAttribute("value",r(this).val())}),r("select",n).each(function(){var e=r(this);r("option",e).each(function(){e.val()===r(this).val()&&this.setAttribute("selected","selected")})}),r("textarea",n).each(function(){var e=r(this).attr("value");this.firstChild?this.firstChild.textContent=e:this.innerHTML=e});var i=r("<div></div>").append(n).html();return i}function u(){var t=e.location.port?":"+e.location.port:"";return e.location.protocol+"//"+e.location.hostname+t+e.location.pathname}function a(e,t){var i=r(e),s=o(e),a=[];a.push('<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>'+t.pageTitle+"</title>");if(t.overrideElementCSS){if(t.overrideElementCSS.length>0)for(var f=0;f<t.overrideElementCSS.length;f+=1){var l=t.overrideElementCSS[f];if(typeof l=="string")a.push('<link type="text/css" rel="stylesheet" href="'+l+'" >');else{var c=l.media||"";a.push('<link type="text/css" rel="stylesheet" href="'+l.href+'" media="'+c+'" >')}}}else r("link",n).filter(function(){return r(this).attr("rel").toLowerCase()==="stylesheet"}).each(function(){var e=r(this).attr("media")||"";a.push('<link type="text/css" rel="stylesheet" href="'+r(this).attr("href")+'" media="'+e+'" >')});return a.push('<base href="'+u()+'" />'),a.push('</head><body style="'+t.printBodyOptions.styleToAdd+'" class="'+t.printBodyOptions.classNameToAdd+'">'),a.push('<div class="'+i.attr("class")+'">'+s+"</div>"),a.push('<script type="text/javascript">function printPage(){focus();print();'+(!t.leaveOpen&&t.printMode.toLowerCase()==="popup"?"close();":"")+"}</script>"),a.push("</body></html>"),a.join("")}var n=e.document,r=e.jQuery;r.fn.printElement=function(e){var t=r.extend({},r.fn.printElement.defaults,e);if(t.printMode==="iframe"){var n=navigator.userAgent.toLowerCase();if(r.browser.opera||/chrome/.test(n)||GO.util.msie())t.printMode="popup"}return r("[id^='printElement_']").remove(),this.each(function(){var e=r.meta?r.extend({},t,r(this).data()):t;i(r(this),e)})},r.fn.printElement.defaults={printMode:"iframe",pageTitle:"",overrideElementCSS:null,printBodyOptions:{styleToAdd:"",classNameToAdd:""},leaveOpen:!1,iframeElementOptions:{styleToAdd:"border:none;position:absolute;width:0px;height:0px;bottom:0px;left:0px;",classNameToAdd:""}},r.fn.printElement.cssElement={href:"",media:""}})(window);