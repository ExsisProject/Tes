define(["task/models/task","task/models/task_folder","jquery.ajaxmock","GO.util"],function(e,t){describe("task (include taskFolder!)",function(){it("id. \uc5c5\ubb34 \ub4f1\ub85d\uc2dc TaskModel \uc5d0\ub294 ID\uac00 \uc5c6\ub2e4.",function(){var t=new e;expect(t.id).toBe(null)}),it("id. \uc5c5\ubb34 \uc218\uc815\uc2dc TaskModel \uc5d0\ub294 ID\uac00 \uc788\ub2e4.",function(){var t=new e({id:"1"});expect(t.id).not.toBe(null)}),it("url. ID\uac00 \uc788\ub294 TaskModel URL \ud655\uc778.",function(){var t=new e({id:"1"});expect(t.url()).toBe("/api/task/1")}),it("url. ID\uac00 \uc5c6\ub294 TaskModel URL \ud655\uc778.",function(){var t=new e;expect(t.url()).toBe("/api/task")}),it("isDelay. dueDate\uac00 \uc5c6\uc73c\uba74 \uc9c0\uc5f0 \uc5c5\ubb34\uac00 \uc544\ub2c8\ub2e4.",function(){var t=new e({id:"1"});expect(t.isDelay()).toBe(!1)}),it("isDelay. \uae30\ud55c\uc77c\uc774 \ud604 \uc2dc\uac04\ubcf4\ub2e4 \ubbf8\ub798\uc774\uba74 \uc9c0\uc5f0 \uc5c5\ubb34\uac00 \uc544\ub2c8\ub2e4.",function(){var t=new e({id:"1",status:{end:!1}}),n=new Date;n.setDate(n.getDate()+1),t.set("dueDate",n),expect(t.isDelay()).toBe(!1)}),it("isDelay. \uae30\ud55c\uc77c\uc774 \ud604 \uc2dc\uac04\ubcf4\ub2e4 \uacfc\uac70\uc774\uba74 \uc9c0\uc5f0 \uc5c5\ubb34\uc774\ub2e4.",function(){var t=new e({id:"1",status:{end:!1}}),n=new Date;n.setDate(n.getDate()-1),t.set("dueDate",n),expect(t.isDelay()).toBe(!0)}),it("isDelay. \uae30\ud55c\uc77c\uc774 \ud604 \uc2dc\uac04\ubcf4\ub2e4 \ubbf8\ub798\uc774\uace0, \uc885\ub8cc\ub41c \uc5c5\ubb34\uc774\uba74 \uc9c0\uc5f0 \uc5c5\ubb34\uac00 \uc544\ub2c8\ub2e4.",function(){var t=new e({id:"1",status:{end:!0}}),n=new Date;n.setDate(n.getDate()+1),t.set("dueDate",n),expect(t.isDelay()).toBe(!1)}),it("isDelay. \uae30\ud55c\uc77c\uc774 \ud604 \uc2dc\uac04\ubcf4\ub2e4 \uacfc\uac70\uc9c0\ub9cc, \uc885\ub8cc\ub41c \uc5c5\ubb34\uc774\uba74 \uc9c0\uc5f0 \uc5c5\ubb34\uac00 \uc544\ub2c8\ub2e4.",function(){var t=new e({id:"1",status:{end:!0}}),n=new Date;n.setDate(n.getDate()-1),t.set("dueDate",n),expect(t.isDelay()).toBe(!1)}),it("hasActivity. \uc5c5\ubb34\uac00 \ud65c\ub3d9\uae30\ub85d\uc744 1\uac1c \uc774\uc0c1 \uac00\uc9c0\uace0 \uc788\ub2e4.",function(){var t=new e({id:"1",activityCount:1});expect(t.hasActivity()).toBe(!0)}),it("hasActivity. \uc5c5\ubb34\uac00 \ud65c\ub3d9\uae30\ub85d\uc744 \uac00\uc9c0\uace0 \uc788\uc9c0 \uc54a\ub2e4.",function(){var t=new e({id:"1",activityCount:0});expect(t.hasActivity()).toBe(!1)}),it("hasDueDate. \uc5c5\ubb34\uac00 \uae30\ud55c\uc744 \uac00\uc9c0\uace0 \uc788\ub2e4.",function(){var t=new e({id:"1"});t.set("dueDate",new Date),expect(t.hasDueDate()).toBe(!0)}),it("hasDueDate. \uc5c5\ubb34\uac00 \uae30\ud55c\uc744 \uac00\uc9c0\uace0 \uc788\uc9c0 \uc54a\ub2e4.",function(){var t=new e({id:"1"});expect(t.hasDueDate()).toBe(!1)}),it("getShortDueDate. \uc5c5\ubb34\uc758 \uae30\ud55c\uc774 util\uc758 shortDate \ud615\ud0dc\ub85c \ucd9c\ub825\ub41c\ub2e4.",function(){var t=new Date,n=new e({id:"1",dueDate:t});expect(n.getShortDueDate()).toBe(GO.util.shortDate(t))}),it("getShortDueDate. \uc5c5\ubb34\uc758 \uae30\ud55c\uc774 \uc5c6\uc73c\uba74 \uacf5\ubc31\uc774 \ubc18\ud658\ub41c\ub2e4.",function(){var t=new e({id:"1"});expect(t.getShortDueDate()).toBe("")}),it("getDueDate. \uc5c5\ubb34\uc758 \uae30\ud55c\uc774 util\uc758 basicDate2 \ud615\ud0dc\ub85c \ucd9c\ub825\ub41c\ub2e4.",function(){var t=new Date,n=new e({id:"1",dueDate:t});expect(n.getDueDate()).toBe(GO.util.basicDate2(t))}),it("getDueDate. \uc5c5\ubb34\uc758 \uae30\ud55c\uc774 \uc5c6\uc73c\uba74 \uacf5\ubc31\uc774 \ubc18\ud658\ub41c\ub2e4.",function(){var t=new e({id:"1"});expect(t.getDueDate()).toBe("")}),it("firstAssignee. \ub2f4\ub2f9\uc790\uac00 \ud55c\uba85\uc778 \uacbd\uc6b0 \ud574\ub2f9 \ub2f4\ub2f9\uc790\uac00 \ubc18\ud658\ub41c\ub2e4.",function(){var t=[{id:1,name:"\uc9c4\ubc94\ub3d91",email:"test1@daou.co.kr",position:"\ubd80\ud68c\uc7a5",thumbnail:"/resources/images/photo_profile_small.jpg",status:"ONLINE"}],n=new e({id:"1",assignees:t});expect(n.firstAssignee()).toBe(t[0])}),it("firstAssignee. \ub2f4\ub2f9\uc790\uac00 \uc5ec\ub7ec\uba85\uc778 \uacbd\uc6b0 \ud574\ub2f9 \uccab\ubc88\uc9f8 \ub2f4\ub2f9\uc790\uac00 \ubc18\ud658\ub41c\ub2e4.",function(){var t=[{id:1,name:"\uc9c4\ubc94\ub3d91",email:"test1@daou.co.kr",position:"\ubd80\ud68c\uc7a5",thumbnail:"/resources/images/photo_profile_small.jpg",status:"ONLINE"},{id:2,name:"\uc9c4\ubc94\ub3d92",email:"test2@daou.co.kr",position:"\ubd80\uc7a5",thumbnail:"/resources/images/photo_profile_small.jpg",status:"ONLINE"}],n=new e({id:"1",assignees:t});expect(n.firstAssignee()).toBe(t[0])}),it("firstAssignee. \ub2f4\ub2f9\uc790\uac00 \uc5c6\ub294 \uacbd\uc6b0 undefined\uac00 \ubc18\ud658\ub41c\ub2e4.",function(){var t=new e({id:"1",assignees:[]});expect(t.firstAssignee()).toBe(undefined)}),it("assigneeLabel. \ub2f4\ub2f9\uc790\uac00 \uc5c6\ub294 \uacbd\uc6b0 '-' \uc774 \ubc18\ud658\ub41c\ub2e4.",function(){var t=new e({id:"1",assignees:[]});expect(t.assigneeLabel()).toBe("-")}),it("assigneeLabel. \ub2f4\ub2f9\uc790\uac00 \ud55c\uba85\uc778 \uacbd\uc6b0 \ub2f4\ub2f9\uc790\uc758 '\uc774\ub984 \uc9c1\uae09' \uc774 \ubc18\ud658\ub41c\ub2e4.",function(){var t=new e({id:"1",assignees:[{id:1,name:"\uc9c4\ubc94\ub3d91",email:"test1@daou.co.kr",position:"\ubd80\ud68c\uc7a5",thumbnail:"/resources/images/photo_profile_small.jpg",status:"ONLINE"}]});expect(t.assigneeLabel()).toBe("\uc9c4\ubc94\ub3d91 \ubd80\ud68c\uc7a5")}),it("assigneeLabel. \ub2f4\ub2f9\uc790\uac00 \uc5ec\ub7ec\uba85\uc778 \uacbd\uc6b0 \ub2f4\ub2f9\uc790\uc758 '\uc774\ub984 \uc678 x\uba85' \uc774 \ubc18\ud658\ub41c\ub2e4.",function(){var t=new e({id:"1",assignees:[{id:1,name:"\uc9c4\ubc94\ub3d91",email:"test1@daou.co.kr",position:"\ubd80\ud68c\uc7a5",thumbnail:"/resources/images/photo_profile_small.jpg",status:"ONLINE"},{id:2,name:"\uc9c4\ubc94\ub3d92",email:"test2@daou.co.kr",position:"\ubd80\uc7a5",thumbnail:"/resources/images/photo_profile_small.jpg",status:"ONLINE"}]});expect(t.assigneeLabel("\uc678","\uba85")).toBe("\uc9c4\ubc94\ub3d91 \uc678 1\uba85")}),it("creatorLabel. \ub4f1\ub85d\uc790 \ub77c\ubca8\uac00\uc838\uc624\uae30. \uc774\ub984 + \uc9c1\uae09(\uc9c1\uae09\uc774 \uc788\ub294\uacbd\uc6b0\ub9cc) \ud615\ud0dc\uc758 string \uc774 \ubc18\ud658\ub41c\ub2e4.",function(){var t=new e({creator:{id:1165,name:"\uc815\ud574\uc6b4",email:"hwjung@daou.co.kr",position:"\uc5f0\uad6c\uc6d0",thumbnail:"/thumb/user/small/21613-29318",status:"ONLINE"}});expect(t.creatorLabel()).toBe("\uc815\ud574\uc6b4 \uc5f0\uad6c\uc6d0")}),it("getEditableAttribute. \uc5c5\ubb34 \ub4f1\ub85d\uc2dc \ud544\ub4dc \uc791\uc131 \uad8c\ud55c check",function(){$.ajaxMock.register("/api/task/attribute/writable/1",{responseText:{data:["NAME","DUEDATE","TAG","FIELD","CONTENT","ASSIGNEE","REFERER","APPROVER"],message:"OK",code:"200",__go_checksum__:!0},statusCode:200,status:"OK",type:"GET"});var t=new e({issueType:{id:1,name:"\uc77c\ubc18\uc5c5\ubb34",description:"\ub300\uae30 -> \uc9c4\ud589 -> \uc644\ub8cc \uc21c\uc758 \uc0c1\ud0dc\uac00 \ubcc0\uacbd\ub418\uba70, \uc5c5\ubb34 \ucc98\ub9ac \ub2f4\ub2f9\uc790\uac00 \uc5c5\ubb34\ub97c \uc885\ub8cc\uc2dc\ud0a4\ub294 \uc5c5\ubb34 \ud615\ud0dc\uc785\ub2c8\ub2e4.",approver:!1,fields:[]}}),n={APPROVER:!0,ASSIGNEE:!0,CONTENT:!0,DUEDATE:!0,FIELD:!0,NAME:!0,PRIVATETASK:!1,REFERER:!0,TAG:!0},r=null;t.getEditableAttribute().done(function(e){r=e}),expect(r.PRIVATETASK).toEqual(!1),expect(r.PRIVATETASK).toEqual(n.PRIVATETASK)}),it("getEditableAttribute. \uc5c5\ubb34 \ub4f1\ub85d\uc2dc \ud544\ub4dc \uc791\uc131 \uad8c\ud55c. issueTypeID \uc774 \uc5c6\ub294 \uacbd\uc6b0 default editable \ubc18\ud658",function(){var t=new e({issueType:{name:"\uc77c\ubc18\uc5c5\ubb34",description:"\ub300\uae30 -> \uc9c4\ud589 -> \uc644\ub8cc \uc21c\uc758 \uc0c1\ud0dc\uac00 \ubcc0\uacbd\ub418\uba70, \uc5c5\ubb34 \ucc98\ub9ac \ub2f4\ub2f9\uc790\uac00 \uc5c5\ubb34\ub97c \uc885\ub8cc\uc2dc\ud0a4\ub294 \uc5c5\ubb34 \ud615\ud0dc\uc785\ub2c8\ub2e4.",approver:!1,fields:[]}}),n={APPROVER:!0,ASSIGNEE:!0,CONTENT:!0,DUEDATE:!0,FIELD:!0,NAME:!0,PRIVATETASK:!0,REFERER:!0,TAG:!0},r=null;t.getEditableAttribute().done(function(e){r=e}),expect(r.PRIVATETASK).toBe(!0),expect(r.PRIVATETASK).toBe(n.PRIVATETASK)}),it("getEditableAttribute. \uc5c5\ubb34 \uc218\uc815\uc2dc \ud544\ub4dc \uc791\uc131 \uad8c\ud55c check",function(){$.ajaxMock.register("/api/task/1/attribute/editable",{responseText:{data:["NAME","DUEDATE","TAG","FIELD","CONTENT","ASSIGNEE","PRIVATETASK","APPROVER"],message:"OK",code:"200",__go_checksum__:!0},statusCode:200,status:"OK",type:"GET"});var t=new e({id:"1"}),n={APPROVER:!0,ASSIGNEE:!0,CONTENT:!0,DUEDATE:!0,FIELD:!0,NAME:!0,PRIVATETASK:!0,REFERER:!1,TAG:!0},r=null;t.getEditableAttribute().done(function(e){r=e}),expect(r.REFERER).toBe(!1),expect(r.REFERER).toBe(n.REFERER)}),it("getAction. \uc5c5\ubb34\uc758 action \ubaa9\ub85d",function(){$.ajaxMock.register("/api/task/1/action",{responseText:{data:[{id:1,name:"\uc5c5\ubb34\uc2dc\uc791"}],message:"OK",code:"200",__go_checksum__:!0},statusCode:200,status:"OK",type:"GET"});var t=new e({id:"1"}),n=[{id:1,name:"\uc5c5\ubb34\uc2dc\uc791"}],r=null;t.getAction().done(function(e){r=e}),expect(r.length).toBe(n.length),expect(r[0].name).toBe(n[0].name)}),it("hasAction",function(){$.ajaxMock.register("/api/task/1/action",{responseText:{data:[{id:1,name:"\uc5c5\ubb34\uc2dc\uc791"}],message:"OK",code:"200",__go_checksum__:!0},statusCode:200,status:"OK",type:"GET"});var t=new e({id:"1"}),n=[{id:1,name:"\uc5c5\ubb34\uc2dc\uc791"}],r=null;t.getAction().done(function(e){r=e}),expect(t.hasAction()).toBe(!0)}),it("getUpdatedAt. \ubaa8\ub378\uc758 ID\uac00 \uc5c6\uc73c\ubbc0\ub85c null\uc774 \ubc18\ud658\ub41c\ub2e4",function(){var t=new e;expect(t.getUpdatedAt()).toBe(null)}),it("getUpdatedAt. \ubaa8\ub378\uc758 ID\uac00 \uc788\uc73c\ubbc0\ub85c \ud604\uc7ac \uc2dc\uac04\uc774 \ubc18\ud658\ub41c\ub2e4",function(){var t=new e({id:"1"}),n=new Date(t.getUpdatedAt()),r=new Date;expect(n.getFullYear()).toBe(r.getFullYear()),expect(n.getMonth()).toBe(r.getMonth()),expect(n.getDate()).toBe(r.getDate()),expect(n.getHours()).toBe(r.getHours()),expect(n.getMinutes()).toBe(r.getMinutes())}),it("getTagLabel. \uc5c5\ub370\uc774\ud2b8 \uc2dc\uac04\uc744 \uc0dd\uc131\ud55c\ub2e4. \ubaa8\ub378\uc758 ID\uac00 \uc788\uc73c\ubbc0\ub85c \ud604\uc7ac \uc2dc\uac04\uc774 \ubc18\ud658\ub41c\ub2e4",function(){var t=new e({id:"1",tags:[1,2,3]});expect(t.getTagLabel()).toBe("1, 2, 3")}),it("isReadable. \uc5f4\ub78c\uc774 \uac00\ub2a5\ud55c \uc5c5\ubb34",function(){var t=new e({id:"1",actions:{readable:!0}});expect(t.isReadable()).toBe(!0)}),it("isReadable. \uc5f4\ub78c\uc774 \ubd88\uac00\ub2a5\ud55c \uc5c5\ubb34",function(){var t=new e({id:"1",actions:{readable:!1}});expect(t.isReadable()).toBe(!1)}),it("getFiles. attach \ub4e4\uc758 icon \uacfc fileSize String \ubcc0\ud658 \ud655\uc778",function(){var t=[{id:1,createdAt:"2014-02-21T13:27:39",updatedAt:"2014-02-21T13:27:39",name:"\ud300\uc624\ud53c\uc2a4 \uc11c\ubc84 \uad6c\ub3d9.docx",extention:"docx",size:26407,preview:!0,download:!0,encrypt:"7fbde11da3b9a408d5e790f3a3281fc1"},{id:2,createdAt:"2014-02-21T13:27:39",updatedAt:"2014-02-21T13:27:39",name:"\ud300\uc624\ud53c\uc2a4 \uc11c\ube44\uc2a4 \uc7a5\ube44 \uc811\uadfc.docx",extention:"docx",size:424055,preview:!0,download:!0,encrypt:"483d938edffbf58678cf620882d498d3"},{id:3,createdAt:"2014-02-21T13:29:29",updatedAt:"2014-02-21T13:29:29",name:"\ud300\uc624\ud53c\uc2a4 \ubaa8\ubc14\uc77c-1.jpg",extention:"jpg",size:77379,thumbLarge:"/thumb/attach/large/3-77379",thumbMid:"/thumb/attach/mid/3-77379",thumbSmall:"/thumb/attach/small/3-77379",preview:!0,download:!0,encrypt:"27013d5477e9a62ef399eef5b21c7090"},{id:4,createdAt:"2014-02-21T13:29:29",updatedAt:"2014-02-21T13:29:29",name:"\ud300\uc624\ud53c\uc2a4 \ubaa8\ubc14\uc77c-2.jpg",extention:"jpg",size:23694,thumbLarge:"/thumb/attach/large/4-23694",thumbMid:"/thumb/attach/mid/4-23694",thumbSmall:"/thumb/attach/small/4-23694",preview:!0,download:!0,encrypt:"38f00d0a8ff2837bfbf6fb1304e2ddf8"}],n=new e({id:"1",attaches:t});expect(n.getFiles().length).toBe(2),expect(n.getImages().length).toBe(2),expect(n.getFiles()[0].icon).toBe("ic_docx"),expect(n.getFiles()[0].fileSizeString).toBe("25.79KB"),expect(n.getImages()[0].icon).toBe("ic_jpg"),expect(n.getImages()[0].fileSizeString).toBe("75.57KB")})})});