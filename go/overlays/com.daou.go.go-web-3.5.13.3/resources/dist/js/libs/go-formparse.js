define(["jquery","views/mobile/m_org"],function(e,t){function f(){var e=window.navigator.userAgent.toLowerCase();return e.indexOf("msie 9.0")>-1||e.indexOf("msie 10.0")>-1}function l(e){return p(e,i)}function c(e){return p(e,o)}function h(e){return GO.util.msie()&&e?!1:!0}function p(t,n){return t.replace(/{{([^}}]*)}}/g,function(t,r){var i,s=!1,o=!0,u=!1,a=/(\$require\$)/gi,f=/(\$adminedit\$)/gi,l=/(\$autotype\$)/gi,c="",h="",p="",d="",v="list",m;a.test(r)&&(s=!0,r=r.replace(a,"")),l.test(r)&&(u=!0,r=r.replace(l,"")),f.test(r)&&(o=!1,r=r.replace(f,"")),r.replace(/\$maxlength:([0-9]*)\$/g,function(e,t){c=t,r=r.replace(e,"")}),r.replace(/\$width:([0-9]*)\$/g,function(e,t){h=t,r=r.replace(e,"")}),r.replace(/\$defaultstr:(.*)\$/g,function(e,t){p=t,r=r.replace(e,"")}),r.replace(/\$simple\$/g,function(e){d="simple",r=r.replace(e,"")}),r.replace(/\$department\$/g,function(e){v="department",r=r.replace(e,"")});if(r.search("radio")>=0||r.search("check")>=0)return i=r.split("_"),i[0].search(":")>=0&&(i[0]=i[0].substring(0,i[0].search(":"))),e(n[i[0]]).attr({"data-dsl":t,"data-autotype":!!u,"data-require":!!s}).prop("outerHTML");if(r.search("cSel")>=0||r.search("currency")>=0){i=r.split("_");var g,y;return i[0].search(":")>=0?(g=i[0].substring(0,i[0].search(":")),y=i[0].substring(i[0].search(":")+1)):g=i[0],e(n[g]).attr({"data-dsl":t,"data-autotype":!!u,id:y,"data-type":g}).prop("outerHTML")}if(r.search("period")>=0||r.search("time")>=0)return n.hasOwnProperty(r)?n[r]:"";if(r.search("cOrg")>=0)return i=r.split(":"),m=e(n[i[0]]).attr({"data-dsl":t,"data-id":i[1]?i[1]:"","data-name":i[1]?i[1]:"","data-orgtype":v}),m.prop("outerHTML");if(r.search("cSum")>=0){i=r.split(":"),b=i[0];if(b.search("_")>=0)var b=b.split("_")[0]?b.split("_")[0]:i[0];return m=e(n[b]).attr({"data-dsl":t,"data-id":i[1]?i[1]:"","data-name":i[1]?i[1]:"","data-require":!!s,"data-maxlength":c,"data-width":h,"data-defaultstr":p,"data-editable":o}),d=="simple"&&m.attr("data-skintype","simple"),n.hasOwnProperty(b)?m.prop("outerHTML"):""}return i=r.split(":"),m=e(n[i[0]]).attr({"data-dsl":t,"data-id":i[1]?i[1]:"","data-name":i[1]?i[1]:"","data-require":!!s,"data-maxlength":c,"data-width":h,"data-defaultstr":p,"data-editable":o}),d=="simple"&&m.attr("data-skintype","simple"),n.hasOwnProperty(i[0])?m.prop("outerHTML"):""})}function d(){e.each(e('form input[data-dsl="{{name_pos}}"]'),function(){e(this).attr("data-value","\uc774\ub984 \uc9c1\uc704").val("\uc774\ub984 \uc9c1\uc704")}),e.each(e('form input[data-dsl="{{user_name}}"]'),function(){e(this).attr("data-value","\uc774\ub984").val("\uc774\ub984")}),e.each(e('form input[data-dsl="{{user_pos}}"]'),function(){e(this).attr("data-value","\uc9c1\uc704").val("\uc9c1\uc704")}),e.each(e('form input[data-dsl="{{user_empno}}"]'),function(){e(this).attr("data-value","\uc0ac\ubc88").val("\uc0ac\ubc88")}),e.each(e('form input[data-dsl="{{user_org}}"]'),function(){e(this).attr("data-value","\ubd80\uc11c").val("\ubd80\uc11c")}),e.each(e('form input[data-dsl="{{today}}"]'),function(){e(this).attr("data-value","\uc624\ub298\ub0a0\uc9dc").val("\uc624\ub298\ub0a0\uc9dc")}),e.each(e('form input[data-dsl="{{reg_date}}"]'),function(){e(this).attr("data-value","\uae30\uc548\uc77c").val("\uae30\uc548\uc77c")}),e.each(e('form span[data-dsl="{{doc_no}}"]'),function(){e(this).attr("data-value","\ubb38\uc11c\ubc88\ud638").text("\ubb38\uc11c\ubc88\ud638")})}function v(e,t){return e.replace(/{(\w*)}/g,function(e,n){return t.hasOwnProperty(n)?t[n]:""})}function m(e,t,n){function i(){switch(n.headerType){case"POSITION":return t.userPosition?t.userPosition:"";case"DUTY":return t.userDuty?t.userDuty?t.userDuty:"":t.userPosition?t.userPosition:"";case"ACTTYPE":return t.name?t.name:"";case"NAME":return t.userName?t.userName:"";case"DEPT":return t.deptName;default:return""}}function s(){if(t.isArbitrary)return'<span class="arbitrary"></span>';var e="",r;n.bodyElement.sign&&(t.status!="RETURN"&&t.signPath?e+='<span class="sign_stamp stamp_approved"><img src="'+t.signPath+'"></span>':n.bodyElement.name||(r=t.userName?t.userName:t.deptName,e+='<span class="sign_name">'+r+"</span>")),n.bodyElement.name&&(r=t.userName?t.userName:t.deptName,e+='<span class="sign_name">'+r+"</span>"),n.bodyElement.position&&(r=t.userPosition?t.userPosition:t.deptName,e+='<span class="sign_position">'+r+"</span>");if(n.bodyElement.duty){var i=t.userDuty;!i&&!n.bodyElement.position&&(i=t.userPosition?t.userPosition:t.deptName),e+='<span class="sign_duty">'+i+"</span>"}return n.bodyElement.dept&&(e+='<span class="sign_dept">'+t.deptName+"</span>"),e}function o(){return!t.userName&&i()==""}var a,f={activityId:t.id?t.id:"",userId:t.userId?t.userId:""};return e=="type1"?a=v(u.type1.join(""),_.extend(f,{body:s(),header:i(),completedAt:t.completedAt?GO.util.toMoment(t.completedAt).format("YYYY/MM/DD"):"",status:t.deputyActivity?r["(\ub300\uacb0)"]:t.arbitraryStatus?r["(\uc804\uacb0)"]:""})):e==="type1New"?a=v(u.type1New.join(""),_.extend(f,{body:s(),header:i(),completedAt:t.completedAt?GO.util.toMoment(t.completedAt).format("YYYY/MM/DD"):"",status:t.deputyActivity?r["(\ub300\uacb0)"]:t.arbitraryStatus?r["(\uc804\uacb0)"]:""})):o()?a=v(u.type2EmptyName.join(""),_.extend(f,{deptName:t.deptName?t.deptName:"",completedAt:t.completedAt?GO.util.toMoment(t.completedAt).format("YYYY-MM-DD HH:mm"):""})):a=v(u.type2.join(""),_.extend(f,{body:t.userName?t.userName:"",header:i(),deptName:t.deptName?t.deptName:"",completedAt:t.completedAt?GO.util.toMoment(t.completedAt).format("YYYY-MM-DD HH:mm"):""})),a}function g(){e.each(e('form input[data-dsl*="calendar"]'),function(){e.datepicker.setDefaults(e.datepicker.regional[GO.config("locale")]),e(this).datepicker({dateFormat:"yy-mm-dd(D)",changeMonth:!0,changeYear:!0,yearRange:"c-100:c+10",yearSuffix:"",onSelect:function(){e(this).trigger("change")},beforeShow:function(t,n){n.dpDiv.attr("data-layer","");var r=!0;e(document).trigger("showLayer.goLayer",r)},onClose:function(){var t=!0;e(document).trigger("hideLayer.goLayer",t)}}).keydown(function(t){if(t.keyCode==8||t.keyCode==46)t.preventDefault(),e.datepicker._clearDate(this),e(t.currentTarget).blur()})});var n=e("form input,form textarea");n.bind("focusin",function(){e(this).addClass("edit")}),n.bind("focusout",function(){e(this).removeClass("edit")}),e.each(e('form input[data-dsl*="currency"]'),function(){var t=e(this).attr("data-dsl"),n;t.replace(/{{([^}}]*)}}/g,function(e,t){n=t});var r=n.split("_");e(this).inputmask({alias:"decimal",groupSeparator:",",autoGroup:!0,digits:parseInt(r[1]?r[1]:"0"),allowMinus:!0,onBeforePaste:function(e){return e.replace(/,/gi,"")}})}),e.each(e('form input[data-dsl*="number"]'),function(){e(this).css("ime-mode","disabled"),e(this).off("keydown"),e(this).on("keydown",function(t){if(e.inArray(t.keyCode,[46,8,9,27,13,110,190,188,189])!==-1||t.keyCode==65&&t.ctrlKey===!0||t.keyCode>=35&&t.keyCode<=39)return;var n=!1;t.keyCode>=48&&t.keyCode<=57||t.keyCode>=96&&t.keyCode<=105?n=!0:t.preventDefault(),t.shiftKey&&n&&t.preventDefault()}),e(this).on("keyup",function(e){this.value.indexOf("-")==0?this.value="-"+this.value.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1"):this.value=this.value.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1")})}),e('form select[data-dsl*="cSel"]').length>0?e.each(e('form select[data-dsl*="cSel"]'),function(){e(this).attr("data-selectval")?e(this).find("select").val(e(this).attr("data-selectval")):e(this).find("select option:first").attr("selected","selected"),e(this).off("change"),e(this).on("change",function(){var t=e(this).find(":selected").val();e(this).attr("data-selectval",t)})}):e.each(e('form select[data-type*="cSel"]'),function(){e(this).attr("data-selectval")?e(this).find("select").val(e(this).attr("data-selectval")):e(this).find("select option:first").attr("selected","selected"),e(this).off("change"),e(this).on("change",function(){var t=e(this).find(":selected").val();e(this).attr("data-selectval",t)})}),e.each(e('form input[data-dsl*="cSum"]'),function(){var t=e(this).attr("name"),n=e(this).attr("data-dsl"),r;n.replace(/{{([^}}]*)}}/g,function(e,t){r=t});var i="0";r.search("_")>=0&&(i=r.split("_")[1].split(":")[0]),e(this).inputmask({alias:"decimal",groupSeparator:",",autoGroup:!0,digits:parseInt(i),allowMinus:!0,onBeforePaste:function(e){return e.replace(/,/gi,"")}});var s=e(this);s.off("focusout"),s.on("focusout",function(){var n=0;_.each(e('form input[data-dsl*="cSum"][name='+t+"]"),function(t){var r=e(t).val().replace(/\,/g,""),i=parseFloat(r)||0;n+=i},this),n=parseFloat(n.toFixed(i));var r=e('form input[data-dsl*="rSum"][name='+t+"]");r.val(n),e(r).inputmask({alias:"decimal",groupSeparator:",",autoGroup:!0,digits:parseInt(i),allowMinus:!0,onBeforePaste:function(e){return e.replace(/,/gi,"")}})})}),e.each(e('form ul[data-dsl*="cOrg"] li.creat'),function(){function l(){var e=s.attr("data-selected"),t=e?e.split(","):[];return _.map(t,function(e){var t=e.split("#");return{id:t[1]==undefined?"":t[1],username:t[0]}})}function c(e){return e.map(function(e){return e.username+"#"+e.id}).join(",")}var n=e(this).parent(),i=n.attr("data-orgtype"),s=e("#"+n.attr("id")),o=i=="department"?r["\ubd80\uc11c \ucd94\uac00"]:r["\uc0ac\uc6a9\uc790 \ucd94\uac00"],u=GO.util.store.get("apprConfig.multiCompanySupporting"),a=Hogan.compile(['<li data-id="{{id}}">','<span class="name">{{name}}</span>','<span class="btn_wrap">','<span class="ic ic_del" title="',r["\uc0ad\uc81c"],'">',"</span>","</span>","</li>"].join("")),f=Hogan.compile(['<li data-id="{{id}}">','<span class="name">{{name}}</span>','<span class="btn_wrap">','<span class="ic_classic ic_del" title="',r["\uc0ad\uc81c"],'">',"</span>","</span>","</li>"].join(""));e(this).off("click"),GO.util.isMobile()&&!GO.util.isMobilePC()?e(this).on("click",function(){GO.router.navigate(GO.router.getUrl()+"#org",{trigger:!1,pushState:!0});var e=new t({type:i});e.render({title:o,checkedUser:l(),callback:function(e){s.find("li").not(":last").remove(),s.attr("data-selected",e.map(function(e){return e.name+"#"+e.id}).join(","));var t=s.find("li.creat");return e.forEach(function(e){t.before(a.render({id:e.id,name:e.name}))}),!1}}),GO.EventEmitter.trigger("common","layout:scrollToTop",this)}):e(this).on("click",function(){e.goOrgSlide({header:o,desc:"",type:i,multiCompanyVisible:u,callback:function(e){if(!e||s.find('li[data-id="'+e.id+'"]').length)return;var t=l();t.push({username:e.name,id:e.id}),s.attr("data-selected",c(t)),s.find("li.creat").before(f.render({id:e.id,name:e.name}))},contextRoot:GO.contextRoot})}),s.off("click","li span.ic_del"),s.on("click","li span.ic_del",function(t){t.stopPropagation();var n=e(this).closest("li");if(n.attr("data-id")){var r=n.attr("data-id"),i=l(),o=i.filter(function(e){return e.id!==r});s.attr("data-selected",c(o))}else{var r=e(this).closest("li").find("span.name").text(),i=l(),o=i.filter(function(e){return e.username!==r});s.attr("data-selected",c(o))}n.remove()})}),e.each(e('form input[data-dsl*="$width"]'),function(){var t=e(this).attr("data-width");e(this).css("width",t+"px")}),GO.util.store.get("document.docStatus")=="CREATE"&&e.each(e('form input[data-dsl*="$defaultstr"], form textarea[data-dsl*="$defaultstr"]'),function(t,n){var r=e(n).attr("data-dsl"),i=e(this).attr("data-defaultstr"),s=/^[0-9]+$/.test(i);if(r.search("currency")>-1||r.search("number")>-1){if(!s)return!0;e(this).val(i),e(n).focus()}else e(this).val(i)})}var n={ko:{"\ud544\uc218":"\ud544\uc218\uac12 \uc785\ub2c8\ub2e4.","(\ub300\uacb0)":"(\ub300\uacb0)","(\uc804\uacb0)":"(\uc804\uacb0)","\ubc18\ub824":"\ubc18\ub824","\uc2dc":"\uc2dc","\ubd84":"\ubd84","\ubd80\uc11c \ucd94\uac00":"\ubd80\uc11c \ucd94\uac00","\uc0ac\uc6a9\uc790 \ucd94\uac00":"\uc0ac\uc6a9\uc790 \ucd94\uac00","\uc0ad\uc81c":"\uc0ad\uc81c","\ucd94\uac00":"\ucd94\uac00"},ja:{"\ud544\uc218":"\u5fc5\u9808\u5024\u3067\u3059\u3002","(\ub300\uacb0)":"(\u4ee3\u6c7a)","(\uc804\uacb0)":"(\u5c02\u6c7a)","\ubc18\ub824":"\u5374\u4e0b","\uc2dc":"\u6642","\ubd84":"\u5206","\ubd80\uc11c \ucd94\uac00":"\u90e8\u7f72\u8ffd\u52a0","\uc0ac\uc6a9\uc790 \ucd94\uac00":"\u30e6\u30fc\u30b6\u8ffd\u52a0","\uc0ad\uc81c":"\u524a\u9664","\ucd94\uac00":"\u8ffd\u52a0"},en:{"\ud544\uc218":"That is required.","(\ub300\uacb0)":"(Delegation)","(\uc804\uacb0)":"(Arbitrary)","\ubc18\ub824":"Reject","\uc2dc":":","\ubd84":"","\ubd80\uc11c \ucd94\uac00":"Add Department","\uc0ac\uc6a9\uc790 \ucd94\uac00":"Add User","\uc0ad\uc81c":"Delete","\ucd94\uac00":"Add"},zh_CN:{"\ud544\uc218":"\u5fc5\u987b\u503c\u3002","(\ub300\uacb0)":"(\u4ee3\u51b3)","(\uc804\uacb0)":"(\u4e13\u51b3)","\ubc18\ub824":"\u9a73\u56de","\uc2dc":"\u65f6","\ubd84":"\u5206","\ubd80\uc11c \ucd94\uac00":"\u8ffd\u52a0\u90e8\u95e8","\uc0ac\uc6a9\uc790 \ucd94\uac00":"\u6dfb\u52a0\u7528\u6237","\uc0ad\uc81c":"\u5220\u9664","\ucd94\uac00":"\u8ffd\u52a0"},zh_TW:{"\ud544\uc218":"\u5fc5\u9808\u503c\u3002","(\ub300\uacb0)":"(\u4ee3\u6c7a)","(\uc804\uacb0)":"(\u5c08\u6c7a)","\ubc18\ub824":"\u99c1\u56de","\uc2dc":"\u6642","\ubd84":"\u5206","\ubd80\uc11c \ucd94\uac00":"\u8ffd\u52a0\u90e8\u9580","\uc0ac\uc6a9\uc790 \ucd94\uac00":"\u6dfb\u52a0\u7528\u6236","\uc0ad\uc81c":"\u522a\u9664","\ucd94\uac00":"\u8ffd\u52a0"},vi:{"\ud544\uc218":"Gi\u00e1 tr\u1ecb b\u1eaft bu\u1ed9c.","(\ub300\uacb0)":"(\u1ee6y quy\u1ec1n ph\u00ea duy\u1ec7t)","(\uc804\uacb0)":"(T\u1ef1 ph\u00ea duy\u1ec7t)","\ubc18\ub824":"T\u1eeb ch\u1ed1i","\uc2dc":":","\ubd84":"","\ubd80\uc11c \ucd94\uac00":"Th\u00eam ph\u00f2ng ban","\uc0ac\uc6a9\uc790 \ucd94\uac00":"Th\u00eam ng\u01b0\u1eddi s\u1eed d\u1ee5ng","\uc0ad\uc81c":"X\u00f3a","\ucd94\uac00":"Th\u00eam"}},r=n[GO.session("locale")]||n.ko,i={span:'<span data-type="span" data-dsl="{{span}}" data-value=""></span>',text:'<span data-type="text" data-dsl="{{text}}" data-id="" data-name="" data-value=""></span>',number:'<span class="editor_num" data-type="num" data-dsl="{{num}}" data-id="" data-name="" data-value=""></span>',currency:'<span class="editor_currency" data-type="currency" data-dsl="{{currency}}" data-id="" data-name="" data-value=""></span>',textarea:'<span data-type="textarea" data-dsl="{{textarea}}" data-id="" data-name="" data-value=""></span>',editor:'<span class="editor_span" data-type="editor" data-dsl="{{editor}}" data-id="" data-name="" data-value="" style="width:100%"></span>',radio:'<span data-type="radio" data-dsl="{{radio}}" data-id="" data-name="" data-label="" data-value="" data-select=""></span>',check:'<span data-type="checkbox" data-dsl="{{check}}" data-id="" data-name="" data-label="" data-value=""></span>',calendar:'<span data-type="calendar" data-dsl="{{calendar}}" data-id="" data-name="" data-value=""></span>',period:'<span data-type="period" data-dsl="{{period}}" data-id="" data-name="" data-value=""></span>',time:'<select class="editor_slt" data-dsl="{{select}}" id=""></select>',select:'<span data-type="select" data-dsl="{{select}}" data-id="" data-name="" data-value=""></span>',name_pos:'<span data-type="system" data-dsl="{{name_pos}}" data-id="" data-name="" data-value=""></span>',user_name:'<span data-type="system" data-dsl="{{user_name}}" data-id="" data-name="" data-value=""></span>',user_pos:'<span data-type="system" data-dsl="{{user_pos}}" data-id="" data-name="" data-value=""></span>',user_empno:'<span data-type="system" data-dsl="{{user_empno}}" data-id="" data-name="" data-value=""></span>',user_org:'<span data-type="system" data-dsl="{{user_org}}" data-id="" data-name="" data-value=""></span>',today:'<span data-type="system" data-dsl="{{today}}" data-id="" data-name="" data-value=""></span>',reg_date:'<span data-type="system" data-dsl="{{reg_date}}" data-id="" data-name="" data-value=""></span>',label:'<span data-type="system" data-dsl="{{label}}" data-id="" data-name="" data-value=""></span>',customSelect:'<span data-type="customSelect" data-dsl="{{customSelect}}" data-id="" data-name="" data-value=""></span>',cSel:'<span data-type="cSel" data-dsl="{{cSel}}" data-selectval=""></span>',cSum:'<span class="editor_num" data-type="num" data-dsl="{{cSum}}" data-id="" data-name="" data-value=""></span>',rSum:'<span data-type="system" data-dsl="{{rSum}}" data-id="" data-name="" data-value=""></span>',cOrg:'<span data-dsl="{{cOrg}}" data-id="" data-selected=""></span>'},s="vertical-align:middle;width:100%;border:0px;box-shadow: inset 0px 0px 0px rgba(150,150,150,0.2)",o={span:'<span data-type="span" data-dsl="{{span}}" data-value=""></span>',text:'<input type="text" class="ipt_editor" data-dsl="{{text}}" name="" id="" value=""/>',number:'<input type="text" class="ipt_editor ipt_editor_num" data-dsl="{{num}}" name="" id="" value=""/>',currency:'<input type="text" class="ipt_editor ipt_editor_currency" data-dsl="{{currency}}" name="" id="" value=""/>',textarea:'<textarea class="txta_editor" data-dsl="{{textarea}}" name="" id="" value=""></textarea>',editor:'<span data-dsl="{{editor}}" name="" id="" style="width:100%; min-width: 200px;"></span>',radio:'<input type="radio" class="editor_opt" data-dsl="{{radio}}" name="" value="" />',check:'<input type="checkbox" class="editor_opt" data-dsl="{{check}}" id="" value=""/>',calendar:'<input type="text" readonly class="ipt_editor ipt_editor_date" data-dsl="{{calendar}}" id="" />',period:'<input type="text" readonly class="ipt_editor ipt_editor_date" data-dsl="{{calendar}}" id="" />',time:'<select data-dsl="{{select}}" id=""></select>',select:'<select class="editor_slt" data-dsl="{{select}}" id=""></select>',name_pos:'<input type="text" readonly style="'+s+'" data-dsl="{{name_pos}}" name="" id="" value=""/>',user_name:'<input type="text" readonly style="'+s+'" data-dsl="{{user_name}}" name="" id="" value=""/>',user_pos:'<input type="text" readonly style="'+s+'" data-dsl="{{user_pos}}" name="" id="" value=""/>',user_empno:'<input type="text" readonly style="'+s+'" data-dsl="{{user_empno}}" name="" id="" value=""/>',user_org:'<input type="text" readonly style="'+s+'" data-dsl="{{user_org}}" name="" id="" value=""/>',today:'<input type="text" readonly style="'+s+'" data-dsl="{{today}}" name="" id="" value=""/>',reg_date:'<input type="text" readonly style="'+s+'" data-dsl="{{reg_date}}" name="" id="" value=""/>',label:'<input type="text" readonly style="'+s+'" data-dsl="{{label}}" name="" id="" value=""/>',customSelect:'<select class="editor_slt" data-dsl="{{customSelect}}" id=""></select>',cSel:'<select class="editor_slt" data-type="cSel" data-dsl="{{cSel}}" data-selectval=""></select>',cSum:'<input type="text" class="ipt_editor ipt_editor_num" data-dsl="{{cSum}}" name="" id="" value=""/>',rSum:'<input type="text" readonly style="vertical-align:middle;text-align:right;width:100%;border:0px;box-shadow: inset 0px 0px 0px rgba(150,150,150,0.2)" data-dsl="{{rSum}}" name="" id="" value=""/>',cOrg:'<ul class="name_tag" data-dsl="{{cOrg}}" id="" data-selected=""></ul>'},u={type1:["<td>",'<table class="sign_member" id="activity_{activityId}">',"<tbody>",'<tr><td><span class="sign_rank">{header}</span></td></tr>','<tr><td class="wrap_name wrap_sign">{body}</td></tr>','<tr><td class="last">','<span class="sign_date" id="date_{activityId}">{completedAt}{status}</span></td></tr>',"</tbody>","</table>","</td>"],type1New:['<span class="sign_member_wrap" id="activity_{activityId}">','<span class="sign_member">','<span class="sign_rank_wrap">','<span class="sign_rank">{header}</span>',"</span>",'<span class="sign_wrap">{body}</span>','<span class="sign_date_wrap">','<span class="sign_date" id="date_{activityId}">{completedAt}{status}</span>',"</span>","</span>","</span>"],type2:['<span class="sign_member" id="activity_{activityId}">','<span class="department">{deptName}</span>','<span class="part">|</span>','<span class="name">{body} {header}</span>','<span class="status"></span>','<span class="date">{completedAt}</span>',"</span>"],type2EmptyName:['<span class="sign_member" id="activity_{activityId}">','<span class="department">{deptName}</span>','<span class="part"></span>','<span class="name"></span>','<span class="status"></span>','<span class="date">{completedAt}</span>',"</span>"]},a=["subject","appContent","draftUser","draftDept","draftDate","docNo","docNo$componentDocType","recipient","preserveDuration","securityLevel","docClassification","docReference","draftUserEmail","fax","completeDate","attachFile"];e.fn.replaceWithAndReturnNew=function(t){var n=e(this)[0],r=document.createElement("DIV");r.innerHTML=t;var i=r.firstChild;return n.parentNode.replaceChild(i,n),e(i)},e.customSettingHandler={setCustomSelect:function(t,n,r,i){var s="",o="";e.each(n,function(e,t){var n="";t.CD==r&&(n="selected",o=t.CD_NM),s+='<option value="'+t.CD+'" '+n+">"+t.CD_NM+"</option>"}),t.html(s),t.attr("data-label",o?o:n[0].CD_NM),t.off("change"),t.on("change",function(){var t=e(this).find(":selected").text();e(this).attr("data-label",t),typeof i=="function"&&i()})},setData:function(t,n){t.is(":visible")?t[0].tagName=="SPAN"?e(t).html(n):e(t).val(n):GO.Editor.getInstance(e(t).attr("id")).setContent(n)}},e.validateHandler={isCompleteRequiredForm:function(t){var n=!0;return t.find('input[data-require="true"],textarea[data-require="true"]').each(function(){if(e.trim(e(this).val())=="")return n=!1,!1}),n},getMaxLengthCheck:function(t){var n={result:!0};return t.find("input[data-maxlength],textarea[data-maxlength]").each(function(){if(e(this).attr("data-maxlength")&&e(this).val().length>parseInt(e(this).attr("data-maxlength")))return n={result:!1,maxlength:e(this).attr("data-maxlength"),errorId:e(this).attr("id")},!1}),n}},e.dataHandler={setDocVariables:function(e,t){var n=e;_.each(t,function(e,t){var r=n.find("[id='"+GO.util.replaceBrackets(t)+"']");if(r.attr("data-dsl")&&r.attr("data-dsl").search("cSum")>=0)return!0;r&&r.attr("data-id")!==undefined&&r.attr("data-type")!="span"&&r.attr("data-value")==""?r.val(e):r.attr("data-type")=="span"&&(e=e.replace(/</gi,"&lt;"),e=e.replace(/>/gi,"&gt;"),e=e.replace(/ /gi,"&nbsp;"),e=e.replace(/''/gi,'"'),e=e.replace(/\n/gi,"<br/>"),r.html(e))})},getDocVariables:function(t){var n=e(t).serializeArray(),r={};return _.each(n,function(e){_.contains(a,e.name)||(r[e.name]=e.value)}),r},changeActivity:function(t){var n=e("#activity_"+t.id),r=n.parent().attr("data-group-type"),i=m(r,t,"POSITION");n.replaceWith(i)},changeActivityGroups:function(t){var n=t.groups,r=t.config.isReception,i=t.config.displayDrafter,s=t.config.includeAgreement,o=t.config.activityBox,u=[];e.each(n,function(t,n){u=u.concat(_.select(n.activities,function(e){return e.type=="AGREEMENT"}));var a=e('[data-group-name="'+n.name+'"]'+(r?'[data-is-reception="true"]':'[data-is-reception!="true"]'));a.length>1&&(a=e('[data-group-seq="'+t+'"]'+(r?'[data-is-reception="true"]':'[data-is-reception!="true"]')));var f=a.attr("data-group-type"),l="";a.length&&(l=a[0].tagName==="SPAN"&&f=="type1"),l&&(f="type1New"),f=="type1"?a.find("table.tb_sign_type1").remove():l?a.empty():a.find("span.sign_member").remove();var c="",h=n.activities.length,p=!1;e.each(n.activities,function(e,t){if(!s&&t.type=="AGREEMENT")return!0;if(t.type=="CHECK")return!0;if(!i&&t.type=="DRAFT")return!0;p&&(t.isArbitrary=!0),p&&h-1==e&&(t.arbitraryStatus=!0),c+=m(f,t,o),t.status=="ARBITRARY"&&(p=!0)}),h>0&&c!=""&&(f=="type1"&&(c=['<table class="tb_sign_type1">',"<tbody>","<tr>","<th>"+n.name+"</th>",c,"</tr>","</tbody>","</table>"].join("")),f=="type1New"&&(c=['<span class="sign_tit_wrap">','<span class="sign_tit">',"<strong>"+n.name+"</strong>","</span>","</span>",c].join(""))),a.append(c)});if(!r){var a=e("#agreementWrap"),f=a.attr("data-group-type");a.length&&a[0].tagName==="SPAN"&&f==="type1"&&(f="type1New");var l=a.attr("data-group-name");a.find(".sign_member").remove();var c="";u.length>0&&a.find("table").length==0&&(f=="type1"&&(activityHtml=['<table class="tb_sign_type1">',"<tbody>","<tr>","<th>"+l+"</th>","</tr>","</tbody>","</table>"].join(""),a.append(activityHtml)),f=="type1New"&&(a.empty(),activityHtml=['<span class="sign_tit_wrap">','<span class="sign_tit">',"<strong>"+l+"</strong>","</span>","</span>"].join(""),a.append(activityHtml))),e.each(u,function(e,t){c+=m(f,t,o)}),f=="type1"?(a.find("tr td").remove(),a.find("tr").append(c)):a.append(c),u.length==0&&a.empty()}},getData:function(e){var t=e.target,n=t.find("#"+e.destination).val();return typeof n=="undefined"?t.find('span[data-id="'+e.destination+'"]').text():n},setData:function(t){var n=t.target,r=t.destination.recipient,i=t.destination.docReference,s=t.destination.docClassification,o=t.destination.officialDocReceiver;r&&typeof r=="object"&&(t.destination.recipient=r.join()),i&&typeof i=="object"&&(t.destination.docReference=i.join()),s&&typeof s=="object"&&(t.destination.docClassification=s.join()),o&&typeof s=="object"&&(t.destination.officialDocReceiver=o.join()),e.each(t.destination,function(t,r){var i=n.find("#"+t+',span[data-id="'+t+'"]');if(e(i).length==0)return!0;e(i)[0].nodeName=="INPUT"?i.val(r):i.text(r)})},setUserInfo:function(t){if(!t.userProfileApi){d();return}var n=t.isAdmin?"ad/":GO.instanceType=="admin"?"ad/":"",r=[t.contextRoot,n,t.userProfileApi+"/"+t.userId];e.ajax({url:r.join(""),type:"get",contentType:"application/json"}).done(function(n){var r=new Date,i=r.getFullYear()+"."+(r.getMonth()+1)+"."+r.getDate();e.each(e('form input[data-dsl="{{name_pos}}"]'),function(){var t=n.data.position!=undefined?n.data.position:GO.session("position"),r=n.data.name+" "+t;e(this).attr("data-value",r).val(r)}),e.each(e('form input[data-dsl="{{user_name}}"]'),function(){var t=n.data.name;e(this).attr("data-value",t).val(t)}),e.each(e('form input[data-dsl="{{user_pos}}"]'),function(){var t=n.data.position!=undefined?n.data.position:GO.session("position");e(this).attr("data-value",t).val(t)}),e.each(e('form input[data-dsl="{{user_empno}}"]'),function(){var t=n.data.employeeNumber!=undefined?n.data.employeeNumber:GO.session("employeeNumber");e(this).attr("data-value",t).val(t)}),e.each(e('form input[data-dsl="{{user_org}}"]'),function(){var n=t.deptName;e(this).attr("data-value",n).val(n)}),e.each(e('form input[data-dsl="{{today}}"]'),function(){e(this).attr("data-value",i).val(i)}),t.docType!="RECEIVE"&&e.each(e("form #draftDate"),function(){e(this).attr("data-value",t.draftDate).val(t.draftDate)})})}},e.pluginInitHandler={goPluginInit:function(t){var n=500,r=[],i=this;e.each(e('form span[data-dsl*="editor"]'),function(i,s){var o=e(s).attr("data-dsl");if(o.search("adminedit")>-1&&!t.isAdmin)return!0;var u=e(s).attr("data-defaultstr"),a=this,f=e(a).attr("id"),l=e(a).attr("data-skintype");l=="simple"&&e(a).css("min-width","200px");if(f){var c=e(this).attr("value");c==""&&u!=""&&GO.util.store.get("document.docStatus")=="CREATE"&&(c=e("#"+u).html());var h=e(a).goWebEditor({contextRoot:GO.config("contextRoot"),lang:GO.config("locale"),bUseVerticalResizer:!1,editorValue:c,theme:l});r.push(h)}n+=1300}),setTimeout(function(){e.when(r).then(function(){e(i).trigger("edit:complete")})},n),g()},approvalPluginInit:function(){g()}},e.editorParser={convertDslToSpan:function(e){return l(e)},getFormData:function(t){var n=t.serializeArray(),r="",i=[],s="",o=t.clone(),u=e('form span[data-dsl*="editor"]');for(var a=0;a<u.length;a++){var f={},c=e(u[a]);s=c.attr("id"),f.editorId=s;var h=GO.Editor.getInstance(s);h&&h.getContent&&typeof h.getContent=="function"?(c.attr("data-content-type")=="MIME"&&(f.isMimeType=!0),f.editorContent=GO.util.removeDataAttribute(GO.util.escapeXssFromHtml(h.getContent()))):f.editorContent=e("#"+s).html(),i.push(f)}o.find("iframe").remove(),e.each(o,function(t,n){e(n).find("[data-dsl]").each(function(){var t=e(this).attr("name"),n=e(this).attr("id"),r="";e(this).attr("data-type")&&e(this).attr("data-type").indexOf("span")!=-1?(r=e(this).html(),r=r.replace(/\n/gi,"")):r=e(this).val(),r!=null&&(r=r.replace(/"/gi,'"')),e(this).attr("data-dsl").search("editor")>-1&&(r="");var i=e(this).attr("data-label"),s=e(this).attr("data-select-type"),o={"data-name":t,"data-id":n,"data-value":r,"data-label":i,"data-select":r,value:r};e(this).attr("data-content-type")=="MIME"&&(o["data-content-type"]="MIME",o["data-editor"]="ActiveDesigner"),s&&(o["data-select-type"]=s),e(this).attr("data-selectval")&&(o["data-value"]="",o["data-select"]="",o["data-selectval"]=e(this).attr("data-selectval")),e(this).attr("data-selected")&&(o["data-selected"]=e(this).attr("data-selected")),e(this).attr("data-type")&&e(this).attr("data-type").indexOf("span")!=-1?e(this).replaceWithAndReturnNew(l(e(this).attr("data-dsl"))).attr(o).html(r):e(this).replaceWithAndReturnNew(l(e(this).attr("data-dsl"))).attr(o).text("")}),r+=e(n).clone().wrapAll("<div/>").parent().html()});var p=e(r).clone();e.each(n,function(t,n){p.find('[data-name="'+n.name+'"]').each(function(t,r){n.value=n.value.replace(/"/gi,'"');var i=e(r),s=i.attr("data-dsl");if(s.search("textarea")>=0||(s.search("select")&&i.attr("data-type")&&i.attr("data-type").search("select"))>=0){i.attr("data-value",n.value).text(n.value);var o=i.text().replace(/\n/gi,"<br/>").replace(/ /gi,"&nbsp;");i.html(o)}else s.search("cSel")>=0?i.text(n.value):s.search("customSelect")>=0?i.text(i.attr("data-label")):i.attr("data-select")==n.value&&(i.attr("data-value",n.value).text(i.attr("data-label")?i.attr("data-label"):n.value),i.attr("data-select-option",!0))})}),p.find('label[data-type="removeSpan"]').remove(),p.find('span[data-type="radio"],span[data-type="checkbox"]').each(function(){if(e(this).text()==""){if(e(this).attr("data-select-option")=="true")return!0;e(this).hide().text(e(this).attr("data-value"))}}),p.find('span[data-dsl*="cOrg"]').each(function(){var t=e(this);t.text()==""&&t.text(t.attr("data-selected").split(",").map(function(e){return e.split("#")[0]}).join(","))});if(i.length>0)for(var d=0;d<i.length;d++)if(i[d].isMimeType){var v=document.createElement("textarea");v.appendChild(document.createTextNode(i[d].editorContent)),p.find('span[data-id="'+i[d].editorId+'"]').html("").html(v)}else p.find('span[data-id="'+i[d].editorId+'"]').html("").html(i[d].editorContent);return p.html()},convertViewMode:function(t){t=GO.util.convertMSWordTag(t);var n=e.parseHTML(t,document,!0),r="";return e.each(e(n).clone(),function(t,n){e(n).find('span[data-type="radio"],span[data-type="checkbox"]').each(function(){var t=e(this).attr("data-type"),n="",r="",i="",s=e(this).attr("data-id"),o=e(this).attr("data-dsl"),u=e(this).attr("data-name"),a=e(this).attr("data-label"),f=e(this).attr("data-value"),l=e(this).attr("data-require"),c=["<input type=",'"',t,'"',' class="editor_opt" data-dsl=','"',o,'"'," id=",'"',s,'"'," name=",'"',u,'"'," data-label=",'"',a,'"'," value=",'"',f,'"'," data-require=",'"',l,'"'];e(this).css("display")=="none"?(c.push("  disabled/>"),n=c.join(""),i="inactive"):(c.push(" checked disabled/>"),n=c.join(""),i=""),r+=n+"<label class='editor_label "+i+"'>"+e(this).attr("data-label")+"</label>&nbsp;",e(this).replaceWithAndReturnNew("<span>"+r+"</span>")}),e(n).find('span[data-type="textarea"],span[data-type="text"]').not('span[data-dsl*="editor"] span[data-type=textarea],span[data-dsl*="editor"] span[data-type="text"]').each(function(t,n){var r=e(n).attr("data-value");r=GO.util.textToHtml(r),e(this).html(r)}),r+=e(n).clone().wrapAll("<div/>").parent().html()}),r},convertHtml:function(t){function a(t,n){for(;;){var r=!1;t.each(function(i,s){n!=s&&(e(s).attr("data-id")=="editorForm_"+this.cnt||e(s).attr("data-name")=="editorForm_"+this.cnt)&&(r=!0)});if(!r)return this.cnt;this.cnt++}}var n=t.data;t.angleBracketReplace&&(n=n.replace(/&lt;/gi,"<"),n=n.replace(/&gt;/gi,">"));var i=e.parseHTML(n,document,!0),s=t.isAdmin,o="";this.cnt=0;var u=this;return this.getUnusedSeqNum=a,e.each(e(i).clone().wrapAll("<div/>").parent(),function(t,n){function i(e,t){return t||(t="_"),e.split(t)}u.components=e(n).find("span[data-dsl],input[data-dsl]"),u.components.each(function(){var t=e(this).attr("data-dsl"),n=e(this).attr("data-autotype")=="true",o;t.replace(/{{([^}}]*)}}/g,function(e,t){o=t});var a=e(this).attr("data-dsl"),l,p,d,v,m=[],g=[],y=[];if(o.search("radio")>=0){var b=i(o);l="";if(e(this).prop("tagName")!="INPUT")if(e(this).attr("data-select")){v=e(c(a)).attr({id:e(this).attr("data-id"),name:e(this).attr("data-name"),"data-label":e(this).attr("data-label"),value:e(this).attr("data-value")});var w=e(this).attr("data-label");f()?l+=v.prop("checked",e(this).css("display")!="none").clone().wrapAll("<div/>").parent().html()+"<label class='editor_label' data-type='removeSpan'>"+w+"</label>":l+=v.attr("checked",e(this).css("display")!="none").clone().wrapAll("<div/>").parent().html()+"<label class='editor_label' data-type='removeSpan'>"+w+"</label>",e(this).replaceWithAndReturnNew("<span>"+l+"</span>");var E=_.last(b);_.isEqual(w,E)&&u.cnt++}else{if(b.length==1){var S=b[0].split(":")[1],x=S?S:e(this).attr("data-id")?e(this).attr("data-id"):"editorForm_"+u.getUnusedSeqNum(u.components,this)+"_radio";l+=e(c(a)).attr({id:x,name:x,"data-label":"",value:S?S:"none",checked:e(this).attr("data-select")=="none"}).clone().wrapAll("<div/>").parent().html()}else{var T="";for(var N=1;N<b.length;N++){var C=b[N].split(":"),k=C[0],S=C[1];n?(o.replace(/:apprLineRuleOption/g,function(e){o=o.replace(e,""),T=e.replace(":","")}),T||(T=o.split(":")[1])):T=o.search("radio")>=0?"editorForm_"+u.getUnusedSeqNum(u.components,this):"editorForm_"+u.getUnusedSeqNum(u.components,this)+"_"+b[N],l+=e(c(a)).attr({id:S?S:e(this).attr("data-id")?e(this).attr("data-id"):"editorForm_"+u.getUnusedSeqNum(u.components,this)+"_"+b[N],name:e(this).attr("data-name")?e(this).attr("data-name"):T,"data-label":k,value:S?S:b[N],checked:N==1}).clone().wrapAll("<div/>").parent().html()+"<label class='editor_label' data-type='removeSpan'>"+C[0]+"</label>"}}e(this).replaceWithAndReturnNew("<span>"+l+"</span>"),u.cnt++}else e(this).attr("disabled",!1),e(this).next().attr("data-type","removeSpan")}else if(o.search("check")>=0){var b=i(o);l="";if(e(this).prop("tagName")!="INPUT")if(e(this).attr("data-select")){v=e(c(a)).attr({id:e(this).attr("data-id"),name:e(this).attr("data-name"),"data-label":e(this).attr("data-label"),value:e(this).attr("data-value")});var w=e(this).attr("data-label");f()?l=v.prop("checked",e(this).css("display")!="none").clone().wrapAll("<div/>").parent().html()+"<label class='editor_label' data-type='removeSpan'>"+w+"</label>":l=v.attr("checked",e(this).css("display")!="none").clone().wrapAll("<div/>").parent().html()+"<label class='editor_label' data-type='removeSpan'>"+w+"</label>",e(this).replaceWithAndReturnNew("<span>"+l+"</span>");var E=_.last(b);_.isEqual(w,E)&&u.cnt++}else{if(b.length==1){var S=b[0].split(":")[1];l+=e(c(a)).attr({id:S?S:e(this).attr("data-id")?e(this).attr("data-id"):"editorForm_"+u.getUnusedSeqNum(u.components,this)+"_check",name:e(this).attr("name")?e(this).attr("name"):"editorForm_"+u.getUnusedSeqNum(u.components,this)+"_check","data-label":"",value:S?S:"none",checked:e(this).attr("data-select")=="none"}).clone().wrapAll("<div/>").parent().html()}else for(var N=1;N<b.length;N++){var C=b[N].split(":"),k=C[0],S=C[1];l+=e(c(a)).attr({id:S?S:e(this).attr("data-id")?e(this).attr("data-id"):"editorForm_"+u.getUnusedSeqNum(u.components,this)+"_"+b[N],name:e(this).attr("name")?e(this).attr("name"):"editorForm_"+u.getUnusedSeqNum(u.components,this)+"_"+C[0],"data-label":k,value:S?S:b[N]}).attr("checked",e(this).attr("data-select-option")=="true"?!0:!1).clone().wrapAll("<div/>").parent().html()+"<label class='editor_label' data-type='removeSpan'>"+C[0]+"</label>"}e(this).replaceWithAndReturnNew("<span>"+l+"</span>"),u.cnt++}else e(this).attr("disabled",!1),e(this).next().attr("data-type","removeSpan")}else if(o.search("period")>=0){l="";for(var N=0;N<2;N++)l+=e(c(a)).attr({id:e(this).attr("data-id")?e(this).attr("data-id"):"editorForm_"+u.getUnusedSeqNum(u.components,this),name:e(this).attr("data-id")?e(this).attr("data-id"):"editorForm_"+u.getUnusedSeqNum(u.components,this)}).clone().wrapAll("<div/>").parent().html(),N==0&&(l+=" ~ "),u.cnt++;e(this).replaceWithAndReturnNew("<span data-type='period' data-value=''>"+l+"</span>")}else if(o.search("time")>=0){m=[],g=[],y=[];for(var N=0;N<24;N++)m.push(N<10?"0"+N:N+"");for(var L=0;L<60;L++)g.push(L<10?"0"+L:L+"");y.push(m),y.push(g),l="";for(var N=0;N<2;N++){var A="";e.each(y[N],function(e,t){A+='<option value="'+t+'">'+t+"</option>"}),l+=e(c(a)).attr({id:e(this).attr("data-id")?e(this).attr("data-id"):"editorForm_"+u.getUnusedSeqNum(u.components,this),name:e(this).attr("data-name")?e(this).attr("data-name"):"editorForm_"+u.getUnusedSeqNum(u.components,this),"data-select-type":N==0?"hour":"minute","class":"editor_slt"}).append(A).clone().wrapAll("<div/>").parent().html(),N==0?l+=r["\uc2dc"]+" ":l+=r["\ubd84"]+" ",u.cnt++}e(this).replaceWithAndReturnNew("<span data-type='time' data-value=''>"+l+"</span>")}else if(o.search("select")>=0){m=[],g=[],y=[];for(var N=0;N<24;N++)m.push(N<10?"0"+N:N+"");for(var L=0;L<60;L++)g.push(L<10?"0"+L:L+"");l="";var A="";p=e(this).attr("data-value"),e(this).attr("data-select-type")=="hour"?(e.each(m,function(e,t){var n="";p==t&&(n="selected"),A+='<option value="'+t+'" '+n+">"+t+"</option>"}),l=e(c(a)).attr({id:e(this).attr("data-id")?e(this).attr("data-id"):"editorForm_"+u.getUnusedSeqNum(u.components,this),name:e(this).attr("data-name")?e(this).attr("data-name"):"editorForm_"+u.getUnusedSeqNum(u.components,this),"data-select-type":"hour"}).append(A).clone().wrapAll("<div/>").parent().html(),u.cnt++):(e.each(g,function(e,t){var n="";p==t&&(n="selected"),A+='<option value="'+t+'" '+n+">"+t+"</option>"}),l=e(c(a)).attr({id:e(this).attr("data-id")?e(this).attr("data-id"):"editorForm_"+u.getUnusedSeqNum(u.components,this),name:e(this).attr("data-name")?e(this).attr("data-name"):"editorForm_"+u.getUnusedSeqNum(u.components,this),"data-select-type":"minute"}).append(A).clone().wrapAll("<div/>").parent().html(),u.cnt++),e(this).replaceWithAndReturnNew(l)}else if(o.search("cSel")>=0){var b=i(o),O,S;d="",b[0].search(":")>=0&&(O=b[0].substring(0,b[0].search(":")),S=b[0].substring(b[0].search(":")+1)),p=e(this).attr("data-selectval");for(var N=1;N<b.length;N++){var M="";b[N]==p&&(M="selected"),d+="<option value='"+b[N]+"' "+M+">"+b[N]+"</option>"}n?l=e(c(a)).attr({id:S?S:"",name:S?S:"","data-selectval":p}).append(d).wrapAll("<div/>").parent().html():l=e(c(a)).attr({id:S?S:"",name:e(this).attr("data-name")?e(this).attr("data-name"):"editorForm_"+u.getUnusedSeqNum(u.components,this),"data-selectval":p}).append(d).wrapAll("<div/>").parent().html(),u.cnt++,e(this).replaceWithAndReturnNew(l)}else if(o.search("cOrg")>=0){var D="list";o.replace(/\$department\$/g,function(e){D="department",o=o.replace(e,"")});var S=o.split(":")[1];p=e(this).attr("data-selected");var P="";p&&_.each(p.split(","),function(e){if(e!=""){var t=e.split("#"),n=t[1]==undefined?"":t[1];GO.util.isMobile()?P+="<li data-id='"+n+"'><span class='name'>"+t[0]+"</span><span class='btn_wrap'><span title='\uc0ad\uc81c' class='ic ic_del'></span></span></li>":P+="<li data-id='"+n+"'><span class='name'>"+t[0]+"</span><span class='btn_wrap'><span title='\uc0ad\uc81c' class='ic_classic ic_del'></span></span></li>"}},this),P+="<li class='creat'>",P+="<span class='btn_wrap' id='"+S+"_Add"+"'>",P+=" <span class='ic_form ic_addlist'></span>",P+="<span class='txt'>",P+=r["\ucd94\uac00"],P+="</span></span>",P+="</li>",l=e(c(a)).attr({id:S?S:"","data-selected":p?p:"","data-orgtype":D}).append(P).wrapAll("<div/>").parent().html(),u.cnt++,e(this).replaceWithAndReturnNew(l)}else if(o.search("calendar")>=0){var H="",B="",j=/(\$require\$)/gi,F=!1;j.test(o)&&(F=!0,o=o.replace(j,"")),o.replace(/\$width:([0-9]*)\$/g,function(e,t){H=t,o=o.replace(e,"")}),o.replace(/\$defaultstr:(.*)\$/g,function(e,t){B=t,o=o.replace(e,"")});var b=i(o,":"),I,x=b[1]?b[1]:e(this).attr("data-id")?e(this).attr("data-id"):"editorForm_"+u.getUnusedSeqNum(u.components,this);try{I=e(this).attr("data-value")?GO.util.basicDate2(e(this).attr("data-value").split("(")[0],null):""}catch(q){}var R=e(this).replaceWithAndReturnNew(c(a)).attr({id:x,name:x,"data-value":I?I:e(this).html(),"data-require":F,placeholder:F?r["\ud544\uc218"]:"","data-width":H,"data-defaultstr":B,"data-editable":e(this).attr("data-editable")=="true",value:I?I:e(this).html()});s==0&&e(this).attr("data-editable")=="false"&&(R.attr("readonly",!0),R.html(e(this).html())),u.cnt++}else{var U="",H="",B="",z="detail",j=/(\$require\$)/gi,W=/(\$adminedit\$)/gi,F=!1;j.test(o)&&(F=!0,o=o.replace(j,"")),W.test(o)&&(o=o.replace(W,"")),o.replace(/\$maxlength:([0-9]*)\$/g,function(e,t){U=t,o=o.replace(e,"")}),o.replace(/\$width:([0-9]*)\$/g,function(e,t){H=t,o=o.replace(e,"")}),o.replace(/\$simple\$/g,function(e){z="simple",o=o.replace(e,"")}),o.replace(/\$defaultstr:(.*)\$/g,function(e,t){B=t,o=o.replace(e,"")});var X=e(this).attr("data-value");X=X&&X.replace(/''/gi,'"');var b=i(o,":"),V=!1;if(o.search("currency")>=0||o.search("cSum")>=0)V=!0;var x=b[1]?b[1]:e(this).attr("data-id")?e(this).attr("data-id"):"editorForm_"+u.getUnusedSeqNum(u.components,this),R=e(this).replaceWithAndReturnNew(c(a)).attr({id:x,name:x,"data-value":e(this).attr("data-value")?e(this).attr("data-value"):e(this).html(),"data-require":F,"data-maxlength":U,"data-width":H,"data-defaultstr":B,"data-editable":e(this).attr("data-editable")=="true",placeholder:F&&h(V)?r["\ud544\uc218"]:"",value:e(this).attr("data-value")?X:e(this).html()});s==0&&e(this).attr("data-editable")=="false"&&(R.attr("readonly",!0),R.html(e(this).html())),e(R)[0].nodeName=="SPAN"&&e(R).attr("data-dsl").search("editor")>=0&&(e(R).parent().height()>0?R.height(e(R).parent().height()):R.height(400),R.attr("data-skintype",z)),e(R)[0].nodeName=="SPAN"&&e(this).attr("data-type")&&e(this).attr("data-type").search("span")>=0&&R.html(X),R[0].nodeName=="TEXTAREA"&&R.text(X),u.cnt++}}),o+=e(n).clone().html()}),o}}});