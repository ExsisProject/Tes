(function(e){var t=Array.prototype.slice,n=e.goAliasOrgSlide=function(){if(arguments[0]==="close")return n.close();var e=t.call(arguments);return n.initialize.apply(n,e)};e.extend(n,{version:"0.0.1",popupEl:null,keyword:null,callback:null,contextRoot:null,eventTime:null,eventId:null,defaultLocale:"ko",lang:{ko:{"\ub2eb\uae30":"\ub2eb\uae30","\uc120\ud0dd":"\uc120\ud0dd","\uc774\ub984, \uc544\uc774\ub514":"\ubcc4\uce6d \uc774\ub984, \uc544\uc774\ub514","\uac80\uc0c9":"\uac80\uc0c9","\ub354\ubcf4\uae30":"\ub354\ubcf4\uae30","\uc870\uc9c1\uc21c":"\uc870\uc9c1\uc21c","\uac00\ub098\ub2e4\uc21c":"\uac00\ub098\ub2e4\uc21c","\uba64\ubc84\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.":"\uba64\ubc84\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.","\uac80\uc0c9\uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.":"\uac80\uc0c9\uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.","\uacb0\uacfc\uac12\uc774 \ub9ce\uc2b5\ub2c8\ub2e4. \uac80\uc0c9\uc744 \uc774\uc6a9\ud574 \uc8fc\uc138\uc694.":"\uacb0\uacfc\uac12\uc774 \ub9ce\uc2b5\ub2c8\ub2e4. \uac80\uc0c9\uc744 \uc774\uc6a9\ud574 \uc8fc\uc138\uc694."},ja:{"\ub2eb\uae30":"\u9589\u3058\u308b","\uc120\ud0dd":"\u9078\u629e","\uc774\ub984, \uc544\uc774\ub514":"\u30a8\u30a4\u30ea\u30a2\u30b9\u540d\u3001ID","\uac80\uc0c9":"\u691c\u7d22","\ub354\ubcf4\uae30":"\u3082\u3063\u3068\u898b\u308b","\uc870\uc9c1\uc21c":"\u7d44\u7e54\u9806","\uac00\ub098\ub2e4\uc21c":"abc\u9806","\uba64\ubc84\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.":"\u30e1\u30f3\u30d0\u30fc\u304c\u3042\u308a\u307e\u305b\u3093\u3002","\uac80\uc0c9\uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.":"\u691c\u7d22\u7d50\u679c\u304c\u3042\u308a\u307e\u305b\u3093\u3002","\uacb0\uacfc\uac12\uc774 \ub9ce\uc2b5\ub2c8\ub2e4. \uac80\uc0c9\uc744 \uc774\uc6a9\ud574 \uc8fc\uc138\uc694.":"\u7d50\u679c\u5024\u304c\u591a\u3044\u3067\u3059\u3002\u691c\u7d22\u3092\u5229\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002"},en:{"\ub2eb\uae30":"Close","\uc120\ud0dd":"Select","\uc774\ub984, \uc544\uc774\ub514":"Alias Nname, ID","\uac80\uc0c9":"Search","\ub354\ubcf4\uae30":"View More","\uc870\uc9c1\uc21c":"By Organization","\uac00\ub098\ub2e4\uc21c":"By Alphabet","\uba64\ubc84\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.":"No Member","\uac80\uc0c9\uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.":"No Result","\uacb0\uacfc\uac12\uc774 \ub9ce\uc2b5\ub2c8\ub2e4. \uac80\uc0c9\uc744 \uc774\uc6a9\ud574 \uc8fc\uc138\uc694.":"There are too many results. Please use the search function."},zh_CN:{"\ub2eb\uae30":"\u5173\u95ed","\uc120\ud0dd":"\u9009\u62e9","\uc774\ub984, \uc544\uc774\ub514":"\u522b\u540d\uff0cID","\uac80\uc0c9":"\u641c\u7d22","\ub354\ubcf4\uae30":"\u67e5\u770b\u66f4\u591a","\uc870\uc9c1\uc21c":"\u7ec4\u7ec7\u987a\u5e8f","\uac00\ub098\ub2e4\uc21c":"abc\u987a\u5e8f","\uba64\ubc84\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.":"\u6ca1\u6709\u4f1a\u5458","\uac80\uc0c9\uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.":"\u6ca1\u6709\u641c\u7d22\u7ed3\u679c\u3002","\uacb0\uacfc\uac12\uc774 \ub9ce\uc2b5\ub2c8\ub2e4. \uac80\uc0c9\uc744 \uc774\uc6a9\ud574 \uc8fc\uc138\uc694.":"\u7ed3\u679c\u592a\u591a\u3002\u8bf7\u4f7f\u7528\u641c\u7d22\u529f\u80fd\u3002"},zh_TW:{"\ub2eb\uae30":"\u95dc\u9589","\uc120\ud0dd":"\u9078\u64c7","\uc774\ub984, \uc544\uc774\ub514":"\u5225\u540d\uff0cID","\uac80\uc0c9":"\u641c\u7d22","\ub354\ubcf4\uae30":"\u67e5\u770b\u66f4\u591a","\uc870\uc9c1\uc21c":"\u7d44\u7e54\u9806\u5e8f","\uac00\ub098\ub2e4\uc21c":"abc\u9806\u5e8f","\uba64\ubc84\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.":"\u6c92\u6709\u6703\u54e1","\uac80\uc0c9\uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.":"\u6c92\u6709\u641c\u7d22\u7d50\u679c\u3002","\uacb0\uacfc\uac12\uc774 \ub9ce\uc2b5\ub2c8\ub2e4. \uac80\uc0c9\uc744 \uc774\uc6a9\ud574 \uc8fc\uc138\uc694.":"\u7d50\u679c\u592a\u591a\u3002\u8acb\u4f7f\u7528\u641c\u7d22\u529f\u80fd\u3002"},vi:{"\ub2eb\uae30":"\u0110\u00f3ng","\uc120\ud0dd":"Ch\u1ecdn","\uc774\ub984, \uc544\uc774\ub514":"H\u1ecd t\u00ean, t\u00e0i kho\u1ea3n","\uac80\uc0c9":"T\u00ecm ki\u1ebfm","\ub354\ubcf4\uae30":"Xem th\u00eam","\uc870\uc9c1\uc21c":"Theo t\u1ed5 ch\u1ee9c","\uac00\ub098\ub2e4\uc21c":"Theo Alphabet","\uba64\ubc84\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.":"Kh\u00f4ng c\u00f3 th\u00e0nh vi\u00ean.","\uac80\uc0c9\uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.":"Kh\u00f4ng c\u00f3 K\u1ebft qu\u1ea3 t\u00ecm ki\u1ebfm.","\uacb0\uacfc\uac12\uc774 \ub9ce\uc2b5\ub2c8\ub2e4. \uac80\uc0c9\uc744 \uc774\uc6a9\ud574 \uc8fc\uc138\uc694.":"C\u00f3 nhi\u1ec1u gi\u00e1 tr\u1ecb k\u1ebft qu\u1ea3. Vui l\u00f2ng s\u1eed d\u1ee5ng t\u00ecm ki\u1ebfm."}},i18n:{},defaults:{id:"gpopupLayer",treeId:"orgTree",type:"list",isAdmin:!1,isMyDeptOpened:!0,tpl:{wrap:['<div class="layer_side layer_organogram" id="{popupId}"><aside class="go_organogram">','<header><h1><ins class="ic"></ins><span class="txt">{header}</span></h1>','<a class="btn_layer_x" data-bypass title="{msg_close}"><span class="ic"></span><span class="txt"></span></a></header>','<div class="vertical_wrap"><p class="desc">{desc}</p><p class="desc headerOption" style="display:block;">{headerOption}</p></div>',"{searchForm}","{contents}",'<section class="extra_content"></section>','<footer class="btn_layer_wrap">','<a class="btn_minor_s" data-bypass><span class="txt">{msg_close}</span></a>',"</footer>","</aside></div>"],searchForm:['<div class="search_wrap"><form onSubmit="return false;">','<input class="search" type="text" placeholder="{msg_search_placeholder}">','<input class="btn_search" type="submit" value="{msg_search}" title="{msg_search}"></form>',"</div>"],contentsTab:['<div class="tab_wrap" id="orgTabs">','<div id="orgTree" class="content_tab_wrap"><div></div></div>','<div id="memberList" class="content_tab_wrap xhidden" style="display:none"></div></div>']}},template:function(e,t){return e.replace(/{(\w*)}/g,function(e,n){return t.hasOwnProperty(n)?t[n]:""})},getPopupEl:function(){return this.popupEl||e("#"+n.defaults.id)},getHeaderHeight:function(){return e(this.isAdmin?".admin_header":".go_header").height()},close:function(){var t=this.getPopupEl();return t.find("#orgTabs").empty(),t.remove(),e(window).unbind("scroll.org"),!1},popupOffset:function(t,r){var i=t||null,s=0,o=0,u=n.getPopupEl(),a=200;contentMaxHeight=e(window).height()-500,contentHeight=0,r==1&&(contentHeight=parseInt(e(window).innerHeight()-u.find(".content_wrap:eq(0), .content_tab_wrap:eq(0)").offset().top-120,10),contentHeight<a&&(contentHeight=a),u.find(".content_wrap, .content_tab_wrap").css({minHeight:a,maxHeight:contentMaxHeight<a?a:contentMaxHeight})),i!=null&&i.hasOwnProperty("currentTarget")?(s=e(i.currentTarget).offset().top-30,s<50&&(s=50),e(window).innerHeight()-s<u.height()?u.css({position:"absolute",bottom:40,right:10,top:"auto"}):u.css({position:"absolute",top:s,right:10})):u.css({position:"fixed",top:60,right:10})},initialize:function(t){this.isAjaxDouble=!1,this.options=e.extend(!0,{},this.defaults,t);if(this.options.lang&&this.lang.hasOwnProperty(this.options.lang))this.i18n=this.lang[this.options.lang];else{var n=e('meta[name="locale"]').attr("content");n=="jp"&&(n="ja"),n&&this.lang.hasOwnProperty(n)?this.i18n=this.lang[n]:this.i18n=this.lang[this.defaultLocale]}return this.render(),this},render:function(){var t=this,r=this.options,i=r.header||this.i18n["\uc120\ud0dd"],s=r.headerOption||"",o=r.desc||"",u=n.defaults.tpl.contentsTab,a=null,f="";this.circle=r.circle||null,this.popupEl=this.popupEl||null,this.loadId=r.loadId||"",this.includeLoadIds=r.includeLoadIds||[],this.type=r.type||this.defaults.type,this.callback=r.callback||"",this.contextRoot=r.contextRoot||"",this.isAdmin=r.isAdmin||this.defaults.isAdmin,this.buttons=r.buttons||null,this.hideOrg=r.hasOwnProperty("hideOrg")?r.hideOrg:this.loadId?!0:!1,this.searchUse=this.type!="department",this.target=r.target||null,this.searchPlaceHolder=this.i18n["\uc774\ub984, \uc544\uc774\ub514"],this.zIndex=r.zIndex,this.aliasId=r.aliasId,this.popupEl&&(n.close(),n.keyword=null),n.defaults.tpl[this.type]&&(u=n.defaults.tpl[this.type]),this.searchUse&&(f=n.template(n.defaults.tpl.searchForm.join(""),{msg_search_placeholder:this.searchPlaceHolder,msg_search:this.i18n["\uac80\uc0c9"]})),this.popupEl=e(n.template(n.defaults.tpl.wrap.join(""),{msg_close:this.i18n["\ub2eb\uae30"],contents:u.join(""),searchForm:f,popupId:n.defaults.id,header:i,headerOption:s,desc:o})).appendTo("body"),this.popupEl.off(),this.searchUse&&this.popupEl.find("input[placeholder]").placeholder(),this._renderAliasNodeList(),this.searchUse&&(this.popupEl.find("input.search").bind("keyup",function(r){return clearTimeout(this.clearTimeOut),this.clearTimeOut=setTimeout(function(){if(r.keyCode==13)return n._renderAliasNodeList(),e(r.currentTarget).focus(),!1;if(r){var i=e.trim(e(r.currentTarget).val());i!=""&&n.keyword!=i&&e.proxy(n._renderAliasNodeList()),n.keyword=i,i==""&&(t.render(),t.nodeTree.deferred.done(function(){t.popupEl.find("input.search").focus()}))}},200),!1}),this.popupEl.find("input.btn_search").bind("click",function(e){n._renderAliasNodeList()}));if(this.buttons!=null){var l=this.popupEl.find(".btn_layer_wrap");e.each(this.buttons,function(e,r){l.prepend('<a id="customButtons'+e+'" class="'+(r.bclass||"btn_major_s")+'" data-bypass=""><span class="txt">'+r.btext+"</span></a> "),l.find("#customButtons"+e).bind("click.org",function(){if(typeof r.callback=="function"){var e=t._getSelectedData();r.callback(e)}r.autoClose&&n.close()})})}this.popupEl.find("a.btn_layer_x, a.btn_minor_s").bind("click.org",function(){n.close()}),this.popupEl.on("data:success",function(){n.popupOffset(t.target,!0)}),this.popupEl.draggable({handle:"header, footer",containment:"parent",scroll:!1,opacity:.9,start:function(){},drag:function(e,t){}}),this.zIndex&&this.popupEl.css("z-index",this.zIndex);return},_getSelectedData:function(){if(n.type=="department")return this.nodeTree.getSelectedData()},_renderAliasNodeList:function(t){var r=n.popupEl.find("input.search"),i=e.trim(r.attr("placeholder")==r.val()?"":r.val());this.popupEl.find("#orgTree").hide(),e("#memberList").empty(),this.nodeList=e.goAliasNodeList({i18n:this.i18n,circle:this.circle,type:this.type,isAdmin:this.isAdmin,parentNodeId:this.loadId,parentNodeIds:this.includeLoadIds,selectQuery:"#memberList",keyword:i,contextRoot:this.contextRoot,aliasId:this.aliasId,callback:e.proxy(function(t,n){(n.type==="click"||n.type==="select_node")&&e.isFunction(this.callback)&&this.callback(t)},this)}),this.nodeList.$el.show()}})})(jQuery);